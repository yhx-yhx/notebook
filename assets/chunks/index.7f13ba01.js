import{h as S,D as Z,V as de,g as c,l as a,$ as pe,d as I,o as m,c as k,r as U,N as M,w as _,a8 as A,k as w,n as g,t as G,a9 as q,T as J,aa as fe,j as me,z as ge,b,W as ve,e as T,S as ye,K as Ce,a3 as be,ab as F,ac as W,ad as E,ae as H}from"./framework.7d9b3b51.js";import{a as he,b as Te,d as Se,l as _e,z as xe,S as Ie,k as K,m as Ne,i as Y,c as ze,e as ke,f as we,E as Ee}from"./index.de6006ef.js";import{u as Q,f as Be,n as Me,b as X,g as B,_ as ee,w as $e,i as Le,d as P,T as V,E as j,h as Oe,j as De,k as Fe}from"./index.73179d7b.js";const se=Symbol(),x=S();function ne(s,n=void 0){const e=Z()?de(se,x):x;return s?c(()=>{var o,t;return(t=(o=e.value)==null?void 0:o[s])!=null?t:n}):e}function He(s,n){const e=ne(),o=Q(s,c(()=>{var l;return((l=e.value)==null?void 0:l.namespace)||Be})),t=he(c(()=>{var l;return(l=e.value)==null?void 0:l.locale})),r=Te(c(()=>{var l;return((l=e.value)==null?void 0:l.zIndex)||Se})),u=c(()=>{var l;return a(n)||((l=e.value)==null?void 0:l.size)||""});return Ke(c(()=>a(e)||{})),{ns:o,locale:t,zIndex:r,size:u}}const Ke=(s,n,e=!1)=>{var o;const t=!!Z(),r=t?ne():void 0,u=(o=n==null?void 0:n.provide)!=null?o:t?pe:void 0;if(!u)return;const l=c(()=>{const f=a(s);return r!=null&&r.value?Pe(r.value,f):f});return u(se,l),u(_e,c(()=>l.value.locale)),u(Me,c(()=>l.value.namespace)),u(xe,c(()=>l.value.zIndex)),u(Ie,{size:c(()=>l.value.size||"")}),(e||!x.value)&&(x.value=l.value),l},Pe=(s,n)=>{var e;const o=[...new Set([...K(s),...K(n)])],t={};for(const r of o)t[r]=(e=n[r])!=null?e:s[r];return t},R={},Ve=X({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),je=["textContent"],Re=I({name:"ElBadge"}),Ze=I({...Re,props:Ve,setup(s,{expose:n}){const e=s,o=Q("badge"),t=c(()=>e.isDot?"":B(e.value)&&B(e.max)?e.max<e.value?`${e.max}+`:`${e.value}`:`${e.value}`);return n({content:t}),(r,u)=>(m(),k("div",{class:g(a(o).b())},[U(r.$slots,"default"),M(J,{name:`${a(o).namespace.value}-zoom-in-center`,persisted:""},{default:_(()=>[A(w("sup",{class:g([a(o).e("content"),a(o).em("content",r.type),a(o).is("fixed",!!r.$slots.default),a(o).is("dot",r.isDot)]),textContent:G(a(t))},null,10,je),[[q,!r.hidden&&(a(t)||r.isDot)]])]),_:1},8,["name"])],2))}});var Ue=ee(Ze,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const Ae=$e(Ue),te=["success","info","warning","error"],d=Ne({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:Y?document.body:void 0}),Ge=X({customClass:{type:String,default:d.customClass},center:{type:Boolean,default:d.center},dangerouslyUseHTMLString:{type:Boolean,default:d.dangerouslyUseHTMLString},duration:{type:Number,default:d.duration},icon:{type:Le,default:d.icon},id:{type:String,default:d.id},message:{type:P([String,Object,Function]),default:d.message},onClose:{type:P(Function),required:!1},showClose:{type:Boolean,default:d.showClose},type:{type:String,values:te,default:d.type},offset:{type:Number,default:d.offset},zIndex:{type:Number,default:d.zIndex},grouping:{type:Boolean,default:d.grouping},repeatNum:{type:Number,default:d.repeatNum}}),qe={destroy:()=>!0},p=fe([]),Je=s=>{const n=p.findIndex(t=>t.id===s),e=p[n];let o;return n>0&&(o=p[n-1]),{current:e,prev:o}},We=s=>{const{prev:n}=Je(s);return n?n.vm.exposed.bottom.value:0},Ye=(s,n)=>p.findIndex(o=>o.id===s)>0?20:n,Qe=["id"],Xe=["innerHTML"],es=I({name:"ElMessage"}),ss=I({...es,props:Ge,emits:qe,setup(s,{expose:n}){const e=s,{Close:o}=Oe,{ns:t,zIndex:r}=He("message"),{currentZIndex:u,nextZIndex:l}=r,f=S(),y=S(!1),C=S(0);let N;const ae=c(()=>e.type?e.type==="error"?"danger":e.type:"info"),le=c(()=>{const i=e.type;return{[t.bm("icon",i)]:i&&V[i]}}),$=c(()=>e.icon||V[e.type]||""),re=c(()=>We(e.id)),L=c(()=>Ye(e.id,e.offset)+re.value),ie=c(()=>C.value+L.value),ue=c(()=>({top:`${L.value}px`,zIndex:u.value}));function z(){e.duration!==0&&({stop:N}=we(()=>{h()},e.duration))}function O(){N==null||N()}function h(){y.value=!1}function ce({code:i}){i===Ee.esc&&h()}return me(()=>{z(),l(),y.value=!0}),ge(()=>e.repeatNum,()=>{O(),z()}),ze(document,"keydown",ce),ke(f,()=>{C.value=f.value.getBoundingClientRect().height}),n({visible:y,bottom:ie,close:h}),(i,D)=>(m(),b(J,{name:a(t).b("fade"),onBeforeLeave:i.onClose,onAfterLeave:D[0]||(D[0]=rs=>i.$emit("destroy")),persisted:""},{default:_(()=>[A(w("div",{id:i.id,ref_key:"messageRef",ref:f,class:g([a(t).b(),{[a(t).m(i.type)]:i.type&&!i.icon},a(t).is("center",i.center),a(t).is("closable",i.showClose),i.customClass]),style:ve(a(ue)),role:"alert",onMouseenter:O,onMouseleave:z},[i.repeatNum>1?(m(),b(a(Ae),{key:0,value:i.repeatNum,type:a(ae),class:g(a(t).e("badge"))},null,8,["value","type","class"])):T("v-if",!0),a($)?(m(),b(a(j),{key:1,class:g([a(t).e("icon"),a(le)])},{default:_(()=>[(m(),b(ye(a($))))]),_:1},8,["class"])):T("v-if",!0),U(i.$slots,"default",{},()=>[i.dangerouslyUseHTMLString?(m(),k(Ce,{key:1},[T(" Caution here, message could've been compromised, never use user's input as message "),w("p",{class:g(a(t).e("content")),innerHTML:i.message},null,10,Xe)],2112)):(m(),k("p",{key:0,class:g(a(t).e("content"))},G(i.message),3))]),i.showClose?(m(),b(a(j),{key:2,class:g(a(t).e("closeBtn")),onClick:be(h,["stop"])},{default:_(()=>[M(a(o))]),_:1},8,["class","onClick"])):T("v-if",!0)],46,Qe),[[q,y.value]])]),_:3},8,["name","onBeforeLeave"]))}});var ns=ee(ss,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let ts=1;const oe=s=>{const n=!s||F(s)||W(s)||E(s)?{message:s}:s,e={...d,...n};if(!e.appendTo)e.appendTo=document.body;else if(F(e.appendTo)){let o=document.querySelector(e.appendTo);De(o)||(o=document.body),e.appendTo=o}return e},os=s=>{const n=p.indexOf(s);if(n===-1)return;p.splice(n,1);const{handler:e}=s;e.close()},as=({appendTo:s,...n},e)=>{const o=`message_${ts++}`,t=n.onClose,r=document.createElement("div"),u={...n,id:o,onClose:()=>{t==null||t(),os(C)},onDestroy:()=>{H(null,r)}},l=M(ns,u,E(u.message)||W(u.message)?{default:E(u.message)?u.message:()=>u.message}:null);l.appContext=e||v._context,H(l,r),s.appendChild(r.firstElementChild);const f=l.component,C={id:o,vnode:l,vm:f,handler:{close:()=>{f.exposed.visible.value=!1}},props:l.component.props};return C},v=(s={},n)=>{if(!Y)return{close:()=>{}};if(B(R.max)&&p.length>=R.max)return{close:()=>{}};const e=oe(s);if(e.grouping&&p.length){const t=p.find(({vnode:r})=>{var u;return((u=r.props)==null?void 0:u.message)===e.message});if(t)return t.props.repeatNum+=1,t.props.type=e.type,t.handler}const o=as(e,n);return p.push(o),o.handler};te.forEach(s=>{v[s]=(n={},e)=>{const o=oe(n);return v({...o,type:s},e)}});function ls(s){for(const n of p)(!s||s===n.props.type)&&n.handler.close()}v.closeAll=ls;v._context=null;const ds=Fe(v,"$message");export{ds as E,ne as u};
