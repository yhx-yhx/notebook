import{aq as z,j as u,k as h,l as b,W as x,_ as v,r as f,N as r,x as D,u as c,m as y,C as P,X as S}from"./chunks/framework.32e73e40.js";import{E as g}from"./chunks/index.e90609a1.js";import{E}from"./chunks/index.79ae089a.js";import"./chunks/index.d9974c70.js";import"./chunks/plugin-vue_export-helper.52eedff0.js";import"./chunks/types.03449d87.js";import"./chunks/objects.0ee4a266.js";import"./chunks/get.c64e1ee4.js";import"./chunks/icon.51024f73.js";const C={name:"splitpanes",emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click"],props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce((s,n)=>(s[n.id]=n)&&s,{})}},methods:{updatePaneComponents(){this.panes.forEach(s=>{s.update&&s.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[s.id].size}%`})})},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(s,n){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=n},onMouseMove(s){this.touch.mouseDown&&(s.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(s)),this.$emit("resize",this.panes.map(n=>({min:n.min,max:n.max,size:n.size}))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map(s=>({min:s.min,max:s.max,size:s.size}))),this.touch.mouseDown=!1,setTimeout(()=>{this.touch.dragging=!1,this.unbindEvents()},100)},onSplitterClick(s,n){"ontouchstart"in window&&(s.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===n?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(s,n),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=n,this.splitterTaps.timeoutId=setTimeout(()=>{this.splitterTaps.splitter=null},500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[n])},onSplitterDblClick(s,n){let t=0;this.panes=this.panes.map((e,a)=>(e.size=a===n?e.max:e.min,a!==n&&(t+=e.min),e)),this.panes[n].size-=t,this.$emit("pane-maximize",this.panes[n]),this.$emit("resized",this.panes.map(e=>({min:e.min,max:e.max,size:e.size})))},onPaneClick(s,n){this.$emit("pane-click",this.indexedPanes[n])},getCurrentMouseDrag(s){const n=this.container.getBoundingClientRect(),{clientX:t,clientY:e}="ontouchstart"in window&&s.touches?s.touches[0]:s;return{x:t-n.left,y:e-n.top}},getCurrentDragPercentage(s){s=s[this.horizontal?"y":"x"];const n=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(s=n-s),s*100/n},calculatePanesSize(s){const n=this.touch.activeSplitter;let t={prevPanesSize:this.sumPrevPanesSize(n),nextPanesSize:this.sumNextPanesSize(n),prevReachedMinPanes:0,nextReachedMinPanes:0};const e=0+(this.pushOtherPanes?0:t.prevPanesSize),a=100-(this.pushOtherPanes?0:t.nextPanesSize),l=Math.max(Math.min(this.getCurrentDragPercentage(s),a),e);let p=[n,n+1],o=this.panes[p[0]]||null,i=this.panes[p[1]]||null;const d=o.max<100&&l>=o.max+t.prevPanesSize,A=i.max<100&&l<=100-(i.max+this.sumNextPanesSize(n+1));if(d||A){d?(o.size=o.max,i.size=Math.max(100-o.max-t.prevPanesSize-t.nextPanesSize,0)):(o.size=Math.max(100-i.max-t.prevPanesSize-this.sumNextPanesSize(n+1),0),i.size=i.max);return}if(this.pushOtherPanes){const m=this.doPushOtherPanes(t,l);if(!m)return;({sums:t,panesToResize:p}=m),o=this.panes[p[0]]||null,i=this.panes[p[1]]||null}o!==null&&(o.size=Math.min(Math.max(l-t.prevPanesSize-t.prevReachedMinPanes,o.min),o.max)),i!==null&&(i.size=Math.min(Math.max(100-l-t.nextPanesSize-t.nextReachedMinPanes,i.min),i.max))},doPushOtherPanes(s,n){const t=this.touch.activeSplitter,e=[t,t+1];return n<s.prevPanesSize+this.panes[e[0]].min&&(e[0]=this.findPrevExpandedPane(t).index,s.prevReachedMinPanes=0,e[0]<t&&this.panes.forEach((a,l)=>{l>e[0]&&l<=t&&(a.size=a.min,s.prevReachedMinPanes+=a.min)}),s.prevPanesSize=this.sumPrevPanesSize(e[0]),e[0]===void 0)?(s.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach((a,l)=>{l>0&&l<=t&&(a.size=a.min,s.prevReachedMinPanes+=a.min)}),this.panes[e[1]].size=100-s.prevReachedMinPanes-this.panes[0].min-s.prevPanesSize-s.nextPanesSize,null):n>100-s.nextPanesSize-this.panes[e[1]].min&&(e[1]=this.findNextExpandedPane(t).index,s.nextReachedMinPanes=0,e[1]>t+1&&this.panes.forEach((a,l)=>{l>t&&l<e[1]&&(a.size=a.min,s.nextReachedMinPanes+=a.min)}),s.nextPanesSize=this.sumNextPanesSize(e[1]-1),e[1]===void 0)?(s.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach((a,l)=>{l<this.panesCount-1&&l>=t+1&&(a.size=a.min,s.nextReachedMinPanes+=a.min)}),this.panes[e[0]].size=100-s.prevPanesSize-s.nextReachedMinPanes-this.panes[this.panesCount-1].min-s.nextPanesSize,null):{sums:s,panesToResize:e}},sumPrevPanesSize(s){return this.panes.reduce((n,t,e)=>n+(e<s?t.size:0),0)},sumNextPanesSize(s){return this.panes.reduce((n,t,e)=>n+(e>s+1?t.size:0),0)},findPrevExpandedPane(s){return[...this.panes].reverse().find(n=>n.index<s&&n.size>n.min)||{}},findNextExpandedPane(s){return this.panes.find(n=>n.index>s+1&&n.size>n.min)||{}},checkSplitpanesNodes(){Array.from(this.container.children).forEach(s=>{const n=s.classList.contains("splitpanes__pane"),t=s.classList.contains("splitpanes__splitter");!n&&!t&&(s.parentNode.removeChild(s),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))})},addSplitter(s,n,t=!1){const e=s-1,a=document.createElement("div");a.classList.add("splitpanes__splitter"),t||(a.onmousedown=l=>this.onMouseDown(l,e),typeof window<"u"&&"ontouchstart"in window&&(a.ontouchstart=l=>this.onMouseDown(l,e)),a.onclick=l=>this.onSplitterClick(l,e+1)),this.dblClickSplitter&&(a.ondblclick=l=>this.onSplitterDblClick(l,e+1)),n.parentNode.insertBefore(a,n)},removeSplitter(s){s.onmousedown=void 0,s.onclick=void 0,s.ondblclick=void 0,s.parentNode.removeChild(s)},redoSplitters(){const s=Array.from(this.container.children);s.forEach(t=>{t.className.includes("splitpanes__splitter")&&this.removeSplitter(t)});let n=0;s.forEach(t=>{t.className.includes("splitpanes__pane")&&(!n&&this.firstSplitter?this.addSplitter(n,t,!0):n&&this.addSplitter(n,t),n++)})},requestUpdate({target:s,...n}){const t=this.indexedPanes[s._.uid];Object.entries(n).forEach(([e,a])=>t[e]=a)},onPaneAdd(s){let n=-1;Array.from(s.$el.parentNode.children).some(a=>(a.className.includes("splitpanes__pane")&&n++,a===s.$el));const t=parseFloat(s.minSize),e=parseFloat(s.maxSize);this.panes.splice(n,0,{id:s._.uid,index:n,min:isNaN(t)?0:t,max:isNaN(e)?100:e,size:s.size===null?null:parseFloat(s.size),givenSize:s.size,update:s.update}),this.panes.forEach((a,l)=>a.index=l),this.ready&&this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[n]}),this.$emit("pane-add",{index:n,panes:this.panes.map(a=>({min:a.min,max:a.max,size:a.size}))})})},onPaneRemove(s){const n=this.panes.findIndex(e=>e.id===s._.uid),t=this.panes.splice(n,1)[0];this.panes.forEach((e,a)=>e.index=a),this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:{...t,index:n}}),this.$emit("pane-remove",{removed:t,panes:this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))})})},resetPaneSizes(s={}){!s.addedPane&&!s.removedPane?this.initialPanesSizing():this.panes.some(n=>n.givenSize!==null||n.min||n.max<100)?this.equalizeAfterAddOrRemove(s):this.equalize(),this.ready&&this.$emit("resized",this.panes.map(n=>({min:n.min,max:n.max,size:n.size})))},equalize(){const s=100/this.panesCount;let n=0;const t=[],e=[];this.panes.forEach(a=>{a.size=Math.max(Math.min(s,a.max),a.min),n-=a.size,a.size>=a.max&&t.push(a.id),a.size<=a.min&&e.push(a.id)}),n>.1&&this.readjustSizes(n,t,e)},initialPanesSizing(){let s=100;const n=[],t=[];let e=0;this.panes.forEach(l=>{s-=l.size,l.size!==null&&e++,l.size>=l.max&&n.push(l.id),l.size<=l.min&&t.push(l.id)});let a=100;s>.1&&(this.panes.forEach(l=>{l.size===null&&(l.size=Math.max(Math.min(s/(this.panesCount-e),l.max),l.min)),a-=l.size}),a>.1&&this.readjustSizes(s,n,t))},equalizeAfterAddOrRemove({addedPane:s,removedPane:n}={}){let t=100/this.panesCount,e=0;const a=[],l=[];s&&s.givenSize!==null&&(t=(100-s.givenSize)/(this.panesCount-1)),this.panes.forEach(p=>{e-=p.size,p.size>=p.max&&a.push(p.id),p.size<=p.min&&l.push(p.id)}),!(Math.abs(e)<.1)&&(this.panes.forEach(p=>{s&&s.givenSize!==null&&s.id===p.id||(p.size=Math.max(Math.min(t,p.max),p.min)),e-=p.size,p.size>=p.max&&a.push(p.id),p.size<=p.min&&l.push(p.id)}),e>.1&&this.readjustSizes(e,a,l))},readjustSizes(s,n,t){let e;s>0?e=s/(this.panesCount-n.length):e=s/(this.panesCount-t.length),this.panes.forEach((a,l)=>{if(s>0&&!n.includes(a.id)){const p=Math.max(Math.min(a.size+e,a.max),a.min),o=p-a.size;s-=o,a.size=p}else if(!t.includes(a.id)){const p=Math.max(Math.min(a.size+e,a.max),a.min),o=p-a.size;s-=o,a.size=p}a.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[a.id].size}%`})}),Math.abs(s)>.1&&this.$nextTick(()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(s){[...this.container.querySelectorAll(".splitpanes__splitter")].forEach((n,t)=>{n.ondblclick=s?e=>this.onSplitterDblClick(e,t):void 0})}},beforeUnmount(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(){return z("div",{ref:"container",class:["splitpanes",`splitpanes--${this.horizontal?"horizontal":"vertical"}`,{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default())}},_=(s,n)=>{const t=s.__vccOpts||s;for(const[e,a]of n)t[e]=a;return t},M={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeUnmount(){this.onPaneRemove(this)},methods:{update(s){this.style=s}},computed:{sizeNumber(){return this.size||this.size===0?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(s){this.requestUpdate({target:this,size:s})},minSizeNumber(s){this.requestUpdate({target:this,min:s})},maxSizeNumber(s){this.requestUpdate({target:this,max:s})}}};function q(s,n,t,e,a,l){return u(),h("div",{class:"splitpanes__pane",onClick:n[0]||(n[0]=p=>l.onPaneClick(p,s._.uid)),style:x(s.style)},[b(s.$slots,"default")],4)}const F=_(M,[["render",q]]);const k={class:"splitpanes-container layout-pd"},N={__name:"index",setup(s){const n=f(50);return(t,e)=>(u(),h("div",k,[r(c(E),{shadow:"hover",header:"splitpanes 窗格拆分器"},{default:D(()=>[r(c(g),{title:"感谢优秀的 `splitpanes`，项目地址：https://github.com/antoniandre/splitpanes",type:"success",closable:!1,class:"mb15"}),r(c(C),{class:"default-theme",onResize:e[0]||(e[0]=a=>n.value=a[0].size),style:{height:"500px"}},{default:D(()=>[r(c(F),{size:32},{default:D(()=>[y(" 1 ")]),_:1}),r(c(F),{size:36},{default:D(()=>[r(c(C),{class:"default-theme",horizontal:!0},{default:D(()=>[r(c(F),{size:100},{default:D(()=>[y(" 2 ")]),_:1}),r(c(F),{size:100},{default:D(()=>[y(" 3 ")]),_:1})]),_:1})]),_:1}),r(c(F),{size:32},{default:D(()=>[y(" 4 ")]),_:1})]),_:1})]),_:1})]))}},w=v(N,[["__scopeId","data-v-9afee116"]]),R=P("br",null,null,-1),$=S("",1),H=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"pages/Components/splitpanes/index.md","filePath":"pages/Components/splitpanes/index.md","lastUpdated":1701096396000}'),T={name:"pages/Components/splitpanes/index.md"},J=Object.assign(T,{setup(s){return(n,t)=>(u(),h("div",null,[R,r(w),$]))}});export{H as __pageData,J as default};
