import{a7 as et,l as Bs,z as nt,ad as rt,ak as lt,at as ht,y as _a,au as pt,a9 as xa,d as fa,J as X,r as U,a4 as dt,O as ns,k as la,o as K,c as va,m as B,n as G,p as v,t as ot,w as Y,b as Oa,K as kt,e as Sa,Q as xs,h as Z,U as As,ah as ct,a3 as vt,$ as Et,aj as gt,N as ut,af as ft,aq as mt,T as yt,av as bt,_ as Ms,as as Ts,a as Fa,q as _s,s as Os,a5 as Ft}from"./chunks/framework.Svq8VKyI.js";import{E as Na}from"./chunks/index.BAa8q6sV.js";import{u as Ua,b as Va,d as Ia,_ as Ss,c as Ct,w as wt}from"./chunks/plugin-vue_export-helper.D7P7YZzh.js";import{P as Aa}from"./chunks/vnode.qAQyLpSv.js";import{m as Ra,j as rs,n as Dt,i as Bt,r as xt,E as At}from"./chunks/index.Cl81w-4Z.js";import{i as Mt,C as Tt}from"./chunks/icon.ebjsOQxC.js";import{u as _t}from"./chunks/index.BUDjZMCb.js";import{F as Ot,E as St}from"./chunks/focus-trap.BoAut_Gt.js";import{U as Ns}from"./chunks/event.BB_Ol6Sd.js";import{c as Is,a as Nt,u as ls}from"./chunks/types.CF8Z-v_j.js";import{u as It}from"./chunks/index.DfJ5jJW3.js";import{u as hs}from"./chunks/constants.Bn9rfmTB.js";import{u as Rt}from"./chunks/use-global-config.VnTph4vd.js";import{t as Lt}from"./chunks/error.Cq9Fpw4b.js";import{g as Pt}from"./chunks/scroll.CeGTaKm3.js";import{u as ps}from"./chunks/index.C2ar-6EU.js";import{E as zt}from"./chunks/index.DW8IFlSd.js";import{E as Yt}from"./chunks/index.DOYtgU4u.js";import"./chunks/use-form-item.BMXIMvtg.js";import"./chunks/index.BLjPyjd1.js";import"./chunks/get.Bcmqqw68.js";import"./chunks/aria.BUADUvnR.js";import"./chunks/isNil.CHIgUVhi.js";import"./chunks/objects.CsH4fuOl.js";const qt=(...i)=>a=>{i.forEach(t=>{et(t)?t(a):t.value=a})},Xt=(i,a,t)=>{let s={offsetX:0,offsetY:0};const r=l=>{const k=l.clientX,d=l.clientY,{offsetX:h,offsetY:p}=s,o=i.value.getBoundingClientRect(),E=o.left,g=o.top,F=o.width,f=o.height,w=document.documentElement.clientWidth,D=document.documentElement.clientHeight,C=-E+h,R=-g+p,_=w-E-F+h,c=D-g-f+p,u=O=>{const y=Math.min(Math.max(h+O.clientX-k,C),_),N=Math.min(Math.max(p+O.clientY-d,R),c);s={offsetX:y,offsetY:N},i.value.style.transform=`translate(${Ra(y)}, ${Ra(N)})`},b=()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",b)},e=()=>{a.value&&i.value&&a.value.addEventListener("mousedown",r)},n=()=>{a.value&&i.value&&a.value.removeEventListener("mousedown",r)};Bs(()=>{nt(()=>{t.value?e():n()})}),rt(()=>{n()})},Ht=(i,a={})=>{lt(i)||Lt("[useLockscreen]","You need to pass a ref param to this function");const t=a.ns||Ua("popup"),s=ht(()=>t.bm("parent","hidden"));if(!Is||rs(document.body,s.value))return;let r=0,e=!1,n="0";const l=()=>{setTimeout(()=>{xt(document==null?void 0:document.body,s.value),e&&document&&(document.body.style.width=n)},200)};_a(i,k=>{if(!k){l();return}e=!rs(document.body,s.value),e&&(n=document.body.style.width),r=Pt(t.namespace.value);const d=document.documentElement.clientHeight<document.body.scrollHeight,h=Dt(document.body,"overflowY");r>0&&(d||h==="scroll")&&e&&(document.body.style.width=`calc(100% - ${r}px)`),Bt(document.body,s.value)}),pt(()=>l())},Rs=i=>{if(!i)return{onClick:xa,onMousedown:xa,onMouseup:xa};let a=!1,t=!1;return{onClick:n=>{a&&t&&i(n),a=t=!1},onMousedown:n=>{a=n.target===n.currentTarget},onMouseup:n=>{t=n.target===n.currentTarget}}},Wt=Va({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Ia([String,Array,Object])},zIndex:{type:Ia([String,Number])}}),$t={click:i=>i instanceof MouseEvent},jt="overlay";var Ut=fa({name:"ElOverlay",props:Wt,emits:$t,setup(i,{slots:a,emit:t}){const s=Ua(jt),r=k=>{t("click",k)},{onClick:e,onMousedown:n,onMouseup:l}=Rs(i.customMaskEvent?void 0:r);return()=>i.mask?X("div",{class:[s.b(),i.overlayClass],style:{zIndex:i.zIndex},onClick:e,onMousedown:n,onMouseup:l},[U(a,"default")],Aa.STYLE|Aa.CLASS|Aa.PROPS,["onClick","onMouseup","onMousedown"]):dt("div",{class:i.overlayClass,style:{zIndex:i.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[U(a,"default")])}});const Vt=Ut,Ls=Symbol("dialogInjectionKey"),Ps=Va({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Mt},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Gt={close:()=>!0},Kt=["aria-label"],Zt=["id"],Qt=fa({name:"ElDialogContent"}),Jt=fa({...Qt,props:Ps,emits:Gt,setup(i){const a=i,{t}=_t(),{Close:s}=Tt,{dialogRef:r,headerRef:e,bodyId:n,ns:l,style:k}=ns(Ls),{focusTrapRef:d}=ns(Ot),h=qt(d,r),p=la(()=>a.draggable);return Xt(r,e,p),(o,E)=>(K(),va("div",{ref:v(h),class:G([v(l).b(),v(l).is("fullscreen",o.fullscreen),v(l).is("draggable",v(p)),v(l).is("align-center",o.alignCenter),{[v(l).m("center")]:o.center},o.customClass]),style:xs(v(k)),tabindex:"-1"},[B("header",{ref_key:"headerRef",ref:e,class:G(v(l).e("header"))},[U(o.$slots,"header",{},()=>[B("span",{role:"heading",class:G(v(l).e("title"))},ot(o.title),3)]),o.showClose?(K(),va("button",{key:0,"aria-label":v(t)("el.dialog.close"),class:G(v(l).e("headerbtn")),type:"button",onClick:E[0]||(E[0]=g=>o.$emit("close"))},[X(v(At),{class:G(v(l).e("close"))},{default:Y(()=>[(K(),Oa(kt(o.closeIcon||v(s))))]),_:1},8,["class"])],10,Kt)):Sa("v-if",!0)],2),B("div",{id:v(n),class:G(v(l).e("body"))},[U(o.$slots,"default")],10,Zt),o.$slots.footer?(K(),va("footer",{key:0,class:G(v(l).e("footer"))},[U(o.$slots,"footer")],2)):Sa("v-if",!0)],6))}});var ai=Ss(Jt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const si=Va({...Ps,appendToBody:{type:Boolean,default:!1},beforeClose:{type:Ia(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),ti={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Ns]:i=>Nt(i),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ii=(i,a)=>{const s=ct().emit,{nextZIndex:r}=It();let e="";const n=hs(),l=hs(),k=Z(!1),d=Z(!1),h=Z(!1),p=Z(i.zIndex||r());let o,E;const g=Rt("namespace",Ct),F=la(()=>{const M={},T=`--${g.value}-dialog`;return i.fullscreen||(i.top&&(M[`${T}-margin-top`]=i.top),i.width&&(M[`${T}-width`]=Ra(i.width))),M}),f=la(()=>i.alignCenter?{display:"flex"}:{});function w(){s("opened")}function D(){s("closed"),s(Ns,!1),i.destroyOnClose&&(h.value=!1)}function C(){s("close")}function R(){E==null||E(),o==null||o(),i.openDelay&&i.openDelay>0?{stop:o}=ls(()=>b(),i.openDelay):b()}function _(){o==null||o(),E==null||E(),i.closeDelay&&i.closeDelay>0?{stop:E}=ls(()=>O(),i.closeDelay):O()}function c(){function M(T){T||(d.value=!0,k.value=!1)}i.beforeClose?i.beforeClose(M):_()}function u(){i.closeOnClickModal&&c()}function b(){Is&&(k.value=!0)}function O(){k.value=!1}function y(){s("openAutoFocus")}function N(){s("closeAutoFocus")}function L(M){var T;((T=M.detail)==null?void 0:T.focusReason)==="pointer"&&M.preventDefault()}i.lockScroll&&Ht(k);function W(){i.closeOnPressEscape&&c()}return _a(()=>i.modelValue,M=>{M?(d.value=!1,R(),h.value=!0,p.value=i.zIndex?p.value++:r(),As(()=>{s("open"),a.value&&(a.value.scrollTop=0)})):k.value&&_()}),_a(()=>i.fullscreen,M=>{a.value&&(M?(e=a.value.style.transform,a.value.style.transform=""):a.value.style.transform=e)}),Bs(()=>{i.modelValue&&(k.value=!0,h.value=!0,R())}),{afterEnter:w,afterLeave:D,beforeLeave:C,handleClose:c,onModalClick:u,close:_,doClose:O,onOpenAutoFocus:y,onCloseAutoFocus:N,onCloseRequested:W,onFocusoutPrevented:L,titleId:n,bodyId:l,closed:d,style:F,overlayDialogStyle:f,rendered:h,visible:k,zIndex:p}},ei=["aria-label","aria-labelledby","aria-describedby"],ni=fa({name:"ElDialog",inheritAttrs:!1}),ri=fa({...ni,props:si,emits:ti,setup(i,{expose:a}){const t=i,s=vt();ps({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},la(()=>!!s.title)),ps({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},la(()=>!!t.customClass));const r=Ua("dialog"),e=Z(),n=Z(),l=Z(),{visible:k,titleId:d,bodyId:h,style:p,overlayDialogStyle:o,rendered:E,zIndex:g,afterEnter:F,afterLeave:f,beforeLeave:w,handleClose:D,onModalClick:C,onOpenAutoFocus:R,onCloseAutoFocus:_,onCloseRequested:c,onFocusoutPrevented:u}=ii(t,e);Et(Ls,{dialogRef:e,headerRef:n,bodyId:h,ns:r,rendered:E,style:p});const b=Rs(C),O=la(()=>t.draggable&&!t.fullscreen);return a({visible:k,dialogContentRef:l}),(y,N)=>(K(),Oa(bt,{to:"body",disabled:!y.appendToBody},[X(yt,{name:"dialog-fade",onAfterEnter:v(F),onAfterLeave:v(f),onBeforeLeave:v(w),persisted:""},{default:Y(()=>[gt(X(v(Vt),{"custom-mask-event":"",mask:y.modal,"overlay-class":y.modalClass,"z-index":v(g)},{default:Y(()=>[B("div",{role:"dialog","aria-modal":"true","aria-label":y.title||void 0,"aria-labelledby":y.title?void 0:v(d),"aria-describedby":v(h),class:G(`${v(r).namespace.value}-overlay-dialog`),style:xs(v(o)),onClick:N[0]||(N[0]=(...L)=>v(b).onClick&&v(b).onClick(...L)),onMousedown:N[1]||(N[1]=(...L)=>v(b).onMousedown&&v(b).onMousedown(...L)),onMouseup:N[2]||(N[2]=(...L)=>v(b).onMouseup&&v(b).onMouseup(...L))},[X(v(St),{loop:"",trapped:v(k),"focus-start-el":"container",onFocusAfterTrapped:v(R),onFocusAfterReleased:v(_),onFocusoutPrevented:v(u),onReleaseRequested:v(c)},{default:Y(()=>[v(E)?(K(),Oa(ai,ut({key:0,ref_key:"dialogContentRef",ref:l},y.$attrs,{"custom-class":y.customClass,center:y.center,"align-center":y.alignCenter,"close-icon":y.closeIcon,draggable:v(O),fullscreen:y.fullscreen,"show-close":y.showClose,title:y.title,onClose:v(D)}),ft({header:Y(()=>[y.$slots.title?U(y.$slots,"title",{key:1}):U(y.$slots,"header",{key:0,close:v(D),titleId:v(d),titleClass:v(r).e("title")})]),default:Y(()=>[U(y.$slots,"default")]),_:2},[y.$slots.footer?{name:"footer",fn:Y(()=>[U(y.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):Sa("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,ei)]),_:3},8,["mask","overlay-class","z-index"]),[[mt,v(k)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var li=Ss(ri,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const hi=wt(li);/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */function ds(i,a){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);a&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,s)}return t}function zs(i){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?arguments[a]:{};a%2?ds(Object(t),!0).forEach(function(s){oi(i,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):ds(Object(t)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(t,s))})}return i}function La(i){"@babel/helpers - typeof";return La=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},La(i)}function pi(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")}function os(i,a){for(var t=0;t<a.length;t++){var s=a[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,qs(s.key),s)}}function di(i,a,t){return a&&os(i.prototype,a),t&&os(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function oi(i,a,t){return a=qs(a),a in i?Object.defineProperty(i,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[a]=t,i}function Ys(i){return ki(i)||ci(i)||vi(i)||Ei()}function ki(i){if(Array.isArray(i))return Pa(i)}function ci(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function vi(i,a){if(i){if(typeof i=="string")return Pa(i,a);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Pa(i,a)}}function Pa(i,a){(a==null||a>i.length)&&(a=i.length);for(var t=0,s=new Array(a);t<a;t++)s[t]=i[t];return s}function Ei(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gi(i,a){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var s=t.call(i,a||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(i)}function qs(i){var a=gi(i,"string");return typeof a=="symbol"?a:String(a)}var wa=typeof window<"u"&&typeof window.document<"u",j=wa?window:{},Ga=wa&&j.document.documentElement?"ontouchstart"in j.document.documentElement:!1,Ka=wa?"PointerEvent"in j:!1,x="cropper",Za="all",Xs="crop",Hs="move",Ws="zoom",sa="e",ta="w",ea="s",V="n",da="ne",oa="nw",ka="se",ca="sw",za="".concat(x,"-crop"),ks="".concat(x,"-disabled"),z="".concat(x,"-hidden"),cs="".concat(x,"-hide"),ui="".concat(x,"-invisible"),Ca="".concat(x,"-modal"),Ya="".concat(x,"-move"),ga="".concat(x,"Action"),ya="".concat(x,"Preview"),Qa="crop",$s="move",js="none",qa="crop",Xa="cropend",Ha="cropmove",Wa="cropstart",vs="dblclick",fi=Ga?"touchstart":"mousedown",mi=Ga?"touchmove":"mousemove",yi=Ga?"touchend touchcancel":"mouseup",Es=Ka?"pointerdown":fi,gs=Ka?"pointermove":mi,us=Ka?"pointerup pointercancel":yi,fs="ready",ms="resize",ys="wheel",$a="zoom",bs="image/jpeg",bi=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Fi=/^data:/,Ci=/^data:image\/jpeg;base64,/,wi=/^img|canvas$/i,Us=200,Vs=100,Fs={viewMode:0,dragMode:Qa,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Us,minContainerHeight:Vs,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Di='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Bi=Number.isNaN||j.isNaN;function m(i){return typeof i=="number"&&!Bi(i)}var Cs=function(a){return a>0&&a<1/0};function Ma(i){return typeof i>"u"}function ia(i){return La(i)==="object"&&i!==null}var xi=Object.prototype.hasOwnProperty;function na(i){if(!ia(i))return!1;try{var a=i.constructor,t=a.prototype;return a&&t&&xi.call(t,"isPrototypeOf")}catch{return!1}}function P(i){return typeof i=="function"}var Ai=Array.prototype.slice;function Gs(i){return Array.from?Array.from(i):Ai.call(i)}function S(i,a){return i&&P(a)&&(Array.isArray(i)||m(i.length)?Gs(i).forEach(function(t,s){a.call(i,t,s,i)}):ia(i)&&Object.keys(i).forEach(function(t){a.call(i,i[t],t,i)})),i}var A=Object.assign||function(a){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return ia(a)&&s.length>0&&s.forEach(function(e){ia(e)&&Object.keys(e).forEach(function(n){a[n]=e[n]})}),a},Mi=/\.\d*(?:0|9){12}\d*$/;function ha(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Mi.test(i)?Math.round(i*a)/a:i}var Ti=/^width|height|left|top|marginLeft|marginTop$/;function Q(i,a){var t=i.style;S(a,function(s,r){Ti.test(r)&&m(s)&&(s="".concat(s,"px")),t[r]=s})}function _i(i,a){return i.classList?i.classList.contains(a):i.className.indexOf(a)>-1}function I(i,a){if(a){if(m(i.length)){S(i,function(s){I(s,a)});return}if(i.classList){i.classList.add(a);return}var t=i.className.trim();t?t.indexOf(a)<0&&(i.className="".concat(t," ").concat(a)):i.className=a}}function $(i,a){if(a){if(m(i.length)){S(i,function(t){$(t,a)});return}if(i.classList){i.classList.remove(a);return}i.className.indexOf(a)>=0&&(i.className=i.className.replace(a,""))}}function ra(i,a,t){if(a){if(m(i.length)){S(i,function(s){ra(s,a,t)});return}t?I(i,a):$(i,a)}}var Oi=/([a-z\d])([A-Z])/g;function Ja(i){return i.replace(Oi,"$1-$2").toLowerCase()}function ja(i,a){return ia(i[a])?i[a]:i.dataset?i.dataset[a]:i.getAttribute("data-".concat(Ja(a)))}function ua(i,a,t){ia(t)?i[a]=t:i.dataset?i.dataset[a]=t:i.setAttribute("data-".concat(Ja(a)),t)}function Si(i,a){if(ia(i[a]))try{delete i[a]}catch{i[a]=void 0}else if(i.dataset)try{delete i.dataset[a]}catch{i.dataset[a]=void 0}else i.removeAttribute("data-".concat(Ja(a)))}var Ks=/\s\s*/,Zs=function(){var i=!1;if(wa){var a=!1,t=function(){},s=Object.defineProperty({},"once",{get:function(){return i=!0,a},set:function(e){a=e}});j.addEventListener("test",t,s),j.removeEventListener("test",t,s)}return i}();function H(i,a,t){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=t;a.trim().split(Ks).forEach(function(e){if(!Zs){var n=i.listeners;n&&n[e]&&n[e][t]&&(r=n[e][t],delete n[e][t],Object.keys(n[e]).length===0&&delete n[e],Object.keys(n).length===0&&delete i.listeners)}i.removeEventListener(e,r,s)})}function q(i,a,t){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=t;a.trim().split(Ks).forEach(function(e){if(s.once&&!Zs){var n=i.listeners,l=n===void 0?{}:n;r=function(){delete l[e][t],i.removeEventListener(e,r,s);for(var d=arguments.length,h=new Array(d),p=0;p<d;p++)h[p]=arguments[p];t.apply(i,h)},l[e]||(l[e]={}),l[e][t]&&i.removeEventListener(e,l[e][t],s),l[e][t]=r,i.listeners=l}i.addEventListener(e,r,s)})}function pa(i,a,t){var s;return P(Event)&&P(CustomEvent)?s=new CustomEvent(a,{detail:t,bubbles:!0,cancelable:!0}):(s=document.createEvent("CustomEvent"),s.initCustomEvent(a,!0,!0,t)),i.dispatchEvent(s)}function Qs(i){var a=i.getBoundingClientRect();return{left:a.left+(window.pageXOffset-document.documentElement.clientLeft),top:a.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ta=j.location,Ni=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function ws(i){var a=i.match(Ni);return a!==null&&(a[1]!==Ta.protocol||a[2]!==Ta.hostname||a[3]!==Ta.port)}function Ds(i){var a="timestamp=".concat(new Date().getTime());return i+(i.indexOf("?")===-1?"?":"&")+a}function Ea(i){var a=i.rotate,t=i.scaleX,s=i.scaleY,r=i.translateX,e=i.translateY,n=[];m(r)&&r!==0&&n.push("translateX(".concat(r,"px)")),m(e)&&e!==0&&n.push("translateY(".concat(e,"px)")),m(a)&&a!==0&&n.push("rotate(".concat(a,"deg)")),m(t)&&t!==1&&n.push("scaleX(".concat(t,")")),m(s)&&s!==1&&n.push("scaleY(".concat(s,")"));var l=n.length?n.join(" "):"none";return{WebkitTransform:l,msTransform:l,transform:l}}function Ii(i){var a=zs({},i),t=0;return S(i,function(s,r){delete a[r],S(a,function(e){var n=Math.abs(s.startX-e.startX),l=Math.abs(s.startY-e.startY),k=Math.abs(s.endX-e.endX),d=Math.abs(s.endY-e.endY),h=Math.sqrt(n*n+l*l),p=Math.sqrt(k*k+d*d),o=(p-h)/h;Math.abs(o)>Math.abs(t)&&(t=o)})}),t}function ba(i,a){var t=i.pageX,s=i.pageY,r={endX:t,endY:s};return a?r:zs({startX:t,startY:s},r)}function Ri(i){var a=0,t=0,s=0;return S(i,function(r){var e=r.startX,n=r.startY;a+=e,t+=n,s+=1}),a/=s,t/=s,{pageX:a,pageY:t}}function J(i){var a=i.aspectRatio,t=i.height,s=i.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",e=Cs(s),n=Cs(t);if(e&&n){var l=t*a;r==="contain"&&l>s||r==="cover"&&l<s?t=s/a:s=t*a}else e?t=s/a:n&&(s=t*a);return{width:s,height:t}}function Li(i){var a=i.width,t=i.height,s=i.degree;if(s=Math.abs(s)%180,s===90)return{width:t,height:a};var r=s%90*Math.PI/180,e=Math.sin(r),n=Math.cos(r),l=a*n+t*e,k=a*e+t*n;return s>90?{width:k,height:l}:{width:l,height:k}}function Pi(i,a,t,s){var r=a.aspectRatio,e=a.naturalWidth,n=a.naturalHeight,l=a.rotate,k=l===void 0?0:l,d=a.scaleX,h=d===void 0?1:d,p=a.scaleY,o=p===void 0?1:p,E=t.aspectRatio,g=t.naturalWidth,F=t.naturalHeight,f=s.fillColor,w=f===void 0?"transparent":f,D=s.imageSmoothingEnabled,C=D===void 0?!0:D,R=s.imageSmoothingQuality,_=R===void 0?"low":R,c=s.maxWidth,u=c===void 0?1/0:c,b=s.maxHeight,O=b===void 0?1/0:b,y=s.minWidth,N=y===void 0?0:y,L=s.minHeight,W=L===void 0?0:L,M=document.createElement("canvas"),T=M.getContext("2d"),aa=J({aspectRatio:E,width:u,height:O}),ma=J({aspectRatio:E,width:N,height:W},"cover"),Da=Math.min(aa.width,Math.max(ma.width,g)),Ba=Math.min(aa.height,Math.max(ma.height,F)),ss=J({aspectRatio:r,width:u,height:O}),ts=J({aspectRatio:r,width:N,height:W},"cover"),is=Math.min(ss.width,Math.max(ts.width,e)),es=Math.min(ss.height,Math.max(ts.height,n)),tt=[-is/2,-es/2,is,es];return M.width=ha(Da),M.height=ha(Ba),T.fillStyle=w,T.fillRect(0,0,Da,Ba),T.save(),T.translate(Da/2,Ba/2),T.rotate(k*Math.PI/180),T.scale(h,o),T.imageSmoothingEnabled=C,T.imageSmoothingQuality=_,T.drawImage.apply(T,[i].concat(Ys(tt.map(function(it){return Math.floor(ha(it))})))),T.restore(),M}var Js=String.fromCharCode;function zi(i,a,t){var s="";t+=a;for(var r=a;r<t;r+=1)s+=Js(i.getUint8(r));return s}var Yi=/^data:.*,/;function qi(i){var a=i.replace(Yi,""),t=atob(a),s=new ArrayBuffer(t.length),r=new Uint8Array(s);return S(r,function(e,n){r[n]=t.charCodeAt(n)}),s}function Xi(i,a){for(var t=[],s=8192,r=new Uint8Array(i);r.length>0;)t.push(Js.apply(null,Gs(r.subarray(0,s)))),r=r.subarray(s);return"data:".concat(a,";base64,").concat(btoa(t.join("")))}function Hi(i){var a=new DataView(i),t;try{var s,r,e;if(a.getUint8(0)===255&&a.getUint8(1)===216)for(var n=a.byteLength,l=2;l+1<n;){if(a.getUint8(l)===255&&a.getUint8(l+1)===225){r=l;break}l+=1}if(r){var k=r+4,d=r+10;if(zi(a,k,4)==="Exif"){var h=a.getUint16(d);if(s=h===18761,(s||h===19789)&&a.getUint16(d+2,s)===42){var p=a.getUint32(d+4,s);p>=8&&(e=d+p)}}}if(e){var o=a.getUint16(e,s),E,g;for(g=0;g<o;g+=1)if(E=e+g*12+2,a.getUint16(E,s)===274){E+=8,t=a.getUint16(E,s),a.setUint16(E,1,s);break}}}catch{t=1}return t}function Wi(i){var a=0,t=1,s=1;switch(i){case 2:t=-1;break;case 3:a=-180;break;case 4:s=-1;break;case 5:a=90,s=-1;break;case 6:a=90;break;case 7:a=90,t=-1;break;case 8:a=-90;break}return{rotate:a,scaleX:t,scaleY:s}}var $i={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var a=this.element,t=this.options,s=this.container,r=this.cropper,e=Number(t.minContainerWidth),n=Number(t.minContainerHeight);I(r,z),$(a,z);var l={width:Math.max(s.offsetWidth,e>=0?e:Us),height:Math.max(s.offsetHeight,n>=0?n:Vs)};this.containerData=l,Q(r,{width:l.width,height:l.height}),I(a,z),$(r,z)},initCanvas:function(){var a=this.containerData,t=this.imageData,s=this.options.viewMode,r=Math.abs(t.rotate)%180===90,e=r?t.naturalHeight:t.naturalWidth,n=r?t.naturalWidth:t.naturalHeight,l=e/n,k=a.width,d=a.height;a.height*l>a.width?s===3?k=a.height*l:d=a.width/l:s===3?d=a.width/l:k=a.height*l;var h={aspectRatio:l,naturalWidth:e,naturalHeight:n,width:k,height:d};this.canvasData=h,this.limited=s===1||s===2,this.limitCanvas(!0,!0),h.width=Math.min(Math.max(h.width,h.minWidth),h.maxWidth),h.height=Math.min(Math.max(h.height,h.minHeight),h.maxHeight),h.left=(a.width-h.width)/2,h.top=(a.height-h.height)/2,h.oldLeft=h.left,h.oldTop=h.top,this.initialCanvasData=A({},h)},limitCanvas:function(a,t){var s=this.options,r=this.containerData,e=this.canvasData,n=this.cropBoxData,l=s.viewMode,k=e.aspectRatio,d=this.cropped&&n;if(a){var h=Number(s.minCanvasWidth)||0,p=Number(s.minCanvasHeight)||0;l>1?(h=Math.max(h,r.width),p=Math.max(p,r.height),l===3&&(p*k>h?h=p*k:p=h/k)):l>0&&(h?h=Math.max(h,d?n.width:0):p?p=Math.max(p,d?n.height:0):d&&(h=n.width,p=n.height,p*k>h?h=p*k:p=h/k));var o=J({aspectRatio:k,width:h,height:p});h=o.width,p=o.height,e.minWidth=h,e.minHeight=p,e.maxWidth=1/0,e.maxHeight=1/0}if(t)if(l>(d?0:1)){var E=r.width-e.width,g=r.height-e.height;e.minLeft=Math.min(0,E),e.minTop=Math.min(0,g),e.maxLeft=Math.max(0,E),e.maxTop=Math.max(0,g),d&&this.limited&&(e.minLeft=Math.min(n.left,n.left+(n.width-e.width)),e.minTop=Math.min(n.top,n.top+(n.height-e.height)),e.maxLeft=n.left,e.maxTop=n.top,l===2&&(e.width>=r.width&&(e.minLeft=Math.min(0,E),e.maxLeft=Math.max(0,E)),e.height>=r.height&&(e.minTop=Math.min(0,g),e.maxTop=Math.max(0,g))))}else e.minLeft=-e.width,e.minTop=-e.height,e.maxLeft=r.width,e.maxTop=r.height},renderCanvas:function(a,t){var s=this.canvasData,r=this.imageData;if(t){var e=Li({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),n=e.width,l=e.height,k=s.width*(n/s.naturalWidth),d=s.height*(l/s.naturalHeight);s.left-=(k-s.width)/2,s.top-=(d-s.height)/2,s.width=k,s.height=d,s.aspectRatio=n/l,s.naturalWidth=n,s.naturalHeight=l,this.limitCanvas(!0,!1)}(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCanvas(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,Q(this.canvas,A({width:s.width,height:s.height},Ea({translateX:s.left,translateY:s.top}))),this.renderImage(a),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(a){var t=this.canvasData,s=this.imageData,r=s.naturalWidth*(t.width/t.naturalWidth),e=s.naturalHeight*(t.height/t.naturalHeight);A(s,{width:r,height:e,left:(t.width-r)/2,top:(t.height-e)/2}),Q(this.image,A({width:s.width,height:s.height},Ea(A({translateX:s.left,translateY:s.top},s)))),a&&this.output()},initCropBox:function(){var a=this.options,t=this.canvasData,s=a.aspectRatio||a.initialAspectRatio,r=Number(a.autoCropArea)||.8,e={width:t.width,height:t.height};s&&(t.height*s>t.width?e.height=e.width/s:e.width=e.height*s),this.cropBoxData=e,this.limitCropBox(!0,!0),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),e.width=Math.max(e.minWidth,e.width*r),e.height=Math.max(e.minHeight,e.height*r),e.left=t.left+(t.width-e.width)/2,e.top=t.top+(t.height-e.height)/2,e.oldLeft=e.left,e.oldTop=e.top,this.initialCropBoxData=A({},e)},limitCropBox:function(a,t){var s=this.options,r=this.containerData,e=this.canvasData,n=this.cropBoxData,l=this.limited,k=s.aspectRatio;if(a){var d=Number(s.minCropBoxWidth)||0,h=Number(s.minCropBoxHeight)||0,p=l?Math.min(r.width,e.width,e.width+e.left,r.width-e.left):r.width,o=l?Math.min(r.height,e.height,e.height+e.top,r.height-e.top):r.height;d=Math.min(d,r.width),h=Math.min(h,r.height),k&&(d&&h?h*k>d?h=d/k:d=h*k:d?h=d/k:h&&(d=h*k),o*k>p?o=p/k:p=o*k),n.minWidth=Math.min(d,p),n.minHeight=Math.min(h,o),n.maxWidth=p,n.maxHeight=o}t&&(l?(n.minLeft=Math.max(0,e.left),n.minTop=Math.max(0,e.top),n.maxLeft=Math.min(r.width,e.left+e.width)-n.width,n.maxTop=Math.min(r.height,e.top+e.height)-n.height):(n.minLeft=0,n.minTop=0,n.maxLeft=r.width-n.width,n.maxTop=r.height-n.height))},renderCropBox:function(){var a=this.options,t=this.containerData,s=this.cropBoxData;(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCropBox(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,a.movable&&a.cropBoxMovable&&ua(this.face,ga,s.width>=t.width&&s.height>=t.height?Hs:Za),Q(this.cropBox,A({width:s.width,height:s.height},Ea({translateX:s.left,translateY:s.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),pa(this.element,qa,this.getData())}},ji={initPreview:function(){var a=this.element,t=this.crossOrigin,s=this.options.preview,r=t?this.crossOriginUrl:this.url,e=a.alt||"The image to preview",n=document.createElement("img");if(t&&(n.crossOrigin=t),n.src=r,n.alt=e,this.viewBox.appendChild(n),this.viewBoxImage=n,!!s){var l=s;typeof s=="string"?l=a.ownerDocument.querySelectorAll(s):s.querySelector&&(l=[s]),this.previews=l,S(l,function(k){var d=document.createElement("img");ua(k,ya,{width:k.offsetWidth,height:k.offsetHeight,html:k.innerHTML}),t&&(d.crossOrigin=t),d.src=r,d.alt=e,d.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',k.innerHTML="",k.appendChild(d)})}},resetPreview:function(){S(this.previews,function(a){var t=ja(a,ya);Q(a,{width:t.width,height:t.height}),a.innerHTML=t.html,Si(a,ya)})},preview:function(){var a=this.imageData,t=this.canvasData,s=this.cropBoxData,r=s.width,e=s.height,n=a.width,l=a.height,k=s.left-t.left-a.left,d=s.top-t.top-a.top;!this.cropped||this.disabled||(Q(this.viewBoxImage,A({width:n,height:l},Ea(A({translateX:-k,translateY:-d},a)))),S(this.previews,function(h){var p=ja(h,ya),o=p.width,E=p.height,g=o,F=E,f=1;r&&(f=o/r,F=e*f),e&&F>E&&(f=E/e,g=r*f,F=E),Q(h,{width:g,height:F}),Q(h.getElementsByTagName("img")[0],A({width:n*f,height:l*f},Ea(A({translateX:-k*f,translateY:-d*f},a))))}))}},Ui={bind:function(){var a=this.element,t=this.options,s=this.cropper;P(t.cropstart)&&q(a,Wa,t.cropstart),P(t.cropmove)&&q(a,Ha,t.cropmove),P(t.cropend)&&q(a,Xa,t.cropend),P(t.crop)&&q(a,qa,t.crop),P(t.zoom)&&q(a,$a,t.zoom),q(s,Es,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&q(s,ys,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&q(s,vs,this.onDblclick=this.dblclick.bind(this)),q(a.ownerDocument,gs,this.onCropMove=this.cropMove.bind(this)),q(a.ownerDocument,us,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&q(window,ms,this.onResize=this.resize.bind(this))},unbind:function(){var a=this.element,t=this.options,s=this.cropper;P(t.cropstart)&&H(a,Wa,t.cropstart),P(t.cropmove)&&H(a,Ha,t.cropmove),P(t.cropend)&&H(a,Xa,t.cropend),P(t.crop)&&H(a,qa,t.crop),P(t.zoom)&&H(a,$a,t.zoom),H(s,Es,this.onCropStart),t.zoomable&&t.zoomOnWheel&&H(s,ys,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&H(s,vs,this.onDblclick),H(a.ownerDocument,gs,this.onCropMove),H(a.ownerDocument,us,this.onCropEnd),t.responsive&&H(window,ms,this.onResize)}},Vi={resize:function(){if(!this.disabled){var a=this.options,t=this.container,s=this.containerData,r=t.offsetWidth/s.width,e=t.offsetHeight/s.height,n=Math.abs(r-1)>Math.abs(e-1)?r:e;if(n!==1){var l,k;a.restore&&(l=this.getCanvasData(),k=this.getCropBoxData()),this.render(),a.restore&&(this.setCanvasData(S(l,function(d,h){l[h]=d*n})),this.setCropBoxData(S(k,function(d,h){k[h]=d*n})))}}},dblclick:function(){this.disabled||this.options.dragMode===js||this.setDragMode(_i(this.dragBox,za)?$s:Qa)},wheel:function(a){var t=this,s=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(a.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),a.deltaY?r=a.deltaY>0?1:-1:a.wheelDelta?r=-a.wheelDelta/120:a.detail&&(r=a.detail>0?1:-1),this.zoom(-r*s,a)))},cropStart:function(a){var t=a.buttons,s=a.button;if(!(this.disabled||(a.type==="mousedown"||a.type==="pointerdown"&&a.pointerType==="mouse")&&(m(t)&&t!==1||m(s)&&s!==0||a.ctrlKey))){var r=this.options,e=this.pointers,n;a.changedTouches?S(a.changedTouches,function(l){e[l.identifier]=ba(l)}):e[a.pointerId||0]=ba(a),Object.keys(e).length>1&&r.zoomable&&r.zoomOnTouch?n=Ws:n=ja(a.target,ga),bi.test(n)&&pa(this.element,Wa,{originalEvent:a,action:n})!==!1&&(a.preventDefault(),this.action=n,this.cropping=!1,n===Xs&&(this.cropping=!0,I(this.dragBox,Ca)))}},cropMove:function(a){var t=this.action;if(!(this.disabled||!t)){var s=this.pointers;a.preventDefault(),pa(this.element,Ha,{originalEvent:a,action:t})!==!1&&(a.changedTouches?S(a.changedTouches,function(r){A(s[r.identifier]||{},ba(r,!0))}):A(s[a.pointerId||0]||{},ba(a,!0)),this.change(a))}},cropEnd:function(a){if(!this.disabled){var t=this.action,s=this.pointers;a.changedTouches?S(a.changedTouches,function(r){delete s[r.identifier]}):delete s[a.pointerId||0],t&&(a.preventDefault(),Object.keys(s).length||(this.action=""),this.cropping&&(this.cropping=!1,ra(this.dragBox,Ca,this.cropped&&this.options.modal)),pa(this.element,Xa,{originalEvent:a,action:t}))}}},Gi={change:function(a){var t=this.options,s=this.canvasData,r=this.containerData,e=this.cropBoxData,n=this.pointers,l=this.action,k=t.aspectRatio,d=e.left,h=e.top,p=e.width,o=e.height,E=d+p,g=h+o,F=0,f=0,w=r.width,D=r.height,C=!0,R;!k&&a.shiftKey&&(k=p&&o?p/o:1),this.limited&&(F=e.minLeft,f=e.minTop,w=F+Math.min(r.width,s.width,s.left+s.width),D=f+Math.min(r.height,s.height,s.top+s.height));var _=n[Object.keys(n)[0]],c={x:_.endX-_.startX,y:_.endY-_.startY},u=function(O){switch(O){case sa:E+c.x>w&&(c.x=w-E);break;case ta:d+c.x<F&&(c.x=F-d);break;case V:h+c.y<f&&(c.y=f-h);break;case ea:g+c.y>D&&(c.y=D-g);break}};switch(l){case Za:d+=c.x,h+=c.y;break;case sa:if(c.x>=0&&(E>=w||k&&(h<=f||g>=D))){C=!1;break}u(sa),p+=c.x,p<0&&(l=ta,p=-p,d-=p),k&&(o=p/k,h+=(e.height-o)/2);break;case V:if(c.y<=0&&(h<=f||k&&(d<=F||E>=w))){C=!1;break}u(V),o-=c.y,h+=c.y,o<0&&(l=ea,o=-o,h-=o),k&&(p=o*k,d+=(e.width-p)/2);break;case ta:if(c.x<=0&&(d<=F||k&&(h<=f||g>=D))){C=!1;break}u(ta),p-=c.x,d+=c.x,p<0&&(l=sa,p=-p,d-=p),k&&(o=p/k,h+=(e.height-o)/2);break;case ea:if(c.y>=0&&(g>=D||k&&(d<=F||E>=w))){C=!1;break}u(ea),o+=c.y,o<0&&(l=V,o=-o,h-=o),k&&(p=o*k,d+=(e.width-p)/2);break;case da:if(k){if(c.y<=0&&(h<=f||E>=w)){C=!1;break}u(V),o-=c.y,h+=c.y,p=o*k}else u(V),u(sa),c.x>=0?E<w?p+=c.x:c.y<=0&&h<=f&&(C=!1):p+=c.x,c.y<=0?h>f&&(o-=c.y,h+=c.y):(o-=c.y,h+=c.y);p<0&&o<0?(l=ca,o=-o,p=-p,h-=o,d-=p):p<0?(l=oa,p=-p,d-=p):o<0&&(l=ka,o=-o,h-=o);break;case oa:if(k){if(c.y<=0&&(h<=f||d<=F)){C=!1;break}u(V),o-=c.y,h+=c.y,p=o*k,d+=e.width-p}else u(V),u(ta),c.x<=0?d>F?(p-=c.x,d+=c.x):c.y<=0&&h<=f&&(C=!1):(p-=c.x,d+=c.x),c.y<=0?h>f&&(o-=c.y,h+=c.y):(o-=c.y,h+=c.y);p<0&&o<0?(l=ka,o=-o,p=-p,h-=o,d-=p):p<0?(l=da,p=-p,d-=p):o<0&&(l=ca,o=-o,h-=o);break;case ca:if(k){if(c.x<=0&&(d<=F||g>=D)){C=!1;break}u(ta),p-=c.x,d+=c.x,o=p/k}else u(ea),u(ta),c.x<=0?d>F?(p-=c.x,d+=c.x):c.y>=0&&g>=D&&(C=!1):(p-=c.x,d+=c.x),c.y>=0?g<D&&(o+=c.y):o+=c.y;p<0&&o<0?(l=da,o=-o,p=-p,h-=o,d-=p):p<0?(l=ka,p=-p,d-=p):o<0&&(l=oa,o=-o,h-=o);break;case ka:if(k){if(c.x>=0&&(E>=w||g>=D)){C=!1;break}u(sa),p+=c.x,o=p/k}else u(ea),u(sa),c.x>=0?E<w?p+=c.x:c.y>=0&&g>=D&&(C=!1):p+=c.x,c.y>=0?g<D&&(o+=c.y):o+=c.y;p<0&&o<0?(l=oa,o=-o,p=-p,h-=o,d-=p):p<0?(l=ca,p=-p,d-=p):o<0&&(l=da,o=-o,h-=o);break;case Hs:this.move(c.x,c.y),C=!1;break;case Ws:this.zoom(Ii(n),a),C=!1;break;case Xs:if(!c.x||!c.y){C=!1;break}R=Qs(this.cropper),d=_.startX-R.left,h=_.startY-R.top,p=e.minWidth,o=e.minHeight,c.x>0?l=c.y>0?ka:da:c.x<0&&(d-=p,l=c.y>0?ca:oa),c.y<0&&(h-=o),this.cropped||($(this.cropBox,z),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}C&&(e.width=p,e.height=o,e.left=d,e.top=h,this.action=l,this.renderCropBox()),S(n,function(b){b.startX=b.endX,b.startY=b.endY})}},Ki={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&I(this.dragBox,Ca),$(this.cropBox,z),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=A({},this.initialImageData),this.canvasData=A({},this.initialCanvasData),this.cropBoxData=A({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(A(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),$(this.dragBox,Ca),I(this.cropBox,z)),this},replace:function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&a&&(this.isImg&&(this.element.src=a),t?(this.url=a,this.image.src=a,this.ready&&(this.viewBoxImage.src=a,S(this.previews,function(s){s.getElementsByTagName("img")[0].src=a}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(a))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,$(this.cropper,ks)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,I(this.cropper,ks)),this},destroy:function(){var a=this.element;return a[x]?(a[x]=void 0,this.isImg&&this.replaced&&(a.src=this.originalUrl),this.uncreate(),this):this},move:function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,s=this.canvasData,r=s.left,e=s.top;return this.moveTo(Ma(a)?a:r+Number(a),Ma(t)?t:e+Number(t))},moveTo:function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,s=this.canvasData,r=!1;return a=Number(a),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(m(a)&&(s.left=a,r=!0),m(t)&&(s.top=t,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(a,t){var s=this.canvasData;return a=Number(a),a<0?a=1/(1-a):a=1+a,this.zoomTo(s.width*a/s.naturalWidth,null,t)},zoomTo:function(a,t,s){var r=this.options,e=this.canvasData,n=e.width,l=e.height,k=e.naturalWidth,d=e.naturalHeight;if(a=Number(a),a>=0&&this.ready&&!this.disabled&&r.zoomable){var h=k*a,p=d*a;if(pa(this.element,$a,{ratio:a,oldRatio:n/k,originalEvent:s})===!1)return this;if(s){var o=this.pointers,E=Qs(this.cropper),g=o&&Object.keys(o).length?Ri(o):{pageX:s.pageX,pageY:s.pageY};e.left-=(h-n)*((g.pageX-E.left-e.left)/n),e.top-=(p-l)*((g.pageY-E.top-e.top)/l)}else na(t)&&m(t.x)&&m(t.y)?(e.left-=(h-n)*((t.x-e.left)/n),e.top-=(p-l)*((t.y-e.top)/l)):(e.left-=(h-n)/2,e.top-=(p-l)/2);e.width=h,e.height=p,this.renderCanvas(!0)}return this},rotate:function(a){return this.rotateTo((this.imageData.rotate||0)+Number(a))},rotateTo:function(a){return a=Number(a),m(a)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=a%360,this.renderCanvas(!0,!0)),this},scaleX:function(a){var t=this.imageData.scaleY;return this.scale(a,m(t)?t:1)},scaleY:function(a){var t=this.imageData.scaleX;return this.scale(m(t)?t:1,a)},scale:function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,s=this.imageData,r=!1;return a=Number(a),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(m(a)&&(s.scaleX=a,r=!0),m(t)&&(s.scaleY=t,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.options,s=this.imageData,r=this.canvasData,e=this.cropBoxData,n;if(this.ready&&this.cropped){n={x:e.left-r.left,y:e.top-r.top,width:e.width,height:e.height};var l=s.width/s.naturalWidth;if(S(n,function(h,p){n[p]=h/l}),a){var k=Math.round(n.y+n.height),d=Math.round(n.x+n.width);n.x=Math.round(n.x),n.y=Math.round(n.y),n.width=d-n.x,n.height=k-n.y}}else n={x:0,y:0,width:0,height:0};return t.rotatable&&(n.rotate=s.rotate||0),t.scalable&&(n.scaleX=s.scaleX||1,n.scaleY=s.scaleY||1),n},setData:function(a){var t=this.options,s=this.imageData,r=this.canvasData,e={};if(this.ready&&!this.disabled&&na(a)){var n=!1;t.rotatable&&m(a.rotate)&&a.rotate!==s.rotate&&(s.rotate=a.rotate,n=!0),t.scalable&&(m(a.scaleX)&&a.scaleX!==s.scaleX&&(s.scaleX=a.scaleX,n=!0),m(a.scaleY)&&a.scaleY!==s.scaleY&&(s.scaleY=a.scaleY,n=!0)),n&&this.renderCanvas(!0,!0);var l=s.width/s.naturalWidth;m(a.x)&&(e.left=a.x*l+r.left),m(a.y)&&(e.top=a.y*l+r.top),m(a.width)&&(e.width=a.width*l),m(a.height)&&(e.height=a.height*l),this.setCropBoxData(e)}return this},getContainerData:function(){return this.ready?A({},this.containerData):{}},getImageData:function(){return this.sized?A({},this.imageData):{}},getCanvasData:function(){var a=this.canvasData,t={};return this.ready&&S(["left","top","width","height","naturalWidth","naturalHeight"],function(s){t[s]=a[s]}),t},setCanvasData:function(a){var t=this.canvasData,s=t.aspectRatio;return this.ready&&!this.disabled&&na(a)&&(m(a.left)&&(t.left=a.left),m(a.top)&&(t.top=a.top),m(a.width)?(t.width=a.width,t.height=a.width/s):m(a.height)&&(t.height=a.height,t.width=a.height*s),this.renderCanvas(!0)),this},getCropBoxData:function(){var a=this.cropBoxData,t;return this.ready&&this.cropped&&(t={left:a.left,top:a.top,width:a.width,height:a.height}),t||{}},setCropBoxData:function(a){var t=this.cropBoxData,s=this.options.aspectRatio,r,e;return this.ready&&this.cropped&&!this.disabled&&na(a)&&(m(a.left)&&(t.left=a.left),m(a.top)&&(t.top=a.top),m(a.width)&&a.width!==t.width&&(r=!0,t.width=a.width),m(a.height)&&a.height!==t.height&&(e=!0,t.height=a.height),s&&(r?t.height=t.width/s:e&&(t.width=t.height*s)),this.renderCropBox()),this},getCroppedCanvas:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,s=Pi(this.image,this.imageData,t,a);if(!this.cropped)return s;var r=this.getData(a.rounded),e=r.x,n=r.y,l=r.width,k=r.height,d=s.width/Math.floor(t.naturalWidth);d!==1&&(e*=d,n*=d,l*=d,k*=d);var h=l/k,p=J({aspectRatio:h,width:a.maxWidth||1/0,height:a.maxHeight||1/0}),o=J({aspectRatio:h,width:a.minWidth||0,height:a.minHeight||0},"cover"),E=J({aspectRatio:h,width:a.width||(d!==1?s.width:l),height:a.height||(d!==1?s.height:k)}),g=E.width,F=E.height;g=Math.min(p.width,Math.max(o.width,g)),F=Math.min(p.height,Math.max(o.height,F));var f=document.createElement("canvas"),w=f.getContext("2d");f.width=ha(g),f.height=ha(F),w.fillStyle=a.fillColor||"transparent",w.fillRect(0,0,g,F);var D=a.imageSmoothingEnabled,C=D===void 0?!0:D,R=a.imageSmoothingQuality;w.imageSmoothingEnabled=C,R&&(w.imageSmoothingQuality=R);var _=s.width,c=s.height,u=e,b=n,O,y,N,L,W,M;u<=-l||u>_?(u=0,O=0,N=0,W=0):u<=0?(N=-u,u=0,O=Math.min(_,l+u),W=O):u<=_&&(N=0,O=Math.min(l,_-u),W=O),O<=0||b<=-k||b>c?(b=0,y=0,L=0,M=0):b<=0?(L=-b,b=0,y=Math.min(c,k+b),M=y):b<=c&&(L=0,y=Math.min(k,c-b),M=y);var T=[u,b,O,y];if(W>0&&M>0){var aa=g/l;T.push(N*aa,L*aa,W*aa,M*aa)}return w.drawImage.apply(w,[s].concat(Ys(T.map(function(ma){return Math.floor(ha(ma))})))),f},setAspectRatio:function(a){var t=this.options;return!this.disabled&&!Ma(a)&&(t.aspectRatio=Math.max(0,a)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(a){var t=this.options,s=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var e=a===Qa,n=t.movable&&a===$s;a=e||n?a:js,t.dragMode=a,ua(s,ga,a),ra(s,za,e),ra(s,Ya,n),t.cropBoxMovable||(ua(r,ga,a),ra(r,za,e),ra(r,Ya,n))}return this}},Zi=j.Cropper,at=function(){function i(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(pi(this,i),!a||!wi.test(a.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=a,this.options=A({},Fs,na(t)&&t),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return di(i,[{key:"init",value:function(){var t=this.element,s=t.tagName.toLowerCase(),r;if(!t[x]){if(t[x]=this,s==="img"){if(this.isImg=!0,r=t.getAttribute("src")||"",this.originalUrl=r,!r)return;r=t.src}else s==="canvas"&&window.HTMLCanvasElement&&(r=t.toDataURL());this.load(r)}}},{key:"load",value:function(t){var s=this;if(t){this.url=t,this.imageData={};var r=this.element,e=this.options;if(!e.rotatable&&!e.scalable&&(e.checkOrientation=!1),!e.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Fi.test(t)){Ci.test(t)?this.read(qi(t)):this.clone();return}var n=new XMLHttpRequest,l=this.clone.bind(this);this.reloading=!0,this.xhr=n,n.onabort=l,n.onerror=l,n.ontimeout=l,n.onprogress=function(){n.getResponseHeader("content-type")!==bs&&n.abort()},n.onload=function(){s.read(n.response)},n.onloadend=function(){s.reloading=!1,s.xhr=null},e.checkCrossOrigin&&ws(t)&&r.crossOrigin&&(t=Ds(t)),n.open("GET",t,!0),n.responseType="arraybuffer",n.withCredentials=r.crossOrigin==="use-credentials",n.send()}}},{key:"read",value:function(t){var s=this.options,r=this.imageData,e=Hi(t),n=0,l=1,k=1;if(e>1){this.url=Xi(t,bs);var d=Wi(e);n=d.rotate,l=d.scaleX,k=d.scaleY}s.rotatable&&(r.rotate=n),s.scalable&&(r.scaleX=l,r.scaleY=k),this.clone()}},{key:"clone",value:function(){var t=this.element,s=this.url,r=t.crossOrigin,e=s;this.options.checkCrossOrigin&&ws(s)&&(r||(r="anonymous"),e=Ds(s)),this.crossOrigin=r,this.crossOriginUrl=e;var n=document.createElement("img");r&&(n.crossOrigin=r),n.src=e||s,n.alt=t.alt||"The image to crop",this.image=n,n.onload=this.start.bind(this),n.onerror=this.stop.bind(this),I(n,cs),t.parentNode.insertBefore(n,t.nextSibling)}},{key:"start",value:function(){var t=this,s=this.image;s.onload=null,s.onerror=null,this.sizing=!0;var r=j.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(j.navigator.userAgent),e=function(d,h){A(t.imageData,{naturalWidth:d,naturalHeight:h,aspectRatio:d/h}),t.initialImageData=A({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(s.naturalWidth&&!r){e(s.naturalWidth,s.naturalHeight);return}var n=document.createElement("img"),l=document.body||document.documentElement;this.sizingImage=n,n.onload=function(){e(n.width,n.height),r||l.removeChild(n)},n.src=s.src,r||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",l.appendChild(n))}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var t=this.element,s=this.options,r=this.image,e=t.parentNode,n=document.createElement("div");n.innerHTML=Di;var l=n.querySelector(".".concat(x,"-container")),k=l.querySelector(".".concat(x,"-canvas")),d=l.querySelector(".".concat(x,"-drag-box")),h=l.querySelector(".".concat(x,"-crop-box")),p=h.querySelector(".".concat(x,"-face"));this.container=e,this.cropper=l,this.canvas=k,this.dragBox=d,this.cropBox=h,this.viewBox=l.querySelector(".".concat(x,"-view-box")),this.face=p,k.appendChild(r),I(t,z),e.insertBefore(l,t.nextSibling),$(r,cs),this.initPreview(),this.bind(),s.initialAspectRatio=Math.max(0,s.initialAspectRatio)||NaN,s.aspectRatio=Math.max(0,s.aspectRatio)||NaN,s.viewMode=Math.max(0,Math.min(3,Math.round(s.viewMode)))||0,I(h,z),s.guides||I(h.getElementsByClassName("".concat(x,"-dashed")),z),s.center||I(h.getElementsByClassName("".concat(x,"-center")),z),s.background&&I(l,"".concat(x,"-bg")),s.highlight||I(p,ui),s.cropBoxMovable&&(I(p,Ya),ua(p,ga,Za)),s.cropBoxResizable||(I(h.getElementsByClassName("".concat(x,"-line")),z),I(h.getElementsByClassName("".concat(x,"-point")),z)),this.render(),this.ready=!0,this.setDragMode(s.dragMode),s.autoCrop&&this.crop(),this.setData(s.data),P(s.ready)&&q(t,fs,s.ready,{once:!0}),pa(t,fs)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),$(this.element,z)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Zi,i}},{key:"setDefaults",value:function(t){A(Fs,na(t)&&t)}}]),i}();A(at.prototype,$i,ji,Ui,Vi,Gi,Ki);const as=i=>(_s("data-v-b16b6a18"),i=i(),Os(),i),Qi={class:"cropper-warp"},Ji={class:"cropper-warp-left"},ae=["src"],se={class:"cropper-warp-right"},te=as(()=>B("div",{class:"cropper-warp-right-title"},"预览",-1)),ie={class:"cropper-warp-right-item"},ee={class:"cropper-warp-right-value"},ne=["src"],re=as(()=>B("div",{class:"cropper-warp-right-label"},"100 x 100",-1)),le={class:"cropper-warp-right-item"},he={class:"cropper-warp-right-value"},pe=["src"],de=as(()=>B("div",{class:"cropper-warp-right-label"},"50 x 50",-1)),oe={class:"dialog-footer"},ke={__name:"index",setup(i,{expose:a}){const t=Ts({isShowDialog:!1,cropperImg:"",cropperImgBase64:"",cropper:""}),s=k=>{t.cropperImg=k,t.isShowDialog=!0,As(()=>{l()})},r=()=>{t.isShowDialog=!1},e=()=>{r()},n=()=>{},l=()=>{const k=document.querySelector(".cropper-warp-left-img");t.cropper=new at(k,{viewMode:1,dragMode:"none",initialAspectRatio:1,aspectRatio:1,preview:".before",background:!1,autoCropArea:.6,zoomOnWheel:!1,crop:()=>{t.cropperImgBase64=t.cropper.getCroppedCanvas().toDataURL("image/jpeg")}})};return a({openDialog:s}),(k,d)=>(K(),va("div",null,[X(v(hi),{title:"更换头像",modelValue:t.isShowDialog,"onUpdate:modelValue":d[0]||(d[0]=h=>t.isShowDialog=h),width:"769px"},{footer:Y(()=>[B("span",oe,[X(v(Na),{onClick:e,size:"default"},{default:Y(()=>[Fa("取 消")]),_:1}),X(v(Na),{type:"primary",onClick:n,size:"default"},{default:Y(()=>[Fa("更 换")]),_:1})])]),default:Y(()=>[B("div",Qi,[B("div",Ji,[B("img",{src:t.cropperImg,class:"cropper-warp-left-img"},null,8,ae)]),B("div",se,[te,B("div",ie,[B("div",ee,[B("img",{src:t.cropperImgBase64,class:"cropper-warp-right-value-img"},null,8,ne)]),re]),B("div",le,[B("div",he,[B("img",{src:t.cropperImgBase64,class:"cropper-warp-right-value-img cropper-size"},null,8,pe)]),de])])])]),_:1},8,["modelValue"])]))}},ce=Ms(ke,[["__scopeId","data-v-b16b6a18"]]),st=i=>(_s("data-v-3e149213"),i=i(),Os(),i),ve=st(()=>B("h1",{id:"基于cropperjs-实现的-图片裁切",tabindex:"-1"},[Fa("基于cropperjs 实现的 图片裁切 "),B("a",{class:"header-anchor",href:"#基于cropperjs-实现的-图片裁切","aria-label":'Permalink to "基于cropperjs 实现的 图片裁切"'},"​")],-1)),Ee=st(()=>B("br",null,null,-1)),ge={class:"croppers-container layout-pd"},ue={class:"cropper-img-warp"},fe={class:"mb15 mt15"},me=["src"],ye=Ft("",1),Ue=JSON.parse('{"title":"基于cropperjs 实现的 图片裁切","description":"","frontmatter":{},"headers":[],"relativePath":"pages/Base/Components/cropper/index.md","filePath":"pages/Base/Components/cropper/index.md","lastUpdated":1710085005000}'),be={name:"pages/Base/Components/cropper/index.md"},Fe=Object.assign(be,{setup(i){const a=Z(),t=Ts({cropperImg:"https://img2.baidu.com/it/u=1978192862,2048448374&fm=253&fmt=auto&app=138&f=JPEG?w=504&h=500"}),s=()=>{a.value.openDialog(t.cropperImg)};return(r,e)=>(K(),va("div",null,[ve,Ee,B("div",ge,[X(v(Yt),{shadow:"hover",header:"cropper 图片裁剪"},{default:Y(()=>[X(v(zt),{title:"感谢优秀的 `cropperjs`，项目地址：https://github.com/fengyuanchen/cropperjs",type:"success",closable:!1,class:"mb15"}),B("div",ue,[B("div",fe,[B("img",{class:"cropper-img",src:t.cropperImg},null,8,me)]),X(v(Na),{type:"primary",size:"default",onClick:s},{default:Y(()=>[Fa(" 更换头像 ")]),_:1})])]),_:1}),X(ce,{ref_key:"cropperDialogRef",ref:a},null,512)]),ye]))}}),Ve=Ms(Fe,[["__scopeId","data-v-3e149213"]]);export{Ue as __pageData,Ve as default};
