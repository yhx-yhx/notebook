import{aA as et,l as Bs,z as nt,aD as rt,az as lt,aS as ht,y as _a,ay as pt,at as xa,d as ua,J as X,r as U,a4 as ct,O as ns,k as la,o as K,c as ka,m as B,n as G,p as k,t as dt,w as Y,b as Oa,L as ot,e as Sa,Q as xs,h as Z,U as As,aw as ft,a3 as kt,$ as vt,aj as Et,N as gt,aE as ut,aG as mt,T as yt,aL as bt,_ as Ms,ao as Ts,a as Fa,q as _s,s as Os,a5 as Ft}from"./chunks/framework.Cyz3vTHn.js";import{E as Na}from"./chunks/index.CZcDM0ok.js";import{u as Ua,b as Va,d as Ia,_ as Ss,c as Ct,w as wt}from"./chunks/plugin-vue_export-helper.Fsmj3gze.js";import{P as Aa}from"./chunks/vnode.CBLYlbSD.js";import{q as Ra,n as rs,t as Dt,m as Bt,r as xt,E as At}from"./chunks/index.4hICx8yr.js";import{i as Mt,C as Tt}from"./chunks/icon.BN6CzzPm.js";import{u as _t}from"./chunks/index.DDvycNo5.js";import{F as Ot,E as St}from"./chunks/focus-trap.ihPlx5kF.js";import{t as Nt,U as Ns}from"./chunks/event.BE20p1dL.js";import{b as Is,k as It,u as ls}from"./chunks/types.DTMeA5EJ.js";import{u as Rt}from"./chunks/index.C4Hremo0.js";import{u as hs}from"./chunks/constants.DkItJwIb.js";import{u as Lt}from"./chunks/use-global-config.BtN9uxNz.js";import{g as Pt}from"./chunks/scroll.CpkHC_n9.js";import{u as ps}from"./chunks/index.BVK2gQxZ.js";import{E as zt}from"./chunks/index.BLF5FumA.js";import{E as Yt}from"./chunks/index.QF29vx0d.js";import"./chunks/use-form-item.CoVXonr6.js";import"./chunks/index.DCbbXQus.js";import"./chunks/get.nfDng5OV.js";import"./chunks/aria.BUADUvnR.js";import"./chunks/isNil.CHIgUVhi.js";import"./chunks/objects.udGwCpTy.js";const qt=(...i)=>a=>{i.forEach(t=>{et(t)?t(a):t.value=a})},Xt=(i,a,t)=>{let s={offsetX:0,offsetY:0};const r=l=>{const o=l.clientX,c=l.clientY,{offsetX:h,offsetY:p}=s,d=i.value.getBoundingClientRect(),v=d.left,E=d.top,F=d.width,u=d.height,w=document.documentElement.clientWidth,D=document.documentElement.clientHeight,C=-v+h,R=-E+p,_=w-v-F+h,f=D-E-u+p,g=O=>{const y=Math.min(Math.max(h+O.clientX-o,C),_),N=Math.min(Math.max(p+O.clientY-c,R),f);s={offsetX:y,offsetY:N},i.value.style.transform=`translate(${Ra(y)}, ${Ra(N)})`},b=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",b)},e=()=>{a.value&&i.value&&a.value.addEventListener("mousedown",r)},n=()=>{a.value&&i.value&&a.value.removeEventListener("mousedown",r)};Bs(()=>{nt(()=>{t.value?e():n()})}),rt(()=>{n()})},Ht=(i,a={})=>{lt(i)||Nt("[useLockscreen]","You need to pass a ref param to this function");const t=a.ns||Ua("popup"),s=ht(()=>t.bm("parent","hidden"));if(!Is||rs(document.body,s.value))return;let r=0,e=!1,n="0";const l=()=>{setTimeout(()=>{xt(document==null?void 0:document.body,s.value),e&&document&&(document.body.style.width=n)},200)};_a(i,o=>{if(!o){l();return}e=!rs(document.body,s.value),e&&(n=document.body.style.width),r=Pt(t.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,h=Dt(document.body,"overflowY");r>0&&(c||h==="scroll")&&e&&(document.body.style.width=`calc(100% - ${r}px)`),Bt(document.body,s.value)}),pt(()=>l())},Rs=i=>{if(!i)return{onClick:xa,onMousedown:xa,onMouseup:xa};let a=!1,t=!1;return{onClick:n=>{a&&t&&i(n),a=t=!1},onMousedown:n=>{a=n.target===n.currentTarget},onMouseup:n=>{t=n.target===n.currentTarget}}},Wt=Va({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Ia([String,Array,Object])},zIndex:{type:Ia([String,Number])}}),$t={click:i=>i instanceof MouseEvent},jt="overlay";var Ut=ua({name:"ElOverlay",props:Wt,emits:$t,setup(i,{slots:a,emit:t}){const s=Ua(jt),r=o=>{t("click",o)},{onClick:e,onMousedown:n,onMouseup:l}=Rs(i.customMaskEvent?void 0:r);return()=>i.mask?X("div",{class:[s.b(),i.overlayClass],style:{zIndex:i.zIndex},onClick:e,onMousedown:n,onMouseup:l},[U(a,"default")],Aa.STYLE|Aa.CLASS|Aa.PROPS,["onClick","onMouseup","onMousedown"]):ct("div",{class:i.overlayClass,style:{zIndex:i.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[U(a,"default")])}});const Vt=Ut,Ls=Symbol("dialogInjectionKey"),Ps=Va({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Mt},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Gt={close:()=>!0},Kt=["aria-label"],Zt=["id"],Qt=ua({name:"ElDialogContent"}),Jt=ua({...Qt,props:Ps,emits:Gt,setup(i){const a=i,{t}=_t(),{Close:s}=Tt,{dialogRef:r,headerRef:e,bodyId:n,ns:l,style:o}=ns(Ls),{focusTrapRef:c}=ns(Ot),h=qt(c,r),p=la(()=>a.draggable);return Xt(r,e,p),(d,v)=>(K(),ka("div",{ref:k(h),class:G([k(l).b(),k(l).is("fullscreen",d.fullscreen),k(l).is("draggable",k(p)),k(l).is("align-center",d.alignCenter),{[k(l).m("center")]:d.center},d.customClass]),style:xs(k(o)),tabindex:"-1"},[B("header",{ref_key:"headerRef",ref:e,class:G(k(l).e("header"))},[U(d.$slots,"header",{},()=>[B("span",{role:"heading",class:G(k(l).e("title"))},dt(d.title),3)]),d.showClose?(K(),ka("button",{key:0,"aria-label":k(t)("el.dialog.close"),class:G(k(l).e("headerbtn")),type:"button",onClick:v[0]||(v[0]=E=>d.$emit("close"))},[X(k(At),{class:G(k(l).e("close"))},{default:Y(()=>[(K(),Oa(ot(d.closeIcon||k(s))))]),_:1},8,["class"])],10,Kt)):Sa("v-if",!0)],2),B("div",{id:k(n),class:G(k(l).e("body"))},[U(d.$slots,"default")],10,Zt),d.$slots.footer?(K(),ka("footer",{key:0,class:G(k(l).e("footer"))},[U(d.$slots,"footer")],2)):Sa("v-if",!0)],6))}});var ai=Ss(Jt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const si=Va({...Ps,appendToBody:{type:Boolean,default:!1},beforeClose:{type:Ia(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),ti={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Ns]:i=>It(i),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ii=(i,a)=>{const s=ft().emit,{nextZIndex:r}=Rt();let e="";const n=hs(),l=hs(),o=Z(!1),c=Z(!1),h=Z(!1),p=Z(i.zIndex||r());let d,v;const E=Lt("namespace",Ct),F=la(()=>{const M={},T=`--${E.value}-dialog`;return i.fullscreen||(i.top&&(M[`${T}-margin-top`]=i.top),i.width&&(M[`${T}-width`]=Ra(i.width))),M}),u=la(()=>i.alignCenter?{display:"flex"}:{});function w(){s("opened")}function D(){s("closed"),s(Ns,!1),i.destroyOnClose&&(h.value=!1)}function C(){s("close")}function R(){v==null||v(),d==null||d(),i.openDelay&&i.openDelay>0?{stop:d}=ls(()=>b(),i.openDelay):b()}function _(){d==null||d(),v==null||v(),i.closeDelay&&i.closeDelay>0?{stop:v}=ls(()=>O(),i.closeDelay):O()}function f(){function M(T){T||(c.value=!0,o.value=!1)}i.beforeClose?i.beforeClose(M):_()}function g(){i.closeOnClickModal&&f()}function b(){Is&&(o.value=!0)}function O(){o.value=!1}function y(){s("openAutoFocus")}function N(){s("closeAutoFocus")}function L(M){var T;((T=M.detail)==null?void 0:T.focusReason)==="pointer"&&M.preventDefault()}i.lockScroll&&Ht(o);function W(){i.closeOnPressEscape&&f()}return _a(()=>i.modelValue,M=>{M?(c.value=!1,R(),h.value=!0,p.value=i.zIndex?p.value++:r(),As(()=>{s("open"),a.value&&(a.value.scrollTop=0)})):o.value&&_()}),_a(()=>i.fullscreen,M=>{a.value&&(M?(e=a.value.style.transform,a.value.style.transform=""):a.value.style.transform=e)}),Bs(()=>{i.modelValue&&(o.value=!0,h.value=!0,R())}),{afterEnter:w,afterLeave:D,beforeLeave:C,handleClose:f,onModalClick:g,close:_,doClose:O,onOpenAutoFocus:y,onCloseAutoFocus:N,onCloseRequested:W,onFocusoutPrevented:L,titleId:n,bodyId:l,closed:c,style:F,overlayDialogStyle:u,rendered:h,visible:o,zIndex:p}},ei=["aria-label","aria-labelledby","aria-describedby"],ni=ua({name:"ElDialog",inheritAttrs:!1}),ri=ua({...ni,props:si,emits:ti,setup(i,{expose:a}){const t=i,s=kt();ps({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},la(()=>!!s.title)),ps({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},la(()=>!!t.customClass));const r=Ua("dialog"),e=Z(),n=Z(),l=Z(),{visible:o,titleId:c,bodyId:h,style:p,overlayDialogStyle:d,rendered:v,zIndex:E,afterEnter:F,afterLeave:u,beforeLeave:w,handleClose:D,onModalClick:C,onOpenAutoFocus:R,onCloseAutoFocus:_,onCloseRequested:f,onFocusoutPrevented:g}=ii(t,e);vt(Ls,{dialogRef:e,headerRef:n,bodyId:h,ns:r,rendered:v,style:p});const b=Rs(C),O=la(()=>t.draggable&&!t.fullscreen);return a({visible:o,dialogContentRef:l}),(y,N)=>(K(),Oa(bt,{to:"body",disabled:!y.appendToBody},[X(yt,{name:"dialog-fade",onAfterEnter:k(F),onAfterLeave:k(u),onBeforeLeave:k(w),persisted:""},{default:Y(()=>[Et(X(k(Vt),{"custom-mask-event":"",mask:y.modal,"overlay-class":y.modalClass,"z-index":k(E)},{default:Y(()=>[B("div",{role:"dialog","aria-modal":"true","aria-label":y.title||void 0,"aria-labelledby":y.title?void 0:k(c),"aria-describedby":k(h),class:G(`${k(r).namespace.value}-overlay-dialog`),style:xs(k(d)),onClick:N[0]||(N[0]=(...L)=>k(b).onClick&&k(b).onClick(...L)),onMousedown:N[1]||(N[1]=(...L)=>k(b).onMousedown&&k(b).onMousedown(...L)),onMouseup:N[2]||(N[2]=(...L)=>k(b).onMouseup&&k(b).onMouseup(...L))},[X(k(St),{loop:"",trapped:k(o),"focus-start-el":"container",onFocusAfterTrapped:k(R),onFocusAfterReleased:k(_),onFocusoutPrevented:k(g),onReleaseRequested:k(f)},{default:Y(()=>[k(v)?(K(),Oa(ai,gt({key:0,ref_key:"dialogContentRef",ref:l},y.$attrs,{"custom-class":y.customClass,center:y.center,"align-center":y.alignCenter,"close-icon":y.closeIcon,draggable:k(O),fullscreen:y.fullscreen,"show-close":y.showClose,title:y.title,onClose:k(D)}),ut({header:Y(()=>[y.$slots.title?U(y.$slots,"title",{key:1}):U(y.$slots,"header",{key:0,close:k(D),titleId:k(c),titleClass:k(r).e("title")})]),default:Y(()=>[U(y.$slots,"default")]),_:2},[y.$slots.footer?{name:"footer",fn:Y(()=>[U(y.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):Sa("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,ei)]),_:3},8,["mask","overlay-class","z-index"]),[[mt,k(o)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var li=Ss(ri,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const hi=wt(li);/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */function cs(i,a){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);a&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,s)}return t}function zs(i){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?arguments[a]:{};a%2?cs(Object(t),!0).forEach(function(s){di(i,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):cs(Object(t)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(t,s))})}return i}function La(i){"@babel/helpers - typeof";return La=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},La(i)}function pi(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")}function ds(i,a){for(var t=0;t<a.length;t++){var s=a[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,qs(s.key),s)}}function ci(i,a,t){return a&&ds(i.prototype,a),t&&ds(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function di(i,a,t){return a=qs(a),a in i?Object.defineProperty(i,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[a]=t,i}function Ys(i){return oi(i)||fi(i)||ki(i)||vi()}function oi(i){if(Array.isArray(i))return Pa(i)}function fi(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function ki(i,a){if(i){if(typeof i=="string")return Pa(i,a);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Pa(i,a)}}function Pa(i,a){(a==null||a>i.length)&&(a=i.length);for(var t=0,s=new Array(a);t<a;t++)s[t]=i[t];return s}function vi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ei(i,a){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var s=t.call(i,a||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(i)}function qs(i){var a=Ei(i,"string");return typeof a=="symbol"?a:String(a)}var wa=typeof window<"u"&&typeof window.document<"u",j=wa?window:{},Ga=wa&&j.document.documentElement?"ontouchstart"in j.document.documentElement:!1,Ka=wa?"PointerEvent"in j:!1,x="cropper",Za="all",Xs="crop",Hs="move",Ws="zoom",sa="e",ta="w",ea="s",V="n",ca="ne",da="nw",oa="se",fa="sw",za="".concat(x,"-crop"),os="".concat(x,"-disabled"),z="".concat(x,"-hidden"),fs="".concat(x,"-hide"),gi="".concat(x,"-invisible"),Ca="".concat(x,"-modal"),Ya="".concat(x,"-move"),Ea="".concat(x,"Action"),ya="".concat(x,"Preview"),Qa="crop",$s="move",js="none",qa="crop",Xa="cropend",Ha="cropmove",Wa="cropstart",ks="dblclick",ui=Ga?"touchstart":"mousedown",mi=Ga?"touchmove":"mousemove",yi=Ga?"touchend touchcancel":"mouseup",vs=Ka?"pointerdown":ui,Es=Ka?"pointermove":mi,gs=Ka?"pointerup pointercancel":yi,us="ready",ms="resize",ys="wheel",$a="zoom",bs="image/jpeg",bi=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Fi=/^data:/,Ci=/^data:image\/jpeg;base64,/,wi=/^img|canvas$/i,Us=200,Vs=100,Fs={viewMode:0,dragMode:Qa,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Us,minContainerHeight:Vs,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Di='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Bi=Number.isNaN||j.isNaN;function m(i){return typeof i=="number"&&!Bi(i)}var Cs=function(a){return a>0&&a<1/0};function Ma(i){return typeof i>"u"}function ia(i){return La(i)==="object"&&i!==null}var xi=Object.prototype.hasOwnProperty;function na(i){if(!ia(i))return!1;try{var a=i.constructor,t=a.prototype;return a&&t&&xi.call(t,"isPrototypeOf")}catch{return!1}}function P(i){return typeof i=="function"}var Ai=Array.prototype.slice;function Gs(i){return Array.from?Array.from(i):Ai.call(i)}function S(i,a){return i&&P(a)&&(Array.isArray(i)||m(i.length)?Gs(i).forEach(function(t,s){a.call(i,t,s,i)}):ia(i)&&Object.keys(i).forEach(function(t){a.call(i,i[t],t,i)})),i}var A=Object.assign||function(a){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return ia(a)&&s.length>0&&s.forEach(function(e){ia(e)&&Object.keys(e).forEach(function(n){a[n]=e[n]})}),a},Mi=/\.\d*(?:0|9){12}\d*$/;function ha(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Mi.test(i)?Math.round(i*a)/a:i}var Ti=/^width|height|left|top|marginLeft|marginTop$/;function Q(i,a){var t=i.style;S(a,function(s,r){Ti.test(r)&&m(s)&&(s="".concat(s,"px")),t[r]=s})}function _i(i,a){return i.classList?i.classList.contains(a):i.className.indexOf(a)>-1}function I(i,a){if(a){if(m(i.length)){S(i,function(s){I(s,a)});return}if(i.classList){i.classList.add(a);return}var t=i.className.trim();t?t.indexOf(a)<0&&(i.className="".concat(t," ").concat(a)):i.className=a}}function $(i,a){if(a){if(m(i.length)){S(i,function(t){$(t,a)});return}if(i.classList){i.classList.remove(a);return}i.className.indexOf(a)>=0&&(i.className=i.className.replace(a,""))}}function ra(i,a,t){if(a){if(m(i.length)){S(i,function(s){ra(s,a,t)});return}t?I(i,a):$(i,a)}}var Oi=/([a-z\d])([A-Z])/g;function Ja(i){return i.replace(Oi,"$1-$2").toLowerCase()}function ja(i,a){return ia(i[a])?i[a]:i.dataset?i.dataset[a]:i.getAttribute("data-".concat(Ja(a)))}function ga(i,a,t){ia(t)?i[a]=t:i.dataset?i.dataset[a]=t:i.setAttribute("data-".concat(Ja(a)),t)}function Si(i,a){if(ia(i[a]))try{delete i[a]}catch{i[a]=void 0}else if(i.dataset)try{delete i.dataset[a]}catch{i.dataset[a]=void 0}else i.removeAttribute("data-".concat(Ja(a)))}var Ks=/\s\s*/,Zs=function(){var i=!1;if(wa){var a=!1,t=function(){},s=Object.defineProperty({},"once",{get:function(){return i=!0,a},set:function(e){a=e}});j.addEventListener("test",t,s),j.removeEventListener("test",t,s)}return i}();function H(i,a,t){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=t;a.trim().split(Ks).forEach(function(e){if(!Zs){var n=i.listeners;n&&n[e]&&n[e][t]&&(r=n[e][t],delete n[e][t],Object.keys(n[e]).length===0&&delete n[e],Object.keys(n).length===0&&delete i.listeners)}i.removeEventListener(e,r,s)})}function q(i,a,t){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=t;a.trim().split(Ks).forEach(function(e){if(s.once&&!Zs){var n=i.listeners,l=n===void 0?{}:n;r=function(){delete l[e][t],i.removeEventListener(e,r,s);for(var c=arguments.length,h=new Array(c),p=0;p<c;p++)h[p]=arguments[p];t.apply(i,h)},l[e]||(l[e]={}),l[e][t]&&i.removeEventListener(e,l[e][t],s),l[e][t]=r,i.listeners=l}i.addEventListener(e,r,s)})}function pa(i,a,t){var s;return P(Event)&&P(CustomEvent)?s=new CustomEvent(a,{detail:t,bubbles:!0,cancelable:!0}):(s=document.createEvent("CustomEvent"),s.initCustomEvent(a,!0,!0,t)),i.dispatchEvent(s)}function Qs(i){var a=i.getBoundingClientRect();return{left:a.left+(window.pageXOffset-document.documentElement.clientLeft),top:a.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ta=j.location,Ni=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function ws(i){var a=i.match(Ni);return a!==null&&(a[1]!==Ta.protocol||a[2]!==Ta.hostname||a[3]!==Ta.port)}function Ds(i){var a="timestamp=".concat(new Date().getTime());return i+(i.indexOf("?")===-1?"?":"&")+a}function va(i){var a=i.rotate,t=i.scaleX,s=i.scaleY,r=i.translateX,e=i.translateY,n=[];m(r)&&r!==0&&n.push("translateX(".concat(r,"px)")),m(e)&&e!==0&&n.push("translateY(".concat(e,"px)")),m(a)&&a!==0&&n.push("rotate(".concat(a,"deg)")),m(t)&&t!==1&&n.push("scaleX(".concat(t,")")),m(s)&&s!==1&&n.push("scaleY(".concat(s,")"));var l=n.length?n.join(" "):"none";return{WebkitTransform:l,msTransform:l,transform:l}}function Ii(i){var a=zs({},i),t=0;return S(i,function(s,r){delete a[r],S(a,function(e){var n=Math.abs(s.startX-e.startX),l=Math.abs(s.startY-e.startY),o=Math.abs(s.endX-e.endX),c=Math.abs(s.endY-e.endY),h=Math.sqrt(n*n+l*l),p=Math.sqrt(o*o+c*c),d=(p-h)/h;Math.abs(d)>Math.abs(t)&&(t=d)})}),t}function ba(i,a){var t=i.pageX,s=i.pageY,r={endX:t,endY:s};return a?r:zs({startX:t,startY:s},r)}function Ri(i){var a=0,t=0,s=0;return S(i,function(r){var e=r.startX,n=r.startY;a+=e,t+=n,s+=1}),a/=s,t/=s,{pageX:a,pageY:t}}function J(i){var a=i.aspectRatio,t=i.height,s=i.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",e=Cs(s),n=Cs(t);if(e&&n){var l=t*a;r==="contain"&&l>s||r==="cover"&&l<s?t=s/a:s=t*a}else e?t=s/a:n&&(s=t*a);return{width:s,height:t}}function Li(i){var a=i.width,t=i.height,s=i.degree;if(s=Math.abs(s)%180,s===90)return{width:t,height:a};var r=s%90*Math.PI/180,e=Math.sin(r),n=Math.cos(r),l=a*n+t*e,o=a*e+t*n;return s>90?{width:o,height:l}:{width:l,height:o}}function Pi(i,a,t,s){var r=a.aspectRatio,e=a.naturalWidth,n=a.naturalHeight,l=a.rotate,o=l===void 0?0:l,c=a.scaleX,h=c===void 0?1:c,p=a.scaleY,d=p===void 0?1:p,v=t.aspectRatio,E=t.naturalWidth,F=t.naturalHeight,u=s.fillColor,w=u===void 0?"transparent":u,D=s.imageSmoothingEnabled,C=D===void 0?!0:D,R=s.imageSmoothingQuality,_=R===void 0?"low":R,f=s.maxWidth,g=f===void 0?1/0:f,b=s.maxHeight,O=b===void 0?1/0:b,y=s.minWidth,N=y===void 0?0:y,L=s.minHeight,W=L===void 0?0:L,M=document.createElement("canvas"),T=M.getContext("2d"),aa=J({aspectRatio:v,width:g,height:O}),ma=J({aspectRatio:v,width:N,height:W},"cover"),Da=Math.min(aa.width,Math.max(ma.width,E)),Ba=Math.min(aa.height,Math.max(ma.height,F)),ss=J({aspectRatio:r,width:g,height:O}),ts=J({aspectRatio:r,width:N,height:W},"cover"),is=Math.min(ss.width,Math.max(ts.width,e)),es=Math.min(ss.height,Math.max(ts.height,n)),tt=[-is/2,-es/2,is,es];return M.width=ha(Da),M.height=ha(Ba),T.fillStyle=w,T.fillRect(0,0,Da,Ba),T.save(),T.translate(Da/2,Ba/2),T.rotate(o*Math.PI/180),T.scale(h,d),T.imageSmoothingEnabled=C,T.imageSmoothingQuality=_,T.drawImage.apply(T,[i].concat(Ys(tt.map(function(it){return Math.floor(ha(it))})))),T.restore(),M}var Js=String.fromCharCode;function zi(i,a,t){var s="";t+=a;for(var r=a;r<t;r+=1)s+=Js(i.getUint8(r));return s}var Yi=/^data:.*,/;function qi(i){var a=i.replace(Yi,""),t=atob(a),s=new ArrayBuffer(t.length),r=new Uint8Array(s);return S(r,function(e,n){r[n]=t.charCodeAt(n)}),s}function Xi(i,a){for(var t=[],s=8192,r=new Uint8Array(i);r.length>0;)t.push(Js.apply(null,Gs(r.subarray(0,s)))),r=r.subarray(s);return"data:".concat(a,";base64,").concat(btoa(t.join("")))}function Hi(i){var a=new DataView(i),t;try{var s,r,e;if(a.getUint8(0)===255&&a.getUint8(1)===216)for(var n=a.byteLength,l=2;l+1<n;){if(a.getUint8(l)===255&&a.getUint8(l+1)===225){r=l;break}l+=1}if(r){var o=r+4,c=r+10;if(zi(a,o,4)==="Exif"){var h=a.getUint16(c);if(s=h===18761,(s||h===19789)&&a.getUint16(c+2,s)===42){var p=a.getUint32(c+4,s);p>=8&&(e=c+p)}}}if(e){var d=a.getUint16(e,s),v,E;for(E=0;E<d;E+=1)if(v=e+E*12+2,a.getUint16(v,s)===274){v+=8,t=a.getUint16(v,s),a.setUint16(v,1,s);break}}}catch{t=1}return t}function Wi(i){var a=0,t=1,s=1;switch(i){case 2:t=-1;break;case 3:a=-180;break;case 4:s=-1;break;case 5:a=90,s=-1;break;case 6:a=90;break;case 7:a=90,t=-1;break;case 8:a=-90;break}return{rotate:a,scaleX:t,scaleY:s}}var $i={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var a=this.element,t=this.options,s=this.container,r=this.cropper,e=Number(t.minContainerWidth),n=Number(t.minContainerHeight);I(r,z),$(a,z);var l={width:Math.max(s.offsetWidth,e>=0?e:Us),height:Math.max(s.offsetHeight,n>=0?n:Vs)};this.containerData=l,Q(r,{width:l.width,height:l.height}),I(a,z),$(r,z)},initCanvas:function(){var a=this.containerData,t=this.imageData,s=this.options.viewMode,r=Math.abs(t.rotate)%180===90,e=r?t.naturalHeight:t.naturalWidth,n=r?t.naturalWidth:t.naturalHeight,l=e/n,o=a.width,c=a.height;a.height*l>a.width?s===3?o=a.height*l:c=a.width/l:s===3?c=a.width/l:o=a.height*l;var h={aspectRatio:l,naturalWidth:e,naturalHeight:n,width:o,height:c};this.canvasData=h,this.limited=s===1||s===2,this.limitCanvas(!0,!0),h.width=Math.min(Math.max(h.width,h.minWidth),h.maxWidth),h.height=Math.min(Math.max(h.height,h.minHeight),h.maxHeight),h.left=(a.width-h.width)/2,h.top=(a.height-h.height)/2,h.oldLeft=h.left,h.oldTop=h.top,this.initialCanvasData=A({},h)},limitCanvas:function(a,t){var s=this.options,r=this.containerData,e=this.canvasData,n=this.cropBoxData,l=s.viewMode,o=e.aspectRatio,c=this.cropped&&n;if(a){var h=Number(s.minCanvasWidth)||0,p=Number(s.minCanvasHeight)||0;l>1?(h=Math.max(h,r.width),p=Math.max(p,r.height),l===3&&(p*o>h?h=p*o:p=h/o)):l>0&&(h?h=Math.max(h,c?n.width:0):p?p=Math.max(p,c?n.height:0):c&&(h=n.width,p=n.height,p*o>h?h=p*o:p=h/o));var d=J({aspectRatio:o,width:h,height:p});h=d.width,p=d.height,e.minWidth=h,e.minHeight=p,e.maxWidth=1/0,e.maxHeight=1/0}if(t)if(l>(c?0:1)){var v=r.width-e.width,E=r.height-e.height;e.minLeft=Math.min(0,v),e.minTop=Math.min(0,E),e.maxLeft=Math.max(0,v),e.maxTop=Math.max(0,E),c&&this.limited&&(e.minLeft=Math.min(n.left,n.left+(n.width-e.width)),e.minTop=Math.min(n.top,n.top+(n.height-e.height)),e.maxLeft=n.left,e.maxTop=n.top,l===2&&(e.width>=r.width&&(e.minLeft=Math.min(0,v),e.maxLeft=Math.max(0,v)),e.height>=r.height&&(e.minTop=Math.min(0,E),e.maxTop=Math.max(0,E))))}else e.minLeft=-e.width,e.minTop=-e.height,e.maxLeft=r.width,e.maxTop=r.height},renderCanvas:function(a,t){var s=this.canvasData,r=this.imageData;if(t){var e=Li({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),n=e.width,l=e.height,o=s.width*(n/s.naturalWidth),c=s.height*(l/s.naturalHeight);s.left-=(o-s.width)/2,s.top-=(c-s.height)/2,s.width=o,s.height=c,s.aspectRatio=n/l,s.naturalWidth=n,s.naturalHeight=l,this.limitCanvas(!0,!1)}(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCanvas(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,Q(this.canvas,A({width:s.width,height:s.height},va({translateX:s.left,translateY:s.top}))),this.renderImage(a),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(a){var t=this.canvasData,s=this.imageData,r=s.naturalWidth*(t.width/t.naturalWidth),e=s.naturalHeight*(t.height/t.naturalHeight);A(s,{width:r,height:e,left:(t.width-r)/2,top:(t.height-e)/2}),Q(this.image,A({width:s.width,height:s.height},va(A({translateX:s.left,translateY:s.top},s)))),a&&this.output()},initCropBox:function(){var a=this.options,t=this.canvasData,s=a.aspectRatio||a.initialAspectRatio,r=Number(a.autoCropArea)||.8,e={width:t.width,height:t.height};s&&(t.height*s>t.width?e.height=e.width/s:e.width=e.height*s),this.cropBoxData=e,this.limitCropBox(!0,!0),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),e.width=Math.max(e.minWidth,e.width*r),e.height=Math.max(e.minHeight,e.height*r),e.left=t.left+(t.width-e.width)/2,e.top=t.top+(t.height-e.height)/2,e.oldLeft=e.left,e.oldTop=e.top,this.initialCropBoxData=A({},e)},limitCropBox:function(a,t){var s=this.options,r=this.containerData,e=this.canvasData,n=this.cropBoxData,l=this.limited,o=s.aspectRatio;if(a){var c=Number(s.minCropBoxWidth)||0,h=Number(s.minCropBoxHeight)||0,p=l?Math.min(r.width,e.width,e.width+e.left,r.width-e.left):r.width,d=l?Math.min(r.height,e.height,e.height+e.top,r.height-e.top):r.height;c=Math.min(c,r.width),h=Math.min(h,r.height),o&&(c&&h?h*o>c?h=c/o:c=h*o:c?h=c/o:h&&(c=h*o),d*o>p?d=p/o:p=d*o),n.minWidth=Math.min(c,p),n.minHeight=Math.min(h,d),n.maxWidth=p,n.maxHeight=d}t&&(l?(n.minLeft=Math.max(0,e.left),n.minTop=Math.max(0,e.top),n.maxLeft=Math.min(r.width,e.left+e.width)-n.width,n.maxTop=Math.min(r.height,e.top+e.height)-n.height):(n.minLeft=0,n.minTop=0,n.maxLeft=r.width-n.width,n.maxTop=r.height-n.height))},renderCropBox:function(){var a=this.options,t=this.containerData,s=this.cropBoxData;(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCropBox(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,a.movable&&a.cropBoxMovable&&ga(this.face,Ea,s.width>=t.width&&s.height>=t.height?Hs:Za),Q(this.cropBox,A({width:s.width,height:s.height},va({translateX:s.left,translateY:s.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),pa(this.element,qa,this.getData())}},ji={initPreview:function(){var a=this.element,t=this.crossOrigin,s=this.options.preview,r=t?this.crossOriginUrl:this.url,e=a.alt||"The image to preview",n=document.createElement("img");if(t&&(n.crossOrigin=t),n.src=r,n.alt=e,this.viewBox.appendChild(n),this.viewBoxImage=n,!!s){var l=s;typeof s=="string"?l=a.ownerDocument.querySelectorAll(s):s.querySelector&&(l=[s]),this.previews=l,S(l,function(o){var c=document.createElement("img");ga(o,ya,{width:o.offsetWidth,height:o.offsetHeight,html:o.innerHTML}),t&&(c.crossOrigin=t),c.src=r,c.alt=e,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',o.innerHTML="",o.appendChild(c)})}},resetPreview:function(){S(this.previews,function(a){var t=ja(a,ya);Q(a,{width:t.width,height:t.height}),a.innerHTML=t.html,Si(a,ya)})},preview:function(){var a=this.imageData,t=this.canvasData,s=this.cropBoxData,r=s.width,e=s.height,n=a.width,l=a.height,o=s.left-t.left-a.left,c=s.top-t.top-a.top;!this.cropped||this.disabled||(Q(this.viewBoxImage,A({width:n,height:l},va(A({translateX:-o,translateY:-c},a)))),S(this.previews,function(h){var p=ja(h,ya),d=p.width,v=p.height,E=d,F=v,u=1;r&&(u=d/r,F=e*u),e&&F>v&&(u=v/e,E=r*u,F=v),Q(h,{width:E,height:F}),Q(h.getElementsByTagName("img")[0],A({width:n*u,height:l*u},va(A({translateX:-o*u,translateY:-c*u},a))))}))}},Ui={bind:function(){var a=this.element,t=this.options,s=this.cropper;P(t.cropstart)&&q(a,Wa,t.cropstart),P(t.cropmove)&&q(a,Ha,t.cropmove),P(t.cropend)&&q(a,Xa,t.cropend),P(t.crop)&&q(a,qa,t.crop),P(t.zoom)&&q(a,$a,t.zoom),q(s,vs,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&q(s,ys,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&q(s,ks,this.onDblclick=this.dblclick.bind(this)),q(a.ownerDocument,Es,this.onCropMove=this.cropMove.bind(this)),q(a.ownerDocument,gs,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&q(window,ms,this.onResize=this.resize.bind(this))},unbind:function(){var a=this.element,t=this.options,s=this.cropper;P(t.cropstart)&&H(a,Wa,t.cropstart),P(t.cropmove)&&H(a,Ha,t.cropmove),P(t.cropend)&&H(a,Xa,t.cropend),P(t.crop)&&H(a,qa,t.crop),P(t.zoom)&&H(a,$a,t.zoom),H(s,vs,this.onCropStart),t.zoomable&&t.zoomOnWheel&&H(s,ys,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&H(s,ks,this.onDblclick),H(a.ownerDocument,Es,this.onCropMove),H(a.ownerDocument,gs,this.onCropEnd),t.responsive&&H(window,ms,this.onResize)}},Vi={resize:function(){if(!this.disabled){var a=this.options,t=this.container,s=this.containerData,r=t.offsetWidth/s.width,e=t.offsetHeight/s.height,n=Math.abs(r-1)>Math.abs(e-1)?r:e;if(n!==1){var l,o;a.restore&&(l=this.getCanvasData(),o=this.getCropBoxData()),this.render(),a.restore&&(this.setCanvasData(S(l,function(c,h){l[h]=c*n})),this.setCropBoxData(S(o,function(c,h){o[h]=c*n})))}}},dblclick:function(){this.disabled||this.options.dragMode===js||this.setDragMode(_i(this.dragBox,za)?$s:Qa)},wheel:function(a){var t=this,s=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(a.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),a.deltaY?r=a.deltaY>0?1:-1:a.wheelDelta?r=-a.wheelDelta/120:a.detail&&(r=a.detail>0?1:-1),this.zoom(-r*s,a)))},cropStart:function(a){var t=a.buttons,s=a.button;if(!(this.disabled||(a.type==="mousedown"||a.type==="pointerdown"&&a.pointerType==="mouse")&&(m(t)&&t!==1||m(s)&&s!==0||a.ctrlKey))){var r=this.options,e=this.pointers,n;a.changedTouches?S(a.changedTouches,function(l){e[l.identifier]=ba(l)}):e[a.pointerId||0]=ba(a),Object.keys(e).length>1&&r.zoomable&&r.zoomOnTouch?n=Ws:n=ja(a.target,Ea),bi.test(n)&&pa(this.element,Wa,{originalEvent:a,action:n})!==!1&&(a.preventDefault(),this.action=n,this.cropping=!1,n===Xs&&(this.cropping=!0,I(this.dragBox,Ca)))}},cropMove:function(a){var t=this.action;if(!(this.disabled||!t)){var s=this.pointers;a.preventDefault(),pa(this.element,Ha,{originalEvent:a,action:t})!==!1&&(a.changedTouches?S(a.changedTouches,function(r){A(s[r.identifier]||{},ba(r,!0))}):A(s[a.pointerId||0]||{},ba(a,!0)),this.change(a))}},cropEnd:function(a){if(!this.disabled){var t=this.action,s=this.pointers;a.changedTouches?S(a.changedTouches,function(r){delete s[r.identifier]}):delete s[a.pointerId||0],t&&(a.preventDefault(),Object.keys(s).length||(this.action=""),this.cropping&&(this.cropping=!1,ra(this.dragBox,Ca,this.cropped&&this.options.modal)),pa(this.element,Xa,{originalEvent:a,action:t}))}}},Gi={change:function(a){var t=this.options,s=this.canvasData,r=this.containerData,e=this.cropBoxData,n=this.pointers,l=this.action,o=t.aspectRatio,c=e.left,h=e.top,p=e.width,d=e.height,v=c+p,E=h+d,F=0,u=0,w=r.width,D=r.height,C=!0,R;!o&&a.shiftKey&&(o=p&&d?p/d:1),this.limited&&(F=e.minLeft,u=e.minTop,w=F+Math.min(r.width,s.width,s.left+s.width),D=u+Math.min(r.height,s.height,s.top+s.height));var _=n[Object.keys(n)[0]],f={x:_.endX-_.startX,y:_.endY-_.startY},g=function(O){switch(O){case sa:v+f.x>w&&(f.x=w-v);break;case ta:c+f.x<F&&(f.x=F-c);break;case V:h+f.y<u&&(f.y=u-h);break;case ea:E+f.y>D&&(f.y=D-E);break}};switch(l){case Za:c+=f.x,h+=f.y;break;case sa:if(f.x>=0&&(v>=w||o&&(h<=u||E>=D))){C=!1;break}g(sa),p+=f.x,p<0&&(l=ta,p=-p,c-=p),o&&(d=p/o,h+=(e.height-d)/2);break;case V:if(f.y<=0&&(h<=u||o&&(c<=F||v>=w))){C=!1;break}g(V),d-=f.y,h+=f.y,d<0&&(l=ea,d=-d,h-=d),o&&(p=d*o,c+=(e.width-p)/2);break;case ta:if(f.x<=0&&(c<=F||o&&(h<=u||E>=D))){C=!1;break}g(ta),p-=f.x,c+=f.x,p<0&&(l=sa,p=-p,c-=p),o&&(d=p/o,h+=(e.height-d)/2);break;case ea:if(f.y>=0&&(E>=D||o&&(c<=F||v>=w))){C=!1;break}g(ea),d+=f.y,d<0&&(l=V,d=-d,h-=d),o&&(p=d*o,c+=(e.width-p)/2);break;case ca:if(o){if(f.y<=0&&(h<=u||v>=w)){C=!1;break}g(V),d-=f.y,h+=f.y,p=d*o}else g(V),g(sa),f.x>=0?v<w?p+=f.x:f.y<=0&&h<=u&&(C=!1):p+=f.x,f.y<=0?h>u&&(d-=f.y,h+=f.y):(d-=f.y,h+=f.y);p<0&&d<0?(l=fa,d=-d,p=-p,h-=d,c-=p):p<0?(l=da,p=-p,c-=p):d<0&&(l=oa,d=-d,h-=d);break;case da:if(o){if(f.y<=0&&(h<=u||c<=F)){C=!1;break}g(V),d-=f.y,h+=f.y,p=d*o,c+=e.width-p}else g(V),g(ta),f.x<=0?c>F?(p-=f.x,c+=f.x):f.y<=0&&h<=u&&(C=!1):(p-=f.x,c+=f.x),f.y<=0?h>u&&(d-=f.y,h+=f.y):(d-=f.y,h+=f.y);p<0&&d<0?(l=oa,d=-d,p=-p,h-=d,c-=p):p<0?(l=ca,p=-p,c-=p):d<0&&(l=fa,d=-d,h-=d);break;case fa:if(o){if(f.x<=0&&(c<=F||E>=D)){C=!1;break}g(ta),p-=f.x,c+=f.x,d=p/o}else g(ea),g(ta),f.x<=0?c>F?(p-=f.x,c+=f.x):f.y>=0&&E>=D&&(C=!1):(p-=f.x,c+=f.x),f.y>=0?E<D&&(d+=f.y):d+=f.y;p<0&&d<0?(l=ca,d=-d,p=-p,h-=d,c-=p):p<0?(l=oa,p=-p,c-=p):d<0&&(l=da,d=-d,h-=d);break;case oa:if(o){if(f.x>=0&&(v>=w||E>=D)){C=!1;break}g(sa),p+=f.x,d=p/o}else g(ea),g(sa),f.x>=0?v<w?p+=f.x:f.y>=0&&E>=D&&(C=!1):p+=f.x,f.y>=0?E<D&&(d+=f.y):d+=f.y;p<0&&d<0?(l=da,d=-d,p=-p,h-=d,c-=p):p<0?(l=fa,p=-p,c-=p):d<0&&(l=ca,d=-d,h-=d);break;case Hs:this.move(f.x,f.y),C=!1;break;case Ws:this.zoom(Ii(n),a),C=!1;break;case Xs:if(!f.x||!f.y){C=!1;break}R=Qs(this.cropper),c=_.startX-R.left,h=_.startY-R.top,p=e.minWidth,d=e.minHeight,f.x>0?l=f.y>0?oa:ca:f.x<0&&(c-=p,l=f.y>0?fa:da),f.y<0&&(h-=d),this.cropped||($(this.cropBox,z),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}C&&(e.width=p,e.height=d,e.left=c,e.top=h,this.action=l,this.renderCropBox()),S(n,function(b){b.startX=b.endX,b.startY=b.endY})}},Ki={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&I(this.dragBox,Ca),$(this.cropBox,z),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=A({},this.initialImageData),this.canvasData=A({},this.initialCanvasData),this.cropBoxData=A({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(A(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),$(this.dragBox,Ca),I(this.cropBox,z)),this},replace:function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&a&&(this.isImg&&(this.element.src=a),t?(this.url=a,this.image.src=a,this.ready&&(this.viewBoxImage.src=a,S(this.previews,function(s){s.getElementsByTagName("img")[0].src=a}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(a))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,$(this.cropper,os)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,I(this.cropper,os)),this},destroy:function(){var a=this.element;return a[x]?(a[x]=void 0,this.isImg&&this.replaced&&(a.src=this.originalUrl),this.uncreate(),this):this},move:function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,s=this.canvasData,r=s.left,e=s.top;return this.moveTo(Ma(a)?a:r+Number(a),Ma(t)?t:e+Number(t))},moveTo:function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,s=this.canvasData,r=!1;return a=Number(a),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(m(a)&&(s.left=a,r=!0),m(t)&&(s.top=t,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(a,t){var s=this.canvasData;return a=Number(a),a<0?a=1/(1-a):a=1+a,this.zoomTo(s.width*a/s.naturalWidth,null,t)},zoomTo:function(a,t,s){var r=this.options,e=this.canvasData,n=e.width,l=e.height,o=e.naturalWidth,c=e.naturalHeight;if(a=Number(a),a>=0&&this.ready&&!this.disabled&&r.zoomable){var h=o*a,p=c*a;if(pa(this.element,$a,{ratio:a,oldRatio:n/o,originalEvent:s})===!1)return this;if(s){var d=this.pointers,v=Qs(this.cropper),E=d&&Object.keys(d).length?Ri(d):{pageX:s.pageX,pageY:s.pageY};e.left-=(h-n)*((E.pageX-v.left-e.left)/n),e.top-=(p-l)*((E.pageY-v.top-e.top)/l)}else na(t)&&m(t.x)&&m(t.y)?(e.left-=(h-n)*((t.x-e.left)/n),e.top-=(p-l)*((t.y-e.top)/l)):(e.left-=(h-n)/2,e.top-=(p-l)/2);e.width=h,e.height=p,this.renderCanvas(!0)}return this},rotate:function(a){return this.rotateTo((this.imageData.rotate||0)+Number(a))},rotateTo:function(a){return a=Number(a),m(a)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=a%360,this.renderCanvas(!0,!0)),this},scaleX:function(a){var t=this.imageData.scaleY;return this.scale(a,m(t)?t:1)},scaleY:function(a){var t=this.imageData.scaleX;return this.scale(m(t)?t:1,a)},scale:function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,s=this.imageData,r=!1;return a=Number(a),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(m(a)&&(s.scaleX=a,r=!0),m(t)&&(s.scaleY=t,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.options,s=this.imageData,r=this.canvasData,e=this.cropBoxData,n;if(this.ready&&this.cropped){n={x:e.left-r.left,y:e.top-r.top,width:e.width,height:e.height};var l=s.width/s.naturalWidth;if(S(n,function(h,p){n[p]=h/l}),a){var o=Math.round(n.y+n.height),c=Math.round(n.x+n.width);n.x=Math.round(n.x),n.y=Math.round(n.y),n.width=c-n.x,n.height=o-n.y}}else n={x:0,y:0,width:0,height:0};return t.rotatable&&(n.rotate=s.rotate||0),t.scalable&&(n.scaleX=s.scaleX||1,n.scaleY=s.scaleY||1),n},setData:function(a){var t=this.options,s=this.imageData,r=this.canvasData,e={};if(this.ready&&!this.disabled&&na(a)){var n=!1;t.rotatable&&m(a.rotate)&&a.rotate!==s.rotate&&(s.rotate=a.rotate,n=!0),t.scalable&&(m(a.scaleX)&&a.scaleX!==s.scaleX&&(s.scaleX=a.scaleX,n=!0),m(a.scaleY)&&a.scaleY!==s.scaleY&&(s.scaleY=a.scaleY,n=!0)),n&&this.renderCanvas(!0,!0);var l=s.width/s.naturalWidth;m(a.x)&&(e.left=a.x*l+r.left),m(a.y)&&(e.top=a.y*l+r.top),m(a.width)&&(e.width=a.width*l),m(a.height)&&(e.height=a.height*l),this.setCropBoxData(e)}return this},getContainerData:function(){return this.ready?A({},this.containerData):{}},getImageData:function(){return this.sized?A({},this.imageData):{}},getCanvasData:function(){var a=this.canvasData,t={};return this.ready&&S(["left","top","width","height","naturalWidth","naturalHeight"],function(s){t[s]=a[s]}),t},setCanvasData:function(a){var t=this.canvasData,s=t.aspectRatio;return this.ready&&!this.disabled&&na(a)&&(m(a.left)&&(t.left=a.left),m(a.top)&&(t.top=a.top),m(a.width)?(t.width=a.width,t.height=a.width/s):m(a.height)&&(t.height=a.height,t.width=a.height*s),this.renderCanvas(!0)),this},getCropBoxData:function(){var a=this.cropBoxData,t;return this.ready&&this.cropped&&(t={left:a.left,top:a.top,width:a.width,height:a.height}),t||{}},setCropBoxData:function(a){var t=this.cropBoxData,s=this.options.aspectRatio,r,e;return this.ready&&this.cropped&&!this.disabled&&na(a)&&(m(a.left)&&(t.left=a.left),m(a.top)&&(t.top=a.top),m(a.width)&&a.width!==t.width&&(r=!0,t.width=a.width),m(a.height)&&a.height!==t.height&&(e=!0,t.height=a.height),s&&(r?t.height=t.width/s:e&&(t.width=t.height*s)),this.renderCropBox()),this},getCroppedCanvas:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,s=Pi(this.image,this.imageData,t,a);if(!this.cropped)return s;var r=this.getData(a.rounded),e=r.x,n=r.y,l=r.width,o=r.height,c=s.width/Math.floor(t.naturalWidth);c!==1&&(e*=c,n*=c,l*=c,o*=c);var h=l/o,p=J({aspectRatio:h,width:a.maxWidth||1/0,height:a.maxHeight||1/0}),d=J({aspectRatio:h,width:a.minWidth||0,height:a.minHeight||0},"cover"),v=J({aspectRatio:h,width:a.width||(c!==1?s.width:l),height:a.height||(c!==1?s.height:o)}),E=v.width,F=v.height;E=Math.min(p.width,Math.max(d.width,E)),F=Math.min(p.height,Math.max(d.height,F));var u=document.createElement("canvas"),w=u.getContext("2d");u.width=ha(E),u.height=ha(F),w.fillStyle=a.fillColor||"transparent",w.fillRect(0,0,E,F);var D=a.imageSmoothingEnabled,C=D===void 0?!0:D,R=a.imageSmoothingQuality;w.imageSmoothingEnabled=C,R&&(w.imageSmoothingQuality=R);var _=s.width,f=s.height,g=e,b=n,O,y,N,L,W,M;g<=-l||g>_?(g=0,O=0,N=0,W=0):g<=0?(N=-g,g=0,O=Math.min(_,l+g),W=O):g<=_&&(N=0,O=Math.min(l,_-g),W=O),O<=0||b<=-o||b>f?(b=0,y=0,L=0,M=0):b<=0?(L=-b,b=0,y=Math.min(f,o+b),M=y):b<=f&&(L=0,y=Math.min(o,f-b),M=y);var T=[g,b,O,y];if(W>0&&M>0){var aa=E/l;T.push(N*aa,L*aa,W*aa,M*aa)}return w.drawImage.apply(w,[s].concat(Ys(T.map(function(ma){return Math.floor(ha(ma))})))),u},setAspectRatio:function(a){var t=this.options;return!this.disabled&&!Ma(a)&&(t.aspectRatio=Math.max(0,a)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(a){var t=this.options,s=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var e=a===Qa,n=t.movable&&a===$s;a=e||n?a:js,t.dragMode=a,ga(s,Ea,a),ra(s,za,e),ra(s,Ya,n),t.cropBoxMovable||(ga(r,Ea,a),ra(r,za,e),ra(r,Ya,n))}return this}},Zi=j.Cropper,at=function(){function i(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(pi(this,i),!a||!wi.test(a.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=a,this.options=A({},Fs,na(t)&&t),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return ci(i,[{key:"init",value:function(){var t=this.element,s=t.tagName.toLowerCase(),r;if(!t[x]){if(t[x]=this,s==="img"){if(this.isImg=!0,r=t.getAttribute("src")||"",this.originalUrl=r,!r)return;r=t.src}else s==="canvas"&&window.HTMLCanvasElement&&(r=t.toDataURL());this.load(r)}}},{key:"load",value:function(t){var s=this;if(t){this.url=t,this.imageData={};var r=this.element,e=this.options;if(!e.rotatable&&!e.scalable&&(e.checkOrientation=!1),!e.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Fi.test(t)){Ci.test(t)?this.read(qi(t)):this.clone();return}var n=new XMLHttpRequest,l=this.clone.bind(this);this.reloading=!0,this.xhr=n,n.onabort=l,n.onerror=l,n.ontimeout=l,n.onprogress=function(){n.getResponseHeader("content-type")!==bs&&n.abort()},n.onload=function(){s.read(n.response)},n.onloadend=function(){s.reloading=!1,s.xhr=null},e.checkCrossOrigin&&ws(t)&&r.crossOrigin&&(t=Ds(t)),n.open("GET",t,!0),n.responseType="arraybuffer",n.withCredentials=r.crossOrigin==="use-credentials",n.send()}}},{key:"read",value:function(t){var s=this.options,r=this.imageData,e=Hi(t),n=0,l=1,o=1;if(e>1){this.url=Xi(t,bs);var c=Wi(e);n=c.rotate,l=c.scaleX,o=c.scaleY}s.rotatable&&(r.rotate=n),s.scalable&&(r.scaleX=l,r.scaleY=o),this.clone()}},{key:"clone",value:function(){var t=this.element,s=this.url,r=t.crossOrigin,e=s;this.options.checkCrossOrigin&&ws(s)&&(r||(r="anonymous"),e=Ds(s)),this.crossOrigin=r,this.crossOriginUrl=e;var n=document.createElement("img");r&&(n.crossOrigin=r),n.src=e||s,n.alt=t.alt||"The image to crop",this.image=n,n.onload=this.start.bind(this),n.onerror=this.stop.bind(this),I(n,fs),t.parentNode.insertBefore(n,t.nextSibling)}},{key:"start",value:function(){var t=this,s=this.image;s.onload=null,s.onerror=null,this.sizing=!0;var r=j.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(j.navigator.userAgent),e=function(c,h){A(t.imageData,{naturalWidth:c,naturalHeight:h,aspectRatio:c/h}),t.initialImageData=A({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(s.naturalWidth&&!r){e(s.naturalWidth,s.naturalHeight);return}var n=document.createElement("img"),l=document.body||document.documentElement;this.sizingImage=n,n.onload=function(){e(n.width,n.height),r||l.removeChild(n)},n.src=s.src,r||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",l.appendChild(n))}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var t=this.element,s=this.options,r=this.image,e=t.parentNode,n=document.createElement("div");n.innerHTML=Di;var l=n.querySelector(".".concat(x,"-container")),o=l.querySelector(".".concat(x,"-canvas")),c=l.querySelector(".".concat(x,"-drag-box")),h=l.querySelector(".".concat(x,"-crop-box")),p=h.querySelector(".".concat(x,"-face"));this.container=e,this.cropper=l,this.canvas=o,this.dragBox=c,this.cropBox=h,this.viewBox=l.querySelector(".".concat(x,"-view-box")),this.face=p,o.appendChild(r),I(t,z),e.insertBefore(l,t.nextSibling),$(r,fs),this.initPreview(),this.bind(),s.initialAspectRatio=Math.max(0,s.initialAspectRatio)||NaN,s.aspectRatio=Math.max(0,s.aspectRatio)||NaN,s.viewMode=Math.max(0,Math.min(3,Math.round(s.viewMode)))||0,I(h,z),s.guides||I(h.getElementsByClassName("".concat(x,"-dashed")),z),s.center||I(h.getElementsByClassName("".concat(x,"-center")),z),s.background&&I(l,"".concat(x,"-bg")),s.highlight||I(p,gi),s.cropBoxMovable&&(I(p,Ya),ga(p,Ea,Za)),s.cropBoxResizable||(I(h.getElementsByClassName("".concat(x,"-line")),z),I(h.getElementsByClassName("".concat(x,"-point")),z)),this.render(),this.ready=!0,this.setDragMode(s.dragMode),s.autoCrop&&this.crop(),this.setData(s.data),P(s.ready)&&q(t,us,s.ready,{once:!0}),pa(t,us)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),$(this.element,z)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Zi,i}},{key:"setDefaults",value:function(t){A(Fs,na(t)&&t)}}]),i}();A(at.prototype,$i,ji,Ui,Vi,Gi,Ki);const as=i=>(_s("data-v-ad5d70fe"),i=i(),Os(),i),Qi={class:"cropper-warp"},Ji={class:"cropper-warp-left"},ae=["src"],se={class:"cropper-warp-right"},te=as(()=>B("div",{class:"cropper-warp-right-title"},"预览",-1)),ie={class:"cropper-warp-right-item"},ee={class:"cropper-warp-right-value"},ne=["src"],re=as(()=>B("div",{class:"cropper-warp-right-label"},"100 x 100",-1)),le={class:"cropper-warp-right-item"},he={class:"cropper-warp-right-value"},pe=["src"],ce=as(()=>B("div",{class:"cropper-warp-right-label"},"50 x 50",-1)),de={class:"dialog-footer"},oe={__name:"index",setup(i,{expose:a}){const t=Ts({isShowDialog:!1,cropperImg:"",cropperImgBase64:"",cropper:""}),s=o=>{t.cropperImg=o,t.isShowDialog=!0,As(()=>{l()})},r=()=>{t.isShowDialog=!1},e=()=>{r()},n=()=>{},l=()=>{const o=document.querySelector(".cropper-warp-left-img");t.cropper=new at(o,{viewMode:1,dragMode:"none",initialAspectRatio:1,aspectRatio:1,preview:".before",background:!1,autoCropArea:.6,zoomOnWheel:!1,crop:()=>{t.cropperImgBase64=t.cropper.getCroppedCanvas().toDataURL("image/jpeg")}})};return a({openDialog:s}),(o,c)=>(K(),ka("div",null,[X(k(hi),{title:"更换头像",modelValue:t.isShowDialog,"onUpdate:modelValue":c[0]||(c[0]=h=>t.isShowDialog=h),width:"769px"},{footer:Y(()=>[B("span",de,[X(k(Na),{onClick:e,size:"default"},{default:Y(()=>[Fa("取 消")]),_:1}),X(k(Na),{type:"primary",onClick:n,size:"default"},{default:Y(()=>[Fa("更 换")]),_:1})])]),default:Y(()=>[B("div",Qi,[B("div",Ji,[B("img",{src:t.cropperImg,class:"cropper-warp-left-img"},null,8,ae)]),B("div",se,[te,B("div",ie,[B("div",ee,[B("img",{src:t.cropperImgBase64,class:"cropper-warp-right-value-img"},null,8,ne)]),re]),B("div",le,[B("div",he,[B("img",{src:t.cropperImgBase64,class:"cropper-warp-right-value-img cropper-size"},null,8,pe)]),ce])])])]),_:1},8,["modelValue"])]))}},fe=Ms(oe,[["__scopeId","data-v-ad5d70fe"]]),st=i=>(_s("data-v-5f910c41"),i=i(),Os(),i),ke=st(()=>B("h1",{id:"基于cropperjs-实现的-图片裁切",tabindex:"-1"},[Fa("基于cropperjs 实现的 图片裁切 "),B("a",{class:"header-anchor",href:"#基于cropperjs-实现的-图片裁切","aria-label":'Permalink to "基于cropperjs 实现的 图片裁切"'},"​")],-1)),ve=st(()=>B("br",null,null,-1)),Ee={class:"croppers-container layout-pd"},ge={class:"cropper-img-warp"},ue={class:"mb15 mt15"},me=["src"],ye=Ft("",1),je=JSON.parse('{"title":"基于cropperjs 实现的 图片裁切","description":"","frontmatter":{},"headers":[],"relativePath":"pages/Components/cropper/index.md","filePath":"pages/Components/cropper/index.md","lastUpdated":1709993961000}'),be={name:"pages/Components/cropper/index.md"},Fe=Object.assign(be,{setup(i){const a=Z(),t=Ts({cropperImg:"https://img2.baidu.com/it/u=1978192862,2048448374&fm=253&fmt=auto&app=138&f=JPEG?w=504&h=500"}),s=()=>{a.value.openDialog(t.cropperImg)};return(r,e)=>(K(),ka("div",null,[ke,ve,B("div",Ee,[X(k(Yt),{shadow:"hover",header:"cropper 图片裁剪"},{default:Y(()=>[X(k(zt),{title:"感谢优秀的 `cropperjs`，项目地址：https://github.com/fengyuanchen/cropperjs",type:"success",closable:!1,class:"mb15"}),B("div",ge,[B("div",ue,[B("img",{class:"cropper-img",src:t.cropperImg},null,8,me)]),X(k(Na),{type:"primary",size:"default",onClick:s},{default:Y(()=>[Fa(" 更换头像 ")]),_:1})])]),_:1}),X(fe,{ref_key:"cropperDialogRef",ref:a},null,512)]),ye]))}}),Ue=Ms(Fe,[["__scopeId","data-v-5f910c41"]]);export{je as __pageData,Ue as default};
