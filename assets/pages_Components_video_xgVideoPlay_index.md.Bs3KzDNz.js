import"./chunks/theme.BKGWbPX5.js";import{E as Fs,B as Rs,S as Ia,U as Js,D as Vn,a as Mn,b as Ds,s as hi,c as Hi,W as Vt,A as Ya,d as Da,P as et,u as Ss,T as Pa,e as Ka,f as Ha,g as ns}from"./chunks/index.min.9vHyBMJA.js";import{E as Na,a as Ba,b as Mt,c as _t,d as Ua,e as za}from"./chunks/index.6zpydgQg.js";import{E as Aa}from"./chunks/index.CszaQUJT.js";import{E as Oa}from"./chunks/index.QF29vx0d.js";import{g as Ja}from"./chunks/commonjsHelpers.BosuxZz1.js";import{ao as Ni,h as _n,l as In,o as js,b as It,w as ks,J as ss,p as ls,c as Et,F as ja,G as Qa,m as vi,_ as qa,a5 as Yn,E as $a,a as er}from"./chunks/framework.Cyz3vTHn.js";import"./chunks/constants.DkItJwIb.js";import"./chunks/plugin-vue_export-helper.Fsmj3gze.js";import"./chunks/index.DCbbXQus.js";import"./chunks/types.DTMeA5EJ.js";import"./chunks/get.nfDng5OV.js";import"./chunks/use-form-item.CoVXonr6.js";import"./chunks/event.BE20p1dL.js";import"./chunks/index.ClFtIAma.js";import"./chunks/index.4hICx8yr.js";import"./chunks/objects.udGwCpTy.js";import"./chunks/baseClone.BxZpXSe2.js";import"./chunks/isEqual.CTUePyao.js";import"./chunks/typescript.Bp3YSIOJ.js";import"./chunks/index.CDWix4Is.js";import"./chunks/aria.BUADUvnR.js";import"./chunks/isNil.CHIgUVhi.js";import"./chunks/index.C4Hremo0.js";import"./chunks/focus-trap.ihPlx5kF.js";import"./chunks/index.CjQfiev5.js";import"./chunks/index.DDvycNo5.js";import"./chunks/index.BVK2gQxZ.js";import"./chunks/scroll.CpkHC_n9.js";import"./chunks/debounce.C2KADLPb.js";import"./chunks/icon.BN6CzzPm.js";function sr(a,r){var s=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(s!=null){var i,e,t,n,l=[],h=!0,o=!1;try{if(t=(s=s.call(a)).next,r===0){if(Object(s)!==s)return;h=!1}else for(;!(h=(i=t.call(s)).done)&&(l.push(i.value),l.length!==r);h=!0);}catch(u){o=!0,e=u}finally{try{if(!h&&s.return!=null&&(n=s.return(),Object(n)!==n))return}finally{if(o)throw e}}return l}}function Yt(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);r&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})),s.push.apply(s,i)}return s}function re(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Yt(Object(s),!0).forEach(function(i){W(a,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):Yt(Object(s)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(s,i))})}return a}function U(){U=function(){return a};var a={},r=Object.prototype,s=r.hasOwnProperty,i=Object.defineProperty||function(m,d,y){m[d]=y.value},e=typeof Symbol=="function"?Symbol:{},t=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",l=e.toStringTag||"@@toStringTag";function h(m,d,y){return Object.defineProperty(m,d,{value:y,enumerable:!0,configurable:!0,writable:!0}),m[d]}try{h({},"")}catch{h=function(d,y,S){return d[y]=S}}function o(m,d,y,S){var v=d&&d.prototype instanceof c?d:c,w=Object.create(v.prototype),R=new Y(S||[]);return i(w,"_invoke",{value:Z(m,y,R)}),w}function u(m,d,y){try{return{type:"normal",arg:m.call(d,y)}}catch(S){return{type:"throw",arg:S}}}a.wrap=o;var p={};function c(){}function k(){}function f(){}var b={};h(b,t,function(){return this});var g=Object.getPrototypeOf,E=g&&g(g(M([])));E&&E!==r&&s.call(E,t)&&(b=E);var L=f.prototype=c.prototype=Object.create(b);function C(m){["next","throw","return"].forEach(function(d){h(m,d,function(y){return this._invoke(d,y)})})}function F(m,d){function y(v,w,R,D){var K=u(m[v],m,w);if(K.type!=="throw"){var I=K.arg,O=I.value;return O&&typeof O=="object"&&s.call(O,"__await")?d.resolve(O.__await).then(function(P){y("next",P,R,D)},function(P){y("throw",P,R,D)}):d.resolve(O).then(function(P){I.value=P,R(I)},function(P){return y("throw",P,R,D)})}D(K.arg)}var S;i(this,"_invoke",{value:function(v,w){function R(){return new d(function(D,K){y(v,w,D,K)})}return S=S?S.then(R,R):R()}})}function Z(m,d,y){var S="suspendedStart";return function(v,w){if(S==="executing")throw new Error("Generator is already running");if(S==="completed"){if(v==="throw")throw w;return N()}for(y.method=v,y.arg=w;;){var R=y.delegate;if(R){var D=X(R,y);if(D){if(D===p)continue;return D}}if(y.method==="next")y.sent=y._sent=y.arg;else if(y.method==="throw"){if(S==="suspendedStart")throw S="completed",y.arg;y.dispatchException(y.arg)}else y.method==="return"&&y.abrupt("return",y.arg);S="executing";var K=u(m,d,y);if(K.type==="normal"){if(S=y.done?"completed":"suspendedYield",K.arg===p)continue;return{value:K.arg,done:y.done}}K.type==="throw"&&(S="completed",y.method="throw",y.arg=K.arg)}}}function X(m,d){var y=d.method,S=m.iterator[y];if(S===void 0)return d.delegate=null,y==="throw"&&m.iterator.return&&(d.method="return",d.arg=void 0,X(m,d),d.method==="throw")||y!=="return"&&(d.method="throw",d.arg=new TypeError("The iterator does not provide a '"+y+"' method")),p;var v=u(S,m.iterator,d.arg);if(v.type==="throw")return d.method="throw",d.arg=v.arg,d.delegate=null,p;var w=v.arg;return w?w.done?(d[m.resultName]=w.value,d.next=m.nextLoc,d.method!=="return"&&(d.method="next",d.arg=void 0),d.delegate=null,p):w:(d.method="throw",d.arg=new TypeError("iterator result is not an object"),d.delegate=null,p)}function T(m){var d={tryLoc:m[0]};1 in m&&(d.catchLoc=m[1]),2 in m&&(d.finallyLoc=m[2],d.afterLoc=m[3]),this.tryEntries.push(d)}function G(m){var d=m.completion||{};d.type="normal",delete d.arg,m.completion=d}function Y(m){this.tryEntries=[{tryLoc:"root"}],m.forEach(T,this),this.reset(!0)}function M(m){if(m){var d=m[t];if(d)return d.call(m);if(typeof m.next=="function")return m;if(!isNaN(m.length)){var y=-1,S=function v(){for(;++y<m.length;)if(s.call(m,y))return v.value=m[y],v.done=!1,v;return v.value=void 0,v.done=!0,v};return S.next=S}}return{next:N}}function N(){return{value:void 0,done:!0}}return k.prototype=f,i(L,"constructor",{value:f,configurable:!0}),i(f,"constructor",{value:k,configurable:!0}),k.displayName=h(f,l,"GeneratorFunction"),a.isGeneratorFunction=function(m){var d=typeof m=="function"&&m.constructor;return!!d&&(d===k||(d.displayName||d.name)==="GeneratorFunction")},a.mark=function(m){return Object.setPrototypeOf?Object.setPrototypeOf(m,f):(m.__proto__=f,h(m,l,"GeneratorFunction")),m.prototype=Object.create(L),m},a.awrap=function(m){return{__await:m}},C(F.prototype),h(F.prototype,n,function(){return this}),a.AsyncIterator=F,a.async=function(m,d,y,S,v){v===void 0&&(v=Promise);var w=new F(o(m,d,y,S),v);return a.isGeneratorFunction(d)?w:w.next().then(function(R){return R.done?R.value:w.next()})},C(L),h(L,l,"Generator"),h(L,t,function(){return this}),h(L,"toString",function(){return"[object Generator]"}),a.keys=function(m){var d=Object(m),y=[];for(var S in d)y.push(S);return y.reverse(),function v(){for(;y.length;){var w=y.pop();if(w in d)return v.value=w,v.done=!1,v}return v.done=!0,v}},a.values=M,Y.prototype={constructor:Y,reset:function(m){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(G),!m)for(var d in this)d.charAt(0)==="t"&&s.call(this,d)&&!isNaN(+d.slice(1))&&(this[d]=void 0)},stop:function(){this.done=!0;var m=this.tryEntries[0].completion;if(m.type==="throw")throw m.arg;return this.rval},dispatchException:function(m){if(this.done)throw m;var d=this;function y(K,I){return w.type="throw",w.arg=m,d.next=K,I&&(d.method="next",d.arg=void 0),!!I}for(var S=this.tryEntries.length-1;S>=0;--S){var v=this.tryEntries[S],w=v.completion;if(v.tryLoc==="root")return y("end");if(v.tryLoc<=this.prev){var R=s.call(v,"catchLoc"),D=s.call(v,"finallyLoc");if(R&&D){if(this.prev<v.catchLoc)return y(v.catchLoc,!0);if(this.prev<v.finallyLoc)return y(v.finallyLoc)}else if(R){if(this.prev<v.catchLoc)return y(v.catchLoc,!0)}else{if(!D)throw new Error("try statement without catch or finally");if(this.prev<v.finallyLoc)return y(v.finallyLoc)}}}},abrupt:function(m,d){for(var y=this.tryEntries.length-1;y>=0;--y){var S=this.tryEntries[y];if(S.tryLoc<=this.prev&&s.call(S,"finallyLoc")&&this.prev<S.finallyLoc){var v=S;break}}v&&(m==="break"||m==="continue")&&v.tryLoc<=d&&d<=v.finallyLoc&&(v=null);var w=v?v.completion:{};return w.type=m,w.arg=d,v?(this.method="next",this.next=v.finallyLoc,p):this.complete(w)},complete:function(m,d){if(m.type==="throw")throw m.arg;return m.type==="break"||m.type==="continue"?this.next=m.arg:m.type==="return"?(this.rval=this.arg=m.arg,this.method="return",this.next="end"):m.type==="normal"&&d&&(this.next=d),p},finish:function(m){for(var d=this.tryEntries.length-1;d>=0;--d){var y=this.tryEntries[d];if(y.finallyLoc===m)return this.complete(y.completion,y.afterLoc),G(y),p}},catch:function(m){for(var d=this.tryEntries.length-1;d>=0;--d){var y=this.tryEntries[d];if(y.tryLoc===m){var S=y.completion;if(S.type==="throw"){var v=S.arg;G(y)}return v}}throw new Error("illegal catch attempt")},delegateYield:function(m,d,y){return this.delegate={iterator:M(m),resultName:d,nextLoc:y},this.method==="next"&&(this.arg=void 0),p}},a}function Ei(a){"@babel/helpers - typeof";return Ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ei(a)}function Dt(a,r,s,i,e,t,n){try{var l=a[t](n),h=l.value}catch(o){s(o);return}l.done?r(h):Promise.resolve(h).then(i,e)}function se(a){return function(){var r=this,s=arguments;return new Promise(function(i,e){var t=a.apply(r,s);function n(h){Dt(t,i,e,n,l,"next",h)}function l(h){Dt(t,i,e,n,l,"throw",h)}n(void 0)})}}function fe(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function Pt(a,r){for(var s=0;s<r.length;s++){var i=r[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,Pn(i.key),i)}}function ye(a,r,s){return r&&Pt(a.prototype,r),s&&Pt(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a}function W(a,r,s){return r=Pn(r),r in a?Object.defineProperty(a,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[r]=s,a}function Wi(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),r&&st(a,r)}function Zi(a){return Zi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Zi(a)}function st(a,r){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,e){return i.__proto__=e,i},st(a,r)}function ir(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function j(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function tr(a,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j(a)}function Ti(a){var r=ir();return function(){var i=Zi(a),e;if(r){var t=Zi(this).constructor;e=Reflect.construct(i,arguments,t)}else e=i.apply(this,arguments);return tr(this,e)}}function bs(a,r){return rr(a)||sr(a,r)||Dn(a,r)||or()}function nr(a){return ar(a)||lr(a)||Dn(a)||hr()}function ar(a){if(Array.isArray(a))return it(a)}function rr(a){if(Array.isArray(a))return a}function lr(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Dn(a,r){if(a){if(typeof a=="string")return it(a,r);var s=Object.prototype.toString.call(a).slice(8,-1);if(s==="Object"&&a.constructor&&(s=a.constructor.name),s==="Map"||s==="Set")return Array.from(a);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return it(a,r)}}function it(a,r){(r==null||r>a.length)&&(r=a.length);for(var s=0,i=new Array(r);s<r;s++)i[s]=a[s];return i}function hr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function or(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ur(a,r){if(typeof a!="object"||a===null)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var i=s.call(a,r||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function Pn(a){var r=ur(a,"string");return typeof r=="symbol"?r:String(r)}function Kt(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);r&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})),s.push.apply(s,i)}return s}function Qs(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Kt(Object(s),!0).forEach(function(i){V(a,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):Kt(Object(s)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(s,i))})}return a}function ke(){ke=function(){return a};var a={},r=Object.prototype,s=r.hasOwnProperty,i=Object.defineProperty||function(m,d,y){m[d]=y.value},e=typeof Symbol=="function"?Symbol:{},t=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",l=e.toStringTag||"@@toStringTag";function h(m,d,y){return Object.defineProperty(m,d,{value:y,enumerable:!0,configurable:!0,writable:!0}),m[d]}try{h({},"")}catch{h=function(d,y,S){return d[y]=S}}function o(m,d,y,S){var v=d&&d.prototype instanceof c?d:c,w=Object.create(v.prototype),R=new Y(S||[]);return i(w,"_invoke",{value:Z(m,y,R)}),w}function u(m,d,y){try{return{type:"normal",arg:m.call(d,y)}}catch(S){return{type:"throw",arg:S}}}a.wrap=o;var p={};function c(){}function k(){}function f(){}var b={};h(b,t,function(){return this});var g=Object.getPrototypeOf,E=g&&g(g(M([])));E&&E!==r&&s.call(E,t)&&(b=E);var L=f.prototype=c.prototype=Object.create(b);function C(m){["next","throw","return"].forEach(function(d){h(m,d,function(y){return this._invoke(d,y)})})}function F(m,d){function y(v,w,R,D){var K=u(m[v],m,w);if(K.type!=="throw"){var I=K.arg,O=I.value;return O&&typeof O=="object"&&s.call(O,"__await")?d.resolve(O.__await).then(function(P){y("next",P,R,D)},function(P){y("throw",P,R,D)}):d.resolve(O).then(function(P){I.value=P,R(I)},function(P){return y("throw",P,R,D)})}D(K.arg)}var S;i(this,"_invoke",{value:function(v,w){function R(){return new d(function(D,K){y(v,w,D,K)})}return S=S?S.then(R,R):R()}})}function Z(m,d,y){var S="suspendedStart";return function(v,w){if(S==="executing")throw new Error("Generator is already running");if(S==="completed"){if(v==="throw")throw w;return N()}for(y.method=v,y.arg=w;;){var R=y.delegate;if(R){var D=X(R,y);if(D){if(D===p)continue;return D}}if(y.method==="next")y.sent=y._sent=y.arg;else if(y.method==="throw"){if(S==="suspendedStart")throw S="completed",y.arg;y.dispatchException(y.arg)}else y.method==="return"&&y.abrupt("return",y.arg);S="executing";var K=u(m,d,y);if(K.type==="normal"){if(S=y.done?"completed":"suspendedYield",K.arg===p)continue;return{value:K.arg,done:y.done}}K.type==="throw"&&(S="completed",y.method="throw",y.arg=K.arg)}}}function X(m,d){var y=d.method,S=m.iterator[y];if(S===void 0)return d.delegate=null,y==="throw"&&m.iterator.return&&(d.method="return",d.arg=void 0,X(m,d),d.method==="throw")||y!=="return"&&(d.method="throw",d.arg=new TypeError("The iterator does not provide a '"+y+"' method")),p;var v=u(S,m.iterator,d.arg);if(v.type==="throw")return d.method="throw",d.arg=v.arg,d.delegate=null,p;var w=v.arg;return w?w.done?(d[m.resultName]=w.value,d.next=m.nextLoc,d.method!=="return"&&(d.method="next",d.arg=void 0),d.delegate=null,p):w:(d.method="throw",d.arg=new TypeError("iterator result is not an object"),d.delegate=null,p)}function T(m){var d={tryLoc:m[0]};1 in m&&(d.catchLoc=m[1]),2 in m&&(d.finallyLoc=m[2],d.afterLoc=m[3]),this.tryEntries.push(d)}function G(m){var d=m.completion||{};d.type="normal",delete d.arg,m.completion=d}function Y(m){this.tryEntries=[{tryLoc:"root"}],m.forEach(T,this),this.reset(!0)}function M(m){if(m){var d=m[t];if(d)return d.call(m);if(typeof m.next=="function")return m;if(!isNaN(m.length)){var y=-1,S=function v(){for(;++y<m.length;)if(s.call(m,y))return v.value=m[y],v.done=!1,v;return v.value=void 0,v.done=!0,v};return S.next=S}}return{next:N}}function N(){return{value:void 0,done:!0}}return k.prototype=f,i(L,"constructor",{value:f,configurable:!0}),i(f,"constructor",{value:k,configurable:!0}),k.displayName=h(f,l,"GeneratorFunction"),a.isGeneratorFunction=function(m){var d=typeof m=="function"&&m.constructor;return!!d&&(d===k||(d.displayName||d.name)==="GeneratorFunction")},a.mark=function(m){return Object.setPrototypeOf?Object.setPrototypeOf(m,f):(m.__proto__=f,h(m,l,"GeneratorFunction")),m.prototype=Object.create(L),m},a.awrap=function(m){return{__await:m}},C(F.prototype),h(F.prototype,n,function(){return this}),a.AsyncIterator=F,a.async=function(m,d,y,S,v){v===void 0&&(v=Promise);var w=new F(o(m,d,y,S),v);return a.isGeneratorFunction(d)?w:w.next().then(function(R){return R.done?R.value:w.next()})},C(L),h(L,l,"Generator"),h(L,t,function(){return this}),h(L,"toString",function(){return"[object Generator]"}),a.keys=function(m){var d=Object(m),y=[];for(var S in d)y.push(S);return y.reverse(),function v(){for(;y.length;){var w=y.pop();if(w in d)return v.value=w,v.done=!1,v}return v.done=!0,v}},a.values=M,Y.prototype={constructor:Y,reset:function(m){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(G),!m)for(var d in this)d.charAt(0)==="t"&&s.call(this,d)&&!isNaN(+d.slice(1))&&(this[d]=void 0)},stop:function(){this.done=!0;var m=this.tryEntries[0].completion;if(m.type==="throw")throw m.arg;return this.rval},dispatchException:function(m){if(this.done)throw m;var d=this;function y(K,I){return w.type="throw",w.arg=m,d.next=K,I&&(d.method="next",d.arg=void 0),!!I}for(var S=this.tryEntries.length-1;S>=0;--S){var v=this.tryEntries[S],w=v.completion;if(v.tryLoc==="root")return y("end");if(v.tryLoc<=this.prev){var R=s.call(v,"catchLoc"),D=s.call(v,"finallyLoc");if(R&&D){if(this.prev<v.catchLoc)return y(v.catchLoc,!0);if(this.prev<v.finallyLoc)return y(v.finallyLoc)}else if(R){if(this.prev<v.catchLoc)return y(v.catchLoc,!0)}else{if(!D)throw new Error("try statement without catch or finally");if(this.prev<v.finallyLoc)return y(v.finallyLoc)}}}},abrupt:function(m,d){for(var y=this.tryEntries.length-1;y>=0;--y){var S=this.tryEntries[y];if(S.tryLoc<=this.prev&&s.call(S,"finallyLoc")&&this.prev<S.finallyLoc){var v=S;break}}v&&(m==="break"||m==="continue")&&v.tryLoc<=d&&d<=v.finallyLoc&&(v=null);var w=v?v.completion:{};return w.type=m,w.arg=d,v?(this.method="next",this.next=v.finallyLoc,p):this.complete(w)},complete:function(m,d){if(m.type==="throw")throw m.arg;return m.type==="break"||m.type==="continue"?this.next=m.arg:m.type==="return"?(this.rval=this.arg=m.arg,this.method="return",this.next="end"):m.type==="normal"&&d&&(this.next=d),p},finish:function(m){for(var d=this.tryEntries.length-1;d>=0;--d){var y=this.tryEntries[d];if(y.finallyLoc===m)return this.complete(y.completion,y.afterLoc),G(y),p}},catch:function(m){for(var d=this.tryEntries.length-1;d>=0;--d){var y=this.tryEntries[d];if(y.tryLoc===m){var S=y.completion;if(S.type==="throw"){var v=S.arg;G(y)}return v}}throw new Error("illegal catch attempt")},delegateYield:function(m,d,y){return this.delegate={iterator:M(m),resultName:d,nextLoc:y},this.method==="next"&&(this.arg=void 0),p}},a}function Ns(a){"@babel/helpers - typeof";return Ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ns(a)}function Ht(a,r,s,i,e,t,n){try{var l=a[t](n),h=l.value}catch(o){s(o);return}l.done?r(h):Promise.resolve(h).then(i,e)}function fs(a){return function(){var r=this,s=arguments;return new Promise(function(i,e){var t=a.apply(r,s);function n(h){Ht(t,i,e,n,l,"next",h)}function l(h){Ht(t,i,e,n,l,"throw",h)}n(void 0)})}}function _e(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function Nt(a,r){for(var s=0;s<r.length;s++){var i=r[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,Hn(i.key),i)}}function Ie(a,r,s){return r&&Nt(a.prototype,r),s&&Nt(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a}function V(a,r,s){return r=Hn(r),r in a?Object.defineProperty(a,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[r]=s,a}function ai(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),r&&qs(a,r)}function xs(a){return xs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},xs(a)}function qs(a,r){return qs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,e){return i.__proto__=e,i},qs(a,r)}function Kn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fi(a,r,s){return Kn()?fi=Reflect.construct.bind():fi=function(e,t,n){var l=[null];l.push.apply(l,t);var h=Function.bind.apply(e,l),o=new h;return n&&qs(o,n.prototype),o},fi.apply(null,arguments)}function pr(a){return Function.toString.call(a).indexOf("[native code]")!==-1}function Si(a){var r=typeof Map=="function"?new Map:void 0;return Si=function(i){if(i===null||!pr(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(i))return r.get(i);r.set(i,e)}function e(){return fi(i,arguments,xs(this).constructor)}return e.prototype=Object.create(i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),qs(e,i)},Si(a)}function cr(a,r){if(a==null)return{};var s={},i=Object.keys(a),e,t;for(t=0;t<i.length;t++)e=i[t],!(r.indexOf(e)>=0)&&(s[e]=a[e]);return s}function dr(a,r){if(a==null)return{};var s=cr(a,r),i,e;if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);for(e=0;e<t.length;e++)i=t[e],!(r.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(a,i)&&(s[i]=a[i])}return s}function z(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function mr(a,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z(a)}function ri(a){var r=Kn();return function(){var i=xs(a),e;if(r){var t=xs(this).constructor;e=Reflect.construct(i,arguments,t)}else e=i.apply(this,arguments);return mr(this,e)}}function kr(a,r){for(;!Object.prototype.hasOwnProperty.call(a,r)&&(a=xs(a),a!==null););return a}function yi(){return typeof Reflect<"u"&&Reflect.get?yi=Reflect.get.bind():yi=function(r,s,i){var e=kr(r,s);if(e){var t=Object.getOwnPropertyDescriptor(e,s);return t.get?t.get.call(arguments.length<3?r:i):t.value}},yi.apply(this,arguments)}function fr(a,r){if(a){if(typeof a=="string")return Bt(a,r);var s=Object.prototype.toString.call(a).slice(8,-1);if(s==="Object"&&a.constructor&&(s=a.constructor.name),s==="Map"||s==="Set")return Array.from(a);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Bt(a,r)}}function Bt(a,r){(r==null||r>a.length)&&(r=a.length);for(var s=0,i=new Array(r);s<r;s++)i[s]=a[s];return i}function yr(a,r){var s=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!s){if(Array.isArray(a)||(s=fr(a))||r&&a&&typeof a.length=="number"){s&&(a=s);var i=0,e=function(){};return{s:e,n:function(){return i>=a.length?{done:!0}:{done:!1,value:a[i++]}},e:function(h){throw h},f:e}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var t=!0,n=!1,l;return{s:function(){s=s.call(a)},n:function(){var h=s.next();return t=h.done,h},e:function(h){n=!0,l=h},f:function(){try{!t&&s.return!=null&&s.return()}finally{if(n)throw l}}}}function br(a,r){if(typeof a!="object"||a===null)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var i=s.call(a,r||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function Hn(a){var r=br(a,"string");return typeof r=="symbol"?r:String(r)}function Ys(){var a,r,s=new Promise(function(i,e){a=i,r=e});return s.used=!1,s.resolve=function(){return s.used=!0,a.apply(void 0,arguments)},s.reject=function(){return s.used=!0,r.apply(void 0,arguments)},s}function Is(){try{return parseInt(performance.now(),10)}catch{return new Date().getTime()}}var me=function(){function a(){_e(this,a)}return Ie(a,null,[{key:"start",value:function(s){return!s||!s.length||s.length===1&&s.end(0)-s.start(0)<1e-6||s.length===1&&s.start(0)<0?0:s.start(0)}},{key:"end",value:function(s){return!s||!s.length||s.length===1&&s.end(0)-s.start(0)<1e-6?0:s.end(s.length-1)}},{key:"get",value:function(s){if(s)try{return s.buffered}catch{}}},{key:"buffers",value:function(s,i){if(!s||!s.length)return[];for(var e=[],t=0,n=s.length;t<n;t++){var l=e.length;if(!l||!i)e.push([s.start(t),s.end(t)]);else{var h=e[l-1],o=h[1],u=s.start(t);if(u-o<=i){var p=s.end(t);p>o&&(h[1]=p)}else e.push([s.start(t),s.end(t)])}}return e}},{key:"totalLength",value:function(s){return!s||!s.length?0:s.reduce(function(i,e){return i+=e[1]-e[0]},0)}},{key:"info",value:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(!s||!s.length)return{start:0,end:0,buffers:[]};for(var t=0,n=0,l=0,h=0,o=0,u=0,p=0,c=a.buffers(s,e),k=0,f=c.length;k<f;k++){var b=c[k];if(i+e>=b[0]&&i<=b[1])t=b[0],n=b[1],l=k;else if(i+e<b[0]){h=b[0],o=b[1];break}else i+e>b[1]&&(u=b[0],p=b[1])}return{start:t,end:n,index:l,buffers:c,nextStart:h,nextEnd:o,prevStart:u,prevEnd:p,currentTime:i,behind:i-t,remaining:n?n-i:0,length:a.totalLength&&a.totalLength(c)}}}]),a}(),xe,q={MANIFEST:"manifest",NETWORK:"network",NETWORK_TIMEOUT:"network_timeout",NETWORK_FORBIDDEN:"network_forbidden",NETWORK_NOTFOUND:"network_notfound",NETWROK_RANGE_NOT_SATISFIABLE:"network_range_not_satisfiable",DEMUX:"demux",REMUX:"remux",MEDIA:"media",DRM:"drm",OTHER:"other",RUNTIME:"runtime",SUB_TYPES:{FLV:"FLV",HLS:"HLS",MP4:"MP4",FMP4:"FMP4",MSE_ADD_SB:"MSE_ADD_SB",MSE_APPEND_BUFFER:"MSE_APPEND_BUFFER",MSE_OTHER:"MSE_OTHER",MSE_FULL:"MSE_FULL",OPTION:"OPTION",DASH:"DASH",LICENSE:"LICENSE",CUSTOM_LICENSE:"CUSTOM_LICENSE",MSE_HIJACK:"MSE_HIJACK",EME_HIJACK:"EME_HIJACK",SIDX:"SIDX",NO_CANPLAY_ERROR:"NO_CANPLAY_ERROR",BUFFERBREAK_ERROR:"BUFFERBREAK_ERROR",WAITING_TIMEOUT_ERROR:"WAITING_TIMEOUT_ERROR",MEDIA_ERR_ABORTED:"MEDIA_ERR_ABORTED",MEDIA_ERR_NETWORK:"MEDIA_ERR_NETWORK",MEDIA_ERR_DECODE:"MEDIA_ERR_DECODE",MEDIA_ERR_SRC_NOT_SUPPORTED:"MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ERR_CODEC_NOT_SUPPORTED:"MEDIA_ERR_CODEC_NOT_SUPPORTED",MEDIA_ERR_URL_EMPTY:"MEDIA_ERR_URL_EMPTY"}},Bi=(xe={},V(xe,q.MANIFEST,{HLS:1100,DASH:1200}),V(xe,q.NETWORK,2100),V(xe,q.NETWORK_TIMEOUT,2101),V(xe,q.NETWORK_FORBIDDEN,2103),V(xe,q.NETWORK_NOTFOUND,2104),V(xe,q.NETWROK_RANGE_NOT_SATISFIABLE,2116),V(xe,q.DEMUX,{FLV:3100,HLS:3200,MP4:3300,FMP4:3400,SIDX:3410}),V(xe,q.REMUX,{FMP4:4100,MP4:4200}),V(xe,q.MEDIA,{MEDIA_ERR_ABORTED:5101,MEDIA_ERR_NETWORK:5102,MEDIA_ERR_DECODE:5103,MEDIA_ERR_SRC_NOT_SUPPORTED:5104,MEDIA_ERR_CODEC_NOT_SUPPORTED:5105,MEDIA_ERR_URL_EMPTY:5106,MSE_ADD_SB:5200,MSE_APPEND_BUFFER:5201,MSE_OTHER:5202,MSE_FULL:5203,MSE_HIJACK:5204,EME_HIJACK:5301}),V(xe,q.DRM,{LICENSE:7100,CUSTOM_LICENSE:7200}),V(xe,q.OTHER,8e3),V(xe,q.RUNTIME,{NO_CANPLAY_ERROR:9001,BUFFERBREAK_ERROR:9002,WAITING_TIMEOUT_ERROR:9003}),xe),pe=function(a){ai(s,a);var r=ri(s);function s(i,e,t,n,l){var h;return _e(this,s),h=r.call(this,l||(t==null?void 0:t.message)),h.errorType=i===q.NETWORK_TIMEOUT?q.NETWORK:i,h.originError=t,h.ext=n,h.errorCode=Bi[i][e]||Bi[i],h.errorMessage=h.message,h.errorCode||(h.errorType=q.OTHER,h.errorCode=Bi[h.errorType]),h}return Ie(s,null,[{key:"create",value:function(e,t,n,l,h){return e instanceof s?e:(e instanceof Error&&(n=e,e=""),e||(e=q.OTHER),new s(e,t,n,l,h))}},{key:"network",value:function(e){var t;return new s(e!=null&&e.isTimeout?q.NETWORK_TIMEOUT:q.NETWORK,null,e instanceof Error?e:null,{url:e==null?void 0:e.url,response:e==null?void 0:e.response,httpCode:e==null||(t=e.response)===null||t===void 0?void 0:t.status})}}]),s}(Si(Error)),gr=typeof window<"u",oi={DEBUG:1,LOG:2,WARN:3,ERROR:4},vr=200*1024,Er=["Boolean","Number","String","Undefined","Null","Date","Object"],Fe=function(){function a(r,s){_e(this,a),this.name=r||"",this._prefix="[".concat(this.name,"]"),this.logCacheLevel=(s==null?void 0:s.logCacheLevel)||3,this.logMaxSize=(s==null?void 0:s.logMaxSize)||vr,this.logSize=0,this.logTextArray=[]}return Ie(a,[{key:"debug",value:function(){for(var s,i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];this.logCache.apply(this,[oi.DEBUG].concat(e)),!a.disabled&&(s=console).debug.apply(s,[this._prefix,As()].concat(e))}},{key:"log",value:function(){for(var s,i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];this.logCache.apply(this,[oi.LOG].concat(e)),!a.disabled&&(s=console).log.apply(s,[this._prefix,As()].concat(e))}},{key:"warn",value:function(){for(var s,i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];this.logCache.apply(this,[oi.WARN].concat(e)),!a.disabled&&(s=console).warn.apply(s,[this._prefix,As()].concat(e))}},{key:"error",value:function(){for(var s,i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];this.logCache.apply(this,[oi.ERROR].concat(e)),!a.disabled&&(s=console).error.apply(s,[this._prefix,As()].concat(e))}},{key:"logCache",value:function(s){if(!(s<this.logCacheLevel)){var i="";try{for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];var l=t.map(function(o){return Nn(o)});i=this._prefix+As()+JSON.stringify(l)}catch{return}if(s>=this.logCacheLevel&&(this.logSize+=i.length,this.logTextArray.push(i)),this.logSize>this.logMaxSize){var h=this.logTextArray.shift();this.logSize-=h.length}}}},{key:"getLogCache",value:function(){var s=this.logTextArray.join(`
`);return this.reset(),s}},{key:"reset",value:function(){this.logTextArray=[],this.logSize=0}},{key:"table",value:function(){var s;a.disabled||(console.group(this._prefix),(s=console).table.apply(s,arguments),console.groupEnd())}},{key:"setLogLevel",value:function(s){this.logCacheLevel=s}}],[{key:"enable",value:function(){a.disabled=!1}},{key:"disable",value:function(){a.disabled=!0}}]),a}();V(Fe,"disabled",!0);function As(){return new Date().toLocaleString()}function Zr(a){if(Ns(a)!=="object")return a;var r=Object.prototype.toString.call(a).slice(8,-1);switch(r){case"Array":case"Uint8Array":case"ArrayBuffer":return r+"["+a.length+"]";case"Object":return"{}";default:return r}}function Nn(a,r,s){s||(s=1),r||(r=2);var i={};if(!a||Ns(a)!=="object")return a;var e=Object.prototype.toString.call(a).slice(8,-1);if(!Er.includes(e))return e;if(!(s>r)){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(s===r?i[t]=Zr(a[t]):Ns(a[t])==="object"?i[t]=Nn(a[t],r,s+1):i[t]=a[t]);return i}}function Sr(){try{return gr?window.MediaSource:null}catch{}}var ui=Sr(),pi={APPEND:"appendBuffer",REMOVE:"removeBuffer",UPDATE_DURATION:"updateDuration"},ce=function(){function a(r,s){var i=this;_e(this,a),V(this,"media",null),V(this,"mediaSource",null),V(this,"_openPromise",Ys()),V(this,"_queue",Object.create(null)),V(this,"_sourceBuffer",Object.create(null)),V(this,"_mseFullFlag",{}),V(this,"_st",0),V(this,"_opst",0),V(this,"_logger",null),V(this,"_config",null),V(this,"_url",null),V(this,"_onSBUpdateEnd",function(e){var t=i._queue[e];if(t){var n=t[0];if((n==null?void 0:n.opName)!==pi.UPDATE_DURATION&&t.shift(),n){var l=Is()-i._opst;i._logger.debug("UpdateEnd",n.opName,l,n.context),n.promise.resolve({name:n.opName,context:n.context,costtime:l}),i._startQueue(e)}}}),V(this,"_onSBUpdateError",function(e,t){var n=i._queue[e];if(n){var l=n[0];l&&(i._logger.error("UpdateError",e,l.opName,l.context),l.promise.reject(new pe(q.MEDIA,q.SUB_TYPES.MSE_APPEND_BUFFER,t)))}}),this._config=Object.assign(a.getDefaultConfig(),s),r&&this.bindMedia(r),this._logger=new Fe("MSE"),this._config.openLog&&Fe.enable()}return Ie(a,[{key:"isOpened",get:function(){var s;return((s=this.mediaSource)===null||s===void 0?void 0:s.readyState)==="open"}},{key:"url",get:function(){return this._url}},{key:"duration",get:function(){var s;return((s=this.mediaSource)===null||s===void 0?void 0:s.duration)||-1}},{key:"isEnded",get:function(){return this.mediaSource?this.mediaSource.readyState==="ended":!1}},{key:"isFull",value:function(s){return s?this._mseFullFlag[s]:this._mseFullFlag[a.VIDEO]}},{key:"updateDuration",value:function(s){var i=this,e=this.mediaSource&&this.mediaSource.duration>s;if(this.mediaSource&&this.mediaSource.duration>s){var t=0;if(Object.keys(this._sourceBuffer).forEach(function(n){try{t=Math.max(i.bufferEnd(n)||0,t)}catch{}}),s<t)return Promise.resolve()}return this._enqueueBlockingOp(function(){if(i.isEnded){i._logger.debug("[debug mse] setDuration ended");return}i.mediaSource&&(i.mediaSource.duration=s,i._logger.debug("[debug mse] setDuration"))},pi.UPDATE_DURATION,{isReduceDuration:e})}},{key:"open",value:function(){var s=this;if(this._openPromise.used&&!this.isOpened&&this.mediaSource){var i=this.mediaSource,e=function t(){var n=Is()-s._st;s._logger.debug("MSE OPEN",n),i.removeEventListener("sourceopen",t),s._openPromise.resolve({costtime:n})};i.addEventListener("sourceopen",e),this._openPromise=Ys()}return this._openPromise}},{key:"bindMedia",value:function(){var r=fs(ke().mark(function i(e){var t=this,n,l;return ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(this.mediaSource||this.media)){o.next=3;break}return o.next=3,this.unbindMedia();case 3:if(!(!e||!ui)){o.next=5;break}throw new Error("Param media or MediaSource does not exist");case 5:return this.media=e,n=this.mediaSource=new ui,this._st=Is(),l=function u(){var p=Is()-t._st;t._logger.debug("MSE OPEN"),n.removeEventListener("sourceopen",u),URL.revokeObjectURL(e.src),t._openPromise.resolve({costtime:p})},n.addEventListener("sourceopen",l),this._url=URL.createObjectURL(n),e.src=this._url,o.abrupt("return",this._openPromise);case 13:case"end":return o.stop()}},i,this)}));function s(i){return r.apply(this,arguments)}return s}()},{key:"unbindMedia",value:function(){var r=fs(ke().mark(function i(){var e=this,t,n,l;return ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(this._openPromise.used||this._openPromise.resolve(),t=this.mediaSource,t){if(Object.keys(this._queue).forEach(function(u){var p=e._queue[u];p&&p.forEach(function(c){var k,f;return(k=c.promise)===null||k===void 0||(f=k.resolve)===null||f===void 0?void 0:f.call(k)})}),n=!!this.media&&this.media.readyState>=1,l=t.readyState==="open",n&&l)try{t.endOfStream()}catch{}Object.keys(this._sourceBuffer).forEach(function(u){try{t.removeSourceBuffer(e._sourceBuffer[u])}catch{}})}if(this.media){this.media.removeAttribute("src");try{this.media.load()}catch{}this.media=null}this.mediaSource=null,this._openPromise=Ys(),this._queue=Object.create(null),this._sourceBuffer=Object.create(null);case 8:case"end":return o.stop()}},i,this)}));function s(){return r.apply(this,arguments)}return s}()},{key:"createSource",value:function(s,i){if(!(this._sourceBuffer[s]||!this.mediaSource)){var e;try{e=this._sourceBuffer[s]=this.mediaSource.addSourceBuffer(i)}catch(t){throw new pe(q.MEDIA,q.SUB_TYPES.MSE_ADD_SB,t)}e.mimeType=i,e.addEventListener("updateend",this._onSBUpdateEnd.bind(this,s)),e.addEventListener("error",this._onSBUpdateError.bind(this,s))}}},{key:"changeType",value:function(s,i){var e=this,t=this._sourceBuffer[s];return!this.mediaSource||!t||t.mimeType===i?Promise.resolve():typeof t.changeType!="function"?Promise.reject():this._enqueueOp(s,function(){t.changeType(i),t.mimeType=i,e._onSBUpdateEnd(s)},"changeType",{mimeType:i})}},{key:"createOrChangeSource",value:function(s,i){return this.createSource(s,i),this.changeType(s,i)}},{key:"append",value:function(s,i,e){var t=this;return!i||!i.byteLength||!this._sourceBuffer[s]?Promise.resolve():this._enqueueOp(s,function(){var n;!t.mediaSource||t.media.error||(t._logger.debug("MSE APPEND START",e),t._opst=Is(),(n=t._sourceBuffer[s])===null||n===void 0||n.appendBuffer(i))},pi.APPEND,e)}},{key:"remove",value:function(s,i,e,t){var n=this,l=!1;return this._mseFullFlag[s]&&(l=!0),this._enqueueOp(s,function(){if(!(!n.mediaSource||n.media.error)){var h=n._sourceBuffer[s];if(i>=e||!h){n._onSBUpdateEnd(s);return}n._opst=Is(),n._logger.debug("MSE REMOVE START",s,i,e,t),h.remove(i,e)}},pi.REMOVE,t,l)}},{key:"clearBuffer",value:function(s,i){var e=this,t;return Object.keys(this._sourceBuffer).forEach(function(n){t=e.remove(n,s,i)}),t||Promise.resolve()}},{key:"clearAllBuffer",value:function(){var s=this,i;return Object.keys(this._sourceBuffer).forEach(function(e){var t=s._sourceBuffer[e];i=s.remove(e,0,me.end(me.get(t)))}),i}},{key:"clearOpQueues",value:function(s,i){var e;this._logger.debug("MSE clearOpQueue START");var t=this._queue[s];if(i&&t){this._queue[s]=[];return}if(!(!t||!t[s]||t.length<5)){var n=[];t.forEach(function(l){l.context&&l.context.isinit&&n.push(l)}),this._queue[s]=t.slice(0,2),n.length>0&&(e=this._queue[s]).push.apply(e,n)}}},{key:"endOfStream",value:function(s){var i=this;return!this.mediaSource||this.mediaSource.readyState!=="open"?Promise.resolve():this._enqueueBlockingOp(function(){var e=i.mediaSource;!e||e.readyState!=="open"||(i._logger.debug("MSE endOfStream START"),s?e.endOfStream(s):e.endOfStream())},"endOfStream")}},{key:"setLiveSeekableRange",value:function(s,i){var e=this.mediaSource;s<0||i<s||!(e!=null&&e.setLiveSeekableRange)||e.readyState!=="open"||e.setLiveSeekableRange(s,i)}},{key:"getSourceBuffer",value:function(s){return this._sourceBuffer[s]}},{key:"buffered",value:function(s){return me.get(this._sourceBuffer[s])}},{key:"bufferStart",value:function(s){return me.start(this.buffered(s))}},{key:"bufferEnd",value:function(s){return me.end(this.buffered(s))}},{key:"_enqueueOp",value:function(s,i,e,t,n){var l=this;if(!this.mediaSource)return Promise.resolve();var h=this._queue[s]=this._queue[s]||[],o={exec:i,promise:Ys(),opName:e,context:t};return n?(h.splice(0,0,o),this._mseFullFlag[s]=!1,this._startQueue(s)):h.push(o),this.isOpened||this.isEnded?h.length===1&&this._startQueue(s):this._openPromise.then(function(){h.length===1&&l._startQueue(s)}),o.promise}},{key:"_enqueueBlockingOp",value:function(){var r=fs(ke().mark(function i(e,t,n){var l=this,h,o;return ke().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.mediaSource){p.next=2;break}return p.abrupt("return",Promise.resolve());case 2:if(h=Object.keys(this._sourceBuffer),h.length){p.next=5;break}return p.abrupt("return",e());case 5:return o=[],h.forEach(function(c){var k=l._queue[c],f=Ys();o.push(f),k.push({exec:function(){f.resolve()},promise:f,opName:t,context:n}),k.length===1&&l._startQueue(c)}),p.abrupt("return",Promise.all(o).then(function(){try{return e()}finally{h.forEach(function(c){var k=l._queue[c],f=l._sourceBuffer[c];k==null||k.shift(),(!f||!f.updating)&&l._startQueue(c)})}}));case 8:case"end":return p.stop()}},i,this)}));function s(i,e,t){return r.apply(this,arguments)}return s}()},{key:"_startQueue",value:function(s){var i=this._queue[s];if(i){var e=i[0];if(e&&!this._mseFullFlag[s])try{e.exec()}catch(t){t&&t.message&&t.message.indexOf("SourceBuffer is full")>=0?(this._mseFullFlag[s]=!0,this._logger.error("[MSE error],  context,",e.context," ,name,",e.opName,",err,SourceBuffer is full"),e.promise.reject(new pe(q.MEDIA,q.SUB_TYPES.MSE_FULL,t))):(this._logger.error(t),e.promise.reject(new pe(q.MEDIA,q.SUB_TYPES.MSE_OTHER,t)),i.shift(),this._startQueue(s))}}}},{key:"setTimeoffset",value:function(s,i,e){var t=this;return this._enqueueOp(s,function(){i<0&&(i+=.001),t._sourceBuffer[s].timestampOffset=i,t._onSBUpdateEnd(s)},"setTimeoffset",e)}},{key:"abort",value:function(s,i){var e=this;return this.isOpened?this._enqueueOp(s,function(){e._sourceBuffer[s].abort(),e._onSBUpdateEnd(s)},"abort",i):Promise.resolve()}}],[{key:"getDefaultConfig",value:function(){return{openLog:!1}}},{key:"isSupported",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if(!ui)return!1;try{return ui.isTypeSupported(s)}catch(i){return this._logger.error(s,i),!1}}}]),a}();V(ce,"VIDEO","video");V(ce,"AUDIO","audio");var Gs={FETCH:"fetch",XHR:"xhr"},$s={ARRAY_BUFFER:"arraybuffer",TEXT:"text",JSON:"json"},hs=function(a){ai(s,a);var r=ri(s);function s(i,e,t,n){var l;return _e(this,s),l=r.call(this,n),V(z(l),"retryCount",0),V(z(l),"isTimeout",!1),V(z(l),"loaderType",Gs.FETCH),V(z(l),"startTime",0),V(z(l),"endTime",0),V(z(l),"options",{}),l.url=i,l.request=e,l.response=t,l}return Ie(s)}(Si(Error)),Bn=Object.prototype.toString;function Lr(a){return a!==null&&Ns(a)==="object"}function Ut(a){if(Bn.call(a)!=="[object Object]")return!1;var r=Object.getPrototypeOf(a);return r===null||r===Object.prototype}function Fr(a){return Bn.call(a)==="[object Date]"}function Un(a){if(!(!a||a[0]===null||a[0]===void 0||a[0]===0&&(a[1]===null||a[1]===void 0))){var r="bytes="+a[0]+"-";return a[1]&&(r+=a[1]),r}}function zt(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zn(a,r){if(a){if(!r)return a;var s,i=Object.keys(r).map(function(t){if(s=r[t],s!=null)return Array.isArray(s)?t=t+"[]":s=[s],s.map(function(n){return Fr(n)?n=n.toISOString():Lr(n)&&(n=JSON.stringify(n)),"".concat(zt(t),"=").concat(zt(n))}).join("&")}).filter(Boolean).join("&");if(i){var e=a.indexOf("#");e!==-1&&(a=a.slice(0,e)),a+=(a.indexOf("?")===-1?"?":"&")+i}return a}}function tt(a,r,s,i,e,t,n,l,h,o,u){e=e!=null?parseFloat(e):null,i=parseInt(i||"0",10),Number.isNaN(i)&&(i=0);var p={range:h,vid:o,index:l,contentLength:i,age:e,startTime:t,firstByteTime:n,endTime:Date.now(),priOptions:u};return{data:a,done:r,options:p,response:s}}function nt(a,r){return Math.round(a*8*1e3/r/1024)}var _={ERROR:"error",TTFB:"core.ttfb",LOAD_START:"core.loadstart",LOAD_RESPONSE_HEADERS:"core.loadresponseheaders",LOAD_COMPLETE:"core.loadcomplete",LOAD_RETRY:"core.loadretry",SOURCEBUFFER_CREATED:"core.sourcebuffercreated",ANALYZE_DURATION_EXCEEDED:"core.analyzedurationexceeded",REMOVE_BUFFER:"core.removebuffer",BUFFEREOS:"core.buffereos",KEYFRAME:"core.keyframe",METADATA_PARSED:"core.metadataparsed",SEI:"core.sei",SEI_IN_TIME:"core.seiintime",FLV_SCRIPT_DATA:"core.flvscriptdata",LOWDECODE:"core.lowdecode",SWITCH_URL_SUCCESS:"core.switchurlsuccess",SWITCH_URL_FAILED:"core.switchurlfailed",SPEED:"core.speed",HLS_MANIFEST_LOADED:"core.hlsmanifestloaded",HLS_LEVEL_LOADED:"core.hlslevelloaded",DEMUXED_TRACK:"core.demuxedtrack",STREAM_EXCEPTION:"core.streamexception",LARGE_AV_FIRST_FRAME_GAP_DETECT:"LARGE_AV_FIRST_FRAME_GAP_DETECT",LARGE_VIDEO_DTS_GAP_DETECT:"LARGE_VIDEO_DTS_GAP_DETECT",LARGE_AUDIO_DTS_GAP_DETECT:"LARGE_AUDIO_DTS_GAP_DETECT",AUDIO_GAP_DETECT:"AUDIO_GAP_DETECT",AUDIO_OVERLAP_DETECT:"AUDIO_OVERLAP_DETECT",MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT:"MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT",REAL_TIME_SPEED:"real_time_speed"},At=2*1024*1024,at=function(a){ai(s,a);var r=ri(s);function s(){var i;return _e(this,s),i=r.call(this),V(z(i),"_abortController",null),V(z(i),"_timeoutTimer",null),V(z(i),"_reader",null),V(z(i),"_response",null),V(z(i),"_aborted",!1),V(z(i),"_index",-1),V(z(i),"_range",null),V(z(i),"_receivedLength",0),V(z(i),"_running",!1),V(z(i),"_logger",null),V(z(i),"_vid",""),V(z(i),"_onProcessMinLen",0),V(z(i),"_onCancel",null),V(z(i),"_priOptions",null),i}return Ie(s,[{key:"load",value:function(e){var t,n=this,l=e.url,h=e.vid,o=e.timeout,u=e.responseType,p=e.onProgress,c=e.index,k=e.onTimeout,f=e.onCancel,b=e.range,g=e.transformResponse,E=e.request,L=e.params,C=e.logger,F=e.method,Z=e.headers,X=e.body,T=e.mode,G=e.credentials,Y=e.cache,M=e.redirect,N=e.referrer,m=e.referrerPolicy,d=e.onProcessMinLen,y=e.priOptions;this._logger=C,this._aborted=!1,this._onProcessMinLen=d,this._onCancel=f,this._abortController=typeof AbortController<"u"&&new AbortController,this._running=!0,this._index=c,this._range=b||[0,0],this._vid=h||l,this._priOptions=y||{};var S={method:F,headers:Z,body:X,mode:T,credentials:G,cache:Y,redirect:M,referrer:N,referrerPolicy:m,signal:(t=this._abortController)===null||t===void 0?void 0:t.signal},v=!1;clearTimeout(this._timeoutTimer),l=zn(l,L);var w=Un(b);w&&(E?Z=E.headers:Z=S.headers=S.headers||(Headers?new Headers:{}),Headers&&Z instanceof Headers?Z.append("Range",w):Z.Range=w),o&&(this._timeoutTimer=setTimeout(function(){if(v=!0,n.cancel(),k){var D=new hs(l,S,null,"timeout");D.isTimeout=!0,k(D,{index:n._index,range:n._range,vid:n._vid,priOptions:n._priOptions})}},o));var R=Date.now();return this._logger.debug("[fetch load start], index,",c,",range,",b),new Promise(function(D,K){fetch(E||l,E?void 0:S).then(function(){var I=fs(ke().mark(function O(P){var as,ve,Ye,rs;return ke().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(clearTimeout(n._timeoutTimer),n._response=P,!(n._aborted||!n._running)){ae.next=4;break}return ae.abrupt("return");case 4:if(g&&(P=g(P,l)||P),P.ok){ae.next=7;break}throw new hs(l,S,P,"bad network response");case 7:if(as=Date.now(),u!==$s.TEXT){ae.next=15;break}return ae.next=11,P.text();case 11:ve=ae.sent,n._running=!1,ae.next=37;break;case 15:if(u!==$s.JSON){ae.next=22;break}return ae.next=18,P.json();case 18:ve=ae.sent,n._running=!1,ae.next=37;break;case 22:if(!p){ae.next=29;break}return n.resolve=D,n.reject=K,n._loadChunk(P,p,R,as),ae.abrupt("return");case 29:return ae.next=31,P.arrayBuffer();case 31:ve=ae.sent,ve=new Uint8Array(ve),n._running=!1,Ye=Date.now()-R,rs=nt(ve.byteLength,Ye),n.emit(_.REAL_TIME_SPEED,{speed:rs,len:ve.byteLength,time:Ye,vid:n._vid,index:n._index,range:n._range,priOptions:n._priOptions});case 37:n._logger.debug("[fetch load end], index,",c,",range,",b),D(tt(ve,!0,P,P.headers.get("Content-Length"),P.headers.get("age"),R,as,c,b,n._vid,n._priOptions));case 39:case"end":return ae.stop()}},O)}));return function(O){return I.apply(this,arguments)}}()).catch(function(I){var O;clearTimeout(n._timeoutTimer),n._running=!1,!(n._aborted&&!v)&&(I=I instanceof hs?I:new hs(l,S,null,(O=I)===null||O===void 0?void 0:O.message),I.startTime=R,I.endTime=Date.now(),I.isTimeout=v,I.options={index:n._index,range:n._range,vid:n._vid,priOptions:n._priOptions},K(I))})})}},{key:"cancel",value:function(){var i=fs(ke().mark(function t(){return ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this._aborted){l.next=2;break}return l.abrupt("return");case 2:if(this._aborted=!0,this._running=!1,!this._response){l.next=14;break}if(l.prev=5,!this._reader){l.next=9;break}return l.next=9,this._reader.cancel();case 9:l.next=13;break;case 11:l.prev=11,l.t0=l.catch(5);case 13:this._response=this._reader=null;case 14:if(this._abortController){try{this._abortController.abort()}catch{}this._abortController=null}this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions});case 16:case"end":return l.stop()}},t,this,[[5,11]])}));function e(){return i.apply(this,arguments)}return e}()},{key:"_loadChunk",value:function(e,t,n,l){var h=this;if(!e.body||!e.body.getReader){this._running=!1;var o=new hs(e.url,"",e,"onProgress of bad response.body.getReader");o.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this.reject(o);return}this._onProcessMinLen>0&&(this._cache=new Uint8Array(At),this._writeIdx=0);var u=this._reader=e.body.getReader(),p,c,k,f=function(){var b=fs(ke().mark(function g(){var E,L,C,F,Z,X,T,G;return ke().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return c=Date.now(),M.prev=1,M.next=4,u.read();case 4:p=M.sent,k=Date.now(),M.next=13;break;case 8:return M.prev=8,M.t0=M.catch(1),k=Date.now(),h._aborted||(h._running=!1,M.t0.options={index:h._index,range:h._range,vid:h._vid,priOptions:h._priOptions},h.reject(M.t0)),M.abrupt("return");case 13:if(L=((E=h._range)===null||E===void 0?void 0:E.length)>0?h._range[0]:0,C=L+h._receivedLength,!h._aborted){M.next=19;break}return h._running=!1,t(void 0,!1,{range:[C,C],vid:h._vid,index:h._index,startTime:c,endTime:k,st:n,firstByteTime:l,priOptions:h._priOptions},e),M.abrupt("return");case 19:F=p.value?p.value.byteLength:0,h._receivedLength+=F,h._logger.debug("【fetchLoader,onProgress call】,task,",h._range,", start,",C,", end,",L+h._receivedLength,", done,",p.done),h._onProcessMinLen>0?h._writeIdx+F>=h._onProcessMinLen||p.done?(Z=new Uint8Array(h._writeIdx+F),Z.set(h._cache.slice(0,h._writeIdx),0),F>0&&Z.set(p.value,h._writeIdx),h._writeIdx=0,h._logger.debug("【fetchLoader,onProgress enough】,done,",p.done,",len,",Z.byteLength,", writeIdx,",h._writeIdx)):F>0&&h._writeIdx+F<At?(h._cache.set(p.value,h._writeIdx),h._writeIdx+=F,h._logger.debug("【fetchLoader,onProgress cache】,len,",F,", writeIdx,",h._writeIdx)):F>0&&(X=new Uint8Array(h._writeIdx+F+2048),h._logger.debug("【fetchLoader,onProgress extra start】,size,",h._writeIdx+F+2048,", datalen,",F,", writeIdx,",h._writeIdx),X.set(h._cache.slice(0,h._writeIdx),0),F>0&&X.set(p.value,h._writeIdx),h._writeIdx+=F,delete h._cache,h._cache=X,h._logger.debug("【fetchLoader,onProgress extra end】,len,",F,", writeIdx,",h._writeIdx)):Z=p.value,(Z&&Z.byteLength>0||p.done)&&t(Z,p.done,{range:[h._range[0]+h._receivedLength-(Z?Z.byteLength:0),h._range[0]+h._receivedLength],vid:h._vid,index:h._index,startTime:c,endTime:k,st:n,firstByteTime:l,priOptions:h._priOptions},e),p.done?(T=Date.now()-n,G=nt(h._receivedLength,T),h.emit(_.REAL_TIME_SPEED,{speed:G,len:h._receivedLength,time:T,vid:h._vid,index:h._index,range:h._range,priOptions:h._priOptions}),h._running=!1,h._logger.debug("[fetchLoader onProgress end],task,",h._range,",done,",p.done),h.resolve(tt(p,!0,e,e.headers.get("Content-Length"),e.headers.get("age"),n,l,h._index,h._range,h._vid,h._priOptions))):f();case 25:case"end":return M.stop()}},g,null,[[1,8]])}));return function(){return b.apply(this,arguments)}}();f()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}}],[{key:"isSupported",value:function(){return typeof fetch<"u"}}]),s}(Fs);function Cr(a){return Qs({loaderType:Gs.FETCH,retry:0,retryDelay:0,timeout:0,request:null,onTimeout:void 0,onProgress:void 0,onRetryError:void 0,transformRequest:void 0,transformResponse:void 0,transformError:void 0,responseType:$s.TEXT,range:void 0,url:"",params:void 0,method:"GET",headers:{},body:void 0,mode:void 0,credentials:void 0,cache:void 0,redirect:void 0,referrer:void 0,referrerPolicy:void 0,integrity:void 0,onProcessMinLen:0},a)}var Xr=function(a){ai(s,a);var r=ri(s);function s(){var i;return _e(this,s),i=r.call(this),V(z(i),"_xhr",null),V(z(i),"_aborted",!1),V(z(i),"_timeoutTimer",null),V(z(i),"_range",null),V(z(i),"_receivedLength",0),V(z(i),"_url",null),V(z(i),"_onProgress",null),V(z(i),"_index",-1),V(z(i),"_headers",null),V(z(i),"_currentChunkSizeKB",384),V(z(i),"_timeout",null),V(z(i),"_xhr",null),V(z(i),"_withCredentials",null),V(z(i),"_startTime",-1),V(z(i),"_loadCompleteResolve",null),V(z(i),"_loadCompleteReject",null),V(z(i),"_runing",!1),V(z(i),"_logger",!1),V(z(i),"_vid",""),V(z(i),"_responseType",void 0),V(z(i),"_credentials",void 0),V(z(i),"_method",void 0),V(z(i),"_transformResponse",void 0),V(z(i),"_firstRtt",void 0),V(z(i),"_onCancel",null),V(z(i),"_priOptions",null),i}return Ie(s,[{key:"load",value:function(e){var t=this;clearTimeout(this._timeoutTimer),this._logger=e.logger,this._range=e.range,this._onProgress=e.onProgress,this._index=e.index,this._headers=e.headers,this._withCredentials=e.credentials==="include"||e.credentials==="same-origin",this._body=e.body||null,e.method&&(this._method=e.method),this._timeout=e.timeout||null,this._runing=!0,this._vid=e.vid||e.url,this._responseType=e.responseType,this._firstRtt=-1,this._onTimeout=e.onTimeout,this._onCancel=e.onCancel,this._request=e.request,this._priOptions=e.priOptions||{},this._logger.debug("【xhrLoader task】, range",this._range),this._url=zn(e.url,e.params);var n=Date.now();return new Promise(function(l,h){t._loadCompleteResolve=l,t._loadCompleteReject=h,t._startLoad()}).catch(function(l){if(clearTimeout(t._timeoutTimer),t._runing=!1,!t._aborted)throw l=l instanceof hs?l:new hs(t._url,t._request),l.startTime=n,l.endTime=Date.now(),l.options={index:t._index,vid:t._vid,priOptions:t._priOptions},l})}},{key:"_startLoad",value:function(){var e=null;if(this._responseType===$s.ARRAY_BUFFER&&this._range&&this._range.length>1)if(this._onProgress){this._firstRtt=-1;var t=this._currentChunkSizeKB*1024,n=this._range[0]+this._receivedLength,l=this._range[1];t<this._range[1]-n&&(l=n+t),e=[n,l],this._logger.debug("[xhr_loader->],tast :",this._range,", SubRange, ",e)}else e=this._range,this._logger.debug("[xhr_loader->],tast :",this._range,", allRange, ",e);this._internalOpen(e)}},{key:"_internalOpen",value:function(e){var t=this;try{this._startTime=Date.now();var n=this._xhr=new XMLHttpRequest;n.open(this._method||"GET",this._url,!0),n.responseType=this._responseType,this._timeout&&(n.timeout=this._timeout),n.withCredentials=this._withCredentials,n.onload=this._onLoad.bind(this),n.onreadystatechange=this._onReadyStatechange.bind(this),n.onerror=function(o){var u,p,c;t._running=!1;var k=new hs(t._url,t._request,o==null||(u=o.currentTarget)===null||u===void 0?void 0:u.response,"xhr.onerror.status:"+(o==null||(p=o.currentTarget)===null||p===void 0?void 0:p.status)+",statusText,"+(o==null||(c=o.currentTarget)===null||c===void 0?void 0:c.statusText));k.options={index:t._index,range:t._range,vid:t._vid,priOptions:t._priOptions},t._loadCompleteReject(k)},n.ontimeout=function(o){t.cancel();var u=new hs(t._url,t._request,{status:408},"timeout");t._onTimeout&&(u.isTimeout=!0,t._onTimeout(u,{index:t._index,range:t._range,vid:t._vid,priOptions:t._priOptions})),u.options={index:t._index,range:t._range,vid:t._vid,priOptions:t._priOptions},t._loadCompleteReject(u)};var l=this._headers||{},h=Un(e);h&&(l.Range=h),l&&Object.keys(l).forEach(function(o){n.setRequestHeader(o,l[o])}),this._logger.debug("[xhr.send->] tast,",this._range,",load sub range, ",e),n.send(this._body)}catch(o){o.options={index:this._index,range:e,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(o)}}},{key:"_onReadyStatechange",value:function(e){var t=e.target;t.readyState===2&&this._firstRtt<0&&(this._firstRtt=Date.now())}},{key:"_onLoad",value:function(e){var t,n=e.target.status;if(n<200||n>299){var l=new hs(this._url,null,Qs(Qs({},e.target.response),{},{status:n}),"bad response,status:"+n);return l.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(l)}var h=null,o=!1,u,p=((t=this._range)===null||t===void 0?void 0:t.length)>0?this._range[0]:0;if(this._responseType===$s.ARRAY_BUFFER){var c,k=new Uint8Array(e.target.response);if(u=p+this._receivedLength,k&&k.byteLength>0){this._receivedLength+=k.byteLength;var f=Date.now()-this._startTime,b=nt(this._receivedLength,f);this.emit(_.REAL_TIME_SPEED,{speed:b,len:this._receivedLength,time:f,vid:this._vid,index:this._index,range:[u,p+this._receivedLength],priOptions:this._priOptions})}h=k,((c=this._range)===null||c===void 0?void 0:c.length)>1&&this._range[1]&&this._receivedLength<this._range[1]-this._range[0]?o=!1:o=!0,this._logger.debug("[xhr load done->], tast :",this._range,", start",u,"end ",p+this._receivedLength,",dataLen,",k?k.byteLength:0,",receivedLength",this._receivedLength,",index,",this._index,", done,",o)}else o=!0,h=e.target.response;var g={ok:n>=200&&n<300,status:n,statusText:this._xhr.statusText,url:this._xhr.responseURL,headers:this._getHeaders(this._xhr),body:this._xhr.response};this._transformResponse&&(g=this._transformResponse(g,this._url)||g),this._onProgress&&this._onProgress(h,o,{index:this._index,vid:this._vid,range:[u,p+this._receivedLength],startTime:this._startTime,endTime:Date.now(),priOptions:this._priOptions},g),o?(this._runing=!1,this._loadCompleteResolve&&this._loadCompleteResolve(tt(this._onProgress?null:h,o,g,g.headers["content-length"],g.headers.age,this._startTime,this._firstRtt,this._index,this._range,this._vid,this._priOptions))):this._startLoad()}},{key:"cancel",value:function(){if(!this._aborted&&(this._aborted=!0,this._runing=!1,yi(xs(s.prototype),"removeAllListeners",this).call(this),this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions}),this._xhr))return this._xhr.abort()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}},{key:"_getHeaders",value:function(e){var t=e.getAllResponseHeaders().trim().split(`\r
`),n={},l=yr(t),h;try{for(l.s();!(h=l.n()).done;){var o=h.value,u=o.split(": ");n[u[0].toLowerCase()]=u.slice(1).join(": ")}}catch(p){l.e(p)}finally{l.f()}return n}}],[{key:"isSupported",value:function(){return typeof XMLHttpRequest<"u"}}]),s}(Fs),wr=["retry","retryDelay","onRetryError","transformError"],Gr=function(){function a(r,s){_e(this,a),this.promise=Ys(),this.alive=!!s.onProgress,!s.logger&&(s.logger=new Fe("Loader")),this._loaderType=r,this._loader=r===Gs.FETCH&&window.fetch?new at:new Xr,this._config=s,this._retryCount=0,this._retryTimer=null,this._canceled=!1,this._retryCheckFunc=s.retryCheckFunc,this._logger=s.logger}return Ie(a,[{key:"exec",value:function(){var s=this,i=this._config,e=i.retry,t=i.retryDelay,n=i.onRetryError,l=i.transformError,h=dr(i,wr),o=function(){var u=fs(ke().mark(function p(){var c,k,f;return ke().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,g.next=3,s._loader.load(h);case 3:c=g.sent,s.promise.resolve(c),g.next=27;break;case 7:if(g.prev=7,g.t0=g.catch(0),s._loader.running=!1,s._logger.debug("[task request catch err]",g.t0),!s._canceled){g.next=13;break}return g.abrupt("return");case 13:if(g.t0.loaderType=s._loaderType,g.t0.retryCount=s._retryCount,k=g.t0,l&&(k=l(k)||k),n&&s._retryCount>0&&n(k,s._retryCount,{index:h.index,vid:h.vid,range:h.range,priOptions:h.priOptions}),s._retryCount++,f=!0,s._retryCheckFunc&&(f=s._retryCheckFunc(g.t0)),!(f&&s._retryCount<=e)){g.next=26;break}return clearTimeout(s._retryTimer),s._logger.debug("[task request setTimeout],retry",s._retryCount,",retry range,",h.range),s._retryTimer=setTimeout(o,t),g.abrupt("return");case 26:s.promise.reject(k);case 27:case"end":return g.stop()}},p,null,[[0,7]])}));return function(){return u.apply(this,arguments)}}();return o(),this.promise}},{key:"cancel",value:function(){var r=fs(ke().mark(function i(){return ke().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return clearTimeout(this._retryTimer),this._canceled=!0,this._loader.running=!1,t.abrupt("return",this._loader.cancel());case 4:case"end":return t.stop()}},i,this)}));function s(){return r.apply(this,arguments)}return s}()},{key:"running",get:function(){return this._loader&&this._loader.running}},{key:"loader",get:function(){return this._loader}}]),a}();function An(a){return a&&!a.paused&&!a.ended&&a.playbackRate!==0&&a.readyState!==0}function On(a){if(!a)return{};if(typeof a.getVideoPlaybackQuality=="function"){var r=a.getVideoPlaybackQuality();return{droppedVideoFrames:r.droppedVideoFrames||r.corruptedVideoFrames,totalVideoFrames:r.totalVideoFrames,creationTime:r.creationTime}}return{droppedVideoFrames:a.webkitDroppedFrameCount,totalVideoFrames:a.webkitDecodedFrameCount,creationTime:performance.now()}}function Ts(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];if(r=r.filter(Boolean),r.length<2)return r[0];var i=new Uint8Array(r.reduce(function(t,n){return t+n.byteLength},0)),e=0;return r.forEach(function(t){i.set(t,e),e+=t.byteLength}),i}function Wr(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise(function(r){return setTimeout(r,a)})}var Ls=function(a){ai(s,a);var r=ri(s);function s(i){var e;return _e(this,s),e=r.call(this,i),V(z(e),"type",Gs.FETCH),V(z(e),"_queue",[]),V(z(e),"_alive",[]),V(z(e),"_currentTask",null),V(z(e),"_finnalUrl",""),V(z(e),"_config",void 0),e._config=Cr(i),(e._config.loaderType===Gs.XHR||!at.isSupported())&&(e.type=Gs.XHR),e.log=i.logger,e}return Ie(s,[{key:"isFetch",value:function(){return this.type===Gs.FETCH}},{key:"load",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof e=="string"||!e?n.url=e||n.url||this._config.url:n=e,n=Object.assign({},this._config,n),n.params&&(n.params=Object.assign({},n.params)),n.headers&&Ut(n.headers)&&(n.headers=Object.assign({},n.headers)),n.body&&Ut(n.body)&&(n.body=Object.assign({},n.body)),n.transformRequest&&(n=n.transformRequest(n)||n),n.logger=this.log;var l=new Gr(this.type,n);return l.loader.on(_.REAL_TIME_SPEED,function(h){t.emit(_.REAL_TIME_SPEED,h)}),this._queue.push(l),this._queue.length===1&&(!this._currentTask||!this._currentTask.running)&&this._processTask(),l.promise}},{key:"cancel",value:function(){var i=fs(ke().mark(function t(){var n;return ke().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return n=this._queue.map(function(o){return o.cancel()}).concat(this._alive.map(function(o){return o.cancel()})),this._currentTask&&n.push(this._currentTask.cancel()),this._queue=[],this._alive=[],h.next=6,Promise.all(n);case 6:return h.next=8,Wr();case 8:case"end":return h.stop()}},t,this)}));function e(){return i.apply(this,arguments)}return e}()},{key:"_processTask",value:function(){var e=this;if(this._currentTask=this._queue.shift(),!!this._currentTask){this._currentTask.alive&&this._alive.push(this._currentTask);var t=this._currentTask.exec().catch(function(n){});t&&typeof t.finally=="function"&&t.finally(function(){var n,l;(n=e._currentTask)!==null&&n!==void 0&&n.alive&&((l=e._alive)===null||l===void 0?void 0:l.length)>0&&(e._alive=e._alive.filter(function(h){return h&&h!==e._currentTask})),e._processTask()})}}}],[{key:"isFetchSupport",value:function(){return at.isSupported()}}]),s}(Fs),Jn=function(){function a(){_e(this,a),V(this,"_prevCurrentTime",0)}return Ie(a,[{key:"do",value:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,e=arguments.length>2?arguments[2]:void 0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(s){var n=s.currentTime,l=0;if(this._prevCurrentTime===n){var h=me.info(me.get(s),n);if(!h.buffers.length)return;e&&h.nextStart||h.nextStart&&h.nextStart-n<i?l=h.nextStart+.1:h.end&&h.end-n>t&&!s.seeking&&(l=n+.1)}this._prevCurrentTime=n,l&&n!==l&&(s.currentTime=l)}}}]),a}(),jn=function(){function a(r){var s=this;_e(this,a),V(this,"_seiSet",new Set),this.emitter=r,r.on(_.SEI,function(i){i&&s._seiSet.add(i)})}return Ie(a,[{key:"throw",value:function(s){var i=this;if(!(s==null||!this._seiSet.size)){var e=s-.2,t=s+.2,n=[];this._seiSet.forEach(function(l){l.time>=e&&l.time<=t&&n.push(l)}),n.forEach(function(l){i._seiSet.delete(l),i.emitter.emit(_.SEI_IN_TIME,l)})}}},{key:"reset",value:function(){this._seiSet.clear()}}]),a}(),Qn=function(){function a(){_e(this,a),V(this,"_chunkSpeeds",[]),V(this,"_speeds",[])}return Ie(a,[{key:"addRecord",value:function(s,i){!s||!i||(this._speeds.push(8e3*s/i),this._speeds=this._speeds.slice(-3))}},{key:"addChunkRecord",value:function(s,i){!s||!i||(this._chunkSpeeds.push(8e3*s/i),this._chunkSpeeds=this._chunkSpeeds.slice(-100))}},{key:"getAvgSpeed",value:function(){return!this._chunkSpeeds.length&&!this._speeds.length?0:this._speeds.length?this._speeds.reduce(function(s,i){return s+=i})/this._speeds.length:this._chunkSpeeds.reduce(function(s,i){return s+=i})/this._chunkSpeeds.length}},{key:"getLatestSpeed",value:function(){return!this._chunkSpeeds.length&&!this._speeds.length?0:this._speeds.length?this._speeds[this._speeds.length-1]:this._chunkSpeeds[this._chunkSpeeds.length-1]}},{key:"reset",value:function(){this._chunkSpeeds=[],this._speeds=[]}}]),a}(),Ot=function(){function a(r){_e(this,a),V(this,"encodeType",""),V(this,"audioCodec",""),V(this,"videoCodec",""),V(this,"domain",""),V(this,"fps",0),V(this,"bitrate",0),V(this,"width",0),V(this,"height",0),V(this,"samplerate",0),V(this,"channelCount",0),V(this,"gop",0),V(this,"_bitsAccumulateSize",0),V(this,"_bitsAccumulateDuration",0),V(this,"_startGopId",-1),this._timescale=r}return Ie(a,[{key:"getStats",value:function(){return{encodeType:this.encodeType,audioCodec:this.audioCodec,videoCodec:this.videoCodec,domain:this.domain,fps:this.fps,bitrate:this.bitrate,width:this.width,height:this.height,samplerate:this.samplerate,channelCount:this.channelCount,gop:this.gop}}},{key:"setEncodeType",value:function(s){this.encodeType=s}},{key:"setFpsFromScriptData",value:function(s){var i,e=s.data,t=e==null||(i=e.onMetaData)===null||i===void 0?void 0:i.framerate;t&&t>0&&t<100&&(this.fps=t)}},{key:"setVideoMeta",value:function(s){if(this.width=s.width,this.height=s.height,this.videoCodec=s.codec,this.encodeType=s.codecType,s.fpsNum&&s.fpsDen){var i=s.fpsNum/s.fpsDen;i>0&&i<100&&(this.fps=i)}}},{key:"setAudioMeta",value:function(s){this.audioCodec=s.codec,this.samplerate=s.sampleRate,this.channelCount=s.channelCount}},{key:"setDomain",value:function(s){this.domain=s.split("/").slice(2,3)[0]}},{key:"updateBitrate",value:function(s){var i=this;if((!this.fps||this.fps>=100)&&s.length){var e=s.reduce(function(t,n){return t+=n.duration},0)/s.length;this.fps=Math.round(this._timescale/e)}s.forEach(function(t){i._startGopId===-1&&(i._startGopId=t.gopId),t.gopId===i._startGopId&&i.gop++,i._bitsAccumulateDuration+=t.duration/(i._timescale/1e3),i._bitsAccumulateSize+=t.units.reduce(function(n,l){return n+=l.length},0),i._bitsAccumulateDuration>=1e3&&(i.bitrate=i._bitsAccumulateSize*8,i._bitsAccumulateDuration=0,i._bitsAccumulateSize=0)})}}]),a}(),qn=function(){function a(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;_e(this,a),V(this,"_core",null),V(this,"_samples",[]),this._core=r,this._timescale=s,this._stats=new Ot(s),this._bindEvents()}return Ie(a,[{key:"getStats",value:function(){var s,i,e,t,n,l,h,o=((s=this._core)===null||s===void 0?void 0:s.media)||{},u=o.currentTime,p=u===void 0?0:u,c=o.decodeFps,k=c===void 0?0:c;return Qs(Qs({},this._stats.getStats()),{},{downloadSpeed:((i=this._core)===null||i===void 0||(e=i.speedInfo)===null||e===void 0?void 0:e.call(i).speed)||0,avgSpeed:((t=this._core)===null||t===void 0||(n=t.speedInfo)===null||n===void 0?void 0:n.call(t).avgSpeed)||0,currentTime:p,bufferEnd:((l=this._core)===null||l===void 0||(h=l.bufferInfo())===null||h===void 0?void 0:h.remaining)||0,decodeFps:k})}},{key:"_bindEvents",value:function(){var s=this;this._core.on(_.DEMUXED_TRACK,function(i){var e=i.videoTrack;return s._stats.updateBitrate(e.samples)}),this._core.on(_.FLV_SCRIPT_DATA,function(i){s._stats.setFpsFromScriptData(i)}),this._core.on(_.METADATA_PARSED,function(i){i.type==="video"?s._stats.setVideoMeta(i.track):s._stats.setAudioMeta(i.track)}),this._core.on(_.TTFB,function(i){s._stats.setDomain(i.responseUrl)})}},{key:"reset",value:function(){this._samples=[],this._stats=new Ot(this._timescale)}}]),a}();function Tr(a,r){var s=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(s!=null){var i,e,t,n,l=[],h=!0,o=!1;try{if(t=(s=s.call(a)).next,r===0){if(Object(s)!==s)return;h=!1}else for(;!(h=(i=t.call(s)).done)&&(l.push(i.value),l.length!==r);h=!0);}catch(u){o=!0,e=u}finally{try{if(!h&&s.return!=null&&(n=s.return(),Object(n)!==n))return}finally{if(o)throw e}}return l}}function he(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function Jt(a,r){for(var s=0;s<r.length;s++){var i=r[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,ia(i.key),i)}}function oe(a,r,s){return r&&Jt(a.prototype,r),s&&Jt(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a}function x(a,r,s){return r=ia(r),r in a?Object.defineProperty(a,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[r]=s,a}function $n(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),r&&rt(a,r)}function Li(a){return Li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Li(a)}function rt(a,r){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,e){return i.__proto__=e,i},rt(a,r)}function Rr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xr(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Vr(a,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xr(a)}function ea(a){var r=Rr();return function(){var i=Li(a),e;if(r){var t=Li(this).constructor;e=Reflect.construct(i,arguments,t)}else e=i.apply(this,arguments);return Vr(this,e)}}function Mr(a,r){return Ir(a)||Tr(a,r)||sa(a,r)||Pr()}function Xe(a){return _r(a)||Yr(a)||sa(a)||Dr()}function _r(a){if(Array.isArray(a))return lt(a)}function Ir(a){if(Array.isArray(a))return a}function Yr(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function sa(a,r){if(a){if(typeof a=="string")return lt(a,r);var s=Object.prototype.toString.call(a).slice(8,-1);if(s==="Object"&&a.constructor&&(s=a.constructor.name),s==="Map"||s==="Set")return Array.from(a);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return lt(a,r)}}function lt(a,r){(r==null||r>a.length)&&(r=a.length);for(var s=0,i=new Array(r);s<r;s++)i[s]=a[s];return i}function Dr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kr(a,r){if(typeof a!="object"||a===null)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var i=s.call(a,r||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function ia(a){var r=Kr(a,"string");return typeof r=="symbol"?r:String(r)}var Ks={VIDEO:"video",AUDIO:"audio",METADATA:"metadata"},ys={AVC:"avc",HEVC:"hevc"},os={AAC:"aac",G711PCMA:"g7110a",G711PCMU:"g7110m"},de={LARGE_AV_SHIFT:"LARGE_AV_SHIFT",LARGE_VIDEO_GAP:"LARGE_VIDEO_GAP",LARGE_VIDEO_GAP_BETWEEN_CHUNK:"LARGE_VIDEO_GAP_BETWEEN_CHUNK",LARGE_AUDIO_GAP:"LARGE_AUDIO_GAP",AUDIO_FILLED:"AUDIO_FILLED",AUDIO_DROPPED:"AUDIO_DROPPED"},Ri=function(){function a(){he(this,a),x(this,"id",1),x(this,"type",Ks.VIDEO),x(this,"codecType",ys.AVC),x(this,"pid",-1),x(this,"hvcC",void 0),x(this,"codec",""),x(this,"timescale",0),x(this,"formatTimescale",0),x(this,"sequenceNumber",0),x(this,"baseMediaDecodeTime",0),x(this,"baseDts",0),x(this,"duration",0),x(this,"warnings",[]),x(this,"samples",[]),x(this,"pps",[]),x(this,"sps",[]),x(this,"vps",[]),x(this,"fpsNum",0),x(this,"fpsDen",0),x(this,"sarRatio",[]),x(this,"width",0),x(this,"height",0),x(this,"nalUnitSize",4),x(this,"present",!1),x(this,"isVideoEncryption",!1),x(this,"isAudioEncryption",!1),x(this,"isVideo",!0),x(this,"kid",null),x(this,"pssh",null),x(this,"ext",void 0)}return oe(a,[{key:"reset",value:function(){this.sequenceNumber=this.width=this.height=this.fpsDen=this.fpsNum=this.duration=this.baseMediaDecodeTime=this.timescale=0,this.codec="",this.present=!1,this.pid=-1,this.pps=[],this.sps=[],this.vps=[],this.sarRatio=[],this.samples=[],this.warnings=[],this.hvcC=null}},{key:"exist",value:function(){return!!(this.pps.length&&this.sps.length&&this.codec)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isVideoEncryption}}]),a}(),xi=function(){function a(){he(this,a),x(this,"id",2),x(this,"type",Ks.AUDIO),x(this,"codecType",os.AAC),x(this,"pid",-1),x(this,"codec",""),x(this,"sequenceNumber",0),x(this,"sampleDuration",0),x(this,"timescale",0),x(this,"formatTimescale",0),x(this,"baseMediaDecodeTime",0),x(this,"duration",0),x(this,"warnings",[]),x(this,"samples",[]),x(this,"baseDts",0),x(this,"sampleSize",16),x(this,"sampleRate",0),x(this,"channelCount",0),x(this,"objectType",0),x(this,"sampleRateIndex",0),x(this,"config",[]),x(this,"present",!1),x(this,"isVideoEncryption",!1),x(this,"isAudioEncryption",!1),x(this,"kid",null),x(this,"ext",void 0)}return oe(a,[{key:"reset",value:function(){this.sequenceNumber=0,this.timescale=0,this.sampleDuration=0,this.sampleRate=0,this.channelCount=0,this.baseMediaDecodeTime=0,this.present=!1,this.pid=-1,this.codec="",this.samples=[],this.config=[],this.warnings=[]}},{key:"exist",value:function(){return!!(this.sampleRate&&this.channelCount&&this.codec&&this.codecType===os.AAC)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isAudioEncryption}}]),a}(),ei=function(){function a(r,s,i){he(this,a),x(this,"flag",{}),x(this,"keyframe",!1),x(this,"gopId",0),x(this,"duration",0),x(this,"size",0),x(this,"units",[]),x(this,"chromaFormat",420),this.originPts=this.pts=r,this.originDts=this.dts=s,i&&(this.units=i)}return oe(a,[{key:"cts",get:function(){return this.pts-this.dts}},{key:"setToKeyframe",value:function(){this.keyframe=!0,this.flag.dependsOn=2,this.flag.isNonSyncSample=0}}]),a}(),gs=oe(function a(r,s,i,e){he(this,a),x(this,"duration",1024),x(this,"flag",{dependsOn:2,isNonSyncSample:0}),x(this,"keyframe",!0),this.originPts=this.pts=this.dts=r,this.data=s,this.size=s.byteLength,this.sampleOffset=e,i&&(this.duration=i)}),ta=oe(function a(r,s){he(this,a),x(this,"time",0),this.data=r,this.originPts=this.pts=s}),Hr=function(a){$n(s,a);var r=ea(s);function s(){return he(this,s),r.apply(this,arguments)}return oe(s)}(ta),na=function(a){$n(s,a);var r=ea(s);function s(){return he(this,s),r.apply(this,arguments)}return oe(s)}(ta),Vi=function(){function a(){he(this,a),x(this,"id",3),x(this,"type",Ks.METADATA),x(this,"timescale",0),x(this,"flvScriptSamples",[]),x(this,"seiSamples",[])}return oe(a,[{key:"exist",value:function(){return!!((this.flvScriptSamples.length||this.seiSamples.length)&&this.timescale)}},{key:"reset",value:function(){this.timescale=0,this.flvScriptSamples=[],this.seiSamples=[]}},{key:"hasSample",value:function(){return!!(this.flvScriptSamples.length||this.seiSamples.length)}}]),a}(),Vs=function(){function a(r){he(this,a),this.name=r||"",this._prefix="[".concat(this.name,"]")}return oe(a,[{key:"warn",value:function(){var s;if(!a.disabled){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];(s=console).warn.apply(s,[this._prefix].concat(e))}}}],[{key:"enable",value:function(){a.disabled=!1}},{key:"disable",value:function(){a.disabled=!0}}]),a}();x(Vs,"disabled",!0);var Mi=typeof window<"u",Zt=Mi&&navigator.userAgent.toLocaleLowerCase(),aa=Mi&&/^((?!chrome|android).)*safari/.test(Zt),Nr=Mi&&Zt.includes("firefox"),Br=Mi&&Zt.includes("android"),Oe=function(){function a(){he(this,a)}return oe(a,null,[{key:"getRateIndexByRate",value:function(s){return a.FREQ.indexOf(s)}},{key:"parseADTS",value:function(s,i){for(var e=s.length,t=0;t+2<e&&!(s[t]===255&&(s[t+1]&246)===240);)t++;if(!(t>=e)){var n=t,l=[],h=(s[t+2]&60)>>>2,o=a.FREQ[h];if(!o)throw new Error("Invalid sampling index: ".concat(h));for(var u=((s[t+2]&192)>>>6)+1,p=(s[t+2]&1)<<2|(s[t+3]&192)>>>6,c=a._getConfig(h,p,u),k=c.config,f=c.codec,b,g,E=0,L=a.getFrameDuration(o);t+7<e;){if(s[t]!==255||(s[t+1]&246)!==240){t++;continue}if(g=(s[t+3]&3)<<11|s[t+4]<<3|(s[t+5]&224)>>5,e-t<g)break;b=(~s[t+1]&1)*2,l.push({pts:i+E*L,data:s.subarray(t+7+b,t+g)}),E++,t+=g}return{skip:n,remaining:t>=e?void 0:s.subarray(t),frames:l,samplingFrequencyIndex:h,sampleRate:o,objectType:u,channelCount:p,codec:f,config:k,originCodec:"mp4a.40.".concat(u)}}}},{key:"parseAudioSpecificConfig",value:function(s){if(s.length){var i=s[0]>>>3,e=(s[0]&7)<<1|s[1]>>>7,t=(s[1]&120)>>>3,n=a.FREQ[e];if(n){var l=a._getConfig(e,t,i),h=l.config,o=l.codec;return{samplingFrequencyIndex:e,sampleRate:n,objectType:i,channelCount:t,config:h,codec:o,originCodec:"mp4a.40.".concat(i)}}}}},{key:"getFrameDuration",value:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4;return 1024*i/s}},{key:"_getConfig",value:function(s,i,e){var t=[],n,l;return Nr?s>=6?(n=5,l=s-3):(n=2,l=s):Br?(n=2,l=s):(n=e===2||e===5?e:5,l=s,s>=6?l=s-3:i===1&&(n=2,l=s)),t[0]=n<<3,t[0]|=(s&14)>>1,t[1]=(s&1)<<7,t[1]|=i<<3,n===5&&(t[1]|=(l&14)>>1,t[2]=(l&1)<<7,t[2]|=8,t[3]=0),{config:t,codec:"mp4a.40.".concat(n)}}},{key:"getSilentFrame",value:function(s,i){switch(s){case"mp4a.40.2":if(i===1)return new Uint8Array([0,200,0,128,35,128]);if(i===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(i===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(i===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(i===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(i===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(i===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(i===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(i===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}]),a}();x(Oe,"FREQ",[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]);var Ur=500,jt=3,Ui=1e3,zi=5e3,zr=1e3,Ar=200,Qt=5e3,qt=5,Or=function(){function a(r,s,i){he(this,a),this.videoTrack=r,this.audioTrack=s,this.metadataTrack=i,this._baseDts=-1,this._baseDtsInited=!1,this._audioNextPts=void 0,this._videoNextDts=void 0,this._audioTimestampBreak=0,this._videoTimestampBreak=0,this._lastVideoDuration=0,this._keyFrameInNextChunk=!1,this._lastAudioExceptionGapDot=-1/0,this._lastAudioExceptionOverlapDot=-1/0,this._lastAudioExceptionLargeGapDot=-1/0,this._lastVideoExceptionLargeGapDot=-1/0,this._lastVideoExceptionChunkFirstDtsDot=-1/0}return oe(a,[{key:"fix",value:function(){var s=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;i=Math.round(i*1e3);var n=this.videoTrack,l=this.audioTrack;(e||!t)&&(this._videoLastSample=null,this._audioNextPts=void 0,this._videoNextDts=void 0,this._audioTimestampBreak=0,this._videoTimestampBreak=0,this._lastAudioExceptionGapDot=-1/0,this._lastAudioExceptionOverlapDot=-1/0,this._lastAudioExceptionLargeGapDot=-1/0,this._lastVideoExceptionLargeGapDot=-1/0,this._lastVideoExceptionChunkFirstDtsDot=-1/0),e&&!t&&(this._baseDtsInited=!1),this._baseDtsInited||this._calculateBaseDts(l,n),!t&&i&&(this._audioNextPts=this._videoNextDts=i);var h=this._baseDtsInited&&(this._videoTimestampBreak||!this.videoTrack.exist())&&(this._audioTimestampBreak||!this.audioTrack.exist());if(h&&this._resetBaseDtsWhenStreamBreaked(),this._fixAudio(l),this._keyFrameInNextChunk=!1,this._fixVideo(n),this.metadataTrack.exist()){var o=this.metadataTrack.timescale;this.metadataTrack.seiSamples.forEach(function(u){u.pts=u.originPts-s._baseDts,u.time=Math.max(0,u.pts)/o}),this.metadataTrack.flvScriptSamples.forEach(function(u){u.pts=u.originPts-s._baseDts,u.time=Math.max(0,u.pts)/o})}n.samples.length&&(n.baseMediaDecodeTime=n.samples[0].dts),l.samples.length&&(l.baseMediaDecodeTime=l.samples[0].pts*l.timescale/1e3)}},{key:"_fixVideo",value:function(s){var i=this,e=s.samples;if(e.length){e.forEach(function(L){L.dts-=i._baseDts,L.pts-=i._baseDts,L.keyframe&&(i._keyFrameInNextChunk=!0)});var t;if(s.fpsNum&&s.fpsDen)t=s.timescale*(s.fpsDen/s.fpsNum);else if(s.length>1){var n=s.samples[0],l=s.samples[e.length-1];t=Math.floor((l.dts-n.dts)/(e.length-1))}else t=this._lastVideoDuration||40;var h=e.pop();if(this._videoLastSample&&e.unshift(this._videoLastSample),this._videoLastSample=h,!!e.length){if(this._videoNextDts===void 0){var o=e[0];this._videoNextDts=o.dts}var u=e.length,p=0,c=e[0],k=this._videoNextDts-c.dts;if(Math.abs(k)>Ar){if(Math.abs(c.dts-this._lastVideoExceptionChunkFirstDtsDot)>Qt){var f;this._lastVideoExceptionChunkFirstDtsDot=c.dts,s.warnings.push({type:de.LARGE_VIDEO_GAP_BETWEEN_CHUNK,nextDts:this._videoNextDts,firstSampleDts:c.dts,nextSampleDts:(f=e[1])===null||f===void 0?void 0:f.dts,sampleDuration:k})}this._videoTimestampBreak>=qt?(this._videoNextDts=c.dts,this._videoTimestampBreak=0):(c.dts+=k,c.pts+=k,this.audioTrack.exist()||(this._videoTimestampBreak=1))}for(var b=0;b<u;b++){var g=e[b].dts,E=e[b+1];b<u-1?p=E.dts-g:h?p=h.dts-g:p=t,(p>zr||p<0)&&(this._videoTimestampBreak++,Math.abs(g-this._lastVideoExceptionLargeGapDot)>Qt&&(this._lastVideoExceptionLargeGapDot=g,s.warnings.push({type:de.LARGE_VIDEO_GAP,time:g/s.timescale,dts:g,originDts:e[b].originDts,nextDts:this._videoNextDts,sampleDuration:p,refSampleDuration:t})),p=t),e[b].duration=p,this._videoNextDts+=p,this._lastVideoDuration=p}}}}},{key:"_fixAudio",value:function(s){var i=this,e=s.samples;e.length&&(e.forEach(function(t){t.dts=t.pts-=i._baseDts}),this._doFixAudioInternal(s,e,1e3))}},{key:"_calculateBaseDts",value:function(s,i){var e=s.samples,t=i.samples;if(!e.length&&!t.length)return!1;var n=1/0,l=1/0;e.length&&(s.baseDts=n=e[0].pts),t.length&&(i.baseDts=l=t[0].dts),this._baseDts=Math.min(n,l);var h=l-n;return Number.isFinite(h)&&Math.abs(h)>Ur&&i.warnings.push({type:de.LARGE_AV_SHIFT,videoBaseDts:l,audioBasePts:n,baseDts:this._baseDts,delta:h}),this._baseDtsInited=!0,!0}},{key:"_resetBaseDtsWhenStreamBreaked",value:function(){var s=this._calculateBaseDts(this.audioTrack,this.videoTrack);s&&(this.audioTrack.exist()?this.videoTrack.exist()?this._baseDts-=Math.min(this._audioNextPts,this._videoNextDts):this._baseDts-=this._audioNextPts:this._baseDts-=this._videoNextDts,this._videoTimestampBreak=0,this._audioTimestampBreak=0)}},{key:"_doFixAudioInternal",value:function(s,i,e){s.sampleDuration||(s.sampleDuration=s.codecType===os.AAC?Oe.getFrameDuration(s.timescale,e):this._getG711Duration(s));var t=s.sampleDuration,n=s.codecType===os.AAC?1024:t*s.timescale/1e3;if(this._audioNextPts===void 0){var l=i[0];this._audioNextPts=l.pts}for(var h=0;h<i.length;h++){var o=this._audioNextPts,u=i[h],p=u.pts-o;if(h===0&&this._audioTimestampBreak>=qt&&this._keyFrameInNextChunk&&(o=this._audioNextPts=u.dts,p=0,this._audioTimestampBreak=0),!this._audioTimestampBreak&&p>=jt*t&&p<=Ui&&!aa){var c=this._getSilentFrame(s)||i[0].data.subarray(),k=Math.floor(p/t);Math.abs(u.pts-this._lastAudioExceptionGapDot)>zi&&(this._lastAudioExceptionGapDot=u.pts,s.warnings.push({type:de.AUDIO_FILLED,pts:u.pts,originPts:u.originPts,count:k,nextPts:o,refSampleDuration:t}));for(var f=0;f<k;f++){var b=new gs(Math.floor(this._audioNextPts+t)-Math.floor(this._audioNextPts),c,n);b.originPts=Math.floor(this._baseDts+o),i.splice(h,0,b),this._audioNextPts+=t,h++}h--}else p<=-jt*t&&p>=-1*Ui?(Math.abs(u.pts-this._lastAudioExceptionOverlapDot)>zi&&(this._lastAudioExceptionOverlapDot=u.pts,s.warnings.push({type:de.AUDIO_DROPPED,pts:u.pts,originPts:u.originPts,nextPts:o,refSampleDuration:t})),i.splice(h,1),h--):(Math.abs(p)>Ui&&(this._audioTimestampBreak++,Math.abs(u.pts-this._lastAudioExceptionLargeGapDot)>zi&&(this._lastAudioExceptionLargeGapDot=u.pts,s.warnings.push({type:de.LARGE_AUDIO_GAP,time:u.pts/1e3,pts:u.pts,originPts:u.originPts,nextPts:o,sampleDuration:p,refSampleDuration:t}))),u.dts=u.pts=o,u.duration=n,this._audioNextPts+=t)}}},{key:"_getG711Duration",value:function(s){var i=s.sampleSize,e=s.channelCount,t=s.sampleRate,n=s.samples[0];if(n)return n.data.byteLength*2/e/(i/8)/t*1e3}},{key:"_getSilentFrame",value:function(s){return s.codecType===os.AAC?Oe.getSilentFrame(s.codec,s.channelCount):new Uint8Array(8*s.sampleDuration*s.channelCount)}}]),a}();function Be(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];r=r.filter(Boolean);var i=new Uint8Array(r.reduce(function(t,n){return t+n.byteLength},0)),e=0;return r.forEach(function(t){i.set(t,e),e+=t.byteLength}),i}var Jr=Math.pow(2,32);function ue(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a[r]<<8)+(a[r+1]||0)}function jr(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a[r]<<16)+(a[r+1]<<8)+(a[r+2]||0)}function H(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a[r]<<24>>>0)+(a[r+1]<<16)+(a[r+2]<<8)+(a[r+3]||0)}function vs(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return H(a,r)*Jr+H(a,r+4)}function ra(a){for(var r="avc1.",s,i=0;i<3;i++)s=a[i].toString(16),s.length<2&&(s="0".concat(s)),r+=s;return r}function Qr(a){var r="";if(a.forEach(function(e){r+=qr(e)}),r.length<=32)for(var s=32-r.length,i=0;i<s;i++)r+="0";return r}function $t(a){if(!Array.isArray(a)){for(var r=[],s="",i=0;i<a.length;i++)i%2&&(s=a[i-1]+a[i],r.push(parseInt(s,16)),s="");return r}return a.map(function(e){return parseInt(e,16)})}function qr(a){return("0"+Number(a).toString(16)).slice(-2).toUpperCase()}var ts=function(){function a(){he(this,a)}return oe(a,null,[{key:"parseAnnexB",value:function(s){for(var i=s.length,e=2,t=0;s[e]!==null&&s[e]!==void 0&&s[e]!==1;)e++;if(e++,t=e+2,t>=i)return[];for(var n=[];t<i;)switch(s[t]){case 0:if(s[t-1]!==0){t+=2;break}else if(s[t-2]!==0){t++;break}e!==t-2&&n.push(s.subarray(e,t-2));do t++;while(s[t]!==1&&t<i);e=t+1,t=e+2;break;case 1:if(s[t-1]!==0||s[t-2]!==0){t+=3;break}e!==t-2&&n.push(s.subarray(e,t-2)),e=t+1,t=e+2;break;default:t+=3;break}return e<i&&n.push(s.subarray(e)),n}},{key:"parseAvcC",value:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;if(!(s.length<4)){for(var e=s.length,t=[],n=0,l;n+i<e;)if(l=H(s,n),i===3&&(l>>>=8),n+=i,!!l){if(n+l>e)break;t.push(s.subarray(n,n+l)),n+=l}return t}}},{key:"parseSEI",value:function(s,i){for(var e=s.length,t=i?2:1,n=0,l=0,h="";s[t]===255;)n+=255,t++;for(n+=s[t++];s[t]===255;)l+=255,t++;if(l+=s[t++],n===5&&e>t+16)for(var o=0;o<16;o++)h+=s[t].toString(16),t++;return{payload:s.subarray(t),type:n,size:l,uuid:h}}},{key:"removeEPB",value:function(s){for(var i=s.byteLength,e=[],t=1;t<i-2;)s[t]===0&&s[t+1]===0&&s[t+2]===3?(e.push(t+2),t+=2):t++;if(!e.length)return s;var n=i-e.length,l=new Uint8Array(n),h=0;for(t=0;t<n;h++,t++)h===e[0]&&(h++,e.shift()),l[t]=s[h];return l}}]),a}(),ht=function(){function a(r){if(he(this,a),x(this,"_bytesAvailable",void 0),x(this,"_bitsAvailable",0),x(this,"_word",0),!r)throw new Error("ExpGolomb data params is required");this._data=r,this._bytesAvailable=r.byteLength,this._bytesAvailable&&this._loadWord()}return oe(a,[{key:"_loadWord",value:function(){var s=this._data.byteLength-this._bytesAvailable,i=Math.min(4,this._bytesAvailable);if(i===0)throw new Error("No bytes available");var e=new Uint8Array(4);e.set(this._data.subarray(s,s+i)),this._word=new DataView(e.buffer).getUint32(0),this._bitsAvailable=i*8,this._bytesAvailable-=i}},{key:"skipBits",value:function(s){if(this._bitsAvailable>s)this._word<<=s,this._bitsAvailable-=s;else{s-=this._bitsAvailable;var i=Math.floor(s/8);s-=i*8,this._bytesAvailable-=i,this._loadWord(),this._word<<=s,this._bitsAvailable-=s}}},{key:"readBits",value:function(s){if(s>32)throw new Error("Cannot read more than 32 bits");var i=Math.min(this._bitsAvailable,s),e=this._word>>>32-i;return this._bitsAvailable-=i,this._bitsAvailable>0?this._word<<=i:this._bytesAvailable>0&&this._loadWord(),i=s-i,i>0&&this._bitsAvailable?e<<i|this.readBits(i):e}},{key:"skipLZ",value:function(){var s;for(s=0;s<this._bitsAvailable;++s)if(this._word&2147483648>>>s)return this._word<<=s,this._bitsAvailable-=s,s;return this._loadWord(),s+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var s=this.skipLZ();return this.readBits(s+1)-1}},{key:"readEG",value:function(){var s=this.readUEG();return 1&s?1+s>>>1:-1*(s>>>1)}},{key:"readBool",value:function(){return this.readBits(1)===1}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"skipScalingList",value:function(s){for(var i=8,e=8,t,n=0;n<s;n++)e!==0&&(t=this.readEG(),e=(i+t+256)%256),i=e===0?i:e}}]),a}(),la=function(){function a(){he(this,a)}return oe(a,null,[{key:"parseAVCDecoderConfigurationRecord",value:function(s){if(!(s.length<7)){for(var i=(s[4]&3)+1,e,t=[],n=[],l=6,h=s[5]&31,o,u=0;u<h;u++)if(o=s[l]<<8|s[l+1],l+=2,!!o){var p=s.subarray(l,l+o);l+=o,t.push(p),e||(e=a.parseSPS(ts.removeEPB(p)))}var c=s[l];l++;for(var k,f=0;f<c;f++)k=s[l]<<8|s[l+1],l+=2,k&&(n.push(s.subarray(l,l+k)),l+=k);return{sps:e,spsArr:t,ppsArr:n,nalUnitSize:i}}}},{key:"parseSPS",value:function(s){var i=new ht(s);i.readUByte();var e=i.readUByte(),t=i.readUByte(),n=i.readUByte();i.skipUEG();var l=420;if(e===100||e===110||e===122||e===244||e===44||e===83||e===86||e===118||e===128||e===138||e===144){var h=i.readUEG();if(h<=3&&(l=[0,420,422,444][h]),h===3&&i.skipBits(1),i.skipUEG(),i.skipUEG(),i.skipBits(1),i.readBool())for(var o=h!==3?8:12,u=0;u<o;u++)i.readBool()&&(u<6?i.skipScalingList(16):i.skipScalingList(64))}i.skipUEG();var p=i.readUEG();if(p===0)i.readUEG();else if(p===1){i.skipBits(1),i.skipUEG(),i.skipUEG();for(var c=i.readUEG(),k=0;k<c;k++)i.skipUEG()}i.skipUEG(),i.skipBits(1);var f=i.readUEG(),b=i.readUEG(),g=i.readBits(1);g===0&&i.skipBits(1),i.skipBits(1);var E=0,L=0,C=0,F=0;i.readBool()&&(E=i.readUEG(),L=i.readUEG(),C=i.readUEG(),F=i.readUEG());var Z,X,T,G,Y;if(i.readBool()){if(i.readBool()){var M=i.readUByte();switch(M){case 1:Z=[1,1];break;case 2:Z=[12,11];break;case 3:Z=[10,11];break;case 4:Z=[16,11];break;case 5:Z=[40,33];break;case 6:Z=[24,11];break;case 7:Z=[20,11];break;case 8:Z=[32,11];break;case 9:Z=[80,33];break;case 10:Z=[18,11];break;case 11:Z=[15,11];break;case 12:Z=[64,33];break;case 13:Z=[160,99];break;case 14:Z=[4,3];break;case 15:Z=[3,2];break;case 16:Z=[2,1];break;case 255:{Z=[i.readUByte()<<8|i.readUByte(),i.readUByte()<<8|i.readUByte()];break}}}if(i.readBool()&&i.readBool(),i.readBool()&&(i.readBits(4),i.readBool()&&i.readBits(24)),i.readBool()&&(i.readUEG(),i.readUEG()),i.readBool()){var N=i.readBits(32),m=i.readBits(32);X=i.readBool(),T=m,G=N*2,Y=T/G}}return{codec:ra(s.subarray(1,4)),profileIdc:e,profileCompatibility:t,levelIdc:n,chromaFormat:l,width:Math.ceil((f+1)*16-2*(E+L)),height:(2-g)*(b+1)*16-(g?2:4)*(C+F),sarRatio:Z,fpsNum:T,fpsDen:G,fps:Y,fixedFrame:X}}}]),a}(),ot=function(){function a(){he(this,a)}return oe(a,null,[{key:"parseHEVCDecoderConfigurationRecord",value:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(s.length<23)){i=i||{};for(var e=(s[21]&3)+1,t,n,l=[],h=[],o=[],u=23,p=s[22],c,k,f,b=0;b<p;b++){c=s[u]&63,k=s[u+1]<<8|s[u+2],u+=3;for(var g=0;g<k;g++)if(f=s[u]<<8|s[u+1],u+=2,!!f){switch(c){case 32:{var E=s.subarray(u,u+f);t||(t=a.parseVPS(ts.removeEPB(E),i)),o.push(E)}break;case 33:{var L=s.subarray(u,u+f);n||(n=a.parseSPS(ts.removeEPB(L),i)),l.push(L)}break;case 34:h.push(s.subarray(u,u+f));break}u+=f}}return{hvcC:i,sps:n,spsArr:l,ppsArr:h,vpsArr:o,nalUnitSize:e}}}},{key:"parseVPS",value:function(s,i){i=i||{};var e=new ht(s);e.readUByte(),e.readUByte(),e.readBits(12);var t=e.readBits(3);return i.numTemporalLayers=Math.max(i.numTemporalLayers||0,t+1),e.readBits(17),a._parseProfileTierLevel(e,t,i),i}},{key:"parseSPS",value:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i=i||{};var e=new ht(s);e.readUByte(),e.readUByte(),e.readBits(4);var t=e.readBits(3);i.numTemporalLayers=Math.max(t+1,i.numTemporalLayers||0),i.temporalIdNested=e.readBits(1),a._parseProfileTierLevel(e,t,i),e.readUEG();var n=i.chromaFormatIdc=e.readUEG(),l=420;n<=3&&(l=[0,420,422,444][n]);var h=0;n===3&&(h=e.readBits(1));var o=e.readUEG(),u=e.readUEG(),p=e.readBits(1),c,k,f,b;if(p===1&&(c=e.readUEG(),k=e.readUEG(),f=e.readUEG(),b=e.readUEG()),i.bitDepthLumaMinus8=e.readUEG(),i.bitDepthChromaMinus8=e.readUEG(),p===1){var g=(n===1||n===2)&&h===0?2:1,E=n===1&&h===0?2:1;o-=g*(k+c),u-=E*(b+f)}return{codec:"hev1.1.6.L93.B0",width:o,height:u,chromaFormat:l,hvcC:i}}},{key:"_parseProfileTierLevel",value:function(s,i,e){var t=e.generalTierFlag||0;e.generalProfileSpace=s.readBits(2),e.generalTierFlag=Math.max(s.readBits(1),t),e.generalProfileIdc=Math.max(s.readBits(5),e.generalProfileIdc||0),e.generalProfileCompatibilityFlags=s.readBits(32),e.generalConstraintIndicatorFlags=[s.readBits(8),s.readBits(8),s.readBits(8),s.readBits(8),s.readBits(8),s.readBits(8)];var n=s.readBits(8);t<e.generalTierFlag?e.generalLevelIdc=n:e.generalLevelIdc=Math.max(n,e.generalLevelIdc||0);for(var l=[],h=[],o=0;o<i;o++)l[o]=s.readBits(1),h[o]=s.readBits(1);i>0&&s.readBits((8-i)*2);for(var u=0;u<i;u++)l[u]!==0&&(s.readBits(2),s.readBits(1),s.readBits(5),s.readBits(16),s.readBits(16),s.readBits(4),s.readBits(16),s.readBits(16),s.readBits(12)),h[u]!==0&&s.readBits(8)}}]),a}(),en=function(){function a(){he(this,a)}return oe(a,null,[{key:"decode",value:function(s){for(var i=[],e=s,t=0,n=s.length;t<n;){if(e[t]<128){i.push(String.fromCharCode(e[t])),++t;continue}else if(!(e[t]<192)){if(e[t]<224){if(a._checkContinuation(e,t,1)){var l=(e[t]&31)<<6|e[t+1]&63;if(l>=128){i.push(String.fromCharCode(l&65535)),t+=2;continue}}}else if(e[t]<240){if(a._checkContinuation(e,t,2)){var h=(e[t]&15)<<12|(e[t+1]&63)<<6|e[t+2]&63;if(h>=2048&&(h&63488)!==55296){i.push(String.fromCharCode(h&65535)),t+=3;continue}}}else if(e[t]<248&&a._checkContinuation(e,t,3)){var o=(e[t]&7)<<18|(e[t+1]&63)<<12|(e[t+2]&63)<<6|e[t+3]&63;if(o>65536&&o<1114112){o-=65536,i.push(String.fromCharCode(o>>>10|55296)),i.push(String.fromCharCode(o&1023|56320)),t+=4;continue}}}i.push("�"),++t}return i.join("")}},{key:"_checkContinuation",value:function(s,i,e){var t=s;if(i+e<t.length){for(;e--;)if((t[++i]&192)!==128)return!1;return!0}else return!1}}]),a}(),$r=function(){function a(){he(this,a)}return oe(a,null,[{key:"parse",value:function(s){if(!(s.length<3)){var i={},e=a._parseValue(new DataView(s.buffer,s.byteOffset,s.byteLength)),t=a._parseValue(new DataView(s.buffer,s.byteOffset+e.size,s.byteLength-e.size));return i[e.data]=t.data,i}}},{key:"_parseValue",value:function(s){var i=s.byteLength,e=s.getUint8(0),t=1,n=!1,l;switch(e){case 0:l=s.getFloat64(1),t+=8;break;case 1:{l=!!s.getUint8(1),t+=1;break}case 2:{var h=a._parseString(new DataView(s.buffer,s.byteOffset+t,s.byteLength-t)),o=h.data,u=h.size;l=o,t+=u}break;case 3:{l={};var p=0;for((s.getUint32(i-4)&16777215)===9&&(p=3);t<i-4;){var c=a._parseObject(new DataView(s.buffer,s.byteOffset+t,s.byteLength-t-p)),k=c.size,f=c.data,b=c.isEnd;if(b)break;l[f.name]=f.value,t+=k}if(t<=i-3){var g=s.getUint32(t-1)&16777215;g===9&&(t+=3)}}break;case 8:{l={},t+=4;var E=0;for((s.getUint32(i-4)&16777215)===9&&(E=3);t<i-8;){var L=a._parseObject(new DataView(s.buffer,s.byteOffset+t,s.byteLength-t-E)),C=L.size,F=L.data,Z=L.isEnd;if(Z)break;l[F.name]=F.value,t+=C}if(t<=i-3){var X=s.getUint32(t-1)&16777215;X===9&&(t+=3)}}break;case 9:l=void 0,t=1,n=!0;break;case 10:{l=[];var T=s.getUint32(1);t+=4;for(var G=0;G<T;G++){var Y=a._parseValue(new DataView(s.buffer,s.byteOffset+t,s.byteLength-t)),M=Y.data,N=Y.size;l.push(M),t+=N}}break;case 11:{var m=s.getFloat64(t)+s.getInt16(t+8)*6e4;l=new Date(m),t+=10}break;case 12:{var d=s.getUint32(1);t+=4,l="",d>0&&(l=en.decode(new Uint8Array(s.buffer,s.byteOffset+t,d))),t+=d}break;default:t=i;break}return{data:l,size:t,isEnd:n}}},{key:"_parseString",value:function(s){var i=s.getUint16(0),e="";return i>0&&(e=en.decode(new Uint8Array(s.buffer,s.byteOffset+2,i))),{data:e,size:2+i}}},{key:"_parseObject",value:function(s){if(!(s.byteLength<3)){var i=a._parseString(s),e=a._parseValue(new DataView(s.buffer,s.byteOffset+i.size,s.byteLength-i.size));return{data:{name:i.data,value:e.data},size:i.size+e.size,isEnd:e.isEnd}}}}]),a}(),ps=new Vs("FlvDemuxer"),ha=function(){function a(r,s,i){he(this,a),x(this,"_headerParsed",!1),x(this,"_remainingData",null),x(this,"_gopId",0),x(this,"_needAddMetaBeforeKeyFrameNal",!0),this.videoTrack=r||new Ri,this.audioTrack=s||new xi,this.metadataTrack=i||new Vi,this._fixer=new Or(this.videoTrack,this.audioTrack,this.metadataTrack)}return oe(a,[{key:"demux",value:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,t=this.audioTrack,n=this.videoTrack,l=this.metadataTrack;if((i||!e)&&(this._remainingData=null,this._headerParsed=!1),i?(n.reset(),t.reset(),l.reset()):(n.samples=[],t.samples=[],l.seiSamples=[],l.flvScriptSamples=[],n.warnings=[],t.warnings=[],this._remainingData&&(s=Be(this._remainingData,s),this._remainingData=null)),!s.length)return{videoTrack:n,audioTrack:t,metadataTrack:l};var h=0;if(!this._headerParsed){if(!a.probe(s))throw new Error("Invalid flv file");t.present=(s[4]&4)>>>2!==0,n.present=(s[4]&1)!==0,this._headerParsed=!0,h=H(s,5)+4}for(var o=s.length,u,p,c,k,f;h+15<o&&(u=s[h],p=s[h+1]<<16|s[h+2]<<8|s[h+3],!(h+15+p>o));)c=(s[h+7]<<24>>>0)+(s[h+4]<<16)+(s[h+5]<<8)+s[h+6],h+=11,k=s.subarray(h,h+p),u===8?this._parseAudio(k,c):u===9?this._parseVideo(k,c):u===18?this._parseScript(k,c):ps.warn("Invalid tag type: ".concat(u)),h+=p,f=H(s,h),f!==11+p&&ps.warn("Invalid PrevTagSize ".concat(f," (").concat(11+p,")")),h+=4;return h<o&&(this._remainingData=s.subarray(h)),t.formatTimescale=n.formatTimescale=n.timescale=l.timescale=1e3,t.timescale=t.sampleRate||0,!t.exist()&&t.hasSample()&&t.reset(),!n.exist()&&n.hasSample()&&n.reset(),{videoTrack:n,audioTrack:t,metadataTrack:l}}},{key:"fix",value:function(s,i,e){return this._fixer.fix(s,i,e),{videoTrack:this.videoTrack,audioTrack:this.audioTrack,metadataTrack:this.metadataTrack}}},{key:"demuxAndFix",value:function(s,i,e,t){return this.demux(s,i,e),this.fix(t,i,e)}},{key:"_parseAudio",value:function(s,i){if(s.length){var e=(s[0]&240)>>>4,t=this.audioTrack;if(e!==10&&e!==7&&e!==8){ps.warn("Unsupported sound format: ".concat(e)),t.reset();return}if(e!==10){var n=(s[0]&12)>>2,l=(s[0]&2)>>1,h=s[0]&1;t.sampleRate=a.AUDIO_RATE[n],t.sampleSize=l?16:8,t.channelCount=h+1}e===10?this._parseAac(s,i):this._parseG711(s,i,e)}}},{key:"_parseG711",value:function(s,i,e){var t=this.audioTrack;t.codecType=e===7?os.G711PCMA:os.G711PCMU,t.sampleRate=8e3,t.codec=t.codecType,t.samples.push(new gs(i,s.subarray(1)))}},{key:"_parseAac",value:function(s,i){var e=this.audioTrack;if(e.codecType=os.AAC,s[1]===0){var t=Oe.parseAudioSpecificConfig(s.subarray(2));t?(e.codec=t.codec,e.channelCount=t.channelCount,e.sampleRate=t.sampleRate,e.config=t.config,e.objectType=t.objectType,e.sampleRateIndex=t.samplingFrequencyIndex):(e.reset(),ps.warn("Cannot parse AudioSpecificConfig",s))}else if(s[1]===1){if(i==null)return;e.samples.push(new gs(i,s.subarray(2)))}else ps.warn("Unknown AACPacketType: ".concat(s[1]))}},{key:"_parseVideo",value:function(s,i){var e=this;if(!(s.length<6)){var t=(s[0]&240)>>>4,n=s[0]&15,l=this.videoTrack;if(n!==7&&n!==12){l.reset(),ps.warn("Unsupported codecId: ".concat(n));return}var h=n===12;l.codecType=h?ys.HEVC:ys.AVC;var o=s[1],u=(s[2]<<16|s[3]<<8|s[4])<<8>>8;if(o===0){var p=s.subarray(5),c=h?ot.parseHEVCDecoderConfigurationRecord(p):la.parseAVCDecoderConfigurationRecord(p);if(c){var k=c.hvcC,f=c.sps,b=c.ppsArr,g=c.spsArr,E=c.vpsArr,L=c.nalUnitSize;k&&(l.hvcC=l.hvcC||k),f&&(l.codec=f.codec,l.width=f.width,l.height=f.height,l.sarRatio=f.sarRatio,l.fpsNum=f.fpsNum,l.fpsDen=f.fpsDen),g.length&&(l.sps=g),b.length&&(l.pps=b),E&&E.length&&(l.vps=E),L&&(l.nalUnitSize=L)}else ps.warn("Cannot parse ".concat(h?"HEVC":"AVC","DecoderConfigurationRecord"),s)}else if(o===1){var C=ts.parseAvcC(s.subarray(5),l.nalUnitSize);if(C=this._checkAddMetaNalToUnits(h,C,l),C&&C.length){var F=new ei(i+u,i,C);t===1&&F.setToKeyframe(),l.samples.push(F),C.forEach(function(Z){var X=h?Z[0]>>>1&63:Z[0]&31;switch(X){case 5:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:if(!h&&X!==5||h&&X===5)break;F.setToKeyframe();break;case 6:case 39:case 40:if(!h&&X!==6||h&&X===6)break;e.metadataTrack.seiSamples.push(new na(ts.parseSEI(ts.removeEPB(Z),h),i+u));break}}),F.keyframe&&this._gopId++,F.gopId=this._gopId}else ps.warn("Cannot parse NALUs",s)}else o===2||ps.warn("Unknown AVCPacketType: ".concat(o))}}},{key:"_checkAddMetaNalToUnits",value:function(s,i,e){if(!s||!this._needAddMetaBeforeKeyFrameNal)return this._needAddMetaBeforeKeyFrameNal=!1,i;var t=i.map(function(n){return n[0]>>>1&63});return t.includes(32)?(this._needAddMetaBeforeKeyFrameNal=!1,i):(i.unshift(e.pps[0]),i.unshift(e.sps[0]),i.unshift(e.vps[0]),i.filter(Boolean))}},{key:"_parseScript",value:function(s,i){this.metadataTrack.flvScriptSamples.push(new Hr($r.parse(s),i))}}],[{key:"probe",value:function(s){return s[0]!==70||s[1]!==76||s[2]!==86||s[3]!==1?!1:H(s,5)>=9}}]),a}();x(ha,"AUDIO_RATE",[5500,11e3,22e3,44e3]);var el=9e4/2,sn=3,Ai=9e4,Oi=5*9e4,Ji=9e4,sl=9e4/2,il=function(){function a(r,s,i){he(this,a),this.videoTrack=r,this.audioTrack=s,this.metadataTrack=i,this._baseDts=-1,this._baseDtsInited=!1,this._audioNextPts=void 0,this._videoNextDts=void 0,this._audioTimestampBreak=!1,this._videoTimestampBreak=!1,this._lastAudioExceptionGapDot=0,this._lastAudioExceptionOverlapDot=0,this._lastAudioExceptionLargeGapDot=0}return oe(a,[{key:"fix",value:function(){var s=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;i=Math.round(i*9e4);var n=this.videoTrack,l=this.audioTrack,h=n.samples,o=l.samples;if(!(!h.length&&!o.length)){var u=h[0],p=o[0],c=0;if(h.length&&o.length&&(c=u.dts-p.pts),this._baseDtsInited||this._calculateBaseDts(this.audioTrack,this.videoTrack),e&&(this._calculateBaseDts(this.audioTrack,this.videoTrack),this._baseDts-=i),!t){this._videoNextDts=c>0?i+c:i,this._audioNextPts=c>0?i:i-c;var k=u?u.dts-this._baseDts-this._videoNextDts:0,f=p?p.pts-this._baseDts-this._audioNextPts:0;Math.abs(k||f)>Ji&&(this._calculateBaseDts(this.audioTrack,this.videoTrack),this._baseDts-=i)}if(this._resetBaseDtsWhenStreamBreaked(),this._fixAudio(l),this._fixVideo(n),this.metadataTrack.exist()){var b=this.metadataTrack.timescale;this.metadataTrack.seiSamples.forEach(function(g){g.pts=g.originPts-s._baseDts,g.time=Math.max(0,g.pts)/b})}n.samples.length&&(n.baseMediaDecodeTime=n.samples[0].dts),l.samples.length&&(l.baseMediaDecodeTime=l.samples[0].pts*l.timescale/9e4)}}},{key:"_fixVideo",value:function(s){var i=this,e=s.samples;if(e.length){if(e.forEach(function(C){C.dts-=i._baseDts,C.pts-=i._baseDts}),this._videoNextDts===void 0){var t=e[0];this._videoNextDts=t.dts}var n=e.length,l=0,h=e[0],o=e[1],u=this._videoNextDts-h.dts;if(Math.abs(u)>sl){var p;s.warnings.push({type:de.LARGE_VIDEO_GAP_BETWEEN_CHUNK,nextDts:this._videoNextDts/90,firstSampleDts:h.dts/90,nextSampleDts:(((p=e[1])===null||p===void 0?void 0:p.dts)||0)/90,sampleDuration:u/90}),h.dts+=u,h.pts+=u,o&&Math.abs(o.dts-h.dts)>Ji&&(this._videoTimestampBreak=!0,e.forEach(function(C,F){F!==0&&(C.dts+=u,C.pts+=u)}))}var c;if(s.fpsNum&&s.fpsDen)c=s.timescale*(s.fpsDen/s.fpsNum);else{var k=s.samples[0],f=s.samples[n-1];c=n===1?9e3:Math.floor((f.dts-k.dts)/(n-1))}for(var b=0;b<n;b++){var g=e[b].dts,E=e[b+1];if(b<n-1?l=E.dts-g:e[b-1]?l=Math.min(g-e[b-1].dts,c):l=c,l>Ji||l<0){this._videoTimestampBreak=!0,l=this._audioTimestampBreak?c:Math.max(l,30*90);var L=this._audioNextPts||0;E&&E.dts>L&&(l=c),s.warnings.push({type:de.LARGE_VIDEO_GAP,time:g/s.timescale,dts:g,originDts:e[b].originDts,nextDts:this._videoNextDts,sampleDuration:l,refSampleDuration:c})}e[b].duration=l,this._videoNextDts+=l}}}},{key:"_fixAudio",value:function(s){var i=this,e=s.samples;e.length&&(e.forEach(function(t){t.pts-=i._baseDts,t.dts=t.pts}),this._doFixAudioInternal(s,e,9e4))}},{key:"_calculateBaseDts",value:function(s,i){var e=s.samples,t=i.samples;if(!e.length&&!t.length)return!1;var n=1/0,l=1/0;e.length&&(s.baseDts=n=e[0].pts),t.length&&(i.baseDts=l=t[0].dts),this._baseDts=Math.min(n,l);var h=l-n;return Number.isFinite(h)&&Math.abs(h)>el&&i.warnings.push({type:de.LARGE_AV_SHIFT,videoBaseDts:l,audioBasePts:n,baseDts:this._baseDts,delta:h}),this._baseDtsInited=!0,!0}},{key:"_resetBaseDtsWhenStreamBreaked",value:function(){if(this._baseDtsInited&&this._videoTimestampBreak&&this._audioTimestampBreak){var s=this._calculateBaseDts(this.audioTrack,this.videoTrack);if(!s)return;this._baseDts-=Math.min(this._audioNextPts,this._videoNextDts),this._audioLastSample=null,this._videoLastSample=null,this._videoTimestampBreak=!1,this._audioTimestampBreak=!1}}},{key:"_doFixAudioInternal",value:function(s,i,e){s.sampleDuration||(s.sampleDuration=Oe.getFrameDuration(s.timescale,e));var t=s.sampleDuration;if(this._audioNextPts===void 0){var n=i[0];this._audioNextPts=n.pts}for(var l=0;l<i.length;l++){var h=this._audioNextPts,o=i[l],u=o.pts-h;if(!this._audioTimestampBreak&&u>=sn*t&&u<=Ai&&!aa){var p=Oe.getSilentFrame(s.codec,s.channelCount)||i[0].data.subarray(),c=Math.floor(u/t);Math.abs(o.pts-this._lastAudioExceptionGapDot)>Oi&&(this._lastAudioExceptionGapDot=o.pts),s.warnings.push({type:de.AUDIO_FILLED,pts:o.pts,originPts:o.originPts,count:c,nextPts:h,refSampleDuration:t});for(var k=0;k<c;k++){var f=new gs(Math.floor(h),p);f.originPts=Math.floor(this._baseDts+h),i.splice(l,0,f),this._audioNextPts+=t,l++}l--}else u<=-sn*t&&u>=-1*Ai?(Math.abs(o.pts-this._lastAudioExceptionOverlapDot)>Oi&&(this._lastAudioExceptionOverlapDot=o.pts,s.warnings.push({type:de.AUDIO_DROPPED,pts:o.pts,originPts:o.originPts,nextPts:h,refSampleDuration:t})),i.splice(l,1),l--):(Math.abs(u)>=Ai&&(this._audioTimestampBreak=!0,Math.abs(o.pts-this._lastAudioExceptionLargeGapDot)>Oi&&(this._lastAudioExceptionLargeGapDot=o.pts,s.warnings.push({type:de.LARGE_AUDIO_GAP,time:o.pts/1e3,pts:o.pts,originPts:o.originPts,nextPts:h,sampleDuration:u,refSampleDuration:t}))),o.dts=o.pts=h,this._audioNextPts+=t)}}}]),a}(),Qe=new Vs("TsDemuxer"),oa=function(){function a(r,s,i){he(this,a),x(this,"_pmtId",-1),x(this,"_remainingPacketData",null),x(this,"_videoPesData",[]),x(this,"_audioPesData",[]),x(this,"_gopId",0),this.videoTrack=r||new Ri,this.audioTrack=s||new xi,this.metadataTrack=i||new Vi,this._fixer=new il(this.videoTrack,this.audioTrack,this.metadataTrack)}return oe(a,[{key:"demux",value:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,t=this.audioTrack,n=this.videoTrack,l=this.metadataTrack;i&&(this._pmtId=-1,n.reset(),t.reset(),l.reset()),!e||i?(this._remainingPacketData=null,this._videoPesData=[],this._audioPesData=[]):(n.samples=[],t.samples=[],l.seiSamples=[],n.warnings=[],t.warnings=[],this._remainingPacketData&&(s=Be(this._remainingPacketData,s),this._remainingPacketData=null));var h=s.length,o=h%188;o&&(this._remainingPacketData=s.subarray(h-o),h-=o);for(var u=n.pid,p=t.pid,c=0;c<h;c+=188){if(s[c]!==71)throw new Error("TS packet did not start with 0x47");var k=!!(s[c+1]&64),f=((s[c+1]&31)<<8)+s[c+2],b=(s[c+3]&48)>>4,g=void 0;if(b>1){if(g=c+5+s[c+4],g===c+188)continue}else g=c+4;switch(f){case 0:k&&(g+=s[g]+1),this._pmtId=(s[g+10]&31)<<8|s[g+11];break;case this._pmtId:{k&&(g+=s[g]+1);var E=g+3+((s[g+1]&15)<<8|s[g+2])-4,L=(s[g+10]&15)<<8|s[g+11];for(g+=12+L;g<E;){var C=(s[g+1]&31)<<8|s[g+2];switch(s[g]){case 15:t.pid=p=C;break;case 27:if(u!==-1)break;n.codecType=ys.AVC,n.pid=u=C;break;case 36:if(u!==-1)break;n.codecType=ys.HEVC,n.pid=u=C;break;default:Qe.warn("Unsupported stream. type: ".concat(s[g],", pid: ").concat(C))}g+=((s[g+3]&15)<<8|s[g+4])+5}}break;case u:k&&this._videoPesData.length&&this._parseVideoData(),this._videoPesData.push(s.subarray(g,c+188));break;case p:k&&this._audioPesData.length&&this._parseAudioData(),this._audioPesData.push(s.subarray(g,c+188));break;case 17:case 8191:break;default:Qe.warn("Unknown pid: ".concat(f))}}return this._parseVideoData(),this._parseAudioData(),t.formatTimescale=n.formatTimescale=n.timescale=l.timescale=9e4,t.timescale=t.sampleRate||0,{videoTrack:n,audioTrack:t,metadataTrack:l}}},{key:"fix",value:function(s,i,e){return this._fixer.fix(s,i,e),{videoTrack:this.videoTrack,audioTrack:this.audioTrack,metadataTrack:this.metadataTrack}}},{key:"demuxAndFix",value:function(s,i,e,t){return this.demux(s,i,e),this.fix(t,i,e)}},{key:"_parseVideoData",value:function(){if(this._videoPesData.length){var s=a._parsePES(Be.apply(void 0,Xe(this._videoPesData)));if(!s){Qe.warn("Cannot parse video pes",this._videoPesData);return}var i=ts.parseAnnexB(s.data);i?this._createVideoSample(i,s.pts,s.dts):Qe.warn("Cannot parse avc units",s),this._videoPesData=[]}}},{key:"_createVideoSample",value:function(s,i,e){var t=this;if(s.length){var n=this.videoTrack,l=n.codecType===ys.HEVC,h=new ei(i,e);s.forEach(function(o){var u=l?o[0]>>>1&63:o[0]&31;switch(u){case 5:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:if(!l&&u!==5||l&&u===5)break;h.setToKeyframe(),t._gopId++;break;case 6:case 39:case 40:if(!l&&u!==6||l&&u===6)break;t.metadataTrack.seiSamples.push(new na(ts.parseSEI(ts.removeEPB(o),l),i));return;case 32:if(!l)break;if(!n.vps.length){var p=ot.parseVPS(ts.removeEPB(o),n.hvcC);n.hvcC=n.hvcC||p,n.vps=[o]}break;case 7:case 33:if(!l&&u!==7||l&&u===7)break;if(!n.sps.length){var c=ts.removeEPB(o),k=l?ot.parseSPS(c,n.hvcC):la.parseSPS(c);n.sps=[o],n.hvcC=n.hvcC||k.hvcC,n.codec=k.codec,n.width=k.width,n.height=k.height,n.sarRatio=k.sarRatio,n.fpsNum=k.fpsNum,n.fpsDen=k.fpsDen}break;case 8:case 34:if(!l&&u!==8||l&&u===8)break;n.pps.length||(n.pps=[o]);break}h.units.push(o)}),h.gopId=this._gopId,this._pushVideoSample(n,h)}}},{key:"_pushVideoSample",value:function(s,i){if(i.units.length)if(i.pts===null||i.pts===void 0){Qe.warn("Video sample no pts",i);var e=s.samples[s.samples.length-1];e?(i.pts=e.pts,i.dts=e.dts):Qe.warn("Drop video sample",i)}else s.samples.push(i)}},{key:"_parseAudioData",value:function(){if(this._audioPesData.length){var s=a._parsePES(Be.apply(void 0,Xe(this._audioPesData)));if(!s){Qe.warn("Cannot parse audio pes",this._audioPesData);return}this._parseAacData(s),this._audioPesData=[]}}},{key:"_parseAacData",value:function(s){var i=this.audioTrack,e=s.pts;if(e==null){if(Qe.warn("AAC pes not pts",i),!i.samples.length||!i.sampleRate)return;e=i.samples[i.samples.length-1].pts+Oe.getFrameDuration(i.sampleRate)}var t=Oe.parseADTS(s.data,e);if(t){var n;i.codec=t.codec,i.channelCount=t.channelCount,i.sampleRate=t.sampleRate,i.objectType=t.objectType,i.sampleRateIndex=t.samplingFrequencyIndex,i.config=t.config,(n=i.samples).push.apply(n,Xe(t.frames.map(function(l){return new gs(l.pts,l.data)}))),t.skip&&Qe.warn("Skip aac adts ".concat(t.skip," bits")),t.remaining&&Qe.warn("Remaining aac adts ".concat(t.remaining," bits"))}else Qe.warn("Cannot parse aac adts",s)}}],[{key:"probe",value:function(s){return s.length?s[0]===71&&s[188]===71&&s[376]===71:!1}},{key:"_parsePES",value:function(s){var i=s[8];if(!(i==null||s.length<i+9)){var e=s[0]<<16|s[1]<<8|s[2];if(e===1){var t=(s[4]<<8)+s[5];if(!(t&&t>s.length-6)){var n,l,h=s[7];return h&192&&(n=(s[9]&14)*536870912+(s[10]&255)*4194304+(s[11]&254)*16384+(s[12]&255)*128+(s[13]&254)/2,h&64?(l=(s[14]&14)*536870912+(s[15]&255)*4194304+(s[16]&254)*16384+(s[17]&255)*128+(s[18]&254)/2,n-l>60*9e4&&(n=l)):l=n),{data:s.subarray(9+i),pts:n,dts:l}}}}}}]),a}(),ne=function(){function a(){he(this,a)}return oe(a,null,[{key:"findBox",value:function(s,i){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=[];if(!s)return t;for(var n=0,l="",h=0;s.length>7;){if(n=H(s),l=String.fromCharCode.apply(null,s.subarray(4,8)),h=8,n===1?(n=vs(s,8),h+=8):n||(n=s.length),!i[0]||l===i[0]){var o=s.subarray(0,n);if(i.length<2)t.push({start:e,size:n,headerSize:h,type:l,data:o});else return a.findBox(o.subarray(h),i.slice(1),e+h)}e+=n,s=s.subarray(n)}return t}},{key:"tfhd",value:function(s){return J(s,!0,function(i,e){i.trackId=H(e);var t=4,n=i.flags&255&1,l=i.flags&255&2,h=i.flags&255&8,o=i.flags&255&16,u=i.flags&255&32;n&&(t+=4,i.baseDataOffset=H(e,t),t+=4),l&&(i.sampleDescriptionIndex=H(e,t),t+=4),h&&(i.defaultSampleDuration=H(e,t),t+=4),o&&(i.defaultSampleSize=H(e,t),t+=4),u&&(i.defaultSampleFlags=H(e,t))})}},{key:"sidx",value:function(s){return J(s,!0,function(i,e){var t=0;i.reference_ID=H(e,t),t+=4,i.timescale=H(e,t),t+=4,i.version===0?(i.earliest_presentation_time=H(e,t),t+=4,i.first_offset=H(e,t),t+=4):(i.earliest_presentation_time=vs(e,t),t+=8,i.first_offset=vs(e,t),t+=8),t+=2,i.references=[];var n=ue(e,t);t+=2;for(var l=0;l<n;l++){var h={};i.references.push(h);var o=H(e,t);t+=4,h.reference_type=o>>31&1,h.referenced_size=o&2147483647,h.subsegment_duration=H(e,t),t+=4,o=H(e,t),t+=4,h.starts_with_SAP=o>>31&1,h.SAP_type=o>>28&7,h.SAP_delta_time=o&268435455}})}},{key:"moov",value:function(s){return J(s,!1,function(i,e,t){i.mvhd=a.mvhd(a.findBox(e,["mvhd"],t)[0]),i.trak=a.findBox(e,["trak"],t).map(function(n){return a.trak(n)}),i.pssh=a.pssh(a.findBox(e,["pssh"],t)[0])})}},{key:"mvhd",value:function(s){return J(s,!0,function(i,e){var t=0;i.version===1?(i.timescale=H(e,16),i.duration=vs(e,20),t+=28):(i.timescale=H(e,8),i.duration=H(e,12),t+=16),i.nextTrackId=H(e,t+76)})}},{key:"trak",value:function(s){return J(s,!1,function(i,e,t){i.tkhd=a.tkhd(a.findBox(e,["tkhd"],t)[0]),i.mdia=a.mdia(a.findBox(e,["mdia"],t)[0])})}},{key:"tkhd",value:function(s){return J(s,!0,function(i,e){var t=0;i.version===1?(i.trackId=H(e,16),i.duration=vs(e,24),t+=32):(i.trackId=H(e,8),i.duration=H(e,16),t+=20),i.width=H(e,t+52),i.height=H(e,t+56)})}},{key:"mdia",value:function(s){return J(s,!1,function(i,e,t){i.mdhd=a.mdhd(a.findBox(e,["mdhd"],t)[0]),i.hdlr=a.hdlr(a.findBox(e,["hdlr"],t)[0]),i.minf=a.minf(a.findBox(e,["minf"],t)[0])})}},{key:"mdhd",value:function(s){return J(s,!0,function(i,e){var t=0;i.version===1?(i.timescale=H(e,16),i.duration=vs(e,20),t+=28):(i.timescale=H(e,8),i.duration=H(e,12),t+=16);var n=ue(e,t);i.language=String.fromCharCode((n>>10&31)+96,(n>>5&31)+96,(n&31)+96)})}},{key:"hdlr",value:function(s){return J(s,!0,function(i,e){i.version===0&&(i.handlerType=String.fromCharCode.apply(null,e.subarray(4,8)))})}},{key:"minf",value:function(s){return J(s,!1,function(i,e,t){i.vmhd=a.vmhd(a.findBox(e,["vmhd"],t)[0]),i.smhd=a.smhd(a.findBox(e,["smhd"],t)[0]),i.stbl=a.stbl(a.findBox(e,["stbl"],t)[0])})}},{key:"vmhd",value:function(s){return J(s,!0,function(i,e){i.graphicsmode=ue(e),i.opcolor=[ue(e,2),ue(e,4),ue(e,6)]})}},{key:"smhd",value:function(s){return J(s,!0,function(i,e){i.balance=ue(e)})}},{key:"stbl",value:function(s){return J(s,!1,function(i,e,t){var n,l,h;i.stsd=a.stsd(a.findBox(e,["stsd"],t)[0]),i.stts=a.stts(a.findBox(e,["stts"],t)[0]),i.ctts=a.ctts(a.findBox(e,["ctts"],t)[0]),i.stsc=a.stsc(a.findBox(e,["stsc"],t)[0]),i.stsz=a.stsz(a.findBox(e,["stsz"],t)[0]),i.stco=a.stco(a.findBox(e,["stco"],t)[0]),i.stco||(i.co64=a.co64(a.findBox(e,["co64"],t)[0]),i.stco=i.co64);var o=(n=i.stsd.entries[0])===null||n===void 0||(l=n.sinf)===null||l===void 0||(h=l.schi)===null||h===void 0?void 0:h.tenc.default_IV_size;i.stss=a.stss(a.findBox(e,["stss"],t)[0]),i.senc=a.senc(a.findBox(e,["senc"],t)[0],o)})}},{key:"senc",value:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;return J(s,!0,function(e,t){var n=0,l=H(t,n);n+=4,e.samples=[];for(var h=0;h<l;h++){var o={};o.InitializationVector=[];for(var u=0;u<i;u++)o.InitializationVector[u]=t[n+u];if(n+=i,e.flags&2){o.subsamples=[];var p=ue(t,n);n+=2;for(var c=0;c<p;c++){var k={};k.BytesOfClearData=ue(t,n),n+=2,k.BytesOfProtectedData=H(t,n),n+=4,o.subsamples.push(k)}}e.samples.push(o)}})}},{key:"pssh",value:function(s){return J(s,!0,function(i,e){for(var t=[],n=[],l=0,h=0;h<16;h++)n.push(ji(e[l+h]));if(l+=16,i.version>0){var o=H(e,l);l+=4;for(var u=0;u<(""+o).length;u++)for(var p=0;p<16;p++){var c=e[l];l+=1,t.push(ji(c))}}var k=H(e,l);i.data_size=k,l+=4,i.kid=t,i.system_id=n,i.buffer=e})}},{key:"stsd",value:function(s){return J(s,!0,function(i,e,t){i.entryCount=H(e),i.entries=a.findBox(e.subarray(4),[],t+4).map(function(n){switch(n.type){case"avc1":case"avc2":case"avc3":case"avc4":return a.avc1(n);case"hvc1":case"hev1":return a.hvc1(n);case"mp4a":return a.mp4a(n);case"alaw":case"ulaw":return a.alaw(n);case"enca":return J(n,!1,function(l,h,o){l.channelCount=ue(h,16),l.samplesize=ue(h,18),l.sampleRate=H(h,24)/65536,h=h.subarray(28),l.sinf=a.sinf(a.findBox(h,["sinf"],o)[0]),l.esds=a.esds(a.findBox(h,["esds"],o)[0])});case"encv":return J(n,!1,function(l,h,o){l.width=ue(h,24),l.height=ue(h,26),l.horizresolution=H(h,28),l.vertresolution=H(h,32),h=h.subarray(78),l.sinf=a.sinf(a.findBox(h,["sinf"],o)[0]),l.avcC=a.avcC(a.findBox(h,["avcC"],o)[0]),l.hvcC=a.hvcC(a.findBox(h,["hvcC"],o)[0]),l.pasp=a.pasp(a.findBox(h,["pasp"],o)[0])})}}).filter(Boolean)})}},{key:"tenc",value:function(s){return J(s,!1,function(i,e){var t=6;i.default_IsEncrypted=e[t],t+=1,i.default_IV_size=e[t],t+=1,i.default_KID=[];for(var n=0;n<16;n++)i.default_KID.push(ji(e[t])),t+=1})}},{key:"schi",value:function(s){return J(s,!1,function(i,e,t){i.tenc=a.tenc(a.findBox(e,["tenc"],t)[0])})}},{key:"sinf",value:function(s){return J(s,!1,function(i,e,t){i.schi=a.schi(a.findBox(e,["schi"],t)[0]),i.frma=a.frma(a.findBox(e,["frma"],t)[0])})}},{key:"frma",value:function(s){return J(s,!1,function(i,e){i.data_format="";for(var t=0;t<4;t++)i.data_format+=String.fromCharCode(e[t])})}},{key:"avc1",value:function(s){return J(s,!1,function(i,e,t){var n=nn(i,e),l=e.subarray(n);t+=n,i.avcC=a.avcC(a.findBox(l,["avcC"],t)[0]),i.pasp=a.pasp(a.findBox(l,["pasp"],t)[0])})}},{key:"avcC",value:function(s){return J(s,!1,function(i,e){i.configurationVersion=e[0],i.AVCProfileIndication=e[1],i.profileCompatibility=e[2],i.AVCLevelIndication=e[3],i.codec=ra([e[1],e[2],e[3]]),i.lengthSizeMinusOne=e[4]&3,i.spsLength=e[5]&31,i.sps=[];for(var t=6,n=0;n<i.spsLength;n++){var l=ue(e,t);t+=2,i.sps.push(e.subarray(t,t+l)),t+=l}i.ppsLength=e[t],t+=1,i.pps=[];for(var h=0;h<i.ppsLength;h++){var o=ue(e,t);t+=2,i.pps.push(e.subarray(t,t+=o)),t+=o}})}},{key:"hvc1",value:function(s){return J(s,!1,function(i,e,t){var n=nn(i,e),l=e.subarray(n);t+=n,i.hvcC=a.hvcC(a.findBox(l,["hvcC"],t)[0]),i.pasp=a.pasp(a.findBox(l,["pasp"],t)[0])})}},{key:"hvcC",value:function(s){return J(s,!1,function(i,e){i.data=s.data,i.codec="hev1.1.6.L93.B0",i.configurationVersion=e[0];var t=e[1];i.generalProfileSpace=t>>6,i.generalTierFlag=(t&32)>>5,i.generalProfileIdc=t&31,i.generalProfileCompatibility=H(e,2),i.generalConstraintIndicatorFlags=e.subarray(6,12),i.generalLevelIdc=e[12],i.avgFrameRate=ue(e,19),i.numOfArrays=e[22],i.vps=[],i.sps=[],i.pps=[];for(var n=23,l=0,h=0,o=0,u=0;u<i.numOfArrays;u++){l=e[n]&63,h=ue(e,n+1),n+=3;for(var p=[],c=0;c<h;c++)o=ue(e,n),n+=2,p.push(e.subarray(n,n+o)),n+=o;if(l===32){var k;(k=i.vps).push.apply(k,p)}else if(l===33){var f;(f=i.sps).push.apply(f,p)}else if(l===34){var b;(b=i.pps).push.apply(b,p)}}})}},{key:"pasp",value:function(s){return J(s,!1,function(i,e){i.hSpacing=H(e),i.vSpacing=H(e,4)})}},{key:"mp4a",value:function(s){return J(s,!1,function(i,e,t){var n=an(i,e);i.esds=a.esds(a.findBox(e.subarray(n),["esds"],t+n)[0])})}},{key:"esds",value:function(s){return J(s,!0,function(i,e){i.codec="mp4a.";for(var t=0,n=0,l=0,h=0;e.length;){for(t=0,h=e[t],n=e[t+1],t+=2;n&128;)l=(n&127)<<7,n=e[t],t+=1;if(l+=n&127,h===3)e=e.subarray(t+3);else if(h===4)i.codec+=(e[t].toString(16)+".").padStart(3,"0"),e=e.subarray(t+13);else if(h===5){var o=i.config=e.subarray(t,t+l),u=(o[0]&248)>>3;u===31&&o.length>=2&&(u=32+((o[0]&7)<<3)+((o[1]&224)>>5)),i.objectType=u,i.codec+=u.toString(16),i.codec[i.codec.length-1]==="."&&(i.codec=i.codec.substring(0,i.codec.length-1));return}else{i.codec[i.codec.length-1]==="."&&(i.codec=i.codec.substring(0,i.codec.length-1));return}}})}},{key:"alaw",value:function(s){return J(s,!1,function(i,e){an(i,e)})}},{key:"stts",value:function(s){return J(s,!0,function(i,e){for(var t=H(e),n=[],l=4,h=0;h<t;h++)n.push({count:H(e,l),delta:H(e,l+4)}),l+=8;i.entryCount=t,i.entries=n})}},{key:"ctts",value:function(s){return J(s,!0,function(i,e){var t=H(e),n=[],l=4;if(i.version===1)for(var h=0;h<t;h++)n.push({count:H(e,l),offset:H(e,l+4)}),l+=8;else for(var o=0;o<t;o++)n.push({count:H(e,l),offset:-(~H(e,l+4)+1)}),l+=8;i.entryCount=t,i.entries=n})}},{key:"stsc",value:function(s){return J(s,!0,function(i,e){for(var t=H(e),n=[],l=4,h=0;h<t;h++)n.push({firstChunk:H(e,l),samplesPerChunk:H(e,l+4),sampleDescriptionIndex:H(e,l+8)}),l+=12;i.entryCount=t,i.entries=n})}},{key:"stsz",value:function(s){return J(s,!0,function(i,e){var t=H(e),n=H(e,4),l=[];if(!t)for(var h=8,o=0;o<n;o++)l.push(H(e,h)),h+=4;i.sampleSize=t,i.sampleCount=n,i.entrySizes=l})}},{key:"stco",value:function(s){return J(s,!0,function(i,e){for(var t=H(e),n=[],l=4,h=0;h<t;h++)n.push(H(e,l)),l+=4;i.entryCount=t,i.entries=n})}},{key:"co64",value:function(s){return J(s,!0,function(i,e){for(var t=H(e),n=[],l=4,h=0;h<t;h++)n.push(vs(e,l)),l+=8;i.entryCount=t,i.entries=n})}},{key:"stss",value:function(s){return J(s,!0,function(i,e){for(var t=H(e),n=[],l=4,h=0;h<t;h++)n.push(H(e,l)),l+=4;i.entryCount=t,i.entries=n})}},{key:"moof",value:function(s){return J(s,!1,function(i,e,t){i.mfhd=a.mfhd(a.findBox(e,["mfhd"],t)[0]),i.traf=a.findBox(e,["traf"],t).map(function(n){return a.traf(n)})})}},{key:"mfhd",value:function(s){return J(s,!0,function(i,e){i.sequenceNumber=H(e)})}},{key:"traf",value:function(s){return J(s,!1,function(i,e,t){i.tfhd=a.tfhd(a.findBox(e,["tfhd"],t)[0]),i.tfdt=a.tfdt(a.findBox(e,["tfdt"],t)[0]),i.trun=a.trun(a.findBox(e,["trun"],t)[0])})}},{key:"trun",value:function(s){return J(s,!0,function(i,e){var t=i.version,n=i.flags,l=e.length,h=i.sampleCount=H(e),o=4;if(l>o&&n&1&&(i.dataOffset=-(~H(e,o)+1),o+=4),l>o&&n&4&&(i.firstSampleFlags=H(e,o),o+=4),i.samples=[],l>o)for(var u,p=0;p<h;p++)u={},n&256&&(u.duration=H(e,o),o+=4),n&512&&(u.size=H(e,o),o+=4),n&1024&&(u.flags=H(e,o),o+=4),n&2048&&(t?u.cts=-(~H(e,o+4)+1):u.cts=H(e,o),o+=4),i.samples.push(u)})}},{key:"tfdt",value:function(s){return J(s,!0,function(i,e){i.version===1?i.baseMediaDecodeTime=vs(e):i.baseMediaDecodeTime=H(e)})}},{key:"probe",value:function(s){return!!a.findBox(s,["ftyp"])}},{key:"parseSampleFlags",value:function(s){return{isLeading:(s[0]&12)>>>2,dependsOn:s[0]&3,isDependedOn:(s[1]&192)>>>6,hasRedundancy:(s[1]&48)>>>4,paddingValue:(s[1]&14)>>>1,isNonSyncSample:s[1]&1,degradationPriority:s[2]<<8|s[3]}}},{key:"moovToTrack",value:function(s,i,e){var t,n,l=s.trak;if(!(!l||!l.length)){var h=l.find(function(Ki){var Cs,Xs;return((Cs=Ki.mdia)===null||Cs===void 0||(Xs=Cs.hdlr)===null||Xs===void 0?void 0:Xs.handlerType)==="vide"}),o=l.find(function(Ki){var Cs,Xs;return((Cs=Ki.mdia)===null||Cs===void 0||(Xs=Cs.hdlr)===null||Xs===void 0?void 0:Xs.handlerType)==="soun"});if(h&&i){var u,p,c,k,f,b,g,E=i,L=(u=h.tkhd)===null||u===void 0?void 0:u.trackId;L!=null&&(E.id=h.tkhd.trackId),E.tkhdDuration=h.tkhd.duration,E.mvhdDurtion=s.mvhd.duration,E.mvhdTimecale=s.mvhd.timescale,E.timescale=E.formatTimescale=h.mdia.mdhd.timescale,E.duration=h.mdia.mdhd.duration||E.mvhdDurtion/E.mvhdTimecale*E.timescale;var C=h.mdia.minf.stbl.stsd.entries[0];if(E.width=C.width,E.height=C.height,C.pasp&&(E.sarRatio=[C.pasp.hSpacing,C.pasp.vSpacing]),C.hvcC)E.codecType=ys.HEVC,E.codec=C.hvcC.codec,E.vps=C.hvcC.vps,E.sps=C.hvcC.sps,E.pps=C.hvcC.pps,E.hvcC=C.hvcC.data;else if(C.avcC)E.codec=C.avcC.codec,E.sps=C.avcC.sps,E.pps=C.avcC.pps;else throw new Error("unknown video stsd entry");if(E.present=!0,E.ext={},E.ext.stss=(p=h.mdia)===null||p===void 0||(c=p.minf)===null||c===void 0||(k=c.stbl)===null||k===void 0?void 0:k.stss,E.ext.ctts=(f=h.mdia)===null||f===void 0||(b=f.minf)===null||b===void 0||(g=b.stbl)===null||g===void 0?void 0:g.ctts,C&&C.type==="encv"){var F,Z,X,T,G,Y,M,N;E.isVideoEncryption=!0,C.default_KID=(F=C.sinf)===null||F===void 0||(Z=F.schi)===null||Z===void 0?void 0:Z.tenc.default_KID,C.default_IsEncrypted=(X=C.sinf)===null||X===void 0||(T=X.schi)===null||T===void 0?void 0:T.tenc.default_IsEncrypted,C.default_IV_size=(G=C.sinf)===null||G===void 0||(Y=G.schi)===null||Y===void 0?void 0:Y.tenc.default_IV_size,E.videoSenc=h.mdia.minf.stbl.senc&&h.mdia.minf.stbl.senc.samples,C.data_format=(M=C.sinf)===null||M===void 0||(N=M.frma)===null||N===void 0?void 0:N.data_format,E.useEME=s.useEME,E.kidValue=s.kidValue,E.pssh=s.pssh,E.encv=C}}if(o&&e){var m,d,y,S,v,w,R,D,K,I=e,O=(m=o.tkhd)===null||m===void 0?void 0:m.trackId;O!=null&&(I.id=o.tkhd.trackId),I.tkhdDuration=o.tkhd.duration,I.mvhdDurtion=s.mvhd.duration,I.mvhdTimecale=s.mvhd.timescale,I.timescale=I.formatTimescale=o.mdia.mdhd.timescale,I.duration=o.mdia.mdhd.duration||I.mvhdDurtion/I.mvhdTimecale*I.timescale;var P=o.mdia.minf.stbl.stsd.entries[0];switch(I.sampleSize=P.sampleSize,I.sampleRate=P.sampleRate,I.channelCount=P.channelCount,I.present=!0,P.type){case"alaw":I.codecType=I.codec=os.G711PCMA,I.sampleRate=8e3;break;case"ulaw":I.codecType=I.codec=os.G711PCMU,I.sampleRate=8e3;break;default:I.sampleDuration=Oe.getFrameDuration(I.sampleRate,I.timescale),I.sampleRateIndex=Oe.getRateIndexByRate(I.sampleRate),I.objectType=((t=P.esds)===null||t===void 0?void 0:t.objectType)||2,P.esds&&(I.config=Array.from(P.esds.config)),I.codec=((n=P.esds)===null||n===void 0?void 0:n.codec)||"mp4a.40.2";break}if(I.sampleDuration=Oe.getFrameDuration(I.sampleRate,I.timescale),I.objectType=((d=P.esds)===null||d===void 0?void 0:d.objectType)||2,P.esds&&(P.esds.config?I.config=Array.from(P.esds.config):console.warn("esds config is null")),I.codec=((y=P.esds)===null||y===void 0?void 0:y.codec)||"mp4a.40.2",I.sampleRateIndex=Oe.getRateIndexByRate(I.sampleRate),I.ext={},I.ext.stss=(S=o.mdia)===null||S===void 0||(v=S.minf)===null||v===void 0||(w=v.stbl)===null||w===void 0?void 0:w.stss,I.ext.ctts=(R=o.mdia)===null||R===void 0||(D=R.minf)===null||D===void 0||(K=D.stbl)===null||K===void 0?void 0:K.ctts,I.present=!0,P&&P.type==="enca"){var as,ve,Ye,rs,De,ae,Ae,us;I.isAudioEncryption=!0,P.data_format=(as=P.sinf)===null||as===void 0||(ve=as.frma)===null||ve===void 0?void 0:ve.data_format,P.default_KID=(Ye=P.sinf)===null||Ye===void 0||(rs=Ye.schi)===null||rs===void 0?void 0:rs.tenc.default_KID,P.default_IsEncrypted=(De=P.sinf)===null||De===void 0||(ae=De.schi)===null||ae===void 0?void 0:ae.tenc.default_IsEncrypted,P.default_IV_size=(Ae=P.sinf)===null||Ae===void 0||(us=Ae.schi)===null||us===void 0?void 0:us.tenc.default_IV_size,I.audioSenc=o.mdia.minf.stbl.senc&&o.mdia.minf.stbl.senc.samples,I.useEME=s.useEME,I.kidValue=s.kidValue,I.enca=P}}if(e&&(e.isVideoEncryption=i?i.isVideoEncryption:!1),i&&(i.isAudioEncryption=e?e.isAudioEncryption:!1),i!=null&&i.encv||e!=null&&e.enca){var Di,Pi,Tt=i==null||(Di=i.encv)===null||Di===void 0?void 0:Di.default_KID,Rt=e==null||(Pi=e.enca)===null||Pi===void 0?void 0:Pi.default_KID,xt=Tt||Rt?(Tt||Rt).join(""):null;i&&(i.kid=xt),e&&(e.kid=xt)}return i&&(i.flags=3841),e&&(e.flags=1793),{videoTrack:i,audioTrack:e}}}},{key:"evaluateDefaultDuration",value:function(s,i,e){var t,n=i==null||(t=i.samples)===null||t===void 0?void 0:t.length;if(!n)return 1024;var l=1024*n/i.timescale;return l*s.timescale/e}},{key:"moofToSamples",value:function(s,i,e){var t={};return s.mfhd&&(i&&(i.sequenceNumber=s.mfhd.sequenceNumber),e&&(e.sequenceNumber=s.mfhd.sequenceNumber)),s.traf.forEach(function(n){var l=n.tfhd,h=n.tfdt,o=n.trun;if(!(!l||!o)){h&&(i&&i.id===l.trackId&&(i.baseMediaDecodeTime=h.baseMediaDecodeTime),e&&e.id===l.trackId&&(e.baseMediaDecodeTime=h.baseMediaDecodeTime));var u=l.defaultSampleSize||0,p=l.defaultSampleDuration||a.evaluateDefaultDuration(i,e,o.samples.length||o.sampleCount),c=o.dataOffset||0,k=0,f=-1;if(!o.samples.length&&o.sampleCount){t[l.trackId]=[];for(var b=0;b<o.sampleCount;b++)t[l.trackId].push({offset:c,dts:k,duration:p,size:u}),k+=p,c+=u}else t[l.trackId]=o.samples.map(function(g,E){return g={offset:c,dts:k,pts:k+(g.cts||0),duration:g.duration||p,size:g.size||u,gopId:f,keyframe:E===0||g.flags!==null&&g.flags!==void 0&&(g.flags&65536)>>>0!==65536},g.keyframe&&(f++,g.gopId=f),k+=g.duration,c+=g.size,g})}}),t}},{key:"moovToSamples",value:function(s){var i=s.trak;if(!(!i||!i.length)){var e=i.find(function(M){var N,m;return((N=M.mdia)===null||N===void 0||(m=N.hdlr)===null||m===void 0?void 0:m.handlerType)==="vide"}),t=i.find(function(M){var N,m;return((N=M.mdia)===null||N===void 0||(m=N.hdlr)===null||m===void 0?void 0:m.handlerType)==="soun"});if(!(!e&&!t)){var n,l;if(e){var h,o,u=(h=e.mdia)===null||h===void 0||(o=h.minf)===null||o===void 0?void 0:o.stbl;if(!u)return;var p=u.stts,c=u.stsc,k=u.stsz,f=u.stco,b=u.stss,g=u.ctts;if(!p||!c||!k||!f||!b)return;n=tn(p,c,k,f,g,b)}if(t){var E,L,C,F=(E=t.mdia)===null||E===void 0||(L=E.minf)===null||L===void 0?void 0:L.stbl;if(!F)return;var Z=(C=t.mdia.mdhd)===null||C===void 0?void 0:C.timescale,X=F.stts,T=F.stsc,G=F.stsz,Y=F.stco;if(!Z||!X||!T||!G||!Y)return;l=tn(X,T,G,Y)}return{videoSamples:n,audioSamples:l}}}}}]),a}();function tn(a,r,s,i,e,t){var n=[],l=e==null?void 0:e.entries,h=r.entries,o=i.entries,u=s.entrySizes,p=t==null?void 0:t.entries,c;p&&(c={},p.forEach(function(T){c[T-1]=!0}));var k;l&&(k=[],l.forEach(function(T){for(var G=T.count,Y=T.offset,M=0;M<G;M++)k.push(Y)}));var f,b=-1,g=0,E=0,L=0,C=0,F=0,Z=h[0].samplesPerChunk,X=h[1]?h[1].firstChunk-1:1/0;return a.entries.forEach(function(T){for(var G=T.count,Y=T.delta,M=0;M<G;M++)f={dts:g,duration:Y,size:u[E]||s.sampleSize,offset:o[L]+F,index:E},p&&(f.keyframe=c[E],f.keyframe&&b++,f.gopId=b),k&&E<k.length&&(f.pts=f.dts+k[E]),n.push(f),g+=Y,E++,E<Z?F+=f.size:(L++,F=0,L>=X&&(C++,X=h[C+1]?h[C+1].firstChunk-1:1/0),Z+=h[C].samplesPerChunk)}),n}function nn(a,r){return a.dataReferenceIndex=ue(r,6),a.width=ue(r,24),a.height=ue(r,26),a.horizresolution=H(r,28),a.vertresolution=H(r,32),a.frameCount=ue(r,40),a.depth=ue(r,74),78}function an(a,r){return a.dataReferenceIndex=ue(r,6),a.channelCount=ue(r,16),a.sampleSize=ue(r,18),a.sampleRate=H(r,24)/65536,28}function J(a,r,s){if(a){if(a.size!==a.data.length)throw new Error("box ".concat(a.type," size !== data.length"));var i={start:a.start,size:a.size,headerSize:a.headerSize,type:a.type};return r&&(i.version=a.data[a.headerSize],i.flags=jr(a.data,a.headerSize+1),i.headerSize+=4),s(i,a.data.subarray(i.headerSize),i.start+i.headerSize),i}}var tl=function(r,s,i){for(var e=String(i),t=s>>0,n=Math.ceil(t/e.length),l=[],h=String(r);n--;)l.push(e);return l.join("").substring(0,t-h.length)+h},ji=function(){for(var r=[],s=arguments.length,i=new Array(s),e=0;e<s;e++)i[e]=arguments[e];return i.forEach(function(t){r.push(tl(Number(t).toString(16),2,0))}),r[0]},nl=function(){function a(r,s,i){he(this,a),this.videoTrack=r||new Ri,this.audioTrack=s||new xi,this.metadataTrack=i||new Vi}return oe(a,[{key:"demux",value:function(s,i){var e=this.videoTrack,t=this.audioTrack,n=e.exist(),l=t.exist();if(e.samples=[],t.samples=[],i){if(!l){var h=ne.findBox(i,["moov"])[0];if(!h)throw new Error("cannot found moov box");ne.moovToTrack(ne.moov(h),null,t)}var o=ne.findBox(i,["moof"])[0];if(o){var u=ne.moofToSamples(ne.moof(o),null,t)[t.id],p=t.baseMediaDecodeTime;if(u){var c=o.start;u.map(function(F){F.offset+=c;var Z=i.subarray(F.offset,F.offset+F.size);t.samples.push(new gs(F.dts+p,Z,F.duration))})}}}if(s){if(!n&&!l){var k=ne.findBox(s,["moov"])[0];if(!k)throw new Error("cannot found moov box");ne.moovToTrack(ne.moov(k),e,t)}var f=ne.findBox(s,["moof"])[0];if(f){var b=ne.moofToSamples(ne.moof(f),e,t),g=e.baseMediaDecodeTime,E=t.baseMediaDecodeTime,L=f.start,C;Object.keys(b).forEach(function(F){e.id==F?b[F].map(function(Z){Z.offset+=L;var X=new ei((Z.pts||Z.dts)+g,Z.dts+g);X.duration=Z.duration,X.gopId=Z.gopId,Z.keyframe&&X.setToKeyframe();var T=s.subarray(Z.offset,Z.offset+Z.size);X.data=T;for(var G=0,Y=T.length-1;G<Y;)C=H(T,G),G+=4,X.units.push(T.subarray(G,G+C)),G+=C;e.samples.push(X)}):t.id==F&&b[F].map(function(Z){Z.offset+=L;var X=s.subarray(Z.offset,Z.offset+Z.size);t.samples.push(new gs(Z.dts+E,X,Z.duration))})})}}return{videoTrack:e,audioTrack:t,metadataTrack:this.metadataTrack}}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset(),this.metadataTrack.reset()}}],[{key:"probe",value:function(s){return ne.probe(s)}}]),a}();function al(a){for(var r=0,s=arguments.length,i=new Array(s>1?s-1:0),e=1;e<s;e++)i[e-1]=arguments[e];i.forEach(function(l){r+=l.length});var t=new a(r),n=0;return i.forEach(function(l){t.set(l,n),n+=l.length}),t}var be=function(){function a(){he(this,a),this.buffer=new Uint8Array(0)}return oe(a,[{key:"write",value:function(){for(var s=this,i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];e.forEach(function(n){n?s.buffer=al(Uint8Array,s.buffer,n):window.console.warn(n)})}}],[{key:"writeUint16",value:function(s){return new Uint8Array([s>>8&255,s&255])}},{key:"writeUint32",value:function(s){return new Uint8Array([s>>24,s>>16&255,s>>8&255,s&255])}}]),a}(),rn=Math.pow(2,32)-1,Q=function(){function a(){he(this,a)}return oe(a,null,[{key:"box",value:function(s){for(var i=arguments.length,e=new Array(i>1?i-1:0),t=1;t<i;t++)e[t-1]=arguments[t];e=e.filter(Boolean);var n=8+e.reduce(function(o,u){return o+u.byteLength},0),l=new Uint8Array(n);l[0]=n>>24&255,l[1]=n>>16&255,l[2]=n>>8&255,l[3]=n&255,l.set(s,4);var h=8;return e.forEach(function(o){l.set(o,h),h+=o.byteLength}),l}},{key:"ftyp",value:function(s){var i=s.find(function(e){return e.type===Ks.VIDEO&&e.codecType===ys.HEVC});return i?a.FTYPHEV1:a.FTYPAVC1}},{key:"initSegment",value:function(s){var i=a.ftyp(s),e=Be(i,a.moov(s));return e}},{key:"pssh",value:function(s){var i=new Uint8Array([1,0,0,0].concat([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75],[0,0,0,1],$t(s.kid),[0,0,0,0]));return a.box(a.types.pssh,i)}},{key:"moov",value:function(s){if(s[0].useEME&&(s[0].encv||s[0].enca)){s[0].pssh||(s[0].pssh={kid:s[0].kid});var i=this.pssh(s[0].pssh);return a.box.apply(a,[a.types.moov,a.mvhd(s[0].mvhdDurtion||s[0].duration,s[0].mvhdTimecale||s[0].timescale),a.mvex(s)].concat(Xe(s.map(function(e){return a.trak(e)})),[i]))}else return a.box.apply(a,[a.types.moov,a.mvhd(s[0].mvhdDurtion||s[0].duration,s[0].mvhdTimecale||s[0].timescale)].concat(Xe(s.map(function(e){return a.trak(e)})),[a.mvex(s)]))}},{key:"mvhd",value:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4,e=a.box(a.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,i&255,s>>24&255,s>>16&255,s>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));return e}},{key:"trak",value:function(s){var i=a.box(a.types.trak,a.tkhd(s.id,s.tkhdDuration||0,s.width,s.height),a.mdia(s));return i}},{key:"tkhd",value:function(s,i){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,n=a.box(a.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,s>>24&255,s>>16&255,s>>8&255,s&255,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,i&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,e>>8&255,e&255,0,0,t>>8&255,t&255,0,0]));return n}},{key:"mdia",value:function(s){var i=a.box(a.types.mdia,a.mdhd(s.duration,s.timescale),a.hdlr(s.type),a.minf(s));return i}},{key:"mdhd",value:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4,e=a.box(a.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,i&255,s>>24&255,s>>16&255,s>>8&255,s&255,85,196,0,0]));return e}},{key:"hdlr",value:function(s){var i=a.box(a.types.hdlr,a.HDLR_TYPES[s]);return i}},{key:"minf",value:function(s){var i=a.box(a.types.minf,s.type===Ks.VIDEO?a.VMHD:a.SMHD,a.DINF,a.stbl(s));return i}},{key:"stbl",value:function(s){var i=[];s&&s.ext&&s.ext.stss&&i.push(a.stss(s.ext.stss.entries));var e=a.box(a.types.stbl,a.stsd(s),a.STTS,i[0],a.STSC,a.STSZ,a.STCO);return e}},{key:"stsd",value:function(s){var i;s.type==="audio"?s.useEME&&s.enca?i=a.enca(s):i=a.mp4a(s):s.useEME&&s.encv?i=a.encv(s):i=a.avc1hev1(s);var e=a.box(a.types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),i);return e}},{key:"enca",value:function(s){var i=s.enca.channelCount,e=s.enca.sampleRate,t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i,0,16,0,0,0,0,e>>8&255,e&255,0,0]),n=a.esds(s.config),l=a.sinf(s.enca);return a.box(a.types.enca,t,n,l)}},{key:"encv",value:function(s){var i,e,t=s.sps.length>0?s.sps[0]:[],n=s.pps.length>0?s.pps[0]:[],l=s.width,h=s.height,o=s.sarRatio[0],u=s.sarRatio[1],p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,h>>8&255,h&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c=new Uint8Array((i=(e=[1,t[1],t[2],t[3],255,225,t.length>>>8&255,t.length&255]).concat.apply(e,Xe(t)).concat([1,n.length>>>8&255,n.length&255])).concat.apply(i,Xe(n))),k=new Uint8Array([0,0,88,57,0,15,200,192,0,4,86,72]),f=a.sinf(s.encv),b=new Uint8Array([o>>24,o>>16&255,o>>8&255,o&255,u>>24,u>>16&255,u>>8&255,u&255]);return a.box(a.types.encv,p,a.box(a.types.avcC,c),a.box(a.types.btrt,k),f,a.box(a.types.pasp,b))}},{key:"schi",value:function(s){var i=new Uint8Array([]),e=a.tenc(s);return a.box(a.types.schi,i,e)}},{key:"tenc",value:function(s){var i=new Uint8Array([0,0,0,0,0,0,s.default_IsEncrypted&255,s.default_IV_size&255].concat($t(s.default_KID)));return a.box(a.types.tenc,i)}},{key:"sinf",value:function(s){var i=new Uint8Array([]),e=new Uint8Array([s.data_format.charCodeAt(0),s.data_format.charCodeAt(1),s.data_format.charCodeAt(2),s.data_format.charCodeAt(3)]),t=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),n=a.schi(s);return a.box(a.types.sinf,i,a.box(a.types.frma,e),a.box(a.types.schm,t),n)}},{key:"avc1hev1",value:function(s){var i=s.codecType===ys.HEVC,e=i?a.types.hvc1:a.types.avc1,t=i?a.hvcC(s):a.avcC(s),n=[new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s.width>>8&255,s.width&255,s.height>>8&255,s.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t];return i?n.push(a.box(a.types.fiel,new Uint8Array([1,0]))):s.sarRatio&&s.sarRatio.length>1&&n.push(a.pasp(s.sarRatio)),a.box.apply(a,[e].concat(n))}},{key:"avcC",value:function(s){var i,e,t=[],n=[],l;return s.sps.forEach(function(h){l=h.byteLength,t.push(l>>>8&255),t.push(l&255),t.push.apply(t,Xe(h))}),s.pps.forEach(function(h){l=h.byteLength,n.push(l>>>8&255),n.push(l&255),n.push.apply(n,Xe(h))}),a.box(a.types.avcC,new Uint8Array((i=(e=[1,t[3],t[4],t[5],255,224|s.sps.length]).concat.apply(e,t).concat([s.pps.length])).concat.apply(i,n)))}},{key:"hvcC",value:function(s){var i=s.hvcC;if(i instanceof ArrayBuffer||i instanceof Uint8Array)return i;var e=s.vps,t=s.sps,n=s.pps,l;if(i){var h=i.generalProfileCompatibilityFlags,o=i.generalConstraintIndicatorFlags,u=(e.length&&1)+(t.length&&1)+(n.length&&1);l=[1,i.generalProfileSpace<<6|i.generalTierFlag<<5|i.generalProfileIdc,h>>>24,h>>>16,h>>>8,h,o[0],o[1],o[2],o[3],o[4],o[5],i.generalLevelIdc,240,0,252,i.chromaFormatIdc|252,i.bitDepthLumaMinus8|248,i.bitDepthChromaMinus8|248,0,0,i.numTemporalLayers<<3|i.temporalIdNested<<2|3,u];var p=function(k){var f;l.push(k.length>>8,k.length),(f=l).push.apply(f,Xe(k))};e.length&&(l.push(160,0,e.length),e.forEach(p)),t.length&&(l.push(161,0,t.length),t.forEach(p)),n.length&&(l.push(162,0,n.length),n.forEach(p))}else l=[1,1,96,0,0,0,144,0,0,0,0,0,93,240,0,252,253,248,248,0,0,15,3,160,0,1,0,24,64,1,12,1,255,255,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,153,152,9,161,0,1,0,45,66,1,1,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,160,2,128,128,45,22,89,153,164,147,43,154,128,128,128,130,0,0,3,0,2,0,0,3,0,50,16,162,0,1,0,7,68,1,193,114,180,98,64];return a.box(a.types.hvcC,new Uint8Array(l))}},{key:"pasp",value:function(s){var i=Mr(s,2),e=i[0],t=i[1];return a.box(a.types.pasp,new Uint8Array([e>>24,e>>16&255,e>>8&255,e&255,t>>24,t>>16&255,t>>8&255,t&255]))}},{key:"mp4a",value:function(s){return a.box(a.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,s.channelCount,0,16,0,0,0,0,s.sampleRate>>8&255,s.sampleRate&255,0,0]),s.config.length?a.esds(s.config):void 0)}},{key:"esds",value:function(s){var i=s.length,e=a.box(a.types.esds,new Uint8Array([0,0,0,0,3,23+i,0,0,0,4,15+i,64,21,0,6,0,0,0,218,192,0,0,218,192,5].concat([i]).concat(s).concat([6,1,2])));return e}},{key:"mvex",value:function(s){var i=a.box.apply(a,[a.types.mvex].concat(Xe(s.map(function(e){return a.trex(e.id)}))));return i}},{key:"trex",value:function(s){var i=a.box(a.types.trex,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]));return i}},{key:"trex1",value:function(s){var i=a.box(a.types.trex,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,0,0,0,1,0,0,2,0,0,0,0,0,0,1,0,0]));return i}},{key:"trex2",value:function(s){var i=a.box(a.types.trex,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,0,0,0,1,0,0,4,0,0,0,0,0,2,0,0,0]));return i}},{key:"moof",value:function(s){var i=a.box.apply(a,[a.types.moof,a.mfhd(s[0].samples?s[0].samples[0].gopId:0)].concat(Xe(s.map(function(e){return a.traf(e)}))));return i}},{key:"mfhd",value:function(s){var i=a.box(a.types.mfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255]));return i}},{key:"traf",value:function(s){var i=a.tfhd(s.id),e=a.tfdt(s,s.baseMediaDecodeTime),t=0,n;if(s.isVideo&&s.videoSenc&&(n=s.videoSenc,n.forEach(function(d){t=t+8,d.subsamples&&d.subsamples.length&&(t=t+2,t=t+d.subsamples.length*6)})),s.videoSencLength=t,!s.useEME||!s.isVideoEncryption&&!s.isAudioEncryption){var l=a.sdtp(s),h=76;return a.box(a.types.traf,i,e,l,a.trun(s.samples,l.byteLength+h))}else if(s.isVideoEncryption)if(s.isVideo){var o=a.saiz(s),u=a.saio(s),p=a.trun1(s),c=a.senc(s),k=a.box(a.types.traf,i,e,o,u,p,c);return k}else if(s.isAudioEncryption){var g=a.sbgp(),E=a.saiz(s),L=a.saio(s),C=a.senc(s),F=a.trun1(s),Z=a.box(a.types.traf,i,e,g,E,L,C,F);return Z}else{var f=a.sbgp(),b=a.trun1(s);return a.box(a.types.traf,i,e,f,b)}else if(s.isVideo){var X=a.trun1(s);return a.box(a.types.traf,i,e,X)}else{var T=a.sbgp(),G=a.saiz(s),Y=a.saio(s),M=a.senc(s),N=a.trun1(s),m=a.box(a.types.traf,i,e,T,G,Y,M,N);return m}}},{key:"sdtp",value:function(s){var i=new be;return s.samples.forEach(function(e){i.write(new Uint8Array(s.isVideo?[e.keyframe?32:16]:[16]))}),a.box(a.types.sdtp,this.extension(0,0),i.buffer)}},{key:"trun1",value:function(s){var i=new be,e=be.writeUint32(s.samples.length),t=null;if(s.isVideo){var n=s.videoSencLength;t=be.writeUint32(s.samples.length*16+n+149),!s.isVideoEncryption&&s.isAudioEncryption&&(t=be.writeUint32(s.samples.length*16+92))}else{var l=s.samples.length*12+124;s.isAudioEncryption&&(l=s.samples.length*12+8*s.audioSenc.length+177),t=be.writeUint32(l)}return s.samples.forEach(function(h){i.write(be.writeUint32(h.duration)),i.write(be.writeUint32(h.size)),i.write(be.writeUint32(h.keyframe?33554432:65536)),s.isVideo&&i.write(be.writeUint32(h.cts?h.cts:0))}),a.box(a.types.trun,this.extension(0,s.flags),e,t,i.buffer)}},{key:"senc",value:function(s){var i=new be,e=s.samples.length,t=s.isVideo?16:8,n=s.isVideo?2:0,l=[],h=0;return s.isVideo?(l=s.videoSenc,h=s.videoSencLength):l=s.audioSenc,h=h||t*e,i.write(be.writeUint32(16+h),a.types.senc,this.extension(0,n)),i.write(be.writeUint32(e)),l.forEach(function(o){for(var u=0;u<o.InitializationVector.length;u++)i.write(new Uint8Array([o.InitializationVector[u]]));o.subsamples&&o.subsamples.length&&(i.write(be.writeUint16(o.subsamples.length)),o.subsamples.forEach(function(p){i.write(be.writeUint16(p.BytesOfClearData)),i.write(be.writeUint32(p.BytesOfProtectedData))}))}),i.buffer}},{key:"saio",value:function(s){var i=s.samples.length*12+141;!s.isVideo&&s.isAudioEncryption&&(i=149);var e=new Uint8Array([1,0,0,0,0,0,0,1,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,i&255]);return a.box(a.types.saio,e)}},{key:"saiz",value:function(s){var i=s.samples.length,e=new Uint8Array([0,0,0,0,16,i>>24&255,i>>16&255,i>>8&255,i&255]);return a.box(a.types.saiz,e)}},{key:"sbgp",value:function(){var s=new Uint8Array([114,111,108,108,0,0,0,1,0,0,1,25,0,0,0,1]);return a.box(a.types.sbgp,this.extension(0,0),s)}},{key:"extension",value:function(s,i){return new Uint8Array([s,i>>16&255,i>>8&255,i&255])}},{key:"tfhd",value:function(s){return a.box(a.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255]))}},{key:"tfdt",value:function(s,i){var e=Math.floor(i/(rn+1)),t=Math.floor(i%(rn+1));return s.useEME&&(s.isVideoEncryption||s.isAudioEncryption)?a.box(a.types.tfdt,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255])):a.box(a.types.tfdt,new Uint8Array([1,0,0,0,e>>24,e>>16&255,e>>8&255,e&255,t>>24,t>>16&255,t>>8&255,t&255]))}},{key:"trun",value:function(s,i){var e=s.length,t=12+16*e;i+=8+t;var n=new Uint8Array(t);n.set([0,0,15,1,e>>>24&255,e>>>16&255,e>>>8&255,e&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255],0);for(var l=0;l<e;l++){var h=s[l],o=h.duration,u=h.size,p=h.flag,c=p===void 0?{}:p,k=h.cts,f=k===void 0?0:k;n.set([o>>>24&255,o>>>16&255,o>>>8&255,o&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,c.isLeading<<2|(c.dependsOn===null||c.dependsOn===void 0?1:c.dependsOn),c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|(c.isNonSyncSample===null||c.isNonSyncSample===void 0?1:c.isNonSyncSample),c.degradationPriority&61440,c.degradationPriority&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*l)}return a.box(a.types.trun,n)}},{key:"moovMP4",value:function(s){return a.box.apply(a,[a.types.moov,a.mvhd(s[0].duration,s[0].timescale)].concat(Xe(s.map(function(i){return a.trackMP4(i)}))))}},{key:"trackMP4",value:function(s){return a.box(a.types.trak,a.tkhd(s.id,s.duration,s.width,s.height),a.mdiaMP4(s))}},{key:"mdiaMP4",value:function(s){return a.box(a.types.mdia,a.mdhd(s.duration,s.timescale),a.hdlr(s.type),a.minfMP4(s))}},{key:"minfMP4",value:function(s){return a.box(a.types.minf,s.type===Ks.VIDEO?a.VMHD:a.SMHD,a.DINF,a.stblMP4(s))}},{key:"stblMP4",value:function(s){var i=s.ext,e=[a.stsd(s),a.stts(i.stts),a.stsc(i.stsc),a.stsz(i.stsz),a.stco(i.stco)];return i.stss.length&&e.push(a.stss(i.stss)),i.ctts.length&&e.push(a.ctts(i.ctts)),a.box.apply(a,[a.types.stbl].concat(e))}},{key:"stts",value:function(s){var i=s.length,e=new Uint8Array(8*i),t=0;return s.forEach(function(n){var l=n.value,h=n.count;e.set([h>>24,h>>16&255,h>>8&255,h&255,l>>24,l>>16&255,l>>8&255,l&255],t),t+=8}),a.box(a.types.stts,Be(new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255]),e))}},{key:"stsc",value:function(s){var i=s.length,e=new Uint8Array(12*i),t=0;return s.forEach(function(n){var l=n.firstChunk,h=n.samplesPerChunk,o=n.sampleDescIndex;e.set([l>>24,l>>16&255,l>>8&255,l&255,h>>24,h>>16&255,h>>8&255,h&255,o>>24,o>>16&255,o>>8&255,o&255],t),t+=12}),a.box(a.types.stsc,Be(new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255]),e))}},{key:"stsz",value:function(s){var i=s.length,e=new Uint8Array(4*i),t=0;return s.forEach(function(n){e.set([n>>24,n>>16&255,n>>8&255,n&255],t),t+=4}),a.box(a.types.stsz,Be(new Uint8Array([0,0,0,0,0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255]),e))}},{key:"stco",value:function(s){var i=s.length,e=new Uint8Array(4*i),t=0;return s.forEach(function(n){e.set([n>>24,n>>16&255,n>>8&255,n&255],t),t+=4}),a.box(a.types.stco,Be(new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255]),e))}},{key:"stss",value:function(s){var i=s.length,e=new Uint8Array(4*i),t=0;return s.forEach(function(n){e.set([n>>24,n>>16&255,n>>8&255,n&255],t),t+=4}),a.box(a.types.stss,Be(new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255]),e))}},{key:"ctts",value:function(s){var i=s.length,e=new Uint8Array(8*i),t=0;return s.forEach(function(n){var l=n.value,h=n.count;e.set([h>>24,h>>16&255,h>>8&255,h&255,l>>24,l>>16&255,l>>8&255,l&255],t),t+=8}),a.box(a.types.ctts,Be(new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255]),e))}},{key:"styp",value:function(){return a.box(a.types.styp,new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120]))}},{key:"sidx",value:function(s){var i=s.timescale,e=s.samples[0].duration,t=e*s.samples.length,n=s.samples[0].sampleOffset*e,l=8;s.samples.forEach(function(c){l+=c.size});var h=0;if(s.isVideo){var o=0,u;s.videoSenc&&(u=s.videoSenc),s.isVideo&&u.forEach(function(c){o=o+8,c.subsamples&&c.subsamples.length&&(o=o+2,o=o+c.subsamples.length*6)}),s.videoSencLength=o,h=l+141+s.samples.length*16+o,s.useEME&&s.isAudioEncryption&&!s.isVideoEncryption&&(h=l+s.samples.length*16+84)}else h=l+116+s.samples.length*12,s.useEME&&s.isAudioEncryption&&(h=l+169+s.samples.length*12+8*s.audioSenc.length);var p=new Uint8Array([0,0,0,0,0,0,0,s.id&255,i>>24&255,i>>16&255,i>>8&255,i&255,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,0,0,0,1,0,h>>16&255,h>>8&255,h&255,t>>24&255,t>>16&255,t>>8&255,t&255,144,0,0,0]);return a.box(a.types.sidx,p)}},{key:"mdat",value:function(s){var i=a.box(a.types.mdat,s);return i}}]),a}();x(Q,"types",["avc1","avcC","hvc1","hvcC","dinf","dref","esds","ftyp","hdlr","mdat","mdhd","mdia","mfhd","minf","moof","moov","mp4a","mvex","mvhd","pasp","stbl","stco","stsc","stsd","stsz","stts","tfdt","tfhd","traf","trak","trex","tkhd","vmhd","smhd","ctts","stss","styp","pssh","sidx","sbgp","saiz","saio","senc","trun","encv","enca","sinf","btrt","frma","tenc","schm","schi","mehd","fiel","sdtp"].reduce(function(a,r){return a[r]=[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3)],a},Object.create(null)));x(Q,"HDLR_TYPES",{video:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),audio:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])});x(Q,"FTYPAVC1",Q.box(Q.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49])));x(Q,"FTYPHEV1",Q.box(Q.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,104,101,118,49])));x(Q,"DINF",Q.box(Q.types.dinf,Q.box(Q.types.dref,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]))));x(Q,"VMHD",Q.box(Q.types.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])));x(Q,"SMHD",Q.box(Q.types.smhd,new Uint8Array([0,0,0,0,0,0,0,0])));x(Q,"StblTable",new Uint8Array([0,0,0,0,0,0,0,0]));x(Q,"STTS",Q.box(Q.types.stts,Q.StblTable));x(Q,"STSC",Q.box(Q.types.stsc,Q.StblTable));x(Q,"STSZ",Q.box(Q.types.stsz,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])));x(Q,"STCO",Q.box(Q.types.stco,Q.StblTable));var St=function(){function a(r,s){he(this,a),this.name=r||"",this._prefix="[".concat(this.name,"]"),a.disabled=s}return oe(a,[{key:"debug",value:function(){var s;if(!a.disabled){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];(s=console).debug.apply(s,[this._prefix].concat(e))}}},{key:"log",value:function(){var s;if(!a.disabled){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];(s=console).log.apply(s,[this._prefix].concat(e))}}},{key:"warn",value:function(){var s;if(!a.disabled){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];(s=console).warn.apply(s,[this._prefix].concat(e))}}},{key:"error",value:function(){var s;if(!a.disabled){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];(s=console).error.apply(s,[this._prefix].concat(e))}}},{key:"table",value:function(){var s;a.disabled||(console.group(this._prefix),(s=console).table.apply(s,arguments),console.groupEnd())}}],[{key:"enable",value:function(){a.disabled=!1}},{key:"disable",value:function(){a.disabled=!0}}]),a}();x(St,"disabled",!0);var Lt=function(){function a(r,s,i){he(this,a),this.videoTrack=r,this.audioTrack=s;var e=/Chrome\/([^.]+)/.exec(navigator.userAgent);this.forceFirstIDR=e&&Number(e[1])<50,this.log=new St("FMP4Remuxer",i&&i.openLog?!i.openLog:!0)}return oe(a,[{key:"remux",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=this.videoTrack,t=this.audioTrack,n=e.exist(),l=t.exist(),h,o,u,p=[];s&&(i&&i.initMerge?(n&&p.push(this.videoTrack),l&&p.push(this.audioTrack),u=Q.initSegment(p)):(n&&(h=Q.initSegment([this.videoTrack])),l&&(o=Q.initSegment([this.audioTrack]))));var c,k;return n&&e.hasSample()&&(c=this._remuxVideo()),l&&t.hasSample()&&(k=this._remuxAudio()),e.samples=[],t.samples=[],{initSegment:u,videoInitSegment:h,audioInitSegment:o,videoSegment:c,audioSegment:k}}},{key:"_remuxVideo",value:function(){var s=this.videoTrack;this.forceFirstIDR&&(s.samples[0].flag={dependsOn:2,isNonSyncSample:0});var i=s.samples,e=0;i.forEach(function(f){e+=f.units.reduce(function(b,g){return b+g.byteLength},0),e+=f.units.length*4});for(var t=new Uint8Array(e),n=new DataView(t.buffer),l=function(b,g){g=i[h];var E=0;g.units.forEach(function(L){n.setUint32(b,L.byteLength),b+=4,t.set(L,b),b+=L.byteLength,E+=4+L.byteLength}),g.size=E,u=b,p=g},h=0,o=i.length,u=0,p;h<o;h++)l(u,p);var c=Q.mdat(t),k=Q.moof([s]);return Be(k,c)}},{key:"_remuxAudio",value:function(){var s=this.audioTrack,i=new Uint8Array(s.samples.reduce(function(n,l){return n+l.size},0));s.samples.reduce(function(n,l){return i.set(l.data,n),n+l.size},0);var e=Q.mdat(i),t=Q.moof([s]);return Be(t,e)}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset()}}]),a}();class Te{static create(...r){return new this(...r)}mixIn(r){return Object.assign(this,r)}clone(){const r=new this.constructor;return Object.assign(r,this),r}}class Re extends Te{constructor(r=[],s=r.length*4){super();let i=r;if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),(i instanceof Int8Array||i instanceof Uint8ClampedArray||i instanceof Int16Array||i instanceof Uint16Array||i instanceof Int32Array||i instanceof Uint32Array||i instanceof Float32Array||i instanceof Float64Array)&&(i=new Uint8Array(i.buffer,i.byteOffset,i.byteLength)),i instanceof Uint8Array){const e=i.byteLength,t=[];for(let n=0;n<e;n+=1)t[n>>>2]|=i[n]<<24-n%4*8;this.words=t,this.sigBytes=e}else this.words=r,this.sigBytes=s}static random(r){const s=[],i=e=>{let t=e,n=987654321;const l=4294967295;return()=>{n=36969*(n&65535)+(n>>16)&l,t=18e3*(t&65535)+(t>>16)&l;let h=(n<<16)+t&l;return h/=4294967296,h+=.5,h*(Math.random()>.5?1:-1)}};for(let e=0,t;e<r;e+=4){const n=i((t||Math.random())*4294967296);t=n()*987654071,s.push(n()*4294967296|0)}return new Re(s,r)}toString(r=ut){return r.stringify(this)}concat(r){const s=this.words,i=r.words,e=this.sigBytes,t=r.sigBytes;if(this.clamp(),e%4)for(let n=0;n<t;n+=1){const l=i[n>>>2]>>>24-n%4*8&255;s[e+n>>>2]|=l<<24-(e+n)%4*8}else for(let n=0;n<t;n+=4)s[e+n>>>2]=i[n>>>2];return this.sigBytes+=t,this}clamp(){const{words:r,sigBytes:s}=this;r[s>>>2]&=4294967295<<32-s%4*8,r.length=Math.ceil(s/4)}clone(){const r=super.clone.call(this);return r.words=this.words.slice(0),r}}const ut={stringify(a){const{words:r,sigBytes:s}=a,i=[];for(let e=0;e<s;e+=1){const t=r[e>>>2]>>>24-e%4*8&255;i.push((t>>>4).toString(16)),i.push((t&15).toString(16))}return i.join("")},parse(a){const r=a.length,s=[];for(let i=0;i<r;i+=2)s[i>>>3]|=parseInt(a.substr(i,2),16)<<24-i%8*4;return new Re(s,r/2)}},ln={stringify(a){const{words:r,sigBytes:s}=a,i=[];for(let e=0;e<s;e+=1){const t=r[e>>>2]>>>24-e%4*8&255;i.push(String.fromCharCode(t))}return i.join("")},parse(a){const r=a.length,s=[];for(let i=0;i<r;i+=1)s[i>>>2]|=(a.charCodeAt(i)&255)<<24-i%4*8;return new Re(s,r)}},ua={stringify(a){try{return decodeURIComponent(escape(ln.stringify(a)))}catch{throw new Error("Malformed UTF-8 data")}},parse(a){return ln.parse(unescape(encodeURIComponent(a)))}};class pa extends Te{constructor(){super(),this._minBufferSize=0}reset(){this._data=new Re,this._nDataBytes=0}_append(r){let s=r;typeof s=="string"&&(s=ua.parse(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes}_process(r){let s;const{_data:i,blockSize:e}=this,t=i.words,n=i.sigBytes,l=e*4;let h=n/l;r?h=Math.ceil(h):h=Math.max((h|0)-this._minBufferSize,0);const o=h*e,u=Math.min(o*4,n);if(o){for(let p=0;p<o;p+=e)this._doProcessBlock(t,p);s=t.splice(0,o),i.sigBytes-=u}return new Re(s,u)}clone(){const r=super.clone.call(this);return r._data=this._data.clone(),r}}class rl extends pa{constructor(r){super(),this.blockSize=512/32,this.cfg=Object.assign(new Te,r),this.reset()}static _createHelper(r){return(s,i)=>new r(i).finalize(s)}static _createHmacHelper(r){return(s,i)=>new ll(r,i).finalize(s)}reset(){super.reset.call(this),this._doReset()}update(r){return this._append(r),this._process(),this}finalize(r){return r&&this._append(r),this._doFinalize()}}class ll extends Te{constructor(r,s){super();const i=new r;this._hasher=i;let e=s;typeof e=="string"&&(e=ua.parse(e));const t=i.blockSize,n=t*4;e.sigBytes>n&&(e=i.finalize(s)),e.clamp();const l=e.clone();this._oKey=l;const h=e.clone();this._iKey=h;const o=l.words,u=h.words;for(let p=0;p<t;p+=1)o[p]^=1549556828,u[p]^=909522486;l.sigBytes=n,h.sigBytes=n,this.reset()}reset(){const r=this._hasher;r.reset(),r.update(this._iKey)}update(r){return this._hasher.update(r),this}finalize(r){const s=this._hasher,i=s.finalize(r);return s.reset(),s.finalize(this._oKey.clone().concat(i))}}const hl=(a,r,s)=>{const i=[];let e=0;for(let t=0;t<r;t+=1)if(t%4){const n=s[a.charCodeAt(t-1)]<<t%4*2,l=s[a.charCodeAt(t)]>>>6-t%4*2,h=n|l;i[e>>>2]|=h<<24-e%4*8,e+=1}return Re.create(i,e)},hn={stringify(a){const{words:r,sigBytes:s}=a,i=this._map;a.clamp();const e=[];for(let n=0;n<s;n+=3){const l=r[n>>>2]>>>24-n%4*8&255,h=r[n+1>>>2]>>>24-(n+1)%4*8&255,o=r[n+2>>>2]>>>24-(n+2)%4*8&255,u=l<<16|h<<8|o;for(let p=0;p<4&&n+p*.75<s;p+=1)e.push(i.charAt(u>>>6*(3-p)&63))}const t=i.charAt(64);if(t)for(;e.length%4;)e.push(t);return e.join("")},parse(a){let r=a.length;const s=this._map;let i=this._reverseMap;if(!i){this._reverseMap=[],i=this._reverseMap;for(let t=0;t<s.length;t+=1)i[s.charCodeAt(t)]=t}const e=s.charAt(64);if(e){const t=a.indexOf(e);t!==-1&&(r=t)}return hl(a,r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},B=[];for(let a=0;a<64;a+=1)B[a]=Math.abs(Math.sin(a+1))*4294967296|0;const Ee=(a,r,s,i,e,t,n)=>{const l=a+(r&s|~r&i)+e+n;return(l<<t|l>>>32-t)+r},Ze=(a,r,s,i,e,t,n)=>{const l=a+(r&i|s&~i)+e+n;return(l<<t|l>>>32-t)+r},Se=(a,r,s,i,e,t,n)=>{const l=a+(r^s^i)+e+n;return(l<<t|l>>>32-t)+r},Le=(a,r,s,i,e,t,n)=>{const l=a+(s^(r|~i))+e+n;return(l<<t|l>>>32-t)+r};class ol extends rl{_doReset(){this._hash=new Re([1732584193,4023233417,2562383102,271733878])}_doProcessBlock(r,s){const i=r;for(let Y=0;Y<16;Y+=1){const M=s+Y,N=r[M];i[M]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}const e=this._hash.words,t=i[s+0],n=i[s+1],l=i[s+2],h=i[s+3],o=i[s+4],u=i[s+5],p=i[s+6],c=i[s+7],k=i[s+8],f=i[s+9],b=i[s+10],g=i[s+11],E=i[s+12],L=i[s+13],C=i[s+14],F=i[s+15];let Z=e[0],X=e[1],T=e[2],G=e[3];Z=Ee(Z,X,T,G,t,7,B[0]),G=Ee(G,Z,X,T,n,12,B[1]),T=Ee(T,G,Z,X,l,17,B[2]),X=Ee(X,T,G,Z,h,22,B[3]),Z=Ee(Z,X,T,G,o,7,B[4]),G=Ee(G,Z,X,T,u,12,B[5]),T=Ee(T,G,Z,X,p,17,B[6]),X=Ee(X,T,G,Z,c,22,B[7]),Z=Ee(Z,X,T,G,k,7,B[8]),G=Ee(G,Z,X,T,f,12,B[9]),T=Ee(T,G,Z,X,b,17,B[10]),X=Ee(X,T,G,Z,g,22,B[11]),Z=Ee(Z,X,T,G,E,7,B[12]),G=Ee(G,Z,X,T,L,12,B[13]),T=Ee(T,G,Z,X,C,17,B[14]),X=Ee(X,T,G,Z,F,22,B[15]),Z=Ze(Z,X,T,G,n,5,B[16]),G=Ze(G,Z,X,T,p,9,B[17]),T=Ze(T,G,Z,X,g,14,B[18]),X=Ze(X,T,G,Z,t,20,B[19]),Z=Ze(Z,X,T,G,u,5,B[20]),G=Ze(G,Z,X,T,b,9,B[21]),T=Ze(T,G,Z,X,F,14,B[22]),X=Ze(X,T,G,Z,o,20,B[23]),Z=Ze(Z,X,T,G,f,5,B[24]),G=Ze(G,Z,X,T,C,9,B[25]),T=Ze(T,G,Z,X,h,14,B[26]),X=Ze(X,T,G,Z,k,20,B[27]),Z=Ze(Z,X,T,G,L,5,B[28]),G=Ze(G,Z,X,T,l,9,B[29]),T=Ze(T,G,Z,X,c,14,B[30]),X=Ze(X,T,G,Z,E,20,B[31]),Z=Se(Z,X,T,G,u,4,B[32]),G=Se(G,Z,X,T,k,11,B[33]),T=Se(T,G,Z,X,g,16,B[34]),X=Se(X,T,G,Z,C,23,B[35]),Z=Se(Z,X,T,G,n,4,B[36]),G=Se(G,Z,X,T,o,11,B[37]),T=Se(T,G,Z,X,c,16,B[38]),X=Se(X,T,G,Z,b,23,B[39]),Z=Se(Z,X,T,G,L,4,B[40]),G=Se(G,Z,X,T,t,11,B[41]),T=Se(T,G,Z,X,h,16,B[42]),X=Se(X,T,G,Z,p,23,B[43]),Z=Se(Z,X,T,G,f,4,B[44]),G=Se(G,Z,X,T,E,11,B[45]),T=Se(T,G,Z,X,F,16,B[46]),X=Se(X,T,G,Z,l,23,B[47]),Z=Le(Z,X,T,G,t,6,B[48]),G=Le(G,Z,X,T,c,10,B[49]),T=Le(T,G,Z,X,C,15,B[50]),X=Le(X,T,G,Z,u,21,B[51]),Z=Le(Z,X,T,G,E,6,B[52]),G=Le(G,Z,X,T,h,10,B[53]),T=Le(T,G,Z,X,b,15,B[54]),X=Le(X,T,G,Z,n,21,B[55]),Z=Le(Z,X,T,G,k,6,B[56]),G=Le(G,Z,X,T,F,10,B[57]),T=Le(T,G,Z,X,p,15,B[58]),X=Le(X,T,G,Z,L,21,B[59]),Z=Le(Z,X,T,G,o,6,B[60]),G=Le(G,Z,X,T,g,10,B[61]),T=Le(T,G,Z,X,l,15,B[62]),X=Le(X,T,G,Z,f,21,B[63]),e[0]=e[0]+Z|0,e[1]=e[1]+X|0,e[2]=e[2]+T|0,e[3]=e[3]+G|0}_doFinalize(){const r=this._data,s=r.words,i=this._nDataBytes*8,e=r.sigBytes*8;s[e>>>5]|=128<<24-e%32;const t=Math.floor(i/4294967296),n=i;s[(e+64>>>9<<4)+15]=(t<<8|t>>>24)&16711935|(t<<24|t>>>8)&4278255360,s[(e+64>>>9<<4)+14]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,r.sigBytes=(s.length+1)*4,this._process();const l=this._hash,h=l.words;for(let o=0;o<4;o+=1){const u=h[o];h[o]=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360}return l}clone(){const r=super.clone.call(this);return r._hash=this._hash.clone(),r}}class ul extends Te{constructor(r){super(),this.cfg=Object.assign(new Te,{keySize:128/32,hasher:ol,iterations:1},r)}compute(r,s){let i;const{cfg:e}=this,t=e.hasher.create(),n=Re.create(),l=n.words,{keySize:h,iterations:o}=e;for(;l.length<h;){i&&t.update(i),i=t.update(r).finalize(s),t.reset();for(let u=1;u<o;u+=1)i=t.finalize(i),t.reset();n.concat(i)}return n.sigBytes=h*4,n}}class li extends pa{constructor(r,s,i){super(),this.cfg=Object.assign(new Te,i),this._xformMode=r,this._key=s,this.reset()}static createEncryptor(r,s){return this.create(this._ENC_XFORM_MODE,r,s)}static createDecryptor(r,s){return this.create(this._DEC_XFORM_MODE,r,s)}static _createHelper(r){const s=i=>typeof i=="string"?ka:Hs;return{encrypt(i,e,t){return s(e).encrypt(r,i,e,t)},decrypt(i,e,t){return s(e).decrypt(r,i,e,t)}}}reset(){super.reset.call(this),this._doReset()}process(r){return this._append(r),this._process()}finalize(r){return r&&this._append(r),this._doFinalize()}}li._ENC_XFORM_MODE=1;li._DEC_XFORM_MODE=2;li.keySize=128/32;li.ivSize=128/32;class ca extends Te{constructor(r,s){super(),this._cipher=r,this._iv=s}static createEncryptor(r,s){return this.Encryptor.create(r,s)}static createDecryptor(r,s){return this.Decryptor.create(r,s)}}function da(a,r,s){const i=a;let e;const t=this._iv;t?(e=t,this._iv=void 0):e=this._prevBlock;for(let n=0;n<s;n+=1)i[r+n]^=e[n]}class si extends ca{}si.Encryptor=class extends si{processBlock(a,r){const s=this._cipher,{blockSize:i}=s;da.call(this,a,r,i),s.encryptBlock(a,r),this._prevBlock=a.slice(r,r+i)}};si.Decryptor=class extends si{processBlock(a,r){const s=this._cipher,{blockSize:i}=s,e=a.slice(r,r+i);s.decryptBlock(a,r),da.call(this,a,r,i),this._prevBlock=e}};const pl={pad(a,r){const s=r*4,i=s-a.sigBytes%s,e=i<<24|i<<16|i<<8|i,t=[];for(let l=0;l<i;l+=4)t.push(e);const n=Re.create(t,i);a.concat(n)},unpad(a){const r=a,s=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=s}};class ma extends li{constructor(r,s,i){super(r,s,Object.assign({mode:si,padding:pl},i)),this.blockSize=128/32}reset(){let r;super.reset.call(this);const{cfg:s}=this,{iv:i,mode:e}=s;this._xformMode===this.constructor._ENC_XFORM_MODE?r=e.createEncryptor:(r=e.createDecryptor,this._minBufferSize=1),this._mode=r.call(e,this,i&&i.words),this._mode.__creator=r}_doProcessBlock(r,s){this._mode.processBlock(r,s)}_doFinalize(){let r;const{padding:s}=this.cfg;return this._xformMode===this.constructor._ENC_XFORM_MODE?(s.pad(this._data,this.blockSize),r=this._process(!0)):(r=this._process(!0),s.unpad(r)),r}}class _i extends Te{constructor(r){super(),this.mixIn(r)}toString(r){return(r||this.formatter).stringify(this)}}const cl={stringify(a){let r;const{ciphertext:s,salt:i}=a;return i?r=Re.create([1398893684,1701076831]).concat(i).concat(s):r=s,r.toString(hn)},parse(a){let r;const s=hn.parse(a),i=s.words;return i[0]===1398893684&&i[1]===1701076831&&(r=Re.create(i.slice(2,4)),i.splice(0,4),s.sigBytes-=16),_i.create({ciphertext:s,salt:r})}};class Hs extends Te{static encrypt(r,s,i,e){const t=Object.assign(new Te,this.cfg,e),n=r.createEncryptor(i,t),l=n.finalize(s),h=n.cfg;return _i.create({ciphertext:l,key:i,iv:h.iv,algorithm:r,mode:h.mode,padding:h.padding,blockSize:n.blockSize,formatter:t.format})}static decrypt(r,s,i,e){let t=s;const n=Object.assign(new Te,this.cfg,e);return t=this._parse(t,n.format),r.createDecryptor(i,n).finalize(t.ciphertext)}static _parse(r,s){return typeof r=="string"?s.parse(r,this):r}}Hs.cfg=Object.assign(new Te,{format:cl});const dl={execute(a,r,s,i){let e=i;e||(e=Re.random(64/8));const t=ul.create({keySize:r+s}).compute(a,e),n=Re.create(t.words.slice(r),s*4);return t.sigBytes=r*4,_i.create({key:t,iv:n,salt:e})}};class ka extends Hs{static encrypt(r,s,i,e){const t=Object.assign(new Te,this.cfg,e),n=t.kdf.execute(i,r.keySize,r.ivSize);t.iv=n.iv;const l=Hs.encrypt.call(this,r,s,n.key,t);return l.mixIn(n),l}static decrypt(r,s,i,e){let t=s;const n=Object.assign(new Te,this.cfg,e);t=this._parse(t,n.format);const l=n.kdf.execute(i,r.keySize,r.ivSize,t.salt);return n.iv=l.iv,Hs.decrypt.call(this,r,t,l.key,n)}}ka.cfg=Object.assign(Hs.cfg,{kdf:dl});const Ve=[],fa=[],ya=[],ba=[],ga=[],va=[],pt=[],ct=[],dt=[],mt=[],es=[];for(let a=0;a<256;a+=1)a<128?es[a]=a<<1:es[a]=a<<1^283;let qe=0,cs=0;for(let a=0;a<256;a+=1){let r=cs^cs<<1^cs<<2^cs<<3^cs<<4;r=r>>>8^r&255^99,Ve[qe]=r,fa[r]=qe;const s=es[qe],i=es[s],e=es[i];let t=es[r]*257^r*16843008;ya[qe]=t<<24|t>>>8,ba[qe]=t<<16|t>>>16,ga[qe]=t<<8|t>>>24,va[qe]=t,t=e*16843009^i*65537^s*257^qe*16843008,pt[r]=t<<24|t>>>8,ct[r]=t<<16|t>>>16,dt[r]=t<<8|t>>>24,mt[r]=t,qe?(qe=s^es[es[es[e^s]]],cs^=es[es[cs]]):(cs=1,qe=cs)}const ml=[0,1,2,4,8,16,32,64,128,27,54];class Ea extends ma{_doReset(){let r;if(this._nRounds&&this._keyPriorReset===this._key)return;this._keyPriorReset=this._key;const s=this._keyPriorReset,i=s.words,e=s.sigBytes/4;this._nRounds=e+6;const n=(this._nRounds+1)*4;this._keySchedule=[];const l=this._keySchedule;for(let o=0;o<n;o+=1)o<e?l[o]=i[o]:(r=l[o-1],o%e?e>6&&o%e===4&&(r=Ve[r>>>24]<<24|Ve[r>>>16&255]<<16|Ve[r>>>8&255]<<8|Ve[r&255]):(r=r<<8|r>>>24,r=Ve[r>>>24]<<24|Ve[r>>>16&255]<<16|Ve[r>>>8&255]<<8|Ve[r&255],r^=ml[o/e|0]<<24),l[o]=l[o-e]^r);this._invKeySchedule=[];const h=this._invKeySchedule;for(let o=0;o<n;o+=1){const u=n-o;o%4?r=l[u]:r=l[u-4],o<4||u<=4?h[o]=r:h[o]=pt[Ve[r>>>24]]^ct[Ve[r>>>16&255]]^dt[Ve[r>>>8&255]]^mt[Ve[r&255]]}}encryptBlock(r,s){this._doCryptBlock(r,s,this._keySchedule,ya,ba,ga,va,Ve)}decryptBlock(r,s){const i=r;let e=i[s+1];i[s+1]=i[s+3],i[s+3]=e,this._doCryptBlock(i,s,this._invKeySchedule,pt,ct,dt,mt,fa),e=i[s+1],i[s+1]=i[s+3],i[s+3]=e}_doCryptBlock(r,s,i,e,t,n,l,h){const o=r,u=this._nRounds;let p=o[s]^i[0],c=o[s+1]^i[1],k=o[s+2]^i[2],f=o[s+3]^i[3],b=4;for(let F=1;F<u;F+=1){const Z=e[p>>>24]^t[c>>>16&255]^n[k>>>8&255]^l[f&255]^i[b];b+=1;const X=e[c>>>24]^t[k>>>16&255]^n[f>>>8&255]^l[p&255]^i[b];b+=1;const T=e[k>>>24]^t[f>>>16&255]^n[p>>>8&255]^l[c&255]^i[b];b+=1;const G=e[f>>>24]^t[p>>>16&255]^n[c>>>8&255]^l[k&255]^i[b];b+=1,p=Z,c=X,k=T,f=G}const g=(h[p>>>24]<<24|h[c>>>16&255]<<16|h[k>>>8&255]<<8|h[f&255])^i[b];b+=1;const E=(h[c>>>24]<<24|h[k>>>16&255]<<16|h[f>>>8&255]<<8|h[p&255])^i[b];b+=1;const L=(h[k>>>24]<<24|h[f>>>16&255]<<16|h[p>>>8&255]<<8|h[c&255])^i[b];b+=1;const C=(h[f>>>24]<<24|h[p>>>16&255]<<16|h[c>>>8&255]<<8|h[k&255])^i[b];b+=1,o[s]=g,o[s+1]=E,o[s+2]=L,o[s+3]=C}}Ea.keySize=256/32;const kl=ma._createHelper(Ea);class ii extends ca{}ii.Encryptor=class extends ii{processBlock(a,r){const s=a,i=this._cipher,{blockSize:e}=i,t=this._iv;let n=this._counter;t&&(this._counter=t.slice(0),n=this._counter,this._iv=void 0);const l=n.slice(0);i.encryptBlock(l,0),n[e-1]=n[e-1]+1|0;for(let h=0;h<e;h+=1)s[r+h]^=l[h]}};ii.Decryptor=ii.Encryptor;const fl={pad(){},unpad(){}};var bi={decryptWordArray:function(r,s,i){var e=ut.parse(s),t=ut.parse(Qr(i)),n=Re.create(new Uint8Array(r)),l=kl.decrypt(_i.create({ciphertext:n}),e,{iv:t,mode:ii,padding:fl});return bi.wordArrayToUint8Array(l)},wordArrayToUint8Array:function(r){for(var s=r.sigBytes,i=r.words,e=new Uint8Array(s),t=0,n=0;t!==s;){var l=i[n++];if(e[t++]=(l&4278190080)>>>24,t===s||(e[t++]=(l&16711680)>>>16,t===s)||(e[t++]=(l&65280)>>>8,t===s))break;e[t++]=l&255}return e},decoderAESCTRData:function(r,s,i){if(r.videoSenc){var e=r.kidValue,t=r.videoSenc;r.samples.forEach(function(h,o){var u=t[o],p=h.data,c=[],k=[],f=u.InitializationVector;if(u.subsamples&&u.subsamples.length)u.subsamples.forEach(function(C){var F=C.BytesOfClearData+C.BytesOfProtectedData,Z=p.slice(0,F);c.push(Z.slice(0,C.BytesOfClearData)),k.push(Z.slice(C.BytesOfClearData)),p=p.slice(F)});else{var b=h.size;c.push(p.slice(0,0)),k.push(p.slice(0,b)),p=p.slice(b)}var g=new be;g.write.apply(g,k);var E=i?i(g.buffer,e,f):bi.decryptWordArray(g.buffer,e,f),L=new be;c.forEach(function(C,F){var Z=k[F].length,X=E.slice(0,Z);L.write(C),L.write(X),E=E.slice(Z)}),r.samples[o].data=L.buffer})}if(s.audioSenc){var n=s.kidValue,l=s.audioSenc;s.samples.forEach(function(h,o){var u=l[o],p=i?i(h.data,n,u.InitializationVector):bi.decryptWordArray(h.data,n,u.InitializationVector);s.samples[o].data=p})}}},on=20,yl=function(){function a(r,s,i,e){var t=this;he(this,a),x(this,"_videoSamples",[]),x(this,"_audioSamples",[]),x(this,"_lastRemainBuffer",[]),x(this,"_lastRemainBufferStartPos",0),this.videoTrack=new Ri,this.audioTrack=new xi,this.metadataTrack=i||new Vi,this.log=new St("MP4Demuxer",e&&e.openLog?!e.openLog:!0),r&&r.forEach(function(n){var l;(l=t._videoSamples).push.apply(l,Xe(n.frames))}),s&&s.forEach(function(n){var l;(l=t._audioSamples).push.apply(l,Xe(n.frames))})}return oe(a,[{key:"parseSamples",value:function(s){if(!s)throw new Error("moov is required");if(!this.videoTrack.codec&&!this.audioTrack.codec&&(ne.moovToTrack(s,this.videoTrack,this.audioTrack),this.videoSenc=this.videoTrack.videoSenc,this.audioSenc=this.audioTrack.audioSenc),!this._audioSamples.length&&!this._videoSamples.length){var i=ne.moovToSamples(s);if(!i)throw new Error("cannot parse samples from moov box");this._videoSamples=i.videoSamples||[],this._audioSamples=i.audioSamples||[]}}},{key:"demux",value:function(s,i,e,t,n){this.parseSamples(n);var l=this.videoTrack,h=this.audioTrack;l.samples=[],h.samples=[];var o,u,p;if(e){for(var c,k=0,f=e[0],b=e[1];f<=b;f++){if(o=this._videoSamples[f],!o)throw new Error("cannot found video frame #".concat(f));p=o.offset-i,u=s.subarray(p,p+o.size),c=new ei(o.pts||o.dts,o.dts),c.duration=o.duration,c.gopId=o.gopId,o.keyframe&&c.setToKeyframe();for(var g=0,E=u.length-1;g<E;)k=H(u,g),g+=4,c.units.push(u.subarray(g,g+k)),g+=k;l.samples.push(c)}l.baseMediaDecodeTime=l.samples[0].dts}if(t){for(var L=t[0],C=t[1];L<=C;L++){if(o=this._audioSamples[L],!o)throw new Error("cannot found video frame #".concat(L));p=o.offset-i,u=s.subarray(p,p+o.size),h.samples.push(new gs(o.dts,u,o.duration))}h.baseMediaDecodeTime=h.samples[0].dts}return{videoTrack:l,audioTrack:h,metadataTrack:this.metadataTrack}}},{key:"demuxPart",value:function(s,i,e,t,n,l,h,o){if(this.parseSamples(n),this.videoTrack.useEME=l,this.audioTrack.useEME=l,this._lastRemainBuffer&&this._lastRemainBuffer.byteLength>0&&i>this._lastRemainBufferStartPos&&i<=this._lastRemainBufferStartPos+this._lastRemainBuffer.byteLength)for(var u=0;u<on;)try{var p=this._lastRemainBuffer.subarray(0,i-this._lastRemainBufferStartPos),c=new Uint8Array(s.byteLength+p.byteLength);c.set(p,0),c.set(new Uint8Array(s),p.byteLength),s=c,i-=p.byteLength,this._lastRemainBuffer=null,this._lastRemainBufferStartPos=0;break}catch(d){if(u<on)u++;else throw new Error("new Uint8Array error:,"+d.errorMessage)}var k=this.videoTrack,f=this.audioTrack;k.samples=[],f.samples=[],k.videoSenc=null,f.audioSenc=null;var b,g,E,L=0,C=0;if(this._videoSamples.length>0&&e.length>0){for(var F,Z=s.byteLength+i,X=e[0];X<=e[1];X++){if(b=this._videoSamples[X],!b)throw new Error("cannot found video frame #".concat(X));b.offset>=i&&b.offset+b.size<=Z&&(E=b.offset-i,L=E+b.size,g=s.subarray(E,L),F=new ei(b.pts||b.dts,b.dts),F.duration=b.duration,F.gopId=b.gopId,F.sampleOffset=b.index,b.keyframe&&F.setToKeyframe(),F.data=g,F.size=b.size,k.samples.push(F))}k.samples.length>0&&(k.gopId=k.samples[0].gopId,k.baseMediaDecodeTime=k.samples[0].dts,k.startPts=k.samples[0].pts/k.timescale,k.endPts=k.samples[k.samples.length-1].pts/k.timescale,this.videoSenc&&(k.videoSenc=this.videoSenc.slice(k.samples[0].sampleOffset,k.samples[0].sampleOffset+k.samples.length),k.kidValue=h))}if(this._audioSamples.length>0&&t.length>0){for(var T=t[0];T<=t[1];T++){if(b=this._audioSamples[T],!b)throw new Error("cannot found video frame #".concat(T));b.offset>=i&&b.offset+b.size<=s.byteLength+i&&(E=b.offset-i,C=E+b.size,g=s.subarray(E,C),f.samples.push(new gs(b.dts,g,b.duration,b.index)))}f.samples.length>0&&(f.gopId=f.samples[0].gopId||k.gopId,f.baseMediaDecodeTime=f.samples[0].dts,f.startPts=f.samples[0].pts/f.timescale,f.endPts=f.samples[f.samples.length-1].pts/f.timescale,this.audioSenc&&(f.audioSenc=this.audioSenc.slice(f.samples[0].sampleOffset,f.samples[0].sampleOffset+f.samples.length),f.kidValue=h))}this.decoderData(k,f,o);for(var G=0,Y=0;Y<k.samples.length;Y++)for(var M=0,N=k.samples[Y].data,m=N.length-1;M<m;)G=H(N,M),M+=4,k.samples[Y].units.push(N.subarray(M,M+G)),M+=G;return this._lastRemainBuffer=s.subarray(Math.max(L,C)),this._lastRemainBuffer.byteLength>0?this._lastRemainBufferStartPos=i+s.byteLength-this._lastRemainBuffer.byteLength:this._lastRemainBufferStartPos=0,{videoTrack:k,audioTrack:f,metadataTrack:this.metadataTrack}}},{key:"reset",value:function(){this._videoSamples=[],this._audioSamples=[],this._lastRemainBuffer=null,this._lastRemainBufferStartPos=0,this.videoTrack.reset(),this.audioTrack.reset(),this.metadataTrack.reset()}},{key:"decoderData",value:function(s,i,e){s.useEME||i.useEME||bi.decoderAESCTRData(s,i,e)}}],[{key:"probe",value:function(s){return ne.probe(s)}}]),a}(),bl=function(){function a(){fe(this,a);var r=window.crypto||window.msCrypto;this.subtle=r&&(r.subtle||r.webkitSubtle),this.externalDecryptor=null}return ye(a,[{key:"destroy",value:function(){var s;(s=this.externalDecryptor)!==null&&s!==void 0&&s.destroy&&this.externalDecryptor.destroy()}},{key:"decrypt",value:function(s,i){if(!(!s&&!i)){var e=[];return s&&(e[0]=this._decryptSegment(s)),i&&(e[1]=this._decryptSegment(i)),Promise.all(e)}}},{key:"_decryptSegment",value:function(){var r=se(U().mark(function i(e){var t;return U().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.data,!e.key){l.next=5;break}return l.next=4,this._decryptData(e.data,e.key,e.keyIv);case 4:t=l.sent;case 5:if(e.map){l.next=7;break}return l.abrupt("return",t);case 7:return l.abrupt("return",Ts(e.map,t));case 8:case"end":return l.stop()}},i,this)}));function s(i){return r.apply(this,arguments)}return s}()},{key:"_decryptData",value:function(){var r=se(U().mark(function i(e,t,n){var l;return U().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.externalDecryptor){o.next=6;break}return o.next=3,this.externalDecryptor.decrypt(e,t,n);case 3:return o.abrupt("return",o.sent);case 6:if(this.subtle){o.next=8;break}throw new Error("crypto is not defined");case 8:return o.next=10,this.subtle.importKey("raw",t,{name:"AES-CBC"},!1,["encrypt","decrypt"]);case 10:return l=o.sent,o.t0=Uint8Array,o.next=14,this.subtle.decrypt({name:"AES-CBC",iv:n},l,e);case 14:return o.t1=o.sent,o.abrupt("return",new o.t0(o.t1));case 16:case"end":return o.stop()}},i,this)}));function s(i,e,t){return r.apply(this,arguments)}return s}()}]),a}(),$=re(re({},_),{},{STREAM_PARSED:"core.streamparsed",NO_AUDIO_TRACK:"core.noaudiotrack",SUBTITLE_SEGMENTS:"core.subtitlesegments",SUBTITLE_PLAYLIST:"core.subtitleplaylist",SEI_PAYLOAD_TIME:"core.seipayloadtime",APPEND_COST:"core.appendcost"}),ci=new Fe("Transmuxer"),un=function(){function a(r,s,i){fe(this,a),W(this,"_initSegmentId",""),this.hls=r,this._demuxer=s?new nl:new oa,this._isMP4=s,i&&(this._remuxer=new Lt(this._demuxer.videoTrack,this._demuxer.audioTrack))}return ye(a,[{key:"transmux",value:function(s,i,e,t,n,l){var h=this._demuxer;try{this._isMP4?h.demux(s,i):h.demuxAndFix(Ts(s,i),e,t,n)}catch(F){throw new pe(q.DEMUX,q.SUB_TYPES.HLS,F)}var o=h.videoTrack,u=h.audioTrack,p=h.metadataTrack,c="".concat(o.codec,"/").concat(o.width,"/").concat(o.height,"/").concat(u.codec,"/").concat(u.config);if(c!==this._initSegmentId&&(this._initSegmentId=c,l=!0),this._fireEvents(o,u,p,e||l),this.hls.emit($.DEMUXED_TRACK,{videoTrack:o,audioTrack:u}),this._remuxer)try{var k=this._remuxer.remux(l),f=k.videoInitSegment,b=k.videoSegment,g=k.audioInitSegment,E=k.audioSegment,L=Ts(f,b),C=Ts(g,E);return[L?{codec:o.codec,data:L}:void 0,C?{codec:u.codec,data:C}:void 0]}catch(F){throw new pe(q.REMUX,q.SUB_TYPES.FMP4,F)}else return[o,u]}},{key:"_fireEvents",value:function(s,i,e,t){var n=this;ci.debug(s.samples,i.samples),t&&(s.exist()&&this.hls.emit($.METADATA_PARSED,{type:"video",track:s,meta:{codec:s.codec,timescale:s.timescale,width:s.width,height:s.height,sarRatio:s.sarRatio,baseDts:s.baseDts}}),i.exist()&&this.hls.emit($.METADATA_PARSED,{type:"audio",track:i,meta:{codec:i.codec,channelCount:i.channelCount,sampleRate:i.sampleRate,timescale:i.timescale,baseDts:i.baseDts}}),ci.debug("discontinuity",s,i)),s.warnings.forEach(function(l){var h;switch(l.type){case de.LARGE_AV_SHIFT:h=$.LARGE_AV_FIRST_FRAME_GAP_DETECT;break;case de.LARGE_VIDEO_GAP:h=$.LARGE_VIDEO_DTS_GAP_DETECT;break;case de.LARGE_VIDEO_GAP_BETWEEN_CHUNK:h=$.MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT;break}h&&n.hls.emit($.STREAM_EXCEPTION,re(re({},l),{},{type:h})),ci.warn("video exception",l)}),i.warnings.forEach(function(l){var h;switch(l.type){case de.LARGE_AUDIO_GAP:h=$.LARGE_AUDIO_DTS_GAP_DETECT;break;case de.AUDIO_FILLED:h=$.AUDIO_GAP_DETECT;break;case de.AUDIO_DROPPED:h=$.AUDIO_OVERLAP_DETECT;break}h&&n.hls.emit($.STREAM_EXCEPTION,re(re({},l),{},{type:h})),ci.warn("audio exception",l)}),s.samples.forEach(function(l){l.keyframe&&n.hls.emit($.KEYFRAME,{pts:l.pts})}),e.seiSamples.forEach(function(l){n.hls.emit($.SEI,re(re({},l),{},{originPts:l.originPts/90,sei:{code:l.data.type,content:l.data.payload,dts:l.pts}}))})}}]),a}(),pn=new Fe("BufferService"),gl=function(){function a(r){fe(this,a),W(this,"_decryptor",new bl),W(this,"_transmuxer",null),W(this,"_mse",null),W(this,"_softVideo",null),W(this,"_sourceCreated",!1),W(this,"_needInitSegment",!0),W(this,"_directAppend",!1),this.hls=r,r.config.softDecode?this._softVideo=r.media:(this._mse=new ce,r.config.url&&this._mse.bindMedia(r.media)),r.config.decryptor&&(this._decryptor.externalDecryptor=r.config.decryptor)}return ye(a,[{key:"baseDts",get:function(){var s,i,e;return(s=this._transmuxer)===null||s===void 0||(i=s._demuxer)===null||i===void 0||(e=i._fixer)===null||e===void 0?void 0:e._baseDts}},{key:"nbSb",get:function(){var s;return(s=this._mse)!==null&&s!==void 0&&s._sourceBuffer?Object.keys(this._mse._sourceBuffer).length:0}},{key:"msIsOpend",get:function(){var s;return(s=this._mse)===null||s===void 0?void 0:s.isOpened}},{key:"updateDuration",value:function(){var r=se(U().mark(function i(e){return U().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(pn.debug("update duration",e),!this._mse){n.next=9;break}if(this._mse.isOpened){n.next=5;break}return n.next=5,this._mse.open();case 5:return n.next=7,this._mse.updateDuration(e);case 7:n.next=10;break;case 9:this._softVideo&&(this._softVideo.duration=e);case 10:case"end":return n.stop()}},i,this)}));function s(i){return r.apply(this,arguments)}return s}()},{key:"createSource",value:function(s,i,e,t){if(!this._sourceCreated){var n=s||i;if(n){if(oa.probe(n))this._transmuxer||(this._transmuxer=new un(this.hls,!1,!this._softVideo));else if(ne.probe(n))if(this._softVideo)this._transmuxer||(this._transmuxer=new un(this.hls,!0));else{this._directAppend=!0;var l=!1;s&&!e&&ne.findBox(s,["moov","trak"]).forEach(function(h){var o=ne.findBox(h.data,["trak","mdia","minf","stbl","stsd"])[0];if(o){var u=ne.stsd(o).entries[0];if(u){if(u.hvcC)e=u.hvcC.codec||"hev1.1.6.L93.B0";else if(u.avcC)e=u.avcC.codec;else if(u.sampleRate||u.esds){var p;t=((p=u.esds)===null||p===void 0?void 0:p.codec)||"mp4a.40.2",l=!0}}}}),i&&!t&&ne.findBox(i,["moov","trak","mdia","minf","stbl","stsd"]).forEach(function(h){var o=ne.stsd(h).entries[0];o&&o.esds&&(t=o.esds.codec)}),s&&!e&&(e="avc1.42e01e"),i&&!t&&(t="mp4a.40.2"),l&&(e+=", ".concat(t),t=""),this._createMseSource(e,t)}else throw new pe(q.OTHER,null,null,null,"unsupported stream");this._softVideo&&(this._sourceCreated=!0)}}}},{key:"appendBuffer",value:function(){var r=se(U().mark(function i(e,t,n,l,h,o,u){var p,c,k,f,b,g,E,L,C;return U().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(!(!(n!=null&&n.length)&&!(l!=null&&l.length))){Z.next=2;break}return Z.abrupt("return");case 2:if(!this._directAppend){Z.next=7;break}return p=[],n&&p.push(this._mse.append(ce.VIDEO,n)),l&&p.push(this._mse.append(ce.AUDIO,l)),Z.abrupt("return",Promise.all(p));case 7:if(c=this._needInitSegment||h,k=this._transmuxer.transmux(n,l,h,o,u,this._needInitSegment||h),f=bs(k,2),b=f[0],g=f[1],l&&t&&(t==null||t.setTrackExist(!1,!0)),l&&e&&(e==null||e.setTrackExist(!0,!1)),t||e==null||e.setTrackExist(!!b,!!g),b&&!g&&this.hls.emit($.NO_AUDIO_TRACK),!this._softVideo){Z.next=18;break}this._softVideo.appendBuffer(b,g),this._needInitSegment=!1,Z.next=28;break;case 18:if(!this._mse){Z.next=28;break}return E=!this._sourceCreated,E&&this._createMseSource(b==null?void 0:b.codec,g==null?void 0:g.codec),this._needInitSegment=!1,L=this._mse,C=[],c&&!E&&this._handleCodecChange(b,g),b&&C.push(L.append(ce.VIDEO,b.data)),g&&C.push(L.append(ce.AUDIO,g.data)),Z.abrupt("return",Promise.all(C));case 28:case"end":return Z.stop()}},i,this)}));function s(i,e,t,n,l,h,o){return r.apply(this,arguments)}return s}()},{key:"removeBuffer",value:function(){var r=se(U().mark(function i(){var e=this,t,n,l,h=arguments;return U().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=h.length>0&&h[0]!==void 0?h[0]:0,n=h.length>1&&h[1]!==void 0?h[1]:1/0,l=this.hls.media,!(!this._mse||!l||t<0||n<t||t>=this._mse.duration)){u.next=5;break}return u.abrupt("return");case 5:return u.abrupt("return",this._mse.clearBuffer(t,n).then(function(){return e.hls.emit(_.REMOVE_BUFFER,{start:t,end:n,removeEnd:n})}));case 6:case"end":return u.stop()}},i,this)}));function s(){return r.apply(this,arguments)}return s}()},{key:"evictBuffer",value:function(){var r=se(U().mark(function i(e){var t,n,l,h;return U().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=this.hls.media,!(!this._mse||!t||!e||e<0)){u.next=3;break}return u.abrupt("return");case 3:if(n=t.currentTime,l=n-e,!(l<=0)){u.next=7;break}return u.abrupt("return");case 7:if(h=me.start(me.get(t)),!(h+1>=l)){u.next=10;break}return u.abrupt("return");case 10:return u.abrupt("return",this.removeBuffer(0,l));case 11:case"end":return u.stop()}},i,this)}));function s(i){return r.apply(this,arguments)}return s}()},{key:"clearAllBuffer",value:function(){var r=se(U().mark(function i(){return U().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._mse){t.next=2;break}return t.abrupt("return",this._mse.clearAllBuffer());case 2:case"end":return t.stop()}},i,this)}));function s(){return r.apply(this,arguments)}return s}()},{key:"decryptBuffer",value:function(s,i){return this._decryptor.decrypt(s,i)}},{key:"reset",value:function(){var r=se(U().mark(function i(){var e,t=arguments;return U().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(e=t.length>0&&t[0]!==void 0?t[0]:!1,!(this._mse&&!e)){l.next=8;break}return this._transmuxer=null,this._sourceCreated=!1,l.next=6,this._mse.unbindMedia();case 6:return l.next=8,this._mse.bindMedia(this.hls.media);case 8:this._needInitSegment=!0,this._directAppend=!1;case 10:case"end":return l.stop()}},i,this)}));function s(){return r.apply(this,arguments)}return s}()},{key:"endOfStream",value:function(){var r=se(U().mark(function i(){return U().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._mse){t.next=5;break}if(!this._sourceCreated){t.next=5;break}return t.next=4,this._mse.endOfStream();case 4:this.hls.emit(_.BUFFEREOS);case 5:this._softVideo&&this._softVideo.endOfStream();case 6:case"end":return t.stop()}},i,this)}));function s(){return r.apply(this,arguments)}return s}()},{key:"setLiveSeekableRange",value:function(){var r=se(U().mark(function i(e,t){return U().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:this._mse&&this._mse.setLiveSeekableRange(e,t);case 1:case"end":return l.stop()}},i,this)}));function s(i,e){return r.apply(this,arguments)}return s}()},{key:"destroy",value:function(){var r=se(U().mark(function i(){var e;return U().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if((e=this._decryptor)===null||e===void 0||e.destroy(),!this._mse){n.next=4;break}return n.next=4,this._mse.unbindMedia();case 4:this._decryptor=null,this._mse=null,this._softVideo=null;case 7:case"end":return n.stop()}},i,this)}));function s(){return r.apply(this,arguments)}return s}()},{key:"_createMseSource",value:function(s,i){pn.debug("create mse source, videoCodec=".concat(s,", audioCodec=").concat(i));var e=this._mse;e&&(s&&(e.createSource(ce.VIDEO,"video/mp4;codecs=".concat(s)),this._sourceCreated=!0),i&&(e.createSource(ce.AUDIO,"audio/mp4;codecs=".concat(i)),this._sourceCreated=!0),this.hls.emit(_.SOURCEBUFFER_CREATED))}},{key:"_handleCodecChange",value:function(s,i){var e=this._mse,t=[{type:ce.VIDEO,codecs:s==null?void 0:s.codec},{type:ce.AUDIO,codecs:i==null?void 0:i.codec}];t.filter(function(n){return!!n.codecs}).forEach(function(n){var l=n.type,h=n.codecs,o=e.getSourceBuffer(l);if(o){var u=h.split(",")[0];new RegExp(u,"ig").test(o.mimeType)||e.changeType(l,"".concat(l,"/mp4;codecs=").concat(h))}})}},{key:"seamlessSwitch",value:function(){this._needInitSegment=!0}},{key:"isFull",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ce.VIDEO;return this._mse.isFull(s)}}]),a}();function vl(a){var r=(a==null?void 0:a.media)||document.createElement("video");return re(re({maxPlaylistSize:50,retryCount:3,retryDelay:1e3,pollRetryCount:2,loadTimeout:1e4,preloadTime:30,softDecode:!1,bufferBehind:10,maxJumpDistance:3,startTime:0,useLowLatency:!0,targetLatency:10,maxLatency:20,allowedStreamTrackChange:!0,seiInTime:!1,manifestList:[],minSegmentsStartPlay:3},a),{},{media:r})}var El=ye(function a(){fe(this,a),W(this,"version",0),W(this,"streams",[]),W(this,"isMaster",!0)}),Za={Audio:"AUDIO",Video:"VIDEO",SubTitle:"SUBTITLE",ClosedCaptions:"CLOSED-CAPTIONS"},Ft=ye(function a(){fe(this,a),W(this,"id",0),W(this,"url",""),W(this,"default",!1),W(this,"autoSelect",!1),W(this,"forced",!1),W(this,"group",""),W(this,"name",""),W(this,"lang",""),W(this,"segments",[]),W(this,"endSN",0)}),Zl=function(a){Wi(s,a);var r=Ti(s);function s(){var i;fe(this,s);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i=r.call.apply(r,[this].concat(t)),W(j(i),"mediaType",Za.Audio),W(j(i),"channels",0),i}return ye(s)}(Ft),Sl=function(a){Wi(s,a);var r=Ti(s);function s(){var i;fe(this,s);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i=r.call.apply(r,[this].concat(t)),W(j(i),"mediaType",Za.SubTitle),i}return ye(s)}(Ft),Ll=ye(function a(){fe(this,a),W(this,"id",0),W(this,"bitrate",0),W(this,"width",0),W(this,"height",0),W(this,"name",""),W(this,"url",""),W(this,"audioCodec",""),W(this,"videoCodec",""),W(this,"textCodec",""),W(this,"audioGroup",""),W(this,"audioStreams",[]),W(this,"subtitleStreams",[]),W(this,"closedCaptionsStream",[])}),Fl=ye(function a(){fe(this,a),W(this,"version",0),W(this,"url",""),W(this,"type",""),W(this,"startCC",0),W(this,"endCC",0),W(this,"startSN",0),W(this,"endSN",0),W(this,"totalDuration",0),W(this,"targetDuration",0),W(this,"partTargetDuration",0),W(this,"canSkipUntil",0),W(this,"canSkipDateRanges",!1),W(this,"skippedSegments",0),W(this,"canBlockReload",!1),W(this,"partHoldBack",0),W(this,"live",!0),W(this,"lowLatency",!1),W(this,"endPartIndex",0),W(this,"segments",[])}),di=function(){function a(){fe(this,a),W(this,"sn",0),W(this,"cc",0),W(this,"url",""),W(this,"title",""),W(this,"start",0),W(this,"duration",0),W(this,"dataTime",""),W(this,"key",null),W(this,"byteRange",null),W(this,"isInitSegment",!1),W(this,"initSegment",null),W(this,"isLast",!1),W(this,"hasAudio",!1),W(this,"hasVideo",!1),W(this,"independent",!1),W(this,"partIndex",0)}return ye(a,[{key:"end",get:function(){return this.start+this.duration}},{key:"setTrackExist",value:function(s,i){this.hasVideo=s,this.hasAudio=i}},{key:"setByteRange",value:function(s,i){this.byteRange=[0];var e=s.split("@");e.length===1&&i&&i.byteRange?(this.byteRange[0]=i.byteRange[1]||0,this.byteRange[0]&&(this.byteRange[0]+=1)):this.byteRange[0]=parseInt(e[1]),this.byteRange[1]=this.byteRange[0]+parseInt(e[0])-1}}]),a}(),Cl=function(){function a(r){fe(this,a),W(this,"method",""),W(this,"url",""),W(this,"iv",null),W(this,"keyFormat",""),W(this,"keyFormatVersions",""),r instanceof a&&(this.method=r.method,this.url=r.url,this.keyFormat=r.keyFormat,this.keyFormatVersions=r.keyFormatVersions,r.iv&&(this.iv=new Uint8Array(r.iv)))}return ye(a,[{key:"clone",value:function(s){var i=new a(this);return s!=null&&i.setIVFromSN(s),i}},{key:"setIVFromSN",value:function(s){if(!this.iv&&this.method==="AES-128"&&typeof s=="number"&&this.url){this.iv=new Uint8Array(16);for(var i=12;i<16;i++)this.iv[i]=s>>8*(15-i)&255}}}]),a}(),Xl=/^#(EXT[^:]*)(?::(.*))?$/,cn=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g,wl=/^(?:[a-zA-Z0-9+\-.]+:)?\/\//,Gl=/^((?:[a-zA-Z0-9+\-.]+:)?\/\/[^/?#]*)?([^?#]*\/)?/;function Wl(a){return a.split(/[\r\n]/).map(function(r){return r.trim()}).filter(Boolean)}function Sa(a){var r=a.match(Xl);if(!(!r||!r[1]))return[r[1].replace("EXT-X-",""),r[2]]}function ws(a){for(var r={},s=cn.exec(a);s;)r[s[1]]=s[2]||s[3],s=cn.exec(a);return r}function Ps(a,r){if(!r||!a||wl.test(a))return a;var s=Gl.exec(r);return s?a[0]==="/"?s[1]+a:s[1]+s[2]+a:a}var Tl={audio:[/^mp4a/,/^vorbis$/,/^opus$/,/^flac$/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Qi(a,r){var s=Tl[a];if(!(!s||!r||!r.length)){for(var i=0;i<s.length;i++)for(var e=0;e<r.length;e++)if(s[i].test(r[e]))return r[e]}}function Rl(a,r){for(var s=new El,i=0,e,t=[],n=[];e=a[i++];){var l=Sa(e);if(l){var h=bs(l,2),o=h[0],u=h[1];if(o==="VERSION")s.version=parseInt(u);else if(o==="MEDIA"&&u){var p=ws(u),c=void 0;switch(p.TYPE){case"AUDIO":c=new Zl;break;case"SUBTITLES":c=new Sl;break;default:c=new Ft}c.url=Ps(p.URI,r),c.default=p.DEFAULT==="YES",c.autoSelect=p.AUTOSELECT==="YES",c.group=p["GROUP-ID"],c.name=p.NAME,c.lang=p.LANGUAGE,p.CHANNELS&&(c.channels=Number(p.CHANNELS.split("/")[0]),Number.isNaN(c.channels)&&(c.channels=0)),p.TYPE==="AUDIO"&&p.URI&&t.push(c),p.TYPE==="SUBTITLES"&&n.push(c)}else if(o==="STREAM-INF"&&u){var k=new Ll,f=ws(u);if(k.bitrate=parseInt(f["AVERAGE-BANDWIDTH"]||f.BANDWIDTH),k.name=f.NAME,k.url=Ps(a[i++],r),f.RESOLUTION){var b=f.RESOLUTION.split("x"),g=bs(b,2),E=g[0],L=g[1];k.width=parseInt(E),k.height=parseInt(L)}if(f.CODECS){var C=f.CODECS.split(/[ ,]+/).filter(Boolean);k.videoCodec=Qi("video",C),k.audioCodec=Qi("audio",C),k.textCodec=Qi("text",C)}k.audioGroup=f.AUDIO,k.subtitleGroup=f.SUBTITLES,s.streams.push(k)}}}return s.streams.forEach(function(F,Z){F.id=Z}),t.length&&(t.forEach(function(F,Z){F.id=Z}),s.streams.forEach(function(F){F.audioGroup&&(F.audioStreams=t.filter(function(Z){return Z.group===F.audioGroup}))})),n.length&&(n.forEach(function(F,Z){F.id=Z}),s.streams.forEach(function(F){F.subtitleGroup&&(F.subtitleStreams=n.filter(function(Z){return Z.group===F.subtitleGroup}))})),s}function xl(a,r,s){var i=new Fl;i.url=r;for(var e=new di,t=null,n=null,l=0,h=0,o=0,u=0,p,c=!1,k=0;(p=a[u++])&&!c;){if(p[0]!=="#"){if(i.lowLatency){h++;continue}e.sn=h,e.cc=o,e.url=Ps(p,r),n&&(e.key=n.clone(h)),t&&(e.initSegment=t),i.segments.push(e),e=new di,h++;continue}var f=Sa(p);if(f){var b=bs(f,2),g=b[0],E=b[1];switch(g){case"VERSION":i.version=parseInt(E);break;case"PLAYLIST-TYPE":i.type=E==null?void 0:E.toUpperCase();break;case"TARGETDURATION":i.targetDuration=parseFloat(E);break;case"PART-INF":{s&&(i.lowLatency=!0);var L=ws(E);L["PART-TARGET"]&&(i.partTargetDuration=parseFloat(L["PART-TARGET"]))}break;case"SERVER-CONTROL":{var C=ws(E);i.canBlockReload=C["CAN-BLOCK-RELOAD"]==="YES",i.partHoldBack=parseFloat(C["PART-HOLD-BACK"]||0),i.canSkipUntil=parseFloat(C["CAN-SKIP-UNTIL"]||0),i.canSkipDateRanges=C["CAN-SKIP-DATERANGES"]==="YES"}break;case"ENDLIST":{var F=i.segments[i.segments.length-1];F&&(F.isLast=!0),i.live=!1,c=!0}break;case"MEDIA-SEQUENCE":h=i.startSN=parseInt(E);break;case"DISCONTINUITY-SEQUENCE":o=i.startCC=parseInt(E);break;case"DISCONTINUITY":o++;break;case"BYTERANGE":e.setByteRange(E,i.segments[i.segments.length-1]);break;case"PART":{if(!i.lowLatency)break;var Z=ws(E);e.duration=parseFloat(Z.DURATION),e.independent=Z.INDEPENDENT==="YES",e.sn=h,e.cc=o,e.partIndex=k,e.start=l,e.duration=parseFloat(Z.DURATION),l+=e.duration,e.url=Ps(Z.URI,r),n&&(e.key=n.clone(h)),t&&(e.initSegment=t),i.segments.push(e),e=new di,k++}break;case"PRELOAD-HINT":break;case"PROGRAM-DATE-TIME":e.dataTime=E;break;case"EXTINF":{if(i.lowLatency){k=0;break}var X=E.split(","),T=bs(X,2),G=T[0],Y=T[1];e.start=l,e.duration=parseFloat(G),l+=e.duration,e.title=Y}break;case"KEY":{var M=ws(E);if(M.METHOD==="NONE"){n=null;break}if(M.METHOD!=="AES-128")throw new Error("encrypt ".concat(M.METHOD,"/").concat(M.KEYFORMAT," is not supported"));if(n=new Cl,n.method=M.METHOD,n.url=/^blob:/.test(M.URI)?M.URI:Ps(M.URI,r),n.keyFormat=M.KEYFORMAT||"identity",n.keyFormatVersions=M.KEYFORMATVERSIONS,M.IV){var N=M.IV.slice(2);N=(N.length&1?"0":"")+N,n.iv=new Uint8Array(N.length/2);for(var m=0,d=N.length/2;m<d;m++)n.iv[m]=parseInt(N.slice(m*2,m*2+2),16)}}break;case"MAP":{var y=ws(E);e.url=Ps(y.URI,r),y.BYTERANGE&&e.setByteRange(y.BYTERANGE),e.isInitSegment=!0,e.sn=0,n&&(e.key=n.clone(0)),t=e,e=new di}break}}}i.segments=i.segments.filter(function(v){return v.duration!==0});var S=i.segments[i.segments.length-1];return S&&(i.endSN=S.sn,i.endPartIndex=S.partIndex),i.totalDuration=l,i.endCC=o,i}var mi=function(){function a(){fe(this,a)}return ye(a,null,[{key:"parse",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0;if(!s.includes("#EXTM3U"))throw new Error("Invalid m3u8 file");var t=Wl(s);return a.isMediaPlaylist(s)?xl(t,i,e):Rl(t,i)}},{key:"isMediaPlaylist",value:function(s){return s.includes("#EXTINF:")||s.includes("#EXT-X-TARGETDURATION:")}}]),a}(),Vl=function(){function a(r){var s=this;fe(this,a),W(this,"_emitOnLoaded",function(h,o){var u=h.response,p=h.options,c=p||{},k=c.firstByteTime,f=c.startTime,b=c.endTime,g=c.contentLength,E=b-f;s.hls.emit(_.SPEED,{time:E,byteLength:g,url:o}),s.hls.emit(_.LOAD_COMPLETE,{url:o,elapsed:E||0}),s.hls.emit(_.TTFB,{url:o,responseUrl:u.url,elapsed:k-f}),s.hls.emit(_.LOAD_RESPONSE_HEADERS,{headers:u.headers,url:o})}),W(this,"_onLoaderRetry",function(h,o){s.hls.emit($.LOAD_RETRY,{error:pe.network(h),retryTime:o})}),this.hls=r,this._timer=null,this._useLowLatency=r.config.useLowLatency;var i=this.hls.config,e=i.retryCount,t=i.retryDelay,n=i.loadTimeout,l=i.fetchOptions;this._loader=new Ls(re(re({},l),{},{responseType:"text",retry:e,retryDelay:t,timeout:n,onRetryError:this._onLoaderRetry})),this._audioLoader=new Ls(re(re({},l),{},{responseType:"text",retry:e,retryDelay:t,timeout:n,onRetryError:this._onLoaderRetry})),this._subtitleLoader=new Ls(re(re({},l),{},{responseType:"text",retry:e,retryDelay:t,timeout:n,onRetryError:this._onLoaderRetry}))}return ye(a,[{key:"load",value:function(){var r=se(U().mark(function i(e,t,n){var l,h,o,u,p,c,k,f,b,g,E,L,C,F;return U().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return l=[this._loader.load(e)],t&&l.push(this._audioLoader.load(t)),n&&l.push(this._subtitleLoader.load(n)),X.prev=3,X.next=6,Promise.all(l);case 6:if(p=X.sent,c=bs(p,3),k=c[0],f=c[1],b=c[2],k){X.next=13;break}return X.abrupt("return",[]);case 13:this._emitOnLoaded(k,e),h=k.data,t?(o=f==null?void 0:f.data,u=b==null?void 0:b.data,o&&this._emitOnLoaded(f,t),u&&this._emitOnLoaded(b,n)):(u=f==null?void 0:f.data,u&&this._emitOnLoaded(f,n)),X.next=21;break;case 18:throw X.prev=18,X.t0=X.catch(3),pe.network(X.t0);case 21:if(g=this.hls.config.onPreM3U8Parse,X.prev=22,g&&(h=g(h)||h,o&&(o=g(o,!0)||o),u&&(u=g(u,!0)||u)),E=mi.parse(h,e,this._useLowLatency),!(((F=E)===null||F===void 0?void 0:F.live)===!1&&E.segments&&!E.segments.length)){X.next=27;break}throw new Error("empty segments list");case 27:o&&(L=mi.parse(o,t,this._useLowLatency)),u&&(C=mi.parse(u,n,this._useLowLatency)),X.next=34;break;case 31:throw X.prev=31,X.t1=X.catch(22),new pe(q.MANIFEST,q.SUB_TYPES.HLS,X.t1);case 34:return E&&(E.isMaster?this.hls.emit($.HLS_MANIFEST_LOADED,{playlist:E}):this.hls.emit($.HLS_LEVEL_LOADED,{playlist:E})),X.abrupt("return",[E,L,C]);case 36:case"end":return X.stop()}},i,this,[[3,18],[22,31]])}));function s(i,e,t){return r.apply(this,arguments)}return s}()},{key:"parseText",value:function(s,i){var e=this.hls.config.onPreM3U8Parse,t;try{var n;if(e&&(s=e(s)||s),t=mi.parse(s,i,this._useLowLatency),((n=t)===null||n===void 0?void 0:n.live)===!1&&t.segments&&!t.segments.length)throw new Error("empty segments list")}catch(l){throw new pe(q.MANIFEST,q.SUB_TYPES.HLS,l)}return t&&(t.isMaster?this.hls.emit($.HLS_MANIFEST_LOADED,{playlist:t}):this.hls.emit($.HLS_LEVEL_LOADED,{playlist:t})),[t]}},{key:"poll",value:function(s,i,e,t,n,l){var h=this;clearTimeout(this._timer),l=l||3e3;var o=this.hls.config.pollRetryCount,u=function(){var p=se(U().mark(function c(){var k;return U().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return clearTimeout(h._timer),b.prev=1,b.next=4,h.load(s,i,e);case 4:if(k=b.sent,k[0]){b.next=7;break}return b.abrupt("return");case 7:o=h.hls.config.pollRetryCount,t(k[0],k[1],k[2]),b.next=15;break;case 11:b.prev=11,b.t0=b.catch(1),o--,o<=0&&n(b.t0);case 15:h._timer=setTimeout(u,l);case 16:case"end":return b.stop()}},c,null,[[1,11]])}));return function(){return p.apply(this,arguments)}}();this._timer=setTimeout(u,l)}},{key:"stopPoll",value:function(){return clearTimeout(this._timer),this.cancel()}},{key:"cancel",value:function(){return Promise.all([this._loader.cancel(),this._audioLoader.cancel()])}}]),a}();function La(a,r,s){return r>s&&(s=r),Math.min(Math.max(a,r),s)}var qi=new Fe("playlist"),dn=function(){function a(r,s,i){fe(this,a),W(this,"live",void 0),W(this,"id",0),W(this,"bitrate",0),W(this,"width",0),W(this,"height",0),W(this,"name",""),W(this,"url",""),W(this,"audioCodec",""),W(this,"videoCodec",""),W(this,"textCodec",""),W(this,"startCC",0),W(this,"endCC",0),W(this,"startSN",0),W(this,"endSN",-1),W(this,"totalDuration",0),W(this,"targetDuration",0),W(this,"partTargetDuration",0),W(this,"canSkipUntil",0),W(this,"canSkipDateRanges",!1),W(this,"skippedSegments",0),W(this,"canBlockReload",!1),W(this,"partHoldBack",0),W(this,"lowLatency",!1),W(this,"endPartIndex",0),W(this,"snDiff",null),W(this,"segments",[]),W(this,"audioStreams",[]),W(this,"subtitleStreams",[]),W(this,"closedCaptions",[]),W(this,"currentAudioStream",null),W(this,"currentSubtitleStream",null),this.update(this._setLLPlaybackPoint(r),s,i)}return ye(a,[{key:"lastSegment",get:function(){return this.segments.length?this.segments[this.segments.length-1]:null}},{key:"segmentDuration",get:function(){var s;return this.targetDuration||((s=this.segments[0])===null||s===void 0?void 0:s.duration)||0}},{key:"liveEdge",get:function(){return this.endTime}},{key:"endTime",get:function(){var s;return((s=this.lastSegment)===null||s===void 0?void 0:s.end)||0}},{key:"currentSubtitleEndSn",get:function(){var s;return((s=this.currentSubtitleStream)===null||s===void 0?void 0:s.endSN)||0}},{key:"clearOldSegment",value:function(s,i){return this.currentAudioStream&&this._clearSegments(s,i),this._clearSegments(s,i)}},{key:"getAudioSegment",value:function(s){if(!(!s||!this.currentAudioStream)){var i=s.sn-this.snDiff;return this.currentAudioStream.segments.find(function(e){return e.sn===i})}}},{key:"update",value:function(s,i){this.url=s.url,Array.isArray(s.segments)?((this.live===null||this.live===void 0)&&(this.live=s.live),this._updateSegments(s,this),this.startCC=s.startCC,this.endCC=s.endCC,this.startSN=s.startSN,this.endSN=s.endSN||-1,this.totalDuration=s.totalDuration,this.targetDuration=s.targetDuration,this.live=s.live,this.lowLatency=s.lowLatency,this.canBlockReload=s.canBlockReload,this.canSkipDateRanges=s.canSkipDateRanges,this.canSkipUntil=s.canSkipUntil,this.partHoldBack=s.partHoldBack,this.partTargetDuration=s.partTargetDuration,this.skippedSegments=s.skippedSegments,this.endPartIndex=s.endPartIndex,i&&this.currentAudioStream&&Array.isArray(i.segments)&&(this._updateSegments(i,this.currentAudioStream),(this.snDiff===null||this.snDiff===void 0)&&s.segments.length&&i.segments.length&&(this.snDiff=s.segments[0].sn-i.segments[0].sn))):(this.id=s.id,this.bitrate=s.bitrate,this.width=s.width,this.height=s.height,this.name=s.name,this.audioCodec=s.audioCodec,this.videoCodec=s.videoCodec,this.textCodec=s.textCodec,this.audioStreams=s.audioStreams,this.subtitleStreams=s.subtitleStreams,!this.currentAudioStream&&this.audioStreams.length&&(this.currentAudioStream=this.audioStreams.find(function(e){return e.default})||this.audioStreams[0]),!this.currentSubtitleStream&&this.subtitleStreams.length&&(this.currentSubtitleStream=this.subtitleStreams.find(function(e){return e.default})||this.subtitleStreams[0]))}},{key:"updateSubtitle",value:function(s){var i=this;if(s&&this.currentSubtitleStream&&Array.isArray(s.segments)){var e=this._updateSegments(s,this.currentSubtitleStream),t=this.currentSubtitleStream.segments;if(t.length>100&&(this.currentSubtitleStream.segments=t.slice(100)),!!e)return e.map(function(n){return{sn:n.sn,url:n.url,duration:n.duration,start:n.start,end:n.end,lang:i.currentSubtitleStream.lang}})}}},{key:"switchSubtitle",value:function(s){var i=this.subtitleStreams.find(function(t){return t.lang===s}),e=this.currentSubtitleStream;i&&(this.currentSubtitleStream=i,e.segments=[])}},{key:"_setLLPlaybackPoint",value:function(s){if(!s.lowLatency||!s.segments.length)return s;for(var i=s.totalDuration-s.partHoldBack,e=s.segments,t=0,n=0,l=e.length;n<l;n++)e[n].start<=i&&e[n].independent&&(t=n);var h=e.slice(t),o=0;return h.forEach(function(u){u.start=o,o=u.end}),s.segments=h,s.totalDuration=o,s.startSN=h[0].sn,s.startCC=h[0].cc,qi.log("set ll-hls playback point: SN=".concat(s.startSN," partIndex=").concat(h[0].partIndex,", duration=").concat(o)),s}},{key:"_clearSegments",value:function(s,i){for(var e=0,t=this.segments,n=0,l=t.length;n<l;n++)if(t[n].end>=s){e=n;break}return e>i&&(e=i),e&&(this.segments=this.segments.slice(e),this.currentAudioStream&&(this.currentAudioStream.segments=this.currentAudioStream.segments.slice(e))),i-e}},{key:"_updateSegments",value:function(s,i){var e=i.segments;if(this.live){var t=s.lowLatency,n=e[e.length-1],l=(n==null?void 0:n.sn)||-1,h=(n==null?void 0:n.partIndex)||0,o=l<s.endSN&&s.segments.length;if(t&&(o=o||h<s.endPartIndex),o){qi.log("update segments: endSN:".concat(l,", partIndex:").concat(h," --> endSN:").concat(s.endSN,", partIndex:").concat(s.endPartIndex));var u=s.segments.findIndex(function(b){return b.sn===l&&b.partIndex===h}),p=u<0?s.segments:s.segments.slice(u+1);if(e.length&&p.length){var c=n.end,k=c;p.forEach(function(b){b.start=c,c=b.end}),qi.log("liveEdge: ".concat(k," -> ").concat(c));var f=(n==null?void 0:n.cc)||-1;f>p[0].cc&&p.forEach(function(b){return b.cc+=f})}return i.endSN=s.endSN,i.segments=e.concat(p),p}}else i.segments=s.segments}}]),a}(),Ml=function(){function a(r){fe(this,a),W(this,"streams",[]),W(this,"currentStream",null),W(this,"dvrWindow",0),W(this,"_segmentPointer",-1),this.hls=r}return ye(a,[{key:"lowLatency",get:function(){var s;return(s=this.currentStream)===null||s===void 0?void 0:s.lowLatency}},{key:"lastSegment",get:function(){var s;return(s=this.currentStream)===null||s===void 0?void 0:s.lastSegment}},{key:"currentSegment",get:function(){var s;return(s=this.currentSegments)===null||s===void 0?void 0:s[this._segmentPointer]}},{key:"nextSegment",get:function(){var s;return(s=this.currentSegments)===null||s===void 0?void 0:s[this._segmentPointer+1]}},{key:"currentSegments",get:function(){var s;return(s=this.currentStream)===null||s===void 0?void 0:s.segments}},{key:"currentSubtitleEndSn",get:function(){var s;return(s=this.currentStream)===null||s===void 0?void 0:s.currentSubtitleEndSn}},{key:"liveEdge",get:function(){var s;return(s=this.currentStream)===null||s===void 0?void 0:s.liveEdge}},{key:"totalDuration",get:function(){var s;return((s=this.currentStream)===null||s===void 0?void 0:s.totalDuration)||0}},{key:"seekRange",get:function(){var s=this.currentSegments;if(!(!s||!s.length))return[s[0].start,s[s.length-1].end]}},{key:"nbSegments",get:function(){var s;return((s=this.currentSegments)===null||s===void 0?void 0:s.length)||0}},{key:"isEmpty",get:function(){var s;return!((s=this.currentSegments)!==null&&s!==void 0&&s.length)}},{key:"isLive",get:function(){var s;return(s=this.currentStream)===null||s===void 0?void 0:s.live}},{key:"hadSegmentLoaded",get:function(){return this._segmentPointer!==-1}},{key:"hasSubtitle",get:function(){var s;return!!((s=this.currentStream)!==null&&s!==void 0&&s.currentSubtitleStream)}},{key:"getAudioSegment",value:function(s){var i;return(i=this.currentStream)===null||i===void 0?void 0:i.getAudioSegment(s)}},{key:"moveSegmentPointer",value:function(s){var i;s==null&&(s=this._segmentPointer+1),this._segmentPointer=La(s,-1,(i=this.currentSegments)===null||i===void 0?void 0:i.length)}},{key:"reset",value:function(){this.streams=[],this.currentStream=null,this.dvrWindow=0,this._segmentPointer=-1}},{key:"getSegmentByIndex",value:function(s){var i;return(i=this.currentSegments)===null||i===void 0?void 0:i[s]}},{key:"setNextSegmentByIndex",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this._segmentPointer=s-1}},{key:"findSegmentIndexByTime",value:function(s){var i=this.currentSegments;if(i){for(var e=0,t=i.length,n;e<t;e++)if(n=i[e],s>=n.start&&s<n.end)return e;var l=i[i.length-1];if(Math.abs(s-(l==null?void 0:l.end))<.2)return i.length-1}}},{key:"upsertPlaylist",value:function(s,i,e){var t=this;if(s){if(s.isMaster)this.streams.length=s.streams.length,s.streams.filter(function(o){return o.url}).forEach(function(o,u){t.streams[u]?t.streams[u].update(o):t.streams[u]=new dn(o)}),this.currentStream=this.streams[0];else if(Array.isArray(s.segments)){var n=this.currentStream;if(n){n.update(s,i,e);var l=n.updateSubtitle(e);l&&this.hls.emit($.SUBTITLE_SEGMENTS,{list:l})}else this.reset(),this.currentStream=this.streams[0]=new dn(s,i,e)}var h=this.currentStream;h&&this.hls.isLive&&!this.dvrWindow&&(this.dvrWindow=this.currentSegments.reduce(function(o,u){return o+=u.duration,o},0))}}},{key:"switchSubtitle",value:function(s){var i;(i=this.currentStream)===null||i===void 0||i.switchSubtitle(s)}},{key:"clearOldSegment",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,i=this.currentStream;if(!(!this.dvrWindow||!i)){var e=i.endTime-this.dvrWindow;if(!(e<=0)){var t=i.segments;t.length<=s||(this._segmentPointer=i.clearOldSegment(e,this._segmentPointer))}}}},{key:"checkSegmentTrackChange",value:function(s,i){var e=this.findSegmentIndexByTime(s),t=this.getSegmentByIndex(e);if(t&&!(!t.hasAudio&&!t.hasVideo)){if(i!==2&&t.hasAudio&&t.hasVideo)return t;if(!(t.end-s>.3)){var n=this.getSegmentByIndex(e+1);if(n&&!(!n.hasAudio&&!n.hasVideo)&&(n.hasAudio!==t.hasAudio||n.hasVideo!==t.hasVideo))return n}}}}]),a}(),_l=function(){function a(r){var s=this;fe(this,a),W(this,"error",null),W(this,"_emitOnLoaded",function(h,o){var u=h.data,p=h.response,c=h.options,k=c||{},f=k.firstByteTime,b=k.startTime,g=k.endTime,E=k.contentLength,L=g-b;s._bandwidthService.addRecord(E||u.byteLength,L),s.hls.emit(_.SPEED,{time:L,byteLength:E,url:o}),s.hls.emit(_.LOAD_COMPLETE,{url:o,elapsed:L||0}),s.hls.emit(_.TTFB,{url:o,responseUrl:p.url,elapsed:f-b}),s.hls.emit(_.LOAD_RESPONSE_HEADERS,{headers:p.headers,url:o})}),W(this,"_onLoaderRetry",function(h,o){s.hls.emit(_.LOAD_RETRY,{error:pe.network(h),retryTime:o})}),this.hls=r,this._bandwidthService=new Qn,this._mapCache={},this._keyCache={};var i=this.hls.config,e=i.retryCount,t=i.retryDelay,n=i.loadTimeout,l=i.fetchOptions;this._segmentLoader=new Ls(re(re({},l),{},{responseType:"arraybuffer",retry:e,retryDelay:t,timeout:n,onRetryError:this._onLoaderRetry})),this._audioSegmentLoader=new Ls(re(re({},l),{},{responseType:"arraybuffer",retry:e,retryDelay:t,timeout:n,onRetryError:this._onLoaderRetry})),this._keyLoader=new Ls(re(re({},l),{},{responseType:"arraybuffer",retry:e,retryDelay:t,timeout:n,onRetryError:this._onLoaderRetry}))}return ye(a,[{key:"speedInfo",value:function(){return{speed:this._bandwidthService.getLatestSpeed(),avgSpeed:this._bandwidthService.getAvgSpeed()}}},{key:"load",value:function(s,i,e){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,n=[];return s&&(n[0]=this.loadVideoSegment(s,e)),i&&(n[1]=this.loadAudioSegment(i,t)),Promise.all(n)}},{key:"loadVideoSegment",value:function(s,i){return this._loadSegment(this._segmentLoader,s,i)}},{key:"loadAudioSegment",value:function(s,i){return this._loadSegment(this._audioSegmentLoader,s,i)}},{key:"_loadSegment",value:function(){var r=se(U().mark(function i(e,t,n){var l=this,h,o,u,p,c,k,f,b,g,E,L,C,F,Z,X;return U().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return f=[],this.hls.emit(_.LOAD_START,{url:t.url}),f[0]=e.load(t.url),n&&t.initSegment&&(g=t.initSegment.url,o=this._mapCache[g],o||(this.hls.emit(_.LOAD_START,{url:g}),f[1]=e.load(g).then(function(Y){if(Y){var M=Object.keys(l._mapCache);M>30&&(l._mapCache={}),o=l._mapCache[g]=Y.data,l._emitOnLoaded(Y,g)}})),E=(b=t.initSegment.key)===null||b===void 0?void 0:b.url,E&&(k=t.initSegment.key.iv,c=this._keyCache[E],c||(this.hls.emit(_.LOAD_START,{url:E}),f[2]=this._keyLoader.load(E).then(function(Y){Y&&(c=l._keyCache[E]=Y.data,l._emitOnLoaded(Y,E))})))),L=(h=t.key)===null||h===void 0?void 0:h.url,L&&(p=t.key.iv,u=this._keyCache[L],u||(this.hls.emit(_.LOAD_START,{url:L}),f[3]=this._keyLoader.load(L).then(function(Y){Y&&(u=l._keyCache[L]=Y.data,l._emitOnLoaded(Y,L))}))),G.next=8,Promise.all(f);case 8:if(C=G.sent,F=bs(C,1),Z=F[0],Z){G.next=13;break}return G.abrupt("return");case 13:return X=Z.data,this._emitOnLoaded(Z,t.url),G.abrupt("return",{data:X,map:o,key:u,mapKey:c,keyIv:p,mapKeyIv:k});case 16:case"end":return G.stop()}},i,this)}));function s(i,e,t){return r.apply(this,arguments)}return s}()},{key:"reset",value:function(){this.error=null,this._mapCache={},this._keyCache={},this._bandwidthService.reset()}},{key:"cancel",value:function(){var r=se(U().mark(function i(){return U().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this._keyLoader.cancel(),this._segmentLoader.cancel(),this._audioSegmentLoader.cancel()]);case 2:case"end":return t.stop()}},i,this)}));function s(){return r.apply(this,arguments)}return s}()}]),a}(),$e=new Fe("hls"),Bs=function(a){Wi(s,a);var r=Ti(s);function s(i){var e;return fe(this,s),e=r.call(this),W(j(e),"version",s.version),W(j(e),"media",null),W(j(e),"config",null),W(j(e),"_manifestLoader",null),W(j(e),"_segmentLoader",null),W(j(e),"_playlist",null),W(j(e),"_bufferService",null),W(j(e),"_gapService",null),W(j(e),"_seiService",null),W(j(e),"_stats",null),W(j(e),"_prevSegSn",null),W(j(e),"_prevSegCc",null),W(j(e),"_tickTimer",null),W(j(e),"_tickInterval",500),W(j(e),"_segmentProcessing",!1),W(j(e),"_reloadOnPlay",!1),W(j(e),"_switchUrlOpts",null),W(j(e),"_isProcessQuotaExceeded",!1),W(j(e),"_loadSegment",se(U().mark(function t(){var n,l,h;return U().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(e._segmentProcessing||!e.media)){u.next=2;break}return u.abrupt("return");case 2:if(n=e._playlist.nextSegment,n){u.next=5;break}return u.abrupt("return");case 5:if(e.isLive){u.next=13;break}if(l=e.bufferInfo(),e.media.paused&&!e.media.currentTime&&(l=e.bufferInfo(l.nextStart||.5)),h=Math.abs(l.end-e.media.duration)<.1,!(l.remaining>=e.config.preloadTime||h)){u.next=12;break}return h&&e._bufferService.msIsOpend&&e._bufferService.endOfStream(),u.abrupt("return");case 12:!e._urlSwitching&&e._prevSegSn!==n.sn-1&&l.end&&Math.abs(n.start-l.end)>1&&e._playlist.setNextSegmentByIndex(e._playlist.findSegmentIndexByTime(l.end+.1));case 13:return u.abrupt("return",e._loadSegmentDirect());case 14:case"end":return u.stop()}},t)}))),W(j(e),"_onPlay",se(U().mark(function t(){return U().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(e.media.seeking&&e.media.currentTime===0)){l.next=3;break}return $e.debug("replay currentTime 0, return"),l.abrupt("return");case 3:if(clearTimeout(e._disconnectTimer),!e._reloadOnPlay){l.next=9;break}e._reloadOnPlay=!1,e.replay(!0),l.next=12;break;case 9:return l.next=11,e._loadSegment();case 11:e._startTick();case 12:case"end":return l.stop()}},t)}))),W(j(e),"_onPause",function(){if(e.isLive){if(!e._reloadOnPlay){var t=e.config.disconnectTime;if(t==null&&(t=e._playlist.dvrWindow),!Number.isFinite(t))return;clearTimeout(e._disconnectTimer),e._disconnectTimer=setTimeout(function(){e._reloadOnPlay=!0,e._clear()},t||0)}}else e._stopTick()}),W(j(e),"_onSeeking",se(U().mark(function t(){var n,l,h,o,u,p,c;return U().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(e.media){f.next=2;break}return f.abrupt("return");case 2:if(n=e.media.currentTime,l=e._playlist.seekRange,!l){f.next=9;break}if(h=La(n,l[0],e.isLive?l[1]:e.media.duration),!(h>=0&&Math.abs(n-h)>=.1)){f.next=9;break}return e.media.currentTime=h,f.abrupt("return");case 9:if(o=e._playlist.currentSegment,u=me.info(me.get(e.media),n,.1),!o){f.next=14;break}if(!(u.end&&Math.abs(u.end-o.end)<.2)){f.next=14;break}return f.abrupt("return");case 14:if(p=e._playlist.findSegmentIndexByTime(n),c=e._playlist.getSegmentByIndex(p),!(p==null||!c||e._segmentProcessing&&c===e._playlist.nextSegment)){f.next=18;break}return f.abrupt("return");case 18:return $e.debug("seek to",n,c),e._playlist.setNextSegmentByIndex(p),e._stopTick(),f.next=23,e._segmentLoader.cancel();case 23:if(e._segmentProcessing=!1,!(!u.end||e.isLive)){f.next=27;break}return f.next=27,e._loadSegmentDirect(!0);case 27:e._startTick();case 28:case"end":return f.stop()}},t)}))),W(j(e),"_onTimeupdate",function(){if(e.media){var t=e.config;if(t.isLive&&t.maxLatency&&t.targetLatency&&e.media){var n=e._playlist.liveEdge;if(!n)return;var l=n-e.media.currentTime;l>=t.maxLatency&&($e.debug("latency jump, currentTime:".concat(e.media.currentTime,", liveEdge:").concat(n,",  latency=").concat(l)),e.media.currentTime=n-t.targetLatency)}if(t.seiInTime){var h;(h=e._seiService)===null||h===void 0||h.throw(e.media.currentTime)}e.config.allowedStreamTrackChange&&!e.config.softDecode&&e._checkStreamTrackChange(e.media.currentTime)}}),W(j(e),"_tick",function(){if(e.media){e._startTick();var t=e.media,n=me.get(t),l=e._segmentLoader.error;if(e._onCheckQuotaExceeded(),e._isProcessQuotaExceeded&&(e._bufferService.isFull()||(e._isProcessQuotaExceeded=!1,e._segmentProcessing=!1)),l){var h=.5;(!t.readyState||e.bufferInfo(h).remaining<1)&&(l.fatal=!0,e._emitError(pe.network(l)));return}me.end(n)<.1||!t.readyState||(An(t)?(e._loadSegment(),e._gapService&&e._gapService.do(t,e.config.maxJumpDistance,e.isLive)):t.readyState<2&&e._gapService&&e._gapService.do(t,e.config.maxJumpDistance,t.currentTime?e.isLive:!0))}}),e.config=i=vl(i),e.media=e.config.media,e._manifestLoader=new Vl(j(e)),e._segmentLoader=new _l(j(e)),e._playlist=new Ml(j(e)),e._bufferService=new gl(j(e)),i.seiInTime&&(e._seiService=new jn(j(e))),i.softDecode||(e._gapService=new Jn),e._stats=new qn(j(e),9e4),e.media.addEventListener("play",e._onPlay),e.media.addEventListener("pause",e._onPause),e.media.addEventListener("seeking",e._onSeeking),e.media.addEventListener("timeupdate",e._onTimeupdate),e}return ye(s,[{key:"isLive",get:function(){return this._playlist.isLive}},{key:"streams",get:function(){return this._playlist.streams}},{key:"currentStream",get:function(){return this._playlist.currentStream}},{key:"hasSubtitle",get:function(){return this._playlist.hasSubtitle}},{key:"baseDts",get:function(){var e;return(e=this._bufferService)===null||e===void 0?void 0:e.baseDts}},{key:"speedInfo",value:function(){return this._segmentLoader.speedInfo()}},{key:"bufferInfo",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.1;return me.info(me.get(this.media),(e=this.media)===null||e===void 0?void 0:e.currentTime,t)}},{key:"getStats",value:function(){return this._stats.getStats()}},{key:"playbackQuality",value:function(){return On(this.media)}},{key:"load",value:function(){var i=se(U().mark(function t(n){var l,h=arguments;return U().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return l=h.length>1&&h[1]!==void 0?h[1]:!1,n&&(this.config.url=n),n=this.config.url,u.next=5,this._reset(l);case 5:return u.next=7,this._loadData(n);case 7:this._startTick();case 8:case"end":return u.stop()}},t,this)}));function e(t){return i.apply(this,arguments)}return e}()},{key:"_loadData",value:function(){var i=se(U().mark(function t(n){var l,h,o,u,p,c,k,f,b,g;return U().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:try{n&&(n=n.trim())}catch{}if(n){L.next=3;break}throw this._emitError(new pe(q.OTHER,q.SUB_TYPES.OPTION,null,null,"m3u8 url is missing"));case 3:return L.next=5,this._loadM3U8(n);case 5:if(l=L.sent,h=this._playlist.currentStream,!this._urlSwitching){L.next=17;break}if(h.bitrate===0&&(o=this._switchUrlOpts)!==null&&o!==void 0&&o.bitrate&&(h.bitrate=(u=this._switchUrlOpts)===null||u===void 0?void 0:u.bitrate),p=this._getSeamlessSwitchPoint(),this.config.startTime=p,c=this._playlist.findSegmentIndexByTime(p),k=this._playlist.getSegmentByIndex(c+1),!k){L.next=17;break}return f=k.start,L.next=17,this._bufferService.removeBuffer(f);case 17:if(l){L.next=19;break}return L.abrupt("return");case 19:if(!this.isLive){L.next=30;break}if(this._bufferService.setLiveSeekableRange(0,4294967295),$e.log("totalDuration first time got:",this._playlist.totalDuration),$e.log("nb segments got:",this._playlist.nbSegments),this.config.targetLatency<this._playlist.totalDuration&&(this.config.targetLatency=this._playlist.totalDuration,this.config.maxLatency=1.5*this.config.targetLatency),l.isMaster||this._pollM3U8(n),!(this._playlist.nbSegments<this.config.minSegmentsStartPlay)){L.next=27;break}return L.abrupt("return");case 27:return L.next=29,this._loadSegment();case 29:return L.abrupt("return");case 30:return L.next=32,this._bufferService.updateDuration(h.totalDuration);case 32:return b=this.config.startTime,b&&((g=this._switchUrlOpts)!==null&&g!==void 0&&g.seamless||(this.media.currentTime=b),this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(b)||0)),L.next=36,this._loadSegment();case 36:case"end":return L.stop()}},t,this)}));function e(t){return i.apply(this,arguments)}return e}()},{key:"replay",value:function(){var i=se(U().mark(function t(n){return U().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return this.config.startTime=0,h.next=3,this.load();case 3:return this._reloadOnPlay=!1,h.abrupt("return",this.media.play(!n));case 5:case"end":return h.stop()}},t,this)}));function e(t){return i.apply(this,arguments)}return e}()},{key:"switchURL",value:function(){var i=se(U().mark(function t(n){var l,h,o,u,p,c,k,f=arguments;return U().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:l=f.length>1&&f[1]!==void 0?f[1]:{},h={seamless:!1,startTime:0,bitrate:0},g.t0=Ei(l),g.next=g.t0==="number"?5:g.t0==="boolean"?7:g.t0==="object"?9:11;break;case 5:return l={startTime:l},g.abrupt("break",12);case 7:return l={seamless:l},g.abrupt("break",12);case 9:for(o in l)(l[o]===void 0||l[o]===null)&&delete l[o];return g.abrupt("break",12);case 11:throw"unsupported switchURL args: ".concat(l);case 12:if(l=Object.assign({},h,l),u=l,p=u.seamless,c=u.startTime,this.config.url=n,this.config.startTime=c,this._switchUrlOpts=l,p){g.next=38;break}if(g.prev=18,!this.config.softDecode){g.next=23;break}g.t1=this.load(n),g.next=26;break;case 23:return g.next=25,this.load(n);case 25:g.t1=g.sent;case 26:k=g.t1,g.next=33;break;case 29:throw g.prev=29,g.t2=g.catch(18),this.emit($.SWITCH_URL_FAILED,g.t2),g.t2;case 33:return this._reloadOnPlay=!1,k&&this.emit($.SWITCH_URL_SUCCESS,{url:n}),g.abrupt("return",this.media.play(!0));case 38:return this._urlSwitching=!0,this._prevSegSn=null,this._prevSegCc=null,this._playlist.reset(),this._bufferService.seamlessSwitch(),g.next=45,this._clear();case 45:return g.next=47,this._loadData(n);case 47:this._startTick();case 48:this._switchUrlOpts=null;case 49:case"end":return g.stop()}},t,this,[[18,29]])}));function e(t){return i.apply(this,arguments)}return e}()},{key:"switchStream",value:function(){var i=se(U().mark(function t(n){var l,h,o,u,p,c=arguments;return U().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(l=c.length>1&&c[1]!==void 0?c[1]:!0,h=this.currentStream,o=this.streams,!(!h||h.id===n||!o||o.length<2)){f.next=5;break}return f.abrupt("return");case 5:if(u=o.find(function(b){return b.id===n}),u){f.next=8;break}return f.abrupt("return");case 8:return f.prev=8,f.next=11,this._clear();case 11:if(!l){f.next=14;break}return f.next=14,this._bufferService.clearAllBuffer();case 14:f.next=19;break;case 16:throw f.prev=16,f.t0=f.catch(8),this._emitError(pe.create(f.t0));case 19:if(h.currentAudioStream&&u.audioStreams.length>2&&(p=h.currentAudioStream.id,u.currentAudioStream=u.audioStreams.find(function(b){return b.id===p})||u.currentAudioStream),this._playlist.currentStream=u,f.prev=21,!(this.isLive||!u.segments.length)){f.next=25;break}return f.next=25,this._refreshM3U8();case 25:return this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(this.media.currentTime)||0),this._prevSegCc=null,f.next=29,this._loadSegmentDirect();case 29:f.next=35;break;case 31:throw f.prev=31,f.t1=f.catch(21),this._playlist.currentStream=h,f.t1;case 35:return this._startTick(),f.abrupt("return",u);case 37:case"end":return f.stop()}},t,this,[[8,16],[21,31]])}));function e(t){return i.apply(this,arguments)}return e}()},{key:"switchAudioStream",value:function(){var i=se(U().mark(function t(n){var l,h,o,u,p=arguments;return U().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(l=p.length>1&&p[1]!==void 0?p[1]:!0,h=this.currentStream,h){k.next=4;break}return k.abrupt("return");case 4:if(o=h.currentAudioStream,!(!o||o.id===n||h.audioStreams.length<2)){k.next=7;break}return k.abrupt("return");case 7:if(u=h.audioStreams.find(function(f){return f.id===n}),u){k.next=10;break}return k.abrupt("return");case 10:return k.prev=10,k.next=13,this._clear();case 13:if(!l){k.next=16;break}return k.next=16,this._bufferService.clearAllBuffer();case 16:k.next=21;break;case 18:throw k.prev=18,k.t0=k.catch(10),this._emitError(pe.create(k.t0));case 21:if(h.currentAudioStream=u,k.prev=22,!(this.isLive||!u.segments.length)){k.next=26;break}return k.next=26,this._refreshM3U8();case 26:return this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(this.media.currentTime)||0),this._prevSegCc=null,k.next=30,this._loadSegmentDirect();case 30:k.next=36;break;case 32:throw k.prev=32,k.t1=k.catch(22),h.currentAudioStream=o,k.t1;case 36:return this._startTick(),k.abrupt("return",u);case 38:case"end":return k.stop()}},t,this,[[10,18],[22,32]])}));function e(t){return i.apply(this,arguments)}return e}()},{key:"switchSubtitleStream",value:function(){var i=se(U().mark(function t(n){return U().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return this._playlist.switchSubtitle(n),h.next=3,this._manifestLoader.stopPoll();case 3:return h.next=5,this._refreshM3U8();case 5:case"end":return h.stop()}},t,this)}));function e(t){return i.apply(this,arguments)}return e}()},{key:"destroy",value:function(){var i=se(U().mark(function t(){var n;return U().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this.media){h.next=2;break}return h.abrupt("return");case 2:return this.removeAllListeners(),this._playlist.reset(),this._segmentLoader.reset(),(n=this._seiService)===null||n===void 0||n.reset(),this.media.removeEventListener("play",this._onPlay),this.media.removeEventListener("pause",this._onPause),this.media.removeEventListener("seeking",this._onSeeking),this.media.removeEventListener("timeupdate",this._onTimeupdate),h.next=12,Promise.all([this._clear(),this._bufferService.destroy()]);case 12:this.media=null;case 13:case"end":return h.stop()}},t,this)}));function e(){return i.apply(this,arguments)}return e}()},{key:"_loadM3U8",value:function(){var i=se(U().mark(function t(n){var l,h,o,u,p,c,k;return U().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(b.prev=0,u=(h=this.config.manifestList)===null||h===void 0||(o=h.filter(function(g){return g.url===n})[0])===null||o===void 0?void 0:o.manifest,!u){b.next=6;break}b.t0=this._manifestLoader.parseText(u,n),b.next=9;break;case 6:return b.next=8,this._manifestLoader.load(n);case 8:b.t0=b.sent;case 9:p=b.t0,c=bs(p,1),l=c[0],b.next=17;break;case 14:throw b.prev=14,b.t1=b.catch(0),this._emitError(pe.create(b.t1));case 17:if(l){b.next=19;break}return b.abrupt("return");case 19:if(this._playlist.upsertPlaylist(l),!l.isMaster){b.next=24;break}return(k=this._playlist.currentStream.subtitleStreams)!==null&&k!==void 0&&k.length&&this.emit($.SUBTITLE_PLAYLIST,{list:this._playlist.currentStream.subtitleStreams}),b.next=24,this._refreshM3U8();case 24:return this.emit($.STREAM_PARSED),b.abrupt("return",l);case 26:case"end":return b.stop()}},t,this,[[0,14]])}));function e(t){return i.apply(this,arguments)}return e}()},{key:"_refreshM3U8",value:function(){var e,t,n=this,l=this._playlist.currentStream;if(!l||!l.url)throw this._emitError(pe.create(null,null,new Error("m3u8 url is not defined")));var h=l.url,o=(e=l.currentAudioStream)===null||e===void 0?void 0:e.url,u=(t=l.currentSubtitleStream)===null||t===void 0?void 0:t.url;return this._manifestLoader.load(h,o,u).then(function(p){var c=bs(p,3),k=c[0],f=c[1],b=c[2];k&&(n._playlist.upsertPlaylist(k,f,b),n.isLive&&n._pollM3U8(h,o,u))}).catch(function(p){throw n._emitError(pe.create(p))})}},{key:"_pollM3U8",value:function(e,t,n){var l=this,h=this._playlist.isEmpty,o;if(this._playlist.lowLatency)o=(this._playlist.currentStream.partTargetDuration*2||0)*1e3;else{var u;o=(((u=this._playlist.lastSegment)===null||u===void 0?void 0:u.duration)||0)*1e3}this._manifestLoader.poll(e,t,n,function(p,c,k){l._playlist.upsertPlaylist(p,c,k),l._playlist.clearOldSegment();var f=p&&h&&!l._playlist.isEmpty;(f||!l._playlist.hadSegmentLoaded&&l._playlist.nbSegments>=l.config.minSegmentsStartPlay)&&l._loadSegment(),h&&(h=l._playlist.isEmpty)},function(p){l._emitError(pe.create(p))},o)}},{key:"_loadSegmentDirect",value:function(){var i=se(U().mark(function t(n){var l,h,o;return U().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(l=this._playlist.nextSegment,l){p.next=3;break}return p.abrupt("return");case 3:return h=!1,o=null,p.prev=5,this._segmentProcessing=!0,$e.log("load segment, sn:".concat(l.sn,", partIndex:").concat(l.partIndex)),p.next=10,this._reqAndBufferSegment(l,this._playlist.getAudioSegment(l));case 10:h=p.sent,p.next=16;break;case 13:p.prev=13,p.t0=p.catch(5),o=p.t0;case 16:return p.prev=16,this._segmentProcessing=!1,p.finish(16);case 19:if(!o){p.next=26;break}if(!this._bufferService.isFull()){p.next=25;break}return $e.log("load segment, sn:".concat(l.sn,", partIndex:").concat(l.partIndex)),this._segmentProcessing=!0,this._isProcessQuotaExceeded=!0,p.abrupt("return",!1);case 25:return p.abrupt("return",this._emitError(pe.create(o)));case 26:return h&&(this._urlSwitching&&(this._urlSwitching=!1,this.emit($.SWITCH_URL_SUCCESS,{url:this.config.url})),this._playlist.moveSegmentPointer(),l.isLast?this._end():n||this._loadSegment()),p.abrupt("return",h);case 28:case"end":return p.stop()}},t,this,[[5,13,16,19]])}));function e(t){return i.apply(this,arguments)}return e}()},{key:"_reqAndBufferSegment",value:function(){var i=se(U().mark(function t(n,l){var h,o,u,p,c,k,f,b,g;return U().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return o=n?n.cc:l.cc,u=this._prevSegCc!==o,p=[],L.prev=3,L.next=6,this._segmentLoader.load(n,l,u);case 6:p=L.sent,L.next=14;break;case 9:throw L.prev=9,L.t0=L.catch(3),L.t0.fatal=!1,this._segmentLoader.error=L.t0,L.t0;case 14:if(p[0]){L.next=16;break}return L.abrupt("return");case 16:return L.next=18,(h=this._bufferService).decryptBuffer.apply(h,nr(p));case 18:if(c=L.sent,c){L.next=21;break}return L.abrupt("return");case 21:return k=n?n.sn:l.sn,f=n?n.start:l.start,b=this._playlist.currentStream,this._bufferService.createSource(c[0],c[1],b==null?void 0:b.videoCodec,b==null?void 0:b.audioCodec),g=Date.now(),L.next=28,this._bufferService.appendBuffer(n,l,c[0],c[1],u,this._prevSegSn===k-1,f);case 28:return this.emit($.APPEND_COST,{elapsed:Date.now()-g,url:n.url}),L.next=31,this._bufferService.evictBuffer(this.config.bufferBehind);case 31:return this._prevSegCc=o,this._prevSegSn=k,L.abrupt("return",!0);case 34:case"end":return L.stop()}},t,this,[[3,9]])}));function e(t,n){return i.apply(this,arguments)}return e}()},{key:"_onCheckQuotaExceeded",value:function(){var i=se(U().mark(function t(){var n,l,h,o,u;return U().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:n=this.media.currentTime,l=this.media.buffered,h=!1,o=0;case 4:if(!(o<l.length)){c.next=11;break}if(!(l.start(0)>=n&&n<l.end(o))){c.next=8;break}return h=!0,c.abrupt("break",11);case 8:o++,c.next=4;break;case 11:if(!this._bufferService.isFull()){c.next=15;break}return u=h?this.config.bufferBehind:5,c.next=15,this._bufferService.evictBuffer(u);case 15:case"end":return c.stop()}},t,this)}));function e(){return i.apply(this,arguments)}return e}()},{key:"_checkStreamTrackChange",value:function(e){var t=this._playlist.checkSegmentTrackChange(e,this._bufferService.nbSb);t&&this.switchURL(this.config.url,t.start+.2)}},{key:"_clear",value:function(){var i=se(U().mark(function t(){return U().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return clearTimeout(this._disconnectTimer),this._stopTick(),l.next=4,Promise.all([this._segmentLoader.cancel(),this._manifestLoader.stopPoll()]);case 4:this._segmentProcessing=!1;case 5:case"end":return l.stop()}},t,this)}));function e(){return i.apply(this,arguments)}return e}()},{key:"_reset",value:function(){var i=se(U().mark(function t(){var n,l,h=arguments;return U().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return l=h.length>0&&h[0]!==void 0?h[0]:!1,this._reloadOnPlay=!1,this._prevSegSn=null,this._prevSegCc=null,this._switchUrlOpts=null,this._playlist.reset(),this._segmentLoader.reset(),(n=this._seiService)===null||n===void 0||n.reset(),this._stats.reset(),u.next=11,this._clear();case 11:return u.abrupt("return",this._bufferService.reset(l));case 12:case"end":return u.stop()}},t,this)}));function e(){return i.apply(this,arguments)}return e}()},{key:"_end",value:function(){this._clear(),this._bufferService.endOfStream(),(this.media.readyState<=2||this.media.buffered.length>1)&&this._startTick()}},{key:"_stopTick",value:function(){this._tickTimer&&clearTimeout(this._tickTimer),this._tickTimer=null}},{key:"_startTick",value:function(){this._stopTick(),this._tickTimer=setTimeout(this._tick,this._tickInterval)}},{key:"_emitError",value:function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(((t=e.originError)===null||t===void 0?void 0:t.fatal)===!1)$e.warn(e);else{var l,h,o;$e.table(e),$e.error(e),$e.error((l=this.media)===null||l===void 0?void 0:l.error),(h=this.media)!==null&&h!==void 0&&h.readyState&&this.media.pause(),this._stopTick(),this._urlSwitching&&(this._urlSwitching=!1,this.emit($.SWITCH_URL_FAILED,e)),this.emit($.ERROR,e),n&&this._end(),(o=this._seiService)===null||o===void 0||o.reset()}return e}},{key:"_getSeamlessSwitchPoint",value:function(){var e=this.media,t=e.currentTime;if(!e.paused){var n,l=this._playlist.findSegmentIndexByTime(e.currentTime),h=this._playlist.getSegmentByIndex(l),o=(n=this._stats)===null||n===void 0?void 0:n.getStats().downloadSpeed;if(o&&h){var u=h.duration*this._playlist.currentStream.bitrate/o+1;t+=u}else t+=5}return t}}],[{key:"isSupported",value:function(e){return!e||e==="video"||e==="audio"?ce.isSupported():typeof WebAssembly<"u"}},{key:"enableLogger",value:function(){Fe.enable(),Vs.enable()}},{key:"disableLogger",value:function(){Fe.disable(),Vs.disable()}}]),s}(Fs);W(Bs,"version","3.0.10");try{localStorage.getItem("xgd")?Bs.enableLogger():Bs.disableLogger()}catch{}var Il=function(){function a(r,s){var i=this;fe(this,a),W(this,"_opts",null),W(this,"_plugin",null),W(this,"_onLowDecode",function(){var e,t,n,l,h=i._opts,o=h.media,u=h.innerDegrade;(e=i._plugin)===null||e===void 0||(t=e.player)===null||t===void 0||t.emit("lowdecode",o.degradeInfo),(n=i._plugin)===null||n===void 0||(l=n.player)===null||l===void 0||l.emit("core_event",re(re({},o.degradeInfo),{},{eventName:$.LOWDECODE})),u===1&&i._degrade(o.src)}),W(this,"_degrade",function(e){var t=i._plugin.player,n=t.video;if(!(n&&n.TAG!=="MVideo")){var l=t.video.degradeVideo;t.video=l,n.degrade(e),e&&(t.config.url=e);var h=t.root.firstChild;h.TAG==="MVideo"&&t.root.replaceChild(l,h);var o=i._plugin.constructor.pluginName.toLowerCase();t.unRegisterPlugin(o),t.once("canplay",function(){t.play()})}}),W(this,"forceDegradeToVideo",function(e){var t=i._opts.innerDegrade;t===1&&i._degrade(e)}),this._opts=r,this._plugin=s,this._init()}return ye(a,[{key:"_init",value:function(){var s=this._opts,i=s.media,e=s.preloadTime,t=s.innerDegrade,n=s.isLive;if(i){if(!n&&i.setPlayMode){i.setPlayMode("VOD");return}t&&i.setAttribute("innerdegrade",t),e&&i.setAttribute("preloadtime",e),this._bindEvents()}}},{key:"_bindEvents",value:function(){var s=this._opts.media;s.addEventListener("lowdecode",this._onLowDecode)}},{key:"destroy",value:function(){var s,i;(s=this._opts)===null||s===void 0||(i=s.media)===null||i===void 0||i.removeEventListener("lowdecode",this._onLowDecode),this._plugin=null}}]),a}();function Yl(a,r){var s=r.player,i=s.currentTime,e={startTime:i};switch(Ei(a)){case"boolean":e.seamless=a;break;case"object":Object.assign(e,a);break}return e}var Fi=function(a){Wi(s,a);var r=Ti(s);function s(){var i;fe(this,s);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i=r.call.apply(r,[this].concat(t)),W(j(i),"hls",null),W(j(i),"pluginExtension",null),W(j(i),"getStats",function(){var l;return(l=i.hls)===null||l===void 0?void 0:l.getStats()}),W(j(i),"_onSwitchSubtitle",function(l){var h,o=l.lang;(h=i.hls)===null||h===void 0||h.switchSubtitleStream(o)}),W(j(i),"_onSwitchURL",function(l,h){var o=j(i),u=o.player,p=o.hls;if(p){var c,k,f=Yl(h,j(i));u.config.url=l,p.switchURL(l,f).catch(function(b){}),!f.seamless&&(c=i.player.config)!==null&&c!==void 0&&(k=c.hls)!==null&&k!==void 0&&k.keepStatusAfterSwitch&&i._keepPauseStatus()}}),W(j(i),"_keepPauseStatus",function(){var l=i.player.paused;l&&i.player.once("canplay",function(){i.player.pause()})}),i}return ye(s,[{key:"core",get:function(){return this.hls}},{key:"version",get:function(){var e;return(e=this.hls)===null||e===void 0?void 0:e.version}},{key:"softDecode",get:function(){var e,t,n=(e=this.player)===null||e===void 0||(t=e.config)===null||t===void 0?void 0:t.mediaType;return!!n&&n!=="video"&&n!=="audio"}},{key:"beforePlayerInit",value:function(){var e=this,t=this.player.config;if(!(!t.url&&!t.__allowHlsEmptyUrl__)){this.hls&&this.hls.destroy(),this.player.switchURL=this._onSwitchURL;var n=t.hls||{};if(n.innerDegrade=n.innerDegrade||t.innerDegrade,(n.disconnectTime===null||n.disconnectTime===void 0)&&(n.disconnectTime=0),this.hls=new Bs(re({softDecode:this.softDecode,isLive:t.isLive,media:this.player.media||this.player.video,startTime:t.startTime,url:t.url},n)),this.softDecode||Rs.defineGetterOrSetter(this.player,{url:{get:function(){var o,u;return(o=e.hls)===null||o===void 0||(u=o.media)===null||u===void 0?void 0:u.src},configurable:!0}}),this.softDecode&&(this.pluginExtension=new Il(re({isLive:t.isLive,media:this.player.video},n),this),this.player.forceDegradeToVideo=function(){for(var h,o=arguments.length,u=new Array(o),p=0;p<o;p++)u[p]=arguments[p];return(h=e.pluginExtension)===null||h===void 0?void 0:h.forceDegradeToVideo.apply(h,u)}),t.isLive){var l;(l=this.player)===null||l===void 0||l.useHooks("replay",function(){var h;return(h=e.hls)===null||h===void 0?void 0:h.replay()})}this.on(Ia,this._onSwitchSubtitle),this.on(Js,this._onSwitchURL),this.on(Vn,this.destroy.bind(this)),this._transError(),this._transCoreEvent(_.TTFB),this._transCoreEvent(_.LOAD_START),this._transCoreEvent(_.LOAD_RESPONSE_HEADERS),this._transCoreEvent(_.LOAD_COMPLETE),this._transCoreEvent(_.LOAD_RETRY),this._transCoreEvent(_.SOURCEBUFFER_CREATED),this._transCoreEvent(_.REMOVE_BUFFER),this._transCoreEvent(_.BUFFEREOS),this._transCoreEvent(_.KEYFRAME),this._transCoreEvent(_.METADATA_PARSED),this._transCoreEvent(_.DEMUXED_TRACK),this._transCoreEvent(_.SEI),this._transCoreEvent(_.SEI_IN_TIME),this._transCoreEvent(_.SPEED),this._transCoreEvent(_.HLS_MANIFEST_LOADED),this._transCoreEvent(_.HLS_LEVEL_LOADED),this._transCoreEvent(_.STREAM_EXCEPTION),this._transCoreEvent(_.SWITCH_URL_SUCCESS),this._transCoreEvent(_.SWITCH_URL_FAILED),this._transCoreEvent($.NO_AUDIO_TRACK),this._transCoreEvent($.STREAM_PARSED),this._transCoreEvent($.SUBTITLE_SEGMENTS),this._transCoreEvent($.SUBTITLE_PLAYLIST),this._transCoreEvent($.APPEND_COST),t.url&&this.hls.load(t.url,!0).catch(function(h){})}}},{key:"destroy",value:function(){var e;this.hls&&(this.hls.destroy(),this.hls=null),(e=this.pluginExtension)===null||e===void 0||e.destroy(),this.pluginExtension=null}},{key:"_transError",value:function(){var e=this;this.hls.on($.ERROR,function(t){e.player&&e.player.emit(Mn,new Ds(e.player,t))})}},{key:"_transCoreEvent",value:function(e){var t=this;this.hls.on(e,function(n){t.player&&(t.player.emit("core_event",re(re({},n),{},{eventName:e})),e===_.SEI_IN_TIME&&t.hls.hasSubtitle&&t._emitSeiPaylodTime(n))})}},{key:"_emitSeiPaylodTime",value:function(e){try{var t=JSON.parse(Array.from(e.data.payload).map(function(n){return String.fromCharCode(n)}).join("").slice(0,-1));if(!t.rtmp_dts)return;this.player.emit("core_event",{eventName:$.SEI_PAYLOAD_TIME,time:t.rtmp_dts})}catch{}}}],[{key:"pluginName",get:function(){return"hls"}},{key:"isSupported",value:function(e,t){return Bs.isSupported(e,t)}}]),s}(Rs);W(Fi,"Hls",Bs);W(Fi,"EVENT",$);function mn(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);r&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})),s.push.apply(s,i)}return s}function We(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?mn(Object(s),!0).forEach(function(i){A(a,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):mn(Object(s)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(s,i))})}return a}function te(){te=function(){return a};var a={},r=Object.prototype,s=r.hasOwnProperty,i=Object.defineProperty||function(m,d,y){m[d]=y.value},e=typeof Symbol=="function"?Symbol:{},t=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",l=e.toStringTag||"@@toStringTag";function h(m,d,y){return Object.defineProperty(m,d,{value:y,enumerable:!0,configurable:!0,writable:!0}),m[d]}try{h({},"")}catch{h=function(d,y,S){return d[y]=S}}function o(m,d,y,S){var v=d&&d.prototype instanceof c?d:c,w=Object.create(v.prototype),R=new Y(S||[]);return i(w,"_invoke",{value:Z(m,y,R)}),w}function u(m,d,y){try{return{type:"normal",arg:m.call(d,y)}}catch(S){return{type:"throw",arg:S}}}a.wrap=o;var p={};function c(){}function k(){}function f(){}var b={};h(b,t,function(){return this});var g=Object.getPrototypeOf,E=g&&g(g(M([])));E&&E!==r&&s.call(E,t)&&(b=E);var L=f.prototype=c.prototype=Object.create(b);function C(m){["next","throw","return"].forEach(function(d){h(m,d,function(y){return this._invoke(d,y)})})}function F(m,d){function y(v,w,R,D){var K=u(m[v],m,w);if(K.type!=="throw"){var I=K.arg,O=I.value;return O&&typeof O=="object"&&s.call(O,"__await")?d.resolve(O.__await).then(function(P){y("next",P,R,D)},function(P){y("throw",P,R,D)}):d.resolve(O).then(function(P){I.value=P,R(I)},function(P){return y("throw",P,R,D)})}D(K.arg)}var S;i(this,"_invoke",{value:function(v,w){function R(){return new d(function(D,K){y(v,w,D,K)})}return S=S?S.then(R,R):R()}})}function Z(m,d,y){var S="suspendedStart";return function(v,w){if(S==="executing")throw new Error("Generator is already running");if(S==="completed"){if(v==="throw")throw w;return N()}for(y.method=v,y.arg=w;;){var R=y.delegate;if(R){var D=X(R,y);if(D){if(D===p)continue;return D}}if(y.method==="next")y.sent=y._sent=y.arg;else if(y.method==="throw"){if(S==="suspendedStart")throw S="completed",y.arg;y.dispatchException(y.arg)}else y.method==="return"&&y.abrupt("return",y.arg);S="executing";var K=u(m,d,y);if(K.type==="normal"){if(S=y.done?"completed":"suspendedYield",K.arg===p)continue;return{value:K.arg,done:y.done}}K.type==="throw"&&(S="completed",y.method="throw",y.arg=K.arg)}}}function X(m,d){var y=d.method,S=m.iterator[y];if(S===void 0)return d.delegate=null,y==="throw"&&m.iterator.return&&(d.method="return",d.arg=void 0,X(m,d),d.method==="throw")||y!=="return"&&(d.method="throw",d.arg=new TypeError("The iterator does not provide a '"+y+"' method")),p;var v=u(S,m.iterator,d.arg);if(v.type==="throw")return d.method="throw",d.arg=v.arg,d.delegate=null,p;var w=v.arg;return w?w.done?(d[m.resultName]=w.value,d.next=m.nextLoc,d.method!=="return"&&(d.method="next",d.arg=void 0),d.delegate=null,p):w:(d.method="throw",d.arg=new TypeError("iterator result is not an object"),d.delegate=null,p)}function T(m){var d={tryLoc:m[0]};1 in m&&(d.catchLoc=m[1]),2 in m&&(d.finallyLoc=m[2],d.afterLoc=m[3]),this.tryEntries.push(d)}function G(m){var d=m.completion||{};d.type="normal",delete d.arg,m.completion=d}function Y(m){this.tryEntries=[{tryLoc:"root"}],m.forEach(T,this),this.reset(!0)}function M(m){if(m){var d=m[t];if(d)return d.call(m);if(typeof m.next=="function")return m;if(!isNaN(m.length)){var y=-1,S=function v(){for(;++y<m.length;)if(s.call(m,y))return v.value=m[y],v.done=!1,v;return v.value=void 0,v.done=!0,v};return S.next=S}}return{next:N}}function N(){return{value:void 0,done:!0}}return k.prototype=f,i(L,"constructor",{value:f,configurable:!0}),i(f,"constructor",{value:k,configurable:!0}),k.displayName=h(f,l,"GeneratorFunction"),a.isGeneratorFunction=function(m){var d=typeof m=="function"&&m.constructor;return!!d&&(d===k||(d.displayName||d.name)==="GeneratorFunction")},a.mark=function(m){return Object.setPrototypeOf?Object.setPrototypeOf(m,f):(m.__proto__=f,h(m,l,"GeneratorFunction")),m.prototype=Object.create(L),m},a.awrap=function(m){return{__await:m}},C(F.prototype),h(F.prototype,n,function(){return this}),a.AsyncIterator=F,a.async=function(m,d,y,S,v){v===void 0&&(v=Promise);var w=new F(o(m,d,y,S),v);return a.isGeneratorFunction(d)?w:w.next().then(function(R){return R.done?R.value:w.next()})},C(L),h(L,l,"Generator"),h(L,t,function(){return this}),h(L,"toString",function(){return"[object Generator]"}),a.keys=function(m){var d=Object(m),y=[];for(var S in d)y.push(S);return y.reverse(),function v(){for(;y.length;){var w=y.pop();if(w in d)return v.value=w,v.done=!1,v}return v.done=!0,v}},a.values=M,Y.prototype={constructor:Y,reset:function(m){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(G),!m)for(var d in this)d.charAt(0)==="t"&&s.call(this,d)&&!isNaN(+d.slice(1))&&(this[d]=void 0)},stop:function(){this.done=!0;var m=this.tryEntries[0].completion;if(m.type==="throw")throw m.arg;return this.rval},dispatchException:function(m){if(this.done)throw m;var d=this;function y(K,I){return w.type="throw",w.arg=m,d.next=K,I&&(d.method="next",d.arg=void 0),!!I}for(var S=this.tryEntries.length-1;S>=0;--S){var v=this.tryEntries[S],w=v.completion;if(v.tryLoc==="root")return y("end");if(v.tryLoc<=this.prev){var R=s.call(v,"catchLoc"),D=s.call(v,"finallyLoc");if(R&&D){if(this.prev<v.catchLoc)return y(v.catchLoc,!0);if(this.prev<v.finallyLoc)return y(v.finallyLoc)}else if(R){if(this.prev<v.catchLoc)return y(v.catchLoc,!0)}else{if(!D)throw new Error("try statement without catch or finally");if(this.prev<v.finallyLoc)return y(v.finallyLoc)}}}},abrupt:function(m,d){for(var y=this.tryEntries.length-1;y>=0;--y){var S=this.tryEntries[y];if(S.tryLoc<=this.prev&&s.call(S,"finallyLoc")&&this.prev<S.finallyLoc){var v=S;break}}v&&(m==="break"||m==="continue")&&v.tryLoc<=d&&d<=v.finallyLoc&&(v=null);var w=v?v.completion:{};return w.type=m,w.arg=d,v?(this.method="next",this.next=v.finallyLoc,p):this.complete(w)},complete:function(m,d){if(m.type==="throw")throw m.arg;return m.type==="break"||m.type==="continue"?this.next=m.arg:m.type==="return"?(this.rval=this.arg=m.arg,this.method="return",this.next="end"):m.type==="normal"&&d&&(this.next=d),p},finish:function(m){for(var d=this.tryEntries.length-1;d>=0;--d){var y=this.tryEntries[d];if(y.finallyLoc===m)return this.complete(y.completion,y.afterLoc),G(y),p}},catch:function(m){for(var d=this.tryEntries.length-1;d>=0;--d){var y=this.tryEntries[d];if(y.tryLoc===m){var S=y.completion;if(S.type==="throw"){var v=S.arg;G(y)}return v}}throw new Error("illegal catch attempt")},delegateYield:function(m,d,y){return this.delegate={iterator:M(m),resultName:d,nextLoc:y},this.method==="next"&&(this.arg=void 0),p}},a}function kn(a,r,s,i,e,t,n){try{var l=a[t](n),h=l.value}catch(o){s(o);return}l.done?r(h):Promise.resolve(h).then(i,e)}function Ge(a){return function(){var r=this,s=arguments;return new Promise(function(i,e){var t=a.apply(r,s);function n(h){kn(t,i,e,n,l,"next",h)}function l(h){kn(t,i,e,n,l,"throw",h)}n(void 0)})}}function Ii(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function fn(a,r){for(var s=0;s<r.length;s++){var i=r[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,Xa(i.key),i)}}function Yi(a,r,s){return r&&fn(a.prototype,r),s&&fn(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a}function A(a,r,s){return r=Xa(r),r in a?Object.defineProperty(a,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[r]=s,a}function Fa(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),r&&kt(a,r)}function Ci(a){return Ci=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Ci(a)}function kt(a,r){return kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,e){return i.__proto__=e,i},kt(a,r)}function Dl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ee(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Pl(a,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ee(a)}function Ca(a){var r=Dl();return function(){var i=Ci(a),e;if(r){var t=Ci(this).constructor;e=Reflect.construct(i,arguments,t)}else e=i.apply(this,arguments);return Pl(this,e)}}function Kl(a,r){if(typeof a!="object"||a===null)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var i=s.call(a,r||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function Xa(a){var r=Kl(a,"string");return typeof r=="symbol"?r:String(r)}var ds=new Fe("BufferService"),Hl=function(){function a(r,s,i){Ii(this,a),A(this,"flv",null),A(this,"_demuxer",new ha),A(this,"_remuxer",null),A(this,"_mse",null),A(this,"_softVideo",null),A(this,"_sourceCreated",!1),A(this,"_needInitSegment",!0),A(this,"_discontinuity",!0),A(this,"_contiguous",!1),A(this,"_initSegmentId",""),A(this,"_cachedBuffer",null),A(this,"_demuxStartTime",0),A(this,"_opts",null),this.flv=r,this._opts=i,s?this._softVideo=s:(this._remuxer=new Lt(this._demuxer.videoTrack,this._demuxer.audioTrack),this._mse=new ce,this._mse.bindMedia(r.media))}return Yi(a,[{key:"baseDts",get:function(){var s,i;return(s=this._demuxer)===null||s===void 0||(i=s._fixer)===null||i===void 0?void 0:i._baseDts}},{key:"seamlessSwitch",value:function(){this._needInitSegment=!0,this._discontinuity=!0,this._contiguous=!0,this._initSegmentId=""}},{key:"unContiguous",value:function(s){this._contiguous=!1,this._demuxStartTime=s}},{key:"reset",value:function(){var r=Ge(te().mark(function i(){var e,t=arguments;return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(e=t.length>0&&t[0]!==void 0?t[0]:!1,!(this._mse&&!e)){l.next=6;break}return l.next=4,this._mse.unbindMedia();case 4:return l.next=6,this._mse.bindMedia(this.flv.media);case 6:this._needInitSegment=!0,this._discontinuity=!0,this._contiguous=!1,this._sourceCreated=!1,this._initSegmentId="";case 11:case"end":return l.stop()}},i,this)}));function s(){return r.apply(this,arguments)}return s}()},{key:"endOfStream",value:function(){var r=Ge(te().mark(function i(){return te().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._mse){t.next=7;break}if(!this._sourceCreated){t.next=5;break}return t.next=4,this._mse.endOfStream();case 4:this.flv.emit(_.BUFFEREOS);case 5:t.next=8;break;case 7:this._softVideo&&this._softVideo.endOfStream();case 8:case"end":return t.stop()}},i,this)}));function s(){return r.apply(this,arguments)}return s}()},{key:"updateDuration",value:function(){var r=Ge(te().mark(function i(e){return te().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._mse){n.next=7;break}if(this._mse.isOpened){n.next=4;break}return n.next=4,this._mse.open();case 4:return ds.debug("update duration",e),n.next=7,this._mse.updateDuration(e);case 7:case"end":return n.stop()}},i,this)}));function s(i){return r.apply(this,arguments)}return s}()},{key:"destroy",value:function(){var r=Ge(te().mark(function i(){return te().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._mse){t.next=3;break}return t.next=3,this._mse.unbindMedia();case 3:this._mse=null,this._softVideo=null,this._demuxer=null,this._remuxer=null;case 7:case"end":return t.stop()}},i,this)}));function s(){return r.apply(this,arguments)}return s}()},{key:"appendBuffer",value:function(){var r=Ge(te().mark(function i(e){var t,n,l,h,o,u,p,c,k,f,b,g,E,L;return te().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(this._cachedBuffer&&(e=Ts(this._cachedBuffer,e),this._cachedBuffer=null),t=this._demuxer,!(!e||!e.length||!t)){F.next=4;break}return F.abrupt("return");case 4:F.prev=4,t.demuxAndFix(e,this._discontinuity,this._contiguous,this._demuxStartTime),F.next=11;break;case 8:throw F.prev=8,F.t0=F.catch(4),new pe(q.DEMUX,q.SUB_TYPES.FLV,F.t0);case 11:if(n=t.videoTrack,l=t.audioTrack,h=t.metadataTrack,o=n.exist(),u=l.exist(),this._opts.onlyAudio&&(o=!1,n.present=!1),this._opts.onlyVideo&&(u=!1,l.present=!1),!(!o&&n.present||!u&&l.present)){F.next=29;break}if(p=0,c=o?n:u?l:void 0,c&&c.samples.length&&(p=(c.samples[c.samples.length-1].originPts-c.samples[0].originPts)/c.timescale*1e3),!(p>this._opts.analyzeDuration)){F.next=27;break}ds.warn("analyze duration exceeded, ".concat(p,"ms"),c),n.present=o,l.present=u,this.flv.emit(_.ANALYZE_DURATION_EXCEEDED,{duration:p}),F.next=29;break;case 27:return this._cachedBuffer=e,F.abrupt("return");case 29:if(k=n.type,f=l.type,this._fireEvents(n,l,h),this._discontinuity=!1,this._contiguous=!0,this._demuxStartTime=0,b=this._mse,this.flv.emit(_.DEMUXED_TRACK,{videoTrack:n}),g="".concat(n.codec,"/").concat(n.width,"/").concat(n.height,"/").concat(l.codec,"/").concat(l.config),g!==this._initSegmentId&&(this._needInitSegment=!0,this._initSegmentId=g,this._emitMetaParsedEvent(n,l)),!b){F.next=65;break}if(this._sourceCreated){F.next=47;break}return F.next=43,b.open();case 43:o&&(ds.log("codec: video/mp4;codecs=".concat(n.codec)),b.createSource(k,"video/mp4;codecs=".concat(n.codec))),u&&(ds.log("codec: audio/mp4;codecs=".concat(l.codec)),b.createSource(f,"audio/mp4;codecs=".concat(l.codec))),this._sourceCreated=!0,this.flv.emit(_.SOURCEBUFFER_CREATED);case 47:F.prev=47,E=this._remuxer.remux(this._needInitSegment),F.next=54;break;case 51:throw F.prev=51,F.t1=F.catch(47),new pe(q.REMUX,q.SUB_TYPES.FMP4,F.t1);case 54:if(!(this._needInitSegment&&!E.videoInitSegment&&!E.audioInitSegment)){F.next=56;break}return F.abrupt("return");case 56:return this._needInitSegment=!1,L=[],E.videoInitSegment&&L.push(b.append(k,E.videoInitSegment)),E.audioInitSegment&&L.push(b.append(f,E.audioInitSegment)),E.videoSegment&&L.push(b.append(k,E.videoSegment)),E.audioSegment&&L.push(b.append(f,E.audioSegment)),F.abrupt("return",Promise.all(L));case 65:this._softVideo&&this._softVideo.appendBuffer(n,l);case 66:case"end":return F.stop()}},i,this,[[4,8],[47,51]])}));function s(i){return r.apply(this,arguments)}return s}()},{key:"evictBuffer",value:function(){var r=Ge(te().mark(function i(e){var t=this,n,l,h,o;return te().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(n=this.flv.media,!(!this._mse||!this._demuxer||!n||!e||e<0)){p.next=3;break}return p.abrupt("return");case 3:if(l=n.currentTime,h=l-e,!(h<=0)){p.next=7;break}return p.abrupt("return");case 7:if(o=me.start(me.get(n)),!(o+1>=h)){p.next=10;break}return p.abrupt("return");case 10:return p.abrupt("return",this._mse.clearBuffer(0,h).then(function(){return t.flv.emit(_.REMOVE_BUFFER,{removeEnd:h})}));case 11:case"end":return p.stop()}},i,this)}));function s(i){return r.apply(this,arguments)}return s}()},{key:"_emitMetaParsedEvent",value:function(s,i){s.exist()&&this.flv.emit(_.METADATA_PARSED,{type:"video",track:s,meta:{codec:s.codec,timescale:s.timescale,width:s.width,height:s.height,sarRatio:s.sarRatio,baseDts:s.baseDts}}),i.exist()&&this.flv.emit(_.METADATA_PARSED,{type:"audio",track:i,meta:{codec:i.codec,channelCount:i.channelCount,sampleRate:i.sampleRate,timescale:i.timescale,baseDts:i.baseDts}}),ds.debug("track parsed",s,i)}},{key:"_fireEvents",value:function(s,i,e){var t=this;ds.debug(s.samples,i.samples),e.flvScriptSamples.forEach(function(n){t.flv.emit(_.FLV_SCRIPT_DATA,n),ds.debug("flvScriptData",n)}),s.samples.forEach(function(n){n.keyframe&&t.flv.emit(_.KEYFRAME,{pts:n.pts})}),s.warnings.forEach(function(n){var l;switch(n.type){case de.LARGE_AV_SHIFT:l=_.LARGE_AV_FIRST_FRAME_GAP_DETECT;break;case de.LARGE_VIDEO_GAP:l=_.LARGE_VIDEO_DTS_GAP_DETECT;break;case de.LARGE_VIDEO_GAP_BETWEEN_CHUNK:l=_.MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT;break}l&&t.flv.emit(_.STREAM_EXCEPTION,We(We({},n),{},{type:l})),ds.warn("video exception",n)}),i.warnings.forEach(function(n){var l;switch(n.type){case de.LARGE_AUDIO_GAP:l=_.LARGE_AUDIO_DTS_GAP_DETECT;break;case de.AUDIO_FILLED:l=_.AUDIO_GAP_DETECT;break;case de.AUDIO_DROPPED:l=_.AUDIO_OVERLAP_DETECT;break}l&&t.flv.emit(_.STREAM_EXCEPTION,We(We({},n),{},{type:l})),ds.warn("audio exception",n)}),e.seiSamples.forEach(function(n){t.flv.emit(_.SEI,We(We({},n),{},{sei:{code:n.data.type,content:n.data.payload,dts:n.pts}}))})}}]),a}();function Nl(a){var r=We({retryCount:3,retryDelay:1e3,loadTimeout:1e4,maxReaderInterval:5e3,preloadTime:5,isLive:!1,softDecode:!1,bufferBehind:10,maxJumpDistance:3,analyzeDuration:2e4,seamlesslyReload:!1,keepStatusAfterSwitch:!0,onlyVideo:!1,onlyAudio:!1},a);return r.isLive&&r.preloadTime&&(r.maxLatency||(r.maxLatency=r.preloadTime*2),r.targetLatency||(r.targetLatency=r.preloadTime),(r.disconnectTime===null||r.disconnectTime===void 0)&&(r.disconnectTime=r.maxLatency)),r}function Bl(a,r){var s=0,i=a.length-1,e=0,t=0,n=i;for(r<a[0]&&(s=0,t=n+1);t<=n;)if(e=t+Math.floor((n-t)/2),e===i||r>=a[e]&&r<a[e+1]){s=e;break}else a[e]<r?t=e+1:n=e-1;return s}var ms=new Fe("flv"),ti=function(a){Fa(s,a);var r=Ca(s);function s(i){var e;return Ii(this,s),e=r.call(this),A(ee(e),"media",null),A(ee(e),"_loading",!1),A(ee(e),"_opts",null),A(ee(e),"_bufferService",null),A(ee(e),"_gapService",null),A(ee(e),"_stats",null),A(ee(e),"_mediaLoader",null),A(ee(e),"_maxChunkWaitTimer",null),A(ee(e),"_tickTimer",null),A(ee(e),"_tickInterval",500),A(ee(e),"_urlSwitching",!1),A(ee(e),"_seamlessSwitching",!1),A(ee(e),"_keyframes",null),A(ee(e),"_acceptRanges",!0),A(ee(e),"_onProgress",function(){var t=Ge(te().mark(function n(l,h,o,u){var p,c,k,f,b,g,E,L;return te().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(p=o.startTime,c=o.endTime,k=o.st,f=o.firstByteTime,e._loading=!h,e._firstProgressEmit){F.next=11;break}if(e.media){F.next=6;break}return(b=e._mediaLoader)===null||b===void 0||b.cancel(),F.abrupt("return");case 6:g=u.headers,e.emit(_.TTFB,{url:e._opts.url,responseUrl:u.url,elapsed:k?f-k:c-p}),e.emit(_.LOAD_RESPONSE_HEADERS,{headers:g}),e._acceptRanges=!!(g!=null&&g.get("Accept-Ranges"))||!!(g!=null&&g.get("Content-Range")),e._firstProgressEmit=!0;case 11:if(e._bufferService){F.next=13;break}return F.abrupt("return");case 13:return clearTimeout(e._maxChunkWaitTimer),e._bandwidthService.addChunkRecord(l==null?void 0:l.byteLength,c-p),F.prev=15,F.next=18,e._bufferService.appendBuffer(l);case 18:(E=e._bufferService)===null||E===void 0||E.evictBuffer(e._opts.bufferBehind),F.next=24;break;case 21:return F.prev=21,F.t0=F.catch(15),F.abrupt("return",e._emitError(pe.create(F.t0)));case 24:if(e._urlSwitching&&(e._urlSwitching=!1,e.emit(_.SWITCH_URL_SUCCESS,{url:e._opts.url})),e._seamlessSwitching&&(e._seamlessSwitching=!1,e._tick()),!(h&&!e.media.seeking)){F.next=32;break}return e.emit(_.LOAD_COMPLETE),ms.debug("load done"),e._end(),!e.isLive&&e.media.readyState<=2&&e._tick(),F.abrupt("return");case 32:L=e._opts.maxReaderInterval,L&&(clearTimeout(e._maxChunkWaitTimer),e._maxChunkWaitTimer=setTimeout(function(){ms.debug("onMaxChunkWait",L),e._end()},L));case 34:case"end":return F.stop()}},n,null,[[15,21]])}));return function(n,l,h,o){return t.apply(this,arguments)}}()),A(ee(e),"_onRetryError",function(t,n){ms.debug("load retry",t,n),e.emit(_.LOAD_RETRY,{error:pe.network(t),retryTime:n})}),A(ee(e),"_end",function(){e._clear(),e._bufferService&&e._bufferService.endOfStream(),ms.debug("end stream")}),A(ee(e),"_tick",function(){clearTimeout(e._tickTimer);var t=ee(e),n=t.media;if(n){e._tickTimer=setTimeout(e._tick,e._tickInterval);var l=me.end(me.get(n));if(!(l<.1||!n.readyState)){var h=e._opts;if(An(n))e._gapService&&e._gapService.do(n,h.maxJumpDistance,e.isLive,3);else{if(!n.currentTime&&e._gapService){e._gapService.do(n,h.maxJumpDistance,e.isLive,3);return}h.isLive&&l>h.disconnectTime&&e.disconnect()}}}}),A(ee(e),"_onPlay",function(){var t,n,l=e._opts.softDecode||((t=e.media)===null||t===void 0||(n=t.buffered)===null||n===void 0?void 0:n.length);e.isLive&&!e._loading&&l&&e.replay(void 0,!0)}),A(ee(e),"_onSeeking",Ge(te().mark(function t(){var n,l,h,o,u;return te().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(!e.isLive&&e.seekable)){c.next=14;break}if(n=e._keyframes.times,l=e._keyframes.filepositions,!(!(n!=null&&n.length)||!(l!=null&&l.length))){c.next=5;break}return c.abrupt("return");case 5:if(h=e.media.currentTime,o=Bl(e._keyframes.times,h),u=l[o],u!=null){c.next=10;break}return c.abrupt("return");case 10:return c.next=12,e._mediaLoader.cancel();case 12:e._loadData(null,[u]),e._bufferService.unContiguous(n[o]);case 14:case"end":return c.stop()}},t)}))),A(ee(e),"_onTimeupdate",function(){if(e.media){var t=e._opts,n=e.media.currentTime;if(t.isLive&&t.maxLatency&&t.targetLatency){var l=me.end(me.get(e.media)),h=l-n;h>=t.maxLatency&&(e.media.currentTime=l-t.targetLatency)}e._seiService.throw(n)}}),A(ee(e),"_onFlvScriptData",function(t){var n,l,h,o,u=(n=t.data)===null||n===void 0||(l=n.onMetaData)===null||l===void 0?void 0:l.keyframes,p=(h=t.data)===null||h===void 0||(o=h.onMetaData)===null||o===void 0?void 0:o.duration;u&&(e._keyframes=u),!e._opts.isLive&&p&&e._bufferService.updateDuration(p)}),e._opts=Nl(i),e.media=e._opts.media||document.createElement("video"),e._opts.media=null,e._firstProgressEmit=!1,e._mediaLoader=new Ls(We(We({},e._opts.fetchOptions),{},{retry:e._opts.retryCount,retryDelay:e._opts.retryDelay,timeout:e._opts.loadTimeout,onRetryError:e._onRetryError,onProgress:e._onProgress,responseType:"arraybuffer"})),e._bufferService=new Hl(ee(e),e._opts.softDecode?e.media:void 0,e._opts),e._seiService=new jn(ee(e)),e._bandwidthService=new Qn,e._stats=new qn(ee(e)),e._opts.softDecode||(e._gapService=new Jn),e.media.addEventListener("play",e._onPlay),e.media.addEventListener("seeking",e._onSeeking),e.media.addEventListener("timeupdate",e._onTimeupdate),e.on(_.FLV_SCRIPT_DATA,e._onFlvScriptData),e}return Yi(s,[{key:"version",get:function(){return"3.0.10"}},{key:"isLive",get:function(){return this._opts.isLive}},{key:"baseDts",get:function(){var e;return(e=this._bufferService)===null||e===void 0?void 0:e.baseDts}},{key:"seekable",get:function(){return!!this._keyframes&&this._acceptRanges}},{key:"loader",get:function(){return this._mediaLoader}},{key:"speedInfo",value:function(){return{speed:this._bandwidthService.getLatestSpeed(),avgSpeed:this._bandwidthService.getAvgSpeed()}}},{key:"getStats",value:function(){return this._stats.getStats()}},{key:"bufferInfo",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.1;return me.info(me.get(this.media),(e=this.media)===null||e===void 0?void 0:e.currentTime,t)}},{key:"playbackQuality",value:function(){return On(this.media)}},{key:"load",value:function(){var i=Ge(te().mark(function t(n){var l,h=arguments;return te().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(l=h.length>1&&h[1]!==void 0?h[1]:!1,this._bufferService){u.next=3;break}return u.abrupt("return");case 3:return u.next=5,this._reset(l);case 5:this._loadData(n),clearTimeout(this._tickTimer),this._tickTimer=setTimeout(this._tick,this._tickInterval);case 8:case"end":return u.stop()}},t,this)}));function e(t){return i.apply(this,arguments)}return e}()},{key:"replay",value:function(){var i=Ge(te().mark(function t(){var n=this,l,h,o=arguments;return te().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(l=o.length>0&&o[0]!==void 0?o[0]:this._opts.seamlesslyReload,h=o.length>1?o[1]:void 0,this.media){p.next=4;break}return p.abrupt("return");case 4:if(!l){p.next=10;break}return p.next=7,this._clear();case 7:setTimeout(function(){n._loadData(n._opts.url),n._bufferService.seamlessSwitch(),n._seamlessSwitching=!0}),p.next=12;break;case 10:return p.next=12,this.load();case 12:return p.abrupt("return",this.media.play(!h).catch(function(){}));case 13:case"end":return p.stop()}},t,this)}));function e(){return i.apply(this,arguments)}return e}()},{key:"disconnect",value:function(){return ms.debug("disconnect!"),this._clear()}},{key:"switchURL",value:function(){var i=Ge(te().mark(function t(n,l){var h=this;return te().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this._bufferService){u.next=2;break}return u.abrupt("return");case 2:if(!(!l||!this._opts.isLive)){u.next=7;break}return u.next=5,this.load(n);case 5:return this._urlSwitching=!0,u.abrupt("return",this.media.play(!0).catch(function(){}));case 7:return u.next=9,this._clear();case 9:setTimeout(function(){h._loadData(n),h._bufferService.seamlessSwitch(),h._urlSwitching=!0,h._seamlessSwitching=!0});case 10:case"end":return u.stop()}},t,this)}));function e(t,n){return i.apply(this,arguments)}return e}()},{key:"destroy",value:function(){var i=Ge(te().mark(function t(){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.media){l.next=2;break}return l.abrupt("return");case 2:return this.removeAllListeners(),this._seiService.reset(),this.media.removeEventListener("play",this._onPlay),this.media.removeEventListener("seeking",this._onSeeking),this.media.removeEventListener("timeupdate",this._onTimeupdate),l.next=9,Promise.all([this._clear(),this._bufferService.destroy()]);case 9:this.media=null,this._bufferService=null;case 11:case"end":return l.stop()}},t,this)}));function e(){return i.apply(this,arguments)}return e}()},{key:"_emitError",value:function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;ms.table(e),ms.error(e),ms.error((t=this.media)===null||t===void 0?void 0:t.error),this._urlSwitching&&(this._urlSwitching=!1,this._seamlessSwitching=!1,this.emit(_.SWITCH_URL_FAILED,e)),this.emit(_.ERROR,e),n&&(this._seiService.reset(),this._end())}},{key:"_reset",value:function(){var i=Ge(te().mark(function t(){var n,l=arguments;return te().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n=l.length>0&&l[0]!==void 0?l[0]:!1,this._seiService.reset(),this._bandwidthService.reset(),this._stats.reset(),o.next=6,this._clear();case 6:return o.next=8,this._bufferService.reset(n);case 8:case"end":return o.stop()}},t,this)}));function e(){return i.apply(this,arguments)}return e}()},{key:"_loadData",value:function(){var i=Ge(te().mark(function t(n,l){var h;return te().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n&&(this._opts.url=n),h=n=this._opts.url,n){u.next=4;break}throw new Error("Source url is missing");case 4:if(this._opts.preProcessUrl&&(h=this._opts.preProcessUrl(n).url),this._mediaLoader.finnalUrl=h,this.emit(_.LOAD_START,{url:h}),ms.debug("load data, loading:",this._loading,h),!this._loading){u.next=11;break}return u.next=11,this._mediaLoader.cancel();case 11:return this._loading=!0,u.prev=12,u.next=15,this._mediaLoader.load({url:h,range:l});case 15:u.next=20;break;case 17:return u.prev=17,u.t0=u.catch(12),u.abrupt("return",this._emitError(pe.network(u.t0)));case 20:case"end":return u.stop()}},t,this,[[12,17]])}));function e(t,n){return i.apply(this,arguments)}return e}()},{key:"_clear",value:function(){var i=Ge(te().mark(function t(){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this._mediaLoader){l.next=3;break}return l.next=3,this._mediaLoader.cancel();case 3:clearTimeout(this._maxChunkWaitTimer),clearTimeout(this._tickTimer),this._loading=!1,this._firstProgressEmit=!1;case 7:case"end":return l.stop()}},t,this)}));function e(){return i.apply(this,arguments)}return e}()}],[{key:"isSupported",value:function(e){return!e||e==="video"||e==="audio"?ce.isSupported():typeof WebAssembly<"u"}},{key:"enableLogger",value:function(){Fe.enable(),Vs.enable()}},{key:"disableLogger",value:function(){Fe.disable(),Vs.disable()}}]),s}(Fs);try{localStorage.getItem("xgd")?ti.enableLogger():ti.disableLogger()}catch{}var Ul=function(){function a(r,s){var i=this;Ii(this,a),A(this,"_onLowDecode",function(){var e,t,n,l,h=i._opts,o=h.media,u=h.innerDegrade,p=h.backupURL;(e=i._plugin)===null||e===void 0||(t=e.player)===null||t===void 0||t.emit("lowdecode",o.degradeInfo),(n=i._plugin)===null||n===void 0||(l=n.player)===null||l===void 0||l.emit("core_event",We(We({},o.degradeInfo),{},{eventName:_.LOWDECODE})),(u===1||u===3)&&p&&i._degrade(p)}),A(this,"_degrade",function(e){var t=i._plugin.player,n=t.video;if((n==null?void 0:n.TAG)==="MVideo"){var l=t.video.degradeVideo;t.video=l,n.degrade(e),e&&(t.config.url=e);var h=t.root.firstChild;h.TAG==="MVideo"&&t.root.replaceChild(l,h);var o=i._plugin.constructor.pluginName.toLowerCase();t.unRegisterPlugin(o),t.once("canplay",function(){t.play()})}}),A(this,"forceDegradeToVideo",function(e){var t=i._opts.innerDegrade;(t===1||t===3)&&i._degrade(e)}),this._opts=r,this._plugin=s,this._init()}return Yi(a,[{key:"_init",value:function(){var s=this._opts,i=s.media,e=s.preloadTime,t=s.innerDegrade,n=s.decodeMode;i&&(t&&i.setAttribute("innerdegrade",t),e&&i.setAttribute("preloadtime",e),i.setDecodeMode&&i.setDecodeMode(n),this._bindEvents())}},{key:"_bindEvents",value:function(){var s=this._opts.media;s.addEventListener("lowdecode",this._onLowDecode)}},{key:"destroy",value:function(){var s,i;(s=this._opts)===null||s===void 0||(i=s.media)===null||i===void 0||i.removeEventListener("lowdecode",this._onLowDecode),this._plugin=null}}]),a}(),wa=function(a){Fa(s,a);var r=Ca(s);function s(){var i;Ii(this,s);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i=r.call.apply(r,[this].concat(t)),A(ee(i),"flv",null),A(ee(i),"pluginExtension",null),A(ee(i),"getStats",function(){var l;return(l=i.flv)===null||l===void 0?void 0:l.getStats()}),A(ee(i),"destroy",function(){var l;i.flv&&(i.flv.destroy(),i.flv=null),(l=i.pluginExtension)===null||l===void 0||l.destroy(),i.pluginExtension=null}),A(ee(i),"_onSwitchURL",function(l,h){if(i.flv){var o,u;i.player.config.url=l,i.flv.switchURL(l,h),!h&&(o=i.player.config)!==null&&o!==void 0&&(u=o.flv)!==null&&u!==void 0&&u.keepStatusAfterSwitch&&i._keepPauseStatus()}}),A(ee(i),"_keepPauseStatus",function(){var l=i.player.paused;l&&i.player.once("canplay",function(){i.player.pause()})}),A(ee(i),"_onDefinitionChange",function(l){var h=l.to;i.flv&&i.flv.switchURL(h)}),i}return Yi(s,[{key:"core",get:function(){return this.flv}},{key:"version",get:function(){var e;return(e=this.flv)===null||e===void 0?void 0:e.version}},{key:"softDecode",get:function(){var e,t,n=(e=this.player)===null||e===void 0||(t=e.config)===null||t===void 0?void 0:t.mediaType;return!!n&&n!=="video"&&n!=="audio"}},{key:"loader",get:function(){var e;return(e=this.flv)===null||e===void 0?void 0:e.loader}},{key:"beforePlayerInit",value:function(){var e=this,t=this.player.config;if(t.url){this.flv&&this.flv.destroy(),this.player.switchURL=this._onSwitchURL;var n=t.flv||{};if((n.disconnectTime===null||n.disconnectTime===void 0)&&(n.disconnectTime=0),this.flv=new ti(We({softDecode:this.softDecode,isLive:t.isLive,media:this.player.video,preProcessUrl:function(o,u){var p,c;return((p=(c=e.player).preProcessUrl)===null||p===void 0?void 0:p.call(c,o,u))||{url:o,ext:u}}},n)),this.softDecode||Rs.defineGetterOrSetter(this.player,{url:{get:function(){var o,u;return(o=e.flv)===null||o===void 0||(u=o.media)===null||u===void 0?void 0:u.src},configurable:!0}}),this.softDecode&&(this.pluginExtension=new Ul(We({media:this.player.video},t.flv),this),this.player.forceDegradeToVideo=function(){for(var h,o=arguments.length,u=new Array(o),p=0;p<o;p++)u[p]=arguments[p];return(h=e.pluginExtension)===null||h===void 0?void 0:h.forceDegradeToVideo.apply(h,u)}),t.isLive){var l;(l=this.player)===null||l===void 0||l.useHooks("replay",function(){var h;return(h=e.flv)===null||h===void 0?void 0:h.replay()})}this.on(Js,this._onSwitchURL),this.on(Vn,this.destroy),this._transError(),this._transCoreEvent(_.TTFB),this._transCoreEvent(_.LOAD_START),this._transCoreEvent(_.LOAD_RESPONSE_HEADERS),this._transCoreEvent(_.LOAD_COMPLETE),this._transCoreEvent(_.LOAD_RETRY),this._transCoreEvent(_.SOURCEBUFFER_CREATED),this._transCoreEvent(_.ANALYZE_DURATION_EXCEEDED),this._transCoreEvent(_.REMOVE_BUFFER),this._transCoreEvent(_.BUFFEREOS),this._transCoreEvent(_.KEYFRAME),this._transCoreEvent(_.METADATA_PARSED),this._transCoreEvent(_.SEI),this._transCoreEvent(_.SEI_IN_TIME),this._transCoreEvent(_.FLV_SCRIPT_DATA),this._transCoreEvent(_.STREAM_EXCEPTION),this._transCoreEvent(_.SWITCH_URL_SUCCESS),this._transCoreEvent(_.SWITCH_URL_FAILED),this.flv.load(t.url,!0)}}},{key:"_transError",value:function(){var e=this;this.flv.on(_.ERROR,function(t){e.player&&e.player.emit(Mn,new Ds(e.player,t))})}},{key:"_transCoreEvent",value:function(e){var t=this;this.flv.on(e,function(n){t.player&&t.player.emit("core_event",We(We({},n),{},{eventName:e}))})}}],[{key:"pluginName",get:function(){return"flv"}},{key:"isSupported",value:function(e,t){return ti.isSupported(e,t)}}]),s}(Rs);A(wa,"Flv",ti);function yn(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);r&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})),s.push.apply(s,i)}return s}function Zs(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?yn(Object(s),!0).forEach(function(i){Ne(a,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):yn(Object(s)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(s,i))})}return a}function ie(){ie=function(){return a};var a={},r=Object.prototype,s=r.hasOwnProperty,i=Object.defineProperty||function(m,d,y){m[d]=y.value},e=typeof Symbol=="function"?Symbol:{},t=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",l=e.toStringTag||"@@toStringTag";function h(m,d,y){return Object.defineProperty(m,d,{value:y,enumerable:!0,configurable:!0,writable:!0}),m[d]}try{h({},"")}catch{h=function(d,y,S){return d[y]=S}}function o(m,d,y,S){var v=d&&d.prototype instanceof c?d:c,w=Object.create(v.prototype),R=new Y(S||[]);return i(w,"_invoke",{value:Z(m,y,R)}),w}function u(m,d,y){try{return{type:"normal",arg:m.call(d,y)}}catch(S){return{type:"throw",arg:S}}}a.wrap=o;var p={};function c(){}function k(){}function f(){}var b={};h(b,t,function(){return this});var g=Object.getPrototypeOf,E=g&&g(g(M([])));E&&E!==r&&s.call(E,t)&&(b=E);var L=f.prototype=c.prototype=Object.create(b);function C(m){["next","throw","return"].forEach(function(d){h(m,d,function(y){return this._invoke(d,y)})})}function F(m,d){function y(v,w,R,D){var K=u(m[v],m,w);if(K.type!=="throw"){var I=K.arg,O=I.value;return O&&typeof O=="object"&&s.call(O,"__await")?d.resolve(O.__await).then(function(P){y("next",P,R,D)},function(P){y("throw",P,R,D)}):d.resolve(O).then(function(P){I.value=P,R(I)},function(P){return y("throw",P,R,D)})}D(K.arg)}var S;i(this,"_invoke",{value:function(v,w){function R(){return new d(function(D,K){y(v,w,D,K)})}return S=S?S.then(R,R):R()}})}function Z(m,d,y){var S="suspendedStart";return function(v,w){if(S==="executing")throw new Error("Generator is already running");if(S==="completed"){if(v==="throw")throw w;return N()}for(y.method=v,y.arg=w;;){var R=y.delegate;if(R){var D=X(R,y);if(D){if(D===p)continue;return D}}if(y.method==="next")y.sent=y._sent=y.arg;else if(y.method==="throw"){if(S==="suspendedStart")throw S="completed",y.arg;y.dispatchException(y.arg)}else y.method==="return"&&y.abrupt("return",y.arg);S="executing";var K=u(m,d,y);if(K.type==="normal"){if(S=y.done?"completed":"suspendedYield",K.arg===p)continue;return{value:K.arg,done:y.done}}K.type==="throw"&&(S="completed",y.method="throw",y.arg=K.arg)}}}function X(m,d){var y=d.method,S=m.iterator[y];if(S===void 0)return d.delegate=null,y==="throw"&&m.iterator.return&&(d.method="return",d.arg=void 0,X(m,d),d.method==="throw")||y!=="return"&&(d.method="throw",d.arg=new TypeError("The iterator does not provide a '"+y+"' method")),p;var v=u(S,m.iterator,d.arg);if(v.type==="throw")return d.method="throw",d.arg=v.arg,d.delegate=null,p;var w=v.arg;return w?w.done?(d[m.resultName]=w.value,d.next=m.nextLoc,d.method!=="return"&&(d.method="next",d.arg=void 0),d.delegate=null,p):w:(d.method="throw",d.arg=new TypeError("iterator result is not an object"),d.delegate=null,p)}function T(m){var d={tryLoc:m[0]};1 in m&&(d.catchLoc=m[1]),2 in m&&(d.finallyLoc=m[2],d.afterLoc=m[3]),this.tryEntries.push(d)}function G(m){var d=m.completion||{};d.type="normal",delete d.arg,m.completion=d}function Y(m){this.tryEntries=[{tryLoc:"root"}],m.forEach(T,this),this.reset(!0)}function M(m){if(m){var d=m[t];if(d)return d.call(m);if(typeof m.next=="function")return m;if(!isNaN(m.length)){var y=-1,S=function v(){for(;++y<m.length;)if(s.call(m,y))return v.value=m[y],v.done=!1,v;return v.value=void 0,v.done=!0,v};return S.next=S}}return{next:N}}function N(){return{value:void 0,done:!0}}return k.prototype=f,i(L,"constructor",{value:f,configurable:!0}),i(f,"constructor",{value:k,configurable:!0}),k.displayName=h(f,l,"GeneratorFunction"),a.isGeneratorFunction=function(m){var d=typeof m=="function"&&m.constructor;return!!d&&(d===k||(d.displayName||d.name)==="GeneratorFunction")},a.mark=function(m){return Object.setPrototypeOf?Object.setPrototypeOf(m,f):(m.__proto__=f,h(m,l,"GeneratorFunction")),m.prototype=Object.create(L),m},a.awrap=function(m){return{__await:m}},C(F.prototype),h(F.prototype,n,function(){return this}),a.AsyncIterator=F,a.async=function(m,d,y,S,v){v===void 0&&(v=Promise);var w=new F(o(m,d,y,S),v);return a.isGeneratorFunction(d)?w:w.next().then(function(R){return R.done?R.value:w.next()})},C(L),h(L,l,"Generator"),h(L,t,function(){return this}),h(L,"toString",function(){return"[object Generator]"}),a.keys=function(m){var d=Object(m),y=[];for(var S in d)y.push(S);return y.reverse(),function v(){for(;y.length;){var w=y.pop();if(w in d)return v.value=w,v.done=!1,v}return v.done=!0,v}},a.values=M,Y.prototype={constructor:Y,reset:function(m){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(G),!m)for(var d in this)d.charAt(0)==="t"&&s.call(this,d)&&!isNaN(+d.slice(1))&&(this[d]=void 0)},stop:function(){this.done=!0;var m=this.tryEntries[0].completion;if(m.type==="throw")throw m.arg;return this.rval},dispatchException:function(m){if(this.done)throw m;var d=this;function y(K,I){return w.type="throw",w.arg=m,d.next=K,I&&(d.method="next",d.arg=void 0),!!I}for(var S=this.tryEntries.length-1;S>=0;--S){var v=this.tryEntries[S],w=v.completion;if(v.tryLoc==="root")return y("end");if(v.tryLoc<=this.prev){var R=s.call(v,"catchLoc"),D=s.call(v,"finallyLoc");if(R&&D){if(this.prev<v.catchLoc)return y(v.catchLoc,!0);if(this.prev<v.finallyLoc)return y(v.finallyLoc)}else if(R){if(this.prev<v.catchLoc)return y(v.catchLoc,!0)}else{if(!D)throw new Error("try statement without catch or finally");if(this.prev<v.finallyLoc)return y(v.finallyLoc)}}}},abrupt:function(m,d){for(var y=this.tryEntries.length-1;y>=0;--y){var S=this.tryEntries[y];if(S.tryLoc<=this.prev&&s.call(S,"finallyLoc")&&this.prev<S.finallyLoc){var v=S;break}}v&&(m==="break"||m==="continue")&&v.tryLoc<=d&&d<=v.finallyLoc&&(v=null);var w=v?v.completion:{};return w.type=m,w.arg=d,v?(this.method="next",this.next=v.finallyLoc,p):this.complete(w)},complete:function(m,d){if(m.type==="throw")throw m.arg;return m.type==="break"||m.type==="continue"?this.next=m.arg:m.type==="return"?(this.rval=this.arg=m.arg,this.method="return",this.next="end"):m.type==="normal"&&d&&(this.next=d),p},finish:function(m){for(var d=this.tryEntries.length-1;d>=0;--d){var y=this.tryEntries[d];if(y.finallyLoc===m)return this.complete(y.completion,y.afterLoc),G(y),p}},catch:function(m){for(var d=this.tryEntries.length-1;d>=0;--d){var y=this.tryEntries[d];if(y.tryLoc===m){var S=y.completion;if(S.type==="throw"){var v=S.arg;G(y)}return v}}throw new Error("illegal catch attempt")},delegateYield:function(m,d,y){return this.delegate={iterator:M(m),resultName:d,nextLoc:y},this.method==="next"&&(this.arg=void 0),p}},a}function bn(a,r,s,i,e,t,n){try{var l=a[t](n),h=l.value}catch(o){s(o);return}l.done?r(h):Promise.resolve(h).then(i,e)}function Ce(a){return function(){var r=this,s=arguments;return new Promise(function(i,e){var t=a.apply(r,s);function n(h){bn(t,i,e,n,l,"next",h)}function l(h){bn(t,i,e,n,l,"throw",h)}n(void 0)})}}function Us(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function gn(a,r){for(var s=0;s<r.length;s++){var i=r[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,Ga(i.key),i)}}function zs(a,r,s){return r&&gn(a.prototype,r),s&&gn(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a}function Ne(a,r,s){return r=Ga(r),r in a?Object.defineProperty(a,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[r]=s,a}function Ct(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),r&&ft(a,r)}function Xi(a){return Xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Xi(a)}function ft(a,r){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,e){return i.__proto__=e,i},ft(a,r)}function zl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ge(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Al(a,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ge(a)}function Xt(a){var r=zl();return function(){var i=Xi(a),e;if(r){var t=Xi(this).constructor;e=Reflect.construct(i,arguments,t)}else e=i.apply(this,arguments);return Al(this,e)}}function Ol(a,r){if(typeof a!="object"||a===null)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var i=s.call(a,r||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function Ga(a){var r=Ol(a,"string");return typeof r=="symbol"?r:String(r)}var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.default=function(a){for(var r=0,s=arguments.length,i=Array(s>1?s-1:0),e=1;e<s;e++)i[e-1]=arguments[e];var t=!0,n=!1,l=void 0;try{for(var h=i[Symbol.iterator](),o;!(t=(o=h.next()).done);t=!0){var u=o.value;r+=u.length}}catch(C){n=!0,l=C}finally{try{!t&&h.return&&h.return()}finally{if(n)throw l}}var p=new a(r),c=0,k=!0,f=!1,b=void 0;try{for(var g=i[Symbol.iterator](),E;!(k=(E=g.next()).done);k=!0){var L=E.value;p.set(L,c),c+=L.length}}catch(C){f=!0,b=C}finally{try{!k&&g.return&&g.return()}finally{if(f)throw b}}return p};var Jl=wt,jl=Ql(Jl);function Ql(a){return a&&a.__esModule?a:{default:a}}var ql=jl.default;const $l=Ja(ql);var Wa="3.0.10",Es={416:-499899,401:-499898,403:-499897,404:-499896,timeout:-499895,"4xx":-499894,"5xx":-499893,networkError:-499892,contentError:-499891,mse:-499971,mseOpen:-499972,mseAppend:-499973,boxsError:-499980,moovError:-499981,notH264:-499982,mdatError:-499983,mdhdError:-499984,metaError:-499985,muxError:-499986,h265Error:-499987,noneURL:-499988,other:-499989,other1:-499990,waitTimeout:-499791,onWaitInBufferRange:-499792},Ws={network:1003,format:1005,runtime:1002,other:9999,demux:1006,remux:1007},eh=zs(function a(r,s,i){Us(this,a);var e=0,t=0;return i&&i.range&&i.range.length>1&&(e=i.range[0],t=i.range[1]),{errorCode:s,errorType:r,errorTypeCode:Ws[r],errorMessage:(i==null?void 0:i.httpText)||(i==null?void 0:i.message),url:i==null?void 0:i.url,httpCode:s,version:Wa,rangeStart:e,rangeEnd:t,ext:i,mediaError:{code:s,message:(i==null?void 0:i.httpText)||(i==null?void 0:i.message)}}}),sh=zs(function a(r,s,i){return Us(this,a),{errorCode:s,errorType:r,errorTypeCode:Ws[r],version:Wa,errorMessage:i.msg,ext:i,mediaError:{code:s,message:i.msg}}}),is={};is.nowTime=function(){try{return parseInt(performance.now(),10)}catch{return new Date().getTime()}};is.concatData=function(a,r){var s=[],i=0;a&&s.push(a),r&&s.push(r),s.every(function(n){return n&&(i+=n.byteLength),!0});var e=new Uint8Array(i),t=0;return s.every(function(n){return n&&(e.set(n,t),t+=n.byteLength),!0}),e};function ih(a,r){var s=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(s!=null){var i,e,t,n,l=[],h=!0,o=!1;try{if(t=(s=s.call(a)).next,r===0){if(Object(s)!==s)return;h=!1}else for(;!(h=(i=t.call(s)).done)&&(l.push(i.value),l.length!==r);h=!0);}catch(u){o=!0,e=u}finally{try{if(!h&&s.return!=null&&(n=s.return(),Object(n)!==n))return}finally{if(o)throw e}}return l}}function vn(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);r&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})),s.push.apply(s,i)}return s}function yt(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?vn(Object(s),!0).forEach(function(i){Me(a,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):vn(Object(s)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(s,i))})}return a}function le(){le=function(){return a};var a={},r=Object.prototype,s=r.hasOwnProperty,i=Object.defineProperty||function(m,d,y){m[d]=y.value},e=typeof Symbol=="function"?Symbol:{},t=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",l=e.toStringTag||"@@toStringTag";function h(m,d,y){return Object.defineProperty(m,d,{value:y,enumerable:!0,configurable:!0,writable:!0}),m[d]}try{h({},"")}catch{h=function(d,y,S){return d[y]=S}}function o(m,d,y,S){var v=d&&d.prototype instanceof c?d:c,w=Object.create(v.prototype),R=new Y(S||[]);return i(w,"_invoke",{value:Z(m,y,R)}),w}function u(m,d,y){try{return{type:"normal",arg:m.call(d,y)}}catch(S){return{type:"throw",arg:S}}}a.wrap=o;var p={};function c(){}function k(){}function f(){}var b={};h(b,t,function(){return this});var g=Object.getPrototypeOf,E=g&&g(g(M([])));E&&E!==r&&s.call(E,t)&&(b=E);var L=f.prototype=c.prototype=Object.create(b);function C(m){["next","throw","return"].forEach(function(d){h(m,d,function(y){return this._invoke(d,y)})})}function F(m,d){function y(v,w,R,D){var K=u(m[v],m,w);if(K.type!=="throw"){var I=K.arg,O=I.value;return O&&typeof O=="object"&&s.call(O,"__await")?d.resolve(O.__await).then(function(P){y("next",P,R,D)},function(P){y("throw",P,R,D)}):d.resolve(O).then(function(P){I.value=P,R(I)},function(P){return y("throw",P,R,D)})}D(K.arg)}var S;i(this,"_invoke",{value:function(v,w){function R(){return new d(function(D,K){y(v,w,D,K)})}return S=S?S.then(R,R):R()}})}function Z(m,d,y){var S="suspendedStart";return function(v,w){if(S==="executing")throw new Error("Generator is already running");if(S==="completed"){if(v==="throw")throw w;return N()}for(y.method=v,y.arg=w;;){var R=y.delegate;if(R){var D=X(R,y);if(D){if(D===p)continue;return D}}if(y.method==="next")y.sent=y._sent=y.arg;else if(y.method==="throw"){if(S==="suspendedStart")throw S="completed",y.arg;y.dispatchException(y.arg)}else y.method==="return"&&y.abrupt("return",y.arg);S="executing";var K=u(m,d,y);if(K.type==="normal"){if(S=y.done?"completed":"suspendedYield",K.arg===p)continue;return{value:K.arg,done:y.done}}K.type==="throw"&&(S="completed",y.method="throw",y.arg=K.arg)}}}function X(m,d){var y=d.method,S=m.iterator[y];if(S===void 0)return d.delegate=null,y==="throw"&&m.iterator.return&&(d.method="return",d.arg=void 0,X(m,d),d.method==="throw")||y!=="return"&&(d.method="throw",d.arg=new TypeError("The iterator does not provide a '"+y+"' method")),p;var v=u(S,m.iterator,d.arg);if(v.type==="throw")return d.method="throw",d.arg=v.arg,d.delegate=null,p;var w=v.arg;return w?w.done?(d[m.resultName]=w.value,d.next=m.nextLoc,d.method!=="return"&&(d.method="next",d.arg=void 0),d.delegate=null,p):w:(d.method="throw",d.arg=new TypeError("iterator result is not an object"),d.delegate=null,p)}function T(m){var d={tryLoc:m[0]};1 in m&&(d.catchLoc=m[1]),2 in m&&(d.finallyLoc=m[2],d.afterLoc=m[3]),this.tryEntries.push(d)}function G(m){var d=m.completion||{};d.type="normal",delete d.arg,m.completion=d}function Y(m){this.tryEntries=[{tryLoc:"root"}],m.forEach(T,this),this.reset(!0)}function M(m){if(m){var d=m[t];if(d)return d.call(m);if(typeof m.next=="function")return m;if(!isNaN(m.length)){var y=-1,S=function v(){for(;++y<m.length;)if(s.call(m,y))return v.value=m[y],v.done=!1,v;return v.value=void 0,v.done=!0,v};return S.next=S}}return{next:N}}function N(){return{value:void 0,done:!0}}return k.prototype=f,i(L,"constructor",{value:f,configurable:!0}),i(f,"constructor",{value:k,configurable:!0}),k.displayName=h(f,l,"GeneratorFunction"),a.isGeneratorFunction=function(m){var d=typeof m=="function"&&m.constructor;return!!d&&(d===k||(d.displayName||d.name)==="GeneratorFunction")},a.mark=function(m){return Object.setPrototypeOf?Object.setPrototypeOf(m,f):(m.__proto__=f,h(m,l,"GeneratorFunction")),m.prototype=Object.create(L),m},a.awrap=function(m){return{__await:m}},C(F.prototype),h(F.prototype,n,function(){return this}),a.AsyncIterator=F,a.async=function(m,d,y,S,v){v===void 0&&(v=Promise);var w=new F(o(m,d,y,S),v);return a.isGeneratorFunction(d)?w:w.next().then(function(R){return R.done?R.value:w.next()})},C(L),h(L,l,"Generator"),h(L,t,function(){return this}),h(L,"toString",function(){return"[object Generator]"}),a.keys=function(m){var d=Object(m),y=[];for(var S in d)y.push(S);return y.reverse(),function v(){for(;y.length;){var w=y.pop();if(w in d)return v.value=w,v.done=!1,v}return v.done=!0,v}},a.values=M,Y.prototype={constructor:Y,reset:function(m){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(G),!m)for(var d in this)d.charAt(0)==="t"&&s.call(this,d)&&!isNaN(+d.slice(1))&&(this[d]=void 0)},stop:function(){this.done=!0;var m=this.tryEntries[0].completion;if(m.type==="throw")throw m.arg;return this.rval},dispatchException:function(m){if(this.done)throw m;var d=this;function y(K,I){return w.type="throw",w.arg=m,d.next=K,I&&(d.method="next",d.arg=void 0),!!I}for(var S=this.tryEntries.length-1;S>=0;--S){var v=this.tryEntries[S],w=v.completion;if(v.tryLoc==="root")return y("end");if(v.tryLoc<=this.prev){var R=s.call(v,"catchLoc"),D=s.call(v,"finallyLoc");if(R&&D){if(this.prev<v.catchLoc)return y(v.catchLoc,!0);if(this.prev<v.finallyLoc)return y(v.finallyLoc)}else if(R){if(this.prev<v.catchLoc)return y(v.catchLoc,!0)}else{if(!D)throw new Error("try statement without catch or finally");if(this.prev<v.finallyLoc)return y(v.finallyLoc)}}}},abrupt:function(m,d){for(var y=this.tryEntries.length-1;y>=0;--y){var S=this.tryEntries[y];if(S.tryLoc<=this.prev&&s.call(S,"finallyLoc")&&this.prev<S.finallyLoc){var v=S;break}}v&&(m==="break"||m==="continue")&&v.tryLoc<=d&&d<=v.finallyLoc&&(v=null);var w=v?v.completion:{};return w.type=m,w.arg=d,v?(this.method="next",this.next=v.finallyLoc,p):this.complete(w)},complete:function(m,d){if(m.type==="throw")throw m.arg;return m.type==="break"||m.type==="continue"?this.next=m.arg:m.type==="return"?(this.rval=this.arg=m.arg,this.method="return",this.next="end"):m.type==="normal"&&d&&(this.next=d),p},finish:function(m){for(var d=this.tryEntries.length-1;d>=0;--d){var y=this.tryEntries[d];if(y.finallyLoc===m)return this.complete(y.completion,y.afterLoc),G(y),p}},catch:function(m){for(var d=this.tryEntries.length-1;d>=0;--d){var y=this.tryEntries[d];if(y.tryLoc===m){var S=y.completion;if(S.type==="throw"){var v=S.arg;G(y)}return v}}throw new Error("illegal catch attempt")},delegateYield:function(m,d,y){return this.delegate={iterator:M(m),resultName:d,nextLoc:y},this.method==="next"&&(this.arg=void 0),p}},a}function En(a,r,s,i,e,t,n){try{var l=a[t](n),h=l.value}catch(o){s(o);return}l.done?r(h):Promise.resolve(h).then(i,e)}function Pe(a){return function(){var r=this,s=arguments;return new Promise(function(i,e){var t=a.apply(r,s);function n(h){En(t,i,e,n,l,"next",h)}function l(h){En(t,i,e,n,l,"throw",h)}n(void 0)})}}function Gt(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function Zn(a,r){for(var s=0;s<r.length;s++){var i=r[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,Ra(i.key),i)}}function Wt(a,r,s){return r&&Zn(a.prototype,r),s&&Zn(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a}function Me(a,r,s){return r=Ra(r),r in a?Object.defineProperty(a,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[r]=s,a}function th(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),r&&bt(a,r)}function wi(a){return wi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},wi(a)}function bt(a,r){return bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,e){return i.__proto__=e,i},bt(a,r)}function nh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ah(a,r){if(a==null)return{};var s={},i=Object.keys(a),e,t;for(t=0;t<i.length;t++)e=i[t],!(r.indexOf(e)>=0)&&(s[e]=a[e]);return s}function rh(a,r){if(a==null)return{};var s=ah(a,r),i,e;if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);for(e=0;e<t.length;e++)i=t[e],!(r.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(a,i)&&(s[i]=a[i])}return s}function He(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function lh(a,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return He(a)}function hh(a){var r=nh();return function(){var i=wi(a),e;if(r){var t=wi(this).constructor;e=Reflect.construct(i,arguments,t)}else e=i.apply(this,arguments);return lh(this,e)}}function oh(a,r){return ch(a)||ih(a,r)||Ta(a,r)||kh()}function uh(a){return ph(a)||dh(a)||Ta(a)||mh()}function ph(a){if(Array.isArray(a))return gt(a)}function ch(a){if(Array.isArray(a))return a}function dh(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Ta(a,r){if(a){if(typeof a=="string")return gt(a,r);var s=Object.prototype.toString.call(a).slice(8,-1);if(s==="Object"&&a.constructor&&(s=a.constructor.name),s==="Map"||s==="Set")return Array.from(a);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return gt(a,r)}}function gt(a,r){(r==null||r>a.length)&&(r=a.length);for(var s=0,i=new Array(r);s<r;s++)i[s]=a[s];return i}function mh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fh(a,r){if(typeof a!="object"||a===null)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var i=s.call(a,r||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function Ra(a){var r=fh(a,"string");return typeof r=="symbol"?r:String(r)}function yh(a){return yt({vid:"",moovEnd:8e4,segmentDuration:2,maxDownloadInfoSize:30,responseType:"arraybuffer",cache:null},a)}var ki=Wt(function a(r,s){Gt(this,a),this.type="file",this.message=r,this.data=s}),bh=function(){function a(){Gt(this,a),Me(this,"_data",Object.create(null))}return Wt(a,[{key:"set",value:function(s,i){this._data[s]=i}},{key:"get",value:function(s){return this._data[s]}},{key:"clear",value:function(){this._data=Object.create(null)}}]),a}();function $i(a,r){var s=a.trak;if(!(!s||!s.length)){var i=s.find(function(m){var d,y;return((d=m.mdia)===null||d===void 0||(y=d.hdlr)===null||y===void 0?void 0:y.handlerType)==="vide"}),e=s.find(function(m){var d,y;return((d=m.mdia)===null||d===void 0||(y=d.hdlr)===null||y===void 0?void 0:y.handlerType)==="soun"});if(!(!i&&!e)){var t=[],n=[],l;if(i){var h,o,u,p=(h=i.mdia)===null||h===void 0||(o=h.minf)===null||o===void 0?void 0:o.stbl;if(!p)return;var c=(u=i.mdia.mdhd)===null||u===void 0?void 0:u.timescale,k=p.stts,f=p.stsc,b=p.stsz,g=p.stco,E=p.stss,L=p.ctts;if(!c||!k||!f||!b||!g||!E)return;t=Sn(r,c,k,f,b,g,E,L),l=t.map(function(m){return m.duration})}if(e){var C,F,Z,X=(C=e.mdia)===null||C===void 0||(F=C.minf)===null||F===void 0?void 0:F.stbl;if(!X)return;var T=(Z=e.mdia.mdhd)===null||Z===void 0?void 0:Z.timescale,G=X.stts,Y=X.stsc,M=X.stsz,N=X.stco;if(!T||!G||!Y||!M||!N)return;n=Sn(r,T,G,Y,M,N,null,null,l)}return{videoSegments:t,audioSegments:n}}}}function Sn(a,r,s,i,e,t,n,l,h){var o=[],u=[],p=[],c=i.entries,k=t.entries,f=e.entrySizes,b=n==null?void 0:n.entries,g=l==null?void 0:l.entries,E;g&&(E=[],g.forEach(function(De){for(var ae=De.count,Ae=De.offset,us=0;us<ae;us++)E.push(Ae)}));var L;b&&(L={},b.forEach(function(De){L[De-1]=!0}));var C,F,Z=0,X=0,T=0,G=0,Y=0,M=c[0].samplesPerChunk,N=c[1]?c[1].firstChunk-1:1/0,m=0,d=-1;s.entries.forEach(function(De){var ae=De.count,Ae=De.delta;F=Ae;for(var us=0;us<ae;us++)C={dts:m,startTime:Z,duration:F,size:f[X]||e.sampleSize,offset:k[T]+Y,index:X},b&&(C.keyframe=L[X],C.keyframe?(d++,u.push([C]),p.push(C.duration)):(u[u.length-1].push(C),p[u.length-1]+=C.duration),C.gopId=d),E&&X<E.length&&(C.pts=m+E[X]),X===0&&(C.pts=0),o.push(C),Z+=F,m+=Ae,X++,X<M?Y+=C.size:(T++,Y=0,T>=N&&(G++,N=c[G+1]?c[G+1].firstChunk-1:1/0),M+=c[G].samplesPerChunk)});var y=o.length;if(!(!y||n&&!o[0].keyframe)){var S=[],v=[],w=0,R,D=0,K=function(ae){var Ae;R=v[v.length-1],S.push({index:S.length,startTime:((Ae=S[S.length-1])===null||Ae===void 0?void 0:Ae.endTime)||v[0].startTime/r,endTime:(R.startTime+R.duration)/r,duration:ae,range:[v[0].offset,R.offset+R.size],frames:v}),w=0,v=[]};if(n)for(var I=a*r,O=0,P=u.length;O<P;O++){var as;w+=p[O],(as=v).push.apply(as,uh(u[O])),O+1<P?(O===0||w>I)&&K(w/r):K(w/r)}else{h=h||[];for(var ve=h[0]||a,Ye=0;Ye<y;Ye++){v.push(o[Ye]),w+=o[Ye].duration;var rs=w/r;(Ye+1>=y||rs+D>=ve)&&(D+=rs-ve,K(rs),ve=h[S.length]||a)}}return S}}function Ln(a){var r="",s="",i=0,e=0,t=0,n=0,l=0,h=0,o=0;a.mvhd&&(l=a.mvhd.duration/a.mvhd.timescale);var u=a.trak;if(u){var p=u.find(function(S){var v,w;return((v=S.mdia)===null||v===void 0||(w=v.hdlr)===null||w===void 0?void 0:w.handlerType)==="vide"}),c=u.find(function(S){var v,w;return((v=S.mdia)===null||v===void 0||(w=v.hdlr)===null||w===void 0?void 0:w.handlerType)==="soun"}),k=null,f;if(p){var b,g,E;if(k=(b=p.mdia)===null||b===void 0||(g=b.minf)===null||g===void 0||(E=g.stbl)===null||E===void 0?void 0:E.stsd.entries[0],k){var L,C,F;if(i=k.width,e=k.height,h=(L=p.mdia)===null||L===void 0||(C=L.mdhd)===null||C===void 0?void 0:C.timescale,r=(F=k.avcC||k.hvcC)===null||F===void 0?void 0:F.codec,k.type==="encv"){var Z,X;f=(Z=k.sinf)===null||Z===void 0||(X=Z.schi)===null||X===void 0?void 0:X.tenc.default_KID}}}if(c){var T,G,Y;if(k=(T=c.mdia)===null||T===void 0||(G=T.minf)===null||G===void 0||(Y=G.stbl)===null||Y===void 0?void 0:Y.stsd.entries[0],k){var M,N,m;if(t=k.channelCount,n=k.sampleRate,s=(M=k.esds)===null||M===void 0?void 0:M.codec,o=(N=c.mdia)===null||N===void 0||(m=N.mdhd)===null||m===void 0?void 0:m.timescale,k.type==="enca"){var d,y;f=f||((d=k.sinf)===null||d===void 0||(y=d.schi)===null||y===void 0?void 0:y.tenc.default_KID)}}}return{kid:f?f.join(""):null,videoCodec:r,audioCodec:s,width:i,height:e,videoTimescale:h,audioChannelCount:t,audioSampleRate:n,duration:l,audioTimescale:o,moov:a}}}function Fn(a){return typeof a=="number"&&!Number.isNaN(a)}var gh=["vid","cache"],vh=function(a){th(s,a);var r=hh(s);function s(i){var e;Gt(this,s),e=r.call(this),Me(He(e),"vid",""),Me(He(e),"url",""),Me(He(e),"meta",{}),Me(He(e),"downloadInfo",[]),Me(He(e),"videoSegments",[]),Me(He(e),"audioSegments",[]),Me(He(e),"cache",null),Me(He(e),"_currentSegmentIndex",-1),Me(He(e),"_currentLoadingSegmentIndex",-1),Me(He(e),"buffer",void 0),Me(He(e),"_error",void 0),Me(He(e),"_transformError",function(o){return o}),e._config=yh(i);var t=e._config,n=t.vid,l=t.cache,h=rh(t,gh);return e.cache=l||new bh,e.vid=n||h.url,e.url=h.url,h.transformError=e._transformError,e.logger=new Fe("MP4Loader_"+e.vid),i.openLog&&Fe.enable(),h.logger=e.logger,e._loader=new Ls(h),e._loader.on(_.REAL_TIME_SPEED,function(o){e.emit(_.REAL_TIME_SPEED,o)}),e}return Wt(s,[{key:"isMetaLoaded",get:function(){return this.videoSegments.length||this.audioSegments.length}},{key:"setCurrentSegment",value:function(e){Fn(e)&&(this._currentSegmentIndex=e)}},{key:"isLastSegment",value:function(e){if(Fn(e)){var t,n,l=((t=this.videoSegments[this.videoSegments.length-1])===null||t===void 0?void 0:t.index)||((n=this.audioSegments[this.audioSegments.length-1])===null||n===void 0?void 0:n.index)||0;return e>=l}return!1}},{key:"isSegmentLoading",value:function(e){return e===this._currentLoadingSegmentIndex}},{key:"changeUrl",value:function(){var i=Pe(le().mark(function t(n){var l,h,o,u=arguments;return le().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=u.length>1&&u[1]!==void 0?u[1]:n,h=u.length>2?u[2]:void 0,o=u.length>3?u[3]:void 0,c.next=5,this.reset(o);case 5:n&&(this.url=n),l&&(this.vid=l),h&&(this._config.moovEnd=h);case 8:case"end":return c.stop()}},t,this)}));function e(t){return i.apply(this,arguments)}return e}()},{key:"getOrLoadMeta",value:function(){var i=Pe(le().mark(function t(n){return le().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this.isMetaLoaded){h.next=3;break}return h.next=3,this.loadMeta(n);case 3:return h.abrupt("return",this.meta);case 4:case"end":return h.stop()}},t,this)}));function e(t){return i.apply(this,arguments)}return e}()},{key:"loadMetaProcess",value:function(){var i=Pe(le().mark(function t(n,l,h,o){var u=this,p,c,k,f;return le().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return p=oh(l,2),c=p[0],k=p[1],this._error=!1,this.logger.debug("[loadMetaProcess start], range,",[c,k]),f=function(){var E=Pe(le().mark(function L(C,F,Z){var X,T,G,Y,M,N,m,d;return le().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(u.meta&&Z!==null&&Z!==void 0&&Z.range&&Z.range.length>0&&Z.range[1]>=k&&(F=!0,u.logger.debug("[loadMetaProcess],data done,setstate true,[",c,k,"]")),F&&Z!==null&&Z!==void 0&&Z.range&&Z.range.length>0&&Z.range[1]<k&&(F=!1,u.logger.debug("[loadMetaProcess],data not done,setstate false,[",c,k,"]")),u.logger.debug("[loadMetaProcess],task,[",c,k,"], range,",Z.range,",dataLen,",C?C.byteLength:void 0,", state,",F,",err,",u._error),!u._error&&C&&C.byteLength>0&&h(C,F,Z),!(u.meta.moov||u._error)){S.next=6;break}return S.abrupt("return");case 6:if(!(C&&C.byteLength>0)){S.next=44;break}if(u.buffer=Ts(u.buffer,C),X=ne.findBox(u.buffer,["moov"])[0],X){S.next=23;break}if(T=ne.findBox(u.buffer,["mdat"])[0],!F){S.next=23;break}if(T){S.next=18;break}return u._error=!0,h(null,F,Z,{err:"cannot find moov or mdat box"}),S.abrupt("return");case 18:return G=T.start+T.size,S.next=21,u.loadData([G,""],n,o);case 21:Y=S.sent,Y&&(X=ne.findBox(Y.data,["moov"])[0]);case 23:if(!(X&&F&&X.size>X.data.length)){S.next=27;break}return u.logger.debug("[loadMetaProcess],moov not all, range,",Z.range[1],",dataLen,",u.buffer.byteLength,", state,",F),S.next=27,u.loadMetaProcess(n,[Z.range[1],X.start+X.size-1],h);case 27:if(!(X&&X.size<=X.data.length&&!u.meta.moov)){S.next=44;break}if(M=ne.moov(X),M){S.next=33;break}return u._error=!0,h(null,F,Z,{err:"cannot parse moov box"}),S.abrupt("return");case 33:if(N=$i(M,u._config.segmentDuration),N){S.next=38;break}return u._error=!0,h(null,F,Z,{err:"cannot parse segments"}),S.abrupt("return");case 38:u.meta=Ln(M),m=N.videoSegments,d=N.audioSegments,u.videoSegments=m,u.audioSegments=d,u.logger.debug("[loadMetaProcess] moov ok"),h(void 0,F,{meta:{meta:u.meta,videoSegments:m,audioSegments:d}});case 44:case"end":return S.stop()}},L)}));return function(C,F,Z){return E.apply(this,arguments)}}(),g.next=6,this.loadData([c,k||this._config.moovEnd],n,yt({onProgress:f},o));case 6:case"end":return g.stop()}},t,this)}));function e(t,n,l,h){return i.apply(this,arguments)}return e}()},{key:"loadMeta",value:function(){var i=Pe(le().mark(function t(n,l,h){var o,u,p,c,k,f,b,g,E;return le().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return o=[],this.logger.debug("[loadMeta start]"),C.next=4,this.loadData([0,l||this._config.moovEnd],n,h);case 4:if(u=C.sent,u){C.next=7;break}return C.abrupt("return");case 7:if(o.push(u),p=ne.findBox(u.data,["moov"])[0],p){C.next=23;break}if(c=ne.findBox(u.data,["mdat"])[0],c){C.next=13;break}throw new ki("cannot find moov or mdat box",u.data);case 13:return k=c.start+c.size,C.next=16,this.loadData([k],n,h);case 16:if(u=C.sent,u){C.next=19;break}return C.abrupt("return");case 19:if(o.push(u),p=ne.findBox(u.data,["moov"],k)[0],p){C.next=23;break}throw new ki("cannot find moov box",u.data);case 23:if(!(p.size>p.data.length)){C.next=31;break}return C.next=26,this.loadData([u.data.length,p.start+p.size-1],n,h);case 26:if(u=C.sent,u){C.next=29;break}return C.abrupt("return");case 29:o.push(u),p.data=Ts(p.data,u.data);case 31:if(f=ne.moov(p),f){C.next=34;break}throw new ki("cannot parse moov box",p.data);case 34:if(b=$i(f,this._config.segmentDuration),b){C.next=37;break}throw new ki("cannot parse segments",p.data);case 37:return this.meta=Ln(f),g=b.videoSegments,E=b.audioSegments,this.videoSegments=g,this.audioSegments=E,this.logger.debug("[load moov end!!!!!]"),C.abrupt("return",{meta:this.meta,videoSegments:g,audioSegments:E,responses:o});case 43:case"end":return C.stop()}},t,this)}));function e(t,n,l){return i.apply(this,arguments)}return e}()},{key:"loadCacheMeta",value:function(e,t){var n=e.moov,l=$i(n,this._config.segmentDuration),h=l.videoSegments,o=l.audioSegments;this.videoSegments=h,this.audioSegments=o,this._currentSegmentIndex=t,this.meta=e}},{key:"getSegmentByTime",value:function(e){var t,n;return this.videoSegments.length?(t=this.videoSegments.find(function(l){return l.startTime<=e&&l.endTime>e}),t&&(n=this.audioSegments[t.index])):n=this.audioSegments.find(function(l){return l.startTime<=e&&l.endTime>e}),{video:t,audio:n}}},{key:"loadSegmentByTime",value:function(){var i=Pe(le().mark(function t(n,l){var h,o,u,p,c,k=arguments;return le().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(h=k.length>2&&k[2]!==void 0?k[2]:!0,o=k.length>3&&k[3]!==void 0?k[3]:{},this.isMetaLoaded){b.next=5;break}return b.next=5,this.loadMeta(l);case 5:return u=this.getSegmentByTime(n),p=u.video,c=u.audio,b.abrupt("return",this._loadSegment(p,c,l,h,o));case 7:case"end":return b.stop()}},t,this)}));function e(t,n){return i.apply(this,arguments)}return e}()},{key:"loadNextSegment",value:function(){var i=Pe(le().mark(function t(n){var l,h,o,u,p=arguments;return le().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(l=p.length>1&&p[1]!==void 0?p[1]:!0,h=p.length>2&&p[2]!==void 0?p[2]:{},this.isMetaLoaded){k.next=5;break}return k.next=5,this.loadMeta();case 5:return o=this.videoSegments[this._currentSegmentIndex+1],u=this.audioSegments[this._currentSegmentIndex+1],k.abrupt("return",this._loadSegment(o,u,n,l,h));case 8:case"end":return k.stop()}},t,this)}));function e(t){return i.apply(this,arguments)}return e}()},{key:"preload",value:function(){var i=Pe(le().mark(function t(n){var l=this,h,o,u,p,c,k,f;return le().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(this.isMetaLoaded){g.next=3;break}return g.next=3,this.loadMeta(!0);case 3:if(!(!n||n<0)){g.next=5;break}return g.abrupt("return");case 5:if(h=this.getSegmentByTime(n),o=h.video,u=h.audio,p=Math.max((o==null?void 0:o.index)||0,(u==null?void 0:u.index)||0),p){g.next=9;break}return g.abrupt("return");case 9:return c=this.videoSegments.slice(0,p),k=this.audioSegments.slice(0,p),f=function(){var E=Pe(le().mark(function L(C){return le().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(!(C>p)){Z.next=2;break}return Z.abrupt("return");case 2:return Z.next=4,l._loadSegment(c[C],k[C],!0,!1);case 4:return Z.next=6,f(C+1);case 6:case"end":return Z.stop()}},L)}));return function(C){return E.apply(this,arguments)}}(),g.next=14,f(0);case 14:case"end":return g.stop()}},t,this)}));function e(t){return i.apply(this,arguments)}return e}()},{key:"cancel",value:function(){return this._loader.cancel()}},{key:"reset",value:function(){var i=Pe(le().mark(function t(){var n,l=arguments;return le().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(n=l.length>0&&l[0]!==void 0?l[0]:!1,n){o.next=5;break}return this.logger.debug("[MP4loader reset func call loader.cancel]"),o.next=5,this._loader.cancel();case 5:this.vid=this.url="",this.meta={},this.downloadInfo=[],this.videoSegments=[],this.audioSegments=[],this._currentSegmentIndex=-1,this._currentLoadingSegmentIndex=-1;case 12:case"end":return o.stop()}},t,this)}));function e(){return i.apply(this,arguments)}return e}()},{key:"destroy",value:function(){var i=Pe(le().mark(function t(){return le().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.reset();case 2:this.cache.clear();case 3:case"end":return l.stop()}},t,this)}));function e(){return i.apply(this,arguments)}return e}()},{key:"_loadSegment",value:function(){var i=Pe(le().mark(function t(n,l,h,o,u){var p,c;return le().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(!n&&!l)){f.next=2;break}return f.abrupt("return");case 2:return p=(n==null?void 0:n.index)||(l==null?void 0:l.index)||0,this._currentLoadingSegmentIndex=p,f.prev=4,f.next=7,this.loadData([Math.min((n==null?void 0:n.range[0])||1/0,(l==null?void 0:l.range[0])||1/0),Math.max((n==null?void 0:n.range[1])||0,(l==null?void 0:l.range[1])||0)],h,u);case 7:c=f.sent;case 8:return f.prev=8,this._currentLoadingSegmentIndex=-1,f.finish(8);case 11:if(c){f.next=13;break}return f.abrupt("return");case 13:return o&&(this._currentSegmentIndex=p),c.video=n,c.audio=l,f.abrupt("return",c);case 17:case"end":return f.stop()}},t,this,[[4,,8,11]])}));function e(t,n,l,h,o){return i.apply(this,arguments)}return e}()},{key:"loadData",value:function(){var i=Pe(le().mark(function t(n,l,h){var o,u,p,c;return le().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return o=this._getCacheKey(n),f.next=3,this.cache.get(o);case 3:if(u=f.sent,u){f.next=11;break}return c=h&&h.url?h.url:this.url,f.next=8,this._loader.load(c,yt({range:n,vid:this.vid},h));case 8:p=f.sent,f.next=12;break;case 11:p={data:u,state:!0,options:{fromCache:!0,range:n,vid:this.vid}};case 12:if(p){f.next=14;break}return f.abrupt("return");case 14:return u||(p.data&&this.downloadInfo.push({startTime:p.startTime,endTime:p.endTime,size:p.data.byteLength,range:n}),this.downloadInfo&&this.downloadInfo.length>this._config.maxDownloadInfoSize&&(this.downloadInfo=this.downloadInfo.slice(-this._config.maxDownloadInfoSize))),f.abrupt("return",p);case 17:case"end":return f.stop()}},t,this)}));function e(t,n,l){return i.apply(this,arguments)}return e}()},{key:"_getCacheKey",value:function(e){return(this.vid||this.url)+":"+e}}]),s}(Fs),xa=Lh(),Eh=Os();Fh();function Zh(){try{return typeof localStorage<"u"&&"setItem"in window.localStorage&&!!window.localStorage.setItem}catch{return!1}}function Sh(){var a="_localstorage_support_test";try{return window.localStorage.setItem(a,!0),window.localStorage.removeItem(a),!1}catch{return!0}}function Os(){if(xa)try{return!!window.localStorage.getItem("playerlog")}catch{return!1}return!1}function Lh(){return Zh()&&!Sh()}function Va(a){for(var r,s=arguments.length,i=new Array(s>1?s-1:0),e=1;e<s;e++)i[e-1]=arguments[e];Eh&&console.log&&(r=console).log.apply(r,["[logger]",is.nowTime(),a].concat(i))}function Fh(){if(xa)try{return!!window.localStorage.getItem("playertestlog")}catch{return!1}return!1}var Ma="IWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUoZSx0KXt2YXIgcj1PYmplY3Qua2V5cyhlKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgYT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3QmJihhPWEuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpLmVudW1lcmFibGV9KSkpLHIucHVzaC5hcHBseShyLGEpfXJldHVybiByfWZ1bmN0aW9uIHQodCl7Zm9yKHZhciByPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl7dmFyIGE9bnVsbCE9YXJndW1lbnRzW3JdP2FyZ3VtZW50c1tyXTp7fTtyJTI/ZShPYmplY3QoYSksITApLmZvckVhY2goKGZ1bmN0aW9uKGUpe2kodCxlLGFbZV0pfSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoYSkpOmUoT2JqZWN0KGEpKS5mb3JFYWNoKChmdW5jdGlvbihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxlKSl9KSl9cmV0dXJuIHR9ZnVuY3Rpb24gcihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGEoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGE9dFtyXTthLmVudW1lcmFibGU9YS5lbnVtZXJhYmxlfHwhMSxhLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gYSYmKGEud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGsoYS5rZXkpLGEpfX1mdW5jdGlvbiBuKGUsdCxyKXtyZXR1cm4gdCYmYShlLnByb3RvdHlwZSx0KSxyJiZhKGUsciksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsInByb3RvdHlwZSIse3dyaXRhYmxlOiExfSksZX1mdW5jdGlvbiBpKGUsdCxyKXtyZXR1cm4odD1rKHQpKWluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6cixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09cixlfWZ1bmN0aW9uIHMoZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsInByb3RvdHlwZSIse3dyaXRhYmxlOiExfSksdCYmdShlLHQpfWZ1bmN0aW9uIG8oZSl7cmV0dXJuKG89T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCk6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9KShlKX1mdW5jdGlvbiB1KGUsdCl7cmV0dXJuKHU9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX1mdW5jdGlvbiBjKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZigiZnVuY3Rpb24iPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiExfX1mdW5jdGlvbiBsKGUsdCxyKXtyZXR1cm4obD1jKCk/UmVmbGVjdC5jb25zdHJ1Y3QuYmluZCgpOmZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1bbnVsbF07YS5wdXNoLmFwcGx5KGEsdCk7dmFyIG49bmV3KEZ1bmN0aW9uLmJpbmQuYXBwbHkoZSxhKSk7cmV0dXJuIHImJnUobixyLnByb3RvdHlwZSksbn0pLmFwcGx5KG51bGwsYXJndW1lbnRzKX1mdW5jdGlvbiBkKGUsdCl7aWYodCYmKCJvYmplY3QiPT10eXBlb2YgdHx8ImZ1bmN0aW9uIj09dHlwZW9mIHQpKXJldHVybiB0O2lmKHZvaWQgMCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWQiKTtyZXR1cm4gZnVuY3Rpb24oZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiBlfShlKX1mdW5jdGlvbiBmKGUpe3ZhciB0PWMoKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcixhPW8oZSk7aWYodCl7dmFyIG49byh0aGlzKS5jb25zdHJ1Y3RvcjtyPVJlZmxlY3QuY29uc3RydWN0KGEsYXJndW1lbnRzLG4pfWVsc2Ugcj1hLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gZCh0aGlzLHIpfX1mdW5jdGlvbiBoKGUsdCl7Zm9yKDshT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCkmJm51bGwhPT0oZT1vKGUpKTspO3JldHVybiBlfWZ1bmN0aW9uIHAoKXtyZXR1cm4gcD0idW5kZWZpbmVkIiE9dHlwZW9mIFJlZmxlY3QmJlJlZmxlY3QuZ2V0P1JlZmxlY3QuZ2V0LmJpbmQoKTpmdW5jdGlvbihlLHQscil7dmFyIGE9aChlLHQpO2lmKGEpe3ZhciBuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSx0KTtyZXR1cm4gbi5nZXQ/bi5nZXQuY2FsbChhcmd1bWVudHMubGVuZ3RoPDM/ZTpyKTpuLnZhbHVlfX0scC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gdihlLHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlfShlKXx8ZnVuY3Rpb24oZSx0KXt2YXIgcj1udWxsPT1lP251bGw6InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXXx8ZVsiQEBpdGVyYXRvciJdO2lmKG51bGwhPXIpe3ZhciBhLG4saSxzLG89W10sdT0hMCxjPSExO3RyeXtpZihpPShyPXIuY2FsbChlKSkubmV4dCwwPT09dCl7aWYoT2JqZWN0KHIpIT09cilyZXR1cm47dT0hMX1lbHNlIGZvcig7ISh1PShhPWkuY2FsbChyKSkuZG9uZSkmJihvLnB1c2goYS52YWx1ZSksby5sZW5ndGghPT10KTt1PSEwKTt9Y2F0Y2gobCl7Yz0hMCxuPWx9ZmluYWxseXt0cnl7aWYoIXUmJm51bGwhPXIucmV0dXJuJiYocz1yLnJldHVybigpLE9iamVjdChzKSE9PXMpKXJldHVybn1maW5hbGx5e2lmKGMpdGhyb3cgbn19cmV0dXJuIG99fShlLHQpfHxtKGUsdCl8fGZ1bmN0aW9uKCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX0oKX1mdW5jdGlvbiB5KGUpe3JldHVybiBmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBnKGUpfShlKXx8ZnVuY3Rpb24oZSl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJm51bGwhPWVbU3ltYm9sLml0ZXJhdG9yXXx8bnVsbCE9ZVsiQEBpdGVyYXRvciJdKXJldHVybiBBcnJheS5mcm9tKGUpfShlKXx8bShlKXx8ZnVuY3Rpb24oKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX0oKX1mdW5jdGlvbiBtKGUsdCl7aWYoZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiBnKGUsdCk7dmFyIHI9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsLTEpO3JldHVybiJPYmplY3QiPT09ciYmZS5jb25zdHJ1Y3RvciYmKHI9ZS5jb25zdHJ1Y3Rvci5uYW1lKSwiTWFwIj09PXJ8fCJTZXQiPT09cj9BcnJheS5mcm9tKGUpOiJBcmd1bWVudHMiPT09cnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qocik/ZyhlLHQpOnZvaWQgMH19ZnVuY3Rpb24gZyhlLHQpeyhudWxsPT10fHx0PmUubGVuZ3RoKSYmKHQ9ZS5sZW5ndGgpO2Zvcih2YXIgcj0wLGE9bmV3IEFycmF5KHQpO3I8dDtyKyspYVtyXT1lW3JdO3JldHVybiBhfWZ1bmN0aW9uIGsoZSl7dmFyIHQ9ZnVuY3Rpb24oZSx0KXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiBlO3ZhciByPWVbU3ltYm9sLnRvUHJpbWl0aXZlXTtpZih2b2lkIDAhPT1yKXt2YXIgYT1yLmNhbGwoZSx0fHwiZGVmYXVsdCIpO2lmKCJvYmplY3QiIT10eXBlb2YgYSlyZXR1cm4gYTt0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpfXJldHVybigic3RyaW5nIj09PXQ/U3RyaW5nOk51bWJlcikoZSl9KGUsInN0cmluZyIpO3JldHVybiJzeW1ib2wiPT10eXBlb2YgdD90OlN0cmluZyh0KX12YXIgYj0idmlkZW8iLF89ImF1ZGlvIix3PSJtZXRhZGF0YSIseD0iYXZjIixTPSJoZXZjIixBPSJhYWMiLEQ9Imc3MTEwYSIsRT0iZzcxMTBtIixCPSJMQVJHRV9BVl9TSElGVCIsVD0iTEFSR0VfVklERU9fR0FQIixDPSJMQVJHRV9WSURFT19HQVBfQkVUV0VFTl9DSFVOSyIsVT0iTEFSR0VfQVVESU9fR0FQIixQPSJBVURJT19GSUxMRUQiLEk9IkFVRElPX0RST1BQRUQiLHo9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpLGkodGhpcywiaWQiLDEpLGkodGhpcywidHlwZSIsYiksaSh0aGlzLCJjb2RlY1R5cGUiLHgpLGkodGhpcywicGlkIiwtMSksaSh0aGlzLCJodmNDIix2b2lkIDApLGkodGhpcywiY29kZWMiLCIiKSxpKHRoaXMsInRpbWVzY2FsZSIsMCksaSh0aGlzLCJmb3JtYXRUaW1lc2NhbGUiLDApLGkodGhpcywic2VxdWVuY2VOdW1iZXIiLDApLGkodGhpcywiYmFzZU1lZGlhRGVjb2RlVGltZSIsMCksaSh0aGlzLCJiYXNlRHRzIiwwKSxpKHRoaXMsImR1cmF0aW9uIiwwKSxpKHRoaXMsIndhcm5pbmdzIixbXSksaSh0aGlzLCJzYW1wbGVzIixbXSksaSh0aGlzLCJwcHMiLFtdKSxpKHRoaXMsInNwcyIsW10pLGkodGhpcywidnBzIixbXSksaSh0aGlzLCJmcHNOdW0iLDApLGkodGhpcywiZnBzRGVuIiwwKSxpKHRoaXMsInNhclJhdGlvIixbXSksaSh0aGlzLCJ3aWR0aCIsMCksaSh0aGlzLCJoZWlnaHQiLDApLGkodGhpcywibmFsVW5pdFNpemUiLDQpLGkodGhpcywicHJlc2VudCIsITEpLGkodGhpcywiaXNWaWRlb0VuY3J5cHRpb24iLCExKSxpKHRoaXMsImlzQXVkaW9FbmNyeXB0aW9uIiwhMSksaSh0aGlzLCJpc1ZpZGVvIiwhMCksaSh0aGlzLCJraWQiLG51bGwpLGkodGhpcywicHNzaCIsbnVsbCksaSh0aGlzLCJleHQiLHZvaWQgMCl9cmV0dXJuIG4oZSxbe2tleToicmVzZXQiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zZXF1ZW5jZU51bWJlcj10aGlzLndpZHRoPXRoaXMuaGVpZ2h0PXRoaXMuZnBzRGVuPXRoaXMuZnBzTnVtPXRoaXMuZHVyYXRpb249dGhpcy5iYXNlTWVkaWFEZWNvZGVUaW1lPXRoaXMudGltZXNjYWxlPTAsdGhpcy5jb2RlYz0iIix0aGlzLnByZXNlbnQ9ITEsdGhpcy5waWQ9LTEsdGhpcy5wcHM9W10sdGhpcy5zcHM9W10sdGhpcy52cHM9W10sdGhpcy5zYXJSYXRpbz1bXSx0aGlzLnNhbXBsZXM9W10sdGhpcy53YXJuaW5ncz1bXSx0aGlzLmh2Y0M9bnVsbH19LHtrZXk6ImV4aXN0Iix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiEhKHRoaXMucHBzLmxlbmd0aCYmdGhpcy5zcHMubGVuZ3RoJiZ0aGlzLmNvZGVjKX19LHtrZXk6Imhhc1NhbXBsZSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuc2FtcGxlcy5sZW5ndGh9fSx7a2V5OiJpc0VuY3J5cHRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmlkZW9FbmNyeXB0aW9ufX1dKSxlfSgpLE09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpLGkodGhpcywiaWQiLDIpLGkodGhpcywidHlwZSIsXyksaSh0aGlzLCJjb2RlY1R5cGUiLEEpLGkodGhpcywicGlkIiwtMSksaSh0aGlzLCJjb2RlYyIsIiIpLGkodGhpcywic2VxdWVuY2VOdW1iZXIiLDApLGkodGhpcywic2FtcGxlRHVyYXRpb24iLDApLGkodGhpcywidGltZXNjYWxlIiwwKSxpKHRoaXMsImZvcm1hdFRpbWVzY2FsZSIsMCksaSh0aGlzLCJiYXNlTWVkaWFEZWNvZGVUaW1lIiwwKSxpKHRoaXMsImR1cmF0aW9uIiwwKSxpKHRoaXMsIndhcm5pbmdzIixbXSksaSh0aGlzLCJzYW1wbGVzIixbXSksaSh0aGlzLCJiYXNlRHRzIiwwKSxpKHRoaXMsInNhbXBsZVNpemUiLDE2KSxpKHRoaXMsInNhbXBsZVJhdGUiLDApLGkodGhpcywiY2hhbm5lbENvdW50IiwwKSxpKHRoaXMsIm9iamVjdFR5cGUiLDApLGkodGhpcywic2FtcGxlUmF0ZUluZGV4IiwwKSxpKHRoaXMsImNvbmZpZyIsW10pLGkodGhpcywicHJlc2VudCIsITEpLGkodGhpcywiaXNWaWRlb0VuY3J5cHRpb24iLCExKSxpKHRoaXMsImlzQXVkaW9FbmNyeXB0aW9uIiwhMSksaSh0aGlzLCJraWQiLG51bGwpLGkodGhpcywiZXh0Iix2b2lkIDApfXJldHVybiBuKGUsW3trZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc2VxdWVuY2VOdW1iZXI9MCx0aGlzLnRpbWVzY2FsZT0wLHRoaXMuc2FtcGxlRHVyYXRpb249MCx0aGlzLnNhbXBsZVJhdGU9MCx0aGlzLmNoYW5uZWxDb3VudD0wLHRoaXMuYmFzZU1lZGlhRGVjb2RlVGltZT0wLHRoaXMucHJlc2VudD0hMSx0aGlzLnBpZD0tMSx0aGlzLmNvZGVjPSIiLHRoaXMuc2FtcGxlcz1bXSx0aGlzLmNvbmZpZz1bXSx0aGlzLndhcm5pbmdzPVtdfX0se2tleToiZXhpc3QiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuISEodGhpcy5zYW1wbGVSYXRlJiZ0aGlzLmNoYW5uZWxDb3VudCYmdGhpcy5jb2RlYyYmdGhpcy5jb2RlY1R5cGU9PT1BKX19LHtrZXk6Imhhc1NhbXBsZSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuc2FtcGxlcy5sZW5ndGh9fSx7a2V5OiJpc0VuY3J5cHRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQXVkaW9FbmNyeXB0aW9ufX1dKSxlfSgpLFI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsYSxuKXtyKHRoaXMsZSksaSh0aGlzLCJmbGFnIix7fSksaSh0aGlzLCJrZXlmcmFtZSIsITEpLGkodGhpcywiZ29wSWQiLDApLGkodGhpcywiZHVyYXRpb24iLDApLGkodGhpcywic2l6ZSIsMCksaSh0aGlzLCJ1bml0cyIsW10pLGkodGhpcywiY2hyb21hRm9ybWF0Iiw0MjApLHRoaXMub3JpZ2luUHRzPXRoaXMucHRzPXQsdGhpcy5vcmlnaW5EdHM9dGhpcy5kdHM9YSxuJiYodGhpcy51bml0cz1uKX1yZXR1cm4gbihlLFt7a2V5OiJjdHMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0cy10aGlzLmR0c319LHtrZXk6InNldFRvS2V5ZnJhbWUiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5rZXlmcmFtZT0hMCx0aGlzLmZsYWcuZGVwZW5kc09uPTIsdGhpcy5mbGFnLmlzTm9uU3luY1NhbXBsZT0wfX1dKSxlfSgpLE89bigoZnVuY3Rpb24gZSh0LGEsbixzKXtyKHRoaXMsZSksaSh0aGlzLCJkdXJhdGlvbiIsMTAyNCksaSh0aGlzLCJmbGFnIix7ZGVwZW5kc09uOjIsaXNOb25TeW5jU2FtcGxlOjB9KSxpKHRoaXMsImtleWZyYW1lIiwhMCksdGhpcy5vcmlnaW5QdHM9dGhpcy5wdHM9dGhpcy5kdHM9dCx0aGlzLmRhdGE9YSx0aGlzLnNpemU9YS5ieXRlTGVuZ3RoLHRoaXMuc2FtcGxlT2Zmc2V0PXMsbiYmKHRoaXMuZHVyYXRpb249bil9KSksTD1uKChmdW5jdGlvbiBlKHQsYSl7cih0aGlzLGUpLGkodGhpcywidGltZSIsMCksdGhpcy5kYXRhPXQsdGhpcy5vcmlnaW5QdHM9dGhpcy5wdHM9YX0pKSxWPWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1mKGEpO2Z1bmN0aW9uIGEoKXtyZXR1cm4gcih0aGlzLGEpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBuKGEpfShMKSxGPWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1mKGEpO2Z1bmN0aW9uIGEoKXtyZXR1cm4gcih0aGlzLGEpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBuKGEpfShMKSxOPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3IodGhpcyxlKSxpKHRoaXMsImlkIiwzKSxpKHRoaXMsInR5cGUiLHcpLGkodGhpcywidGltZXNjYWxlIiwwKSxpKHRoaXMsImZsdlNjcmlwdFNhbXBsZXMiLFtdKSxpKHRoaXMsInNlaVNhbXBsZXMiLFtdKX1yZXR1cm4gbihlLFt7a2V5OiJleGlzdCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hKCF0aGlzLmZsdlNjcmlwdFNhbXBsZXMubGVuZ3RoJiYhdGhpcy5zZWlTYW1wbGVzLmxlbmd0aHx8IXRoaXMudGltZXNjYWxlKX19LHtrZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudGltZXNjYWxlPTAsdGhpcy5mbHZTY3JpcHRTYW1wbGVzPVtdLHRoaXMuc2VpU2FtcGxlcz1bXX19LHtrZXk6Imhhc1NhbXBsZSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hKCF0aGlzLmZsdlNjcmlwdFNhbXBsZXMubGVuZ3RoJiYhdGhpcy5zZWlTYW1wbGVzLmxlbmd0aCl9fV0pLGV9KCksaj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7aWYocih0aGlzLGUpLGkodGhpcywiX2J5dGVzQXZhaWxhYmxlIix2b2lkIDApLGkodGhpcywiX2JpdHNBdmFpbGFibGUiLDApLGkodGhpcywiX3dvcmQiLDApLCF0KXRocm93IG5ldyBFcnJvcigiRXhwR29sb21iIGRhdGEgcGFyYW1zIGlzIHJlcXVpcmVkIik7dGhpcy5fZGF0YT10LHRoaXMuX2J5dGVzQXZhaWxhYmxlPXQuYnl0ZUxlbmd0aCx0aGlzLl9ieXRlc0F2YWlsYWJsZSYmdGhpcy5fbG9hZFdvcmQoKX1yZXR1cm4gbihlLFt7a2V5OiJfbG9hZFdvcmQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZGF0YS5ieXRlTGVuZ3RoLXRoaXMuX2J5dGVzQXZhaWxhYmxlLHQ9TWF0aC5taW4oNCx0aGlzLl9ieXRlc0F2YWlsYWJsZSk7aWYoMD09PXQpdGhyb3cgbmV3IEVycm9yKCJObyBieXRlcyBhdmFpbGFibGUiKTt2YXIgcj1uZXcgVWludDhBcnJheSg0KTtyLnNldCh0aGlzLl9kYXRhLnN1YmFycmF5KGUsZSt0KSksdGhpcy5fd29yZD1uZXcgRGF0YVZpZXcoci5idWZmZXIpLmdldFVpbnQzMigwKSx0aGlzLl9iaXRzQXZhaWxhYmxlPTgqdCx0aGlzLl9ieXRlc0F2YWlsYWJsZS09dH19LHtrZXk6InNraXBCaXRzIix2YWx1ZTpmdW5jdGlvbihlKXtpZih0aGlzLl9iaXRzQXZhaWxhYmxlPmUpdGhpcy5fd29yZDw8PWUsdGhpcy5fYml0c0F2YWlsYWJsZS09ZTtlbHNle2UtPXRoaXMuX2JpdHNBdmFpbGFibGU7dmFyIHQ9TWF0aC5mbG9vcihlLzgpO2UtPTgqdCx0aGlzLl9ieXRlc0F2YWlsYWJsZS09dCx0aGlzLl9sb2FkV29yZCgpLHRoaXMuX3dvcmQ8PD1lLHRoaXMuX2JpdHNBdmFpbGFibGUtPWV9fX0se2tleToicmVhZEJpdHMiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGU+MzIpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgcmVhZCBtb3JlIHRoYW4gMzIgYml0cyIpO3ZhciB0PU1hdGgubWluKHRoaXMuX2JpdHNBdmFpbGFibGUsZSkscj10aGlzLl93b3JkPj4+MzItdDtyZXR1cm4gdGhpcy5fYml0c0F2YWlsYWJsZS09dCx0aGlzLl9iaXRzQXZhaWxhYmxlPjA/dGhpcy5fd29yZDw8PXQ6dGhpcy5fYnl0ZXNBdmFpbGFibGU+MCYmdGhpcy5fbG9hZFdvcmQoKSwodD1lLXQpPjAmJnRoaXMuX2JpdHNBdmFpbGFibGU/cjw8dHx0aGlzLnJlYWRCaXRzKHQpOnJ9fSx7a2V5OiJza2lwTFoiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU7Zm9yKGU9MDtlPHRoaXMuX2JpdHNBdmFpbGFibGU7KytlKWlmKDAhPSh0aGlzLl93b3JkJjIxNDc0ODM2NDg+Pj5lKSlyZXR1cm4gdGhpcy5fd29yZDw8PWUsdGhpcy5fYml0c0F2YWlsYWJsZS09ZSxlO3JldHVybiB0aGlzLl9sb2FkV29yZCgpLGUrdGhpcy5za2lwTFooKX19LHtrZXk6InNraXBVRUciLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5za2lwQml0cygxK3RoaXMuc2tpcExaKCkpfX0se2tleToicmVhZFVFRyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNraXBMWigpO3JldHVybiB0aGlzLnJlYWRCaXRzKGUrMSktMX19LHtrZXk6InJlYWRFRyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJlYWRVRUcoKTtyZXR1cm4gMSZlPzErZT4+PjE6LTEqKGU+Pj4xKX19LHtrZXk6InJlYWRCb29sIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5yZWFkQml0cygxKX19LHtrZXk6InJlYWRVQnl0ZSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWFkQml0cyg4KX19LHtrZXk6InNraXBTY2FsaW5nTGlzdCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTgscj04LGE9MDthPGU7YSsrKTAhPT1yJiYocj0odCt0aGlzLnJlYWRFRygpKzI1NiklMjU2KSx0PTA9PT1yP3Q6cn19XSksZX0oKSxHPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtyKHRoaXMsZSksdGhpcy5uYW1lPXR8fCIiLHRoaXMuX3ByZWZpeD0iWyIuY29uY2F0KHRoaXMubmFtZSwiXSIpfXJldHVybiBuKGUsW3trZXk6Indhcm4iLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ7aWYoIWUuZGlzYWJsZWQpe2Zvcih2YXIgcj1hcmd1bWVudHMubGVuZ3RoLGE9bmV3IEFycmF5KHIpLG49MDtuPHI7bisrKWFbbl09YXJndW1lbnRzW25dOyh0PWNvbnNvbGUpLndhcm4uYXBwbHkodCxbdGhpcy5fcHJlZml4XS5jb25jYXQoYSkpfX19XSxbe2tleToiZW5hYmxlIix2YWx1ZTpmdW5jdGlvbigpe2UuZGlzYWJsZWQ9ITF9fSx7a2V5OiJkaXNhYmxlIix2YWx1ZTpmdW5jdGlvbigpe2UuZGlzYWJsZWQ9ITB9fV0pLGV9KCk7aShHLCJkaXNhYmxlZCIsITApO3ZhciBIPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3IodGhpcyxlKX1yZXR1cm4gbihlLG51bGwsW3trZXk6ImRlY29kZSIsdmFsdWU6ZnVuY3Rpb24odCl7Zm9yKHZhciByPVtdLGE9dCxuPTAsaT10Lmxlbmd0aDtuPGk7KWlmKGFbbl08MTI4KXIucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGFbbl0pKSwrK247ZWxzZXtpZihhW25dPDE5Mik7ZWxzZSBpZihhW25dPDIyNCl7aWYoZS5fY2hlY2tDb250aW51YXRpb24oYSxuLDEpKXt2YXIgcz0oMzEmYVtuXSk8PDZ8NjMmYVtuKzFdO2lmKHM+PTEyOCl7ci5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoNjU1MzUmcykpLG4rPTI7Y29udGludWV9fX1lbHNlIGlmKGFbbl08MjQwKXtpZihlLl9jaGVja0NvbnRpbnVhdGlvbihhLG4sMikpe3ZhciBvPSgxNSZhW25dKTw8MTJ8KDYzJmFbbisxXSk8PDZ8NjMmYVtuKzJdO2lmKG8+PTIwNDgmJjU1Mjk2IT0oNjM0ODgmbykpe3IucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKDY1NTM1Jm8pKSxuKz0zO2NvbnRpbnVlfX19ZWxzZSBpZihhW25dPDI0OCYmZS5fY2hlY2tDb250aW51YXRpb24oYSxuLDMpKXt2YXIgdT0oNyZhW25dKTw8MTh8KDYzJmFbbisxXSk8PDEyfCg2MyZhW24rMl0pPDw2fDYzJmFbbiszXTtpZih1PjY1NTM2JiZ1PDExMTQxMTIpe3UtPTY1NTM2LHIucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKHU+Pj4xMHw1NTI5NikpLHIucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKDEwMjMmdXw1NjMyMCkpLG4rPTQ7Y29udGludWV9fXIucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKDY1NTMzKSksKytufXJldHVybiByLmpvaW4oIiIpfX0se2tleToiX2NoZWNrQ29udGludWF0aW9uIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIGE9ZTtpZih0K3I8YS5sZW5ndGgpe2Zvcig7ci0tOylpZigxMjghPSgxOTImYVsrK3RdKSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4hMX19XSksZX0oKSxLPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93LHE9SyYmbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvY2FsZUxvd2VyQ2FzZSgpLFc9SyYmL14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpLy50ZXN0KHEpLFg9SyYmcS5pbmNsdWRlcygiZmlyZWZveCIpLFk9SyYmcS5pbmNsdWRlcygiYW5kcm9pZCIpO2Z1bmN0aW9uIFooKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShlKSxyPTA7cjxlO3IrKyl0W3JdPWFyZ3VtZW50c1tyXTt0PXQuZmlsdGVyKEJvb2xlYW4pO3ZhciBhPW5ldyBVaW50OEFycmF5KHQucmVkdWNlKChmdW5jdGlvbihlLHQpe3JldHVybiBlK3QuYnl0ZUxlbmd0aH0pLDApKSxuPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7YS5zZXQoZSxuKSxuKz1lLmJ5dGVMZW5ndGh9KSksYX12YXIgUT1NYXRoLnBvdygyLDMyKTtmdW5jdGlvbiBKKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTowO3JldHVybihlW3RdPDw4KSsoZVt0KzFdfHwwKX1mdW5jdGlvbiAkKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTowO3JldHVybihlW3RdPDwyND4+PjApKyhlW3QrMV08PDE2KSsoZVt0KzJdPDw4KSsoZVt0KzNdfHwwKX1mdW5jdGlvbiBlZShlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MDtyZXR1cm4gJChlLHQpKlErJChlLHQrNCl9ZnVuY3Rpb24gdGUoZSl7Zm9yKHZhciB0LHI9ImF2YzEuIixhPTA7YTwzO2ErKykodD1lW2FdLnRvU3RyaW5nKDE2KSkubGVuZ3RoPDImJih0PSIwIi5jb25jYXQodCkpLHIrPXQ7cmV0dXJuIHJ9ZnVuY3Rpb24gcmUoZSl7dmFyIHQ9IiI7aWYoZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Kz1mdW5jdGlvbihlKXtyZXR1cm4oIjAiK051bWJlcihlKS50b1N0cmluZygxNikpLnNsaWNlKC0yKS50b1VwcGVyQ2FzZSgpfShlKX0pKSx0Lmxlbmd0aDw9MzIpZm9yKHZhciByPTMyLXQubGVuZ3RoLGE9MDthPHI7YSsrKXQrPSIwIjtyZXR1cm4gdH1mdW5jdGlvbiBhZShlKXtpZighQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciB0PVtdLHI9IiIsYT0wO2E8ZS5sZW5ndGg7YSsrKWElMiYmKHI9ZVthLTFdK2VbYV0sdC5wdXNoKHBhcnNlSW50KHIsMTYpKSxyPSIiKTtyZXR1cm4gdH1yZXR1cm4gZS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUludChlLDE2KX0pKX12YXIgbmU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpfXJldHVybiBuKGUsbnVsbCxbe2tleToicGFyc2VBbm5leEIiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmxlbmd0aCxyPTIsYT0wO251bGwhPT1lW3JdJiZ2b2lkIDAhPT1lW3JdJiYxIT09ZVtyXTspcisrO2lmKChhPSsrcisyKT49dClyZXR1cm5bXTtmb3IodmFyIG49W107YTx0Oylzd2l0Y2goZVthXSl7Y2FzZSAwOmlmKDAhPT1lW2EtMV0pe2ErPTI7YnJlYWt9aWYoMCE9PWVbYS0yXSl7YSsrO2JyZWFrfXIhPT1hLTImJm4ucHVzaChlLnN1YmFycmF5KHIsYS0yKSk7ZG97YSsrfXdoaWxlKDEhPT1lW2FdJiZhPHQpO2E9KHI9YSsxKSsyO2JyZWFrO2Nhc2UgMTppZigwIT09ZVthLTFdfHwwIT09ZVthLTJdKXthKz0zO2JyZWFrfXIhPT1hLTImJm4ucHVzaChlLnN1YmFycmF5KHIsYS0yKSksYT0ocj1hKzEpKzI7YnJlYWs7ZGVmYXVsdDphKz0zfXJldHVybiByPHQmJm4ucHVzaChlLnN1YmFycmF5KHIpKSxufX0se2tleToicGFyc2VBdmNDIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06NDtpZighKGUubGVuZ3RoPDQpKXtmb3IodmFyIHIsYT1lLmxlbmd0aCxuPVtdLGk9MDtpK3Q8YTspaWYocj0kKGUsaSksMz09PXQmJihyPj4+PTgpLGkrPXQscil7aWYoaStyPmEpYnJlYWs7bi5wdXNoKGUuc3ViYXJyYXkoaSxpK3IpKSxpKz1yfXJldHVybiBufX19LHtrZXk6InBhcnNlU0VJIix2YWx1ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1lLmxlbmd0aCxhPXQ/MjoxLG49MCxpPTAscz0iIjsyNTU9PT1lW2FdOyluKz0yNTUsYSsrO2ZvcihuKz1lW2ErK107MjU1PT09ZVthXTspaSs9MjU1LGErKztpZihpKz1lW2ErK10sNT09PW4mJnI+YSsxNilmb3IodmFyIG89MDtvPDE2O28rKylzKz1lW2FdLnRvU3RyaW5nKDE2KSxhKys7cmV0dXJue3BheWxvYWQ6ZS5zdWJhcnJheShhKSx0eXBlOm4sc2l6ZTppLHV1aWQ6c319fSx7a2V5OiJyZW1vdmVFUEIiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmJ5dGVMZW5ndGgscj1bXSxhPTE7YTx0LTI7KTA9PT1lW2FdJiYwPT09ZVthKzFdJiYzPT09ZVthKzJdPyhyLnB1c2goYSsyKSxhKz0yKTphKys7aWYoIXIubGVuZ3RoKXJldHVybiBlO3ZhciBuPXQtci5sZW5ndGgsaT1uZXcgVWludDhBcnJheShuKSxzPTA7Zm9yKGE9MDthPG47cysrLGErKylzPT09clswXSYmKHMrKyxyLnNoaWZ0KCkpLGlbYV09ZVtzXTtyZXR1cm4gaX19XSksZX0oKSxpZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtyKHRoaXMsZSl9cmV0dXJuIG4oZSxudWxsLFt7a2V5OiJwYXJzZUFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkIix2YWx1ZTpmdW5jdGlvbih0KXtpZighKHQubGVuZ3RoPDcpKXtmb3IodmFyIHIsYSxuPTErKDMmdFs0XSksaT1bXSxzPVtdLG89Nix1PTMxJnRbNV0sYz0wO2M8dTtjKyspaWYoYT10W29dPDw4fHRbbysxXSxvKz0yLGEpe3ZhciBsPXQuc3ViYXJyYXkobyxvK2EpO28rPWEsaS5wdXNoKGwpLHJ8fChyPWUucGFyc2VTUFMobmUucmVtb3ZlRVBCKGwpKSl9dmFyIGQsZj10W29dO28rKztmb3IodmFyIGg9MDtoPGY7aCsrKWQ9dFtvXTw8OHx0W28rMV0sbys9MixkJiYocy5wdXNoKHQuc3ViYXJyYXkobyxvK2QpKSxvKz1kKTtyZXR1cm57c3BzOnIsc3BzQXJyOmkscHBzQXJyOnMsbmFsVW5pdFNpemU6bn19fX0se2tleToicGFyc2VTUFMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBqKGUpO3QucmVhZFVCeXRlKCk7dmFyIHI9dC5yZWFkVUJ5dGUoKSxhPXQucmVhZFVCeXRlKCksbj10LnJlYWRVQnl0ZSgpO3Quc2tpcFVFRygpO3ZhciBpPTQyMDtpZigxMDA9PT1yfHwxMTA9PT1yfHwxMjI9PT1yfHwyNDQ9PT1yfHw0ND09PXJ8fDgzPT09cnx8ODY9PT1yfHwxMTg9PT1yfHwxMjg9PT1yfHwxMzg9PT1yfHwxNDQ9PT1yKXt2YXIgcz10LnJlYWRVRUcoKTtpZihzPD0zJiYoaT1bMCw0MjAsNDIyLDQ0NF1bc10pLDM9PT1zJiZ0LnNraXBCaXRzKDEpLHQuc2tpcFVFRygpLHQuc2tpcFVFRygpLHQuc2tpcEJpdHMoMSksdC5yZWFkQm9vbCgpKWZvcih2YXIgbz0zIT09cz84OjEyLHU9MDt1PG87dSsrKXQucmVhZEJvb2woKSYmKHU8Nj90LnNraXBTY2FsaW5nTGlzdCgxNik6dC5za2lwU2NhbGluZ0xpc3QoNjQpKX10LnNraXBVRUcoKTt2YXIgYz10LnJlYWRVRUcoKTtpZigwPT09Yyl0LnJlYWRVRUcoKTtlbHNlIGlmKDE9PT1jKXt0LnNraXBCaXRzKDEpLHQuc2tpcFVFRygpLHQuc2tpcFVFRygpO2Zvcih2YXIgbD10LnJlYWRVRUcoKSxkPTA7ZDxsO2QrKyl0LnNraXBVRUcoKX10LnNraXBVRUcoKSx0LnNraXBCaXRzKDEpO3ZhciBmPXQucmVhZFVFRygpLGg9dC5yZWFkVUVHKCkscD10LnJlYWRCaXRzKDEpOzA9PT1wJiZ0LnNraXBCaXRzKDEpLHQuc2tpcEJpdHMoMSk7dmFyIHYseSxtLGcsayxiPTAsXz0wLHc9MCx4PTA7aWYodC5yZWFkQm9vbCgpJiYoYj10LnJlYWRVRUcoKSxfPXQucmVhZFVFRygpLHc9dC5yZWFkVUVHKCkseD10LnJlYWRVRUcoKSksdC5yZWFkQm9vbCgpKXtpZih0LnJlYWRCb29sKCkpc3dpdGNoKHQucmVhZFVCeXRlKCkpe2Nhc2UgMTp2PVsxLDFdO2JyZWFrO2Nhc2UgMjp2PVsxMiwxMV07YnJlYWs7Y2FzZSAzOnY9WzEwLDExXTticmVhaztjYXNlIDQ6dj1bMTYsMTFdO2JyZWFrO2Nhc2UgNTp2PVs0MCwzM107YnJlYWs7Y2FzZSA2OnY9WzI0LDExXTticmVhaztjYXNlIDc6dj1bMjAsMTFdO2JyZWFrO2Nhc2UgODp2PVszMiwxMV07YnJlYWs7Y2FzZSA5OnY9WzgwLDMzXTticmVhaztjYXNlIDEwOnY9WzE4LDExXTticmVhaztjYXNlIDExOnY9WzE1LDExXTticmVhaztjYXNlIDEyOnY9WzY0LDMzXTticmVhaztjYXNlIDEzOnY9WzE2MCw5OV07YnJlYWs7Y2FzZSAxNDp2PVs0LDNdO2JyZWFrO2Nhc2UgMTU6dj1bMywyXTticmVhaztjYXNlIDE2OnY9WzIsMV07YnJlYWs7Y2FzZSAyNTU6dj1bdC5yZWFkVUJ5dGUoKTw8OHx0LnJlYWRVQnl0ZSgpLHQucmVhZFVCeXRlKCk8PDh8dC5yZWFkVUJ5dGUoKV19aWYodC5yZWFkQm9vbCgpJiZ0LnJlYWRCb29sKCksdC5yZWFkQm9vbCgpJiYodC5yZWFkQml0cyg0KSx0LnJlYWRCb29sKCkmJnQucmVhZEJpdHMoMjQpKSx0LnJlYWRCb29sKCkmJih0LnJlYWRVRUcoKSx0LnJlYWRVRUcoKSksdC5yZWFkQm9vbCgpKXt2YXIgUz10LnJlYWRCaXRzKDMyKSxBPXQucmVhZEJpdHMoMzIpO3k9dC5yZWFkQm9vbCgpLGs9KG09QSkvKGc9MipTKX19cmV0dXJue2NvZGVjOnRlKGUuc3ViYXJyYXkoMSw0KSkscHJvZmlsZUlkYzpyLHByb2ZpbGVDb21wYXRpYmlsaXR5OmEsbGV2ZWxJZGM6bixjaHJvbWFGb3JtYXQ6aSx3aWR0aDpNYXRoLmNlaWwoMTYqKGYrMSktMiooYitfKSksaGVpZ2h0OigyLXApKihoKzEpKjE2LShwPzI6NCkqKHcreCksc2FyUmF0aW86dixmcHNOdW06bSxmcHNEZW46ZyxmcHM6ayxmaXhlZEZyYW1lOnl9fX1dKSxlfSgpLHNlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3IodGhpcyxlKX1yZXR1cm4gbihlLG51bGwsW3trZXk6ImdldFJhdGVJbmRleEJ5UmF0ZSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuRlJFUS5pbmRleE9mKHQpfX0se2tleToicGFyc2VBRFRTIix2YWx1ZTpmdW5jdGlvbih0LHIpe2Zvcih2YXIgYT10Lmxlbmd0aCxuPTA7bisyPGEmJigyNTUhPT10W25dfHwyNDAhPSgyNDYmdFtuKzFdKSk7KW4rKztpZighKG4+PWEpKXt2YXIgaT1uLHM9W10sbz0oNjAmdFtuKzJdKT4+PjIsdT1lLkZSRVFbb107aWYoIXUpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHNhbXBsaW5nIGluZGV4OiAiLmNvbmNhdChvKSk7Zm9yKHZhciBjLGwsZD0xKygoMTkyJnRbbisyXSk+Pj42KSxmPSgxJnRbbisyXSk8PDJ8KDE5MiZ0W24rM10pPj4+NixoPWUuX2dldENvbmZpZyhvLGYsZCkscD1oLmNvbmZpZyx2PWguY29kZWMseT0wLG09ZS5nZXRGcmFtZUR1cmF0aW9uKHUpO24rNzxhOylpZigyNTU9PT10W25dJiYyNDA9PSgyNDYmdFtuKzFdKSl7aWYoYS1uPChsPSgzJnRbbiszXSk8PDExfHRbbis0XTw8M3woMjI0JnRbbis1XSk+PjUpKWJyZWFrO2M9MiooMSZ+dFtuKzFdKSxzLnB1c2goe3B0czpyK3kqbSxkYXRhOnQuc3ViYXJyYXkobis3K2MsbitsKX0pLHkrKyxuKz1sfWVsc2UgbisrO3JldHVybntza2lwOmkscmVtYWluaW5nOm4+PWE/dm9pZCAwOnQuc3ViYXJyYXkobiksZnJhbWVzOnMsc2FtcGxpbmdGcmVxdWVuY3lJbmRleDpvLHNhbXBsZVJhdGU6dSxvYmplY3RUeXBlOmQsY2hhbm5lbENvdW50OmYsY29kZWM6dixjb25maWc6cCxvcmlnaW5Db2RlYzoibXA0YS40MC4iLmNvbmNhdChkKX19fX0se2tleToicGFyc2VBdWRpb1NwZWNpZmljQ29uZmlnIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0Lmxlbmd0aCl7dmFyIHI9dFswXT4+PjMsYT0oNyZ0WzBdKTw8MXx0WzFdPj4+NyxuPSgxMjAmdFsxXSk+Pj4zLGk9ZS5GUkVRW2FdO2lmKGkpe3ZhciBzPWUuX2dldENvbmZpZyhhLG4scik7cmV0dXJue3NhbXBsaW5nRnJlcXVlbmN5SW5kZXg6YSxzYW1wbGVSYXRlOmksb2JqZWN0VHlwZTpyLGNoYW5uZWxDb3VudDpuLGNvbmZpZzpzLmNvbmZpZyxjb2RlYzpzLmNvZGVjLG9yaWdpbkNvZGVjOiJtcDRhLjQwLiIuY29uY2F0KHIpfX19fX0se2tleToiZ2V0RnJhbWVEdXJhdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjllNDtyZXR1cm4gMTAyNCp0L2V9fSx7a2V5OiJfZ2V0Q29uZmlnIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIGEsbixpPVtdO3JldHVybiBYP2U+PTY/KGE9NSxuPWUtMyk6KGE9MixuPWUpOlk/KGE9MixuPWUpOihhPTI9PT1yfHw1PT09cj9yOjUsbj1lLGU+PTY/bj1lLTM6MT09PXQmJihhPTIsbj1lKSksaVswXT1hPDwzLGlbMF18PSgxNCZlKT4+MSxpWzFdPSgxJmUpPDw3LGlbMV18PXQ8PDMsNT09PWEmJihpWzFdfD0oMTQmbik+PjEsaVsyXT0oMSZuKTw8NyxpWzJdfD04LGlbM109MCkse2NvbmZpZzppLGNvZGVjOiJtcDRhLjQwLiIuY29uY2F0KGEpfX19LHtrZXk6ImdldFNpbGVudEZyYW1lIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKCJtcDRhLjQwLjIiPT09ZSl7aWYoMT09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDIwMCwwLDEyOCwzNSwxMjhdKTtpZigyPT09dClyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzMzLDAsNzMsMTQ0LDIsMjUsMCwzNSwxMjhdKTtpZigzPT09dClyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzAsMjAwLDAsMTI4LDMyLDEzMiwxLDM4LDY0LDgsMTAwLDAsMTQyXSk7aWYoND09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDIwMCwwLDEyOCwzMiwxMzIsMSwzOCw2NCw4LDEwMCwwLDEyOCw0NCwxMjgsOCwyLDU2XSk7aWYoNT09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDIwMCwwLDEyOCwzMiwxMzIsMSwzOCw2NCw4LDEwMCwwLDEzMCw0OCw0LDE1MywwLDMzLDE0NCwyLDU2XSk7aWYoNj09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDIwMCwwLDEyOCwzMiwxMzIsMSwzOCw2NCw4LDEwMCwwLDEzMCw0OCw0LDE1MywwLDMzLDE0NCwyLDAsMTc4LDAsMzIsOCwyMjRdKX1lbHNle2lmKDE9PT10KXJldHVybiBuZXcgVWludDhBcnJheShbMSw2NCwzNCwxMjgsMTYzLDc4LDIzMCwxMjgsMTg2LDgsMCwwLDAsMjgsNiwyNDEsMTkzLDEwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDk0XSk7aWYoMj09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFsxLDY0LDM0LDEyOCwxNjMsOTQsMjMwLDEyOCwxODYsOCwwLDAsMCwwLDE0OSwwLDYsMjQxLDE2MSwxMCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5NF0pO2lmKDM9PT10KXJldHVybiBuZXcgVWludDhBcnJheShbMSw2NCwzNCwxMjgsMTYzLDk0LDIzMCwxMjgsMTg2LDgsMCwwLDAsMCwxNDksMCw2LDI0MSwxNjEsMTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTRdKX19fV0pLGV9KCk7aShzZSwiRlJFUSIsWzk2ZTMsODgyMDAsNjRlMyw0OGUzLDQ0MTAwLDMyZTMsMjRlMywyMjA1MCwxNmUzLDEyZTMsMTEwMjUsOGUzLDczNTBdKTt2YXIgb2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpfXJldHVybiBuKGUsbnVsbCxbe2tleToicGFyc2VIRVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtpZighKHQubGVuZ3RoPDIzKSl7cj1yfHx7fTtmb3IodmFyIGEsbixpLHMsbyx1PTErKDMmdFsyMV0pLGM9W10sbD1bXSxkPVtdLGY9MjMsaD10WzIyXSxwPTA7cDxoO3ArKyl7aT02MyZ0W2ZdLHM9dFtmKzFdPDw4fHRbZisyXSxmKz0zO2Zvcih2YXIgdj0wO3Y8czt2KyspaWYobz10W2ZdPDw4fHRbZisxXSxmKz0yLG8pe3N3aXRjaChpKXtjYXNlIDMyOnZhciB5PXQuc3ViYXJyYXkoZixmK28pO2F8fChhPWUucGFyc2VWUFMobmUucmVtb3ZlRVBCKHkpLHIpKSxkLnB1c2goeSk7YnJlYWs7Y2FzZSAzMzp2YXIgbT10LnN1YmFycmF5KGYsZitvKTtufHwobj1lLnBhcnNlU1BTKG5lLnJlbW92ZUVQQihtKSxyKSksYy5wdXNoKG0pO2JyZWFrO2Nhc2UgMzQ6bC5wdXNoKHQuc3ViYXJyYXkoZixmK28pKX1mKz1vfX1yZXR1cm57aHZjQzpyLHNwczpuLHNwc0FycjpjLHBwc0FycjpsLHZwc0FycjpkLG5hbFVuaXRTaXplOnV9fX19LHtrZXk6InBhcnNlVlBTIix2YWx1ZTpmdW5jdGlvbih0LHIpe3I9cnx8e307dmFyIGE9bmV3IGoodCk7YS5yZWFkVUJ5dGUoKSxhLnJlYWRVQnl0ZSgpLGEucmVhZEJpdHMoMTIpO3ZhciBuPWEucmVhZEJpdHMoMyk7cmV0dXJuIHIubnVtVGVtcG9yYWxMYXllcnM9TWF0aC5tYXgoci5udW1UZW1wb3JhbExheWVyc3x8MCxuKzEpLGEucmVhZEJpdHMoMTcpLGUuX3BhcnNlUHJvZmlsZVRpZXJMZXZlbChhLG4scikscn19LHtrZXk6InBhcnNlU1BTIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cj1yfHx7fTt2YXIgYT1uZXcgaih0KTthLnJlYWRVQnl0ZSgpLGEucmVhZFVCeXRlKCksYS5yZWFkQml0cyg0KTt2YXIgbj1hLnJlYWRCaXRzKDMpO3IubnVtVGVtcG9yYWxMYXllcnM9TWF0aC5tYXgobisxLHIubnVtVGVtcG9yYWxMYXllcnN8fDApLHIudGVtcG9yYWxJZE5lc3RlZD1hLnJlYWRCaXRzKDEpLGUuX3BhcnNlUHJvZmlsZVRpZXJMZXZlbChhLG4sciksYS5yZWFkVUVHKCk7dmFyIGk9ci5jaHJvbWFGb3JtYXRJZGM9YS5yZWFkVUVHKCkscz00MjA7aTw9MyYmKHM9WzAsNDIwLDQyMiw0NDRdW2ldKTt2YXIgbz0wOzM9PT1pJiYobz1hLnJlYWRCaXRzKDEpKTt2YXIgdSxjLGwsZCxmPWEucmVhZFVFRygpLGg9YS5yZWFkVUVHKCkscD1hLnJlYWRCaXRzKDEpO2lmKDE9PT1wJiYodT1hLnJlYWRVRUcoKSxjPWEucmVhZFVFRygpLGw9YS5yZWFkVUVHKCksZD1hLnJlYWRVRUcoKSksci5iaXREZXB0aEx1bWFNaW51czg9YS5yZWFkVUVHKCksci5iaXREZXB0aENocm9tYU1pbnVzOD1hLnJlYWRVRUcoKSwxPT09cCl7dmFyIHY9MSE9PWkmJjIhPT1pfHwwIT09bz8xOjIseT0xPT09aSYmMD09PW8/MjoxO2YtPXYqKGMrdSksaC09eSooZCtsKX1yZXR1cm57Y29kZWM6ImhldjEuMS42Lkw5My5CMCIsd2lkdGg6ZixoZWlnaHQ6aCxjaHJvbWFGb3JtYXQ6cyxodmNDOnJ9fX0se2tleToiX3BhcnNlUHJvZmlsZVRpZXJMZXZlbCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBhPXIuZ2VuZXJhbFRpZXJGbGFnfHwwO3IuZ2VuZXJhbFByb2ZpbGVTcGFjZT1lLnJlYWRCaXRzKDIpLHIuZ2VuZXJhbFRpZXJGbGFnPU1hdGgubWF4KGUucmVhZEJpdHMoMSksYSksci5nZW5lcmFsUHJvZmlsZUlkYz1NYXRoLm1heChlLnJlYWRCaXRzKDUpLHIuZ2VuZXJhbFByb2ZpbGVJZGN8fDApLHIuZ2VuZXJhbFByb2ZpbGVDb21wYXRpYmlsaXR5RmxhZ3M9ZS5yZWFkQml0cygzMiksci5nZW5lcmFsQ29uc3RyYWludEluZGljYXRvckZsYWdzPVtlLnJlYWRCaXRzKDgpLGUucmVhZEJpdHMoOCksZS5yZWFkQml0cyg4KSxlLnJlYWRCaXRzKDgpLGUucmVhZEJpdHMoOCksZS5yZWFkQml0cyg4KV07dmFyIG49ZS5yZWFkQml0cyg4KTthPHIuZ2VuZXJhbFRpZXJGbGFnP3IuZ2VuZXJhbExldmVsSWRjPW46ci5nZW5lcmFsTGV2ZWxJZGM9TWF0aC5tYXgobixyLmdlbmVyYWxMZXZlbElkY3x8MCk7Zm9yKHZhciBpPVtdLHM9W10sbz0wO288dDtvKyspaVtvXT1lLnJlYWRCaXRzKDEpLHNbb109ZS5yZWFkQml0cygxKTt0PjAmJmUucmVhZEJpdHMoMiooOC10KSk7Zm9yKHZhciB1PTA7dTx0O3UrKykwIT09aVt1XSYmKGUucmVhZEJpdHMoMiksZS5yZWFkQml0cygxKSxlLnJlYWRCaXRzKDUpLGUucmVhZEJpdHMoMTYpLGUucmVhZEJpdHMoMTYpLGUucmVhZEJpdHMoNCksZS5yZWFkQml0cygxNiksZS5yZWFkQml0cygxNiksZS5yZWFkQml0cygxMikpLDAhPT1zW3VdJiZlLnJlYWRCaXRzKDgpfX1dKSxlfSgpLHVlPTFlMyxjZT01ZTMsbGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsYSxuKXtyKHRoaXMsZSksdGhpcy52aWRlb1RyYWNrPXQsdGhpcy5hdWRpb1RyYWNrPWEsdGhpcy5tZXRhZGF0YVRyYWNrPW4sdGhpcy5fYmFzZUR0cz0tMSx0aGlzLl9iYXNlRHRzSW5pdGVkPSExLHRoaXMuX2F1ZGlvTmV4dFB0cz12b2lkIDAsdGhpcy5fdmlkZW9OZXh0RHRzPXZvaWQgMCx0aGlzLl9hdWRpb1RpbWVzdGFtcEJyZWFrPTAsdGhpcy5fdmlkZW9UaW1lc3RhbXBCcmVhaz0wLHRoaXMuX2xhc3RWaWRlb0R1cmF0aW9uPTAsdGhpcy5fa2V5RnJhbWVJbk5leHRDaHVuaz0hMSx0aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25HYXBEb3Q9LTEvMCx0aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25PdmVybGFwRG90PS0xLzAsdGhpcy5fbGFzdEF1ZGlvRXhjZXB0aW9uTGFyZ2VHYXBEb3Q9LTEvMCx0aGlzLl9sYXN0VmlkZW9FeGNlcHRpb25MYXJnZUdhcERvdD0tMS8wLHRoaXMuX2xhc3RWaWRlb0V4Y2VwdGlvbkNodW5rRmlyc3REdHNEb3Q9LTEvMH1yZXR1cm4gbihlLFt7a2V5OiJmaXgiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowLHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXSxhPSEoYXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0pfHxhcmd1bWVudHNbMl07dD1NYXRoLnJvdW5kKDFlMyp0KTt2YXIgbj10aGlzLnZpZGVvVHJhY2ssaT10aGlzLmF1ZGlvVHJhY2s7IXImJmF8fCh0aGlzLl92aWRlb0xhc3RTYW1wbGU9bnVsbCx0aGlzLl9hdWRpb05leHRQdHM9dm9pZCAwLHRoaXMuX3ZpZGVvTmV4dER0cz12b2lkIDAsdGhpcy5fYXVkaW9UaW1lc3RhbXBCcmVhaz0wLHRoaXMuX3ZpZGVvVGltZXN0YW1wQnJlYWs9MCx0aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25HYXBEb3Q9LTEvMCx0aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25PdmVybGFwRG90PS0xLzAsdGhpcy5fbGFzdEF1ZGlvRXhjZXB0aW9uTGFyZ2VHYXBEb3Q9LTEvMCx0aGlzLl9sYXN0VmlkZW9FeGNlcHRpb25MYXJnZUdhcERvdD0tMS8wLHRoaXMuX2xhc3RWaWRlb0V4Y2VwdGlvbkNodW5rRmlyc3REdHNEb3Q9LTEvMCksciYmIWEmJih0aGlzLl9iYXNlRHRzSW5pdGVkPSExKSx0aGlzLl9iYXNlRHRzSW5pdGVkfHx0aGlzLl9jYWxjdWxhdGVCYXNlRHRzKGksbiksIWEmJnQmJih0aGlzLl9hdWRpb05leHRQdHM9dGhpcy5fdmlkZW9OZXh0RHRzPXQpO3ZhciBzPXRoaXMuX2Jhc2VEdHNJbml0ZWQmJih0aGlzLl92aWRlb1RpbWVzdGFtcEJyZWFrfHwhdGhpcy52aWRlb1RyYWNrLmV4aXN0KCkpJiYodGhpcy5fYXVkaW9UaW1lc3RhbXBCcmVha3x8IXRoaXMuYXVkaW9UcmFjay5leGlzdCgpKTtpZihzJiZ0aGlzLl9yZXNldEJhc2VEdHNXaGVuU3RyZWFtQnJlYWtlZCgpLHRoaXMuX2ZpeEF1ZGlvKGkpLHRoaXMuX2tleUZyYW1lSW5OZXh0Q2h1bms9ITEsdGhpcy5fZml4VmlkZW8obiksdGhpcy5tZXRhZGF0YVRyYWNrLmV4aXN0KCkpe3ZhciBvPXRoaXMubWV0YWRhdGFUcmFjay50aW1lc2NhbGU7dGhpcy5tZXRhZGF0YVRyYWNrLnNlaVNhbXBsZXMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5wdHM9dC5vcmlnaW5QdHMtZS5fYmFzZUR0cyx0LnRpbWU9TWF0aC5tYXgoMCx0LnB0cykvb30pKSx0aGlzLm1ldGFkYXRhVHJhY2suZmx2U2NyaXB0U2FtcGxlcy5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnB0cz10Lm9yaWdpblB0cy1lLl9iYXNlRHRzLHQudGltZT1NYXRoLm1heCgwLHQucHRzKS9vfSkpfW4uc2FtcGxlcy5sZW5ndGgmJihuLmJhc2VNZWRpYURlY29kZVRpbWU9bi5zYW1wbGVzWzBdLmR0cyksaS5zYW1wbGVzLmxlbmd0aCYmKGkuYmFzZU1lZGlhRGVjb2RlVGltZT1pLnNhbXBsZXNbMF0ucHRzKmkudGltZXNjYWxlLzFlMyl9fSx7a2V5OiJfZml4VmlkZW8iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLnNhbXBsZXM7aWYoci5sZW5ndGgpe3ZhciBhO2lmKHIuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5kdHMtPXQuX2Jhc2VEdHMsZS5wdHMtPXQuX2Jhc2VEdHMsZS5rZXlmcmFtZSYmKHQuX2tleUZyYW1lSW5OZXh0Q2h1bms9ITApfSkpLGUuZnBzTnVtJiZlLmZwc0RlbilhPWUudGltZXNjYWxlKihlLmZwc0Rlbi9lLmZwc051bSk7ZWxzZSBpZihlLmxlbmd0aD4xKXt2YXIgbj1lLnNhbXBsZXNbMF0saT1lLnNhbXBsZXNbci5sZW5ndGgtMV07YT1NYXRoLmZsb29yKChpLmR0cy1uLmR0cykvKHIubGVuZ3RoLTEpKX1lbHNlIGE9dGhpcy5fbGFzdFZpZGVvRHVyYXRpb258fDQwO3ZhciBzPXIucG9wKCk7aWYodGhpcy5fdmlkZW9MYXN0U2FtcGxlJiZyLnVuc2hpZnQodGhpcy5fdmlkZW9MYXN0U2FtcGxlKSx0aGlzLl92aWRlb0xhc3RTYW1wbGU9cyxyLmxlbmd0aCl7aWYodm9pZCAwPT09dGhpcy5fdmlkZW9OZXh0RHRzKXt2YXIgbz1yWzBdO3RoaXMuX3ZpZGVvTmV4dER0cz1vLmR0c312YXIgdT1yLmxlbmd0aCxjPTAsbD1yWzBdLGQ9dGhpcy5fdmlkZW9OZXh0RHRzLWwuZHRzO2lmKE1hdGguYWJzKGQpPjIwMCl7dmFyIGY7aWYoTWF0aC5hYnMobC5kdHMtdGhpcy5fbGFzdFZpZGVvRXhjZXB0aW9uQ2h1bmtGaXJzdER0c0RvdCk+NWUzKXRoaXMuX2xhc3RWaWRlb0V4Y2VwdGlvbkNodW5rRmlyc3REdHNEb3Q9bC5kdHMsZS53YXJuaW5ncy5wdXNoKHt0eXBlOkMsbmV4dER0czp0aGlzLl92aWRlb05leHREdHMsZmlyc3RTYW1wbGVEdHM6bC5kdHMsbmV4dFNhbXBsZUR0czpudWxsPT09KGY9clsxXSl8fHZvaWQgMD09PWY/dm9pZCAwOmYuZHRzLHNhbXBsZUR1cmF0aW9uOmR9KTt0aGlzLl92aWRlb1RpbWVzdGFtcEJyZWFrPj01Pyh0aGlzLl92aWRlb05leHREdHM9bC5kdHMsdGhpcy5fdmlkZW9UaW1lc3RhbXBCcmVhaz0wKToobC5kdHMrPWQsbC5wdHMrPWQsdGhpcy5hdWRpb1RyYWNrLmV4aXN0KCl8fCh0aGlzLl92aWRlb1RpbWVzdGFtcEJyZWFrPTEpKX1mb3IodmFyIGg9MDtoPHU7aCsrKXt2YXIgcD1yW2hdLmR0cyx2PXJbaCsxXTsoKGM9aDx1LTE/di5kdHMtcDpzP3MuZHRzLXA6YSk+MWUzfHxjPDApJiYodGhpcy5fdmlkZW9UaW1lc3RhbXBCcmVhaysrLE1hdGguYWJzKHAtdGhpcy5fbGFzdFZpZGVvRXhjZXB0aW9uTGFyZ2VHYXBEb3QpPjVlMyYmKHRoaXMuX2xhc3RWaWRlb0V4Y2VwdGlvbkxhcmdlR2FwRG90PXAsZS53YXJuaW5ncy5wdXNoKHt0eXBlOlQsdGltZTpwL2UudGltZXNjYWxlLGR0czpwLG9yaWdpbkR0czpyW2hdLm9yaWdpbkR0cyxuZXh0RHRzOnRoaXMuX3ZpZGVvTmV4dER0cyxzYW1wbGVEdXJhdGlvbjpjLHJlZlNhbXBsZUR1cmF0aW9uOmF9KSksYz1hKSxyW2hdLmR1cmF0aW9uPWMsdGhpcy5fdmlkZW9OZXh0RHRzKz1jLHRoaXMuX2xhc3RWaWRlb0R1cmF0aW9uPWN9fX19fSx7a2V5OiJfZml4QXVkaW8iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLnNhbXBsZXM7ci5sZW5ndGgmJihyLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuZHRzPWUucHRzLT10Ll9iYXNlRHRzfSkpLHRoaXMuX2RvRml4QXVkaW9JbnRlcm5hbChlLHIsMWUzKSl9fSx7a2V5OiJfY2FsY3VsYXRlQmFzZUR0cyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnNhbXBsZXMsYT10LnNhbXBsZXM7aWYoIXIubGVuZ3RoJiYhYS5sZW5ndGgpcmV0dXJuITE7dmFyIG49MS8wLGk9MS8wO3IubGVuZ3RoJiYoZS5iYXNlRHRzPW49clswXS5wdHMpLGEubGVuZ3RoJiYodC5iYXNlRHRzPWk9YVswXS5kdHMpLHRoaXMuX2Jhc2VEdHM9TWF0aC5taW4obixpKTt2YXIgcz1pLW47cmV0dXJuIE51bWJlci5pc0Zpbml0ZShzKSYmTWF0aC5hYnMocyk+NTAwJiZ0Lndhcm5pbmdzLnB1c2goe3R5cGU6Qix2aWRlb0Jhc2VEdHM6aSxhdWRpb0Jhc2VQdHM6bixiYXNlRHRzOnRoaXMuX2Jhc2VEdHMsZGVsdGE6c30pLHRoaXMuX2Jhc2VEdHNJbml0ZWQ9ITAsITB9fSx7a2V5OiJfcmVzZXRCYXNlRHRzV2hlblN0cmVhbUJyZWFrZWQiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY2FsY3VsYXRlQmFzZUR0cyh0aGlzLmF1ZGlvVHJhY2ssdGhpcy52aWRlb1RyYWNrKSYmKHRoaXMuYXVkaW9UcmFjay5leGlzdCgpP3RoaXMudmlkZW9UcmFjay5leGlzdCgpP3RoaXMuX2Jhc2VEdHMtPU1hdGgubWluKHRoaXMuX2F1ZGlvTmV4dFB0cyx0aGlzLl92aWRlb05leHREdHMpOnRoaXMuX2Jhc2VEdHMtPXRoaXMuX2F1ZGlvTmV4dFB0czp0aGlzLl9iYXNlRHRzLT10aGlzLl92aWRlb05leHREdHMsdGhpcy5fdmlkZW9UaW1lc3RhbXBCcmVhaz0wLHRoaXMuX2F1ZGlvVGltZXN0YW1wQnJlYWs9MCl9fSx7a2V5OiJfZG9GaXhBdWRpb0ludGVybmFsIix2YWx1ZTpmdW5jdGlvbihlLHQscil7ZS5zYW1wbGVEdXJhdGlvbnx8KGUuc2FtcGxlRHVyYXRpb249ZS5jb2RlY1R5cGU9PT1BP3NlLmdldEZyYW1lRHVyYXRpb24oZS50aW1lc2NhbGUscik6dGhpcy5fZ2V0RzcxMUR1cmF0aW9uKGUpKTt2YXIgYT1lLnNhbXBsZUR1cmF0aW9uLG49ZS5jb2RlY1R5cGU9PT1BPzEwMjQ6YSplLnRpbWVzY2FsZS8xZTM7aWYodm9pZCAwPT09dGhpcy5fYXVkaW9OZXh0UHRzKXt2YXIgaT10WzBdO3RoaXMuX2F1ZGlvTmV4dFB0cz1pLnB0c31mb3IodmFyIHM9MDtzPHQubGVuZ3RoO3MrKyl7dmFyIG89dGhpcy5fYXVkaW9OZXh0UHRzLHU9dFtzXSxjPXUucHRzLW87aWYoMD09PXMmJnRoaXMuX2F1ZGlvVGltZXN0YW1wQnJlYWs+PTUmJnRoaXMuX2tleUZyYW1lSW5OZXh0Q2h1bmsmJihvPXRoaXMuX2F1ZGlvTmV4dFB0cz11LmR0cyxjPTAsdGhpcy5fYXVkaW9UaW1lc3RhbXBCcmVhaz0wKSwhdGhpcy5fYXVkaW9UaW1lc3RhbXBCcmVhayYmYz49MyphJiZjPD11ZSYmIVcpe3ZhciBsPXRoaXMuX2dldFNpbGVudEZyYW1lKGUpfHx0WzBdLmRhdGEuc3ViYXJyYXkoKSxkPU1hdGguZmxvb3IoYy9hKTtNYXRoLmFicyh1LnB0cy10aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25HYXBEb3QpPmNlJiYodGhpcy5fbGFzdEF1ZGlvRXhjZXB0aW9uR2FwRG90PXUucHRzLGUud2FybmluZ3MucHVzaCh7dHlwZTpQLHB0czp1LnB0cyxvcmlnaW5QdHM6dS5vcmlnaW5QdHMsY291bnQ6ZCxuZXh0UHRzOm8scmVmU2FtcGxlRHVyYXRpb246YX0pKTtmb3IodmFyIGY9MDtmPGQ7ZisrKXt2YXIgaD1uZXcgTyhNYXRoLmZsb29yKHRoaXMuX2F1ZGlvTmV4dFB0cythKS1NYXRoLmZsb29yKHRoaXMuX2F1ZGlvTmV4dFB0cyksbCxuKTtoLm9yaWdpblB0cz1NYXRoLmZsb29yKHRoaXMuX2Jhc2VEdHMrbyksdC5zcGxpY2UocywwLGgpLHRoaXMuX2F1ZGlvTmV4dFB0cys9YSxzKyt9cy0tfWVsc2UgYzw9LTMqYSYmYz49LTFlMz8oTWF0aC5hYnModS5wdHMtdGhpcy5fbGFzdEF1ZGlvRXhjZXB0aW9uT3ZlcmxhcERvdCk+Y2UmJih0aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25PdmVybGFwRG90PXUucHRzLGUud2FybmluZ3MucHVzaCh7dHlwZTpJLHB0czp1LnB0cyxvcmlnaW5QdHM6dS5vcmlnaW5QdHMsbmV4dFB0czpvLHJlZlNhbXBsZUR1cmF0aW9uOmF9KSksdC5zcGxpY2UocywxKSxzLS0pOihNYXRoLmFicyhjKT51ZSYmKHRoaXMuX2F1ZGlvVGltZXN0YW1wQnJlYWsrKyxNYXRoLmFicyh1LnB0cy10aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25MYXJnZUdhcERvdCk+Y2UmJih0aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25MYXJnZUdhcERvdD11LnB0cyxlLndhcm5pbmdzLnB1c2goe3R5cGU6VSx0aW1lOnUucHRzLzFlMyxwdHM6dS5wdHMsb3JpZ2luUHRzOnUub3JpZ2luUHRzLG5leHRQdHM6byxzYW1wbGVEdXJhdGlvbjpjLHJlZlNhbXBsZUR1cmF0aW9uOmF9KSkpLHUuZHRzPXUucHRzPW8sdS5kdXJhdGlvbj1uLHRoaXMuX2F1ZGlvTmV4dFB0cys9YSl9fX0se2tleToiX2dldEc3MTFEdXJhdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zYW1wbGVTaXplLHI9ZS5jaGFubmVsQ291bnQsYT1lLnNhbXBsZVJhdGUsbj1lLnNhbXBsZXNbMF07aWYobilyZXR1cm4gMipuLmRhdGEuYnl0ZUxlbmd0aC9yLyh0LzgpL2EqMWUzfX0se2tleToiX2dldFNpbGVudEZyYW1lIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5jb2RlY1R5cGU9PT1BP3NlLmdldFNpbGVudEZyYW1lKGUuY29kZWMsZS5jaGFubmVsQ291bnQpOm5ldyBVaW50OEFycmF5KDgqZS5zYW1wbGVEdXJhdGlvbiplLmNoYW5uZWxDb3VudCl9fV0pLGV9KCksZGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpfXJldHVybiBuKGUsbnVsbCxbe2tleToicGFyc2UiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCEodC5sZW5ndGg8Mykpe3ZhciByPXt9LGE9ZS5fcGFyc2VWYWx1ZShuZXcgRGF0YVZpZXcodC5idWZmZXIsdC5ieXRlT2Zmc2V0LHQuYnl0ZUxlbmd0aCkpLG49ZS5fcGFyc2VWYWx1ZShuZXcgRGF0YVZpZXcodC5idWZmZXIsdC5ieXRlT2Zmc2V0K2Euc2l6ZSx0LmJ5dGVMZW5ndGgtYS5zaXplKSk7cmV0dXJuIHJbYS5kYXRhXT1uLmRhdGEscn19fSx7a2V5OiJfcGFyc2VWYWx1ZSIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHIsYT10LmJ5dGVMZW5ndGgsbj0xLGk9ITE7c3dpdGNoKHQuZ2V0VWludDgoMCkpe2Nhc2UgMDpyPXQuZ2V0RmxvYXQ2NCgxKSxuKz04O2JyZWFrO2Nhc2UgMTpyPSEhdC5nZXRVaW50OCgxKSxuKz0xO2JyZWFrO2Nhc2UgMjp2YXIgcz1lLl9wYXJzZVN0cmluZyhuZXcgRGF0YVZpZXcodC5idWZmZXIsdC5ieXRlT2Zmc2V0K24sdC5ieXRlTGVuZ3RoLW4pKTtyPXMuZGF0YSxuKz1zLnNpemU7YnJlYWs7Y2FzZSAzOnI9e307dmFyIG89MDtmb3IoOT09KDE2Nzc3MjE1JnQuZ2V0VWludDMyKGEtNCkpJiYobz0zKTtuPGEtNDspe3ZhciB1PWUuX3BhcnNlT2JqZWN0KG5ldyBEYXRhVmlldyh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQrbix0LmJ5dGVMZW5ndGgtbi1vKSksYz11LnNpemUsbD11LmRhdGE7aWYodS5pc0VuZClicmVhaztyW2wubmFtZV09bC52YWx1ZSxuKz1jfWlmKG48PWEtMyk5PT09KDE2Nzc3MjE1JnQuZ2V0VWludDMyKG4tMSkpJiYobis9Myk7YnJlYWs7Y2FzZSA4OnI9e30sbis9NDt2YXIgZD0wO2Zvcig5PT0oMTY3NzcyMTUmdC5nZXRVaW50MzIoYS00KSkmJihkPTMpO248YS04Oyl7dmFyIGY9ZS5fcGFyc2VPYmplY3QobmV3IERhdGFWaWV3KHQuYnVmZmVyLHQuYnl0ZU9mZnNldCtuLHQuYnl0ZUxlbmd0aC1uLWQpKSxoPWYuc2l6ZSxwPWYuZGF0YTtpZihmLmlzRW5kKWJyZWFrO3JbcC5uYW1lXT1wLnZhbHVlLG4rPWh9aWYobjw9YS0zKTk9PT0oMTY3NzcyMTUmdC5nZXRVaW50MzIobi0xKSkmJihuKz0zKTticmVhaztjYXNlIDk6cj12b2lkIDAsbj0xLGk9ITA7YnJlYWs7Y2FzZSAxMDpyPVtdO3ZhciB2PXQuZ2V0VWludDMyKDEpO24rPTQ7Zm9yKHZhciB5PTA7eTx2O3krKyl7dmFyIG09ZS5fcGFyc2VWYWx1ZShuZXcgRGF0YVZpZXcodC5idWZmZXIsdC5ieXRlT2Zmc2V0K24sdC5ieXRlTGVuZ3RoLW4pKSxnPW0uZGF0YSxrPW0uc2l6ZTtyLnB1c2goZyksbis9a31icmVhaztjYXNlIDExOnZhciBiPXQuZ2V0RmxvYXQ2NChuKSs2ZTQqdC5nZXRJbnQxNihuKzgpO3I9bmV3IERhdGUoYiksbis9MTA7YnJlYWs7Y2FzZSAxMjp2YXIgXz10LmdldFVpbnQzMigxKTtuKz00LHI9IiIsXz4wJiYocj1ILmRlY29kZShuZXcgVWludDhBcnJheSh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQrbixfKSkpLG4rPV87YnJlYWs7ZGVmYXVsdDpuPWF9cmV0dXJue2RhdGE6cixzaXplOm4saXNFbmQ6aX19fSx7a2V5OiJfcGFyc2VTdHJpbmciLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2V0VWludDE2KDApLHI9IiI7cmV0dXJuIHQ+MCYmKHI9SC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoZS5idWZmZXIsZS5ieXRlT2Zmc2V0KzIsdCkpKSx7ZGF0YTpyLHNpemU6Mit0fX19LHtrZXk6Il9wYXJzZU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoISh0LmJ5dGVMZW5ndGg8Mykpe3ZhciByPWUuX3BhcnNlU3RyaW5nKHQpLGE9ZS5fcGFyc2VWYWx1ZShuZXcgRGF0YVZpZXcodC5idWZmZXIsdC5ieXRlT2Zmc2V0K3Iuc2l6ZSx0LmJ5dGVMZW5ndGgtci5zaXplKSk7cmV0dXJue2RhdGE6e25hbWU6ci5kYXRhLHZhbHVlOmEuZGF0YX0sc2l6ZTpyLnNpemUrYS5zaXplLGlzRW5kOmEuaXNFbmR9fX19XSksZX0oKSxmZT1uZXcgRygiRmx2RGVtdXhlciIpLGhlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LGEsbil7cih0aGlzLGUpLGkodGhpcywiX2hlYWRlclBhcnNlZCIsITEpLGkodGhpcywiX3JlbWFpbmluZ0RhdGEiLG51bGwpLGkodGhpcywiX2dvcElkIiwwKSxpKHRoaXMsIl9uZWVkQWRkTWV0YUJlZm9yZUtleUZyYW1lTmFsIiwhMCksdGhpcy52aWRlb1RyYWNrPXR8fG5ldyB6LHRoaXMuYXVkaW9UcmFjaz1hfHxuZXcgTSx0aGlzLm1ldGFkYXRhVHJhY2s9bnx8bmV3IE4sdGhpcy5fZml4ZXI9bmV3IGxlKHRoaXMudmlkZW9UcmFjayx0aGlzLmF1ZGlvVHJhY2ssdGhpcy5tZXRhZGF0YVRyYWNrKX1yZXR1cm4gbihlLFt7a2V5OiJkZW11eCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXSxhPSEoYXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0pfHxhcmd1bWVudHNbMl0sbj10aGlzLmF1ZGlvVHJhY2ssaT10aGlzLnZpZGVvVHJhY2sscz10aGlzLm1ldGFkYXRhVHJhY2s7aWYoIXImJmF8fCh0aGlzLl9yZW1haW5pbmdEYXRhPW51bGwsdGhpcy5faGVhZGVyUGFyc2VkPSExKSxyPyhpLnJlc2V0KCksbi5yZXNldCgpLHMucmVzZXQoKSk6KGkuc2FtcGxlcz1bXSxuLnNhbXBsZXM9W10scy5zZWlTYW1wbGVzPVtdLHMuZmx2U2NyaXB0U2FtcGxlcz1bXSxpLndhcm5pbmdzPVtdLG4ud2FybmluZ3M9W10sdGhpcy5fcmVtYWluaW5nRGF0YSYmKHQ9Wih0aGlzLl9yZW1haW5pbmdEYXRhLHQpLHRoaXMuX3JlbWFpbmluZ0RhdGE9bnVsbCkpLCF0Lmxlbmd0aClyZXR1cm57dmlkZW9UcmFjazppLGF1ZGlvVHJhY2s6bixtZXRhZGF0YVRyYWNrOnN9O3ZhciBvPTA7aWYoIXRoaXMuX2hlYWRlclBhcnNlZCl7aWYoIWUucHJvYmUodCkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGZsdiBmaWxlIik7bi5wcmVzZW50PSg0JnRbNF0pPj4+MiE9MCxpLnByZXNlbnQ9MCE9KDEmdFs0XSksdGhpcy5faGVhZGVyUGFyc2VkPSEwLG89JCh0LDUpKzR9Zm9yKHZhciB1LGMsbCxkLGYsaD10Lmxlbmd0aDtvKzE1PGgmJih1PXRbb10sIShvKzE1KyhjPXRbbysxXTw8MTZ8dFtvKzJdPDw4fHRbbyszXSk+aCkpOylsPSh0W28rN108PDI0Pj4+MCkrKHRbbys0XTw8MTYpKyh0W28rNV08PDgpK3Rbbys2XSxvKz0xMSxkPXQuc3ViYXJyYXkobyxvK2MpLDg9PT11P3RoaXMuX3BhcnNlQXVkaW8oZCxsKTo5PT09dT90aGlzLl9wYXJzZVZpZGVvKGQsbCk6MTg9PT11P3RoaXMuX3BhcnNlU2NyaXB0KGQsbCk6ZmUud2FybigiSW52YWxpZCB0YWcgdHlwZTogIi5jb25jYXQodSkpLChmPSQodCxvKz1jKSkhPT0xMStjJiZmZS53YXJuKCJJbnZhbGlkIFByZXZUYWdTaXplICIuY29uY2F0KGYsIiAoIikuY29uY2F0KDExK2MsIikiKSksbys9NDtyZXR1cm4gbzxoJiYodGhpcy5fcmVtYWluaW5nRGF0YT10LnN1YmFycmF5KG8pKSxuLmZvcm1hdFRpbWVzY2FsZT1pLmZvcm1hdFRpbWVzY2FsZT1pLnRpbWVzY2FsZT1zLnRpbWVzY2FsZT0xZTMsbi50aW1lc2NhbGU9bi5zYW1wbGVSYXRlfHwwLCFuLmV4aXN0KCkmJm4uaGFzU2FtcGxlKCkmJm4ucmVzZXQoKSwhaS5leGlzdCgpJiZpLmhhc1NhbXBsZSgpJiZpLnJlc2V0KCkse3ZpZGVvVHJhY2s6aSxhdWRpb1RyYWNrOm4sbWV0YWRhdGFUcmFjazpzfX19LHtrZXk6ImZpeCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLl9maXhlci5maXgoZSx0LHIpLHt2aWRlb1RyYWNrOnRoaXMudmlkZW9UcmFjayxhdWRpb1RyYWNrOnRoaXMuYXVkaW9UcmFjayxtZXRhZGF0YVRyYWNrOnRoaXMubWV0YWRhdGFUcmFja319fSx7a2V5OiJkZW11eEFuZEZpeCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsYSl7cmV0dXJuIHRoaXMuZGVtdXgoZSx0LHIpLHRoaXMuZml4KGEsdCxyKX19LHtrZXk6Il9wYXJzZUF1ZGlvIix2YWx1ZTpmdW5jdGlvbih0LHIpe2lmKHQubGVuZ3RoKXt2YXIgYT0oMjQwJnRbMF0pPj4+NCxuPXRoaXMuYXVkaW9UcmFjaztpZigxMCE9PWEmJjchPT1hJiY4IT09YSlyZXR1cm4gZmUud2FybigiVW5zdXBwb3J0ZWQgc291bmQgZm9ybWF0OiAiLmNvbmNhdChhKSksdm9pZCBuLnJlc2V0KCk7aWYoMTAhPT1hKXt2YXIgaT0oMTImdFswXSk+PjIscz0oMiZ0WzBdKT4+MSxvPTEmdFswXTtuLnNhbXBsZVJhdGU9ZS5BVURJT19SQVRFW2ldLG4uc2FtcGxlU2l6ZT1zPzE2Ojgsbi5jaGFubmVsQ291bnQ9bysxfTEwPT09YT90aGlzLl9wYXJzZUFhYyh0LHIpOnRoaXMuX3BhcnNlRzcxMSh0LHIsYSl9fX0se2tleToiX3BhcnNlRzcxMSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBhPXRoaXMuYXVkaW9UcmFjazthLmNvZGVjVHlwZT03PT09cj9EOkUsYS5zYW1wbGVSYXRlPThlMyxhLmNvZGVjPWEuY29kZWNUeXBlLGEuc2FtcGxlcy5wdXNoKG5ldyBPKHQsZS5zdWJhcnJheSgxKSkpfX0se2tleToiX3BhcnNlQWFjIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuYXVkaW9UcmFjaztpZihyLmNvZGVjVHlwZT1BLDA9PT1lWzFdKXt2YXIgYT1zZS5wYXJzZUF1ZGlvU3BlY2lmaWNDb25maWcoZS5zdWJhcnJheSgyKSk7YT8oci5jb2RlYz1hLmNvZGVjLHIuY2hhbm5lbENvdW50PWEuY2hhbm5lbENvdW50LHIuc2FtcGxlUmF0ZT1hLnNhbXBsZVJhdGUsci5jb25maWc9YS5jb25maWcsci5vYmplY3RUeXBlPWEub2JqZWN0VHlwZSxyLnNhbXBsZVJhdGVJbmRleD1hLnNhbXBsaW5nRnJlcXVlbmN5SW5kZXgpOihyLnJlc2V0KCksZmUud2FybigiQ2Fubm90IHBhcnNlIEF1ZGlvU3BlY2lmaWNDb25maWciLGUpKX1lbHNlIGlmKDE9PT1lWzFdKXtpZihudWxsPT10KXJldHVybjtyLnNhbXBsZXMucHVzaChuZXcgTyh0LGUuc3ViYXJyYXkoMikpKX1lbHNlIGZlLndhcm4oIlVua25vd24gQUFDUGFja2V0VHlwZTogIi5jb25jYXQoZVsxXSkpfX0se2tleToiX3BhcnNlVmlkZW8iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZighKGUubGVuZ3RoPDYpKXt2YXIgYT0oMjQwJmVbMF0pPj4+NCxuPTE1JmVbMF0saT10aGlzLnZpZGVvVHJhY2s7aWYoNyE9PW4mJjEyIT09bilyZXR1cm4gaS5yZXNldCgpLHZvaWQgZmUud2FybigiVW5zdXBwb3J0ZWQgY29kZWNJZDogIi5jb25jYXQobikpO3ZhciBzPTEyPT09bjtpLmNvZGVjVHlwZT1zP1M6eDt2YXIgbz1lWzFdLHU9KGVbMl08PDE2fGVbM108PDh8ZVs0XSk8PDg+Pjg7aWYoMD09PW8pe3ZhciBjPWUuc3ViYXJyYXkoNSksbD1zP29lLnBhcnNlSEVWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkKGMpOmllLnBhcnNlQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQoYyk7aWYobCl7dmFyIGQ9bC5odmNDLGY9bC5zcHMsaD1sLnBwc0FycixwPWwuc3BzQXJyLHY9bC52cHNBcnIseT1sLm5hbFVuaXRTaXplO2QmJihpLmh2Y0M9aS5odmNDfHxkKSxmJiYoaS5jb2RlYz1mLmNvZGVjLGkud2lkdGg9Zi53aWR0aCxpLmhlaWdodD1mLmhlaWdodCxpLnNhclJhdGlvPWYuc2FyUmF0aW8saS5mcHNOdW09Zi5mcHNOdW0saS5mcHNEZW49Zi5mcHNEZW4pLHAubGVuZ3RoJiYoaS5zcHM9cCksaC5sZW5ndGgmJihpLnBwcz1oKSx2JiZ2Lmxlbmd0aCYmKGkudnBzPXYpLHkmJihpLm5hbFVuaXRTaXplPXkpfWVsc2UgZmUud2FybigiQ2Fubm90IHBhcnNlICIuY29uY2F0KHM/IkhFVkMiOiJBVkMiLCJEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCIpLGUpfWVsc2UgaWYoMT09PW8pe3ZhciBtPW5lLnBhcnNlQXZjQyhlLnN1YmFycmF5KDUpLGkubmFsVW5pdFNpemUpO2lmKChtPXRoaXMuX2NoZWNrQWRkTWV0YU5hbFRvVW5pdHMocyxtLGkpKSYmbS5sZW5ndGgpe3ZhciBnPW5ldyBSKHQrdSx0LG0pOzE9PT1hJiZnLnNldFRvS2V5ZnJhbWUoKSxpLnNhbXBsZXMucHVzaChnKSxtLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBhPXM/ZVswXT4+PjEmNjM6MzEmZVswXTtzd2l0Y2goYSl7Y2FzZSA1OmNhc2UgMTY6Y2FzZSAxNzpjYXNlIDE4OmNhc2UgMTk6Y2FzZSAyMDpjYXNlIDIxOmNhc2UgMjI6Y2FzZSAyMzppZighcyYmNSE9PWF8fHMmJjU9PT1hKWJyZWFrO2cuc2V0VG9LZXlmcmFtZSgpO2JyZWFrO2Nhc2UgNjpjYXNlIDM5OmNhc2UgNDA6aWYoIXMmJjYhPT1hfHxzJiY2PT09YSlicmVhaztyLm1ldGFkYXRhVHJhY2suc2VpU2FtcGxlcy5wdXNoKG5ldyBGKG5lLnBhcnNlU0VJKG5lLnJlbW92ZUVQQihlKSxzKSx0K3UpKX19KSksZy5rZXlmcmFtZSYmdGhpcy5fZ29wSWQrKyxnLmdvcElkPXRoaXMuX2dvcElkfWVsc2UgZmUud2FybigiQ2Fubm90IHBhcnNlIE5BTFVzIixlKX1lbHNlIDI9PT1vfHxmZS53YXJuKCJVbmtub3duIEFWQ1BhY2tldFR5cGU6ICIuY29uY2F0KG8pKX19fSx7a2V5OiJfY2hlY2tBZGRNZXRhTmFsVG9Vbml0cyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlJiZ0aGlzLl9uZWVkQWRkTWV0YUJlZm9yZUtleUZyYW1lTmFsP3QubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZVswXT4+PjEmNjN9KSkuaW5jbHVkZXMoMzIpPyh0aGlzLl9uZWVkQWRkTWV0YUJlZm9yZUtleUZyYW1lTmFsPSExLHQpOih0LnVuc2hpZnQoci5wcHNbMF0pLHQudW5zaGlmdChyLnNwc1swXSksdC51bnNoaWZ0KHIudnBzWzBdKSx0LmZpbHRlcihCb29sZWFuKSk6KHRoaXMuX25lZWRBZGRNZXRhQmVmb3JlS2V5RnJhbWVOYWw9ITEsdCl9fSx7a2V5OiJfcGFyc2VTY3JpcHQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5tZXRhZGF0YVRyYWNrLmZsdlNjcmlwdFNhbXBsZXMucHVzaChuZXcgVihkZS5wYXJzZShlKSx0KSl9fV0sW3trZXk6InByb2JlIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gNzA9PT1lWzBdJiY3Nj09PWVbMV0mJjg2PT09ZVsyXSYmMT09PWVbM10mJiQoZSw1KT49OX19XSksZX0oKTtpKGhlLCJBVURJT19SQVRFIixbNTUwMCwxMWUzLDIyZTMsNDRlM10pLG5ldyBHKCJUc0RlbXV4ZXIiKTt2YXIgcGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpfXJldHVybiBuKGUsbnVsbCxbe2tleToiZmluZEJveCIsdmFsdWU6ZnVuY3Rpb24odCxyKXt2YXIgYT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MCxuPVtdO2lmKCF0KXJldHVybiBuO2Zvcih2YXIgaT0wLHM9IiIsbz0wO3QubGVuZ3RoPjc7KXtpZihpPSQodCkscz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsdC5zdWJhcnJheSg0LDgpKSxvPTgsMT09PWk/KGk9ZWUodCw4KSxvKz04KTppfHwoaT10Lmxlbmd0aCksIXJbMF18fHM9PT1yWzBdKXt2YXIgdT10LnN1YmFycmF5KDAsaSk7aWYoIShyLmxlbmd0aDwyKSlyZXR1cm4gZS5maW5kQm94KHUuc3ViYXJyYXkobyksci5zbGljZSgxKSxhK28pO24ucHVzaCh7c3RhcnQ6YSxzaXplOmksaGVhZGVyU2l6ZTpvLHR5cGU6cyxkYXRhOnV9KX1hKz1pLHQ9dC5zdWJhcnJheShpKX1yZXR1cm4gbn19LHtrZXk6InRmaGQiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe2UudHJhY2tJZD0kKHQpO3ZhciByPTQsYT0xJmUuZmxhZ3Msbj0yJmUuZmxhZ3MsaT04JmUuZmxhZ3Mscz0xNiZlLmZsYWdzLG89MzImZS5mbGFnczthJiYocis9NCxlLmJhc2VEYXRhT2Zmc2V0PSQodCxyKSxyKz00KSxuJiYoZS5zYW1wbGVEZXNjcmlwdGlvbkluZGV4PSQodCxyKSxyKz00KSxpJiYoZS5kZWZhdWx0U2FtcGxlRHVyYXRpb249JCh0LHIpLHIrPTQpLHMmJihlLmRlZmF1bHRTYW1wbGVTaXplPSQodCxyKSxyKz00KSxvJiYoZS5kZWZhdWx0U2FtcGxlRmxhZ3M9JCh0LHIpKX0pKX19LHtrZXk6InNpZHgiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe3ZhciByPTA7ZS5yZWZlcmVuY2VfSUQ9JCh0LHIpLHIrPTQsZS50aW1lc2NhbGU9JCh0LHIpLHIrPTQsMD09PWUudmVyc2lvbj8oZS5lYXJsaWVzdF9wcmVzZW50YXRpb25fdGltZT0kKHQscikscis9NCxlLmZpcnN0X29mZnNldD0kKHQscikscis9NCk6KGUuZWFybGllc3RfcHJlc2VudGF0aW9uX3RpbWU9ZWUodCxyKSxyKz04LGUuZmlyc3Rfb2Zmc2V0PWVlKHQscikscis9OCkscis9MixlLnJlZmVyZW5jZXM9W107dmFyIGE9Sih0LHIpO3IrPTI7Zm9yKHZhciBuPTA7bjxhO24rKyl7dmFyIGk9e307ZS5yZWZlcmVuY2VzLnB1c2goaSk7dmFyIHM9JCh0LHIpO3IrPTQsaS5yZWZlcmVuY2VfdHlwZT1zPj4zMSYxLGkucmVmZXJlbmNlZF9zaXplPTIxNDc0ODM2NDcmcyxpLnN1YnNlZ21lbnRfZHVyYXRpb249JCh0LHIpLHM9JCh0LHIrPTQpLHIrPTQsaS5zdGFydHNfd2l0aF9TQVA9cz4+MzEmMSxpLlNBUF90eXBlPXM+PjI4JjcsaS5TQVBfZGVsdGFfdGltZT0yNjg0MzU0NTUmc319KSl9fSx7a2V5OiJtb292Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZ2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3QubXZoZD1lLm12aGQoZS5maW5kQm94KHIsWyJtdmhkIl0sYSlbMF0pLHQudHJhaz1lLmZpbmRCb3gocixbInRyYWsiXSxhKS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBlLnRyYWsodCl9KSksdC5wc3NoPWUucHNzaChlLmZpbmRCb3gocixbInBzc2giXSxhKVswXSl9KSl9fSx7a2V5OiJtdmhkIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2UoZSwhMCwoZnVuY3Rpb24oZSx0KXt2YXIgcj0wOzE9PT1lLnZlcnNpb24/KGUudGltZXNjYWxlPSQodCwxNiksZS5kdXJhdGlvbj1lZSh0LDIwKSxyKz0yOCk6KGUudGltZXNjYWxlPSQodCw4KSxlLmR1cmF0aW9uPSQodCwxMikscis9MTYpLGUubmV4dFRyYWNrSWQ9JCh0LHIrNzYpfSkpfX0se2tleToidHJhayIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt0LnRraGQ9ZS50a2hkKGUuZmluZEJveChyLFsidGtoZCJdLGEpWzBdKSx0Lm1kaWE9ZS5tZGlhKGUuZmluZEJveChyLFsibWRpYSJdLGEpWzBdKX0pKX19LHtrZXk6InRraGQiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe3ZhciByPTA7MT09PWUudmVyc2lvbj8oZS50cmFja0lkPSQodCwxNiksZS5kdXJhdGlvbj1lZSh0LDI0KSxyKz0zMik6KGUudHJhY2tJZD0kKHQsOCksZS5kdXJhdGlvbj0kKHQsMTYpLHIrPTIwKSxlLndpZHRoPSQodCxyKzUyKSxlLmhlaWdodD0kKHQscis1Nil9KSl9fSx7a2V5OiJtZGlhIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZ2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3QubWRoZD1lLm1kaGQoZS5maW5kQm94KHIsWyJtZGhkIl0sYSlbMF0pLHQuaGRscj1lLmhkbHIoZS5maW5kQm94KHIsWyJoZGxyIl0sYSlbMF0pLHQubWluZj1lLm1pbmYoZS5maW5kQm94KHIsWyJtaW5mIl0sYSlbMF0pfSkpfX0se2tleToibWRoZCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGdlKGUsITAsKGZ1bmN0aW9uKGUsdCl7dmFyIHI9MDsxPT09ZS52ZXJzaW9uPyhlLnRpbWVzY2FsZT0kKHQsMTYpLGUuZHVyYXRpb249ZWUodCwyMCkscis9MjgpOihlLnRpbWVzY2FsZT0kKHQsOCksZS5kdXJhdGlvbj0kKHQsMTIpLHIrPTE2KTt2YXIgYT1KKHQscik7ZS5sYW5ndWFnZT1TdHJpbmcuZnJvbUNoYXJDb2RlKDk2KyhhPj4xMCYzMSksOTYrKGE+PjUmMzEpLDk2KygzMSZhKSl9KSl9fSx7a2V5OiJoZGxyIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2UoZSwhMCwoZnVuY3Rpb24oZSx0KXswPT09ZS52ZXJzaW9uJiYoZS5oYW5kbGVyVHlwZT1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsdC5zdWJhcnJheSg0LDgpKSl9KSl9fSx7a2V5OiJtaW5mIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZ2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3Qudm1oZD1lLnZtaGQoZS5maW5kQm94KHIsWyJ2bWhkIl0sYSlbMF0pLHQuc21oZD1lLnNtaGQoZS5maW5kQm94KHIsWyJzbWhkIl0sYSlbMF0pLHQuc3RibD1lLnN0YmwoZS5maW5kQm94KHIsWyJzdGJsIl0sYSlbMF0pfSkpfX0se2tleToidm1oZCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGdlKGUsITAsKGZ1bmN0aW9uKGUsdCl7ZS5ncmFwaGljc21vZGU9Sih0KSxlLm9wY29sb3I9W0oodCwyKSxKKHQsNCksSih0LDYpXX0pKX19LHtrZXk6InNtaGQiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe2UuYmFsYW5jZT1KKHQpfSkpfX0se2tleToic3RibCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt2YXIgbixpLHM7dC5zdHNkPWUuc3RzZChlLmZpbmRCb3gocixbInN0c2QiXSxhKVswXSksdC5zdHRzPWUuc3R0cyhlLmZpbmRCb3gocixbInN0dHMiXSxhKVswXSksdC5jdHRzPWUuY3R0cyhlLmZpbmRCb3gocixbImN0dHMiXSxhKVswXSksdC5zdHNjPWUuc3RzYyhlLmZpbmRCb3gocixbInN0c2MiXSxhKVswXSksdC5zdHN6PWUuc3RzeihlLmZpbmRCb3gocixbInN0c3oiXSxhKVswXSksdC5zdGNvPWUuc3RjbyhlLmZpbmRCb3gocixbInN0Y28iXSxhKVswXSksdC5zdGNvfHwodC5jbzY0PWUuY282NChlLmZpbmRCb3gocixbImNvNjQiXSxhKVswXSksdC5zdGNvPXQuY282NCk7dmFyIG89bnVsbD09PShuPXQuc3RzZC5lbnRyaWVzWzBdKXx8dm9pZCAwPT09bnx8bnVsbD09PShpPW4uc2luZil8fHZvaWQgMD09PWl8fG51bGw9PT0ocz1pLnNjaGkpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnRlbmMuZGVmYXVsdF9JVl9zaXplO3Quc3Rzcz1lLnN0c3MoZS5maW5kQm94KHIsWyJzdHNzIl0sYSlbMF0pLHQuc2VuYz1lLnNlbmMoZS5maW5kQm94KHIsWyJzZW5jIl0sYSlbMF0sbyl9KSl9fSx7a2V5OiJzZW5jIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06ODtyZXR1cm4gZ2UoZSwhMCwoZnVuY3Rpb24oZSxyKXt2YXIgYT0wLG49JChyLGEpO2ErPTQsZS5zYW1wbGVzPVtdO2Zvcih2YXIgaT0wO2k8bjtpKyspe2Zvcih2YXIgcz17SW5pdGlhbGl6YXRpb25WZWN0b3I6W119LG89MDtvPHQ7bysrKXMuSW5pdGlhbGl6YXRpb25WZWN0b3Jbb109clthK29dO2lmKGErPXQsMiZlLmZsYWdzKXtzLnN1YnNhbXBsZXM9W107dmFyIHU9SihyLGEpO2ErPTI7Zm9yKHZhciBjPTA7Yzx1O2MrKyl7dmFyIGw9e307bC5CeXRlc09mQ2xlYXJEYXRhPUoocixhKSxhKz0yLGwuQnl0ZXNPZlByb3RlY3RlZERhdGE9JChyLGEpLGErPTQscy5zdWJzYW1wbGVzLnB1c2gobCl9fWUuc2FtcGxlcy5wdXNoKHMpfX0pKX19LHtrZXk6InBzc2giLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1bXSxhPVtdLG49MCxpPTA7aTwxNjtpKyspYS5wdXNoKGJlKHRbbitpXSkpO2lmKG4rPTE2LGUudmVyc2lvbj4wKXt2YXIgcz0kKHQsbik7bis9NDtmb3IodmFyIG89MDtvPCgiIitzKS5sZW5ndGg7bysrKWZvcih2YXIgdT0wO3U8MTY7dSsrKXt2YXIgYz10W25dO24rPTEsci5wdXNoKGJlKGMpKX19dmFyIGw9JCh0LG4pO2UuZGF0YV9zaXplPWwsbis9NCxlLmtpZD1yLGUuc3lzdGVtX2lkPWEsZS5idWZmZXI9dH0pKX19LHtrZXk6InN0c2QiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBnZSh0LCEwLChmdW5jdGlvbih0LHIsYSl7dC5lbnRyeUNvdW50PSQociksdC5lbnRyaWVzPWUuZmluZEJveChyLnN1YmFycmF5KDQpLFtdLGErNCkubWFwKChmdW5jdGlvbih0KXtzd2l0Y2godC50eXBlKXtjYXNlImF2YzEiOmNhc2UiYXZjMiI6Y2FzZSJhdmMzIjpjYXNlImF2YzQiOnJldHVybiBlLmF2YzEodCk7Y2FzZSJodmMxIjpjYXNlImhldjEiOnJldHVybiBlLmh2YzEodCk7Y2FzZSJtcDRhIjpyZXR1cm4gZS5tcDRhKHQpO2Nhc2UiYWxhdyI6Y2FzZSJ1bGF3IjpyZXR1cm4gZS5hbGF3KHQpO2Nhc2UiZW5jYSI6cmV0dXJuIGdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt0LmNoYW5uZWxDb3VudD1KKHIsMTYpLHQuc2FtcGxlc2l6ZT1KKHIsMTgpLHQuc2FtcGxlUmF0ZT0kKHIsMjQpLzY1NTM2LHI9ci5zdWJhcnJheSgyOCksdC5zaW5mPWUuc2luZihlLmZpbmRCb3gocixbInNpbmYiXSxhKVswXSksdC5lc2RzPWUuZXNkcyhlLmZpbmRCb3gocixbImVzZHMiXSxhKVswXSl9KSk7Y2FzZSJlbmN2IjpyZXR1cm4gZ2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3Qud2lkdGg9SihyLDI0KSx0LmhlaWdodD1KKHIsMjYpLHQuaG9yaXpyZXNvbHV0aW9uPSQociwyOCksdC52ZXJ0cmVzb2x1dGlvbj0kKHIsMzIpLHI9ci5zdWJhcnJheSg3OCksdC5zaW5mPWUuc2luZihlLmZpbmRCb3gocixbInNpbmYiXSxhKVswXSksdC5hdmNDPWUuYXZjQyhlLmZpbmRCb3gocixbImF2Y0MiXSxhKVswXSksdC5odmNDPWUuaHZjQyhlLmZpbmRCb3gocixbImh2Y0MiXSxhKVswXSksdC5wYXNwPWUucGFzcChlLmZpbmRCb3gocixbInBhc3AiXSxhKVswXSl9KSl9fSkpLmZpbHRlcihCb29sZWFuKX0pKX19LHtrZXk6InRlbmMiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCExLChmdW5jdGlvbihlLHQpe3ZhciByPTY7ZS5kZWZhdWx0X0lzRW5jcnlwdGVkPXRbcl0scis9MSxlLmRlZmF1bHRfSVZfc2l6ZT10W3JdLHIrPTEsZS5kZWZhdWx0X0tJRD1bXTtmb3IodmFyIGE9MDthPDE2O2ErKyllLmRlZmF1bHRfS0lELnB1c2goYmUodFtyXSkpLHIrPTF9KSl9fSx7a2V5OiJzY2hpIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZ2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3QudGVuYz1lLnRlbmMoZS5maW5kQm94KHIsWyJ0ZW5jIl0sYSlbMF0pfSkpfX0se2tleToic2luZiIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt0LnNjaGk9ZS5zY2hpKGUuZmluZEJveChyLFsic2NoaSJdLGEpWzBdKSx0LmZybWE9ZS5mcm1hKGUuZmluZEJveChyLFsiZnJtYSJdLGEpWzBdKX0pKX19LHtrZXk6ImZybWEiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCExLChmdW5jdGlvbihlLHQpe2UuZGF0YV9mb3JtYXQ9IiI7Zm9yKHZhciByPTA7cjw0O3IrKyllLmRhdGFfZm9ybWF0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRbcl0pfSkpfX0se2tleToiYXZjMSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt2YXIgbj15ZSh0LHIpLGk9ci5zdWJhcnJheShuKTthKz1uLHQuYXZjQz1lLmF2Y0MoZS5maW5kQm94KGksWyJhdmNDIl0sYSlbMF0pLHQucGFzcD1lLnBhc3AoZS5maW5kQm94KGksWyJwYXNwIl0sYSlbMF0pfSkpfX0se2tleToiYXZjQyIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGdlKGUsITEsKGZ1bmN0aW9uKGUsdCl7ZS5jb25maWd1cmF0aW9uVmVyc2lvbj10WzBdLGUuQVZDUHJvZmlsZUluZGljYXRpb249dFsxXSxlLnByb2ZpbGVDb21wYXRpYmlsaXR5PXRbMl0sZS5BVkNMZXZlbEluZGljYXRpb249dFszXSxlLmNvZGVjPXRlKFt0WzFdLHRbMl0sdFszXV0pLGUubGVuZ3RoU2l6ZU1pbnVzT25lPTMmdFs0XSxlLnNwc0xlbmd0aD0zMSZ0WzVdLGUuc3BzPVtdO2Zvcih2YXIgcj02LGE9MDthPGUuc3BzTGVuZ3RoO2ErKyl7dmFyIG49Sih0LHIpO3IrPTIsZS5zcHMucHVzaCh0LnN1YmFycmF5KHIscituKSkscis9bn1lLnBwc0xlbmd0aD10W3JdLHIrPTEsZS5wcHM9W107Zm9yKHZhciBpPTA7aTxlLnBwc0xlbmd0aDtpKyspe3ZhciBzPUoodCxyKTtyKz0yLGUucHBzLnB1c2godC5zdWJhcnJheShyLHIrPXMpKSxyKz1zfX0pKX19LHtrZXk6Imh2YzEiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBnZSh0LCExLChmdW5jdGlvbih0LHIsYSl7dmFyIG49eWUodCxyKSxpPXIuc3ViYXJyYXkobik7YSs9bix0Lmh2Y0M9ZS5odmNDKGUuZmluZEJveChpLFsiaHZjQyJdLGEpWzBdKSx0LnBhc3A9ZS5wYXNwKGUuZmluZEJveChpLFsicGFzcCJdLGEpWzBdKX0pKX19LHtrZXk6Imh2Y0MiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCExLChmdW5jdGlvbih0LHIpe3QuZGF0YT1lLmRhdGEsdC5jb2RlYz0iaGV2MS4xLjYuTDkzLkIwIix0LmNvbmZpZ3VyYXRpb25WZXJzaW9uPXJbMF07dmFyIGE9clsxXTt0LmdlbmVyYWxQcm9maWxlU3BhY2U9YT4+Nix0LmdlbmVyYWxUaWVyRmxhZz0oMzImYSk+PjUsdC5nZW5lcmFsUHJvZmlsZUlkYz0zMSZhLHQuZ2VuZXJhbFByb2ZpbGVDb21wYXRpYmlsaXR5PSQociwyKSx0LmdlbmVyYWxDb25zdHJhaW50SW5kaWNhdG9yRmxhZ3M9ci5zdWJhcnJheSg2LDEyKSx0LmdlbmVyYWxMZXZlbElkYz1yWzEyXSx0LmF2Z0ZyYW1lUmF0ZT1KKHIsMTkpLHQubnVtT2ZBcnJheXM9clsyMl0sdC52cHM9W10sdC5zcHM9W10sdC5wcHM9W107Zm9yKHZhciBuPTIzLGk9MCxzPTAsbz0wLHU9MDt1PHQubnVtT2ZBcnJheXM7dSsrKXtpPTYzJnJbbl0scz1KKHIsbisxKSxuKz0zO2Zvcih2YXIgYyxsPVtdLGQ9MDtkPHM7ZCsrKW89SihyLG4pLG4rPTIsbC5wdXNoKHIuc3ViYXJyYXkobixuK28pKSxuKz1vO2lmKDMyPT09aSkoYz10LnZwcykucHVzaC5hcHBseShjLGwpO2Vsc2UgaWYoMzM9PT1pKXt2YXIgZjsoZj10LnNwcykucHVzaC5hcHBseShmLGwpfWVsc2UgaWYoMzQ9PT1pKXt2YXIgaDsoaD10LnBwcykucHVzaC5hcHBseShoLGwpfX19KSl9fSx7a2V5OiJwYXNwIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2UoZSwhMSwoZnVuY3Rpb24oZSx0KXtlLmhTcGFjaW5nPSQodCksZS52U3BhY2luZz0kKHQsNCl9KSl9fSx7a2V5OiJtcDRhIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZ2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3ZhciBuPW1lKHQscik7dC5lc2RzPWUuZXNkcyhlLmZpbmRCb3goci5zdWJhcnJheShuKSxbImVzZHMiXSxhK24pWzBdKX0pKX19LHtrZXk6ImVzZHMiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe2UuY29kZWM9Im1wNGEuIjtmb3IodmFyIHI9MCxhPTAsbj0wLGk9MDt0Lmxlbmd0aDspe2ZvcihpPXRbcj0wXSxhPXRbcisxXSxyKz0yOzEyOCZhOyluPSgxMjcmYSk8PDcsYT10W3JdLHIrPTE7aWYobis9MTI3JmEsMz09PWkpdD10LnN1YmFycmF5KHIrMyk7ZWxzZXtpZig0IT09aSl7aWYoNT09PWkpe3ZhciBzPWUuY29uZmlnPXQuc3ViYXJyYXkocixyK24pLG89KDI0OCZzWzBdKT4+MztyZXR1cm4gMzE9PT1vJiZzLmxlbmd0aD49MiYmKG89MzIrKCg3JnNbMF0pPDwzKSsoKDIyNCZzWzFdKT4+NSkpLGUub2JqZWN0VHlwZT1vLGUuY29kZWMrPW8udG9TdHJpbmcoMTYpLHZvaWQoIi4iPT09ZS5jb2RlY1tlLmNvZGVjLmxlbmd0aC0xXSYmKGUuY29kZWM9ZS5jb2RlYy5zdWJzdHJpbmcoMCxlLmNvZGVjLmxlbmd0aC0xKSkpfXJldHVybiB2b2lkKCIuIj09PWUuY29kZWNbZS5jb2RlYy5sZW5ndGgtMV0mJihlLmNvZGVjPWUuY29kZWMuc3Vic3RyaW5nKDAsZS5jb2RlYy5sZW5ndGgtMSkpKX1lLmNvZGVjKz0odFtyXS50b1N0cmluZygxNikrIi4iKS5wYWRTdGFydCgzLCIwIiksdD10LnN1YmFycmF5KHIrMTMpfX19KSl9fSx7a2V5OiJhbGF3Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2UoZSwhMSwoZnVuY3Rpb24oZSx0KXttZShlLHQpfSkpfX0se2tleToic3R0cyIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGdlKGUsITAsKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPSQodCksYT1bXSxuPTQsaT0wO2k8cjtpKyspYS5wdXNoKHtjb3VudDokKHQsbiksZGVsdGE6JCh0LG4rNCl9KSxuKz04O2UuZW50cnlDb3VudD1yLGUuZW50cmllcz1hfSkpfX0se2tleToiY3R0cyIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGdlKGUsITAsKGZ1bmN0aW9uKGUsdCl7dmFyIHI9JCh0KSxhPVtdLG49NDtpZigxPT09ZS52ZXJzaW9uKWZvcih2YXIgaT0wO2k8cjtpKyspYS5wdXNoKHtjb3VudDokKHQsbiksb2Zmc2V0OiQodCxuKzQpfSksbis9ODtlbHNlIGZvcih2YXIgcz0wO3M8cjtzKyspYS5wdXNoKHtjb3VudDokKHQsbiksb2Zmc2V0Oi0oMSt+JCh0LG4rNCkpfSksbis9ODtlLmVudHJ5Q291bnQ9cixlLmVudHJpZXM9YX0pKX19LHtrZXk6InN0c2MiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0kKHQpLGE9W10sbj00LGk9MDtpPHI7aSsrKWEucHVzaCh7Zmlyc3RDaHVuazokKHQsbiksc2FtcGxlc1BlckNodW5rOiQodCxuKzQpLHNhbXBsZURlc2NyaXB0aW9uSW5kZXg6JCh0LG4rOCl9KSxuKz0xMjtlLmVudHJ5Q291bnQ9cixlLmVudHJpZXM9YX0pKX19LHtrZXk6InN0c3oiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe3ZhciByPSQodCksYT0kKHQsNCksbj1bXTtpZighcilmb3IodmFyIGk9OCxzPTA7czxhO3MrKyluLnB1c2goJCh0LGkpKSxpKz00O2Uuc2FtcGxlU2l6ZT1yLGUuc2FtcGxlQ291bnQ9YSxlLmVudHJ5U2l6ZXM9bn0pKX19LHtrZXk6InN0Y28iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0kKHQpLGE9W10sbj00LGk9MDtpPHI7aSsrKWEucHVzaCgkKHQsbikpLG4rPTQ7ZS5lbnRyeUNvdW50PXIsZS5lbnRyaWVzPWF9KSl9fSx7a2V5OiJjbzY0Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2UoZSwhMCwoZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9JCh0KSxhPVtdLG49NCxpPTA7aTxyO2krKylhLnB1c2goZWUodCxuKSksbis9ODtlLmVudHJ5Q291bnQ9cixlLmVudHJpZXM9YX0pKX19LHtrZXk6InN0c3MiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0kKHQpLGE9W10sbj00LGk9MDtpPHI7aSsrKWEucHVzaCgkKHQsbikpLG4rPTQ7ZS5lbnRyeUNvdW50PXIsZS5lbnRyaWVzPWF9KSl9fSx7a2V5OiJtb29mIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZ2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3QubWZoZD1lLm1maGQoZS5maW5kQm94KHIsWyJtZmhkIl0sYSlbMF0pLHQudHJhZj1lLmZpbmRCb3gocixbInRyYWYiXSxhKS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBlLnRyYWYodCl9KSl9KSl9fSx7a2V5OiJtZmhkIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2UoZSwhMCwoZnVuY3Rpb24oZSx0KXtlLnNlcXVlbmNlTnVtYmVyPSQodCl9KSl9fSx7a2V5OiJ0cmFmIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZ2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3QudGZoZD1lLnRmaGQoZS5maW5kQm94KHIsWyJ0ZmhkIl0sYSlbMF0pLHQudGZkdD1lLnRmZHQoZS5maW5kQm94KHIsWyJ0ZmR0Il0sYSlbMF0pLHQudHJ1bj1lLnRydW4oZS5maW5kQm94KHIsWyJ0cnVuIl0sYSlbMF0pfSkpfX0se2tleToidHJ1biIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGdlKGUsITAsKGZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS52ZXJzaW9uLGE9ZS5mbGFncyxuPXQubGVuZ3RoLGk9ZS5zYW1wbGVDb3VudD0kKHQpLHM9NDtpZihuPnMmJjEmYSYmKGUuZGF0YU9mZnNldD0tKDErfiQodCxzKSkscys9NCksbj5zJiY0JmEmJihlLmZpcnN0U2FtcGxlRmxhZ3M9JCh0LHMpLHMrPTQpLGUuc2FtcGxlcz1bXSxuPnMpZm9yKHZhciBvLHU9MDt1PGk7dSsrKW89e30sMjU2JmEmJihvLmR1cmF0aW9uPSQodCxzKSxzKz00KSw1MTImYSYmKG8uc2l6ZT0kKHQscykscys9NCksMTAyNCZhJiYoby5mbGFncz0kKHQscykscys9NCksMjA0OCZhJiYoby5jdHM9cj8tKDErfiQodCxzKzQpKTokKHQscykscys9NCksZS5zYW1wbGVzLnB1c2gobyl9KSl9fSx7a2V5OiJ0ZmR0Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2UoZSwhMCwoZnVuY3Rpb24oZSx0KXsxPT09ZS52ZXJzaW9uP2UuYmFzZU1lZGlhRGVjb2RlVGltZT1lZSh0KTplLmJhc2VNZWRpYURlY29kZVRpbWU9JCh0KX0pKX19LHtrZXk6InByb2JlIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4hIWUuZmluZEJveCh0LFsiZnR5cCJdKX19LHtrZXk6InBhcnNlU2FtcGxlRmxhZ3MiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybntpc0xlYWRpbmc6KDEyJmVbMF0pPj4+MixkZXBlbmRzT246MyZlWzBdLGlzRGVwZW5kZWRPbjooMTkyJmVbMV0pPj4+NixoYXNSZWR1bmRhbmN5Oig0OCZlWzFdKT4+PjQscGFkZGluZ1ZhbHVlOigxNCZlWzFdKT4+PjEsaXNOb25TeW5jU2FtcGxlOjEmZVsxXSxkZWdyYWRhdGlvblByaW9yaXR5OmVbMl08PDh8ZVszXX19fSx7a2V5OiJtb292VG9UcmFjayIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBhLG4saT1lLnRyYWs7aWYoaSYmaS5sZW5ndGgpe3ZhciBzPWkuZmluZCgoZnVuY3Rpb24oZSl7dmFyIHQscjtyZXR1cm4idmlkZSI9PT0obnVsbD09PSh0PWUubWRpYSl8fHZvaWQgMD09PXR8fG51bGw9PT0ocj10LmhkbHIpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmhhbmRsZXJUeXBlKX0pKSxvPWkuZmluZCgoZnVuY3Rpb24oZSl7dmFyIHQscjtyZXR1cm4ic291biI9PT0obnVsbD09PSh0PWUubWRpYSl8fHZvaWQgMD09PXR8fG51bGw9PT0ocj10LmhkbHIpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmhhbmRsZXJUeXBlKX0pKTtpZihzJiZ0KXt2YXIgdSxjLGwsZCxmLGgscCx2PXQseT1udWxsPT09KHU9cy50a2hkKXx8dm9pZCAwPT09dT92b2lkIDA6dS50cmFja0lkO251bGwhPXkmJih2LmlkPXMudGtoZC50cmFja0lkKSx2LnRraGREdXJhdGlvbj1zLnRraGQuZHVyYXRpb24sdi5tdmhkRHVydGlvbj1lLm12aGQuZHVyYXRpb24sdi5tdmhkVGltZWNhbGU9ZS5tdmhkLnRpbWVzY2FsZSx2LnRpbWVzY2FsZT12LmZvcm1hdFRpbWVzY2FsZT1zLm1kaWEubWRoZC50aW1lc2NhbGUsdi5kdXJhdGlvbj1zLm1kaWEubWRoZC5kdXJhdGlvbnx8di5tdmhkRHVydGlvbi92Lm12aGRUaW1lY2FsZSp2LnRpbWVzY2FsZTt2YXIgbSxnLGssYixfLHcseCxBLEI9cy5tZGlhLm1pbmYuc3RibC5zdHNkLmVudHJpZXNbMF07aWYodi53aWR0aD1CLndpZHRoLHYuaGVpZ2h0PUIuaGVpZ2h0LEIucGFzcCYmKHYuc2FyUmF0aW89W0IucGFzcC5oU3BhY2luZyxCLnBhc3AudlNwYWNpbmddKSxCLmh2Y0Mpdi5jb2RlY1R5cGU9Uyx2LmNvZGVjPUIuaHZjQy5jb2RlYyx2LnZwcz1CLmh2Y0MudnBzLHYuc3BzPUIuaHZjQy5zcHMsdi5wcHM9Qi5odmNDLnBwcyx2Lmh2Y0M9Qi5odmNDLmRhdGE7ZWxzZXtpZighQi5hdmNDKXRocm93IG5ldyBFcnJvcigidW5rbm93biB2aWRlbyBzdHNkIGVudHJ5Iik7di5jb2RlYz1CLmF2Y0MuY29kZWMsdi5zcHM9Qi5hdmNDLnNwcyx2LnBwcz1CLmF2Y0MucHBzfWlmKHYucHJlc2VudD0hMCx2LmV4dD17fSx2LmV4dC5zdHNzPW51bGw9PT0oYz1zLm1kaWEpfHx2b2lkIDA9PT1jfHxudWxsPT09KGw9Yy5taW5mKXx8dm9pZCAwPT09bHx8bnVsbD09PShkPWwuc3RibCl8fHZvaWQgMD09PWQ/dm9pZCAwOmQuc3Rzcyx2LmV4dC5jdHRzPW51bGw9PT0oZj1zLm1kaWEpfHx2b2lkIDA9PT1mfHxudWxsPT09KGg9Zi5taW5mKXx8dm9pZCAwPT09aHx8bnVsbD09PShwPWguc3RibCl8fHZvaWQgMD09PXA/dm9pZCAwOnAuY3R0cyxCJiYiZW5jdiI9PT1CLnR5cGUpdi5pc1ZpZGVvRW5jcnlwdGlvbj0hMCxCLmRlZmF1bHRfS0lEPW51bGw9PT0obT1CLnNpbmYpfHx2b2lkIDA9PT1tfHxudWxsPT09KGc9bS5zY2hpKXx8dm9pZCAwPT09Zz92b2lkIDA6Zy50ZW5jLmRlZmF1bHRfS0lELEIuZGVmYXVsdF9Jc0VuY3J5cHRlZD1udWxsPT09KGs9Qi5zaW5mKXx8dm9pZCAwPT09a3x8bnVsbD09PShiPWsuc2NoaSl8fHZvaWQgMD09PWI/dm9pZCAwOmIudGVuYy5kZWZhdWx0X0lzRW5jcnlwdGVkLEIuZGVmYXVsdF9JVl9zaXplPW51bGw9PT0oXz1CLnNpbmYpfHx2b2lkIDA9PT1ffHxudWxsPT09KHc9Xy5zY2hpKXx8dm9pZCAwPT09dz92b2lkIDA6dy50ZW5jLmRlZmF1bHRfSVZfc2l6ZSx2LnZpZGVvU2VuYz1zLm1kaWEubWluZi5zdGJsLnNlbmMmJnMubWRpYS5taW5mLnN0Ymwuc2VuYy5zYW1wbGVzLEIuZGF0YV9mb3JtYXQ9bnVsbD09PSh4PUIuc2luZil8fHZvaWQgMD09PXh8fG51bGw9PT0oQT14LmZybWEpfHx2b2lkIDA9PT1BP3ZvaWQgMDpBLmRhdGFfZm9ybWF0LHYudXNlRU1FPWUudXNlRU1FLHYua2lkVmFsdWU9ZS5raWRWYWx1ZSx2LnBzc2g9ZS5wc3NoLHYuZW5jdj1CfWlmKG8mJnIpe3ZhciBULEMsVSxQLEkseixNLFIsTyxMPXIsVj1udWxsPT09KFQ9by50a2hkKXx8dm9pZCAwPT09VD92b2lkIDA6VC50cmFja0lkO251bGwhPVYmJihMLmlkPW8udGtoZC50cmFja0lkKSxMLnRraGREdXJhdGlvbj1vLnRraGQuZHVyYXRpb24sTC5tdmhkRHVydGlvbj1lLm12aGQuZHVyYXRpb24sTC5tdmhkVGltZWNhbGU9ZS5tdmhkLnRpbWVzY2FsZSxMLnRpbWVzY2FsZT1MLmZvcm1hdFRpbWVzY2FsZT1vLm1kaWEubWRoZC50aW1lc2NhbGUsTC5kdXJhdGlvbj1vLm1kaWEubWRoZC5kdXJhdGlvbnx8TC5tdmhkRHVydGlvbi9MLm12aGRUaW1lY2FsZSpMLnRpbWVzY2FsZTt2YXIgRixOLGosRyxILEsscSxXLFg9by5tZGlhLm1pbmYuc3RibC5zdHNkLmVudHJpZXNbMF07c3dpdGNoKEwuc2FtcGxlU2l6ZT1YLnNhbXBsZVNpemUsTC5zYW1wbGVSYXRlPVguc2FtcGxlUmF0ZSxMLmNoYW5uZWxDb3VudD1YLmNoYW5uZWxDb3VudCxMLnByZXNlbnQ9ITAsWC50eXBlKXtjYXNlImFsYXciOkwuY29kZWNUeXBlPUwuY29kZWM9RCxMLnNhbXBsZVJhdGU9OGUzO2JyZWFrO2Nhc2UidWxhdyI6TC5jb2RlY1R5cGU9TC5jb2RlYz1FLEwuc2FtcGxlUmF0ZT04ZTM7YnJlYWs7ZGVmYXVsdDpMLnNhbXBsZUR1cmF0aW9uPXNlLmdldEZyYW1lRHVyYXRpb24oTC5zYW1wbGVSYXRlLEwudGltZXNjYWxlKSxMLnNhbXBsZVJhdGVJbmRleD1zZS5nZXRSYXRlSW5kZXhCeVJhdGUoTC5zYW1wbGVSYXRlKSxMLm9iamVjdFR5cGU9KG51bGw9PT0oYT1YLmVzZHMpfHx2b2lkIDA9PT1hP3ZvaWQgMDphLm9iamVjdFR5cGUpfHwyLFguZXNkcyYmKEwuY29uZmlnPUFycmF5LmZyb20oWC5lc2RzLmNvbmZpZykpLEwuY29kZWM9KG51bGw9PT0obj1YLmVzZHMpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNvZGVjKXx8Im1wNGEuNDAuMiJ9aWYoTC5zYW1wbGVEdXJhdGlvbj1zZS5nZXRGcmFtZUR1cmF0aW9uKEwuc2FtcGxlUmF0ZSxMLnRpbWVzY2FsZSksTC5vYmplY3RUeXBlPShudWxsPT09KEM9WC5lc2RzKXx8dm9pZCAwPT09Qz92b2lkIDA6Qy5vYmplY3RUeXBlKXx8MixYLmVzZHMmJihYLmVzZHMuY29uZmlnP0wuY29uZmlnPUFycmF5LmZyb20oWC5lc2RzLmNvbmZpZyk6Y29uc29sZS53YXJuKCJlc2RzIGNvbmZpZyBpcyBudWxsIikpLEwuY29kZWM9KG51bGw9PT0oVT1YLmVzZHMpfHx2b2lkIDA9PT1VP3ZvaWQgMDpVLmNvZGVjKXx8Im1wNGEuNDAuMiIsTC5zYW1wbGVSYXRlSW5kZXg9c2UuZ2V0UmF0ZUluZGV4QnlSYXRlKEwuc2FtcGxlUmF0ZSksTC5leHQ9e30sTC5leHQuc3Rzcz1udWxsPT09KFA9by5tZGlhKXx8dm9pZCAwPT09UHx8bnVsbD09PShJPVAubWluZil8fHZvaWQgMD09PUl8fG51bGw9PT0oej1JLnN0YmwpfHx2b2lkIDA9PT16P3ZvaWQgMDp6LnN0c3MsTC5leHQuY3R0cz1udWxsPT09KE09by5tZGlhKXx8dm9pZCAwPT09TXx8bnVsbD09PShSPU0ubWluZil8fHZvaWQgMD09PVJ8fG51bGw9PT0oTz1SLnN0YmwpfHx2b2lkIDA9PT1PP3ZvaWQgMDpPLmN0dHMsTC5wcmVzZW50PSEwLFgmJiJlbmNhIj09PVgudHlwZSlMLmlzQXVkaW9FbmNyeXB0aW9uPSEwLFguZGF0YV9mb3JtYXQ9bnVsbD09PShGPVguc2luZil8fHZvaWQgMD09PUZ8fG51bGw9PT0oTj1GLmZybWEpfHx2b2lkIDA9PT1OP3ZvaWQgMDpOLmRhdGFfZm9ybWF0LFguZGVmYXVsdF9LSUQ9bnVsbD09PShqPVguc2luZil8fHZvaWQgMD09PWp8fG51bGw9PT0oRz1qLnNjaGkpfHx2b2lkIDA9PT1HP3ZvaWQgMDpHLnRlbmMuZGVmYXVsdF9LSUQsWC5kZWZhdWx0X0lzRW5jcnlwdGVkPW51bGw9PT0oSD1YLnNpbmYpfHx2b2lkIDA9PT1IfHxudWxsPT09KEs9SC5zY2hpKXx8dm9pZCAwPT09Sz92b2lkIDA6Sy50ZW5jLmRlZmF1bHRfSXNFbmNyeXB0ZWQsWC5kZWZhdWx0X0lWX3NpemU9bnVsbD09PShxPVguc2luZil8fHZvaWQgMD09PXF8fG51bGw9PT0oVz1xLnNjaGkpfHx2b2lkIDA9PT1XP3ZvaWQgMDpXLnRlbmMuZGVmYXVsdF9JVl9zaXplLEwuYXVkaW9TZW5jPW8ubWRpYS5taW5mLnN0Ymwuc2VuYyYmby5tZGlhLm1pbmYuc3RibC5zZW5jLnNhbXBsZXMsTC51c2VFTUU9ZS51c2VFTUUsTC5raWRWYWx1ZT1lLmtpZFZhbHVlLEwuZW5jYT1YfWlmKHImJihyLmlzVmlkZW9FbmNyeXB0aW9uPSEhdCYmdC5pc1ZpZGVvRW5jcnlwdGlvbiksdCYmKHQuaXNBdWRpb0VuY3J5cHRpb249ISFyJiZyLmlzQXVkaW9FbmNyeXB0aW9uKSxudWxsIT10JiZ0LmVuY3Z8fG51bGwhPXImJnIuZW5jYSl7dmFyIFksWixRPW51bGw9PXR8fG51bGw9PT0oWT10LmVuY3YpfHx2b2lkIDA9PT1ZP3ZvaWQgMDpZLmRlZmF1bHRfS0lELEo9bnVsbD09cnx8bnVsbD09PShaPXIuZW5jYSl8fHZvaWQgMD09PVo/dm9pZCAwOlouZGVmYXVsdF9LSUQsJD1RfHxKPyhRfHxKKS5qb2luKCIiKTpudWxsO3QmJih0LmtpZD0kKSxyJiYoci5raWQ9JCl9cmV0dXJuIHQmJih0LmZsYWdzPTM4NDEpLHImJihyLmZsYWdzPTE3OTMpLHt2aWRlb1RyYWNrOnQsYXVkaW9UcmFjazpyfX19fSx7a2V5OiJldmFsdWF0ZURlZmF1bHREdXJhdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBhLG49bnVsbD09dHx8bnVsbD09PShhPXQuc2FtcGxlcyl8fHZvaWQgMD09PWE/dm9pZCAwOmEubGVuZ3RoO3JldHVybiBuPzEwMjQqbi90LnRpbWVzY2FsZSplLnRpbWVzY2FsZS9yOjEwMjR9fSx7a2V5OiJtb29mVG9TYW1wbGVzIix2YWx1ZTpmdW5jdGlvbih0LHIsYSl7dmFyIG49e307cmV0dXJuIHQubWZoZCYmKHImJihyLnNlcXVlbmNlTnVtYmVyPXQubWZoZC5zZXF1ZW5jZU51bWJlciksYSYmKGEuc2VxdWVuY2VOdW1iZXI9dC5tZmhkLnNlcXVlbmNlTnVtYmVyKSksdC50cmFmLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBpPXQudGZoZCxzPXQudGZkdCxvPXQudHJ1bjtpZihpJiZvKXtzJiYociYmci5pZD09PWkudHJhY2tJZCYmKHIuYmFzZU1lZGlhRGVjb2RlVGltZT1zLmJhc2VNZWRpYURlY29kZVRpbWUpLGEmJmEuaWQ9PT1pLnRyYWNrSWQmJihhLmJhc2VNZWRpYURlY29kZVRpbWU9cy5iYXNlTWVkaWFEZWNvZGVUaW1lKSk7dmFyIHU9aS5kZWZhdWx0U2FtcGxlU2l6ZXx8MCxjPWkuZGVmYXVsdFNhbXBsZUR1cmF0aW9ufHxlLmV2YWx1YXRlRGVmYXVsdER1cmF0aW9uKHIsYSxvLnNhbXBsZXMubGVuZ3RofHxvLnNhbXBsZUNvdW50KSxsPW8uZGF0YU9mZnNldHx8MCxkPTAsZj0tMTtpZighby5zYW1wbGVzLmxlbmd0aCYmby5zYW1wbGVDb3VudCl7bltpLnRyYWNrSWRdPVtdO2Zvcih2YXIgaD0wO2g8by5zYW1wbGVDb3VudDtoKyspbltpLnRyYWNrSWRdLnB1c2goe29mZnNldDpsLGR0czpkLGR1cmF0aW9uOmMsc2l6ZTp1fSksZCs9YyxsKz11fWVsc2UgbltpLnRyYWNrSWRdPW8uc2FtcGxlcy5tYXAoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuKGU9e29mZnNldDpsLGR0czpkLHB0czpkKyhlLmN0c3x8MCksZHVyYXRpb246ZS5kdXJhdGlvbnx8YyxzaXplOmUuc2l6ZXx8dSxnb3BJZDpmLGtleWZyYW1lOjA9PT10fHxudWxsIT09ZS5mbGFncyYmdm9pZCAwIT09ZS5mbGFncyYmKDY1NTM2JmUuZmxhZ3MpPj4+MCE9NjU1MzZ9KS5rZXlmcmFtZSYmKGYrKyxlLmdvcElkPWYpLGQrPWUuZHVyYXRpb24sbCs9ZS5zaXplLGV9KSl9fSkpLG59fSx7a2V5OiJtb292VG9TYW1wbGVzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnRyYWs7aWYodCYmdC5sZW5ndGgpe3ZhciByPXQuZmluZCgoZnVuY3Rpb24oZSl7dmFyIHQscjtyZXR1cm4idmlkZSI9PT0obnVsbD09PSh0PWUubWRpYSl8fHZvaWQgMD09PXR8fG51bGw9PT0ocj10LmhkbHIpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmhhbmRsZXJUeXBlKX0pKSxhPXQuZmluZCgoZnVuY3Rpb24oZSl7dmFyIHQscjtyZXR1cm4ic291biI9PT0obnVsbD09PSh0PWUubWRpYSl8fHZvaWQgMD09PXR8fG51bGw9PT0ocj10LmhkbHIpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmhhbmRsZXJUeXBlKX0pKTtpZihyfHxhKXt2YXIgbixpO2lmKHIpe3ZhciBzLG8sdT1udWxsPT09KHM9ci5tZGlhKXx8dm9pZCAwPT09c3x8bnVsbD09PShvPXMubWluZil8fHZvaWQgMD09PW8/dm9pZCAwOm8uc3RibDtpZighdSlyZXR1cm47dmFyIGM9dS5zdHRzLGw9dS5zdHNjLGQ9dS5zdHN6LGY9dS5zdGNvLGg9dS5zdHNzLHA9dS5jdHRzO2lmKCEoYyYmbCYmZCYmZiYmaCkpcmV0dXJuO249dmUoYyxsLGQsZixwLGgpfWlmKGEpe3ZhciB2LHksbSxnPW51bGw9PT0odj1hLm1kaWEpfHx2b2lkIDA9PT12fHxudWxsPT09KHk9di5taW5mKXx8dm9pZCAwPT09eT92b2lkIDA6eS5zdGJsO2lmKCFnKXJldHVybjt2YXIgaz1udWxsPT09KG09YS5tZGlhLm1kaGQpfHx2b2lkIDA9PT1tP3ZvaWQgMDptLnRpbWVzY2FsZSxiPWcuc3R0cyxfPWcuc3RzYyx3PWcuc3Rzeix4PWcuc3RjbztpZighKGsmJmImJl8mJncmJngpKXJldHVybjtpPXZlKGIsXyx3LHgpfXJldHVybnt2aWRlb1NhbXBsZXM6bixhdWRpb1NhbXBsZXM6aX19fX19XSksZX0oKTtmdW5jdGlvbiB2ZShlLHQscixhLG4saSl7dmFyIHMsbyx1LGM9W10sbD1udWxsPT1uP3ZvaWQgMDpuLmVudHJpZXMsZD10LmVudHJpZXMsZj1hLmVudHJpZXMsaD1yLmVudHJ5U2l6ZXMscD1udWxsPT1pP3ZvaWQgMDppLmVudHJpZXM7cCYmKHM9e30scC5mb3JFYWNoKChmdW5jdGlvbihlKXtzW2UtMV09ITB9KSkpLGwmJihvPVtdLGwuZm9yRWFjaCgoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuY291bnQscj1lLm9mZnNldCxhPTA7YTx0O2ErKylvLnB1c2gocil9KSkpO3ZhciB2PS0xLHk9MCxtPTAsZz0wLGs9MCxiPTAsXz1kWzBdLnNhbXBsZXNQZXJDaHVuayx3PWRbMV0/ZFsxXS5maXJzdENodW5rLTE6MS8wO3JldHVybiBlLmVudHJpZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuY291bnQsYT1lLmRlbHRhLG49MDtuPHQ7bisrKXU9e2R0czp5LGR1cmF0aW9uOmEsc2l6ZTpoW21dfHxyLnNhbXBsZVNpemUsb2Zmc2V0OmZbZ10rYixpbmRleDptfSxwJiYodS5rZXlmcmFtZT1zW21dLHUua2V5ZnJhbWUmJnYrKyx1LmdvcElkPXYpLG8mJm08by5sZW5ndGgmJih1LnB0cz11LmR0cytvW21dKSxjLnB1c2godSkseSs9YSwrK208Xz9iKz11LnNpemU6KGcrKyxiPTAsZz49dyYmKGsrKyx3PWRbaysxXT9kW2srMV0uZmlyc3RDaHVuay0xOjEvMCksXys9ZFtrXS5zYW1wbGVzUGVyQ2h1bmspfSkpLGN9ZnVuY3Rpb24geWUoZSx0KXtyZXR1cm4gZS5kYXRhUmVmZXJlbmNlSW5kZXg9Sih0LDYpLGUud2lkdGg9Sih0LDI0KSxlLmhlaWdodD1KKHQsMjYpLGUuaG9yaXpyZXNvbHV0aW9uPSQodCwyOCksZS52ZXJ0cmVzb2x1dGlvbj0kKHQsMzIpLGUuZnJhbWVDb3VudD1KKHQsNDApLGUuZGVwdGg9Sih0LDc0KSw3OH1mdW5jdGlvbiBtZShlLHQpe3JldHVybiBlLmRhdGFSZWZlcmVuY2VJbmRleD1KKHQsNiksZS5jaGFubmVsQ291bnQ9Sih0LDE2KSxlLnNhbXBsZVNpemU9Sih0LDE4KSxlLnNhbXBsZVJhdGU9JCh0LDI0KS82NTUzNiwyOH1mdW5jdGlvbiBnZShlLHQscil7aWYoZSl7aWYoZS5zaXplIT09ZS5kYXRhLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoImJveCAiLmNvbmNhdChlLnR5cGUsIiBzaXplICE9PSBkYXRhLmxlbmd0aCIpKTt2YXIgYT17c3RhcnQ6ZS5zdGFydCxzaXplOmUuc2l6ZSxoZWFkZXJTaXplOmUuaGVhZGVyU2l6ZSx0eXBlOmUudHlwZX07cmV0dXJuIHQmJihhLnZlcnNpb249ZS5kYXRhW2UuaGVhZGVyU2l6ZV0sYS5mbGFncz1mdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MDtyZXR1cm4oZVt0XTw8MTYpKyhlW3QrMV08PDgpKyhlW3QrMl18fDApfShlLmRhdGEsZS5oZWFkZXJTaXplKzEpLGEuaGVhZGVyU2l6ZSs9NCkscihhLGUuZGF0YS5zdWJhcnJheShhLmhlYWRlclNpemUpLGEuc3RhcnQrYS5oZWFkZXJTaXplKSxhfX12YXIga2U9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgYT1TdHJpbmcociksbj10Pj4wLGk9TWF0aC5jZWlsKG4vYS5sZW5ndGgpLHM9W10sbz1TdHJpbmcoZSk7aS0tOylzLnB1c2goYSk7cmV0dXJuIHMuam9pbigiIikuc3Vic3RyaW5nKDAsbi1vLmxlbmd0aCkrb30sYmU9ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KHQpLGE9MDthPHQ7YSsrKXJbYV09YXJndW1lbnRzW2FdO3JldHVybiByLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UucHVzaChrZShOdW1iZXIodCkudG9TdHJpbmcoMTYpLDIsMCkpfSkpLGVbMF19O2Z1bmN0aW9uIF9lKGUpe2Zvcih2YXIgdD0wLHI9YXJndW1lbnRzLmxlbmd0aCxhPW5ldyBBcnJheShyPjE/ci0xOjApLG49MTtuPHI7bisrKWFbbi0xXT1hcmd1bWVudHNbbl07YS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Kz1lLmxlbmd0aH0pKTt2YXIgaT1uZXcgZSh0KSxzPTA7cmV0dXJuIGEuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aS5zZXQoZSxzKSxzKz1lLmxlbmd0aH0pKSxpfXZhciB3ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtyKHRoaXMsZSksdGhpcy5idWZmZXI9bmV3IFVpbnQ4QXJyYXkoMCl9cmV0dXJuIG4oZSxbe2tleToid3JpdGUiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KHQpLGE9MDthPHQ7YSsrKXJbYV09YXJndW1lbnRzW2FdO3IuZm9yRWFjaCgoZnVuY3Rpb24odCl7dD9lLmJ1ZmZlcj1fZShVaW50OEFycmF5LGUuYnVmZmVyLHQpOndpbmRvdy5jb25zb2xlLndhcm4odCl9KSl9fV0sW3trZXk6IndyaXRlVWludDE2Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoW2U+PjgmMjU1LDI1NSZlXSl9fSx7a2V5OiJ3cml0ZVVpbnQzMiIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBVaW50OEFycmF5KFtlPj4yNCxlPj4xNiYyNTUsZT4+OCYyNTUsMjU1JmVdKX19XSksZX0oKSx4ZT1NYXRoLnBvdygyLDMyKS0xLFNlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3IodGhpcyxlKX1yZXR1cm4gbihlLG51bGwsW3trZXk6ImJveCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgscj1uZXcgQXJyYXkodD4xP3QtMTowKSxhPTE7YTx0O2ErKylyW2EtMV09YXJndW1lbnRzW2FdO3ZhciBuPTgrKHI9ci5maWx0ZXIoQm9vbGVhbikpLnJlZHVjZSgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSt0LmJ5dGVMZW5ndGh9KSwwKSxpPW5ldyBVaW50OEFycmF5KG4pO2lbMF09bj4+MjQmMjU1LGlbMV09bj4+MTYmMjU1LGlbMl09bj4+OCYyNTUsaVszXT0yNTUmbixpLnNldChlLDQpO3ZhciBzPTg7cmV0dXJuIHIuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aS5zZXQoZSxzKSxzKz1lLmJ5dGVMZW5ndGh9KSksaX19LHtrZXk6ImZ0eXAiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0LmZpbmQoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGU9PT1iJiZlLmNvZGVjVHlwZT09PVN9KSk/ZS5GVFlQSEVWMTplLkZUWVBBVkMxfX0se2tleToiaW5pdFNlZ21lbnQiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBaKGUuZnR5cCh0KSxlLm1vb3YodCkpfX0se2tleToicHNzaCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9bmV3IFVpbnQ4QXJyYXkoWzEsMCwwLDBdLmNvbmNhdChbMTYsMTE5LDIzOSwyMzYsMTkyLDE3OCw3NywyLDE3MiwyMjcsNjAsMzAsODIsMjI2LDI1MSw3NV0sWzAsMCwwLDFdLGFlKHQua2lkKSxbMCwwLDAsMF0pKTtyZXR1cm4gZS5ib3goZS50eXBlcy5wc3NoLHIpfX0se2tleToibW9vdiIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodFswXS51c2VFTUUmJih0WzBdLmVuY3Z8fHRbMF0uZW5jYSkpe3RbMF0ucHNzaHx8KHRbMF0ucHNzaD17a2lkOnRbMF0ua2lkfSk7dmFyIHI9dGhpcy5wc3NoKHRbMF0ucHNzaCk7cmV0dXJuIGUuYm94LmFwcGx5KGUsW2UudHlwZXMubW9vdixlLm12aGQodFswXS5tdmhkRHVydGlvbnx8dFswXS5kdXJhdGlvbix0WzBdLm12aGRUaW1lY2FsZXx8dFswXS50aW1lc2NhbGUpLGUubXZleCh0KV0uY29uY2F0KHkodC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBlLnRyYWsodCl9KSkpLFtyXSkpfXJldHVybiBlLmJveC5hcHBseShlLFtlLnR5cGVzLm1vb3YsZS5tdmhkKHRbMF0ubXZoZER1cnRpb258fHRbMF0uZHVyYXRpb24sdFswXS5tdmhkVGltZWNhbGV8fHRbMF0udGltZXNjYWxlKV0uY29uY2F0KHkodC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBlLnRyYWsodCl9KSkpLFtlLm12ZXgodCldKSl9fSx7a2V5OiJtdmhkIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06OWU0LGE9ZS5ib3goZS50eXBlcy5tdmhkLG5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCxyPj4yNCYyNTUscj4+MTYmMjU1LHI+PjgmMjU1LDI1NSZyLHQ+PjI0JjI1NSx0Pj4xNiYyNTUsdD4+OCYyNTUsMjU1JnQsMCwxLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsNjQsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMjU1LDI1NSwyNTUsMjU1XSkpO3JldHVybiBhfX0se2tleToidHJhayIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMudHJhayxlLnRraGQodC5pZCx0LnRraGREdXJhdGlvbnx8MCx0LndpZHRoLHQuaGVpZ2h0KSxlLm1kaWEodCkpfX0se2tleToidGtoZCIsdmFsdWU6ZnVuY3Rpb24odCxyKXt2YXIgYT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MCxuPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdP2FyZ3VtZW50c1szXTowLGk9ZS5ib3goZS50eXBlcy50a2hkLG5ldyBVaW50OEFycmF5KFswLDAsMCw3LDAsMCwwLDAsMCwwLDAsMCx0Pj4yNCYyNTUsdD4+MTYmMjU1LHQ+PjgmMjU1LDI1NSZ0LDAsMCwwLDAscj4+MjQmMjU1LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmciwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCw2NCwwLDAsMCxhPj44JjI1NSwyNTUmYSwwLDAsbj4+OCYyNTUsMjU1Jm4sMCwwXSkpO3JldHVybiBpfX0se2tleToibWRpYSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMubWRpYSxlLm1kaGQodC5kdXJhdGlvbix0LnRpbWVzY2FsZSksZS5oZGxyKHQudHlwZSksZS5taW5mKHQpKX19LHtrZXk6Im1kaGQiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTo5ZTQsYT1lLmJveChlLnR5cGVzLm1kaGQsbmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLHI+PjI0JjI1NSxyPj4xNiYyNTUscj4+OCYyNTUsMjU1JnIsdD4+MjQmMjU1LHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdCw4NSwxOTYsMCwwXSkpO3JldHVybiBhfX0se2tleToiaGRsciIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMuaGRscixlLkhETFJfVFlQRVNbdF0pfX0se2tleToibWluZiIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMubWluZix0LnR5cGU9PT1iP2UuVk1IRDplLlNNSEQsZS5ESU5GLGUuc3RibCh0KSl9fSx7a2V5OiJzdGJsIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj1bXTtyZXR1cm4gdCYmdC5leHQmJnQuZXh0LnN0c3MmJnIucHVzaChlLnN0c3ModC5leHQuc3Rzcy5lbnRyaWVzKSksZS5ib3goZS50eXBlcy5zdGJsLGUuc3RzZCh0KSxlLlNUVFMsclswXSxlLlNUU0MsZS5TVFNaLGUuU1RDTyl9fSx7a2V5OiJzdHNkIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcjtyZXR1cm4gcj0iYXVkaW8iPT09dC50eXBlP3QudXNlRU1FJiZ0LmVuY2E/ZS5lbmNhKHQpOmUubXA0YSh0KTp0LnVzZUVNRSYmdC5lbmN2P2UuZW5jdih0KTplLmF2YzFoZXYxKHQpLGUuYm94KGUudHlwZXMuc3RzZCxuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwxXSkscil9fSx7a2V5OiJlbmNhIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj10LmVuY2EuY2hhbm5lbENvdW50LGE9dC5lbmNhLnNhbXBsZVJhdGUsbj1uZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLHIsMCwxNiwwLDAsMCwwLGE+PjgmMjU1LDI1NSZhLDAsMF0pLGk9ZS5lc2RzKHQuY29uZmlnKSxzPWUuc2luZih0LmVuY2EpO3JldHVybiBlLmJveChlLnR5cGVzLmVuY2EsbixpLHMpfX0se2tleToiZW5jdiIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHIsYSxuPXQuc3BzLmxlbmd0aD4wP3Quc3BzWzBdOltdLGk9dC5wcHMubGVuZ3RoPjA/dC5wcHNbMF06W10scz10LndpZHRoLG89dC5oZWlnaHQsdT10LnNhclJhdGlvWzBdLGM9dC5zYXJSYXRpb1sxXSxsPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCxzPj44JjI1NSwyNTUmcyxvPj44JjI1NSwyNTUmbywwLDcyLDAsMCwwLDcyLDAsMCwwLDAsMCwwLDAsMSwxOCwxMDAsOTcsMTA1LDEwOCwxMjEsMTA5LDExMSwxMTYsMTA1LDExMSwxMTAsNDcsMTA0LDEwOCwxMTUsNDYsMTA2LDExNSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMjQsMTcsMTddKSxkPW5ldyBVaW50OEFycmF5KChyPShhPVsxLG5bMV0sblsyXSxuWzNdLDI1NSwyMjUsbi5sZW5ndGg+Pj44JjI1NSwyNTUmbi5sZW5ndGhdKS5jb25jYXQuYXBwbHkoYSx5KG4pKS5jb25jYXQoWzEsaS5sZW5ndGg+Pj44JjI1NSwyNTUmaS5sZW5ndGhdKSkuY29uY2F0LmFwcGx5KHIseShpKSkpLGY9bmV3IFVpbnQ4QXJyYXkoWzAsMCw4OCw1NywwLDE1LDIwMCwxOTIsMCw0LDg2LDcyXSksaD1lLnNpbmYodC5lbmN2KSxwPW5ldyBVaW50OEFycmF5KFt1Pj4yNCx1Pj4xNiYyNTUsdT4+OCYyNTUsMjU1JnUsYz4+MjQsYz4+MTYmMjU1LGM+PjgmMjU1LDI1NSZjXSk7cmV0dXJuIGUuYm94KGUudHlwZXMuZW5jdixsLGUuYm94KGUudHlwZXMuYXZjQyxkKSxlLmJveChlLnR5cGVzLmJ0cnQsZiksaCxlLmJveChlLnR5cGVzLnBhc3AscCkpfX0se2tleToic2NoaSIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9bmV3IFVpbnQ4QXJyYXkoW10pLGE9ZS50ZW5jKHQpO3JldHVybiBlLmJveChlLnR5cGVzLnNjaGkscixhKX19LHtrZXk6InRlbmMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwyNTUmdC5kZWZhdWx0X0lzRW5jcnlwdGVkLDI1NSZ0LmRlZmF1bHRfSVZfc2l6ZV0uY29uY2F0KGFlKHQuZGVmYXVsdF9LSUQpKSk7cmV0dXJuIGUuYm94KGUudHlwZXMudGVuYyxyKX19LHtrZXk6InNpbmYiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPW5ldyBVaW50OEFycmF5KFtdKSxhPW5ldyBVaW50OEFycmF5KFt0LmRhdGFfZm9ybWF0LmNoYXJDb2RlQXQoMCksdC5kYXRhX2Zvcm1hdC5jaGFyQ29kZUF0KDEpLHQuZGF0YV9mb3JtYXQuY2hhckNvZGVBdCgyKSx0LmRhdGFfZm9ybWF0LmNoYXJDb2RlQXQoMyldKSxuPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDk5LDEwMSwxMTAsOTksMCwxLDAsMF0pLGk9ZS5zY2hpKHQpO3JldHVybiBlLmJveChlLnR5cGVzLnNpbmYscixlLmJveChlLnR5cGVzLmZybWEsYSksZS5ib3goZS50eXBlcy5zY2htLG4pLGkpfX0se2tleToiYXZjMWhldjEiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQuY29kZWNUeXBlPT09UyxhPXI/ZS50eXBlcy5odmMxOmUudHlwZXMuYXZjMSxuPXI/ZS5odmNDKHQpOmUuYXZjQyh0KSxpPVtuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsdC53aWR0aD4+OCYyNTUsMjU1JnQud2lkdGgsdC5oZWlnaHQ+PjgmMjU1LDI1NSZ0LmhlaWdodCwwLDcyLDAsMCwwLDcyLDAsMCwwLDAsMCwwLDAsMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwyNCwxNywxN10pLG5dO3JldHVybiByP2kucHVzaChlLmJveChlLnR5cGVzLmZpZWwsbmV3IFVpbnQ4QXJyYXkoWzEsMF0pKSk6dC5zYXJSYXRpbyYmdC5zYXJSYXRpby5sZW5ndGg+MSYmaS5wdXNoKGUucGFzcCh0LnNhclJhdGlvKSksZS5ib3guYXBwbHkoZSxbYV0uY29uY2F0KGkpKX19LHtrZXk6ImF2Y0MiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByLGEsbixpPVtdLHM9W107cmV0dXJuIHQuc3BzLmZvckVhY2goKGZ1bmN0aW9uKGUpe249ZS5ieXRlTGVuZ3RoLGkucHVzaChuPj4+OCYyNTUpLGkucHVzaCgyNTUmbiksaS5wdXNoLmFwcGx5KGkseShlKSl9KSksdC5wcHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bj1lLmJ5dGVMZW5ndGgscy5wdXNoKG4+Pj44JjI1NSkscy5wdXNoKDI1NSZuKSxzLnB1c2guYXBwbHkocyx5KGUpKX0pKSxlLmJveChlLnR5cGVzLmF2Y0MsbmV3IFVpbnQ4QXJyYXkoKHI9KGE9WzEsaVszXSxpWzRdLGlbNV0sMjU1LDIyNHx0LnNwcy5sZW5ndGhdKS5jb25jYXQuYXBwbHkoYSxpKS5jb25jYXQoW3QucHBzLmxlbmd0aF0pKS5jb25jYXQuYXBwbHkocixzKSkpfX0se2tleToiaHZjQyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9dC5odmNDO2lmKHIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8ciBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpcmV0dXJuIHI7dmFyIGEsbj10LnZwcyxpPXQuc3BzLHM9dC5wcHM7aWYocil7dmFyIG89ci5nZW5lcmFsUHJvZmlsZUNvbXBhdGliaWxpdHlGbGFncyx1PXIuZ2VuZXJhbENvbnN0cmFpbnRJbmRpY2F0b3JGbGFncyxjPShuLmxlbmd0aCYmMSkrKGkubGVuZ3RoJiYxKSsocy5sZW5ndGgmJjEpO2E9WzEsci5nZW5lcmFsUHJvZmlsZVNwYWNlPDw2fHIuZ2VuZXJhbFRpZXJGbGFnPDw1fHIuZ2VuZXJhbFByb2ZpbGVJZGMsbz4+PjI0LG8+Pj4xNixvPj4+OCxvLHVbMF0sdVsxXSx1WzJdLHVbM10sdVs0XSx1WzVdLHIuZ2VuZXJhbExldmVsSWRjLDI0MCwwLDI1MiwyNTJ8ci5jaHJvbWFGb3JtYXRJZGMsMjQ4fHIuYml0RGVwdGhMdW1hTWludXM4LDI0OHxyLmJpdERlcHRoQ2hyb21hTWludXM4LDAsMCxyLm51bVRlbXBvcmFsTGF5ZXJzPDwzfHIudGVtcG9yYWxJZE5lc3RlZDw8MnwzLGNdO3ZhciBsPWZ1bmN0aW9uKGUpe3ZhciB0O2EucHVzaChlLmxlbmd0aD4+OCxlLmxlbmd0aCksKHQ9YSkucHVzaC5hcHBseSh0LHkoZSkpfTtuLmxlbmd0aCYmKGEucHVzaCgxNjAsMCxuLmxlbmd0aCksbi5mb3JFYWNoKGwpKSxpLmxlbmd0aCYmKGEucHVzaCgxNjEsMCxpLmxlbmd0aCksaS5mb3JFYWNoKGwpKSxzLmxlbmd0aCYmKGEucHVzaCgxNjIsMCxzLmxlbmd0aCkscy5mb3JFYWNoKGwpKX1lbHNlIGE9WzEsMSw5NiwwLDAsMCwxNDQsMCwwLDAsMCwwLDkzLDI0MCwwLDI1MiwyNTMsMjQ4LDI0OCwwLDAsMTUsMywxNjAsMCwxLDAsMjQsNjQsMSwxMiwxLDI1NSwyNTUsMSw5NiwwLDAsMywwLDE0NCwwLDAsMywwLDAsMywwLDkzLDE1MywxNTIsOSwxNjEsMCwxLDAsNDUsNjYsMSwxLDEsOTYsMCwwLDMsMCwxNDQsMCwwLDMsMCwwLDMsMCw5MywxNjAsMiwxMjgsMTI4LDQ1LDIyLDg5LDE1MywxNjQsMTQ3LDQzLDE1NCwxMjgsMTI4LDEyOCwxMzAsMCwwLDMsMCwyLDAsMCwzLDAsNTAsMTYsMTYyLDAsMSwwLDcsNjgsMSwxOTMsMTE0LDE4MCw5OCw2NF07cmV0dXJuIGUuYm94KGUudHlwZXMuaHZjQyxuZXcgVWludDhBcnJheShhKSl9fSx7a2V5OiJwYXNwIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj12KHQsMiksYT1yWzBdLG49clsxXTtyZXR1cm4gZS5ib3goZS50eXBlcy5wYXNwLG5ldyBVaW50OEFycmF5KFthPj4yNCxhPj4xNiYyNTUsYT4+OCYyNTUsMjU1JmEsbj4+MjQsbj4+MTYmMjU1LG4+PjgmMjU1LDI1NSZuXSkpfX0se2tleToibXA0YSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMubXA0YSxuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLHQuY2hhbm5lbENvdW50LDAsMTYsMCwwLDAsMCx0LnNhbXBsZVJhdGU+PjgmMjU1LDI1NSZ0LnNhbXBsZVJhdGUsMCwwXSksdC5jb25maWcubGVuZ3RoP2UuZXNkcyh0LmNvbmZpZyk6dm9pZCAwKX19LHtrZXk6ImVzZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQubGVuZ3RoO3JldHVybiBlLmJveChlLnR5cGVzLmVzZHMsbmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMywyMytyLDAsMCwwLDQsMTUrciw2NCwyMSwwLDYsMCwwLDAsMjE4LDE5MiwwLDAsMjE4LDE5Miw1XS5jb25jYXQoW3JdKS5jb25jYXQodCkuY29uY2F0KFs2LDEsMl0pKSl9fSx7a2V5OiJtdmV4Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3guYXBwbHkoZSxbZS50eXBlcy5tdmV4XS5jb25jYXQoeSh0Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIGUudHJleCh0LmlkKX0pKSkpKX19LHtrZXk6InRyZXgiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBlLmJveChlLnR5cGVzLnRyZXgsbmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsdD4+MjQsdD4+MTYmMjU1LHQ+PjgmMjU1LDI1NSZ0LDAsMCwwLDEsMCwwLDAsMCwwLDAsMCwwLDAsMSwwLDFdKSl9fSx7a2V5OiJ0cmV4MSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMudHJleCxuZXcgVWludDhBcnJheShbMCwwLDAsMCx0Pj4yNCx0Pj4xNiYyNTUsdD4+OCYyNTUsMjU1JnQsMCwwLDAsMSwwLDAsMiwwLDAsMCwwLDAsMCwxLDAsMF0pKX19LHtrZXk6InRyZXgyIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlcy50cmV4LG5ldyBVaW50OEFycmF5KFswLDAsMCwwLHQ+PjI0LHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdCwwLDAsMCwxLDAsMCw0LDAsMCwwLDAsMCwyLDAsMCwwXSkpfX0se2tleToibW9vZiIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94LmFwcGx5KGUsW2UudHlwZXMubW9vZixlLm1maGQodFswXS5zYW1wbGVzP3RbMF0uc2FtcGxlc1swXS5nb3BJZDowKV0uY29uY2F0KHkodC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBlLnRyYWYodCl9KSkpKSl9fSx7a2V5OiJtZmhkIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlcy5tZmhkLG5ldyBVaW50OEFycmF5KFswLDAsMCwwLHQ+PjI0LHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdF0pKX19LHtrZXk6InRyYWYiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPWUudGZoZCh0LmlkKSxhPWUudGZkdCh0LHQuYmFzZU1lZGlhRGVjb2RlVGltZSksbj0wO2lmKHQuaXNWaWRlbyYmdC52aWRlb1NlbmMmJnQudmlkZW9TZW5jLmZvckVhY2goKGZ1bmN0aW9uKGUpe24rPTgsZS5zdWJzYW1wbGVzJiZlLnN1YnNhbXBsZXMubGVuZ3RoJiYobis9MixuKz02KmUuc3Vic2FtcGxlcy5sZW5ndGgpfSkpLHQudmlkZW9TZW5jTGVuZ3RoPW4sdC51c2VFTUUmJih0LmlzVmlkZW9FbmNyeXB0aW9ufHx0LmlzQXVkaW9FbmNyeXB0aW9uKSl7aWYodC5pc1ZpZGVvRW5jcnlwdGlvbil7aWYodC5pc1ZpZGVvKXt2YXIgaT1lLnNhaXoodCkscz1lLnNhaW8odCksbz1lLnRydW4xKHQpLHU9ZS5zZW5jKHQpO3JldHVybiBlLmJveChlLnR5cGVzLnRyYWYscixhLGkscyxvLHUpfWlmKHQuaXNBdWRpb0VuY3J5cHRpb24pe3ZhciBjPWUuc2JncCgpLGw9ZS5zYWl6KHQpLGQ9ZS5zYWlvKHQpLGY9ZS5zZW5jKHQpLGg9ZS50cnVuMSh0KTtyZXR1cm4gZS5ib3goZS50eXBlcy50cmFmLHIsYSxjLGwsZCxmLGgpfXZhciBwPWUuc2JncCgpLHY9ZS50cnVuMSh0KTtyZXR1cm4gZS5ib3goZS50eXBlcy50cmFmLHIsYSxwLHYpfWlmKHQuaXNWaWRlbyl7dmFyIHk9ZS50cnVuMSh0KTtyZXR1cm4gZS5ib3goZS50eXBlcy50cmFmLHIsYSx5KX12YXIgbT1lLnNiZ3AoKSxnPWUuc2Fpeih0KSxrPWUuc2Fpbyh0KSxiPWUuc2VuYyh0KSxfPWUudHJ1bjEodCk7cmV0dXJuIGUuYm94KGUudHlwZXMudHJhZixyLGEsbSxnLGssYixfKX12YXIgdz1lLnNkdHAodCk7cmV0dXJuIGUuYm94KGUudHlwZXMudHJhZixyLGEsdyxlLnRydW4odC5zYW1wbGVzLHcuYnl0ZUxlbmd0aCs3NikpfX0se2tleToic2R0cCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9bmV3IHdlO3JldHVybiB0LnNhbXBsZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ci53cml0ZShuZXcgVWludDhBcnJheSh0LmlzVmlkZW8/W2Uua2V5ZnJhbWU/MzI6MTZdOlsxNl0pKX0pKSxlLmJveChlLnR5cGVzLnNkdHAsdGhpcy5leHRlbnNpb24oMCwwKSxyLmJ1ZmZlcil9fSx7a2V5OiJ0cnVuMSIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9bmV3IHdlLGE9d2Uud3JpdGVVaW50MzIodC5zYW1wbGVzLmxlbmd0aCksbj1udWxsO2lmKHQuaXNWaWRlbyl7dmFyIGk9dC52aWRlb1NlbmNMZW5ndGg7bj13ZS53cml0ZVVpbnQzMigxNip0LnNhbXBsZXMubGVuZ3RoK2krMTQ5KSwhdC5pc1ZpZGVvRW5jcnlwdGlvbiYmdC5pc0F1ZGlvRW5jcnlwdGlvbiYmKG49d2Uud3JpdGVVaW50MzIoMTYqdC5zYW1wbGVzLmxlbmd0aCs5MikpfWVsc2V7dmFyIHM9MTIqdC5zYW1wbGVzLmxlbmd0aCsxMjQ7dC5pc0F1ZGlvRW5jcnlwdGlvbiYmKHM9MTIqdC5zYW1wbGVzLmxlbmd0aCs4KnQuYXVkaW9TZW5jLmxlbmd0aCsxNzcpLG49d2Uud3JpdGVVaW50MzIocyl9cmV0dXJuIHQuc2FtcGxlcy5mb3JFYWNoKChmdW5jdGlvbihlKXtyLndyaXRlKHdlLndyaXRlVWludDMyKGUuZHVyYXRpb24pKSxyLndyaXRlKHdlLndyaXRlVWludDMyKGUuc2l6ZSkpLHIud3JpdGUod2Uud3JpdGVVaW50MzIoZS5rZXlmcmFtZT8zMzU1NDQzMjo2NTUzNikpLHQuaXNWaWRlbyYmci53cml0ZSh3ZS53cml0ZVVpbnQzMihlLmN0cz9lLmN0czowKSl9KSksZS5ib3goZS50eXBlcy50cnVuLHRoaXMuZXh0ZW5zaW9uKDAsdC5mbGFncyksYSxuLHIuYnVmZmVyKX19LHtrZXk6InNlbmMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPW5ldyB3ZSxhPXQuc2FtcGxlcy5sZW5ndGgsbj10LmlzVmlkZW8/MTY6OCxpPXQuaXNWaWRlbz8yOjAscz1bXSxvPTA7cmV0dXJuIHQuaXNWaWRlbz8ocz10LnZpZGVvU2VuYyxvPXQudmlkZW9TZW5jTGVuZ3RoKTpzPXQuYXVkaW9TZW5jLG89b3x8biphLHIud3JpdGUod2Uud3JpdGVVaW50MzIoMTYrbyksZS50eXBlcy5zZW5jLHRoaXMuZXh0ZW5zaW9uKDAsaSkpLHIud3JpdGUod2Uud3JpdGVVaW50MzIoYSkpLHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxlLkluaXRpYWxpemF0aW9uVmVjdG9yLmxlbmd0aDt0Kyspci53cml0ZShuZXcgVWludDhBcnJheShbZS5Jbml0aWFsaXphdGlvblZlY3Rvclt0XV0pKTtlLnN1YnNhbXBsZXMmJmUuc3Vic2FtcGxlcy5sZW5ndGgmJihyLndyaXRlKHdlLndyaXRlVWludDE2KGUuc3Vic2FtcGxlcy5sZW5ndGgpKSxlLnN1YnNhbXBsZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ci53cml0ZSh3ZS53cml0ZVVpbnQxNihlLkJ5dGVzT2ZDbGVhckRhdGEpKSxyLndyaXRlKHdlLndyaXRlVWludDMyKGUuQnl0ZXNPZlByb3RlY3RlZERhdGEpKX0pKSl9KSksci5idWZmZXJ9fSx7a2V5OiJzYWlvIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj0xMip0LnNhbXBsZXMubGVuZ3RoKzE0MTshdC5pc1ZpZGVvJiZ0LmlzQXVkaW9FbmNyeXB0aW9uJiYocj0xNDkpO3ZhciBhPW5ldyBVaW50OEFycmF5KFsxLDAsMCwwLDAsMCwwLDEsMCwwLDAsMCxyPj4yNCYyNTUscj4+MTYmMjU1LHI+PjgmMjU1LDI1NSZyXSk7cmV0dXJuIGUuYm94KGUudHlwZXMuc2FpbyxhKX19LHtrZXk6InNhaXoiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQuc2FtcGxlcy5sZW5ndGgsYT1uZXcgVWludDhBcnJheShbMCwwLDAsMCwxNixyPj4yNCYyNTUscj4+MTYmMjU1LHI+PjgmMjU1LDI1NSZyXSk7cmV0dXJuIGUuYm94KGUudHlwZXMuc2FpeixhKX19LHtrZXk6InNiZ3AiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IFVpbnQ4QXJyYXkoWzExNCwxMTEsMTA4LDEwOCwwLDAsMCwxLDAsMCwxLDI1LDAsMCwwLDFdKTtyZXR1cm4gZS5ib3goZS50eXBlcy5zYmdwLHRoaXMuZXh0ZW5zaW9uKDAsMCksdCl9fSx7a2V5OiJleHRlbnNpb24iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBVaW50OEFycmF5KFtlLHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdF0pfX0se2tleToidGZoZCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMudGZoZCxuZXcgVWludDhBcnJheShbMCwwLDAsMCx0Pj4yNCx0Pj4xNiYyNTUsdD4+OCYyNTUsMjU1JnRdKSl9fSx7a2V5OiJ0ZmR0Iix2YWx1ZTpmdW5jdGlvbih0LHIpe3ZhciBhPU1hdGguZmxvb3Ioci8oeGUrMSkpLG49TWF0aC5mbG9vcihyJSh4ZSsxKSk7cmV0dXJuIHQudXNlRU1FJiYodC5pc1ZpZGVvRW5jcnlwdGlvbnx8dC5pc0F1ZGlvRW5jcnlwdGlvbik/ZS5ib3goZS50eXBlcy50ZmR0LG5ldyBVaW50OEFycmF5KFswLDAsMCwwLG4+PjI0LG4+PjE2JjI1NSxuPj44JjI1NSwyNTUmbl0pKTplLmJveChlLnR5cGVzLnRmZHQsbmV3IFVpbnQ4QXJyYXkoWzEsMCwwLDAsYT4+MjQsYT4+MTYmMjU1LGE+PjgmMjU1LDI1NSZhLG4+PjI0LG4+PjE2JjI1NSxuPj44JjI1NSwyNTUmbl0pKX19LHtrZXk6InRydW4iLHZhbHVlOmZ1bmN0aW9uKHQscil7dmFyIGE9dC5sZW5ndGgsbj0xMisxNiphO3IrPTgrbjt2YXIgaT1uZXcgVWludDhBcnJheShuKTtpLnNldChbMCwwLDE1LDEsYT4+PjI0JjI1NSxhPj4+MTYmMjU1LGE+Pj44JjI1NSwyNTUmYSxyPj4+MjQmMjU1LHI+Pj4xNiYyNTUscj4+PjgmMjU1LDI1NSZyXSwwKTtmb3IodmFyIHM9MDtzPGE7cysrKXt2YXIgbz10W3NdLHU9by5kdXJhdGlvbixjPW8uc2l6ZSxsPW8uZmxhZyxkPXZvaWQgMD09PWw/e306bCxmPW8uY3RzLGg9dm9pZCAwPT09Zj8wOmY7aS5zZXQoW3U+Pj4yNCYyNTUsdT4+PjE2JjI1NSx1Pj4+OCYyNTUsMjU1JnUsYz4+PjI0JjI1NSxjPj4+MTYmMjU1LGM+Pj44JjI1NSwyNTUmYyxkLmlzTGVhZGluZzw8MnwobnVsbD09PWQuZGVwZW5kc09ufHx2b2lkIDA9PT1kLmRlcGVuZHNPbj8xOmQuZGVwZW5kc09uKSxkLmlzRGVwZW5kZWRPbjw8NnxkLmhhc1JlZHVuZGFuY3k8PDR8ZC5wYWRkaW5nVmFsdWU8PDF8KG51bGw9PT1kLmlzTm9uU3luY1NhbXBsZXx8dm9pZCAwPT09ZC5pc05vblN5bmNTYW1wbGU/MTpkLmlzTm9uU3luY1NhbXBsZSksNjE0NDAmZC5kZWdyYWRhdGlvblByaW9yaXR5LDE1JmQuZGVncmFkYXRpb25Qcmlvcml0eSxoPj4+MjQmMjU1LGg+Pj4xNiYyNTUsaD4+PjgmMjU1LDI1NSZoXSwxMisxNipzKX1yZXR1cm4gZS5ib3goZS50eXBlcy50cnVuLGkpfX0se2tleToibW9vdk1QNCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94LmFwcGx5KGUsW2UudHlwZXMubW9vdixlLm12aGQodFswXS5kdXJhdGlvbix0WzBdLnRpbWVzY2FsZSldLmNvbmNhdCh5KHQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gZS50cmFja01QNCh0KX0pKSkpKX19LHtrZXk6InRyYWNrTVA0Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlcy50cmFrLGUudGtoZCh0LmlkLHQuZHVyYXRpb24sdC53aWR0aCx0LmhlaWdodCksZS5tZGlhTVA0KHQpKX19LHtrZXk6Im1kaWFNUDQiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBlLmJveChlLnR5cGVzLm1kaWEsZS5tZGhkKHQuZHVyYXRpb24sdC50aW1lc2NhbGUpLGUuaGRscih0LnR5cGUpLGUubWluZk1QNCh0KSl9fSx7a2V5OiJtaW5mTVA0Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlcy5taW5mLHQudHlwZT09PWI/ZS5WTUhEOmUuU01IRCxlLkRJTkYsZS5zdGJsTVA0KHQpKX19LHtrZXk6InN0YmxNUDQiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQuZXh0LGE9W2Uuc3RzZCh0KSxlLnN0dHMoci5zdHRzKSxlLnN0c2Moci5zdHNjKSxlLnN0c3ooci5zdHN6KSxlLnN0Y28oci5zdGNvKV07cmV0dXJuIHIuc3Rzcy5sZW5ndGgmJmEucHVzaChlLnN0c3Moci5zdHNzKSksci5jdHRzLmxlbmd0aCYmYS5wdXNoKGUuY3R0cyhyLmN0dHMpKSxlLmJveC5hcHBseShlLFtlLnR5cGVzLnN0YmxdLmNvbmNhdChhKSl9fSx7a2V5OiJzdHRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj10Lmxlbmd0aCxhPW5ldyBVaW50OEFycmF5KDgqciksbj0wO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUudmFsdWUscj1lLmNvdW50O2Euc2V0KFtyPj4yNCxyPj4xNiYyNTUscj4+OCYyNTUsMjU1JnIsdD4+MjQsdD4+MTYmMjU1LHQ+PjgmMjU1LDI1NSZ0XSxuKSxuKz04fSkpLGUuYm94KGUudHlwZXMuc3R0cyxaKG5ldyBVaW50OEFycmF5KFswLDAsMCwwLHI+PjI0LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmcl0pLGEpKX19LHtrZXk6InN0c2MiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQubGVuZ3RoLGE9bmV3IFVpbnQ4QXJyYXkoMTIqciksbj0wO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUuZmlyc3RDaHVuayxyPWUuc2FtcGxlc1BlckNodW5rLGk9ZS5zYW1wbGVEZXNjSW5kZXg7YS5zZXQoW3Q+PjI0LHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdCxyPj4yNCxyPj4xNiYyNTUscj4+OCYyNTUsMjU1JnIsaT4+MjQsaT4+MTYmMjU1LGk+PjgmMjU1LDI1NSZpXSxuKSxuKz0xMn0pKSxlLmJveChlLnR5cGVzLnN0c2MsWihuZXcgVWludDhBcnJheShbMCwwLDAsMCxyPj4yNCxyPj4xNiYyNTUscj4+OCYyNTUsMjU1JnJdKSxhKSl9fSx7a2V5OiJzdHN6Iix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj10Lmxlbmd0aCxhPW5ldyBVaW50OEFycmF5KDQqciksbj0wO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2Euc2V0KFtlPj4yNCxlPj4xNiYyNTUsZT4+OCYyNTUsMjU1JmVdLG4pLG4rPTR9KSksZS5ib3goZS50eXBlcy5zdHN6LFoobmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMCxyPj4yNCxyPj4xNiYyNTUscj4+OCYyNTUsMjU1JnJdKSxhKSl9fSx7a2V5OiJzdGNvIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj10Lmxlbmd0aCxhPW5ldyBVaW50OEFycmF5KDQqciksbj0wO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2Euc2V0KFtlPj4yNCxlPj4xNiYyNTUsZT4+OCYyNTUsMjU1JmVdLG4pLG4rPTR9KSksZS5ib3goZS50eXBlcy5zdGNvLFoobmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAscj4+MjQscj4+MTYmMjU1LHI+PjgmMjU1LDI1NSZyXSksYSkpfX0se2tleToic3RzcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9dC5sZW5ndGgsYT1uZXcgVWludDhBcnJheSg0KnIpLG49MDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbihlKXthLnNldChbZT4+MjQsZT4+MTYmMjU1LGU+PjgmMjU1LDI1NSZlXSxuKSxuKz00fSkpLGUuYm94KGUudHlwZXMuc3RzcyxaKG5ldyBVaW50OEFycmF5KFswLDAsMCwwLHI+PjI0LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmcl0pLGEpKX19LHtrZXk6ImN0dHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQubGVuZ3RoLGE9bmV3IFVpbnQ4QXJyYXkoOCpyKSxuPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS52YWx1ZSxyPWUuY291bnQ7YS5zZXQoW3I+PjI0LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmcix0Pj4yNCx0Pj4xNiYyNTUsdD4+OCYyNTUsMjU1JnRdLG4pLG4rPTh9KSksZS5ib3goZS50eXBlcy5jdHRzLFoobmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAscj4+MjQscj4+MTYmMjU1LHI+PjgmMjU1LDI1NSZyXSksYSkpfX0se2tleToic3R5cCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gZS5ib3goZS50eXBlcy5zdHlwLG5ldyBVaW50OEFycmF5KFsxMDksMTE1LDEwMCwxMDQsMCwwLDAsMCwxMDksMTE1LDEwMCwxMDQsMTA5LDExNSwxMDUsMTIwXSkpfX0se2tleToic2lkeCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9dC50aW1lc2NhbGUsYT10LnNhbXBsZXNbMF0uZHVyYXRpb24sbj1hKnQuc2FtcGxlcy5sZW5ndGgsaT10LnNhbXBsZXNbMF0uc2FtcGxlT2Zmc2V0KmEscz04O3Quc2FtcGxlcy5mb3JFYWNoKChmdW5jdGlvbihlKXtzKz1lLnNpemV9KSk7dmFyIG89MDtpZih0LmlzVmlkZW8pe3ZhciB1LGM9MDt0LnZpZGVvU2VuYyYmKHU9dC52aWRlb1NlbmMpLHQuaXNWaWRlbyYmdS5mb3JFYWNoKChmdW5jdGlvbihlKXtjKz04LGUuc3Vic2FtcGxlcyYmZS5zdWJzYW1wbGVzLmxlbmd0aCYmKGMrPTIsYys9NiplLnN1YnNhbXBsZXMubGVuZ3RoKX0pKSx0LnZpZGVvU2VuY0xlbmd0aD1jLG89cysxNDErMTYqdC5zYW1wbGVzLmxlbmd0aCtjLHQudXNlRU1FJiZ0LmlzQXVkaW9FbmNyeXB0aW9uJiYhdC5pc1ZpZGVvRW5jcnlwdGlvbiYmKG89cysxNip0LnNhbXBsZXMubGVuZ3RoKzg0KX1lbHNlIG89cysxMTYrMTIqdC5zYW1wbGVzLmxlbmd0aCx0LnVzZUVNRSYmdC5pc0F1ZGlvRW5jcnlwdGlvbiYmKG89cysxNjkrMTIqdC5zYW1wbGVzLmxlbmd0aCs4KnQuYXVkaW9TZW5jLmxlbmd0aCk7dmFyIGw9bmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMjU1JnQuaWQscj4+MjQmMjU1LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmcixpPj4yNCYyNTUsaT4+MTYmMjU1LGk+PjgmMjU1LDI1NSZpLDAsMCwwLDAsMCwwLDAsMSwwLG8+PjE2JjI1NSxvPj44JjI1NSwyNTUmbyxuPj4yNCYyNTUsbj4+MTYmMjU1LG4+PjgmMjU1LDI1NSZuLDE0NCwwLDAsMF0pO3JldHVybiBlLmJveChlLnR5cGVzLnNpZHgsbCl9fSx7a2V5OiJtZGF0Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlcy5tZGF0LHQpfX1dKSxlfSgpO2koU2UsInR5cGVzIixbImF2YzEiLCJhdmNDIiwiaHZjMSIsImh2Y0MiLCJkaW5mIiwiZHJlZiIsImVzZHMiLCJmdHlwIiwiaGRsciIsIm1kYXQiLCJtZGhkIiwibWRpYSIsIm1maGQiLCJtaW5mIiwibW9vZiIsIm1vb3YiLCJtcDRhIiwibXZleCIsIm12aGQiLCJwYXNwIiwic3RibCIsInN0Y28iLCJzdHNjIiwic3RzZCIsInN0c3oiLCJzdHRzIiwidGZkdCIsInRmaGQiLCJ0cmFmIiwidHJhayIsInRyZXgiLCJ0a2hkIiwidm1oZCIsInNtaGQiLCJjdHRzIiwic3RzcyIsInN0eXAiLCJwc3NoIiwic2lkeCIsInNiZ3AiLCJzYWl6Iiwic2FpbyIsInNlbmMiLCJ0cnVuIiwiZW5jdiIsImVuY2EiLCJzaW5mIiwiYnRydCIsImZybWEiLCJ0ZW5jIiwic2NobSIsInNjaGkiLCJtZWhkIiwiZmllbCIsInNkdHAiXS5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGVbdF09W3QuY2hhckNvZGVBdCgwKSx0LmNoYXJDb2RlQXQoMSksdC5jaGFyQ29kZUF0KDIpLHQuY2hhckNvZGVBdCgzKV0sZX0pLE9iamVjdC5jcmVhdGUobnVsbCkpKSxpKFNlLCJIRExSX1RZUEVTIix7dmlkZW86bmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMCwxMTgsMTA1LDEwMCwxMDEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsODYsMTA1LDEwMCwxMDEsMTExLDcyLDk3LDExMCwxMDAsMTA4LDEwMSwxMTQsMF0pLGF1ZGlvOm5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMTE1LDExMSwxMTcsMTEwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDgzLDExMSwxMTcsMTEwLDEwMCw3Miw5NywxMTAsMTAwLDEwOCwxMDEsMTE0LDBdKX0pLGkoU2UsIkZUWVBBVkMxIixTZS5ib3goU2UudHlwZXMuZnR5cCxuZXcgVWludDhBcnJheShbMTA1LDExNSwxMTEsMTA5LDAsMCwwLDEsMTA1LDExNSwxMTEsMTA5LDk3LDExOCw5OSw0OV0pKSksaShTZSwiRlRZUEhFVjEiLFNlLmJveChTZS50eXBlcy5mdHlwLG5ldyBVaW50OEFycmF5KFsxMDUsMTE1LDExMSwxMDksMCwwLDAsMSwxMDUsMTE1LDExMSwxMDksMTA0LDEwMSwxMTgsNDldKSkpLGkoU2UsIkRJTkYiLFNlLmJveChTZS50eXBlcy5kaW5mLFNlLmJveChTZS50eXBlcy5kcmVmLG5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDEsMCwwLDAsMTIsMTE3LDExNCwxMDgsMzIsMCwwLDAsMV0pKSkpLGkoU2UsIlZNSEQiLFNlLmJveChTZS50eXBlcy52bWhkLG5ldyBVaW50OEFycmF5KFswLDAsMCwxLDAsMCwwLDAsMCwwLDAsMF0pKSksaShTZSwiU01IRCIsU2UuYm94KFNlLnR5cGVzLnNtaGQsbmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMF0pKSksaShTZSwiU3RibFRhYmxlIixuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwwXSkpLGkoU2UsIlNUVFMiLFNlLmJveChTZS50eXBlcy5zdHRzLFNlLlN0YmxUYWJsZSkpLGkoU2UsIlNUU0MiLFNlLmJveChTZS50eXBlcy5zdHNjLFNlLlN0YmxUYWJsZSkpLGkoU2UsIlNUU1oiLFNlLmJveChTZS50eXBlcy5zdHN6LG5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMCwwLDAsMF0pKSksaShTZSwiU1RDTyIsU2UuYm94KFNlLnR5cGVzLnN0Y28sU2UuU3RibFRhYmxlKSk7dmFyIEFlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LGEpe3IodGhpcyxlKSx0aGlzLm5hbWU9dHx8IiIsdGhpcy5fcHJlZml4PSJbIi5jb25jYXQodGhpcy5uYW1lLCJdIiksZS5kaXNhYmxlZD1hfXJldHVybiBuKGUsW3trZXk6ImRlYnVnIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0O2lmKCFlLmRpc2FibGVkKXtmb3IodmFyIHI9YXJndW1lbnRzLmxlbmd0aCxhPW5ldyBBcnJheShyKSxuPTA7bjxyO24rKylhW25dPWFyZ3VtZW50c1tuXTsodD1jb25zb2xlKS5kZWJ1Zy5hcHBseSh0LFt0aGlzLl9wcmVmaXhdLmNvbmNhdChhKSl9fX0se2tleToibG9nIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0O2lmKCFlLmRpc2FibGVkKXtmb3IodmFyIHI9YXJndW1lbnRzLmxlbmd0aCxhPW5ldyBBcnJheShyKSxuPTA7bjxyO24rKylhW25dPWFyZ3VtZW50c1tuXTsodD1jb25zb2xlKS5sb2cuYXBwbHkodCxbdGhpcy5fcHJlZml4XS5jb25jYXQoYSkpfX19LHtrZXk6Indhcm4iLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ7aWYoIWUuZGlzYWJsZWQpe2Zvcih2YXIgcj1hcmd1bWVudHMubGVuZ3RoLGE9bmV3IEFycmF5KHIpLG49MDtuPHI7bisrKWFbbl09YXJndW1lbnRzW25dOyh0PWNvbnNvbGUpLndhcm4uYXBwbHkodCxbdGhpcy5fcHJlZml4XS5jb25jYXQoYSkpfX19LHtrZXk6ImVycm9yIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0O2lmKCFlLmRpc2FibGVkKXtmb3IodmFyIHI9YXJndW1lbnRzLmxlbmd0aCxhPW5ldyBBcnJheShyKSxuPTA7bjxyO24rKylhW25dPWFyZ3VtZW50c1tuXTsodD1jb25zb2xlKS5lcnJvci5hcHBseSh0LFt0aGlzLl9wcmVmaXhdLmNvbmNhdChhKSl9fX0se2tleToidGFibGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ7ZS5kaXNhYmxlZHx8KGNvbnNvbGUuZ3JvdXAodGhpcy5fcHJlZml4KSwodD1jb25zb2xlKS50YWJsZS5hcHBseSh0LGFyZ3VtZW50cyksY29uc29sZS5ncm91cEVuZCgpKX19XSxbe2tleToiZW5hYmxlIix2YWx1ZTpmdW5jdGlvbigpe2UuZGlzYWJsZWQ9ITF9fSx7a2V5OiJkaXNhYmxlIix2YWx1ZTpmdW5jdGlvbigpe2UuZGlzYWJsZWQ9ITB9fV0pLGV9KCk7aShBZSwiZGlzYWJsZWQiLCEwKTtmb3IodmFyIERlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LGEsbil7cih0aGlzLGUpLHRoaXMudmlkZW9UcmFjaz10LHRoaXMuYXVkaW9UcmFjaz1hO3ZhciBpPS9DaHJvbWVcLyhbXi5dKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCk7dGhpcy5mb3JjZUZpcnN0SURSPWkmJk51bWJlcihpWzFdKTw1MCx0aGlzLmxvZz1uZXcgQWUoIkZNUDRSZW11eGVyIiwhbnx8IW4ub3BlbkxvZ3x8IW4ub3BlbkxvZyl9cmV0dXJuIG4oZSxbe2tleToicmVtdXgiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGUsdCxyLGEsbixpPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF0scz1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbz10aGlzLnZpZGVvVHJhY2ssdT10aGlzLmF1ZGlvVHJhY2ssYz1vLmV4aXN0KCksbD11LmV4aXN0KCksZD1bXTtyZXR1cm4gaSYmKHMmJnMuaW5pdE1lcmdlPyhjJiZkLnB1c2godGhpcy52aWRlb1RyYWNrKSxsJiZkLnB1c2godGhpcy5hdWRpb1RyYWNrKSxyPVNlLmluaXRTZWdtZW50KGQpKTooYyYmKGU9U2UuaW5pdFNlZ21lbnQoW3RoaXMudmlkZW9UcmFja10pKSxsJiYodD1TZS5pbml0U2VnbWVudChbdGhpcy5hdWRpb1RyYWNrXSkpKSksYyYmby5oYXNTYW1wbGUoKSYmKGE9dGhpcy5fcmVtdXhWaWRlbygpKSxsJiZ1Lmhhc1NhbXBsZSgpJiYobj10aGlzLl9yZW11eEF1ZGlvKCkpLG8uc2FtcGxlcz1bXSx1LnNhbXBsZXM9W10se2luaXRTZWdtZW50OnIsdmlkZW9Jbml0U2VnbWVudDplLGF1ZGlvSW5pdFNlZ21lbnQ6dCx2aWRlb1NlZ21lbnQ6YSxhdWRpb1NlZ21lbnQ6bn19fSx7a2V5OiJfcmVtdXhWaWRlbyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnZpZGVvVHJhY2s7dGhpcy5mb3JjZUZpcnN0SURSJiYoZS5zYW1wbGVzWzBdLmZsYWc9e2RlcGVuZHNPbjoyLGlzTm9uU3luY1NhbXBsZTowfSk7dmFyIHQ9ZS5zYW1wbGVzLHI9MDt0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3IrPWUudW5pdHMucmVkdWNlKChmdW5jdGlvbihlLHQpe3JldHVybiBlK3QuYnl0ZUxlbmd0aH0pLDApLHIrPTQqZS51bml0cy5sZW5ndGh9KSk7Zm9yKHZhciBhLG49bmV3IFVpbnQ4QXJyYXkociksaT1uZXcgRGF0YVZpZXcobi5idWZmZXIpLHM9ZnVuY3Rpb24oZSxyKXtyPXRbb107dmFyIHM9MDtyLnVuaXRzLmZvckVhY2goKGZ1bmN0aW9uKHQpe2kuc2V0VWludDMyKGUsdC5ieXRlTGVuZ3RoKSxlKz00LG4uc2V0KHQsZSksZSs9dC5ieXRlTGVuZ3RoLHMrPTQrdC5ieXRlTGVuZ3RofSkpLHIuc2l6ZT1zLGM9ZSxhPXJ9LG89MCx1PXQubGVuZ3RoLGM9MDtvPHU7bysrKXMoYyxhKTt2YXIgbD1TZS5tZGF0KG4pO3JldHVybiBaKFNlLm1vb2YoW2VdKSxsKX19LHtrZXk6Il9yZW11eEF1ZGlvIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuYXVkaW9UcmFjayx0PW5ldyBVaW50OEFycmF5KGUuc2FtcGxlcy5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrdC5zaXplfSksMCkpO2Uuc2FtcGxlcy5yZWR1Y2UoKGZ1bmN0aW9uKGUscil7cmV0dXJuIHQuc2V0KHIuZGF0YSxlKSxlK3Iuc2l6ZX0pLDApO3ZhciByPVNlLm1kYXQodCk7cmV0dXJuIFooU2UubW9vZihbZV0pLHIpfX0se2tleToicmVzZXQiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy52aWRlb1RyYWNrLnJlc2V0KCksdGhpcy5hdWRpb1RyYWNrLnJlc2V0KCl9fV0pLGV9KCksRWU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpfXJldHVybiBuKGUsW3trZXk6Im1peEluIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmFzc2lnbih0aGlzLGUpfX0se2tleToiY2xvbmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9bmV3IHRoaXMuY29uc3RydWN0b3I7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx0aGlzKSxlfX1dLFt7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsdD1uZXcgQXJyYXkoZSkscj0wO3I8ZTtyKyspdFtyXT1hcmd1bWVudHNbcl07cmV0dXJuIGwodGhpcyx0KX19XSksZX0oKSxCZT1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZihhKTtmdW5jdGlvbiBhKCl7dmFyIGUsbj1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06W10saT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06NCpuLmxlbmd0aDtyKHRoaXMsYSksZT10LmNhbGwodGhpcyk7dmFyIHM9bjtpZihzIGluc3RhbmNlb2YgQXJyYXlCdWZmZXImJihzPW5ldyBVaW50OEFycmF5KHMpKSwocyBpbnN0YW5jZW9mIEludDhBcnJheXx8cyBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5fHxzIGluc3RhbmNlb2YgSW50MTZBcnJheXx8cyBpbnN0YW5jZW9mIFVpbnQxNkFycmF5fHxzIGluc3RhbmNlb2YgSW50MzJBcnJheXx8cyBpbnN0YW5jZW9mIFVpbnQzMkFycmF5fHxzIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5fHxzIGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5KSYmKHM9bmV3IFVpbnQ4QXJyYXkocy5idWZmZXIscy5ieXRlT2Zmc2V0LHMuYnl0ZUxlbmd0aCkpLHMgaW5zdGFuY2VvZiBVaW50OEFycmF5KXtmb3IodmFyIG89cy5ieXRlTGVuZ3RoLHU9W10sYz0wO2M8bztjKz0xKXVbYz4+PjJdfD1zW2NdPDwyNC1jJTQqODtlLndvcmRzPXUsZS5zaWdCeXRlcz1vfWVsc2UgZS53b3Jkcz1uLGUuc2lnQnl0ZXM9aTtyZXR1cm4gZX1yZXR1cm4gbihhLFt7a2V5OiJ0b1N0cmluZyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06VGU7cmV0dXJuIGUuc3RyaW5naWZ5KHRoaXMpfX0se2tleToiY29uY2F0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLndvcmRzLHI9ZS53b3JkcyxhPXRoaXMuc2lnQnl0ZXMsbj1lLnNpZ0J5dGVzO2lmKHRoaXMuY2xhbXAoKSxhJTQpZm9yKHZhciBpPTA7aTxuO2krPTEpe3ZhciBzPXJbaT4+PjJdPj4+MjQtaSU0KjgmMjU1O3RbYStpPj4+Ml18PXM8PDI0LShhK2kpJTQqOH1lbHNlIGZvcih2YXIgbz0wO288bjtvKz00KXRbYStvPj4+Ml09cltvPj4+Ml07cmV0dXJuIHRoaXMuc2lnQnl0ZXMrPW4sdGhpc319LHtrZXk6ImNsYW1wIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMud29yZHMsdD10aGlzLnNpZ0J5dGVzO2VbdD4+PjJdJj00Mjk0OTY3Mjk1PDwzMi10JTQqOCxlLmxlbmd0aD1NYXRoLmNlaWwodC80KX19LHtrZXk6ImNsb25lIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXAobyhhLnByb3RvdHlwZSksImNsb25lIix0aGlzKS5jYWxsKHRoaXMpO3JldHVybiBlLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCksZX19XSxbe2tleToicmFuZG9tIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQscj1bXSxuPWZ1bmN0aW9uKGUpe3ZhciB0PWUscj05ODc2NTQzMjEsYT00Mjk0OTY3Mjk1O3JldHVybiBmdW5jdGlvbigpe3ZhciBlPSgocj0zNjk2OSooNjU1MzUmcikrKHI+PjE2KSZhKTw8MTYpKyh0PTE4ZTMqKDY1NTM1JnQpKyh0Pj4xNikmYSkmYTtyZXR1cm4gZS89NDI5NDk2NzI5NiwoZSs9LjUpKihNYXRoLnJhbmRvbSgpPi41PzE6LTEpfX0saT0wO2k8ZTtpKz00KXt2YXIgcz1uKDQyOTQ5NjcyOTYqKHR8fE1hdGgucmFuZG9tKCkpKTt0PTk4NzY1NDA3MSpzKCksci5wdXNoKDQyOTQ5NjcyOTYqcygpfDApfXJldHVybiBuZXcgYShyLGUpfX1dKSxhfShFZSksVGU9e3N0cmluZ2lmeTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS53b3JkcyxyPWUuc2lnQnl0ZXMsYT1bXSxuPTA7bjxyO24rPTEpe3ZhciBpPXRbbj4+PjJdPj4+MjQtbiU0KjgmMjU1O2EucHVzaCgoaT4+PjQpLnRvU3RyaW5nKDE2KSksYS5wdXNoKCgxNSZpKS50b1N0cmluZygxNikpfXJldHVybiBhLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5sZW5ndGgscj1bXSxhPTA7YTx0O2ErPTIpclthPj4+M118PXBhcnNlSW50KGUuc3Vic3RyKGEsMiksMTYpPDwyNC1hJTgqNDtyZXR1cm4gbmV3IEJlKHIsdC8yKX19LENlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmxlbmd0aCxyPVtdLGE9MDthPHQ7YSs9MSlyW2E+Pj4yXXw9KDI1NSZlLmNoYXJDb2RlQXQoYSkpPDwyNC1hJTQqODtyZXR1cm4gbmV3IEJlKHIsdCl9LFVlPWZ1bmN0aW9uKGUpe3JldHVybiBDZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZSkpKX0sUGU9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWYoYSk7ZnVuY3Rpb24gYSgpe3ZhciBlO3JldHVybiByKHRoaXMsYSksKGU9dC5jYWxsKHRoaXMpKS5fbWluQnVmZmVyU2l6ZT0wLGV9cmV0dXJuIG4oYSxbe2tleToicmVzZXQiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgQmUsdGhpcy5fbkRhdGFCeXRlcz0wfX0se2tleToiX2FwcGVuZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZTsic3RyaW5nIj09dHlwZW9mIHQmJih0PVVlKHQpKSx0aGlzLl9kYXRhLmNvbmNhdCh0KSx0aGlzLl9uRGF0YUJ5dGVzKz10LnNpZ0J5dGVzfX0se2tleToiX3Byb2Nlc3MiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcy5fZGF0YSxhPXRoaXMuYmxvY2tTaXplLG49ci53b3JkcyxpPXIuc2lnQnl0ZXMscz1pLyg0KmEpLG89KHM9ZT9NYXRoLmNlaWwocyk6TWF0aC5tYXgoKDB8cyktdGhpcy5fbWluQnVmZmVyU2l6ZSwwKSkqYSx1PU1hdGgubWluKDQqbyxpKTtpZihvKXtmb3IodmFyIGM9MDtjPG87Yys9YSl0aGlzLl9kb1Byb2Nlc3NCbG9jayhuLGMpO3Q9bi5zcGxpY2UoMCxvKSxyLnNpZ0J5dGVzLT11fXJldHVybiBuZXcgQmUodCx1KX19LHtrZXk6ImNsb25lIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXAobyhhLnByb3RvdHlwZSksImNsb25lIix0aGlzKS5jYWxsKHRoaXMpO3JldHVybiBlLl9kYXRhPXRoaXMuX2RhdGEuY2xvbmUoKSxlfX1dKSxhfShFZSksSWU9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWYoYSk7ZnVuY3Rpb24gYShlKXt2YXIgbjtyZXR1cm4gcih0aGlzLGEpLChuPXQuY2FsbCh0aGlzKSkuYmxvY2tTaXplPTE2LG4uY2ZnPU9iamVjdC5hc3NpZ24obmV3IEVlLGUpLG4ucmVzZXQoKSxufXJldHVybiBuKGEsW3trZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3AobyhhLnByb3RvdHlwZSksInJlc2V0Iix0aGlzKS5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX19LHtrZXk6InVwZGF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2FwcGVuZChlKSx0aGlzLl9wcm9jZXNzKCksdGhpc319LHtrZXk6ImZpbmFsaXplIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmdGhpcy5fYXBwZW5kKGUpLHRoaXMuX2RvRmluYWxpemUoKX19XSxbe2tleToiX2NyZWF0ZUhlbHBlciIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7cmV0dXJuIG5ldyBlKHIpLmZpbmFsaXplKHQpfX19LHtrZXk6Il9jcmVhdGVIbWFjSGVscGVyIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXtyZXR1cm4gbmV3IHplKGUscikuZmluYWxpemUodCl9fX1dKSxhfShQZSksemU9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWYoYSk7ZnVuY3Rpb24gYShlLG4pe3ZhciBpO3IodGhpcyxhKSxpPXQuY2FsbCh0aGlzKTt2YXIgcz1uZXcgZTtpLl9oYXNoZXI9czt2YXIgbz1uOyJzdHJpbmciPT10eXBlb2YgbyYmKG89VWUobykpO3ZhciB1PXMuYmxvY2tTaXplLGM9NCp1O28uc2lnQnl0ZXM+YyYmKG89cy5maW5hbGl6ZShuKSksby5jbGFtcCgpO3ZhciBsPW8uY2xvbmUoKTtpLl9vS2V5PWw7dmFyIGQ9by5jbG9uZSgpO2kuX2lLZXk9ZDtmb3IodmFyIGY9bC53b3JkcyxoPWQud29yZHMscD0wO3A8dTtwKz0xKWZbcF1ePTE1NDk1NTY4MjgsaFtwXV49OTA5NTIyNDg2O3JldHVybiBsLnNpZ0J5dGVzPWMsZC5zaWdCeXRlcz1jLGkucmVzZXQoKSxpfXJldHVybiBuKGEsW3trZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2hhc2hlcjtlLnJlc2V0KCksZS51cGRhdGUodGhpcy5faUtleSl9fSx7a2V5OiJ1cGRhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9oYXNoZXIudXBkYXRlKGUpLHRoaXN9fSx7a2V5OiJmaW5hbGl6ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5faGFzaGVyLHI9dC5maW5hbGl6ZShlKTtyZXR1cm4gdC5yZXNldCgpLHQuZmluYWxpemUodGhpcy5fb0tleS5jbG9uZSgpLmNvbmNhdChyKSl9fV0pLGF9KEVlKSxNZT17c3RyaW5naWZ5OmZ1bmN0aW9uKGUpe3ZhciB0PWUud29yZHMscj1lLnNpZ0J5dGVzLGE9dGhpcy5fbWFwO2UuY2xhbXAoKTtmb3IodmFyIG49W10saT0wO2k8cjtpKz0zKWZvcih2YXIgcz0odFtpPj4+Ml0+Pj4yNC1pJTQqOCYyNTUpPDwxNnwodFtpKzE+Pj4yXT4+PjI0LShpKzEpJTQqOCYyNTUpPDw4fHRbaSsyPj4+Ml0+Pj4yNC0oaSsyKSU0KjgmMjU1LG89MDtvPDQmJmkrLjc1Km88cjtvKz0xKW4ucHVzaChhLmNoYXJBdChzPj4+NiooMy1vKSY2MykpO3ZhciB1PWEuY2hhckF0KDY0KTtpZih1KWZvcig7bi5sZW5ndGglNDspbi5wdXNoKHUpO3JldHVybiBuLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aCxyPXRoaXMuX21hcCxhPXRoaXMuX3JldmVyc2VNYXA7aWYoIWEpe3RoaXMuX3JldmVyc2VNYXA9W10sYT10aGlzLl9yZXZlcnNlTWFwO2Zvcih2YXIgbj0wO248ci5sZW5ndGg7bis9MSlhW3IuY2hhckNvZGVBdChuKV09bn12YXIgaT1yLmNoYXJBdCg2NCk7aWYoaSl7dmFyIHM9ZS5pbmRleE9mKGkpOy0xIT09cyYmKHQ9cyl9cmV0dXJuIGZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIGE9W10sbj0wLGk9MDtpPHQ7aSs9MSlpZihpJTQpe3ZhciBzPXJbZS5jaGFyQ29kZUF0KGktMSldPDxpJTQqMnxyW2UuY2hhckNvZGVBdChpKV0+Pj42LWklNCoyO2Fbbj4+PjJdfD1zPDwyNC1uJTQqOCxuKz0xfXJldHVybiBCZS5jcmVhdGUoYSxuKX0oZSx0LGEpfSxfbWFwOiJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSJ9LFJlPVtdLE9lPTA7T2U8NjQ7T2UrPTEpUmVbT2VdPTQyOTQ5NjcyOTYqTWF0aC5hYnMoTWF0aC5zaW4oT2UrMSkpfDA7dmFyIExlPWZ1bmN0aW9uKGUsdCxyLGEsbixpLHMpe3ZhciBvPWUrKHQmcnx+dCZhKStuK3M7cmV0dXJuKG88PGl8bz4+PjMyLWkpK3R9LFZlPWZ1bmN0aW9uKGUsdCxyLGEsbixpLHMpe3ZhciBvPWUrKHQmYXxyJn5hKStuK3M7cmV0dXJuKG88PGl8bz4+PjMyLWkpK3R9LEZlPWZ1bmN0aW9uKGUsdCxyLGEsbixpLHMpe3ZhciBvPWUrKHRecl5hKStuK3M7cmV0dXJuKG88PGl8bz4+PjMyLWkpK3R9LE5lPWZ1bmN0aW9uKGUsdCxyLGEsbixpLHMpe3ZhciBvPWUrKHJeKHR8fmEpKStuK3M7cmV0dXJuKG88PGl8bz4+PjMyLWkpK3R9LGplPWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1mKGEpO2Z1bmN0aW9uIGEoKXtyZXR1cm4gcih0aGlzLGEpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBuKGEsW3trZXk6Il9kb1Jlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IEJlKFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzhdKX19LHtrZXk6Il9kb1Byb2Nlc3NCbG9jayIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9ZSxhPTA7YTwxNjthKz0xKXt2YXIgbj10K2EsaT1lW25dO3Jbbl09MTY3MTE5MzUmKGk8PDh8aT4+PjI0KXw0Mjc4MjU1MzYwJihpPDwyNHxpPj4+OCl9dmFyIHM9dGhpcy5faGFzaC53b3JkcyxvPXJbdCswXSx1PXJbdCsxXSxjPXJbdCsyXSxsPXJbdCszXSxkPXJbdCs0XSxmPXJbdCs1XSxoPXJbdCs2XSxwPXJbdCs3XSx2PXJbdCs4XSx5PXJbdCs5XSxtPXJbdCsxMF0sZz1yW3QrMTFdLGs9clt0KzEyXSxiPXJbdCsxM10sXz1yW3QrMTRdLHc9clt0KzE1XSx4PXNbMF0sUz1zWzFdLEE9c1syXSxEPXNbM107eD1MZSh4LFMsQSxELG8sNyxSZVswXSksRD1MZShELHgsUyxBLHUsMTIsUmVbMV0pLEE9TGUoQSxELHgsUyxjLDE3LFJlWzJdKSxTPUxlKFMsQSxELHgsbCwyMixSZVszXSkseD1MZSh4LFMsQSxELGQsNyxSZVs0XSksRD1MZShELHgsUyxBLGYsMTIsUmVbNV0pLEE9TGUoQSxELHgsUyxoLDE3LFJlWzZdKSxTPUxlKFMsQSxELHgscCwyMixSZVs3XSkseD1MZSh4LFMsQSxELHYsNyxSZVs4XSksRD1MZShELHgsUyxBLHksMTIsUmVbOV0pLEE9TGUoQSxELHgsUyxtLDE3LFJlWzEwXSksUz1MZShTLEEsRCx4LGcsMjIsUmVbMTFdKSx4PUxlKHgsUyxBLEQsayw3LFJlWzEyXSksRD1MZShELHgsUyxBLGIsMTIsUmVbMTNdKSxBPUxlKEEsRCx4LFMsXywxNyxSZVsxNF0pLFM9TGUoUyxBLEQseCx3LDIyLFJlWzE1XSkseD1WZSh4LFMsQSxELHUsNSxSZVsxNl0pLEQ9VmUoRCx4LFMsQSxoLDksUmVbMTddKSxBPVZlKEEsRCx4LFMsZywxNCxSZVsxOF0pLFM9VmUoUyxBLEQseCxvLDIwLFJlWzE5XSkseD1WZSh4LFMsQSxELGYsNSxSZVsyMF0pLEQ9VmUoRCx4LFMsQSxtLDksUmVbMjFdKSxBPVZlKEEsRCx4LFMsdywxNCxSZVsyMl0pLFM9VmUoUyxBLEQseCxkLDIwLFJlWzIzXSkseD1WZSh4LFMsQSxELHksNSxSZVsyNF0pLEQ9VmUoRCx4LFMsQSxfLDksUmVbMjVdKSxBPVZlKEEsRCx4LFMsbCwxNCxSZVsyNl0pLFM9VmUoUyxBLEQseCx2LDIwLFJlWzI3XSkseD1WZSh4LFMsQSxELGIsNSxSZVsyOF0pLEQ9VmUoRCx4LFMsQSxjLDksUmVbMjldKSxBPVZlKEEsRCx4LFMscCwxNCxSZVszMF0pLFM9VmUoUyxBLEQseCxrLDIwLFJlWzMxXSkseD1GZSh4LFMsQSxELGYsNCxSZVszMl0pLEQ9RmUoRCx4LFMsQSx2LDExLFJlWzMzXSksQT1GZShBLEQseCxTLGcsMTYsUmVbMzRdKSxTPUZlKFMsQSxELHgsXywyMyxSZVszNV0pLHg9RmUoeCxTLEEsRCx1LDQsUmVbMzZdKSxEPUZlKEQseCxTLEEsZCwxMSxSZVszN10pLEE9RmUoQSxELHgsUyxwLDE2LFJlWzM4XSksUz1GZShTLEEsRCx4LG0sMjMsUmVbMzldKSx4PUZlKHgsUyxBLEQsYiw0LFJlWzQwXSksRD1GZShELHgsUyxBLG8sMTEsUmVbNDFdKSxBPUZlKEEsRCx4LFMsbCwxNixSZVs0Ml0pLFM9RmUoUyxBLEQseCxoLDIzLFJlWzQzXSkseD1GZSh4LFMsQSxELHksNCxSZVs0NF0pLEQ9RmUoRCx4LFMsQSxrLDExLFJlWzQ1XSksQT1GZShBLEQseCxTLHcsMTYsUmVbNDZdKSxTPUZlKFMsQSxELHgsYywyMyxSZVs0N10pLHg9TmUoeCxTLEEsRCxvLDYsUmVbNDhdKSxEPU5lKEQseCxTLEEscCwxMCxSZVs0OV0pLEE9TmUoQSxELHgsUyxfLDE1LFJlWzUwXSksUz1OZShTLEEsRCx4LGYsMjEsUmVbNTFdKSx4PU5lKHgsUyxBLEQsayw2LFJlWzUyXSksRD1OZShELHgsUyxBLGwsMTAsUmVbNTNdKSxBPU5lKEEsRCx4LFMsbSwxNSxSZVs1NF0pLFM9TmUoUyxBLEQseCx1LDIxLFJlWzU1XSkseD1OZSh4LFMsQSxELHYsNixSZVs1Nl0pLEQ9TmUoRCx4LFMsQSx3LDEwLFJlWzU3XSksQT1OZShBLEQseCxTLGgsMTUsUmVbNThdKSxTPU5lKFMsQSxELHgsYiwyMSxSZVs1OV0pLHg9TmUoeCxTLEEsRCxkLDYsUmVbNjBdKSxEPU5lKEQseCxTLEEsZywxMCxSZVs2MV0pLEE9TmUoQSxELHgsUyxjLDE1LFJlWzYyXSksUz1OZShTLEEsRCx4LHksMjEsUmVbNjNdKSxzWzBdPXNbMF0reHwwLHNbMV09c1sxXStTfDAsc1syXT1zWzJdK0F8MCxzWzNdPXNbM10rRHwwfX0se2tleToiX2RvRmluYWxpemUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZGF0YSx0PWUud29yZHMscj04KnRoaXMuX25EYXRhQnl0ZXMsYT04KmUuc2lnQnl0ZXM7dFthPj4+NV18PTEyODw8MjQtYSUzMjt2YXIgbj1NYXRoLmZsb29yKHIvNDI5NDk2NzI5NiksaT1yO3RbMTUrKGErNjQ+Pj45PDw0KV09MTY3MTE5MzUmKG48PDh8bj4+PjI0KXw0Mjc4MjU1MzYwJihuPDwyNHxuPj4+OCksdFsxNCsoYSs2ND4+Pjk8PDQpXT0xNjcxMTkzNSYoaTw8OHxpPj4+MjQpfDQyNzgyNTUzNjAmKGk8PDI0fGk+Pj44KSxlLnNpZ0J5dGVzPTQqKHQubGVuZ3RoKzEpLHRoaXMuX3Byb2Nlc3MoKTtmb3IodmFyIHM9dGhpcy5faGFzaCxvPXMud29yZHMsdT0wO3U8NDt1Kz0xKXt2YXIgYz1vW3VdO29bdV09MTY3MTE5MzUmKGM8PDh8Yz4+PjI0KXw0Mjc4MjU1MzYwJihjPDwyNHxjPj4+OCl9cmV0dXJuIHN9fSx7a2V5OiJjbG9uZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1wKG8oYS5wcm90b3R5cGUpLCJjbG9uZSIsdGhpcykuY2FsbCh0aGlzKTtyZXR1cm4gZS5faGFzaD10aGlzLl9oYXNoLmNsb25lKCksZX19XSksYX0oSWUpO0llLl9jcmVhdGVIZWxwZXIoamUpLEllLl9jcmVhdGVIbWFjSGVscGVyKGplKTt2YXIgR2U9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWYoYSk7ZnVuY3Rpb24gYShlKXt2YXIgbjtyZXR1cm4gcih0aGlzLGEpLChuPXQuY2FsbCh0aGlzKSkuY2ZnPU9iamVjdC5hc3NpZ24obmV3IEVlLHtrZXlTaXplOjQsaGFzaGVyOmplLGl0ZXJhdGlvbnM6MX0sZSksbn1yZXR1cm4gbihhLFt7a2V5OiJjb21wdXRlIix2YWx1ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcixhPXRoaXMuY2ZnLG49YS5oYXNoZXIuY3JlYXRlKCksaT1CZS5jcmVhdGUoKSxzPWkud29yZHMsbz1hLmtleVNpemUsdT1hLml0ZXJhdGlvbnM7cy5sZW5ndGg8bzspe3ImJm4udXBkYXRlKHIpLHI9bi51cGRhdGUoZSkuZmluYWxpemUodCksbi5yZXNldCgpO2Zvcih2YXIgYz0xO2M8dTtjKz0xKXI9bi5maW5hbGl6ZShyKSxuLnJlc2V0KCk7aS5jb25jYXQocil9cmV0dXJuIGkuc2lnQnl0ZXM9NCpvLGl9fV0pLGF9KEVlKSxIZT1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZihhKTtmdW5jdGlvbiBhKGUsbixpKXt2YXIgcztyZXR1cm4gcih0aGlzLGEpLChzPXQuY2FsbCh0aGlzKSkuY2ZnPU9iamVjdC5hc3NpZ24obmV3IEVlLGkpLHMuX3hmb3JtTW9kZT1lLHMuX2tleT1uLHMucmVzZXQoKSxzfXJldHVybiBuKGEsW3trZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3AobyhhLnByb3RvdHlwZSksInJlc2V0Iix0aGlzKS5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX19LHtrZXk6InByb2Nlc3MiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9hcHBlbmQoZSksdGhpcy5fcHJvY2VzcygpfX0se2tleToiZmluYWxpemUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZ0aGlzLl9hcHBlbmQoZSksdGhpcy5fZG9GaW5hbGl6ZSgpfX1dLFt7a2V5OiJjcmVhdGVFbmNyeXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0VOQ19YRk9STV9NT0RFLGUsdCl9fSx7a2V5OiJjcmVhdGVEZWNyeXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0RFQ19YRk9STV9NT0RFLGUsdCl9fSx7a2V5OiJfY3JlYXRlSGVscGVyIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbihlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/ZXQ6SmV9O3JldHVybntlbmNyeXB0OmZ1bmN0aW9uKHIsYSxuKXtyZXR1cm4gdChhKS5lbmNyeXB0KGUscixhLG4pfSxkZWNyeXB0OmZ1bmN0aW9uKHIsYSxuKXtyZXR1cm4gdChhKS5kZWNyeXB0KGUscixhLG4pfX19fV0pLGF9KFBlKTtIZS5fRU5DX1hGT1JNX01PREU9MSxIZS5fREVDX1hGT1JNX01PREU9MixIZS5rZXlTaXplPTQsSGUuaXZTaXplPTQ7dmFyIEtlPWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1mKGEpO2Z1bmN0aW9uIGEoZSxuKXt2YXIgaTtyZXR1cm4gcih0aGlzLGEpLChpPXQuY2FsbCh0aGlzKSkuX2NpcGhlcj1lLGkuX2l2PW4saX1yZXR1cm4gbihhLG51bGwsW3trZXk6ImNyZWF0ZUVuY3J5cHRvciIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5FbmNyeXB0b3IuY3JlYXRlKGUsdCl9fSx7a2V5OiJjcmVhdGVEZWNyeXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuRGVjcnlwdG9yLmNyZWF0ZShlLHQpfX1dKSxhfShFZSk7ZnVuY3Rpb24gcWUoZSx0LHIpe3ZhciBhLG49ZSxpPXRoaXMuX2l2O2k/KGE9aSx0aGlzLl9pdj12b2lkIDApOmE9dGhpcy5fcHJldkJsb2NrO2Zvcih2YXIgcz0wO3M8cjtzKz0xKW5bdCtzXV49YVtzXX12YXIgV2U9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWYoYSk7ZnVuY3Rpb24gYSgpe3JldHVybiByKHRoaXMsYSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG4oYSl9KEtlKTtXZS5FbmNyeXB0b3I9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWYoYSk7ZnVuY3Rpb24gYSgpe3JldHVybiByKHRoaXMsYSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG4oYSxbe2tleToicHJvY2Vzc0Jsb2NrIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2NpcGhlcixhPXIuYmxvY2tTaXplO3FlLmNhbGwodGhpcyxlLHQsYSksci5lbmNyeXB0QmxvY2soZSx0KSx0aGlzLl9wcmV2QmxvY2s9ZS5zbGljZSh0LHQrYSl9fV0pLGF9KFdlKSxXZS5EZWNyeXB0b3I9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWYoYSk7ZnVuY3Rpb24gYSgpe3JldHVybiByKHRoaXMsYSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG4oYSxbe2tleToicHJvY2Vzc0Jsb2NrIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2NpcGhlcixhPXIuYmxvY2tTaXplLG49ZS5zbGljZSh0LHQrYSk7ci5kZWNyeXB0QmxvY2soZSx0KSxxZS5jYWxsKHRoaXMsZSx0LGEpLHRoaXMuX3ByZXZCbG9jaz1ufX1dKSxhfShXZSk7dmFyIFhlPXtwYWQ6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9NCp0LGE9ci1lLnNpZ0J5dGVzJXIsbj1hPDwyNHxhPDwxNnxhPDw4fGEsaT1bXSxzPTA7czxhO3MrPTQpaS5wdXNoKG4pO3ZhciBvPUJlLmNyZWF0ZShpLGEpO2UuY29uY2F0KG8pfSx1bnBhZDpmdW5jdGlvbihlKXt2YXIgdD1lLHI9MjU1JnQud29yZHNbdC5zaWdCeXRlcy0xPj4+Ml07dC5zaWdCeXRlcy09cn19LFllPWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1mKGEpO2Z1bmN0aW9uIGEoZSxuLGkpe3ZhciBzO3JldHVybiByKHRoaXMsYSksKHM9dC5jYWxsKHRoaXMsZSxuLE9iamVjdC5hc3NpZ24oe21vZGU6V2UscGFkZGluZzpYZX0saSkpKS5ibG9ja1NpemU9NCxzfXJldHVybiBuKGEsW3trZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlO3AobyhhLnByb3RvdHlwZSksInJlc2V0Iix0aGlzKS5jYWxsKHRoaXMpO3ZhciB0PXRoaXMuY2ZnLHI9dC5pdixuPXQubW9kZTt0aGlzLl94Zm9ybU1vZGU9PT10aGlzLmNvbnN0cnVjdG9yLl9FTkNfWEZPUk1fTU9ERT9lPW4uY3JlYXRlRW5jcnlwdG9yOihlPW4uY3JlYXRlRGVjcnlwdG9yLHRoaXMuX21pbkJ1ZmZlclNpemU9MSksdGhpcy5fbW9kZT1lLmNhbGwobix0aGlzLHImJnIud29yZHMpLHRoaXMuX21vZGUuX19jcmVhdG9yPWV9fSx7a2V5OiJfZG9Qcm9jZXNzQmxvY2siLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fbW9kZS5wcm9jZXNzQmxvY2soZSx0KX19LHtrZXk6Il9kb0ZpbmFsaXplIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5jZmcucGFkZGluZztyZXR1cm4gdGhpcy5feGZvcm1Nb2RlPT09dGhpcy5jb25zdHJ1Y3Rvci5fRU5DX1hGT1JNX01PREU/KHQucGFkKHRoaXMuX2RhdGEsdGhpcy5ibG9ja1NpemUpLGU9dGhpcy5fcHJvY2VzcyghMCkpOihlPXRoaXMuX3Byb2Nlc3MoITApLHQudW5wYWQoZSkpLGV9fV0pLGF9KEhlKSxaZT1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZihhKTtmdW5jdGlvbiBhKGUpe3ZhciBuO3JldHVybiByKHRoaXMsYSksKG49dC5jYWxsKHRoaXMpKS5taXhJbihlKSxufXJldHVybiBuKGEsW3trZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4oZXx8dGhpcy5mb3JtYXR0ZXIpLnN0cmluZ2lmeSh0aGlzKX19XSksYX0oRWUpLFFlPXtzdHJpbmdpZnk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jaXBoZXJ0ZXh0LHI9ZS5zYWx0O3JldHVybihyP0JlLmNyZWF0ZShbMTM5ODg5MzY4NCwxNzAxMDc2ODMxXSkuY29uY2F0KHIpLmNvbmNhdCh0KTp0KS50b1N0cmluZyhNZSl9LHBhcnNlOmZ1bmN0aW9uKGUpe3ZhciB0LHI9TWUucGFyc2UoZSksYT1yLndvcmRzO3JldHVybiAxMzk4ODkzNjg0PT09YVswXSYmMTcwMTA3NjgzMT09PWFbMV0mJih0PUJlLmNyZWF0ZShhLnNsaWNlKDIsNCkpLGEuc3BsaWNlKDAsNCksci5zaWdCeXRlcy09MTYpLFplLmNyZWF0ZSh7Y2lwaGVydGV4dDpyLHNhbHQ6dH0pfX0sSmU9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWYoYSk7ZnVuY3Rpb24gYSgpe3JldHVybiByKHRoaXMsYSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG4oYSxudWxsLFt7a2V5OiJlbmNyeXB0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixhKXt2YXIgbj1PYmplY3QuYXNzaWduKG5ldyBFZSx0aGlzLmNmZyxhKSxpPWUuY3JlYXRlRW5jcnlwdG9yKHIsbikscz1pLmZpbmFsaXplKHQpLG89aS5jZmc7cmV0dXJuIFplLmNyZWF0ZSh7Y2lwaGVydGV4dDpzLGtleTpyLGl2Om8uaXYsYWxnb3JpdGhtOmUsbW9kZTpvLm1vZGUscGFkZGluZzpvLnBhZGRpbmcsYmxvY2tTaXplOmkuYmxvY2tTaXplLGZvcm1hdHRlcjpuLmZvcm1hdH0pfX0se2tleToiZGVjcnlwdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsYSl7dmFyIG49dCxpPU9iamVjdC5hc3NpZ24obmV3IEVlLHRoaXMuY2ZnLGEpO3JldHVybiBuPXRoaXMuX3BhcnNlKG4saS5mb3JtYXQpLGUuY3JlYXRlRGVjcnlwdG9yKHIsaSkuZmluYWxpemUobi5jaXBoZXJ0ZXh0KX19LHtrZXk6Il9wYXJzZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/dC5wYXJzZShlLHRoaXMpOmV9fV0pLGF9KEVlKTtKZS5jZmc9T2JqZWN0LmFzc2lnbihuZXcgRWUse2Zvcm1hdDpRZX0pO3ZhciAkZT17ZXhlY3V0ZTpmdW5jdGlvbihlLHQscixhKXt2YXIgbj1hO258fChuPUJlLnJhbmRvbSg4KSk7dmFyIGk9R2UuY3JlYXRlKHtrZXlTaXplOnQrcn0pLmNvbXB1dGUoZSxuKSxzPUJlLmNyZWF0ZShpLndvcmRzLnNsaWNlKHQpLDQqcik7cmV0dXJuIGkuc2lnQnl0ZXM9NCp0LFplLmNyZWF0ZSh7a2V5OmksaXY6cyxzYWx0Om59KX19LGV0PWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1mKGEpO2Z1bmN0aW9uIGEoKXtyZXR1cm4gcih0aGlzLGEpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBuKGEsbnVsbCxbe2tleToiZW5jcnlwdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsYSl7dmFyIG49T2JqZWN0LmFzc2lnbihuZXcgRWUsdGhpcy5jZmcsYSksaT1uLmtkZi5leGVjdXRlKHIsZS5rZXlTaXplLGUuaXZTaXplKTtuLml2PWkuaXY7dmFyIHM9SmUuZW5jcnlwdC5jYWxsKHRoaXMsZSx0LGkua2V5LG4pO3JldHVybiBzLm1peEluKGkpLHN9fSx7a2V5OiJkZWNyeXB0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixhKXt2YXIgbj10LGk9T2JqZWN0LmFzc2lnbihuZXcgRWUsdGhpcy5jZmcsYSk7bj10aGlzLl9wYXJzZShuLGkuZm9ybWF0KTt2YXIgcz1pLmtkZi5leGVjdXRlKHIsZS5rZXlTaXplLGUuaXZTaXplLG4uc2FsdCk7cmV0dXJuIGkuaXY9cy5pdixKZS5kZWNyeXB0LmNhbGwodGhpcyxlLG4scy5rZXksaSl9fV0pLGF9KEplKTtldC5jZmc9T2JqZWN0LmFzc2lnbihKZS5jZmcse2tkZjokZX0pO2Zvcih2YXIgdHQ9W10scnQ9W10sYXQ9W10sbnQ9W10saXQ9W10sc3Q9W10sb3Q9W10sdXQ9W10sY3Q9W10sbHQ9W10sZHQ9W10sZnQ9MDtmdDwyNTY7ZnQrPTEpZHRbZnRdPWZ0PDEyOD9mdDw8MTpmdDw8MV4yODM7Zm9yKHZhciBodD0wLHB0PTAsdnQ9MDt2dDwyNTY7dnQrPTEpe3ZhciB5dD1wdF5wdDw8MV5wdDw8Ml5wdDw8M15wdDw8NDt5dD15dD4+PjheMjU1Jnl0Xjk5LHR0W2h0XT15dCxydFt5dF09aHQ7dmFyIG10PWR0W2h0XSxndD1kdFttdF0sa3Q9ZHRbZ3RdLGJ0PTI1NypkdFt5dF1eMTY4NDMwMDgqeXQ7YXRbaHRdPWJ0PDwyNHxidD4+PjgsbnRbaHRdPWJ0PDwxNnxidD4+PjE2LGl0W2h0XT1idDw8OHxidD4+PjI0LHN0W2h0XT1idCxidD0xNjg0MzAwOSprdF42NTUzNypndF4yNTcqbXReMTY4NDMwMDgqaHQsb3RbeXRdPWJ0PDwyNHxidD4+PjgsdXRbeXRdPWJ0PDwxNnxidD4+PjE2LGN0W3l0XT1idDw8OHxidD4+PjI0LGx0W3l0XT1idCxodD8oaHQ9bXReZHRbZHRbZHRba3RebXRdXV0scHRePWR0W2R0W3B0XV0pOmh0PXB0PTF9dmFyIF90PVswLDEsMiw0LDgsMTYsMzIsNjQsMTI4LDI3LDU0XSx3dD1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZihhKTtmdW5jdGlvbiBhKCl7cmV0dXJuIHIodGhpcyxhKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gbihhLFt7a2V5OiJfZG9SZXNldCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZTtpZighdGhpcy5fblJvdW5kc3x8dGhpcy5fa2V5UHJpb3JSZXNldCE9PXRoaXMuX2tleSl7dGhpcy5fa2V5UHJpb3JSZXNldD10aGlzLl9rZXk7dmFyIHQ9dGhpcy5fa2V5UHJpb3JSZXNldCxyPXQud29yZHMsYT10LnNpZ0J5dGVzLzQ7dGhpcy5fblJvdW5kcz1hKzY7dmFyIG49NCoodGhpcy5fblJvdW5kcysxKTt0aGlzLl9rZXlTY2hlZHVsZT1bXTtmb3IodmFyIGk9dGhpcy5fa2V5U2NoZWR1bGUscz0wO3M8bjtzKz0xKXM8YT9pW3NdPXJbc106KGU9aVtzLTFdLHMlYT9hPjYmJnMlYT09NCYmKGU9dHRbZT4+PjI0XTw8MjR8dHRbZT4+PjE2JjI1NV08PDE2fHR0W2U+Pj44JjI1NV08PDh8dHRbMjU1JmVdKTooZT10dFsoZT1lPDw4fGU+Pj4yNCk+Pj4yNF08PDI0fHR0W2U+Pj4xNiYyNTVdPDwxNnx0dFtlPj4+OCYyNTVdPDw4fHR0WzI1NSZlXSxlXj1fdFtzL2F8MF08PDI0KSxpW3NdPWlbcy1hXV5lKTt0aGlzLl9pbnZLZXlTY2hlZHVsZT1bXTtmb3IodmFyIG89dGhpcy5faW52S2V5U2NoZWR1bGUsdT0wO3U8bjt1Kz0xKXt2YXIgYz1uLXU7ZT11JTQ/aVtjXTppW2MtNF0sb1t1XT11PDR8fGM8PTQ/ZTpvdFt0dFtlPj4+MjRdXV51dFt0dFtlPj4+MTYmMjU1XV1eY3RbdHRbZT4+PjgmMjU1XV1ebHRbdHRbMjU1JmVdXX19fX0se2tleToiZW5jcnlwdEJsb2NrIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX2RvQ3J5cHRCbG9jayhlLHQsdGhpcy5fa2V5U2NoZWR1bGUsYXQsbnQsaXQsc3QsdHQpfX0se2tleToiZGVjcnlwdEJsb2NrIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPWUsYT1yW3QrMV07clt0KzFdPXJbdCszXSxyW3QrM109YSx0aGlzLl9kb0NyeXB0QmxvY2socix0LHRoaXMuX2ludktleVNjaGVkdWxlLG90LHV0LGN0LGx0LHJ0KSxhPXJbdCsxXSxyW3QrMV09clt0KzNdLHJbdCszXT1hfX0se2tleToiX2RvQ3J5cHRCbG9jayIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsYSxuLGkscyxvKXtmb3IodmFyIHU9ZSxjPXRoaXMuX25Sb3VuZHMsbD11W3RdXnJbMF0sZD11W3QrMV1eclsxXSxmPXVbdCsyXV5yWzJdLGg9dVt0KzNdXnJbM10scD00LHY9MTt2PGM7dis9MSl7dmFyIHk9YVtsPj4+MjRdXm5bZD4+PjE2JjI1NV1eaVtmPj4+OCYyNTVdXnNbMjU1JmhdXnJbcF07cCs9MTt2YXIgbT1hW2Q+Pj4yNF1ebltmPj4+MTYmMjU1XV5pW2g+Pj44JjI1NV1ec1syNTUmbF1ecltwXTtwKz0xO3ZhciBnPWFbZj4+PjI0XV5uW2g+Pj4xNiYyNTVdXmlbbD4+PjgmMjU1XV5zWzI1NSZkXV5yW3BdO3ArPTE7dmFyIGs9YVtoPj4+MjRdXm5bbD4+PjE2JjI1NV1eaVtkPj4+OCYyNTVdXnNbMjU1JmZdXnJbcF07cCs9MSxsPXksZD1tLGY9ZyxoPWt9dmFyIGI9KG9bbD4+PjI0XTw8MjR8b1tkPj4+MTYmMjU1XTw8MTZ8b1tmPj4+OCYyNTVdPDw4fG9bMjU1JmhdKV5yW3BdO3ArPTE7dmFyIF89KG9bZD4+PjI0XTw8MjR8b1tmPj4+MTYmMjU1XTw8MTZ8b1toPj4+OCYyNTVdPDw4fG9bMjU1JmxdKV5yW3BdO3ArPTE7dmFyIHc9KG9bZj4+PjI0XTw8MjR8b1toPj4+MTYmMjU1XTw8MTZ8b1tsPj4+OCYyNTVdPDw4fG9bMjU1JmRdKV5yW3BdO3ArPTE7dmFyIHg9KG9baD4+PjI0XTw8MjR8b1tsPj4+MTYmMjU1XTw8MTZ8b1tkPj4+OCYyNTVdPDw4fG9bMjU1JmZdKV5yW3BdO3ArPTEsdVt0XT1iLHVbdCsxXT1fLHVbdCsyXT13LHVbdCszXT14fX1dKSxhfShZZSk7d3Qua2V5U2l6ZT04O3ZhciB4dD1ZZS5fY3JlYXRlSGVscGVyKHd0KSxTdD1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZihhKTtmdW5jdGlvbiBhKCl7cmV0dXJuIHIodGhpcyxhKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gbihhKX0oS2UpO1N0LkVuY3J5cHRvcj1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZihhKTtmdW5jdGlvbiBhKCl7cmV0dXJuIHIodGhpcyxhKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gbihhLFt7a2V5OiJwcm9jZXNzQmxvY2siLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZSxhPXRoaXMuX2NpcGhlcixuPWEuYmxvY2tTaXplLGk9dGhpcy5faXYscz10aGlzLl9jb3VudGVyO2kmJih0aGlzLl9jb3VudGVyPWkuc2xpY2UoMCkscz10aGlzLl9jb3VudGVyLHRoaXMuX2l2PXZvaWQgMCk7dmFyIG89cy5zbGljZSgwKTthLmVuY3J5cHRCbG9jayhvLDApLHNbbi0xXT1zW24tMV0rMXwwO2Zvcih2YXIgdT0wO3U8bjt1Kz0xKXJbdCt1XV49b1t1XX19XSksYX0oU3QpLFN0LkRlY3J5cHRvcj1TdC5FbmNyeXB0b3I7dmFyIEF0PXtwYWQ6ZnVuY3Rpb24oKXt9LHVucGFkOmZ1bmN0aW9uKCl7fX0sRHQ9e2RlY3J5cHRXb3JkQXJyYXk6ZnVuY3Rpb24oZSx0LHIpe3ZhciBhPVRlLnBhcnNlKHQpLG49VGUucGFyc2UocmUocikpLGk9QmUuY3JlYXRlKG5ldyBVaW50OEFycmF5KGUpKSxzPXh0LmRlY3J5cHQoWmUuY3JlYXRlKHtjaXBoZXJ0ZXh0Oml9KSxhLHtpdjpuLG1vZGU6U3QscGFkZGluZzpBdH0pO3JldHVybiBEdC53b3JkQXJyYXlUb1VpbnQ4QXJyYXkocyl9LHdvcmRBcnJheVRvVWludDhBcnJheTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5zaWdCeXRlcyxyPWUud29yZHMsYT1uZXcgVWludDhBcnJheSh0KSxuPTAsaT0wO24hPT10Oyl7dmFyIHM9cltpKytdO2lmKGFbbisrXT0oNDI3ODE5MDA4MCZzKT4+PjI0LG49PT10KWJyZWFrO2lmKGFbbisrXT0oMTY3MTE2ODAmcyk+Pj4xNixuPT09dClicmVhaztpZihhW24rK109KDY1MjgwJnMpPj4+OCxuPT09dClicmVhazthW24rK109MjU1JnN9cmV0dXJuIGF9LGRlY29kZXJBRVNDVFJEYXRhOmZ1bmN0aW9uKGUsdCxyKXtpZihlLnZpZGVvU2VuYyl7dmFyIGE9ZS5raWRWYWx1ZSxuPWUudmlkZW9TZW5jO2Uuc2FtcGxlcy5mb3JFYWNoKChmdW5jdGlvbih0LGkpe3ZhciBzPW5baV0sbz10LmRhdGEsdT1bXSxjPVtdLGw9cy5Jbml0aWFsaXphdGlvblZlY3RvcjtpZihzLnN1YnNhbXBsZXMmJnMuc3Vic2FtcGxlcy5sZW5ndGgpcy5zdWJzYW1wbGVzLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUuQnl0ZXNPZkNsZWFyRGF0YStlLkJ5dGVzT2ZQcm90ZWN0ZWREYXRhLHI9by5zbGljZSgwLHQpO3UucHVzaChyLnNsaWNlKDAsZS5CeXRlc09mQ2xlYXJEYXRhKSksYy5wdXNoKHIuc2xpY2UoZS5CeXRlc09mQ2xlYXJEYXRhKSksbz1vLnNsaWNlKHQpfSkpO2Vsc2V7dmFyIGQ9dC5zaXplO3UucHVzaChvLnNsaWNlKDAsMCkpLGMucHVzaChvLnNsaWNlKDAsZCkpLG89by5zbGljZShkKX12YXIgZj1uZXcgd2U7Zi53cml0ZS5hcHBseShmLGMpO3ZhciBoPXI/cihmLmJ1ZmZlcixhLGwpOkR0LmRlY3J5cHRXb3JkQXJyYXkoZi5idWZmZXIsYSxsKSxwPW5ldyB3ZTt1LmZvckVhY2goKGZ1bmN0aW9uKGUsdCl7dmFyIHI9Y1t0XS5sZW5ndGgsYT1oLnNsaWNlKDAscik7cC53cml0ZShlKSxwLndyaXRlKGEpLGg9aC5zbGljZShyKX0pKSxlLnNhbXBsZXNbaV0uZGF0YT1wLmJ1ZmZlcn0pKX1pZih0LmF1ZGlvU2VuYyl7dmFyIGk9dC5raWRWYWx1ZSxzPXQuYXVkaW9TZW5jO3Quc2FtcGxlcy5mb3JFYWNoKChmdW5jdGlvbihlLGEpe3ZhciBuPXNbYV0sbz1yP3IoZS5kYXRhLGksbi5Jbml0aWFsaXphdGlvblZlY3Rvcik6RHQuZGVjcnlwdFdvcmRBcnJheShlLmRhdGEsaSxuLkluaXRpYWxpemF0aW9uVmVjdG9yKTt0LnNhbXBsZXNbYV0uZGF0YT1vfSkpfX19LEV0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LGEsbixzKXt2YXIgbz10aGlzO3IodGhpcyxlKSxpKHRoaXMsIl92aWRlb1NhbXBsZXMiLFtdKSxpKHRoaXMsIl9hdWRpb1NhbXBsZXMiLFtdKSxpKHRoaXMsIl9sYXN0UmVtYWluQnVmZmVyIixbXSksaSh0aGlzLCJfbGFzdFJlbWFpbkJ1ZmZlclN0YXJ0UG9zIiwwKSx0aGlzLnZpZGVvVHJhY2s9bmV3IHosdGhpcy5hdWRpb1RyYWNrPW5ldyBNLHRoaXMubWV0YWRhdGFUcmFjaz1ufHxuZXcgTix0aGlzLmxvZz1uZXcgQWUoIk1QNERlbXV4ZXIiLCFzfHwhcy5vcGVuTG9nfHwhcy5vcGVuTG9nKSx0JiZ0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0Oyh0PW8uX3ZpZGVvU2FtcGxlcykucHVzaC5hcHBseSh0LHkoZS5mcmFtZXMpKX0pKSxhJiZhLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0Oyh0PW8uX2F1ZGlvU2FtcGxlcykucHVzaC5hcHBseSh0LHkoZS5mcmFtZXMpKX0pKX1yZXR1cm4gbihlLFt7a2V5OiJwYXJzZVNhbXBsZXMiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcigibW9vdiBpcyByZXF1aXJlZCIpO2lmKHRoaXMudmlkZW9UcmFjay5jb2RlY3x8dGhpcy5hdWRpb1RyYWNrLmNvZGVjfHwocGUubW9vdlRvVHJhY2soZSx0aGlzLnZpZGVvVHJhY2ssdGhpcy5hdWRpb1RyYWNrKSx0aGlzLnZpZGVvU2VuYz10aGlzLnZpZGVvVHJhY2sudmlkZW9TZW5jLHRoaXMuYXVkaW9TZW5jPXRoaXMuYXVkaW9UcmFjay5hdWRpb1NlbmMpLCF0aGlzLl9hdWRpb1NhbXBsZXMubGVuZ3RoJiYhdGhpcy5fdmlkZW9TYW1wbGVzLmxlbmd0aCl7dmFyIHQ9cGUubW9vdlRvU2FtcGxlcyhlKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoImNhbm5vdCBwYXJzZSBzYW1wbGVzIGZyb20gbW9vdiBib3giKTt0aGlzLl92aWRlb1NhbXBsZXM9dC52aWRlb1NhbXBsZXN8fFtdLHRoaXMuX2F1ZGlvU2FtcGxlcz10LmF1ZGlvU2FtcGxlc3x8W119fX0se2tleToiZGVtdXgiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLGEsbil7dGhpcy5wYXJzZVNhbXBsZXMobik7dmFyIGkscyxvLHU9dGhpcy52aWRlb1RyYWNrLGM9dGhpcy5hdWRpb1RyYWNrO2lmKHUuc2FtcGxlcz1bXSxjLnNhbXBsZXM9W10scil7Zm9yKHZhciBsLGQ9MCxmPXJbMF0saD1yWzFdO2Y8PWg7ZisrKXtpZighKGk9dGhpcy5fdmlkZW9TYW1wbGVzW2ZdKSl0aHJvdyBuZXcgRXJyb3IoImNhbm5vdCBmb3VuZCB2aWRlbyBmcmFtZSAjIi5jb25jYXQoZikpO289aS5vZmZzZXQtdCxzPWUuc3ViYXJyYXkobyxvK2kuc2l6ZSksKGw9bmV3IFIoaS5wdHN8fGkuZHRzLGkuZHRzKSkuZHVyYXRpb249aS5kdXJhdGlvbixsLmdvcElkPWkuZ29wSWQsaS5rZXlmcmFtZSYmbC5zZXRUb0tleWZyYW1lKCk7Zm9yKHZhciBwPTAsdj1zLmxlbmd0aC0xO3A8djspZD0kKHMscCkscCs9NCxsLnVuaXRzLnB1c2gocy5zdWJhcnJheShwLHArZCkpLHArPWQ7dS5zYW1wbGVzLnB1c2gobCl9dS5iYXNlTWVkaWFEZWNvZGVUaW1lPXUuc2FtcGxlc1swXS5kdHN9aWYoYSl7Zm9yKHZhciB5PWFbMF0sbT1hWzFdO3k8PW07eSsrKXtpZighKGk9dGhpcy5fYXVkaW9TYW1wbGVzW3ldKSl0aHJvdyBuZXcgRXJyb3IoImNhbm5vdCBmb3VuZCB2aWRlbyBmcmFtZSAjIi5jb25jYXQoeSkpO289aS5vZmZzZXQtdCxzPWUuc3ViYXJyYXkobyxvK2kuc2l6ZSksYy5zYW1wbGVzLnB1c2gobmV3IE8oaS5kdHMscyxpLmR1cmF0aW9uKSl9Yy5iYXNlTWVkaWFEZWNvZGVUaW1lPWMuc2FtcGxlc1swXS5kdHN9cmV0dXJue3ZpZGVvVHJhY2s6dSxhdWRpb1RyYWNrOmMsbWV0YWRhdGFUcmFjazp0aGlzLm1ldGFkYXRhVHJhY2t9fX0se2tleToiZGVtdXhQYXJ0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixhLG4saSxzLG8pe2lmKHRoaXMucGFyc2VTYW1wbGVzKG4pLHRoaXMudmlkZW9UcmFjay51c2VFTUU9aSx0aGlzLmF1ZGlvVHJhY2sudXNlRU1FPWksdGhpcy5fbGFzdFJlbWFpbkJ1ZmZlciYmdGhpcy5fbGFzdFJlbWFpbkJ1ZmZlci5ieXRlTGVuZ3RoPjAmJnQ+dGhpcy5fbGFzdFJlbWFpbkJ1ZmZlclN0YXJ0UG9zJiZ0PD10aGlzLl9sYXN0UmVtYWluQnVmZmVyU3RhcnRQb3MrdGhpcy5fbGFzdFJlbWFpbkJ1ZmZlci5ieXRlTGVuZ3RoKWZvcih2YXIgdT0wO3U8MjA7KXRyeXt2YXIgYz10aGlzLl9sYXN0UmVtYWluQnVmZmVyLnN1YmFycmF5KDAsdC10aGlzLl9sYXN0UmVtYWluQnVmZmVyU3RhcnRQb3MpLGw9bmV3IFVpbnQ4QXJyYXkoZS5ieXRlTGVuZ3RoK2MuYnl0ZUxlbmd0aCk7bC5zZXQoYywwKSxsLnNldChuZXcgVWludDhBcnJheShlKSxjLmJ5dGVMZW5ndGgpLGU9bCx0LT1jLmJ5dGVMZW5ndGgsdGhpcy5fbGFzdFJlbWFpbkJ1ZmZlcj1udWxsLHRoaXMuX2xhc3RSZW1haW5CdWZmZXJTdGFydFBvcz0wO2JyZWFrfWNhdGNoKEUpe2lmKCEodTwyMCkpdGhyb3cgbmV3IEVycm9yKCJuZXcgVWludDhBcnJheSBlcnJvcjosIitFLmVycm9yTWVzc2FnZSk7dSsrfXZhciBkLGYsaCxwPXRoaXMudmlkZW9UcmFjayx2PXRoaXMuYXVkaW9UcmFjaztwLnNhbXBsZXM9W10sdi5zYW1wbGVzPVtdLHAudmlkZW9TZW5jPW51bGwsdi5hdWRpb1NlbmM9bnVsbDt2YXIgeT0wLG09MDtpZih0aGlzLl92aWRlb1NhbXBsZXMubGVuZ3RoPjAmJnIubGVuZ3RoPjApe2Zvcih2YXIgZyxrPWUuYnl0ZUxlbmd0aCt0LGI9clswXTtiPD1yWzFdO2IrKyl7aWYoIShkPXRoaXMuX3ZpZGVvU2FtcGxlc1tiXSkpdGhyb3cgbmV3IEVycm9yKCJjYW5ub3QgZm91bmQgdmlkZW8gZnJhbWUgIyIuY29uY2F0KGIpKTtkLm9mZnNldD49dCYmZC5vZmZzZXQrZC5zaXplPD1rJiYoeT0oaD1kLm9mZnNldC10KStkLnNpemUsZj1lLnN1YmFycmF5KGgseSksKGc9bmV3IFIoZC5wdHN8fGQuZHRzLGQuZHRzKSkuZHVyYXRpb249ZC5kdXJhdGlvbixnLmdvcElkPWQuZ29wSWQsZy5zYW1wbGVPZmZzZXQ9ZC5pbmRleCxkLmtleWZyYW1lJiZnLnNldFRvS2V5ZnJhbWUoKSxnLmRhdGE9ZixnLnNpemU9ZC5zaXplLHAuc2FtcGxlcy5wdXNoKGcpKX1wLnNhbXBsZXMubGVuZ3RoPjAmJihwLmdvcElkPXAuc2FtcGxlc1swXS5nb3BJZCxwLmJhc2VNZWRpYURlY29kZVRpbWU9cC5zYW1wbGVzWzBdLmR0cyxwLnN0YXJ0UHRzPXAuc2FtcGxlc1swXS5wdHMvcC50aW1lc2NhbGUscC5lbmRQdHM9cC5zYW1wbGVzW3Auc2FtcGxlcy5sZW5ndGgtMV0ucHRzL3AudGltZXNjYWxlLHRoaXMudmlkZW9TZW5jJiYocC52aWRlb1NlbmM9dGhpcy52aWRlb1NlbmMuc2xpY2UocC5zYW1wbGVzWzBdLnNhbXBsZU9mZnNldCxwLnNhbXBsZXNbMF0uc2FtcGxlT2Zmc2V0K3Auc2FtcGxlcy5sZW5ndGgpLHAua2lkVmFsdWU9cykpfWlmKHRoaXMuX2F1ZGlvU2FtcGxlcy5sZW5ndGg+MCYmYS5sZW5ndGg+MCl7Zm9yKHZhciBfPWFbMF07Xzw9YVsxXTtfKyspe2lmKCEoZD10aGlzLl9hdWRpb1NhbXBsZXNbX10pKXRocm93IG5ldyBFcnJvcigiY2Fubm90IGZvdW5kIHZpZGVvIGZyYW1lICMiLmNvbmNhdChfKSk7ZC5vZmZzZXQ+PXQmJmQub2Zmc2V0K2Quc2l6ZTw9ZS5ieXRlTGVuZ3RoK3QmJihtPShoPWQub2Zmc2V0LXQpK2Quc2l6ZSxmPWUuc3ViYXJyYXkoaCxtKSx2LnNhbXBsZXMucHVzaChuZXcgTyhkLmR0cyxmLGQuZHVyYXRpb24sZC5pbmRleCkpKX12LnNhbXBsZXMubGVuZ3RoPjAmJih2LmdvcElkPXYuc2FtcGxlc1swXS5nb3BJZHx8cC5nb3BJZCx2LmJhc2VNZWRpYURlY29kZVRpbWU9di5zYW1wbGVzWzBdLmR0cyx2LnN0YXJ0UHRzPXYuc2FtcGxlc1swXS5wdHMvdi50aW1lc2NhbGUsdi5lbmRQdHM9di5zYW1wbGVzW3Yuc2FtcGxlcy5sZW5ndGgtMV0ucHRzL3YudGltZXNjYWxlLHRoaXMuYXVkaW9TZW5jJiYodi5hdWRpb1NlbmM9dGhpcy5hdWRpb1NlbmMuc2xpY2Uodi5zYW1wbGVzWzBdLnNhbXBsZU9mZnNldCx2LnNhbXBsZXNbMF0uc2FtcGxlT2Zmc2V0K3Yuc2FtcGxlcy5sZW5ndGgpLHYua2lkVmFsdWU9cykpfXRoaXMuZGVjb2RlckRhdGEocCx2LG8pO2Zvcih2YXIgdz0wLHg9MDt4PHAuc2FtcGxlcy5sZW5ndGg7eCsrKWZvcih2YXIgUz0wLEE9cC5zYW1wbGVzW3hdLmRhdGEsRD1BLmxlbmd0aC0xO1M8RDspdz0kKEEsUyksUys9NCxwLnNhbXBsZXNbeF0udW5pdHMucHVzaChBLnN1YmFycmF5KFMsUyt3KSksUys9dztyZXR1cm4gdGhpcy5fbGFzdFJlbWFpbkJ1ZmZlcj1lLnN1YmFycmF5KE1hdGgubWF4KHksbSkpLHRoaXMuX2xhc3RSZW1haW5CdWZmZXIuYnl0ZUxlbmd0aD4wP3RoaXMuX2xhc3RSZW1haW5CdWZmZXJTdGFydFBvcz10K2UuYnl0ZUxlbmd0aC10aGlzLl9sYXN0UmVtYWluQnVmZmVyLmJ5dGVMZW5ndGg6dGhpcy5fbGFzdFJlbWFpbkJ1ZmZlclN0YXJ0UG9zPTAse3ZpZGVvVHJhY2s6cCxhdWRpb1RyYWNrOnYsbWV0YWRhdGFUcmFjazp0aGlzLm1ldGFkYXRhVHJhY2t9fX0se2tleToicmVzZXQiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fdmlkZW9TYW1wbGVzPVtdLHRoaXMuX2F1ZGlvU2FtcGxlcz1bXSx0aGlzLl9sYXN0UmVtYWluQnVmZmVyPW51bGwsdGhpcy5fbGFzdFJlbWFpbkJ1ZmZlclN0YXJ0UG9zPTAsdGhpcy52aWRlb1RyYWNrLnJlc2V0KCksdGhpcy5hdWRpb1RyYWNrLnJlc2V0KCksdGhpcy5tZXRhZGF0YVRyYWNrLnJlc2V0KCl9fSx7a2V5OiJkZWNvZGVyRGF0YSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2UudXNlRU1FfHx0LnVzZUVNRXx8RHQuZGVjb2RlckFFU0NUUkRhdGEoZSx0LHIpfX1dLFt7a2V5OiJwcm9iZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHBlLnByb2JlKGUpfX1dKSxlfSgpLEJ0PXtub3dUaW1lOmZ1bmN0aW9uKCl7dHJ5e3JldHVybiBwYXJzZUludChwZXJmb3JtYW5jZS5ub3coKSwxMCl9Y2F0Y2goZSl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9fSxjb25jYXREYXRhOmZ1bmN0aW9uKGUsdCl7dmFyIHI9W10sYT0wO2UmJnIucHVzaChlKSx0JiZyLnB1c2godCksci5ldmVyeSgoZnVuY3Rpb24oZSl7cmV0dXJuIGUmJihhKz1lLmJ5dGVMZW5ndGgpLCEwfSkpO3ZhciBuPW5ldyBVaW50OEFycmF5KGEpLGk9MDtyZXR1cm4gci5ldmVyeSgoZnVuY3Rpb24oZSl7cmV0dXJuIGUmJihuLnNldChlLGkpLGkrPWUuYnl0ZUxlbmd0aCksITB9KSksbn19O29ubWVzc2FnZT1mdW5jdGlvbihlKXt2YXIgcj1lLmRhdGE7c3dpdGNoKHIubWV0aG9kKXtjYXNlImluaXQiOnRoaXMuY29kZWNUeXBlPXIuYXJncy5jb2RlY1R5cGUsdGhpcy5vcGVubG9nPXIuYXJncy5vcGVuTG9nLHRoaXMuTVA0RGVtdXhlcj1udWxsLHRoaXMuRk1QNFJlbXV4ZXI9bnVsbCx0aGlzLl9uZWVkSW5pdFNlZ21lbnQ9ITAsdGhpcy5zdXBwb3J0SGV2Yz1yLmFyZ3Muc3VwcG9ydEhldmM7YnJlYWs7Y2FzZSJ0cmFuc211eCI6dmFyIGE9ZS5kYXRhLmFyZ3Msbj1uZXcgVWludDhBcnJheShlLmRhdGEuYnVmZmVyKTt0aGlzLk1QNERlbXV4ZXJ8fCh0aGlzLk1QNERlbXV4ZXI9bmV3IEV0KG51bGwsbnVsbCxudWxsLHtvcGVubG9nOnRoaXMub3BlbmxvZ30pKTt2YXIgaSxzPXRoaXMuTVA0RGVtdXhlci5kZW11eFBhcnQobixhLnN0YXJ0LGEudmlkZW9JZHgsYS5hdWRpb0lkeCxhLm1vb3YsYS51c2VFTUUsYS5raWRWYWx1ZSk7aWYodGhpcy5GTVA0UmVtdXhlcnx8ImgyNjUiPT09dGhpcy5jb2RlY1R5cGUmJiF0aGlzLnN1cHBvcnRIZXZjfHwodGhpcy5GTVA0UmVtdXhlcj1uZXcgRGUodGhpcy5NUDREZW11eGVyLnZpZGVvVHJhY2ssdGhpcy5NUDREZW11eGVyLmF1ZGlvVHJhY2sse29wZW5Mb2c6dGhpcy5vcGVubG9nfSkpLHRoaXMuRk1QNFJlbXV4ZXIpe3ZhciBvPXRoaXMuRk1QNFJlbXV4ZXIucmVtdXgodGhpcy5fbmVlZEluaXRTZWdtZW50LHtpbml0TWVyZ2U6ITB9KTtvLmluaXRTZWdtZW50JiYodGhpcy5fbmVlZEluaXRTZWdtZW50PSExKSxpPXtidWZmZXI6QnQuY29uY2F0RGF0YShvLmF1ZGlvU2VnbWVudCxvLnZpZGVvU2VnbWVudCkscmFuZ2U6YS5jb250ZXh0LnJhbmdlLHN0YXRlOmEuY29udGV4dC5zdGF0ZSxjb250ZXh0OntyYW5nZTphLmNvbnRleHQucmFuZ2UsZnJhZ0luZGV4OmEuY29udGV4dC5mcmFnSW5kZXgsc3RhcnRQdHM6TWF0aC5taW4ocy52aWRlb1RyYWNrLnN0YXJ0UHRzLHMuYXVkaW9UcmFjay5zdGFydFB0cyksZW5kUHRzOk1hdGgubWF4KHMudmlkZW9UcmFjay5lbmRQdHMscy5hdWRpb1RyYWNrLmVuZFB0cyl9LGluaXRTZWc6by5pbml0U2VnbWVudH19dGhpcy5wb3N0TWVzc2FnZSh7bWV0aG9kOiJ0cmFuc211eCIsaWQ6ZS5kYXRhLmlkLGFyZ3M6dCh7fSxpKX0pO2JyZWFrO2Nhc2UicmVzZXQiOnRoaXMuRk1QNFJlbXV4ZXImJnRoaXMuRk1QNFJlbXV4ZXIucmVzZXQoKSx0aGlzLk1QNERlbXV4ZXImJnRoaXMuTVA0RGVtdXhlci5yZXNldCgpLHRoaXMuRk1QNFJlbXV4ZXI9bnVsbCx0aGlzLk1QNERlbXV4ZXI9bnVsbCx0aGlzLl9uZWVkSW5pdFNlZ21lbnQ9ITB9fX0oKTsK",Cn=typeof window<"u"&&window.Blob&&new Blob([atob(Ma)],{type:"text/javascript;charset=utf-8"});function Ch(){var a=Cn&&(window.URL||window.webkitURL).createObjectURL(Cn);try{return a?new Worker(a,{}):new Worker("data:application/javascript;base64,"+Ma,{type:"module"})}finally{a&&(window.URL||window.webkitURL).revokeObjectURL(a)}}var Xh=function(a){Ct(s,a);var r=Xt(s);function s(i){var e;return Us(this,s),e=r.call(this),e.openlog=i.openLog,e.codecType=i.codecType,e.supportHevc=i.supportHevc,e.worker=new Ch,e.worker.onmessage=function(t){e.emit(t.data.method,t.data)},e.worker.postMessage({method:"init",id:i.id||0,args:{openlog:e.openlog,supportHevc:e.supportHevc,codecType:e.codecType}}),e}return zs(s,[{key:"transmux",value:function(e,t,n,l,h,o,u,p,c){var k=t.buffer;this.worker&&this.worker.postMessage({method:"transmux",id:e,buffer:k,args:{start:n,videoIdx:l,audioIdx:h,moov:o,useEME:u,kidValue:p,context:c}},[k])}},{key:"reset",value:function(){this.worker&&this.worker.postMessage({method:"reset"})}},{key:"destroy",value:function(){this.worker&&this.worker.terminate()}}]),s}(Fs),we={ERROR:"error",META_READY:"metaReady",MOOV_REQ_PROGRESS:"moov_request_Progress",UPDATE_LOAD_IDX:"update_load_fragmentIdx"},wh=function(a){Ct(s,a);var r=Xt(s);function s(i,e){var t;if(Us(this,s),t=r.call(this),Ne(ge(t),"onprogressDataArrive",function(){var n=Ce(ie().mark(function l(h,o,u){var p;return ie().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:h&&h.byteLength>0&&(p=t.timeRange[u.index].range,p&&u.range[1]>=p[1]&&!o&&(o=!0),t.log("[mp4.loadFragment onprogressDataArrive ] receive data, >>> index,",u.index,",range,",JSON.stringify(u.range),", dataLen,",h.byteLength),t._mux(h,u.range[0],u.index,o)),o&&(t.timeRange[u.index].downloaded=!0,t.bufferLoadedPos=-1,t.log("[FragLoadDowned],fragmentIdx,",u.index,",rangeEnd,",u.range[1]));case 2:case"end":return k.stop()}},l)}));return function(l,h,o){return n.apply(this,arguments)}}()),t.url=i,t.options=s.getDefaultConfig(),Object.keys(e).map(function(n){e[n]!==void 0&&e[n]!==null&&(t.options[n]=e[n])}),t.timeRange=[],t.CHUNK_SIZE=t.options.chunkSize,t.bufferLoaded=new Uint8Array(0),t.bufferLoadedPos=0,t.meta=null,t.videoTrak=null,t.audioTrak=null,t.canDownload=!0,t._loadSuccessCallBack=null,t._isPending=!1,t._metaLoading=!1,t.MP4Loader=new vh(Zs(Zs({segmentDuration:t.options.segmentDuration,url:i,vid:e.vid,retry:t.options.retryCount,retryDelay:t.options.retryDelay,timeout:t.options.timeout},e.reqOptions),{},{openLog:Os()})),t.MP4Demuxer=null,t.FMP4Remuxer=null,t._needInitSegment=!0,t._switchBitRate=!1,t.enableWorker=t.options.enableWorker,t.enableWorker&&typeof Worker<"u")try{t.workerSequence=0,t.transmuxerWorkerControl=new Xh({id:t.workerSequence,codecType:e.codecType,supportHevc:t.options.supportHevc,openLog:Os()}),t.transmuxerWorkerControl.on("transmux",function(n){var l=n.args;t.log("[transmuxerworker end] ,range, ",JSON.stringify(l.range),",dataLen,",l.buffer.byteLength,l.context),t._loadSuccessCallBack&&t._loadSuccessCallBack(l)})}catch(n){t.log("Error in worker:",n),t.enableWorker=!1,t.transmuxerWorkerControl=null}return t.enableWorker||(t.MP4Demuxer=null,t.FMP4Remuxer=null),t.seekTime=-1,t.changeBitRateTime=-1,t}return zs(s,[{key:"changeBitRate",value:function(){var i=Ce(ie().mark(function t(n){return ie().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return this.url=n.url,h.next=3,this.MP4Loader.changeUrl(this.url,this.options.vid+Date.now(),this.CHUNK_SIZE);case 3:this._switchBitRate=!0,this.log("[switchBitrate] changeUrl, bitRate,",this.url);case 5:case"end":return h.stop()}},t,this)}));function e(t){return i.apply(this,arguments)}return e}()},{key:"log",value:function(e){for(var t=this.options,n=t&&t.vid?"[MP4] ".concat(t.vid," ").concat(e):"[MP4] ".concat(e),l=arguments.length,h=new Array(l>1?l-1:0),o=1;o<l;o++)h[o-1]=arguments[o];Va.apply(void 0,[n].concat(h))}},{key:"errorHandler",value:function(){var i=Ce(ie().mark(function t(n,l){var h,o,u,p;return ie().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:h=n.response,o=n.message,u=this.options?this.options.vid:"",p=null,this._isPending=!0,h?(p=new eh("network",h.status,{httpText:h.httpText,message:o,url:h.url}),this.emit(we.ERROR,p)):(console.log("[MP4] [".concat(u,"] errorHandler,"),n),p=n,this.emit(we.ERROR,p));case 6:case"end":return k.stop()}},t,this)}));function e(t,n){return i.apply(this,arguments)}return e}()},{key:"init",value:function(){var i=Ce(ie().mark(function t(){return ie().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this.url){l.next=3;break}return l.next=3,this.MP4Loader.changeUrl(this.url,this.options.vid+Date.now(),this.CHUNK_SIZE);case 3:return l.next=5,this.getMetaInfo();case 5:case"end":return l.stop()}},t,this)}));function e(){return i.apply(this,arguments)}return e}()},{key:"getTimeRange",value:function(){for(var e=[],t=null,n=0;this.videoTrak&&n<this.videoTrak.length;n++)t={startTime:this.videoTrak[n].startTime,endTime:this.videoTrak[n].endTime,downloaded:!1,isLoading:!1},e.push(t);if(this.audioTrak&&this.audioTrak.length>e.length)for(var l=e.length;l<this.audioTrak.length;l++)t={startTime:Math.max(this.audioTrak[l].startTime,t?t.endTime:0),endTime:Math.max(this.audioTrak[l].endTime,t?t.endTime:0),downloaded:!1,isLoading:!1},e.push(t);return e}},{key:"getMetaInfo",value:function(){var i=Ce(ie().mark(function t(){var n=this,l,h,o,u=arguments;return ie().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=u.length>0&&u[0]!==void 0?u[0]:!0,c.prev=1,this._metaLoading=!0,this.log("getMetaInfo start"),this.bufferLoaded=new Uint8Array(0),h=0,o=function(){var k=Ce(ie().mark(function f(b,g,E){var L;return ie().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:n.log("getMetaInfo onProgressHandle, dataLen,",b?b.byteLength:-1,", state,",g,",range,",JSON.stringify(E.range)),b&&E.range[0]===h&&(n.bufferLoaded=$l(Uint8Array,n.bufferLoaded,new Uint8Array(b)),h+=b.byteLength),E.meta&&!n.meta&&(L=E.meta,n.videoTrak=L.videoSegments,n.audioTrak=L.audioSegments,n.timeRange=n.getTimeRange(),n.meta=Zs(Zs({},L.meta),{},{ext:{videoTrak:n.videoTrak,audioTrak:n.audioTrak}}),L.bufferLoaded=n.bufferLoaded,n.log("meta reach"),l&&n.emit(we.META_READY,n.meta)),n.meta&&g&&(n.log("[getMetaInfo req end]"),n._metaLoading=!1),n.meta&&(b||g)&&(n.log("emit moov_req_progress"),n.emit(we.MOOV_REQ_PROGRESS));case 5:case"end":return F.stop()}},f)}));return function(b,g,E){return k.apply(this,arguments)}}(),c.next=9,this.MP4Loader.loadMetaProcess(this.MP4Loader.cache,[0,this.CHUNK_SIZE],o);case 9:c.next=15;break;case 11:c.prev=11,c.t0=c.catch(1),console.error("[MP4] trigger errorHandler getMetaInfo",c.t0===null||c.t0===void 0?void 0:c.t0.message),this.loadError(c.t0,"getMetaInfo");case 15:case"end":return c.stop()}},t,this,[[1,11]])}));function e(){return i.apply(this,arguments)}return e}()},{key:"getFragmentIdx",value:function(e){var t,n;if(this.videoTrak.length){if(t=this.videoTrak.find(function(h){return h.startTime<=e&&h.endTime>e}),n=this.audioTrak.find(function(h){return h.startTime<=e&&h.endTime>e}),t&&n)return Math.min(t.index,n.index);if(t||n)return t?t.index:n.index;var l=Number.MAX_VALUE;return this.videoTrak&&this.videoTrak.length>0&&(l=this.videoTrak.length-1),this.audioTrak&&this.audioTrak.length>0&&(l=Math.min(this.audioTrak.length-1,l)),l}else return n=this.audioTrak.find(function(h){return h.startTime<=e&&h.endTime>e}),n?n.index:0}},{key:"_checkHasMeta",value:function(){var i=Ce(ie().mark(function t(){var n;return ie().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return this.log(" loadMeta start"),this._metaLoading=!0,h.next=4,this.MP4Loader.loadMeta(this.MP4Loader.cache,Math.round(this.CHUNK_SIZE/2));case 4:return n=h.sent,this._metaLoading=!1,this.videoTrak=n.videoSegments,this.audioTrak=n.audioSegments,this.meta=Zs(Zs({},n.meta),{},{ext:{videoTrak:this.videoTrak,audioTrak:this.audioTrak}}),this.timeRange=this.getTimeRange(),this.bufferLoaded=new Uint8Array(0),n.bufferLoaded=this.bufferLoaded,h.abrupt("return",!0);case 13:case"end":return h.stop()}},t,this)}));function e(){return i.apply(this,arguments)}return e}()},{key:"resetFragmentLoadState",value:function(e){for(var t=0;t<this.timeRange.length;t++)t<e?(this.timeRange[t].downloaded=!0,this.timeRange[t].isLoading=!0):(this.timeRange[t].downloaded=!1,this.timeRange[t].isLoading=!1)}},{key:"getFragRange",value:function(e){var t,n,l,h,o=null;this.videoTrak&&(o=e<this.videoTrak.length?this.videoTrak[e]:this.videoTrak[this.videoTrak.length-1]);var u=null;this.audioTrak&&(u=e<this.audioTrak.length?this.audioTrak[e]:this.audioTrak[this.audioTrak.length-1]);var p=0,c=0;this.videoTrak&&e>=this.videoTrak.length-1&&(p=-1),this.audioTrak&&e>=this.audioTrak.length-1&&(c=-1);var k=[Math.min(((t=o)===null||t===void 0?void 0:t.range[0])||1/0,((n=u)===null||n===void 0?void 0:n.range[0])||1/0),Math.max(((l=o)===null||l===void 0?void 0:l.range[1])+p||0,((h=u)===null||h===void 0?void 0:h.range[1])+c||0)];return e<this.timeRange.length&&(this.timeRange[e].range=k),k}},{key:"load",value:function(){var i=Ce(ie().mark(function t(n,l){var h,o,u;return ie().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this._loadSuccessCallBack=l,!(this._switchBitRate&&!this._metaLoading)){c.next=12;break}return this.log("[switchBitrate], switch bitRate start load, time,",n>=this.videoTrak.length?this.audioTrak[n].startTime:this.videoTrak[n].startTime,", fragIndex,",n),c.next=5,this._checkHasMeta();case 5:h=c.sent,this.changeBitRateTime>0&&(this.timeRange[n].startTime<=this.changeBitRateTime&&this.changeBitRateTime<this.timeRange[n].endTime?this.log("[switchBitrate], not need update load fragIndex",n,",stTime,",this.changeBitRateTime):(n=this.getFragmentIdx(this.changeBitRateTime),this.log("[switchBitrate], need update load fragIndex",n,",stTime,",this.changeBitRateTime,",newBitrateTimeRange,",this.timeRange[n].startTime,"-",this.timeRange[n].endTime),this.emit(we.UPDATE_LOAD_IDX,n)),this.seekTime=this.changeBitRateTime,this.changeBitRateTime=-1),this.resetFragmentLoadState(n),this.log("[switchBitrate], reset timerange state,",n),this._needInitSegment=!0,this.resetTansmuxer(),h&&(this._switchBitRate=!1);case 12:if(!(this._switchBitRate&&this._metaLoading)){c.next=14;break}return c.abrupt("return");case 14:o=this.getFragRange(n),this.log("loadFragment,",n,",range,",JSON.stringify(o)),this.seekTime>0?(u=this.getSubRange(n,this.seekTime,o),this.loadFragment(n,u),this.seekTime=-1):this.loadFragment(n,o);case 17:case"end":return c.stop()}},t,this)}));function e(t,n){return i.apply(this,arguments)}return e}()},{key:"getSubRange",value:function(e,t,n){var l=n[0],h=n[0],o=1,u=!1;if(this.log(">>>>>getSubRange time,",t,JSON.stringify(n)),this.videoTrak){var p=e<this.videoTrak.length?this.videoTrak[e]:this.videoTrak[this.videoTrak.length-1],c=p.frames.filter(Gh),k=this.meta.videoTimescale,f=c[0].startTime/k;this.log(">>>>>getSubRange video, startTime,",p.startTime,",endTime,",p.endTime);for(var b=0;b<c.length;b++)this.log(">>>>>getSubRange video keyFrameList, startTime,",c[b].startTime/k,",range,",c[b].offset);for(;o<c.length;o++){var g=c[o].startTime/k;if(f<=t&&t<g&&n[0]<c[o-1].offset){l=c[o-1].offset,u=!0,this.log(">>>>>getSubRange video end, startTime,",f,",endTime,",g,",startRange,",l,", keyFrameIndex,",o-1);break}f=g}!u&&f<=t&&t<p.endTime+.8&&(l=c[o-1].offset,this.log(">>>>>getSubRange video last, startTime,",f,",endTime,",p.endTime,",startRange,",l))}if(o=1,this.audioTrak){var E=e<this.audioTrak.length?this.audioTrak[e]:this.audioTrak[this.audioTrak.length-1],L=E.frames,C=this.meta.audioTimescale;o=Math.floor((t*C-L[0].startTime)/E.frames[0].duration),o=Math.min(L.length-1,o);for(var F=o>0?L[o-1].startTime/C:L[0].startTime/C;o>=0&&o<L.length;){if(o>0&&F>t){o-=1,F=L[o].startTime/C;continue}var Z=(L[o].startTime+L[o].duration)/C;if(F<=t&&t<Z&&n[0]<L[o].offset){h=L[o].offset,u=!0,this.log(">>>>>getSubRange audio end, startTime,",F,",endTime,",Z,",startRange,",h,", index,",o);break}F=Z,o++}}var X=[Math.min(h,l),n[1]];return this.log(">>>>>getSubRange finalRange ",JSON.stringify(X),",oldRange,",JSON.stringify(n)),X}},{key:"_mux",value:function(e,t,n,l){var h=this.getSamplesRange(n,"video"),o=this.getSamplesRange(n,"audio"),u=[t,t+e.byteLength];if(this.transmuxerWorkerControl){var p={range:u,state:l,fragIndex:n};this.log("[transmuxerworker start] ,range, ",JSON.stringify(u),",dataLen,",e.byteLength,p),this.transmuxerWorkerControl.transmux(this.workerSequence,e,t,h,o,this.meta.moov,this.useEME,this.kidValue,p)}else try{this.MP4Demuxer||(this.MP4Demuxer=new yl(this.videoTrak,this.audioTrak,null,{openLog:Os()}));var c=this.MP4Demuxer.demuxPart(e,t,h,o,this.meta.moov,this.useEME,this.kidValue);!this.FMP4Remuxer&&(!this.checkCodecH265()||this.options.supportHevc)&&(this.FMP4Remuxer=new Lt(this.MP4Demuxer.videoTrack,this.MP4Demuxer.audioTrack,{openLog:Os()}));var k;this.log("[mux], videoTimeRange,",c.videoTrack?[c.videoTrack.startPts,c.videoTrack.endPts]:null,",audioTimeRange,",c.audioTrack?[c.audioTrack.startPts,c.audioTrack.endPts]:null);var f=Math.min(c.videoTrack.startPts,c.audioTrack.startPts),b=Math.max(c.videoTrack.endPts,c.audioTrack.endPts),g=[f,b];if(this.FMP4Remuxer){var E=this.FMP4Remuxer.remux(this._needInitSegment,{initMerge:!0,range:u});E.initSegment&&(this._needInitSegment=!1);var L=is.concatData(E.audioSegment,E.videoSegment);k={buffer:L,range:u,state:l,context:{range:u,fragIndex:n,timeRange:g},initSeg:E.initSegment}}else k={videoTrack:c.videoTrack,audioTrack:c.audioTrack,buffer:null,range:u,state:l,context:{range:u,fragIndex:n,timeRange:g}};this._loadSuccessCallBack&&this._loadSuccessCallBack(k)}catch(F){console.error("mux err:",F);var C=new sh(Ws.remux,Es.muxError,{msg:JSON.stringify(F)});this.errorHandler(C,"mux",{fragIndex:n,range:[t,t+e.byteLength]})}}},{key:"getSamplesRange",value:function(e,t){var n=[];switch(t){case"video":if(this.videoTrak&&e<this.videoTrak.length){var l=this.videoTrak[e].frames;n.push(l[0].index),n.push(l[l.length-1].index)}break;case"audio":if(this.audioTrak&&e<this.audioTrak.length){var h=this.audioTrak[e].frames;n.push(h[0].index),n.push(h[h.length-1].index)}break;default:console.warn("[getSamplesRange] type ",t," is invalid");break}return n}},{key:"loadFragment",value:function(){var i=Ce(ie().mark(function t(n,l){var h,o,u,p;return ie().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!(this._isPending||l===[0,0]||this.timeRange[n].isLoading)){k.next=2;break}return k.abrupt("return");case 2:if(this.log("[MP4.loadFragment] ,fragIndex,",n,",range ",l,",len ,",l[1]-l[0],", bufferLoaded_Len,",this.bufferLoaded.byteLength),!(l.length>=2&&l[1]&&l[1]>0&&l[1]<=this.bufferLoaded.byteLength)){k.next=13;break}this.timeRange[n].isLoading=!0,h=Math.max(l[0],this.bufferLoadedPos),o=new Uint8Array(this.bufferLoaded.slice(h,l[1])),this.log("[mp4.loadFragment] has all data: ",h,l[1]),this.timeRange[n].downloaded=!0,this.bufferLoadedPos=-1,this._mux(o,h,n,!0),k.next=34;break;case 13:if(!(l.length>=2&&l[0]&&l[0]<=this.bufferLoaded.byteLength)){k.next=29;break}if(this.timeRange[n].isLoading){k.next=27;break}if(u=Math.max(l[0],this.bufferLoadedPos),p=new Uint8Array(this.bufferLoaded.slice(u,l[1])),!(p.byteLength>0)){k.next=22;break}return this.bufferLoadedPos=u+p.byteLength,this.log("[mp4.loadFragment] has part data: ",u,u+p.byteLength),this._mux(p,u,n,l[1]<=this.bufferLoadedPos),k.abrupt("return");case 22:if(!(!this._metaLoading&&!this.timeRange[n].isLoading)){k.next=27;break}return this.log("[mp4.loadFragment] ready to load part data >>> ",this.bufferLoaded.byteLength,l[1]),this.timeRange[n].isLoading=!0,k.next=27,this.startLoad([this.bufferLoaded.byteLength,l[1]],n);case 27:k.next=34;break;case 29:if(!((!this._metaLoading||l[0]>=this.CHUNK_SIZE)&&!this.timeRange[n].isLoading)){k.next=34;break}return this.timeRange[n].isLoading=!0,this.log("[mp4.loadFragment],ready to load all data ,segmentIdx, ",n,",range >>> ",JSON.stringify(l)),k.next=34,this.startLoad(l,n);case 34:case"end":return k.stop()}},t,this)}));function e(t,n){return i.apply(this,arguments)}return e}()},{key:"startLoad",value:function(){var i=Ce(ie().mark(function t(n,l){return ie().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,this.MP4Loader.loadData(n,this.MP4Loader.cache,{index:l,onProgress:this.onprogressDataArrive,onProcessMinLen:this.options.onProcessMinLen});case 3:o.next=9;break;case 5:o.prev=5,o.t0=o.catch(0),console.error("[MP4] trigger errorHandler getMetaInfo",o.t0===null||o.t0===void 0?void 0:o.t0.message),this.loadError(o.t0,"loadFragment",{range:n,fragIndex:l});case 9:case"end":return o.stop()}},t,this,[[0,5]])}));function e(t,n){return i.apply(this,arguments)}return e}()},{key:"loadError",value:function(e,t,n){var l;!e.response&&(e.response={}),e.isTimeout?e.response.status="timeout":e!=null&&(l=e.response)!==null&&l!==void 0&&l.status||(e.response.status="networkError"),this.errorHandler(e,t,n)}},{key:"cancelLoading",value:function(){var i=Ce(ie().mark(function t(){return ie().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.MP4Loader;case 2:if(l.t0=l.sent,!l.t0){l.next=5;break}this.MP4Loader.cancel();case 5:case"end":return l.stop()}},t,this)}));function e(){return i.apply(this,arguments)}return e}()},{key:"update",value:function(e){this.url=e}},{key:"checkCodecH265",value:function(){var e=this.meta&&(this.meta.videoCodec.indexOf("hvc1")>-1||this.meta.videoCodec.indexOf("hev1")>-1);return e}},{key:"destroy",value:function(){this.hasDestroyed||(this.resetTansmuxer(),this.transmuxerWorkerControl&&this.transmuxerWorkerControl.destroy(),this._isPending=!1,this._metaLoading=!1,this.bufferLoadedPos=0,this.bufferLoaded=new Uint8Array(0),this.MP4Loader&&(this.MP4Loader.cancel(),this.MP4Loader.destroy()),this.hasDestroyed=!0)}},{key:"resetTansmuxer",value:function(){this.MP4Demuxer&&this.MP4Demuxer.reset(),this.MP4Demuxer=null,this.FMP4Remuxer&&this.FMP4Remuxer.reset(),this.FMP4Remuxer=null,this.transmuxerWorkerControl&&this.transmuxerWorkerControl.reset()}}],[{key:"getDefaultConfig",value:function(){return{segmentDuration:5,onProcessMinLen:1024,chunkSize:8e5,retryCount:3,retryDelay:1e3,timeout:3e3,enableWorker:!1,playerId:"",vid:"",ext:{}}}}]),s}(Fs);function Gh(a){if(a.keyframe)return a}var Wh=function(){function a(r){Us(this,a),this.onTick_=r,this.cancelPending_=null}return zs(a,[{key:"tickAfter",value:function(s){var i=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.stop();var t=!0,n=null;this.cancelPending_=function(){window.clearTimeout(n),t=!1};var l=function(){t&&(i.onTick_(),e&&e())};return n=window.setTimeout(l,s*1e3),this}},{key:"tickEvery",value:function(s){var i=this;this.tickAfter(s,function(){i.tickEvery(s)})}},{key:"stop",value:function(){this.cancelPending_&&(this.cancelPending_(),this.cancelPending_=null)}}]),a}(),Xn=null,Th=null,wn=null,Gn=null,Rh=function(a){Ct(s,a);var r=Xt(s);function s(i){var e;return Us(this,s),e=r.call(this,i),Ne(ge(e),"_onMp4DataCallBack",function(){e._isMseInit&&e._onTimeUpdate()}),Ne(ge(e),"_onMp4MetaReady",function(t){var n=ge(e),l=n.config,h=e.mp4.checkCodecH265();try{if(h&&!e.config.supportHevc){var o="browser not support HEVC",u=new Ds(e.player,{errorType:"runtime",errorTypeCode:Ws.runtime,errorCode:Es.h265Error,errorMessage:o,vid:l.vid,mediaError:{code:Es.h265Error,message:o}});e._errorHandler(u)}else e._initMse(t)}catch(k){var p=new Ds(e.player,{errorType:"runtime",errorTypeCode:Ws.runtime,errorCode:Es.mse,errorMessage:k==null?void 0:k.message,vid:l.vid,mediaError:{code:Es.other1,message:k==null?void 0:k.message}});e._errorHandler(p)}finally{var c=e.config.url;e.mse&&(c=e.mse.url,e._proxyPlayer()),e.player._startInit.call(e.player,c)}e._loadData()}),Ne(ge(e),"_onMp4Error",function(t){var n=e.playerConfig.vid;console.error("[Index] _onMp4Error",n,t),e._errorHandler(t)}),Ne(ge(e),"_loadDataSuccess",function(t){if(!(e.isDestroy||!e.mse)){e.log("[loadFragment] _loadDataSuccess ",JSON.stringify(t.context.range),",dataLen,",t.buffer?t.buffer.byteLength:0,t.state);try{t.initSeg&&(e._appendInitSeg(t.initSeg),(!t.buffer||t.buffer.byteLength<1)&&(e.log("no data, must load data"),e._onTimeUpdate()));var n=t.buffer,l=t.state,h=t.context;if(e.mse&&l&&(!n||n.byteLength<=0)&&h.fragIndex===e.mp4.timeRange.length-1){var o=e.player.buffered;o&&o.length>0&&(e.bufferEndTime=o.end(o.length-1)),e._isEnded(),e.log("loaded ended !!!==>>>",JSON.stringify(h.range),", fragIndex,",h.fragIndex,", bufferEndTime,",e.bufferEndTime,",meta_duration,",e.mp4.meta.duration)}if(e.mse&&l&&h.fragIndex===e.mp4.timeRange.length-1&&(!n||n.byteLength<=0)){var u=e.player.buffered;u&&u.length>0&&(e.bufferEndTime=u.end(u.length-1)),e._isEnded(),e.log("load ended !!!==>>>",e.playerConfig.vid,JSON.stringify(h.range),", fragIndex,",h.fragIndex,", bufferEndTime,",e.bufferEndTime,",meta_duration,",e.mp4.meta.duration)}n&&e.mse&&n&&n.byteLength>0&&e._appendBuffer(ce.VIDEO,n,h,l)}catch(c){e.log("appendBuffer error",c);var p=new Ds(e.player,{errorType:"runtime",errorTypeCode:Ws.runtime,errorCode:Es.mse,vid:e.player.config.vid,errorMessage:c.message,mediaError:{code:Es.mse,message:c.message}});e._errorHandler(p)}t!=null&&t.state&&e._onTimeUpdate()}}),Ne(ge(e),"_onWaiting",function(){var t=ge(e),n=t.player,l=t.config;clearTimeout(e._waitInBufferTimer),e._waitInBufferTimer=null;var h=n.currentTime;console.log("[>>>>onWaiting],currentTime, ",h,is.nowTime());var o=n.bufferedPoint;o.end>0&&o.end-n.currentTime>=2&&e._waitAdjustTimeCnt<l.waitJampBufferMaxCnt&&(e._waitInBufferTimer=setTimeout(function(){e._waitAdjustTimeCnt++,n.currentTime=n.currentTime+.5,e.log("[waitInBufferTimeout], waitAdjustTimeCnt,",e._waitAdjustTimeCnt,",curtime,",h,is.nowTime())},l.waitingInBufferTimeOut))}),Ne(ge(e),"_onSeeking",Ce(ie().mark(function t(){var n,l,h,o,u,p,c,k,f,b,g;return ie().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(n=ge(e),l=n.player,h=n.mp4,o=l.currentTime,e.log("[seekTime], curTime,",o,",buffer,",l.buffered2.bufferedList),!(!h||!h.meta)){L.next=5;break}return L.abrupt("return");case 5:if(e.endofstream=!1,h.bufferLoadedPos=-1,h._metaLoading=!1,u=l.bufferedPoint,p=!1,c=0,!(u.end>0)){L.next=25;break}if(p=!0,!(h.meta.duration-u.end<.5)){L.next=17;break}return e._startProgress(),e.log("[seeking in buffered range], buffer end,",u.end,", duration,",h.meta.duration),L.abrupt("return");case 17:if(c=h.getFragmentIdx(u.end),e._curLoadSegmentIdx!==c){L.next=22;break}return e._startProgress(),e.log("[seeking in buffered range], seek fragIndex is current load segmentIdx",c),L.abrupt("return");case 22:h.seekTime=u.end,c<0&&(c=e._curLoadSegmentIdx),e.log("[seeking in buffered range], seekTime ",o,",bufferRange,",u.start,"-",u.end,", fragIndex,",c);case 25:return p||(h.seekTime=o,c=h.getFragmentIdx(o),c<0&&(c=e._curLoadSegmentIdx),e.log("[seekTime out buffer range], curTime,",o,", Idx,",c),k=ge(e),f=k.mse,f&&f.isFull()&&(b=l.buffered2.bufferedList,g=b[b.length-1],f.clearOpQueues(ce.VIDEO),e._checkRemoveSourceBuffer([g.start,g.end],l.currentTime,!0,!0))),L.next=28,h.cancelLoading();case 28:h.resetFragmentLoadState(c),e._curLoadSegmentIdx=c,e._onTimeUpdate(),e._startProgress(),e._isEnded();case 33:case"end":return L.stop()}},t)}))),Ne(ge(e),"changeDefineCanPlay",function(t,n,l,h){var o=ge(e),u=o.player;if(u.ended){u.currentTime=0;return}e.log("[oldChangeDefinition],this._changeDefState,",e._changeDefState),u.currentTime=e._changeDefState?e._changeDefState.currentTime:t;var p=e._changeDefState?e._changeDefState.paused:n;p?u.pause():u.play(),e._changeDefState=null,u.emit(Ya,{from:l,to:h})}),Ne(ge(e),"changeDefinition",function(){var t=Ce(ie().mark(function n(l,h){var o,u,p,c,k,f,b;return ie().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(o=ge(e),u=o.player,p=o.config,c=o.mp4,h||(h=u.curDefinition),e._MSEError=!1,!p.witchBitRateWay){E.next=6;break}return e.oldChangeDefinition(l,h),E.abrupt("return");case 6:if(u.emit(Da,{from:h,to:l}),k=u.currentTime,f=c.getFragmentIdx(k),f<0&&(f=e._curLoadSegmentIdx),e.log("switchBitrate:point,fragIndex,",f,",startTime,",c.timeRange[f].startTime,",currentTime,",u.currentTime),!c){E.next=16;break}return e.mp4.changeBitRateTime=k,E.next=15,c.cancelLoading();case 15:c._metaLoading&&(c._metaLoading=!1);case 16:return e._removeBuffeEndTime=c.timeRange[f].startTime,e._isChangeDefinition=!0,b=u.getBufferedRange(u.buffered),b[1]>0&&b[1]-u.currentTime>5&&(e.mse.clearOpQueues(ce.VIDEO),e.mse.remove(ce.VIDEO,u.currentTime+5,b[1])),e.log("switchBitrate: resetFragmentLoadState,",f),c.resetFragmentLoadState(f),e._curLoadSegmentIdx=f,E.next=25,e.mp4.changeBitRate(l);case 25:e._onTimeUpdate(),u.emit("RESOLUTION_UPDATE",l);case 27:case"end":return E.stop()}},n)}));return function(n,l){return t.apply(this,arguments)}}()),Ne(ge(e),"_replayHook",function(){var t;return(t=e.player)===null||t===void 0||t.play(),!1}),Ne(ge(e),"_retryHook",function(){return e.beforePlayerInit(),!1}),e.mp4=null,e.mse=null,e._waitAdjustTimeCnt=0,e._lastCheckTime=is.nowTime(),e._removeBuffeEndTime=0,e}return zs(s,[{key:"afterCreate",value:function(){var e=this;window.__mp4player=this;try{Rs.defineGetterOrSetter(this.player,{__url:{get:function(){try{return e.mse?e.mse.url:e.config.url}catch{return null}}}})}catch{}}},{key:"beforePlayerInit",value:function(){var e=this.config;e.supportHevc===void 0&&hi!==null&&hi!==void 0&&hi.isHevcSupported&&hi.isHevcSupported()&&(e.supportHevc=!0),this.initMp4(),this.attachEvents(),this._startProgress()}},{key:"attachEvents",value:function(){this.off(Hi,this._onSeeking),this.on(Hi,this._onSeeking),this.on(Vt,this._onWaiting),this.off(Js,this.switchURL),this.on(Js,this.switchURL)}},{key:"detachEvents",value:function(){this.off(Hi,this._onSeeking),this.off(Vt,this._onWaiting),this.off(Js,this.switchURL)}},{key:"initMp4",value:function(){var e=this,t=this.player;t.config.vid||(t.config.vid=Date.now()),this.mp4&&(this.mp4.off(we.META_READY,this._onMp4MetaReady),this.mp4.off(we.ERROR,this._onMp4Error),this.mp4.off(we.MOOV_REQ_PROGRESS,this._onMp4DataCallBack),this.mp4.destroy()),this.mp4=new wh(t.config.url,Zs(Zs({},this.config),{},{vid:t.config.vid})),this.mp4.on(we.META_READY,this._onMp4MetaReady),this.mp4.on(we.ERROR,this._onMp4Error),this.mp4.on(we.MOOV_REQ_PROGRESS,this._onMp4DataCallBack),this.mp4.on(we.UPDATE_LOAD_IDX,function(n){e._curLoadSegmentIdx=n,e.log("[update curLoadSegmentIdx]",n)}),this.mp4.init()}},{key:"_proxyPlayer",value:function(){var e=this;typeof this.player.playNext=="function"&&(Xn=this.player.playNext),this.player.playNext=function(){e.playNext.apply(e,arguments)},Gn=this.player.switchURL,wn=this.player.changeDefinition,this.player.switchURL=this.switchURL.bind(this),this.player.changeDefinition=this.changeDefinition.bind(this),this.player.removeHooks("replay",this._replayHook),this.player.removeHooks("retry",this._retryHook)}},{key:"setConfig",value:function(e){this.config=Object.assign(this.config,e)}},{key:"playNext",value:function(e){var t=this.player;this._defInited=!1,t.resetState(),t._currentTime=0,t._duration=0,t.isPlaying=!1,this._MSEError=!1,t.pause(),this._reset(),t.setConfig(e),this.log("[Index] playNext",e),t.play(),this.emit("playnext")}},{key:"_errorHandler",value:function(e){var t=this.player,n=this.config;t&&(console.log("final error !!!!, ",n.vid,e),this.emit("error",e))}},{key:"_initMse",value:function(){var i=Ce(ie().mark(function t(n){var l=this,h,o,u,p,c,k;return ie().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!this.mse){b.next=4;break}return b.next=3,this.mse.unbindMedia();case 3:this.mse=null;case 4:h=this.mp4&&this.mp4.checkCodecH265(),o=!!n.videoCodec,u=!!n.audioCodec,o&&u?p=h?'video/mp4; codecs="hev1.1.6.L93.B0, mp4a.40.5"':'video/mp4; codecs="avc1.64001E, mp4a.40.5"':o?p=h?'video/mp4; codecs="hev1.1.6.L93.B0"':'video/mp4; codecs="avc1.64001E"':p='video/mp4; codecs="mp4a.40.5"',c=Ne({},ce.VIDEO,{mimeType:"video/mp4",codec:p}),this.mse=new ce,k=this.mse.bindMedia(this.player.video),k.then(function(){var g=Object.keys(c);try{for(var E=0;E<g.length;E++){var L=g[E];l.mse.createSource(L,c[L].codec)}}catch(C){console.error("MSE error: ",C),l._errorHandler(C)}l._isMseInit=!0,l._onTimeUpdate()});case 12:case"end":return b.stop()}},t,this)}));function e(t){return i.apply(this,arguments)}return e}()},{key:"_onTimeUpdate",value:function(){var e=this,t=this.mse,n=this.mp4,l=this.player,h=this.config;if(n){var o=n.timeRange,u=l.getBufferedRange(l.buffered2);if(t&&n&&n.canDownload){is.nowTime()-this._lastCheckTime>1e3&&(this._lastCheckTime=is.nowTime(),this._loadStuckCheck(),this._checkRemoveSourceBuffer(u,l.currentTime));var p=l.paused?l.currentTime+h.minBufferLength:l.currentTime+h.maxBufferLength;u[1]-p<0&&o.every(function(c,k){if(c.downloaded)return!0;if(!e._isChangeDefinition&&c.endTime-c.startTime>1&&e._isInBuffer(c))return c.downloaded=!0,c.isLoading=!0,e.log("onTimeUpdate, ".concat(k," download segment, has buffer"),c.startTime,c.endTime),!0;c.startTime-l.currentTime<h.maxBufferLength&&(e._curLoadSegmentIdx=k,e.log("[onTimeUpdate],load index==>>>, ",k,",IdxTimeRange, ",c.startTime,"-",c.endTime,",buffEnd, ",u[1],",playCurTime,",l.currentTime,", bufferLen,",u[1]-l.currentTime,",bufferRangeList,",e.player.buffered2?e.player.buffered2.bufferedList:null),e._loadData())}),this._isEnded()}this.checkRemoveOldBitrateBuffer()}}},{key:"checkRemoveOldBitrateBuffer",value:function(){var e=this.mse,t=this.player;e&&this._removeBuffeEndTime>0&&t.currentTime>this._removeBuffeEndTime+1&&(this.log("remove old bitrate buffer",this._removeBuffeEndTime),e.remove(ce.VIDEO,0,this._removeBuffeEndTime-1),this._removeBuffeEndTime=0)}},{key:"_isInBuffer",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=!1,l=this.player.video.buffered,h=0;h<l.length;h++){var o=l.start(h)-t,u=l.end(h)+t;if(o<=e.startTime&&e.endTime<=u){n=!0;break}}return n}},{key:"_loadData",value:function(){var i=Ce(ie().mark(function t(){return ie().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!this.mp4||!this._isMseInit)){l.next=3;break}return this.log("loadData, player.mp4 null",this._isMseInit),l.abrupt("return");case 3:return l.prev=3,l.next=6,this.mp4.load(this._curLoadSegmentIdx,this._loadDataSuccess);case 6:l.next=11;break;case 8:l.prev=8,l.t0=l.catch(3),console.error("[Index] _loadData error",this.playerConfig.vid,l.t0);case 11:case"end":return l.stop()}},t,this,[[3,8]])}));function e(){return i.apply(this,arguments)}return e}()},{key:"_appendInitSeg",value:function(e){var t=this;!this.mp4||!this.mse||this.mse.append(ce.VIDEO,e,{vid:this.playerConfig.vid,range:null,dataLen:e.byteLength,isinit:!0}).then(function(n){t.log("appendInitSeg end ==>>>",n.context?n.context:null,", costTime,",n.costtime)})}},{key:"_appendBuffer",value:function(e,t){var n=this,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=arguments.length>3?arguments[3]:void 0,o=this.mse,u=this.config;o.append(e,t,{vid:u.vid,fragIndex:l.fragIndex,range:l.range,dataLen:t.byteLength,state:h}).then(function(p){if(n.log("player appendBuffer end ==>>>",p.context?p.context:null,", costTime,",p.costtime,", opt,",p.name,",bufferRange,",n.player.getBufferedRange()),n.mse&&l.state&&l.fragIndex===n.mp4.timeRange.length-1){var c=n.player.buffered;c&&c.length>0&&(n.bufferEndTime=c.end(c.length-1)),n._isEnded(),n.log("loaded ended !!!==>>>",l.range,", fragIndex,",l.fragIndex,", bufferEndTime,",n.bufferEndTime,",meta_duration,",n.mp4.meta.duration)}}).catch(function(p){if(console.log("[MSE error]",p),p&&o!==null&&o!==void 0&&o.isFull()){var c=n.player.getBufferedRange(n.player.buffered2);n._checkRemoveSourceBuffer(c,n.player.currentTime,!0)}})}},{key:"_checkRemoveSourceBuffer",value:function(e,t,n){var l=this,h=this.mse,o=this.mp4,u=this.player;if(!(!h||!o||!u)&&(n&&(clearTimeout(this._removeBufferTimer),this._removeBufferTimer=null),e||(e=u.getBufferedRange(u.buffered2)),t||(t=u.currentTime),!(!n&&is.nowTime()-this._checkRemoveBufferLastTime<=this.config.removeBufferLen||this.endofstream)&&(this._checkRemoveBufferLastTime=is.nowTime(),e&&e[0]>=0&&(t-e[0]>this.config.removeBufferLen||h.isFull())))){var p=e[1],c=o.getFragmentIdx(p);if(c>=0&&o.timeRange[c].startTime<t){var k=Math.floor(Math.min(o.timeRange[c].startTime,e[1]));e[0]<k?(this.log("[checkremoveSourceBuffer], remove range==>>>",e[0],k),h.remove(ce.VIDEO,e[0],k)):h.isFull()&&!this._removeBufferTimer&&(this._removeBufferTimer=setTimeout(function(){l._checkRemoveSourceBuffer(null,null,!0)},10*1e3))}}}},{key:"_isEnded",value:function(){var e=this.player,t=this.mp4,n=e.bufferedPoint,l=n?n.end:0;return!this.endofstream&&this.mse&&t.meta.duration-e.currentTime<.5&&(this.log("[check player isEnded],deal mse.endOfStream, currentTime,",e.currentTime,", bufferend,",l,", duration,",t.meta.duration),this.endofstream=!0,this.mse.endOfStream()),t&&t.meta&&t.meta.duration-e.currentTime<.5?(this._stopProgress(),this.log("[check player isEnded],stopProgress and endOfStream,currentTime, ",e.currentTime,", bufferend,",l,", duration,",t.meta.duration),this.mse&&this.mse.endOfStream(),!0):!1}},{key:"switchURL",value:function(e){this.changeDefinition(e)}},{key:"oldChangeDefinition",value:function(e,t){var n=this,l=this.config,h=this.player;this.log("[oldChangeDefinition],currentTime,",h.currentTime,",from,",t,",to,",e);var o=h.currentTime,u=h.paused;this._changeDefState||(this._changeDefState={currentTime:o,paused:u},this.log("[oldChangeDefinition],currentTime,",h.currentTime,",pause,",u)),h.config.url=e.url,l.focusUserDefinition=!0,h.currentTime=0,h.pause(),this._reset(),this._isMseInit=!1,this._changeDefineCanPlay&&h.off("canplay",this._changeDefineCanPlay),this._changeDefineCanPlay=function(){n.changeDefineCanPlay(o,u,t,e),n._changeDefineCanPlay=null},h.once("canplay",this._changeDefineCanPlay),this.player.video.load(),this.initMp4()}},{key:"_loadStuckCheck",value:function(){var e=this,t=this.config,n=this.player;t.disableBufferBreakCheck||(n.currentTime-(this._lastCurrentTime||0)>.1||n.paused?(this._bufferBreakFlag===1||this._bufferBreakFlag===2)&&(this.log("视频没有卡死,重置卡死标记"),this._bufferBreakFlag=0,clearTimeout(this._bufferBreakTimer),this._bufferBreakFlag=null):this._bufferBreakFlag||(this._bufferBreakFlag=1,this.log("卡死计时开始! 持续".concat(t.waitingTimeOut,"毫秒则确认卡死")),this._bufferBreakTimer=setTimeout(function(){e.isDestroy||(e._bufferBreakFlag===1&&(e._bufferBreakFlag=2,e.log("确认卡死!!!"),e._errorHandler(new Ds(e.player,{errorType:"runtime",errorTypeCode:Ws.runtime,errorCode:Es.waitTimeout,errorMessage:"wait_timeout",vid:t.vid}))),e._bufferBreakTimer=null)},t.waitingTimeOut)),this._lastCurrentTime=n.currentTime)}},{key:"isDestroy",get:function(){return!this.player}},{key:"_stopProgress",value:function(){this._hasStartProgress=!1,this._requestTimer&&(this._requestTimer.stop(),this._requestTimer=null),this._bufferBreakTimer&&(clearTimeout(this._bufferBreakTimer),this._bufferBreakTimer=null,this._bufferBreakFlag=void 0)}},{key:"_startProgress",value:function(){var e=this;this._hasStartProgress||(this._stopProgress(),this._requestTimer=new Wh(function(){e._requestTimer&&e._onTimeUpdate()}),this._requestTimer.tickEvery(this.config.tickInSeconds),this._hasStartProgress=!0)}},{key:"log",value:function(e){for(var t=this.playerConfig,n=t&&t.vid?"[Index]".concat(t.vid," ").concat(e):"[Index] ".concat(e),l=arguments.length,h=new Array(l>1?l-1:0),o=1;o<l;o++)h[o-1]=arguments[o];Va.apply(void 0,[n].concat(h))}},{key:"_reset",value:function(){this._isMseInit=!1,this.endofstream=!1,this._curLoadSegmentIdx=0,this._removeBuffeEndTime=0,this._isChangeDefinition=!1,this._stopProgress(),this.mp4&&(this.mp4.off(we.META_READY,this._onMp4MetaReady),this.mp4.off(we.ERROR,this._onMp4Error),this.mp4.off(we.MOOV_REQ_PROGRESS,this._onMp4DataCallBack),this.mp4.destroy(),this.mp4=null),this.mse&&(this.mse.unbindMedia(),this.mse=null),this._unloadVideo()}},{key:"_unloadVideo",value:function(){var e=this.player;try{this.log("unloadVideo src ".concat(e.video.src)),e.video&&e.video.src&&(e.video.removeAttribute("src"),e.video.load())}catch(t){this.log("unloadVideo error",t)}}},{key:"destroy",value:function(){var e=this.player;e.removeHooks("replay",this._replayHook),e.removeHooks("retry",this._retryHook),this.detachEvents(),this._reset(),this.player.playNext=Xn,this.player._startInit=Th,this.player.changeDefinition=wn,this.player.switchURL=Gn,this._bufferBreakTimer&&clearInterval(this._bufferBreakTimer),this._removeBufferTimer&&(clearTimeout(this._removeBufferTimer),this._removeBufferTimer=null),this._waitInBufferTimer&&(clearTimeout(this._waitInBufferTimer),this._waitInBufferTimer=null)}}],[{key:"pluginName",get:function(){return"mp4Plugin"}},{key:"defaultConfig",get:function(){return{maxBufferLength:40,minBufferLength:5,disableBufferBreakCheck:!1,waitingTimeOut:15e3,waitingInBufferTimeOut:5e3,waitJampBufferMaxCnt:3,tickInSeconds:.1,reqOptions:null}}},{key:"version",get:function(){return"3.0.10"}}]),s}(Rs);const xh=vi("div",{id:"mse"},null,-1),Vh={__name:"xgVideoPlay",setup(a){Ni({type:null});const r=Ni({url:[{value:"https://stream7.iqilu.com/10339/upload_transcode/202002/18/20200218114723HDu3hhxqIT.mp4",label:"mp4测试用例"},{value:"https://vip.lz-cdn5.com/20220401/3315_dbd60bc0/index.m3u8",label:"m3u8测试用例"},{value:"https://sf1-hscdn-tos.pstatp.com/obj/media-fe/xgplayer_doc_video/flv/xgplayer-demo-360p.flv",label:"flv测试用例"}]}),s=Ni({id:"mse",url:"https://vip.lz-cdn5.com/20220401/3315_dbd60bc0/index.m3u8",height:"300",width:"400",fluid:!0,fitVideoSize:"auto",volume:.6,autoplay:!1,loop:!1,videoInit:!0,poster:"",playbackRate:[.5,.75,1,1.5,2],defaultPlaybackRate:1,rotate:{clockwise:!0,innerRotate:!0},playsinline:!0,plugins:[],playsinline:!0,whitelist:[""],keyShortcut:"on",closeVideoClick:!0,closeVideoDblclick:!0,closeVideoTouch:!0,playbackRate:[null],pip:!0,download:!0,thumbnail:{pic_num:44,width:160,height:90,col:10,row:10,urls:[""]},progressDot:[{time:10,text:"标记文字",duration:8,style:{background:"blue"}},{time:22,text:"标记文字"},{time:56,duration:8},{time:76}]});let i=_n();In(()=>{s.plugins.push(Fi),i.value=new et(s)});const e=()=>{if(i.value.destroy(),s.url){let t=s.url.split(".").at(-1);switch(console.log(t),t){case"m3u8":s.plugins=[Fi];break;case"flv":s.plugins=[wa];break;case"mp4":s.plugins=[Rh];break;default:s.plugins=[]}i.value=new et(s)}};return(t,n)=>(js(),It(ls(Oa),null,{default:ks(()=>[ss(ls(Na),{"label-width":"100px"},{default:ks(()=>[ss(ls(Ba),null,{default:ks(()=>[ss(ls(Mt),{span:11,offset:0},{default:ks(()=>[ss(ls(_t),{label:"视频源src"},{default:ks(()=>[ss(ls(Ua),{modelValue:s.url,"onUpdate:modelValue":n[0]||(n[0]=l=>s.url=l),placeholder:"请输入视频源（src）",onChange:e,clearable:""},{default:ks(()=>[(js(!0),Et(ja,null,Qa(r.url,l=>(js(),It(ls(za),{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),ss(ls(Mt),{span:11,offset:0},{default:ks(()=>[ss(ls(_t),{label:"视频源src"},{default:ks(()=>[ss(ls(Aa),{modelValue:s.url,"onUpdate:modelValue":n[1]||(n[1]=l=>s.url=l),placeholder:"请输入视频源（src）",onChange:e,clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),xh]),_:1}))}};function Wn(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);r&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})),s.push.apply(s,i)}return s}function ni(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Wn(Object(s),!0).forEach(function(i){Ue(a,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):Wn(Object(s)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(s,i))})}return a}function Je(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function Tn(a,r){for(var s=0;s<r.length;s++){var i=r[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,_a(i.key),i)}}function je(a,r,s){return r&&Tn(a.prototype,r),s&&Tn(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a}function Ue(a,r,s){return r=_a(r),r in a?Object.defineProperty(a,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[r]=s,a}function Ms(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),r&&vt(a,r)}function Gi(a){return Gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Gi(a)}function vt(a,r){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,e){return i.__proto__=e,i},vt(a,r)}function Mh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ze(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _h(a,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ze(a)}function _s(a){var r=Mh();return function(){var i=Gi(a),e;if(r){var t=Gi(this).constructor;e=Reflect.construct(i,arguments,t)}else e=i.apply(this,arguments);return _h(this,e)}}function Ih(a,r){if(typeof a!="object"||a===null)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var i=s.call(a,r||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function _a(a){var r=Ih(a,"string");return typeof r=="symbol"?r:String(r)}var Yh=function(){function a(r,s){Je(this,a),this.url=r;var i=new window.XMLHttpRequest;i.target=this,i.responseType="arraybuffer",i.open("get",r),i.onload=function(){(i.status===200||i.status===206)&&s&&s instanceof Function&&s(i.response)},i.onerror=function(e){},this.xhr=i,this.run()}return je(a,[{key:"cancel",value:function(){this.xhr.abort()}},{key:"run",value:function(){this.xhr.readyState===1&&this.xhr.send()}}]),a}(),Ke={ORDER:"order",SLOOP:"sloop",LOOP:"loop",RANDOM:"random"},Rn="xgplayer-music";function gi(a,r,s){var i=Math.floor(Math.random()*(r-a)+a);return i===s?(i>r/2?r=r/2:a=r/2,r-a>2?gi(a,r,s):i):i}var Dh=function(a){Ms(s,a);var r=_s(s);function s(){var i;Je(this,s);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i=r.call.apply(r,[this].concat(t)),Ue(ze(i),"_onEnded",function(){if(i.mode==="order"&&i.index+1>=i.list.length){i.player.pause(),i.player.currentTime=0;return}switch(i.mode){case Ke.SLOOP:i.change();break;case Ke.ORDER:case Ke.LOOP:default:i.next();break}}),Ue(ze(i),"_onDurationChange",function(){var l=i.config.abCycle;i._initABCycle(l,i.player)}),Ue(ze(i),"_onTimeUpdate",function(){var l=ze(i),h=l.config,o=l.player;if(!i.halfPass&&o.currentTime>o.duration/2&&i.confirmOrder(),h.abCycle){var u=h.abCycle,p=u.end>o.duration?o.duration:u.end;o.currentTime>=p?(u.loop||(o.pause(),i.emit("abCycle_ended")),o.currentTime=u.start||0):o.currentTime<u.start&&(o.currentTime=u.start||0)}}),i}return je(s,[{key:"afterCreate",value:function(){var e=this.player,t=this.playerConfig;Ss.addClass(e.root,Rn),this.halfPass=!1,this.list=this.config.list||[],this.nextIndex=-1,this.prevIndex=-1,this.history=[],this.disable=!(this.list.length>0),this.list.length!==0&&(!t.url&&this.list.length>0&&(t.url=this.list[0].src),t.poster||(t.poster=this.list[0].poster),t.title||(t.title=this.list[0].title||""),t.vid||(t.vid=this.list[0].vid||""),this._curInfo={src:t.url,poster:t.poster,title:t.title,vid:t.vid},this.index=0,this.on(Pa,this._onTimeUpdate),this.on(Ka,this._onEnded),this.on(Ha,this._onDurationChange),this.config.offline&&this.checkOffline(this._curInfo.src,this._curInfo.vid).then(function(n){n.code===0&&(t.url=n.url,e.state>=4&&(e.src=n.url))}).catch(function(n){}))}},{key:"destroy",value:function(){Ss.removeClass(this.player.root,Rn)}},{key:"_nextCompute",value:function(){if(!this.disable)switch(this.mode){case Ke.SLOOP:case Ke.ORDER:case Ke.LOOP:this.index+1<this.list.length?this.nextIndex=this.index+1:this.nextIndex=0;break;default:this.nextIndex=gi(0,this.list.length,this.index);break}}},{key:"_prevCompute",value:function(){if(!this.disable)switch(this.mode){case Ke.SLOOP:case Ke.ORDER:case Ke.LOOP:this.index-1>=0?this.prevIndex=this.index-1:this.prevIndex=this.list.length-1;break;default:this.prevIndex=gi(0,this.list.length,this.index);break}}},{key:"_emitChange",value:function(){this.emit("change",this._curInfo)}},{key:"_initABCycle",value:function(e,t){var n=t.plugins.progresspreview;if(e&&t){var l=e.end>this.player.duration?this.player.duration:e.end,h=e.start>this.player.duration?0:e.start,o={id:t.playerId,time:e.start,duration:l-h,text:e.text,color:e.color};n.findDot(o.id)?n.updateDot(o):n.createDot(o)}else n.findDot(t.playerId)&&n.deleteDot(t.playerId)}},{key:"random",value:function(){if(this.list.length<0)return null;var e=gi(0,this.list.length,this.index);return this.list[e]}},{key:"next",value:function(){this.disable||(this.halfPass||(this.halfPass=!0,this._nextCompute()),this.index=this.nextIndex,this.change())}},{key:"prev",value:function(){this.disable||(this.halfPass||(this.halfPass=!0,this._prevCompute()),this.index=this.prevIndex,this.change())}},{key:"forward",value:function(){var e=this.player,t=this.config.timeScale;e.currentTime=e.currentTime+t<e.duration?e.currentTime+t:e.duration-.1}},{key:"backward",value:function(){var e=this.player,t=this.config.timeScale;e.currentTime=e.currentTime-t>0?e.currentTime-t:0}},{key:"add",value:function(e){this.list.push({src:e.src,title:e.title,vid:e.vid,poster:e.poster})}},{key:"remove",value:function(e){var t=-1;this.list.every(function(n,l){return n.vid===e?(t=l,!1):!0}),t>-1&&this.list.splice(t,1)}},{key:"setAbCycle",value:function(e,t,n){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};e&&Ss.typeof(e)==="Object"?this.config.abCycle=ni({},e):this.config.abCycle=ni({start:e||0,end:t||this.player.duration,loop:n},l),this._initABCycle(this.config.abCycle,this.player)}},{key:"removeAbCycle",value:function(){this.config.abCycle=null,this._initABCycle(null,this.player)}},{key:"updateList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.removeAbCycle(),this.player.pause(),this.player.currentTime=0,this.list=e,this.nextIndex=0,this.index=0,this.change()}},{key:"setIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e<0||e>=this.list.length||(this.nextIndex=e,this.index=e,this.change())}},{key:"change",value:function(){var e=this;if(!this.disable){var t=this.player,n=this.list,l=this.index,h=n[l].vid;this.halfPass=!1,this.checkOffline(n[l].src,h).then(function(o){e._curInfo={title:e.list[e.index].title||"",vid:e.list[e.index].vid,poster:e.list[e.index].poster||"",src:o.url},t.playNext({url:o.url,vid:e.list[e.index].vid||0,poster:e.list[e.index].poster||"",autoplay:!0}),t.off("timeupdate",e._emitChange),t.once("timeupdate",e._emitChange),t.play()})}}},{key:"checkOffline",value:function(e,t){var n=this;return new Promise(function(l,h){(!n.config.offline||n.disable)&&l({url:e,code:-1,vid:t});var o=n.player.database;o.openDB(function(){o.getDataByKey(o.myDB.ojstore.name,t,function(u){setTimeout(function(){o.closeDB()},5e3),l(u?{url:URL.createObjectURL(u.blob),code:0,vid:u.vid}:{url:e,code:-2,vid:t})})})})}},{key:"confirmOrder",value:function(){this.halfPass=!0,this._nextCompute(),this._prevCompute(),this.config.preloadNext&&this.preload(this.nextIndex)}},{key:"preload",value:function(e){if(!(e<0||e>=this.list.length)){var t=this.list[e],n=this.player;this.checkOffline(t.src,t.vid).then(function(l){if(l.code===-2){var h=t.vid;new Yh(t.src,function(o){n.database.openDB(function(){n.database.addData(n.database.myDB.ojstore.name,[{vid:h,blob:new Blob([o],{type:'audio/mp4; codecs="mp4a.40.5"'})}]),setTimeout(function(){n.database.closeDB()},5e3)})})}})}}},{key:"timeScale",get:function(){return this.config.timeScale||15},set:function(e){this.config.timeScale=e}},{key:"mode",get:function(){return this.config.mode||Ke.RANDOM},set:function(e){this.config.mode=e}}],[{key:"pluginName",get:function(){return"music"}},{key:"defaultConfig",get:function(){return{offline:!1,preloadNext:!0,abCycle:null,timeScale:15,mode:Ke.ORDER,list:[]}}},{key:"ModeType",get:function(){return Object.keys(Ke).map(function(e){return Ke[e]})}}]),s}(Rs),Ph=function(a){Ms(s,a);var r=_s(s);function s(){return Je(this,s),r.apply(this,arguments)}return je(s,[{key:"afterCreate",value:function(){var e=this;if(this.on("change",function(n){if(n&&n.poster){if(e.find("img"))e.find("img").src=n.poster;else{var l=new Image;l.src=n.poster,e.appendChild(l)}e.find("img").src=n.poster,e.show()}else e.hide()}),this.playerConfig.poster){var t=new Image;t.src=this.playerConfig.poster,this.appendChild(t)}}},{key:"render",value:function(){return'<xg-icon class="xgplayer-cover"></xg-icon>'}}],[{key:"pluginName",get:function(){return"musiccover"}},{key:"defaultConfig",get:function(){return{index:6,position:ns.POSITIONS.CONTROLS_LEFT}}}]),s}(ns),Kh=function(a){Ms(s,a);var r=_s(s);function s(){var i;Je(this,s);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i=r.call.apply(r,[this].concat(t)),Ue(ze(i),"onClick",function(l){var h=ze(i),o=h.player;l.preventDefault(),l.stopPropagation(),o.plugins.music.backward()}),i}return je(s,[{key:"afterCreate",value:function(){var e=this;this.initIcons();var t=["click","touchstart"];t.forEach(function(n){e.bind(n,e.onClick)})}},{key:"registerIcons",value:function(){return{musicBackward:{icon:`<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="-2 0 21 15">
      <path d="m 14,2.99996 0,10 -7,-5 7,-5 z m -7,5 0,5 -7,-5 7,-5 0,5 z m -7,0 0,0 z"></path>
  </svg>`,class:"xg-icon-mbackward"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.musicBackward)}},{key:"destroy",value:function(){var e=this,t=["click","touchstart"];t.forEach(function(n){e.unbind(n,e.onClick)})}},{key:"render",value:function(){return`<xg-icon class="xgplayer-backward">
            <div class="xgplayer-icon">
            </div>
          </xg-icon>`}}],[{key:"pluginName",get:function(){return"musicbackward"}},{key:"defaultConfig",get:function(){return{index:1,position:ns.POSITIONS.CONTROLS_LEFT}}}]),s}(ns),Hh=function(a){Ms(s,a);var r=_s(s);function s(){var i;Je(this,s);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i=r.call.apply(r,[this].concat(t)),Ue(ze(i),"onClick",function(l){var h=ze(i),o=h.player;l.preventDefault(),l.stopPropagation(),o.plugins.music.prev()}),i}return je(s,[{key:"afterCreate",value:function(){var e=this;this.initIcons();var t=["click","touchstart"];t.forEach(function(n){e.bind(n,e.onClick)})}},{key:"registerIcons",value:function(){return{musicPrev:{icon:` <svg xmlns="http://www.w3.org/2000/svg" width="40" height="32" viewBox="300 200 1024 1024">
        <path d="M600 1140v-768h128v352l320-320v704l-320-320v352zz"></path>
    </svg>`,class:"xg-icon-mprev"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.musicPrev)}},{key:"destroy",value:function(){var e=this,t=["click","touchstart"];t.forEach(function(n){e.unbind(n,e.onClick)})}},{key:"render",value:function(){return`<xg-icon class="xgplayer-next">
            <div class="xgplayer-icon">
            </div>
          </xg-icon>`}}],[{key:"pluginName",get:function(){return"musicprev"}},{key:"defaultConfig",get:function(){return{index:2,position:ns.POSITIONS.CONTROLS_LEFT}}}]),s}(ns),Nh=function(a){Ms(s,a);var r=_s(s);function s(){var i;Je(this,s);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i=r.call.apply(r,[this].concat(t)),Ue(ze(i),"onClick",function(l){var h=ze(i),o=h.player;l.preventDefault(),l.stopPropagation(),o.plugins.music.forward()}),i}return je(s,[{key:"afterCreate",value:function(){var e=this;this.initIcons();var t=["click","touchstart"];t.forEach(function(n){e.bind(n,e.onClick)})}},{key:"registerIcons",value:function(){return{musicForward:{icon:`<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="-2 0 21 15">
        <path d="m 2,2.99996 0,10 7,-5 -7,-5 z m 7,5 0,5 7,-5 -7,-5 0,5 z m 7,0 0,0 z"></path>
      </svg>`,class:"xg-icon-mforward"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.musicForward)}},{key:"destroy",value:function(){var e=this,t=["click","touchstart"];t.forEach(function(n){e.unbind(n,e.onClick)})}},{key:"render",value:function(){return`<xg-icon class="xgplayer-forward">
            <div class="xgplayer-icon">
            </div>
          </xg-icon>`}}],[{key:"pluginName",get:function(){return"musicforward"}},{key:"defaultConfig",get:function(){return{index:5,position:ns.POSITIONS.CONTROLS_LEFT}}}]),s}(ns),Bh=function(a){Ms(s,a);var r=_s(s);function s(){var i;Je(this,s);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i=r.call.apply(r,[this].concat(t)),Ue(ze(i),"onClick",function(l){var h=ze(i),o=h.player;l.preventDefault(),l.stopPropagation(),o.plugins.music.next()}),i}return je(s,[{key:"afterCreate",value:function(){var e=this;this.initIcons();var t=["click","touchstart"];t.forEach(function(n){e.bind(n,e.onClick)})}},{key:"registerIcons",value:function(){return{musicNext:{icon:` <svg xmlns="http://www.w3.org/2000/svg" width="40" height="32" viewBox="100 200 1024 1024">
        <path d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z">
      </svg>`,class:"xg-icon-mnext"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.musicNext)}},{key:"destroy",value:function(){var e=this,t=["click","touchstart"];t.forEach(function(n){e.unbind(n,e.onClick)})}},{key:"render",value:function(){return`<xg-icon class="xgplayer-next">
            <div class="xgplayer-icon">
            </div>
          </xg-icon>`}}],[{key:"pluginName",get:function(){return"musicnext"}},{key:"defaultConfig",get:function(){return{index:4,position:ns.POSITIONS.CONTROLS_LEFT}}}]),s}(ns),Uh=function(a){Ms(s,a);var r=_s(s);function s(){return Je(this,s),r.apply(this,arguments)}return je(s,[{key:"beforeCreate",value:function(e){var t=e.player.plugins.progress;t&&(e.root=t.root)}},{key:"afterCreate",value:function(){var e=this;this.on("change",function(t){t&&t.title?e.root.innerHTML="".concat(t.title):e.root.innerHTML=""})}},{key:"render",value:function(){var e=this.playerConfig;return`<xg-title class="xgplayer-name">
          `.concat(e.title||"",`
       </xg-title>`)}}],[{key:"pluginName",get:function(){return"musicmeta"}},{key:"defaultConfig",get:function(){return{index:0}}}]),s}(ns);function zh(a){if(Ss.typeOf(a.controls)!=="Object")a.controls={mode:"flex",initShow:!0};else{var r=a.controls;a.controls=ni({mode:"flex",initShow:!0},r)}var s=a.play||{};a.play=ni({index:3},s),a.marginControls=!0,a.mediaType="audio"}var Ah=je(function a(r,s){Je(this,a),console.log("config",r,s),console.log("playerConfig",Ss.typeOf(s.controls)!=="Object"),zh(s),this.plugins=[Dh,Kh,Hh,Nh,Bh,Ph,Uh],this.ignores=["start","cssFullScreen","fullscreen","pip","enter","replay","pc","loading","poster"]}),Oh=function(a){var r=a.data,s=a.options,i=a.ctx,e=a.h,t=a.w,n=r.length>s.count?s.count:r.length,l=parseInt(e/255*2,10);i.clearRect(0,0,t,e),i.fillStyle=s.bgColor,i.fillRect(0,0,t,e);for(var h=t/n,o=h-h/4,u,p=0,c=s.linear,k=0;k<n;k++)u=r[k],i.fillStyle=c,i.fillRect(p,e-u,o,u*l+e/2),p+=h},Jh=function(a){var r=a.data,s=a.options,i=a.ctx,e=a.h,t=a.w,n=s.count||128;r.length<n&&(n=r.length);var l=e/255,h=t/n,o=s.linear;i.clearRect(0,0,t,e),i.fillStyle=s.bgColor,i.fillRect(0,0,t,e);for(var u=1;u<=n;u++){var p=r[u];p*=l;var c=h*u;i.moveTo(c,e),i.lineTo(c,e-p),i.strokeStyle=o,i.stroke(),i.beginPath()}},jh=function(a){var r=a.data,s=a.options,i=a.ctx,e=a.h,t=a.w,n=r.length>s.count?s.count:r.length;i.clearRect(0,0,t,e),i.fillStyle=s.bgColor,i.fillRect(0,0,t,e),i.beginPath();var l=s.linear;i.strokeStyle=l;for(var h=t/n,o=0,u=0;u<n;u++){var p=r[u]/128,c=p*e/2;u===0?i.moveTo(o,c):i.lineTo(o,c),o+=h}i.lineTo(t,e/2),i.stroke()},Qh=function(a){var r=a.data,s=a.options,i=a.ctx,e=a.h,t=a.w,n=e/255,l=t/128,h=s.count||128,o=5;i.clearRect(0,0,t,e),i.fillStyle=s.bgColor,i.fillRect(0,0,t,e);for(var u=s.linear,p=1;p<=h;p++){var c=r[p];c+=o,c*=n;var k=l*p,f=e/2+c/2;i.moveTo(k,f),i.lineTo(k,f-c),i.strokeStyle=u,i.stroke(),i.beginPath()}},qh=function(a){var r=a.data,s=a.options,i=a.ctx,e=a.h,t=a.w,n=r.length>s.count?s.count:r.length,l=e/255;i.clearRect(0,0,t,e),i.fillStyle=s.bgColor,i.fillRect(0,0,t,e);for(var h=t/n,o=h-h/4,u,p=0,c=s.linear,k=0;k<n;k++)u=r[k]*l,i.fillStyle=c,i.fillRect(p,e/2+u/2,o,-u),p+=h};function $h(a,r,s){for(var i=a.createLinearGradient(0,0,r,0),e=s.length,t=100/e,n=0;n<s.length;n++)i.addColorStop(t*n/100,s[n]);return i}function eo(a,r){(!r||r<1)&&(r=a.length*r);for(var s=[],i=Math.floor(a.length/r),e=1;e<=r;e++){var t=a.slice(e*i,e*i+i),n=t[Math.floor(t.length/2)];s.push(n)}return s}function so(a,r){var s=r/255;r<=3&&r>=0&&(s=r);var i=a.map(function(e){return e*s});return i}function io(a,r){for(var s=Math.floor(a.length/r),i=[],e=[],t=0,n=0;n<=s*r;n++)t===s&&(i.push(e),e=[],t=0),e.push(a[n]),t++;return i}function xn(a,r,s,i){var e=s.w,t=s.linear,n=s.reverse,l=s.offset;a.save(),a.beginPath();var h=e*1/i;a.strokeStyle=t;for(var o=0,u=0,p=0;p<i;p++)u=n?0-r[p]:r[p],u=l-u,p===0?a.moveTo(o,u):a.lineTo(o,u),o+=h;a.lineTo(e,u),a.stroke()}var to=function(a){var r=a.options,s=a.ctx,i=a.h,e=a.w,t=a.data,n=r.colors;t=eo(t,2048),t=so(t,i/2),t=io(t,4).slice(0,3),s.clearRect(0,0,e,i),s.fillStyle=r.bgColor,s.fillRect(0,0,e,i);for(var l=0;l<t.length;l++)xn(s,t[l],{linear:n[l],w:e,h:i,offset:i/2,reverse:!1},t[l].length),xn(s,t[l],{linear:n[l],w:e,h:i,offset:i/2,reverse:!0},t[l].length)},no={bars:Oh,vertLines:Jh,lightning:jh,doubleLine:Qh,doubleBars:qh,waves:to},ao={bars:2,vertLines:1,lightning:2,doubleLine:1,doubleBars:2,waves:2},ro={BARS:"bars",VERT_LINES:"vertLines",LIGHTNING:"lightning",DOUBLE_LINE:"doubleLine",DOUBLE_BARS:"doubleBars",WAVES:"waves"};function lo(a,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(r){s=ni({},s),s.stroke||(s.stroke=1),s.colors||(s.colors=["#ff8177","#cf556c","#f99185","#b12a5b"]);var e=r.getContext("2d"),t=r.height,n=r.width;e.strokeStyle=s.colors[0],e.lineWidth=s.stroke;var l={data:a,options:s,ctx:e,h:t,w:n};typeof s.mode=="string"&&(s.mode=[s.mode]),s.mode.forEach(function(h){i%ao[h]===0&&(e.clearRect(0,0,n,t),e.beginPath(),no[h](l))})}}var ho=function(){function a(r,s){var i=this,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Je(this,a),Ue(this,"start",function(){i.reqId||i._renderFrame()}),Ue(this,"stop",function(){cancelAnimationFrame(i.reqId),i.reqId=null}),Ue(this,"_onDestroy",function(){i._audioCtx.close()}),Ue(this,"_onoVolumechange",function(){console.log("onoVolumechange"),i.gainNode.gain.setValueAtTime(i.player.volume,i.player.currentTime)}),Ue(this,"_renderFrame",function(){i.reqId&&cancelAnimationFrame(i.reqId),i.reqId=requestAnimationFrame(i._renderFrame),i.frameCount++,i.mode==="lightning"?i.analyser.getByteTimeDomainData(i.dataArray):i.analyser.getByteFrequencyData(i.dataArray),lo.call(i,i.dataArray,i.canvas,i.options,i.frameCount)}),this.canvas=s;var t=this.canvas.getBoundingClientRect(),n=t.width,l=t.height;if(this.canvas.width=n*2,this.canvas.height=l*2,this.player=r,this.options=a.defaultConfig,Object.keys(e).map(function(o){i.options[o]=e[o]}),!!a.AudioCtx){r.audioCtx?this._audioCtx=r.audioCtx:this._audioCtx=new a.AudioCtx,this.analyser=this._audioCtx.createAnalyser();var h=this._audioCtx.createGain();h.gain.setValueAtTime(r.volume,r.currentTime),this.gainNode=h,this.source=this._audioCtx.createMediaElementSource(r.video),this.ctx=s.getContext("2d"),this.source.connect(this.analyser),this.analyser.connect(h),this.fftSize=this.options.fftSize,this.frameCount=0,this.options.isGradient&&(this.options.linear=$h(this.ctx,s.width,this.options.colors)),h.connect(this._audioCtx.destination),this._initPlayerEvents()}}return je(a,[{key:"_initPlayerEvents",value:function(){var s=this;["play","playing","seeked"].forEach(function(i){s.player.on(i,s.start)}),this.player.on("volumechange",this._onoVolumechange),this.player.on("destroy",this._onDestroy)}},{key:"destroy",value:function(){var s=this;this.stop(),["play","playing","seeked"].forEach(function(i){s.player.off(i,s.start)}),this.player.off("volumechange",this._onoVolumechange),this.player.off("destroy",this._onDestroy),this._audioCtx.close()}},{key:"mode",get:function(){return this.options.mode},set:function(s){this.options.mode=s}},{key:"fftSize",get:function(){return this.analyser.frequencyBinCount*2},set:function(s){this.analyser.fftSize=s;var i=this.analyser.frequencyBinCount;this.dataArray=new Uint8Array(i)}}],[{key:"defaultConfig",get:function(){return{fftSize:16384,count:1024,mode:"bars",colors:["#ff8177","#cf556c","#f99185","#b12a5b"],stroke:2,bgColor:"#000",isGradient:!0,linear:null}}},{key:"MODES",get:function(){return ro}},{key:"AudioCtx",get:function(){return window.AudioContext||window.webkitAudioContext}}]),a}(),oo=je(function a(r){Je(this,a),this.regRule=/(\d{2}(?=:)):(\d{2}(?=\.))\.(\d{2,3})/g,this.regRule.test(r)?this.time=RegExp.$1*60+RegExp.$2*1+("0."+RegExp.$3)*1:this.time=-1}),uo=function(){function a(r,s){var i=this;Je(this,a),this.rawTxts=r,this.txts=r.map(function(e){return e.replace(/^[\r\n]|[\r\n]$/g,"").match(/(\[.*\])[^[]+/g)}),this.isDynamics=r.map(function(e,t){return[].concat(e.match(/\[\d{2}:\d{2}\.\d{2,3}\]/g)).length===i.txts[t].length&&i.txts[t].length===i.txts[0].length&&i.txts[t].length>1}),this.isDynamic=this.isDynamics.some(function(e){return e}),this.__ainimateInterval__=0,this.__offset__=0,this.__offsetScale__=.5,this.dom=s,this.lists=[],this.isDynamics.map(function(e,t){e&&i.lists.push(i.txts[t].map(function(n,l){var h=/(\[[\d:\S]+\])([^[]+)/g.test(n),o=RegExp.$1,u=RegExp.$2;return{time:h?new oo(o).time:-1,lyric:u,idx:l}}))}),this.list=this.lists.reduce(function(e,t){return e.map(function(n,l){return{time:n.time,lyric:n.lyric===`
`?"".concat(n.lyric).concat(t[l].lyric):"".concat(n.lyric,"<br/>").concat(t[l].lyric),idx:l}})}),this.line=0}return je(a,[{key:"interval",get:function(){return this.__ainimateInterval__},set:function(s){this.__ainimateInterval__=s}},{key:"offset",get:function(){return this.__offset__},set:function(s){this.__offset__=s}},{key:"offsetScale",get:function(){return this.__offsetScale__},set:function(s){this.__offsetScale__=s}},{key:"adjust",value:function(){for(var s=this.list,i=0,e,t,n=s.length;i<n;i++){for(e=i+1;e<n&&!(s[e].time>s[i].time);e++);if(e<n){var l=(s[e].time-s[i].time)/(e-i);for(t=i+1;t<e;t++)s[t].time=s[t-1].time+l}}}},{key:"find",value:function(s){var i=this.list,e=this.__ainimateInterval__,t=this.__offset__;return s=s+t>0?s+t:0,i.filter(function(n,l){var h=n.time,o=l+1;return s>=h&&(i[o]&&s*1+e*1<=i[o].time||o>=i.length)})}},{key:"bind",value:function(s){var i=this,e=this;return this.__player__=s,e.isDynamic?(e.__handle__=(function(){var t=i.find(s.currentTime)[0];t&&t.idx!==i.line&&(i.line=t.idx,s.emit("lyricUpdate",t))}).bind(e,s),s.on("timeupdate",e.__handle__),e.__startHandle__=(function(){s.emit("lyricUpdate",e.list[0])}).bind(e,s),s.once("playing",e.__startHandle__),!0):!1}},{key:"unbind",value:function(s){delete this.__player__,this.__handle__&&(s.off("lyricUpdate",this.__handle__),delete this.__handle__)}},{key:"show",value:function(){var s=this,i=this.dom,e=[],t=this,n=["click","touchstart"];if(i&&i.nodeType===1){var l=Ss.createDom("div","<div></div>",{},"xgplayer-lrcWrap");i.appendChild(l),this.list.forEach(function(u){e.push('<xg-lyric-item class="xgplayer-lyric-item" data-idx="'.concat(u.idx,'">').concat(u.lyric.replace(/[\r\n]/g,""),"</xg-lyric-item>"))}),l.innerHTML=e.join("");var h=Ss.createDom("xg-lrcForward","<div></div>",{},"xgplayer-lrcForward");i.appendChild(h),n.forEach(function(u){h.addEventListener(u,function(p){p.preventDefault(),p.stopPropagation(),t.offset-=t.offsetScale,console.log("lyric go forward ".concat(t.offsetScale,"s"))},!1)});var o=Ss.createDom("xg-lrcBack","<div></div>",{},"xgplayer-lrcBack");i.appendChild(o),n.forEach(function(u){o.addEventListener(u,function(p){p.preventDefault(),p.stopPropagation(),t.offset+=t.offsetScale,console.log("lyric go back ".concat(t.offsetScale,"s"))},!1)}),this.__updateHandle__=function(u){var p=s.dom.querySelector(".xgplayer-lrcWrap"),c=p.querySelector(".xgplayer-lyric-item-active"),k=p.offsetHeight,f;c&&(c.className="xgplayer-lyric-item"),c=p.querySelector('.xgplayer-lyric-item[data-idx="'.concat(u.idx,'"]')),c&&(c.className="xgplayer-lyric-item xgplayer-lyric-item-active",f=c.getBoundingClientRect().top-p.getBoundingClientRect().top+p.scrollTop-k/2,f&&(p.scrollTop=f))},this.__player__.on("lyricUpdate",this.__updateHandle__)}else this.__player__.emit("error","lyric container can not be empty")}},{key:"hide",value:function(){this.__updateHandle__.off("lyricUpdate",this.__updateHandle__)}}]),a}();const po={class:"music_ctn"},co=Yn('<div id="left" data-v-3b016bb0><div id="album" data-v-3b016bb0></div><div id="info" data-v-3b016bb0> 脆弱一分钟 <div data-v-3b016bb0>歌手：林宥嘉</div><div data-v-3b016bb0>专辑：脆弱一分钟 </div></div></div><div id="canvasMusic" data-v-3b016bb0><canvas data-v-3b016bb0></canvas></div><div id="mask" data-v-3b016bb0><div id="gc" data-v-3b016bb0></div></div><div id="xgmusic" data-v-3b016bb0></div>',4),mo=[co],ko={__name:"xgMusicPlay",setup(a){let r=null;return In(()=>{r=new et({id:"xgmusic",url:"https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/xgplayer_doc_video/music/audio.mp3",volume:.8,width:window.innerWidth,height:50,mediaType:"audio",presets:["default",Ah],preloadNext:!0,ignores:["playbackrate"],controls:{initShow:!0,mode:"flex"},marginControls:!0,videoConfig:{crossOrigin:"anonymous"}}),r.crossOrigin="anonymous";let s=`[00:00.00] 脆弱一分钟
[00:00.00] 作曲 : 林家谦
[00:00.00] 作词 : 徐世珍/吴辉福
[00:00.000]编曲：林家谦
[00:00.000]时钟不要走
[00:04.220]让我脆弱一分钟
[00:07.440]要多久才能习惯被放手
[00:15.800]马克杯空了 暖暖的温热
[00:22.660]却还在我手中停留
[00:27.960]
[00:29.790]勇气不要走
[00:32.200]给我理由再冲动
[00:35.690]去相信爱情 就算还在痛
[00:43.960]如果我不说不会有人懂
[00:50.720]失去你我有多寂寞
[00:55.610]还是愿意
[00:57.580]付出一切仅仅为了一个好梦
[01:03.980]梦里有人真心爱我 陪我快乐也陪我沉默
[01:11.260]没有无缘无故的痛承受越多越成熟
[01:18.630]能让你拥抱更好的我
[01:25.030] 谁也不要走
[01:28.270]应该是一种奢求
[01:31.900]可是我只想 握紧你的手
[01:39.780]我宁愿等候 也不愿错过
[01:46.630]你对我微笑的时候
[01:56.780]
[02:18.910]还是愿意
[02:21.320]用尽全力仅仅为了一个以后
[02:27.870]哪怕生命并不温柔哪怕被幸福一再反驳
[02:34.870]也要相信伤痕累累 其实只是在琢磨
[02:42.070]能让你为之一亮 的我
[02:53.910]
[02:56.350]制作人：林宥嘉
[02:57.750]制作助理：张婕汝
[02:59.010]录音师：陈文骏、叶育轩
[03:00.410]录音室：白金录音室
[03:01.740]混音师：SimonLi @ nOiz
[03:03.000]OP: Terence Lam Production & Co. (Warner/Chappell Music, HK Ltd.)
[03:04.050]SP: Warner/Chappell Music Taiwan Ltd.
[03:04.910]OP：Universal Ms Publ Ltd Taiwan
`;window.analyze=new ho(r,document.querySelector("#canvasMusic>canvas"),{bgColor:"rgba(0,0,0,0.7)",stroke:3});var i=new uo([s],document.querySelector("#gc"),{});i.bind(r),r.on("lyricUpdate",e=>{e.lyric.includes(`
`)}),r.on("playing",function(){i.show(),i.adjust(),r.mode=2}),r.on("destroy",()=>{console.log("player destroyed"),i.unbind(r)}),document.querySelector("#canvasMusic>canvas").width=window.innerWidth,document.querySelector("#canvasMusic>canvas").height=window.innerHeight*.25}),_n(),(s,i)=>(js(),Et("div",po,mo))}},fo=qa(ko,[["__scopeId","data-v-3b016bb0"]]),yo=vi("h2",{id:"西瓜视频播放器测试用例",tabindex:"-1"},[er("西瓜视频播放器测试用例 "),vi("a",{class:"header-anchor",href:"#西瓜视频播放器测试用例","aria-label":'Permalink to "西瓜视频播放器测试用例"'},"​")],-1),bo=vi("br",null,null,-1),go=Yn(`<div class="warning custom-block"><p class="custom-block-title">视频格式支持</p><p>目前仅支持（hls，mp4，flv）</p></div><br><details class="details custom-block"><summary>具体实现代码</summary><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-wQSuM" id="tab-cRHSSlm" checked="checked"><label for="tab-cRHSSlm">xgVideoPlay.vue</label><input type="radio" name="group-wQSuM" id="tab-HWFmlIt"><label for="tab-HWFmlIt">xgMusicPlay.vue</label></div><div class="blocks"><div class="language-vue vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;element-plus/dist/index.css&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ElButton, ElSelect, ElForm, ElFormItem, ElInput, ElOption, ElRow, ElCol, ElCard } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;element-plus&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { onMounted, reactive, ref, watch } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Player </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;xgplayer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;xgplayer/dist/index.min.css&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;xgplayer&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HlsPlayer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;xgplayer-hls&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FlvPlayer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;xgplayer-flv&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Mp4Player </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;xgplayer-mp4&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 配置选项</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Form</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    type: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dicts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    url: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://stream7.iqilu.com/10339/upload_transcode/202002/18/20200218114723HDu3hhxqIT.mp4&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mp4测试用例&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://vip.lz-cdn5.com/20220401/3315_dbd60bc0/index.m3u8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;m3u8测试用例&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://sf1-hscdn-tos.pstatp.com/obj/media-fe/xgplayer_doc_video/flv/xgplayer-demo-360p.flv&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;flv测试用例&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// xgplayer</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mse&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://vip.lz-cdn5.com/20220401/3315_dbd60bc0/index.m3u8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 尺寸</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;height&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;300&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;width&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;400&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 流式布局</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;fluid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 自适应视频内容宽高</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;fitVideoSize&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;auto&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 音量</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;volume&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 自动播放</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;autoplay&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 循环播放</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;loop&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 初始化显示视频首帧</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;videoInit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 封面图</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;poster&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 倍速播放</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;playbackRate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.75</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 默认播放速度</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;defaultPlaybackRate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 记忆播放</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 离开时存下 上次播放时间</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //  lastPlayTime: 20, //视频起播时间（单位：秒）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // lastPlayTimeHideDelay: 5, //提示文字展示时长（单位：秒）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 视频旋转</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;rotate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;clockwise&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;innerRotate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;playsinline&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;plugins&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;playsinline&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;whitelist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;keyShortcut&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;on&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;closeVideoClick&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;closeVideoDblclick&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;closeVideoTouch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;playbackRate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;pip&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;download&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;thumbnail&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;pic_num&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">44</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;width&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">160</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;height&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">90</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;col&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;row&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;urls&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 预览本地视频</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // preview: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //     uploadEl: uploadDom</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    progressDot: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            time: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//展示标记的时间</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            text: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;标记文字&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//鼠标hover在标记时展示的文字</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            duration: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//标记段长度（以时长计算）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            style: { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//标记样式</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                background: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;blue&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            time: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">22</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            text: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;标记文字&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            time: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">56</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            duration: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            time: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">76</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> player </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onMounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    options.plugins.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HlsPlayer)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    player.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Player</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(options)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> change</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    player.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (options.url) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> options.url.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">at</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(type);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        switch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (type) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;m3u8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                options.plugins </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [HlsPlayer]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;flv&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                options.plugins </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [FlvPlayer]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                break</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;mp4&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                options.plugins </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [Mp4Player]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                break</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                options.plugins </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        player.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Player</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(options)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ElCard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-form</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> label-width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;100px&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-row</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-col</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">offset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-form-item</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;视频源src&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-select</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">options.url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> placeholder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;请输入视频源（src）&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">change</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> clearable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-option</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> v-for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dicts.url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">item.value</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">item.label</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">item.value</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                            &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-form-item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-col</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-col</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">offset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-form-item</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;视频源src&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">options.url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> placeholder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;请输入视频源（src）&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">change</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> clearable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-form-item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-col</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-row</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-form</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mse&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ElCard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scss&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scoped</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br></div></div><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;element-plus/dist/index.css&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ElButton, ElSelect, ElOption, ElForm, ElFormItem, ElInput, ElRow, ElCol, ElCard } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;element-plus&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { onMounted, reactive, ref, watch } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Player </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;xgplayer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// import &#39;xgplayer/dist/index.min.css&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;xgplayer&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;xgplayer-music/dist/index.min.css&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 现在music作为一个固定的preset使用，不再继承player, 解决耦合性过大问题</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MusicPreset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;xgplayer-music&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Music </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;xgplayer-music&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> player </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onMounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  player </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Player</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;xgmusic&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/xgplayer_doc_video/music/audio.mp3&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//[{ src: &#39;//sf1-cdn-tos.huoshanstatic.com/obj/media-fe/xgplayer_doc_video/music/audio.mp3&#39;, name: &#39;林宥嘉·脆弱一分钟&#39;, poster: &#39;//sf1-cdn-tos.huoshanstatic.com/obj/media-fe/xgplayer_doc_video/music/poster-small.jpeg&#39; }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    volume: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    width: window.innerWidth,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    height: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    mediaType: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;audio&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    presets: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;default&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, MusicPreset],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    preloadNext: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//预加载下一首</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ignores: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;playbackrate&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    controls: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      initShow: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;flex&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    marginControls: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    videoConfig: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      crossOrigin: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;anonymous&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  player.crossOrigin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;anonymous&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lyricTxts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`[00:00.00] 脆弱一分钟</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[00:00.00] 作曲 : 林家谦</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[00:00.00] 作词 : 徐世珍/吴辉福</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[00:00.000]编曲：林家谦</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[00:00.000]时钟不要走</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[00:04.220]让我脆弱一分钟</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[00:07.440]要多久才能习惯被放手</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[00:15.800]马克杯空了 暖暖的温热</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[00:22.660]却还在我手中停留</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[00:27.960]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[00:29.790]勇气不要走</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[00:32.200]给我理由再冲动</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[00:35.690]去相信爱情 就算还在痛</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[00:43.960]如果我不说不会有人懂</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[00:50.720]失去你我有多寂寞</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[00:55.610]还是愿意</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[00:57.580]付出一切仅仅为了一个好梦</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[01:03.980]梦里有人真心爱我 陪我快乐也陪我沉默</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[01:11.260]没有无缘无故的痛承受越多越成熟</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[01:18.630]能让你拥抱更好的我</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[01:25.030] 谁也不要走</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[01:28.270]应该是一种奢求</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[01:31.900]可是我只想 握紧你的手</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[01:39.780]我宁愿等候 也不愿错过</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[01:46.630]你对我微笑的时候</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[01:56.780]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[02:18.910]还是愿意</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[02:21.320]用尽全力仅仅为了一个以后</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[02:27.870]哪怕生命并不温柔哪怕被幸福一再反驳</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[02:34.870]也要相信伤痕累累 其实只是在琢磨</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[02:42.070]能让你为之一亮 的我</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[02:53.910]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[02:56.350]制作人：林宥嘉</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[02:57.750]制作助理：张婕汝</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[02:59.010]录音师：陈文骏、叶育轩</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[03:00.410]录音室：白金录音室</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[03:01.740]混音师：SimonLi @ nOiz</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[03:03.000]OP: Terence Lam Production &amp; Co. (Warner/Chappell Music, HK Ltd.)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[03:04.050]SP: Warner/Chappell Music Taiwan Ltd.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[03:04.910]OP：Universal Ms Publ Ltd Taiwan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // // 初始化频谱</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  window.analyze </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Music.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Analyze</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(player, document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#canvasMusic&gt;canvas&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    bgColor: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;rgba(0,0,0,0.7)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    stroke: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // count: 256</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 初始化歌词模块</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lyric </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Music.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Lyric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([lyricTxts], document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#gc&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), {})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  lyric.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(player)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nullText </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  player.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;lyricUpdate&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (res.lyric.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      nullText</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  player.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;playing&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    lyric.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">show</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // let nodeLists = document.querySelectorAll(&#39;.xgplayer-lyric-item&#39;)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // console.log(nodeLists, &#39;nodeLists&#39;);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // nodeLists &amp;&amp; (nodeLists = Array.from(nodeLists))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // nodeLists.forEach(item =&gt; {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //   item.style.display = &quot;block&quot;;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // })</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // console.log(&#39;playing&#39;);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    lyric.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adjust</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    player.mode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  player.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;destroy&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;player destroyed&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    lyric.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unbind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(player)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // document.querySelector(&#39;.xgplayer-lyric-item&#39;).style.display = &#39;block&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#canvasMusic&gt;canvas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.innerWidth;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#canvasMusic&gt;canvas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.innerHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 修改播放模式 </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// return &#39;order&#39;为顺序播放, &#39;random&#39;为随机播放, &#39;loop&#39;为循环播放 按序三者之一</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> modifyPlaybackMode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // &#39;order&#39;为顺序播放, &#39;random&#39;为随机播放, &#39;loop&#39;为循环播放</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CONFIGMODE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;random&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;order&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;loop&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 当前的mode</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CURRENTMODE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> player.plugins.music.mode;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;order&#39;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  CONFIGMODE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (mode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CURRENTMODE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 不是最后一项</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> arr.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CONFIGMODE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CONFIGMODE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // player.plugins.music.mode = result;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// player.plugins.music.mode = &#39;random&#39;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 实例化之后修改每次快进/快退时长</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// player.plugins.music.timeScale = 5</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> selectValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;waves&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;waves&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bars&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bars&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lightning&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lightning&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vertLines&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vertLines&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;doubleLine&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;doubleLine&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;doubleBars&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;doubleBars&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;music_ctn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;left&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;album&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;info&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        脆弱一分钟</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;歌手：林宥嘉&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;专辑：脆弱一分钟 &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;canvasMusic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mask&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;xgmusic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scss&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scoped</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.xgplayer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:deep(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.xgplayer-lyric-item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  display</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">block</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  text-align</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">center</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  line-height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">22</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  font-size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgba</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">225</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">225</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">225</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:deep(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.xgplayer-lyric-item-active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">49</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">194</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">124</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.xgplayer-lrcWrap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">blueviolet</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  border</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> solid</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> #ddd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  padding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.xgplayer-lrcForward</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  left</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.xgplayer-lrcBack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  left</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  top</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">75</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// .xg-lyric-item {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   display: block !important;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   text-align: center;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   line-height: 22px !important;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   font-size: 12px !important;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   color: rgba(225, 225, 225, .8) !important;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// .xgplayer-lyric-item-active {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   color: rgb(49, 194, 124) !important;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.xgplayer-lrcForward</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  left</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.xgplayer-lrcBack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  left</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  top</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">75</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.music_ctn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  position</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">relative</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  background-image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;//sf1-cdn-tos.huoshanstatic.com/obj/media-fe/xgplayer_doc_video/music/bg.jpg&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  background-size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  min-height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  #left</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    position</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">absolute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    top</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    left</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    margin-left</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    #album</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">55</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      background-image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;//sf1-cdn-tos.huoshanstatic.com/obj/media-fe/xgplayer_doc_video/music/poster-big.jpeg&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      background-size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      background-repeat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">no-repeat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      background-position</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">center</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> left</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    #info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      font-size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      line-height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">53</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">white</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    #info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      font-size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      line-height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgba</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">225</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">225</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">225</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  #gc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    display</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">block</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    position</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">relative</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    #xgplayer-lrcWrap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">blueviolet</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      border</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> solid</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> #ddd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      padding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">#xgmusic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  position</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">absolute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  bottom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  left</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">#canvasMusic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  position</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">absolute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  bottom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  left</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  top</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  right</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  z-index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -webkit-mask-image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">linear-gradient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">to</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> bottom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgba</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgba</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">70</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgba</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">#mask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  position</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">absolute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  left</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  top</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -webkit-mask-image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">linear-gradient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">to</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> bottom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgba</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgba</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgba</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgba</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">75</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgba</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">85</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rgba</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// canvas {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   width: 100%;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br></div></div></div></div></details><br>`,4),qo=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"pages/Components/video/xgVideoPlay/index.md","filePath":"pages/Components/video/xgVideoPlay/index.md","lastUpdated":1709735719000}'),vo={name:"pages/Components/video/xgVideoPlay/index.md"},$o=Object.assign(vo,{setup(a){return(r,s)=>{const i=$a("client-only");return js(),Et("div",null,[yo,ss(i,null,{default:ks(()=>[ss(Vh),bo,ss(fo)]),_:1}),go])}}});export{qo as __pageData,$o as default};
