import{aA as et,l as Bs,z as dt,aD as nt,az as rt,aS as lt,y as _a,ay as ht,at as xa,d as fa,J as X,r as U,a4 as pt,O as ds,k as ra,o as K,c as va,m as B,n as G,p as v,t as ot,w as Y,b as Oa,L as kt,e as Sa,Q as xs,h as Z,U as As,aw as ct,a3 as vt,$ as Et,aj as gt,N as ut,aE as ft,aG as mt,T as yt,aL as bt,_ as Ms,ao as Ts,a as Fa,q as _s,s as Os,a5 as Ft}from"./chunks/framework.Cyz3vTHn.js";import{E as Na}from"./chunks/index.CZcDM0ok.js";import{u as Ua,b as Va,d as Ia,_ as Ss,c as Ct,w as wt}from"./chunks/plugin-vue_export-helper.Fsmj3gze.js";import{P as Aa}from"./chunks/vnode.CBLYlbSD.js";import{q as Ra,n as ns,t as Dt,m as Bt,r as xt,E as At}from"./chunks/index.4hICx8yr.js";import{i as Mt,C as Tt}from"./chunks/icon.BN6CzzPm.js";import{u as _t}from"./chunks/index.DDvycNo5.js";import{F as Ot,E as St}from"./chunks/focus-trap.ihPlx5kF.js";import{t as Nt,U as Ns}from"./chunks/event.BE20p1dL.js";import{b as Is,k as It,u as rs}from"./chunks/types.DTMeA5EJ.js";import{u as Rt}from"./chunks/index.C4Hremo0.js";import{u as ls}from"./chunks/constants.DkItJwIb.js";import{u as Lt}from"./chunks/use-global-config.BtN9uxNz.js";import{g as Pt}from"./chunks/scroll.CpkHC_n9.js";import{u as hs}from"./chunks/index.BVK2gQxZ.js";import{E as zt}from"./chunks/index.BLF5FumA.js";import{E as Yt}from"./chunks/index.QF29vx0d.js";import"./chunks/use-form-item.CoVXonr6.js";import"./chunks/index.DCbbXQus.js";import"./chunks/get.nfDng5OV.js";import"./chunks/aria.BUADUvnR.js";import"./chunks/isNil.CHIgUVhi.js";import"./chunks/objects.udGwCpTy.js";const qt=(...i)=>a=>{i.forEach(t=>{et(t)?t(a):t.value=a})},Xt=(i,a,t)=>{let s={offsetX:0,offsetY:0};const n=r=>{const k=r.clientX,p=r.clientY,{offsetX:l,offsetY:h}=s,o=i.value.getBoundingClientRect(),E=o.left,g=o.top,F=o.width,f=o.height,w=document.documentElement.clientWidth,D=document.documentElement.clientHeight,C=-E+l,R=-g+h,_=w-E-F+l,c=D-g-f+h,u=O=>{const y=Math.min(Math.max(l+O.clientX-k,C),_),N=Math.min(Math.max(h+O.clientY-p,R),c);s={offsetX:y,offsetY:N},i.value.style.transform=`translate(${Ra(y)}, ${Ra(N)})`},b=()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",b)},e=()=>{a.value&&i.value&&a.value.addEventListener("mousedown",n)},d=()=>{a.value&&i.value&&a.value.removeEventListener("mousedown",n)};Bs(()=>{dt(()=>{t.value?e():d()})}),nt(()=>{d()})},Ht=(i,a={})=>{rt(i)||Nt("[useLockscreen]","You need to pass a ref param to this function");const t=a.ns||Ua("popup"),s=lt(()=>t.bm("parent","hidden"));if(!Is||ns(document.body,s.value))return;let n=0,e=!1,d="0";const r=()=>{setTimeout(()=>{xt(document==null?void 0:document.body,s.value),e&&document&&(document.body.style.width=d)},200)};_a(i,k=>{if(!k){r();return}e=!ns(document.body,s.value),e&&(d=document.body.style.width),n=Pt(t.namespace.value);const p=document.documentElement.clientHeight<document.body.scrollHeight,l=Dt(document.body,"overflowY");n>0&&(p||l==="scroll")&&e&&(document.body.style.width=`calc(100% - ${n}px)`),Bt(document.body,s.value)}),ht(()=>r())},Rs=i=>{if(!i)return{onClick:xa,onMousedown:xa,onMouseup:xa};let a=!1,t=!1;return{onClick:d=>{a&&t&&i(d),a=t=!1},onMousedown:d=>{a=d.target===d.currentTarget},onMouseup:d=>{t=d.target===d.currentTarget}}},Wt=Va({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Ia([String,Array,Object])},zIndex:{type:Ia([String,Number])}}),$t={click:i=>i instanceof MouseEvent},jt="overlay";var Ut=fa({name:"ElOverlay",props:Wt,emits:$t,setup(i,{slots:a,emit:t}){const s=Ua(jt),n=k=>{t("click",k)},{onClick:e,onMousedown:d,onMouseup:r}=Rs(i.customMaskEvent?void 0:n);return()=>i.mask?X("div",{class:[s.b(),i.overlayClass],style:{zIndex:i.zIndex},onClick:e,onMousedown:d,onMouseup:r},[U(a,"default")],Aa.STYLE|Aa.CLASS|Aa.PROPS,["onClick","onMouseup","onMousedown"]):pt("div",{class:i.overlayClass,style:{zIndex:i.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[U(a,"default")])}});const Vt=Ut,Ls=Symbol("dialogInjectionKey"),Ps=Va({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Mt},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Gt={close:()=>!0},Kt=["aria-label"],Zt=["id"],Qt=fa({name:"ElDialogContent"}),Jt=fa({...Qt,props:Ps,emits:Gt,setup(i){const a=i,{t}=_t(),{Close:s}=Tt,{dialogRef:n,headerRef:e,bodyId:d,ns:r,style:k}=ds(Ls),{focusTrapRef:p}=ds(Ot),l=qt(p,n),h=ra(()=>a.draggable);return Xt(n,e,h),(o,E)=>(K(),va("div",{ref:v(l),class:G([v(r).b(),v(r).is("fullscreen",o.fullscreen),v(r).is("draggable",v(h)),v(r).is("align-center",o.alignCenter),{[v(r).m("center")]:o.center},o.customClass]),style:xs(v(k)),tabindex:"-1"},[B("header",{ref_key:"headerRef",ref:e,class:G(v(r).e("header"))},[U(o.$slots,"header",{},()=>[B("span",{role:"heading",class:G(v(r).e("title"))},ot(o.title),3)]),o.showClose?(K(),va("button",{key:0,"aria-label":v(t)("el.dialog.close"),class:G(v(r).e("headerbtn")),type:"button",onClick:E[0]||(E[0]=g=>o.$emit("close"))},[X(v(At),{class:G(v(r).e("close"))},{default:Y(()=>[(K(),Oa(kt(o.closeIcon||v(s))))]),_:1},8,["class"])],10,Kt)):Sa("v-if",!0)],2),B("div",{id:v(d),class:G(v(r).e("body"))},[U(o.$slots,"default")],10,Zt),o.$slots.footer?(K(),va("footer",{key:0,class:G(v(r).e("footer"))},[U(o.$slots,"footer")],2)):Sa("v-if",!0)],6))}});var ai=Ss(Jt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const si=Va({...Ps,appendToBody:{type:Boolean,default:!1},beforeClose:{type:Ia(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),ti={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Ns]:i=>It(i),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ii=(i,a)=>{const s=ct().emit,{nextZIndex:n}=Rt();let e="";const d=ls(),r=ls(),k=Z(!1),p=Z(!1),l=Z(!1),h=Z(i.zIndex||n());let o,E;const g=Lt("namespace",Ct),F=ra(()=>{const M={},T=`--${g.value}-dialog`;return i.fullscreen||(i.top&&(M[`${T}-margin-top`]=i.top),i.width&&(M[`${T}-width`]=Ra(i.width))),M}),f=ra(()=>i.alignCenter?{display:"flex"}:{});function w(){s("opened")}function D(){s("closed"),s(Ns,!1),i.destroyOnClose&&(l.value=!1)}function C(){s("close")}function R(){E==null||E(),o==null||o(),i.openDelay&&i.openDelay>0?{stop:o}=rs(()=>b(),i.openDelay):b()}function _(){o==null||o(),E==null||E(),i.closeDelay&&i.closeDelay>0?{stop:E}=rs(()=>O(),i.closeDelay):O()}function c(){function M(T){T||(p.value=!0,k.value=!1)}i.beforeClose?i.beforeClose(M):_()}function u(){i.closeOnClickModal&&c()}function b(){Is&&(k.value=!0)}function O(){k.value=!1}function y(){s("openAutoFocus")}function N(){s("closeAutoFocus")}function L(M){var T;((T=M.detail)==null?void 0:T.focusReason)==="pointer"&&M.preventDefault()}i.lockScroll&&Ht(k);function W(){i.closeOnPressEscape&&c()}return _a(()=>i.modelValue,M=>{M?(p.value=!1,R(),l.value=!0,h.value=i.zIndex?h.value++:n(),As(()=>{s("open"),a.value&&(a.value.scrollTop=0)})):k.value&&_()}),_a(()=>i.fullscreen,M=>{a.value&&(M?(e=a.value.style.transform,a.value.style.transform=""):a.value.style.transform=e)}),Bs(()=>{i.modelValue&&(k.value=!0,l.value=!0,R())}),{afterEnter:w,afterLeave:D,beforeLeave:C,handleClose:c,onModalClick:u,close:_,doClose:O,onOpenAutoFocus:y,onCloseAutoFocus:N,onCloseRequested:W,onFocusoutPrevented:L,titleId:d,bodyId:r,closed:p,style:F,overlayDialogStyle:f,rendered:l,visible:k,zIndex:h}},ei=["aria-label","aria-labelledby","aria-describedby"],di=fa({name:"ElDialog",inheritAttrs:!1}),ni=fa({...di,props:si,emits:ti,setup(i,{expose:a}){const t=i,s=vt();hs({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},ra(()=>!!s.title)),hs({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},ra(()=>!!t.customClass));const n=Ua("dialog"),e=Z(),d=Z(),r=Z(),{visible:k,titleId:p,bodyId:l,style:h,overlayDialogStyle:o,rendered:E,zIndex:g,afterEnter:F,afterLeave:f,beforeLeave:w,handleClose:D,onModalClick:C,onOpenAutoFocus:R,onCloseAutoFocus:_,onCloseRequested:c,onFocusoutPrevented:u}=ii(t,e);Et(Ls,{dialogRef:e,headerRef:d,bodyId:l,ns:n,rendered:E,style:h});const b=Rs(C),O=ra(()=>t.draggable&&!t.fullscreen);return a({visible:k,dialogContentRef:r}),(y,N)=>(K(),Oa(bt,{to:"body",disabled:!y.appendToBody},[X(yt,{name:"dialog-fade",onAfterEnter:v(F),onAfterLeave:v(f),onBeforeLeave:v(w),persisted:""},{default:Y(()=>[gt(X(v(Vt),{"custom-mask-event":"",mask:y.modal,"overlay-class":y.modalClass,"z-index":v(g)},{default:Y(()=>[B("div",{role:"dialog","aria-modal":"true","aria-label":y.title||void 0,"aria-labelledby":y.title?void 0:v(p),"aria-describedby":v(l),class:G(`${v(n).namespace.value}-overlay-dialog`),style:xs(v(o)),onClick:N[0]||(N[0]=(...L)=>v(b).onClick&&v(b).onClick(...L)),onMousedown:N[1]||(N[1]=(...L)=>v(b).onMousedown&&v(b).onMousedown(...L)),onMouseup:N[2]||(N[2]=(...L)=>v(b).onMouseup&&v(b).onMouseup(...L))},[X(v(St),{loop:"",trapped:v(k),"focus-start-el":"container",onFocusAfterTrapped:v(R),onFocusAfterReleased:v(_),onFocusoutPrevented:v(u),onReleaseRequested:v(c)},{default:Y(()=>[v(E)?(K(),Oa(ai,ut({key:0,ref_key:"dialogContentRef",ref:r},y.$attrs,{"custom-class":y.customClass,center:y.center,"align-center":y.alignCenter,"close-icon":y.closeIcon,draggable:v(O),fullscreen:y.fullscreen,"show-close":y.showClose,title:y.title,onClose:v(D)}),ft({header:Y(()=>[y.$slots.title?U(y.$slots,"title",{key:1}):U(y.$slots,"header",{key:0,close:v(D),titleId:v(p),titleClass:v(n).e("title")})]),default:Y(()=>[U(y.$slots,"default")]),_:2},[y.$slots.footer?{name:"footer",fn:Y(()=>[U(y.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):Sa("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,ei)]),_:3},8,["mask","overlay-class","z-index"]),[[mt,v(k)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var ri=Ss(ni,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const li=wt(ri);/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */function ps(i,a){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,s)}return t}function zs(i){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?arguments[a]:{};a%2?ps(Object(t),!0).forEach(function(s){oi(i,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):ps(Object(t)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(t,s))})}return i}function La(i){"@babel/helpers - typeof";return La=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},La(i)}function hi(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")}function os(i,a){for(var t=0;t<a.length;t++){var s=a[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,qs(s.key),s)}}function pi(i,a,t){return a&&os(i.prototype,a),t&&os(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function oi(i,a,t){return a=qs(a),a in i?Object.defineProperty(i,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[a]=t,i}function Ys(i){return ki(i)||ci(i)||vi(i)||Ei()}function ki(i){if(Array.isArray(i))return Pa(i)}function ci(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function vi(i,a){if(i){if(typeof i=="string")return Pa(i,a);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Pa(i,a)}}function Pa(i,a){(a==null||a>i.length)&&(a=i.length);for(var t=0,s=new Array(a);t<a;t++)s[t]=i[t];return s}function Ei(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gi(i,a){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var s=t.call(i,a||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(i)}function qs(i){var a=gi(i,"string");return typeof a=="symbol"?a:String(a)}var wa=typeof window<"u"&&typeof window.document<"u",j=wa?window:{},Ga=wa&&j.document.documentElement?"ontouchstart"in j.document.documentElement:!1,Ka=wa?"PointerEvent"in j:!1,x="cropper",Za="all",Xs="crop",Hs="move",Ws="zoom",sa="e",ta="w",ea="s",V="n",pa="ne",oa="nw",ka="se",ca="sw",za="".concat(x,"-crop"),ks="".concat(x,"-disabled"),z="".concat(x,"-hidden"),cs="".concat(x,"-hide"),ui="".concat(x,"-invisible"),Ca="".concat(x,"-modal"),Ya="".concat(x,"-move"),ga="".concat(x,"Action"),ya="".concat(x,"Preview"),Qa="crop",$s="move",js="none",qa="crop",Xa="cropend",Ha="cropmove",Wa="cropstart",vs="dblclick",fi=Ga?"touchstart":"mousedown",mi=Ga?"touchmove":"mousemove",yi=Ga?"touchend touchcancel":"mouseup",Es=Ka?"pointerdown":fi,gs=Ka?"pointermove":mi,us=Ka?"pointerup pointercancel":yi,fs="ready",ms="resize",ys="wheel",$a="zoom",bs="image/jpeg",bi=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Fi=/^data:/,Ci=/^data:image\/jpeg;base64,/,wi=/^img|canvas$/i,Us=200,Vs=100,Fs={viewMode:0,dragMode:Qa,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Us,minContainerHeight:Vs,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Di='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Bi=Number.isNaN||j.isNaN;function m(i){return typeof i=="number"&&!Bi(i)}var Cs=function(a){return a>0&&a<1/0};function Ma(i){return typeof i>"u"}function ia(i){return La(i)==="object"&&i!==null}var xi=Object.prototype.hasOwnProperty;function da(i){if(!ia(i))return!1;try{var a=i.constructor,t=a.prototype;return a&&t&&xi.call(t,"isPrototypeOf")}catch{return!1}}function P(i){return typeof i=="function"}var Ai=Array.prototype.slice;function Gs(i){return Array.from?Array.from(i):Ai.call(i)}function S(i,a){return i&&P(a)&&(Array.isArray(i)||m(i.length)?Gs(i).forEach(function(t,s){a.call(i,t,s,i)}):ia(i)&&Object.keys(i).forEach(function(t){a.call(i,i[t],t,i)})),i}var A=Object.assign||function(a){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];return ia(a)&&s.length>0&&s.forEach(function(e){ia(e)&&Object.keys(e).forEach(function(d){a[d]=e[d]})}),a},Mi=/\.\d*(?:0|9){12}\d*$/;function la(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Mi.test(i)?Math.round(i*a)/a:i}var Ti=/^width|height|left|top|marginLeft|marginTop$/;function Q(i,a){var t=i.style;S(a,function(s,n){Ti.test(n)&&m(s)&&(s="".concat(s,"px")),t[n]=s})}function _i(i,a){return i.classList?i.classList.contains(a):i.className.indexOf(a)>-1}function I(i,a){if(a){if(m(i.length)){S(i,function(s){I(s,a)});return}if(i.classList){i.classList.add(a);return}var t=i.className.trim();t?t.indexOf(a)<0&&(i.className="".concat(t," ").concat(a)):i.className=a}}function $(i,a){if(a){if(m(i.length)){S(i,function(t){$(t,a)});return}if(i.classList){i.classList.remove(a);return}i.className.indexOf(a)>=0&&(i.className=i.className.replace(a,""))}}function na(i,a,t){if(a){if(m(i.length)){S(i,function(s){na(s,a,t)});return}t?I(i,a):$(i,a)}}var Oi=/([a-z\d])([A-Z])/g;function Ja(i){return i.replace(Oi,"$1-$2").toLowerCase()}function ja(i,a){return ia(i[a])?i[a]:i.dataset?i.dataset[a]:i.getAttribute("data-".concat(Ja(a)))}function ua(i,a,t){ia(t)?i[a]=t:i.dataset?i.dataset[a]=t:i.setAttribute("data-".concat(Ja(a)),t)}function Si(i,a){if(ia(i[a]))try{delete i[a]}catch{i[a]=void 0}else if(i.dataset)try{delete i.dataset[a]}catch{i.dataset[a]=void 0}else i.removeAttribute("data-".concat(Ja(a)))}var Ks=/\s\s*/,Zs=function(){var i=!1;if(wa){var a=!1,t=function(){},s=Object.defineProperty({},"once",{get:function(){return i=!0,a},set:function(e){a=e}});j.addEventListener("test",t,s),j.removeEventListener("test",t,s)}return i}();function H(i,a,t){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=t;a.trim().split(Ks).forEach(function(e){if(!Zs){var d=i.listeners;d&&d[e]&&d[e][t]&&(n=d[e][t],delete d[e][t],Object.keys(d[e]).length===0&&delete d[e],Object.keys(d).length===0&&delete i.listeners)}i.removeEventListener(e,n,s)})}function q(i,a,t){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=t;a.trim().split(Ks).forEach(function(e){if(s.once&&!Zs){var d=i.listeners,r=d===void 0?{}:d;n=function(){delete r[e][t],i.removeEventListener(e,n,s);for(var p=arguments.length,l=new Array(p),h=0;h<p;h++)l[h]=arguments[h];t.apply(i,l)},r[e]||(r[e]={}),r[e][t]&&i.removeEventListener(e,r[e][t],s),r[e][t]=n,i.listeners=r}i.addEventListener(e,n,s)})}function ha(i,a,t){var s;return P(Event)&&P(CustomEvent)?s=new CustomEvent(a,{detail:t,bubbles:!0,cancelable:!0}):(s=document.createEvent("CustomEvent"),s.initCustomEvent(a,!0,!0,t)),i.dispatchEvent(s)}function Qs(i){var a=i.getBoundingClientRect();return{left:a.left+(window.pageXOffset-document.documentElement.clientLeft),top:a.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ta=j.location,Ni=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function ws(i){var a=i.match(Ni);return a!==null&&(a[1]!==Ta.protocol||a[2]!==Ta.hostname||a[3]!==Ta.port)}function Ds(i){var a="timestamp=".concat(new Date().getTime());return i+(i.indexOf("?")===-1?"?":"&")+a}function Ea(i){var a=i.rotate,t=i.scaleX,s=i.scaleY,n=i.translateX,e=i.translateY,d=[];m(n)&&n!==0&&d.push("translateX(".concat(n,"px)")),m(e)&&e!==0&&d.push("translateY(".concat(e,"px)")),m(a)&&a!==0&&d.push("rotate(".concat(a,"deg)")),m(t)&&t!==1&&d.push("scaleX(".concat(t,")")),m(s)&&s!==1&&d.push("scaleY(".concat(s,")"));var r=d.length?d.join(" "):"none";return{WebkitTransform:r,msTransform:r,transform:r}}function Ii(i){var a=zs({},i),t=0;return S(i,function(s,n){delete a[n],S(a,function(e){var d=Math.abs(s.startX-e.startX),r=Math.abs(s.startY-e.startY),k=Math.abs(s.endX-e.endX),p=Math.abs(s.endY-e.endY),l=Math.sqrt(d*d+r*r),h=Math.sqrt(k*k+p*p),o=(h-l)/l;Math.abs(o)>Math.abs(t)&&(t=o)})}),t}function ba(i,a){var t=i.pageX,s=i.pageY,n={endX:t,endY:s};return a?n:zs({startX:t,startY:s},n)}function Ri(i){var a=0,t=0,s=0;return S(i,function(n){var e=n.startX,d=n.startY;a+=e,t+=d,s+=1}),a/=s,t/=s,{pageX:a,pageY:t}}function J(i){var a=i.aspectRatio,t=i.height,s=i.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",e=Cs(s),d=Cs(t);if(e&&d){var r=t*a;n==="contain"&&r>s||n==="cover"&&r<s?t=s/a:s=t*a}else e?t=s/a:d&&(s=t*a);return{width:s,height:t}}function Li(i){var a=i.width,t=i.height,s=i.degree;if(s=Math.abs(s)%180,s===90)return{width:t,height:a};var n=s%90*Math.PI/180,e=Math.sin(n),d=Math.cos(n),r=a*d+t*e,k=a*e+t*d;return s>90?{width:k,height:r}:{width:r,height:k}}function Pi(i,a,t,s){var n=a.aspectRatio,e=a.naturalWidth,d=a.naturalHeight,r=a.rotate,k=r===void 0?0:r,p=a.scaleX,l=p===void 0?1:p,h=a.scaleY,o=h===void 0?1:h,E=t.aspectRatio,g=t.naturalWidth,F=t.naturalHeight,f=s.fillColor,w=f===void 0?"transparent":f,D=s.imageSmoothingEnabled,C=D===void 0?!0:D,R=s.imageSmoothingQuality,_=R===void 0?"low":R,c=s.maxWidth,u=c===void 0?1/0:c,b=s.maxHeight,O=b===void 0?1/0:b,y=s.minWidth,N=y===void 0?0:y,L=s.minHeight,W=L===void 0?0:L,M=document.createElement("canvas"),T=M.getContext("2d"),aa=J({aspectRatio:E,width:u,height:O}),ma=J({aspectRatio:E,width:N,height:W},"cover"),Da=Math.min(aa.width,Math.max(ma.width,g)),Ba=Math.min(aa.height,Math.max(ma.height,F)),ss=J({aspectRatio:n,width:u,height:O}),ts=J({aspectRatio:n,width:N,height:W},"cover"),is=Math.min(ss.width,Math.max(ts.width,e)),es=Math.min(ss.height,Math.max(ts.height,d)),tt=[-is/2,-es/2,is,es];return M.width=la(Da),M.height=la(Ba),T.fillStyle=w,T.fillRect(0,0,Da,Ba),T.save(),T.translate(Da/2,Ba/2),T.rotate(k*Math.PI/180),T.scale(l,o),T.imageSmoothingEnabled=C,T.imageSmoothingQuality=_,T.drawImage.apply(T,[i].concat(Ys(tt.map(function(it){return Math.floor(la(it))})))),T.restore(),M}var Js=String.fromCharCode;function zi(i,a,t){var s="";t+=a;for(var n=a;n<t;n+=1)s+=Js(i.getUint8(n));return s}var Yi=/^data:.*,/;function qi(i){var a=i.replace(Yi,""),t=atob(a),s=new ArrayBuffer(t.length),n=new Uint8Array(s);return S(n,function(e,d){n[d]=t.charCodeAt(d)}),s}function Xi(i,a){for(var t=[],s=8192,n=new Uint8Array(i);n.length>0;)t.push(Js.apply(null,Gs(n.subarray(0,s)))),n=n.subarray(s);return"data:".concat(a,";base64,").concat(btoa(t.join("")))}function Hi(i){var a=new DataView(i),t;try{var s,n,e;if(a.getUint8(0)===255&&a.getUint8(1)===216)for(var d=a.byteLength,r=2;r+1<d;){if(a.getUint8(r)===255&&a.getUint8(r+1)===225){n=r;break}r+=1}if(n){var k=n+4,p=n+10;if(zi(a,k,4)==="Exif"){var l=a.getUint16(p);if(s=l===18761,(s||l===19789)&&a.getUint16(p+2,s)===42){var h=a.getUint32(p+4,s);h>=8&&(e=p+h)}}}if(e){var o=a.getUint16(e,s),E,g;for(g=0;g<o;g+=1)if(E=e+g*12+2,a.getUint16(E,s)===274){E+=8,t=a.getUint16(E,s),a.setUint16(E,1,s);break}}}catch{t=1}return t}function Wi(i){var a=0,t=1,s=1;switch(i){case 2:t=-1;break;case 3:a=-180;break;case 4:s=-1;break;case 5:a=90,s=-1;break;case 6:a=90;break;case 7:a=90,t=-1;break;case 8:a=-90;break}return{rotate:a,scaleX:t,scaleY:s}}var $i={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var a=this.element,t=this.options,s=this.container,n=this.cropper,e=Number(t.minContainerWidth),d=Number(t.minContainerHeight);I(n,z),$(a,z);var r={width:Math.max(s.offsetWidth,e>=0?e:Us),height:Math.max(s.offsetHeight,d>=0?d:Vs)};this.containerData=r,Q(n,{width:r.width,height:r.height}),I(a,z),$(n,z)},initCanvas:function(){var a=this.containerData,t=this.imageData,s=this.options.viewMode,n=Math.abs(t.rotate)%180===90,e=n?t.naturalHeight:t.naturalWidth,d=n?t.naturalWidth:t.naturalHeight,r=e/d,k=a.width,p=a.height;a.height*r>a.width?s===3?k=a.height*r:p=a.width/r:s===3?p=a.width/r:k=a.height*r;var l={aspectRatio:r,naturalWidth:e,naturalHeight:d,width:k,height:p};this.canvasData=l,this.limited=s===1||s===2,this.limitCanvas(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.left=(a.width-l.width)/2,l.top=(a.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCanvasData=A({},l)},limitCanvas:function(a,t){var s=this.options,n=this.containerData,e=this.canvasData,d=this.cropBoxData,r=s.viewMode,k=e.aspectRatio,p=this.cropped&&d;if(a){var l=Number(s.minCanvasWidth)||0,h=Number(s.minCanvasHeight)||0;r>1?(l=Math.max(l,n.width),h=Math.max(h,n.height),r===3&&(h*k>l?l=h*k:h=l/k)):r>0&&(l?l=Math.max(l,p?d.width:0):h?h=Math.max(h,p?d.height:0):p&&(l=d.width,h=d.height,h*k>l?l=h*k:h=l/k));var o=J({aspectRatio:k,width:l,height:h});l=o.width,h=o.height,e.minWidth=l,e.minHeight=h,e.maxWidth=1/0,e.maxHeight=1/0}if(t)if(r>(p?0:1)){var E=n.width-e.width,g=n.height-e.height;e.minLeft=Math.min(0,E),e.minTop=Math.min(0,g),e.maxLeft=Math.max(0,E),e.maxTop=Math.max(0,g),p&&this.limited&&(e.minLeft=Math.min(d.left,d.left+(d.width-e.width)),e.minTop=Math.min(d.top,d.top+(d.height-e.height)),e.maxLeft=d.left,e.maxTop=d.top,r===2&&(e.width>=n.width&&(e.minLeft=Math.min(0,E),e.maxLeft=Math.max(0,E)),e.height>=n.height&&(e.minTop=Math.min(0,g),e.maxTop=Math.max(0,g))))}else e.minLeft=-e.width,e.minTop=-e.height,e.maxLeft=n.width,e.maxTop=n.height},renderCanvas:function(a,t){var s=this.canvasData,n=this.imageData;if(t){var e=Li({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),d=e.width,r=e.height,k=s.width*(d/s.naturalWidth),p=s.height*(r/s.naturalHeight);s.left-=(k-s.width)/2,s.top-=(p-s.height)/2,s.width=k,s.height=p,s.aspectRatio=d/r,s.naturalWidth=d,s.naturalHeight=r,this.limitCanvas(!0,!1)}(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCanvas(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,Q(this.canvas,A({width:s.width,height:s.height},Ea({translateX:s.left,translateY:s.top}))),this.renderImage(a),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(a){var t=this.canvasData,s=this.imageData,n=s.naturalWidth*(t.width/t.naturalWidth),e=s.naturalHeight*(t.height/t.naturalHeight);A(s,{width:n,height:e,left:(t.width-n)/2,top:(t.height-e)/2}),Q(this.image,A({width:s.width,height:s.height},Ea(A({translateX:s.left,translateY:s.top},s)))),a&&this.output()},initCropBox:function(){var a=this.options,t=this.canvasData,s=a.aspectRatio||a.initialAspectRatio,n=Number(a.autoCropArea)||.8,e={width:t.width,height:t.height};s&&(t.height*s>t.width?e.height=e.width/s:e.width=e.height*s),this.cropBoxData=e,this.limitCropBox(!0,!0),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),e.width=Math.max(e.minWidth,e.width*n),e.height=Math.max(e.minHeight,e.height*n),e.left=t.left+(t.width-e.width)/2,e.top=t.top+(t.height-e.height)/2,e.oldLeft=e.left,e.oldTop=e.top,this.initialCropBoxData=A({},e)},limitCropBox:function(a,t){var s=this.options,n=this.containerData,e=this.canvasData,d=this.cropBoxData,r=this.limited,k=s.aspectRatio;if(a){var p=Number(s.minCropBoxWidth)||0,l=Number(s.minCropBoxHeight)||0,h=r?Math.min(n.width,e.width,e.width+e.left,n.width-e.left):n.width,o=r?Math.min(n.height,e.height,e.height+e.top,n.height-e.top):n.height;p=Math.min(p,n.width),l=Math.min(l,n.height),k&&(p&&l?l*k>p?l=p/k:p=l*k:p?l=p/k:l&&(p=l*k),o*k>h?o=h/k:h=o*k),d.minWidth=Math.min(p,h),d.minHeight=Math.min(l,o),d.maxWidth=h,d.maxHeight=o}t&&(r?(d.minLeft=Math.max(0,e.left),d.minTop=Math.max(0,e.top),d.maxLeft=Math.min(n.width,e.left+e.width)-d.width,d.maxTop=Math.min(n.height,e.top+e.height)-d.height):(d.minLeft=0,d.minTop=0,d.maxLeft=n.width-d.width,d.maxTop=n.height-d.height))},renderCropBox:function(){var a=this.options,t=this.containerData,s=this.cropBoxData;(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCropBox(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,a.movable&&a.cropBoxMovable&&ua(this.face,ga,s.width>=t.width&&s.height>=t.height?Hs:Za),Q(this.cropBox,A({width:s.width,height:s.height},Ea({translateX:s.left,translateY:s.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ha(this.element,qa,this.getData())}},ji={initPreview:function(){var a=this.element,t=this.crossOrigin,s=this.options.preview,n=t?this.crossOriginUrl:this.url,e=a.alt||"The image to preview",d=document.createElement("img");if(t&&(d.crossOrigin=t),d.src=n,d.alt=e,this.viewBox.appendChild(d),this.viewBoxImage=d,!!s){var r=s;typeof s=="string"?r=a.ownerDocument.querySelectorAll(s):s.querySelector&&(r=[s]),this.previews=r,S(r,function(k){var p=document.createElement("img");ua(k,ya,{width:k.offsetWidth,height:k.offsetHeight,html:k.innerHTML}),t&&(p.crossOrigin=t),p.src=n,p.alt=e,p.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',k.innerHTML="",k.appendChild(p)})}},resetPreview:function(){S(this.previews,function(a){var t=ja(a,ya);Q(a,{width:t.width,height:t.height}),a.innerHTML=t.html,Si(a,ya)})},preview:function(){var a=this.imageData,t=this.canvasData,s=this.cropBoxData,n=s.width,e=s.height,d=a.width,r=a.height,k=s.left-t.left-a.left,p=s.top-t.top-a.top;!this.cropped||this.disabled||(Q(this.viewBoxImage,A({width:d,height:r},Ea(A({translateX:-k,translateY:-p},a)))),S(this.previews,function(l){var h=ja(l,ya),o=h.width,E=h.height,g=o,F=E,f=1;n&&(f=o/n,F=e*f),e&&F>E&&(f=E/e,g=n*f,F=E),Q(l,{width:g,height:F}),Q(l.getElementsByTagName("img")[0],A({width:d*f,height:r*f},Ea(A({translateX:-k*f,translateY:-p*f},a))))}))}},Ui={bind:function(){var a=this.element,t=this.options,s=this.cropper;P(t.cropstart)&&q(a,Wa,t.cropstart),P(t.cropmove)&&q(a,Ha,t.cropmove),P(t.cropend)&&q(a,Xa,t.cropend),P(t.crop)&&q(a,qa,t.crop),P(t.zoom)&&q(a,$a,t.zoom),q(s,Es,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&q(s,ys,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&q(s,vs,this.onDblclick=this.dblclick.bind(this)),q(a.ownerDocument,gs,this.onCropMove=this.cropMove.bind(this)),q(a.ownerDocument,us,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&q(window,ms,this.onResize=this.resize.bind(this))},unbind:function(){var a=this.element,t=this.options,s=this.cropper;P(t.cropstart)&&H(a,Wa,t.cropstart),P(t.cropmove)&&H(a,Ha,t.cropmove),P(t.cropend)&&H(a,Xa,t.cropend),P(t.crop)&&H(a,qa,t.crop),P(t.zoom)&&H(a,$a,t.zoom),H(s,Es,this.onCropStart),t.zoomable&&t.zoomOnWheel&&H(s,ys,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&H(s,vs,this.onDblclick),H(a.ownerDocument,gs,this.onCropMove),H(a.ownerDocument,us,this.onCropEnd),t.responsive&&H(window,ms,this.onResize)}},Vi={resize:function(){if(!this.disabled){var a=this.options,t=this.container,s=this.containerData,n=t.offsetWidth/s.width,e=t.offsetHeight/s.height,d=Math.abs(n-1)>Math.abs(e-1)?n:e;if(d!==1){var r,k;a.restore&&(r=this.getCanvasData(),k=this.getCropBoxData()),this.render(),a.restore&&(this.setCanvasData(S(r,function(p,l){r[l]=p*d})),this.setCropBoxData(S(k,function(p,l){k[l]=p*d})))}}},dblclick:function(){this.disabled||this.options.dragMode===js||this.setDragMode(_i(this.dragBox,za)?$s:Qa)},wheel:function(a){var t=this,s=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(a.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),a.deltaY?n=a.deltaY>0?1:-1:a.wheelDelta?n=-a.wheelDelta/120:a.detail&&(n=a.detail>0?1:-1),this.zoom(-n*s,a)))},cropStart:function(a){var t=a.buttons,s=a.button;if(!(this.disabled||(a.type==="mousedown"||a.type==="pointerdown"&&a.pointerType==="mouse")&&(m(t)&&t!==1||m(s)&&s!==0||a.ctrlKey))){var n=this.options,e=this.pointers,d;a.changedTouches?S(a.changedTouches,function(r){e[r.identifier]=ba(r)}):e[a.pointerId||0]=ba(a),Object.keys(e).length>1&&n.zoomable&&n.zoomOnTouch?d=Ws:d=ja(a.target,ga),bi.test(d)&&ha(this.element,Wa,{originalEvent:a,action:d})!==!1&&(a.preventDefault(),this.action=d,this.cropping=!1,d===Xs&&(this.cropping=!0,I(this.dragBox,Ca)))}},cropMove:function(a){var t=this.action;if(!(this.disabled||!t)){var s=this.pointers;a.preventDefault(),ha(this.element,Ha,{originalEvent:a,action:t})!==!1&&(a.changedTouches?S(a.changedTouches,function(n){A(s[n.identifier]||{},ba(n,!0))}):A(s[a.pointerId||0]||{},ba(a,!0)),this.change(a))}},cropEnd:function(a){if(!this.disabled){var t=this.action,s=this.pointers;a.changedTouches?S(a.changedTouches,function(n){delete s[n.identifier]}):delete s[a.pointerId||0],t&&(a.preventDefault(),Object.keys(s).length||(this.action=""),this.cropping&&(this.cropping=!1,na(this.dragBox,Ca,this.cropped&&this.options.modal)),ha(this.element,Xa,{originalEvent:a,action:t}))}}},Gi={change:function(a){var t=this.options,s=this.canvasData,n=this.containerData,e=this.cropBoxData,d=this.pointers,r=this.action,k=t.aspectRatio,p=e.left,l=e.top,h=e.width,o=e.height,E=p+h,g=l+o,F=0,f=0,w=n.width,D=n.height,C=!0,R;!k&&a.shiftKey&&(k=h&&o?h/o:1),this.limited&&(F=e.minLeft,f=e.minTop,w=F+Math.min(n.width,s.width,s.left+s.width),D=f+Math.min(n.height,s.height,s.top+s.height));var _=d[Object.keys(d)[0]],c={x:_.endX-_.startX,y:_.endY-_.startY},u=function(O){switch(O){case sa:E+c.x>w&&(c.x=w-E);break;case ta:p+c.x<F&&(c.x=F-p);break;case V:l+c.y<f&&(c.y=f-l);break;case ea:g+c.y>D&&(c.y=D-g);break}};switch(r){case Za:p+=c.x,l+=c.y;break;case sa:if(c.x>=0&&(E>=w||k&&(l<=f||g>=D))){C=!1;break}u(sa),h+=c.x,h<0&&(r=ta,h=-h,p-=h),k&&(o=h/k,l+=(e.height-o)/2);break;case V:if(c.y<=0&&(l<=f||k&&(p<=F||E>=w))){C=!1;break}u(V),o-=c.y,l+=c.y,o<0&&(r=ea,o=-o,l-=o),k&&(h=o*k,p+=(e.width-h)/2);break;case ta:if(c.x<=0&&(p<=F||k&&(l<=f||g>=D))){C=!1;break}u(ta),h-=c.x,p+=c.x,h<0&&(r=sa,h=-h,p-=h),k&&(o=h/k,l+=(e.height-o)/2);break;case ea:if(c.y>=0&&(g>=D||k&&(p<=F||E>=w))){C=!1;break}u(ea),o+=c.y,o<0&&(r=V,o=-o,l-=o),k&&(h=o*k,p+=(e.width-h)/2);break;case pa:if(k){if(c.y<=0&&(l<=f||E>=w)){C=!1;break}u(V),o-=c.y,l+=c.y,h=o*k}else u(V),u(sa),c.x>=0?E<w?h+=c.x:c.y<=0&&l<=f&&(C=!1):h+=c.x,c.y<=0?l>f&&(o-=c.y,l+=c.y):(o-=c.y,l+=c.y);h<0&&o<0?(r=ca,o=-o,h=-h,l-=o,p-=h):h<0?(r=oa,h=-h,p-=h):o<0&&(r=ka,o=-o,l-=o);break;case oa:if(k){if(c.y<=0&&(l<=f||p<=F)){C=!1;break}u(V),o-=c.y,l+=c.y,h=o*k,p+=e.width-h}else u(V),u(ta),c.x<=0?p>F?(h-=c.x,p+=c.x):c.y<=0&&l<=f&&(C=!1):(h-=c.x,p+=c.x),c.y<=0?l>f&&(o-=c.y,l+=c.y):(o-=c.y,l+=c.y);h<0&&o<0?(r=ka,o=-o,h=-h,l-=o,p-=h):h<0?(r=pa,h=-h,p-=h):o<0&&(r=ca,o=-o,l-=o);break;case ca:if(k){if(c.x<=0&&(p<=F||g>=D)){C=!1;break}u(ta),h-=c.x,p+=c.x,o=h/k}else u(ea),u(ta),c.x<=0?p>F?(h-=c.x,p+=c.x):c.y>=0&&g>=D&&(C=!1):(h-=c.x,p+=c.x),c.y>=0?g<D&&(o+=c.y):o+=c.y;h<0&&o<0?(r=pa,o=-o,h=-h,l-=o,p-=h):h<0?(r=ka,h=-h,p-=h):o<0&&(r=oa,o=-o,l-=o);break;case ka:if(k){if(c.x>=0&&(E>=w||g>=D)){C=!1;break}u(sa),h+=c.x,o=h/k}else u(ea),u(sa),c.x>=0?E<w?h+=c.x:c.y>=0&&g>=D&&(C=!1):h+=c.x,c.y>=0?g<D&&(o+=c.y):o+=c.y;h<0&&o<0?(r=oa,o=-o,h=-h,l-=o,p-=h):h<0?(r=ca,h=-h,p-=h):o<0&&(r=pa,o=-o,l-=o);break;case Hs:this.move(c.x,c.y),C=!1;break;case Ws:this.zoom(Ii(d),a),C=!1;break;case Xs:if(!c.x||!c.y){C=!1;break}R=Qs(this.cropper),p=_.startX-R.left,l=_.startY-R.top,h=e.minWidth,o=e.minHeight,c.x>0?r=c.y>0?ka:pa:c.x<0&&(p-=h,r=c.y>0?ca:oa),c.y<0&&(l-=o),this.cropped||($(this.cropBox,z),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}C&&(e.width=h,e.height=o,e.left=p,e.top=l,this.action=r,this.renderCropBox()),S(d,function(b){b.startX=b.endX,b.startY=b.endY})}},Ki={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&I(this.dragBox,Ca),$(this.cropBox,z),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=A({},this.initialImageData),this.canvasData=A({},this.initialCanvasData),this.cropBoxData=A({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(A(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),$(this.dragBox,Ca),I(this.cropBox,z)),this},replace:function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&a&&(this.isImg&&(this.element.src=a),t?(this.url=a,this.image.src=a,this.ready&&(this.viewBoxImage.src=a,S(this.previews,function(s){s.getElementsByTagName("img")[0].src=a}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(a))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,$(this.cropper,ks)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,I(this.cropper,ks)),this},destroy:function(){var a=this.element;return a[x]?(a[x]=void 0,this.isImg&&this.replaced&&(a.src=this.originalUrl),this.uncreate(),this):this},move:function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,s=this.canvasData,n=s.left,e=s.top;return this.moveTo(Ma(a)?a:n+Number(a),Ma(t)?t:e+Number(t))},moveTo:function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,s=this.canvasData,n=!1;return a=Number(a),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(m(a)&&(s.left=a,n=!0),m(t)&&(s.top=t,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(a,t){var s=this.canvasData;return a=Number(a),a<0?a=1/(1-a):a=1+a,this.zoomTo(s.width*a/s.naturalWidth,null,t)},zoomTo:function(a,t,s){var n=this.options,e=this.canvasData,d=e.width,r=e.height,k=e.naturalWidth,p=e.naturalHeight;if(a=Number(a),a>=0&&this.ready&&!this.disabled&&n.zoomable){var l=k*a,h=p*a;if(ha(this.element,$a,{ratio:a,oldRatio:d/k,originalEvent:s})===!1)return this;if(s){var o=this.pointers,E=Qs(this.cropper),g=o&&Object.keys(o).length?Ri(o):{pageX:s.pageX,pageY:s.pageY};e.left-=(l-d)*((g.pageX-E.left-e.left)/d),e.top-=(h-r)*((g.pageY-E.top-e.top)/r)}else da(t)&&m(t.x)&&m(t.y)?(e.left-=(l-d)*((t.x-e.left)/d),e.top-=(h-r)*((t.y-e.top)/r)):(e.left-=(l-d)/2,e.top-=(h-r)/2);e.width=l,e.height=h,this.renderCanvas(!0)}return this},rotate:function(a){return this.rotateTo((this.imageData.rotate||0)+Number(a))},rotateTo:function(a){return a=Number(a),m(a)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=a%360,this.renderCanvas(!0,!0)),this},scaleX:function(a){var t=this.imageData.scaleY;return this.scale(a,m(t)?t:1)},scaleY:function(a){var t=this.imageData.scaleX;return this.scale(m(t)?t:1,a)},scale:function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,s=this.imageData,n=!1;return a=Number(a),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(m(a)&&(s.scaleX=a,n=!0),m(t)&&(s.scaleY=t,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.options,s=this.imageData,n=this.canvasData,e=this.cropBoxData,d;if(this.ready&&this.cropped){d={x:e.left-n.left,y:e.top-n.top,width:e.width,height:e.height};var r=s.width/s.naturalWidth;if(S(d,function(l,h){d[h]=l/r}),a){var k=Math.round(d.y+d.height),p=Math.round(d.x+d.width);d.x=Math.round(d.x),d.y=Math.round(d.y),d.width=p-d.x,d.height=k-d.y}}else d={x:0,y:0,width:0,height:0};return t.rotatable&&(d.rotate=s.rotate||0),t.scalable&&(d.scaleX=s.scaleX||1,d.scaleY=s.scaleY||1),d},setData:function(a){var t=this.options,s=this.imageData,n=this.canvasData,e={};if(this.ready&&!this.disabled&&da(a)){var d=!1;t.rotatable&&m(a.rotate)&&a.rotate!==s.rotate&&(s.rotate=a.rotate,d=!0),t.scalable&&(m(a.scaleX)&&a.scaleX!==s.scaleX&&(s.scaleX=a.scaleX,d=!0),m(a.scaleY)&&a.scaleY!==s.scaleY&&(s.scaleY=a.scaleY,d=!0)),d&&this.renderCanvas(!0,!0);var r=s.width/s.naturalWidth;m(a.x)&&(e.left=a.x*r+n.left),m(a.y)&&(e.top=a.y*r+n.top),m(a.width)&&(e.width=a.width*r),m(a.height)&&(e.height=a.height*r),this.setCropBoxData(e)}return this},getContainerData:function(){return this.ready?A({},this.containerData):{}},getImageData:function(){return this.sized?A({},this.imageData):{}},getCanvasData:function(){var a=this.canvasData,t={};return this.ready&&S(["left","top","width","height","naturalWidth","naturalHeight"],function(s){t[s]=a[s]}),t},setCanvasData:function(a){var t=this.canvasData,s=t.aspectRatio;return this.ready&&!this.disabled&&da(a)&&(m(a.left)&&(t.left=a.left),m(a.top)&&(t.top=a.top),m(a.width)?(t.width=a.width,t.height=a.width/s):m(a.height)&&(t.height=a.height,t.width=a.height*s),this.renderCanvas(!0)),this},getCropBoxData:function(){var a=this.cropBoxData,t;return this.ready&&this.cropped&&(t={left:a.left,top:a.top,width:a.width,height:a.height}),t||{}},setCropBoxData:function(a){var t=this.cropBoxData,s=this.options.aspectRatio,n,e;return this.ready&&this.cropped&&!this.disabled&&da(a)&&(m(a.left)&&(t.left=a.left),m(a.top)&&(t.top=a.top),m(a.width)&&a.width!==t.width&&(n=!0,t.width=a.width),m(a.height)&&a.height!==t.height&&(e=!0,t.height=a.height),s&&(n?t.height=t.width/s:e&&(t.width=t.height*s)),this.renderCropBox()),this},getCroppedCanvas:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,s=Pi(this.image,this.imageData,t,a);if(!this.cropped)return s;var n=this.getData(a.rounded),e=n.x,d=n.y,r=n.width,k=n.height,p=s.width/Math.floor(t.naturalWidth);p!==1&&(e*=p,d*=p,r*=p,k*=p);var l=r/k,h=J({aspectRatio:l,width:a.maxWidth||1/0,height:a.maxHeight||1/0}),o=J({aspectRatio:l,width:a.minWidth||0,height:a.minHeight||0},"cover"),E=J({aspectRatio:l,width:a.width||(p!==1?s.width:r),height:a.height||(p!==1?s.height:k)}),g=E.width,F=E.height;g=Math.min(h.width,Math.max(o.width,g)),F=Math.min(h.height,Math.max(o.height,F));var f=document.createElement("canvas"),w=f.getContext("2d");f.width=la(g),f.height=la(F),w.fillStyle=a.fillColor||"transparent",w.fillRect(0,0,g,F);var D=a.imageSmoothingEnabled,C=D===void 0?!0:D,R=a.imageSmoothingQuality;w.imageSmoothingEnabled=C,R&&(w.imageSmoothingQuality=R);var _=s.width,c=s.height,u=e,b=d,O,y,N,L,W,M;u<=-r||u>_?(u=0,O=0,N=0,W=0):u<=0?(N=-u,u=0,O=Math.min(_,r+u),W=O):u<=_&&(N=0,O=Math.min(r,_-u),W=O),O<=0||b<=-k||b>c?(b=0,y=0,L=0,M=0):b<=0?(L=-b,b=0,y=Math.min(c,k+b),M=y):b<=c&&(L=0,y=Math.min(k,c-b),M=y);var T=[u,b,O,y];if(W>0&&M>0){var aa=g/r;T.push(N*aa,L*aa,W*aa,M*aa)}return w.drawImage.apply(w,[s].concat(Ys(T.map(function(ma){return Math.floor(la(ma))})))),f},setAspectRatio:function(a){var t=this.options;return!this.disabled&&!Ma(a)&&(t.aspectRatio=Math.max(0,a)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(a){var t=this.options,s=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var e=a===Qa,d=t.movable&&a===$s;a=e||d?a:js,t.dragMode=a,ua(s,ga,a),na(s,za,e),na(s,Ya,d),t.cropBoxMovable||(ua(n,ga,a),na(n,za,e),na(n,Ya,d))}return this}},Zi=j.Cropper,at=function(){function i(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(hi(this,i),!a||!wi.test(a.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=a,this.options=A({},Fs,da(t)&&t),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return pi(i,[{key:"init",value:function(){var t=this.element,s=t.tagName.toLowerCase(),n;if(!t[x]){if(t[x]=this,s==="img"){if(this.isImg=!0,n=t.getAttribute("src")||"",this.originalUrl=n,!n)return;n=t.src}else s==="canvas"&&window.HTMLCanvasElement&&(n=t.toDataURL());this.load(n)}}},{key:"load",value:function(t){var s=this;if(t){this.url=t,this.imageData={};var n=this.element,e=this.options;if(!e.rotatable&&!e.scalable&&(e.checkOrientation=!1),!e.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Fi.test(t)){Ci.test(t)?this.read(qi(t)):this.clone();return}var d=new XMLHttpRequest,r=this.clone.bind(this);this.reloading=!0,this.xhr=d,d.onabort=r,d.onerror=r,d.ontimeout=r,d.onprogress=function(){d.getResponseHeader("content-type")!==bs&&d.abort()},d.onload=function(){s.read(d.response)},d.onloadend=function(){s.reloading=!1,s.xhr=null},e.checkCrossOrigin&&ws(t)&&n.crossOrigin&&(t=Ds(t)),d.open("GET",t,!0),d.responseType="arraybuffer",d.withCredentials=n.crossOrigin==="use-credentials",d.send()}}},{key:"read",value:function(t){var s=this.options,n=this.imageData,e=Hi(t),d=0,r=1,k=1;if(e>1){this.url=Xi(t,bs);var p=Wi(e);d=p.rotate,r=p.scaleX,k=p.scaleY}s.rotatable&&(n.rotate=d),s.scalable&&(n.scaleX=r,n.scaleY=k),this.clone()}},{key:"clone",value:function(){var t=this.element,s=this.url,n=t.crossOrigin,e=s;this.options.checkCrossOrigin&&ws(s)&&(n||(n="anonymous"),e=Ds(s)),this.crossOrigin=n,this.crossOriginUrl=e;var d=document.createElement("img");n&&(d.crossOrigin=n),d.src=e||s,d.alt=t.alt||"The image to crop",this.image=d,d.onload=this.start.bind(this),d.onerror=this.stop.bind(this),I(d,cs),t.parentNode.insertBefore(d,t.nextSibling)}},{key:"start",value:function(){var t=this,s=this.image;s.onload=null,s.onerror=null,this.sizing=!0;var n=j.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(j.navigator.userAgent),e=function(p,l){A(t.imageData,{naturalWidth:p,naturalHeight:l,aspectRatio:p/l}),t.initialImageData=A({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(s.naturalWidth&&!n){e(s.naturalWidth,s.naturalHeight);return}var d=document.createElement("img"),r=document.body||document.documentElement;this.sizingImage=d,d.onload=function(){e(d.width,d.height),n||r.removeChild(d)},d.src=s.src,n||(d.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(d))}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var t=this.element,s=this.options,n=this.image,e=t.parentNode,d=document.createElement("div");d.innerHTML=Di;var r=d.querySelector(".".concat(x,"-container")),k=r.querySelector(".".concat(x,"-canvas")),p=r.querySelector(".".concat(x,"-drag-box")),l=r.querySelector(".".concat(x,"-crop-box")),h=l.querySelector(".".concat(x,"-face"));this.container=e,this.cropper=r,this.canvas=k,this.dragBox=p,this.cropBox=l,this.viewBox=r.querySelector(".".concat(x,"-view-box")),this.face=h,k.appendChild(n),I(t,z),e.insertBefore(r,t.nextSibling),$(n,cs),this.initPreview(),this.bind(),s.initialAspectRatio=Math.max(0,s.initialAspectRatio)||NaN,s.aspectRatio=Math.max(0,s.aspectRatio)||NaN,s.viewMode=Math.max(0,Math.min(3,Math.round(s.viewMode)))||0,I(l,z),s.guides||I(l.getElementsByClassName("".concat(x,"-dashed")),z),s.center||I(l.getElementsByClassName("".concat(x,"-center")),z),s.background&&I(r,"".concat(x,"-bg")),s.highlight||I(h,ui),s.cropBoxMovable&&(I(h,Ya),ua(h,ga,Za)),s.cropBoxResizable||(I(l.getElementsByClassName("".concat(x,"-line")),z),I(l.getElementsByClassName("".concat(x,"-point")),z)),this.render(),this.ready=!0,this.setDragMode(s.dragMode),s.autoCrop&&this.crop(),this.setData(s.data),P(s.ready)&&q(t,fs,s.ready,{once:!0}),ha(t,fs)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),$(this.element,z)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Zi,i}},{key:"setDefaults",value:function(t){A(Fs,da(t)&&t)}}]),i}();A(at.prototype,$i,ji,Ui,Vi,Gi,Ki);const as=i=>(_s("data-v-ad5d70fe"),i=i(),Os(),i),Qi={class:"cropper-warp"},Ji={class:"cropper-warp-left"},ae=["src"],se={class:"cropper-warp-right"},te=as(()=>B("div",{class:"cropper-warp-right-title"},"预览",-1)),ie={class:"cropper-warp-right-item"},ee={class:"cropper-warp-right-value"},de=["src"],ne=as(()=>B("div",{class:"cropper-warp-right-label"},"100 x 100",-1)),re={class:"cropper-warp-right-item"},le={class:"cropper-warp-right-value"},he=["src"],pe=as(()=>B("div",{class:"cropper-warp-right-label"},"50 x 50",-1)),oe={class:"dialog-footer"},ke={__name:"index",setup(i,{expose:a}){const t=Ts({isShowDialog:!1,cropperImg:"",cropperImgBase64:"",cropper:""}),s=k=>{t.cropperImg=k,t.isShowDialog=!0,As(()=>{r()})},n=()=>{t.isShowDialog=!1},e=()=>{n()},d=()=>{},r=()=>{const k=document.querySelector(".cropper-warp-left-img");t.cropper=new at(k,{viewMode:1,dragMode:"none",initialAspectRatio:1,aspectRatio:1,preview:".before",background:!1,autoCropArea:.6,zoomOnWheel:!1,crop:()=>{t.cropperImgBase64=t.cropper.getCroppedCanvas().toDataURL("image/jpeg")}})};return a({openDialog:s}),(k,p)=>(K(),va("div",null,[X(v(li),{title:"更换头像",modelValue:t.isShowDialog,"onUpdate:modelValue":p[0]||(p[0]=l=>t.isShowDialog=l),width:"769px"},{footer:Y(()=>[B("span",oe,[X(v(Na),{onClick:e,size:"default"},{default:Y(()=>[Fa("取 消")]),_:1}),X(v(Na),{type:"primary",onClick:d,size:"default"},{default:Y(()=>[Fa("更 换")]),_:1})])]),default:Y(()=>[B("div",Qi,[B("div",Ji,[B("img",{src:t.cropperImg,class:"cropper-warp-left-img"},null,8,ae)]),B("div",se,[te,B("div",ie,[B("div",ee,[B("img",{src:t.cropperImgBase64,class:"cropper-warp-right-value-img"},null,8,de)]),ne]),B("div",re,[B("div",le,[B("img",{src:t.cropperImgBase64,class:"cropper-warp-right-value-img cropper-size"},null,8,he)]),pe])])])]),_:1},8,["modelValue"])]))}},ce=Ms(ke,[["__scopeId","data-v-ad5d70fe"]]),st=i=>(_s("data-v-d6279ed9"),i=i(),Os(),i),ve=st(()=>B("h1",{id:"基于cropperjs-实现的-图片裁切",tabindex:"-1"},[Fa("基于cropperjs 实现的 图片裁切 "),B("a",{class:"header-anchor",href:"#基于cropperjs-实现的-图片裁切","aria-label":'Permalink to "基于cropperjs 实现的 图片裁切"'},"​")],-1)),Ee=st(()=>B("br",null,null,-1)),ge={class:"croppers-container layout-pd"},ue={class:"cropper-img-warp"},fe={class:"mb15 mt15"},me=["src"],ye=Ft("",1),je=JSON.parse('{"title":"基于cropperjs 实现的 图片裁切","description":"","frontmatter":{},"headers":[],"relativePath":"pages/Components/cropper/index.md","filePath":"pages/Components/cropper/index.md","lastUpdated":1709992250000}'),be={name:"pages/Components/cropper/index.md"},Fe=Object.assign(be,{setup(i){const a=Z(),t=Ts({cropperImg:"https://img2.baidu.com/it/u=1978192862,2048448374&fm=253&fmt=auto&app=138&f=JPEG?w=504&h=500"}),s=()=>{a.value.openDialog(t.cropperImg)};return(n,e)=>(K(),va("div",null,[ve,Ee,B("div",ge,[X(v(Yt),{shadow:"hover",header:"cropper 图片裁剪"},{default:Y(()=>[X(v(zt),{title:"感谢优秀的 `cropperjs`，项目地址：https://github.com/fengyuanchen/cropperjs",type:"success",closable:!1,class:"mb15"}),B("div",ue,[B("div",fe,[B("img",{class:"cropper-img",src:t.cropperImg},null,8,me)]),X(v(Na),{type:"primary",size:"default",onClick:s},{default:Y(()=>[Fa(" 更换头像 ")]),_:1})])]),_:1}),X(ce,{ref_key:"cropperDialogRef",ref:a},null,512)]),ye]))}}),Ue=Ms(Fe,[["__scopeId","data-v-d6279ed9"]]);export{je as __pageData,Ue as default};
