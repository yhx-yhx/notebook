import{g as Aa,c as nm}from"./chunks/commonjsHelpers.725317a4.js";import{h as ee,z as ve,x as rm,y as im,l as F,D as Lr,j as Tt,E as rt,a6 as Pn,o as $,c as me,k as ye,a7 as gr,a8 as Zu,a9 as sm,aa as ps,g as W,V as Je,B as am,ab as ln,C as Qr,ac as Cn,ad as om,$ as gn,d as _e,r as Ke,U as $r,q as dr,H as lm,ae as vp,af as zn,ag as xs,n as se,I as yp,N as He,K as In,a4 as gp,w as pe,b as Re,R as Kn,W as vt,a as Na,t as Ft,e as Ee,ah as um,ai as cm,aj as hr,ak as Yi,a3 as En,T as hs,al as dm,am as pm,an as hm,ao as fm,s as mm,ap as vm,aq as ha,ar as Qi,as as mo,J as or,at as ym,L as aa,a1 as Tn,au as gm,av as bm,X as Sm}from"./chunks/framework.918d6b86.js";const lr=(r,s,{checkForDefaultPrevented:n=!0}={})=>e=>{const i=r==null?void 0:r(e);if(n===!1||!i)return s==null?void 0:s(e)};var Du;const Ot=typeof window<"u",wm=r=>typeof r=="string",fa=()=>{},bp=Ot&&((Du=window==null?void 0:window.navigator)==null?void 0:Du.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function ma(r){return typeof r=="function"?r():F(r)}function Cm(r,s){function n(...t){return new Promise((e,i)=>{Promise.resolve(r(()=>s.apply(this,t),{fn:s,thisArg:this,args:t})).then(e).catch(i)})}return n}function Lm(r,s={}){let n,t,e=fa;const i=o=>{clearTimeout(o),e(),e=fa};return o=>{const l=ma(r),u=ma(s.maxWait);return n&&i(n),l<=0||u!==void 0&&u<=0?(t&&(i(t),t=null),Promise.resolve(o())):new Promise((c,d)=>{e=s.rejectOnCancel?d:c,u&&!t&&(t=setTimeout(()=>{n&&i(n),t=null,c(o())},u)),n=setTimeout(()=>{t&&i(t),t=null,c(o())},l)})}}function Tm(r){return r}function Dl(r){return rm()?(im(r),!0):!1}function km(r,s=200,n={}){return Cm(Lm(s,n),r)}function _m(r,s=200,n={}){const t=ee(r.value),e=km(()=>{t.value=r.value},s,n);return ve(r,()=>e()),t}function Zm(r,s=!0){Lr()?Tt(r):s?r():rt(r)}function Mr(r){var s;const n=ma(r);return(s=n==null?void 0:n.$el)!=null?s:n}const El=Ot?window:void 0;function qr(...r){let s,n,t,e;if(wm(r[0])||Array.isArray(r[0])?([n,t,e]=r,s=El):[s,n,t,e]=r,!s)return fa;Array.isArray(n)||(n=[n]),Array.isArray(t)||(t=[t]);const i=[],a=()=>{i.forEach(c=>c()),i.length=0},o=(c,d,p,h)=>(c.addEventListener(d,p,h),()=>c.removeEventListener(d,p,h)),l=ve(()=>[Mr(s),ma(e)],([c,d])=>{a(),c&&i.push(...n.flatMap(p=>t.map(h=>o(c,p,h,d))))},{immediate:!0,flush:"post"}),u=()=>{l(),a()};return Dl(u),u}let Eu=!1;function Dm(r,s,n={}){const{window:t=El,ignore:e=[],capture:i=!0,detectIframe:a=!1}=n;if(!t)return;bp&&!Eu&&(Eu=!0,Array.from(t.document.body.children).forEach(p=>p.addEventListener("click",fa)));let o=!0;const l=p=>e.some(h=>{if(typeof h=="string")return Array.from(t.document.querySelectorAll(h)).some(m=>m===p.target||p.composedPath().includes(m));{const m=Mr(h);return m&&(p.target===m||p.composedPath().includes(m))}}),c=[qr(t,"click",p=>{const h=Mr(r);if(!(!h||h===p.target||p.composedPath().includes(h))){if(p.detail===0&&(o=!l(p)),!o){o=!0;return}s(p)}},{passive:!0,capture:i}),qr(t,"pointerdown",p=>{const h=Mr(r);h&&(o=!p.composedPath().includes(h)&&!l(p))},{passive:!0}),a&&qr(t,"blur",p=>{var h;const m=Mr(r);((h=t.document.activeElement)==null?void 0:h.tagName)==="IFRAME"&&!(m!=null&&m.contains(t.document.activeElement))&&s(p)})].filter(Boolean);return()=>c.forEach(p=>p())}function Em(r,s=!1){const n=ee(),t=()=>n.value=!!r();return t(),Zm(t,s),n}const xu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fu="__vueuse_ssr_handlers__";xu[Fu]=xu[Fu]||{};var Ru=Object.getOwnPropertySymbols,xm=Object.prototype.hasOwnProperty,Fm=Object.prototype.propertyIsEnumerable,Rm=(r,s)=>{var n={};for(var t in r)xm.call(r,t)&&s.indexOf(t)<0&&(n[t]=r[t]);if(r!=null&&Ru)for(var t of Ru(r))s.indexOf(t)<0&&Fm.call(r,t)&&(n[t]=r[t]);return n};function Fs(r,s,n={}){const t=n,{window:e=El}=t,i=Rm(t,["window"]);let a;const o=Em(()=>e&&"ResizeObserver"in e),l=()=>{a&&(a.disconnect(),a=void 0)},u=ve(()=>Mr(r),d=>{l(),o.value&&e&&d&&(a=new ResizeObserver(s),a.observe(d,i))},{immediate:!0,flush:"post"}),c=()=>{l(),u()};return Dl(c),{isSupported:o,stop:c}}var Iu;(function(r){r.UP="UP",r.RIGHT="RIGHT",r.DOWN="DOWN",r.LEFT="LEFT",r.NONE="NONE"})(Iu||(Iu={}));var Im=Object.defineProperty,Pu=Object.getOwnPropertySymbols,Pm=Object.prototype.hasOwnProperty,Mm=Object.prototype.propertyIsEnumerable,Mu=(r,s,n)=>s in r?Im(r,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[s]=n,Xm=(r,s)=>{for(var n in s||(s={}))Pm.call(s,n)&&Mu(r,n,s[n]);if(Pu)for(var n of Pu(s))Mm.call(s,n)&&Mu(r,n,s[n]);return r};const Gm={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Xm({linear:Tm},Gm);const Wm=()=>Ot&&/firefox/i.test(window.navigator.userAgent);var Vm=typeof global=="object"&&global&&global.Object===Object&&global;const Sp=Vm;var Am=typeof self=="object"&&self&&self.Object===Object&&self,Nm=Sp||Am||Function("return this")();const Gn=Nm;var Om=Gn.Symbol;const Jn=Om;var wp=Object.prototype,Ym=wp.hasOwnProperty,Hm=wp.toString,$i=Jn?Jn.toStringTag:void 0;function Km(r){var s=Ym.call(r,$i),n=r[$i];try{r[$i]=void 0;var t=!0}catch{}var e=Hm.call(r);return t&&(s?r[$i]=n:delete r[$i]),e}var Um=Object.prototype,zm=Um.toString;function Bm(r){return zm.call(r)}var jm="[object Null]",Jm="[object Undefined]",Xu=Jn?Jn.toStringTag:void 0;function Hi(r){return r==null?r===void 0?Jm:jm:Xu&&Xu in Object(r)?Km(r):Bm(r)}function Vr(r){return r!=null&&typeof r=="object"}var Qm="[object Symbol]";function Oa(r){return typeof r=="symbol"||Vr(r)&&Hi(r)==Qm}function $m(r,s){for(var n=-1,t=r==null?0:r.length,e=Array(t);++n<t;)e[n]=s(r[n],n,r);return e}var qm=Array.isArray;const br=qm;var ev=1/0,Gu=Jn?Jn.prototype:void 0,Wu=Gu?Gu.toString:void 0;function Cp(r){if(typeof r=="string")return r;if(br(r))return $m(r,Cp)+"";if(Oa(r))return Wu?Wu.call(r):"";var s=r+"";return s=="0"&&1/r==-ev?"-0":s}var tv=/\s/;function nv(r){for(var s=r.length;s--&&tv.test(r.charAt(s)););return s}var rv=/^\s+/;function iv(r){return r&&r.slice(0,nv(r)+1).replace(rv,"")}function Qn(r){var s=typeof r;return r!=null&&(s=="object"||s=="function")}var Vu=0/0,sv=/^[-+]0x[0-9a-f]+$/i,av=/^0b[01]+$/i,ov=/^0o[0-7]+$/i,lv=parseInt;function Au(r){if(typeof r=="number")return r;if(Oa(r))return Vu;if(Qn(r)){var s=typeof r.valueOf=="function"?r.valueOf():r;r=Qn(s)?s+"":s}if(typeof r!="string")return r===0?r:+r;r=iv(r);var n=av.test(r);return n||ov.test(r)?lv(r.slice(2),n?2:8):sv.test(r)?Vu:+r}var uv="[object AsyncFunction]",cv="[object Function]",dv="[object GeneratorFunction]",pv="[object Proxy]";function Lp(r){if(!Qn(r))return!1;var s=Hi(r);return s==cv||s==dv||s==uv||s==pv}var hv=Gn["__core-js_shared__"];const vo=hv;var Nu=function(){var r=/[^.]+$/.exec(vo&&vo.keys&&vo.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function fv(r){return!!Nu&&Nu in r}var mv=Function.prototype,vv=mv.toString;function ci(r){if(r!=null){try{return vv.call(r)}catch{}try{return r+""}catch{}}return""}var yv=/[\\^$.*+?()[\]{}|]/g,gv=/^\[object .+?Constructor\]$/,bv=Function.prototype,Sv=Object.prototype,wv=bv.toString,Cv=Sv.hasOwnProperty,Lv=RegExp("^"+wv.call(Cv).replace(yv,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Tv(r){if(!Qn(r)||fv(r))return!1;var s=Lp(r)?Lv:gv;return s.test(ci(r))}function kv(r,s){return r==null?void 0:r[s]}function di(r,s){var n=kv(r,s);return Tv(n)?n:void 0}var _v=di(Gn,"WeakMap");const zo=_v;var Ou=Object.create,Zv=function(){function r(){}return function(s){if(!Qn(s))return{};if(Ou)return Ou(s);r.prototype=s;var n=new r;return r.prototype=void 0,n}}();const Dv=Zv;function Ev(r,s){var n=-1,t=r.length;for(s||(s=Array(t));++n<t;)s[n]=r[n];return s}var xv=function(){try{var r=di(Object,"defineProperty");return r({},"",{}),r}catch{}}();const Yu=xv;function Fv(r,s){for(var n=-1,t=r==null?0:r.length;++n<t&&s(r[n],n,r)!==!1;);return r}var Rv=9007199254740991,Iv=/^(?:0|[1-9]\d*)$/;function Tp(r,s){var n=typeof r;return s=s??Rv,!!s&&(n=="number"||n!="symbol"&&Iv.test(r))&&r>-1&&r%1==0&&r<s}function kp(r,s,n){s=="__proto__"&&Yu?Yu(r,s,{configurable:!0,enumerable:!0,value:n,writable:!0}):r[s]=n}function xl(r,s){return r===s||r!==r&&s!==s}var Pv=Object.prototype,Mv=Pv.hasOwnProperty;function Fl(r,s,n){var t=r[s];(!(Mv.call(r,s)&&xl(t,n))||n===void 0&&!(s in r))&&kp(r,s,n)}function Ya(r,s,n,t){var e=!n;n||(n={});for(var i=-1,a=s.length;++i<a;){var o=s[i],l=t?t(n[o],r[o],o,n,r):void 0;l===void 0&&(l=r[o]),e?kp(n,o,l):Fl(n,o,l)}return n}var Xv=9007199254740991;function _p(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Xv}function Zp(r){return r!=null&&_p(r.length)&&!Lp(r)}var Gv=Object.prototype;function Rl(r){var s=r&&r.constructor,n=typeof s=="function"&&s.prototype||Gv;return r===n}function Wv(r,s){for(var n=-1,t=Array(r);++n<r;)t[n]=s(n);return t}var Vv="[object Arguments]";function Hu(r){return Vr(r)&&Hi(r)==Vv}var Dp=Object.prototype,Av=Dp.hasOwnProperty,Nv=Dp.propertyIsEnumerable,Ov=Hu(function(){return arguments}())?Hu:function(r){return Vr(r)&&Av.call(r,"callee")&&!Nv.call(r,"callee")};const Yv=Ov;function Hv(){return!1}var Ep=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ku=Ep&&typeof module=="object"&&module&&!module.nodeType&&module,Kv=Ku&&Ku.exports===Ep,Uu=Kv?Gn.Buffer:void 0,Uv=Uu?Uu.isBuffer:void 0,zv=Uv||Hv;const va=zv;var Bv="[object Arguments]",jv="[object Array]",Jv="[object Boolean]",Qv="[object Date]",$v="[object Error]",qv="[object Function]",ey="[object Map]",ty="[object Number]",ny="[object Object]",ry="[object RegExp]",iy="[object Set]",sy="[object String]",ay="[object WeakMap]",oy="[object ArrayBuffer]",ly="[object DataView]",uy="[object Float32Array]",cy="[object Float64Array]",dy="[object Int8Array]",py="[object Int16Array]",hy="[object Int32Array]",fy="[object Uint8Array]",my="[object Uint8ClampedArray]",vy="[object Uint16Array]",yy="[object Uint32Array]",at={};at[uy]=at[cy]=at[dy]=at[py]=at[hy]=at[fy]=at[my]=at[vy]=at[yy]=!0;at[Bv]=at[jv]=at[oy]=at[Jv]=at[ly]=at[Qv]=at[$v]=at[qv]=at[ey]=at[ty]=at[ny]=at[ry]=at[iy]=at[sy]=at[ay]=!1;function gy(r){return Vr(r)&&_p(r.length)&&!!at[Hi(r)]}function Il(r){return function(s){return r(s)}}var xp=typeof exports=="object"&&exports&&!exports.nodeType&&exports,os=xp&&typeof module=="object"&&module&&!module.nodeType&&module,by=os&&os.exports===xp,yo=by&&Sp.process,Sy=function(){try{var r=os&&os.require&&os.require("util").types;return r||yo&&yo.binding&&yo.binding("util")}catch{}}();const Pi=Sy;var zu=Pi&&Pi.isTypedArray,wy=zu?Il(zu):gy;const Fp=wy;var Cy=Object.prototype,Ly=Cy.hasOwnProperty;function Rp(r,s){var n=br(r),t=!n&&Yv(r),e=!n&&!t&&va(r),i=!n&&!t&&!e&&Fp(r),a=n||t||e||i,o=a?Wv(r.length,String):[],l=o.length;for(var u in r)(s||Ly.call(r,u))&&!(a&&(u=="length"||e&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Tp(u,l)))&&o.push(u);return o}function Ip(r,s){return function(n){return r(s(n))}}var Ty=Ip(Object.keys,Object);const ky=Ty;var _y=Object.prototype,Zy=_y.hasOwnProperty;function Dy(r){if(!Rl(r))return ky(r);var s=[];for(var n in Object(r))Zy.call(r,n)&&n!="constructor"&&s.push(n);return s}function Pl(r){return Zp(r)?Rp(r):Dy(r)}function Ey(r){var s=[];if(r!=null)for(var n in Object(r))s.push(n);return s}var xy=Object.prototype,Fy=xy.hasOwnProperty;function Ry(r){if(!Qn(r))return Ey(r);var s=Rl(r),n=[];for(var t in r)t=="constructor"&&(s||!Fy.call(r,t))||n.push(t);return n}function Ml(r){return Zp(r)?Rp(r,!0):Ry(r)}var Iy=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Py=/^\w*$/;function My(r,s){if(br(r))return!1;var n=typeof r;return n=="number"||n=="symbol"||n=="boolean"||r==null||Oa(r)?!0:Py.test(r)||!Iy.test(r)||s!=null&&r in Object(s)}var Xy=di(Object,"create");const fs=Xy;function Gy(){this.__data__=fs?fs(null):{},this.size=0}function Wy(r){var s=this.has(r)&&delete this.__data__[r];return this.size-=s?1:0,s}var Vy="__lodash_hash_undefined__",Ay=Object.prototype,Ny=Ay.hasOwnProperty;function Oy(r){var s=this.__data__;if(fs){var n=s[r];return n===Vy?void 0:n}return Ny.call(s,r)?s[r]:void 0}var Yy=Object.prototype,Hy=Yy.hasOwnProperty;function Ky(r){var s=this.__data__;return fs?s[r]!==void 0:Hy.call(s,r)}var Uy="__lodash_hash_undefined__";function zy(r,s){var n=this.__data__;return this.size+=this.has(r)?0:1,n[r]=fs&&s===void 0?Uy:s,this}function ri(r){var s=-1,n=r==null?0:r.length;for(this.clear();++s<n;){var t=r[s];this.set(t[0],t[1])}}ri.prototype.clear=Gy;ri.prototype.delete=Wy;ri.prototype.get=Oy;ri.prototype.has=Ky;ri.prototype.set=zy;function By(){this.__data__=[],this.size=0}function Ha(r,s){for(var n=r.length;n--;)if(xl(r[n][0],s))return n;return-1}var jy=Array.prototype,Jy=jy.splice;function Qy(r){var s=this.__data__,n=Ha(s,r);if(n<0)return!1;var t=s.length-1;return n==t?s.pop():Jy.call(s,n,1),--this.size,!0}function $y(r){var s=this.__data__,n=Ha(s,r);return n<0?void 0:s[n][1]}function qy(r){return Ha(this.__data__,r)>-1}function eg(r,s){var n=this.__data__,t=Ha(n,r);return t<0?(++this.size,n.push([r,s])):n[t][1]=s,this}function Tr(r){var s=-1,n=r==null?0:r.length;for(this.clear();++s<n;){var t=r[s];this.set(t[0],t[1])}}Tr.prototype.clear=By;Tr.prototype.delete=Qy;Tr.prototype.get=$y;Tr.prototype.has=qy;Tr.prototype.set=eg;var tg=di(Gn,"Map");const ms=tg;function ng(){this.size=0,this.__data__={hash:new ri,map:new(ms||Tr),string:new ri}}function rg(r){var s=typeof r;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?r!=="__proto__":r===null}function Ka(r,s){var n=r.__data__;return rg(s)?n[typeof s=="string"?"string":"hash"]:n.map}function ig(r){var s=Ka(this,r).delete(r);return this.size-=s?1:0,s}function sg(r){return Ka(this,r).get(r)}function ag(r){return Ka(this,r).has(r)}function og(r,s){var n=Ka(this,r),t=n.size;return n.set(r,s),this.size+=n.size==t?0:1,this}function kr(r){var s=-1,n=r==null?0:r.length;for(this.clear();++s<n;){var t=r[s];this.set(t[0],t[1])}}kr.prototype.clear=ng;kr.prototype.delete=ig;kr.prototype.get=sg;kr.prototype.has=ag;kr.prototype.set=og;var lg="Expected a function";function Xl(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new TypeError(lg);var n=function(){var t=arguments,e=s?s.apply(this,t):t[0],i=n.cache;if(i.has(e))return i.get(e);var a=r.apply(this,t);return n.cache=i.set(e,a)||i,a};return n.cache=new(Xl.Cache||kr),n}Xl.Cache=kr;var ug=500;function cg(r){var s=Xl(r,function(t){return n.size===ug&&n.clear(),t}),n=s.cache;return s}var dg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pg=/\\(\\)?/g,hg=cg(function(r){var s=[];return r.charCodeAt(0)===46&&s.push(""),r.replace(dg,function(n,t,e,i){s.push(e?i.replace(pg,"$1"):t||n)}),s});const fg=hg;function mg(r){return r==null?"":Cp(r)}function Pp(r,s){return br(r)?r:My(r,s)?[r]:fg(mg(r))}var vg=1/0;function Mp(r){if(typeof r=="string"||Oa(r))return r;var s=r+"";return s=="0"&&1/r==-vg?"-0":s}function yg(r,s){s=Pp(s,r);for(var n=0,t=s.length;r!=null&&n<t;)r=r[Mp(s[n++])];return n&&n==t?r:void 0}function an(r,s,n){var t=r==null?void 0:yg(r,s);return t===void 0?n:t}function Xp(r,s){for(var n=-1,t=s.length,e=r.length;++n<t;)r[e+n]=s[n];return r}var gg=Ip(Object.getPrototypeOf,Object);const Gp=gg;function Bo(){if(!arguments.length)return[];var r=arguments[0];return br(r)?r:[r]}function bg(){this.__data__=new Tr,this.size=0}function Sg(r){var s=this.__data__,n=s.delete(r);return this.size=s.size,n}function wg(r){return this.__data__.get(r)}function Cg(r){return this.__data__.has(r)}var Lg=200;function Tg(r,s){var n=this.__data__;if(n instanceof Tr){var t=n.__data__;if(!ms||t.length<Lg-1)return t.push([r,s]),this.size=++n.size,this;n=this.__data__=new kr(t)}return n.set(r,s),this.size=n.size,this}function fr(r){var s=this.__data__=new Tr(r);this.size=s.size}fr.prototype.clear=bg;fr.prototype.delete=Sg;fr.prototype.get=wg;fr.prototype.has=Cg;fr.prototype.set=Tg;function kg(r,s){return r&&Ya(s,Pl(s),r)}function _g(r,s){return r&&Ya(s,Ml(s),r)}var Wp=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Bu=Wp&&typeof module=="object"&&module&&!module.nodeType&&module,Zg=Bu&&Bu.exports===Wp,ju=Zg?Gn.Buffer:void 0,Ju=ju?ju.allocUnsafe:void 0;function Dg(r,s){if(s)return r.slice();var n=r.length,t=Ju?Ju(n):new r.constructor(n);return r.copy(t),t}function Eg(r,s){for(var n=-1,t=r==null?0:r.length,e=0,i=[];++n<t;){var a=r[n];s(a,n,r)&&(i[e++]=a)}return i}function Vp(){return[]}var xg=Object.prototype,Fg=xg.propertyIsEnumerable,Qu=Object.getOwnPropertySymbols,Rg=Qu?function(r){return r==null?[]:(r=Object(r),Eg(Qu(r),function(s){return Fg.call(r,s)}))}:Vp;const Gl=Rg;function Ig(r,s){return Ya(r,Gl(r),s)}var Pg=Object.getOwnPropertySymbols,Mg=Pg?function(r){for(var s=[];r;)Xp(s,Gl(r)),r=Gp(r);return s}:Vp;const Ap=Mg;function Xg(r,s){return Ya(r,Ap(r),s)}function Np(r,s,n){var t=s(r);return br(r)?t:Xp(t,n(r))}function jo(r){return Np(r,Pl,Gl)}function Gg(r){return Np(r,Ml,Ap)}var Wg=di(Gn,"DataView");const Jo=Wg;var Vg=di(Gn,"Promise");const Qo=Vg;var Ag=di(Gn,"Set");const $o=Ag;var $u="[object Map]",Ng="[object Object]",qu="[object Promise]",ec="[object Set]",tc="[object WeakMap]",nc="[object DataView]",Og=ci(Jo),Yg=ci(ms),Hg=ci(Qo),Kg=ci($o),Ug=ci(zo),Ur=Hi;(Jo&&Ur(new Jo(new ArrayBuffer(1)))!=nc||ms&&Ur(new ms)!=$u||Qo&&Ur(Qo.resolve())!=qu||$o&&Ur(new $o)!=ec||zo&&Ur(new zo)!=tc)&&(Ur=function(r){var s=Hi(r),n=s==Ng?r.constructor:void 0,t=n?ci(n):"";if(t)switch(t){case Og:return nc;case Yg:return $u;case Hg:return qu;case Kg:return ec;case Ug:return tc}return s});const vs=Ur;var zg=Object.prototype,Bg=zg.hasOwnProperty;function jg(r){var s=r.length,n=new r.constructor(s);return s&&typeof r[0]=="string"&&Bg.call(r,"index")&&(n.index=r.index,n.input=r.input),n}var Jg=Gn.Uint8Array;const ya=Jg;function Wl(r){var s=new r.constructor(r.byteLength);return new ya(s).set(new ya(r)),s}function Qg(r,s){var n=s?Wl(r.buffer):r.buffer;return new r.constructor(n,r.byteOffset,r.byteLength)}var $g=/\w*$/;function qg(r){var s=new r.constructor(r.source,$g.exec(r));return s.lastIndex=r.lastIndex,s}var rc=Jn?Jn.prototype:void 0,ic=rc?rc.valueOf:void 0;function e0(r){return ic?Object(ic.call(r)):{}}function t0(r,s){var n=s?Wl(r.buffer):r.buffer;return new r.constructor(n,r.byteOffset,r.length)}var n0="[object Boolean]",r0="[object Date]",i0="[object Map]",s0="[object Number]",a0="[object RegExp]",o0="[object Set]",l0="[object String]",u0="[object Symbol]",c0="[object ArrayBuffer]",d0="[object DataView]",p0="[object Float32Array]",h0="[object Float64Array]",f0="[object Int8Array]",m0="[object Int16Array]",v0="[object Int32Array]",y0="[object Uint8Array]",g0="[object Uint8ClampedArray]",b0="[object Uint16Array]",S0="[object Uint32Array]";function w0(r,s,n){var t=r.constructor;switch(s){case c0:return Wl(r);case n0:case r0:return new t(+r);case d0:return Qg(r,n);case p0:case h0:case f0:case m0:case v0:case y0:case g0:case b0:case S0:return t0(r,n);case i0:return new t;case s0:case l0:return new t(r);case a0:return qg(r);case o0:return new t;case u0:return e0(r)}}function C0(r){return typeof r.constructor=="function"&&!Rl(r)?Dv(Gp(r)):{}}var L0="[object Map]";function T0(r){return Vr(r)&&vs(r)==L0}var sc=Pi&&Pi.isMap,k0=sc?Il(sc):T0;const _0=k0;var Z0="[object Set]";function D0(r){return Vr(r)&&vs(r)==Z0}var ac=Pi&&Pi.isSet,E0=ac?Il(ac):D0;const x0=E0;var F0=1,R0=2,I0=4,Op="[object Arguments]",P0="[object Array]",M0="[object Boolean]",X0="[object Date]",G0="[object Error]",Yp="[object Function]",W0="[object GeneratorFunction]",V0="[object Map]",A0="[object Number]",Hp="[object Object]",N0="[object RegExp]",O0="[object Set]",Y0="[object String]",H0="[object Symbol]",K0="[object WeakMap]",U0="[object ArrayBuffer]",z0="[object DataView]",B0="[object Float32Array]",j0="[object Float64Array]",J0="[object Int8Array]",Q0="[object Int16Array]",$0="[object Int32Array]",q0="[object Uint8Array]",eb="[object Uint8ClampedArray]",tb="[object Uint16Array]",nb="[object Uint32Array]",tt={};tt[Op]=tt[P0]=tt[U0]=tt[z0]=tt[M0]=tt[X0]=tt[B0]=tt[j0]=tt[J0]=tt[Q0]=tt[$0]=tt[V0]=tt[A0]=tt[Hp]=tt[N0]=tt[O0]=tt[Y0]=tt[H0]=tt[q0]=tt[eb]=tt[tb]=tt[nb]=!0;tt[G0]=tt[Yp]=tt[K0]=!1;function oa(r,s,n,t,e,i){var a,o=s&F0,l=s&R0,u=s&I0;if(n&&(a=e?n(r,t,e,i):n(r)),a!==void 0)return a;if(!Qn(r))return r;var c=br(r);if(c){if(a=jg(r),!o)return Ev(r,a)}else{var d=vs(r),p=d==Yp||d==W0;if(va(r))return Dg(r,o);if(d==Hp||d==Op||p&&!e){if(a=l||p?{}:C0(r),!o)return l?Xg(r,_g(a,r)):Ig(r,kg(a,r))}else{if(!tt[d])return e?r:{};a=w0(r,d,o)}}i||(i=new fr);var h=i.get(r);if(h)return h;i.set(r,a),x0(r)?r.forEach(function(v){a.add(oa(v,s,n,v,r,i))}):_0(r)&&r.forEach(function(v,b){a.set(b,oa(v,s,n,b,r,i))});var m=u?l?Gg:jo:l?Ml:Pl,f=c?void 0:m(r);return Fv(f||r,function(v,b){f&&(b=v,v=r[b]),Fl(a,b,oa(v,s,n,b,r,i))}),a}var rb=4;function oc(r){return oa(r,rb)}var ib="__lodash_hash_undefined__";function sb(r){return this.__data__.set(r,ib),this}function ab(r){return this.__data__.has(r)}function ga(r){var s=-1,n=r==null?0:r.length;for(this.__data__=new kr;++s<n;)this.add(r[s])}ga.prototype.add=ga.prototype.push=sb;ga.prototype.has=ab;function ob(r,s){for(var n=-1,t=r==null?0:r.length;++n<t;)if(s(r[n],n,r))return!0;return!1}function lb(r,s){return r.has(s)}var ub=1,cb=2;function Kp(r,s,n,t,e,i){var a=n&ub,o=r.length,l=s.length;if(o!=l&&!(a&&l>o))return!1;var u=i.get(r),c=i.get(s);if(u&&c)return u==s&&c==r;var d=-1,p=!0,h=n&cb?new ga:void 0;for(i.set(r,s),i.set(s,r);++d<o;){var m=r[d],f=s[d];if(t)var v=a?t(f,m,d,s,r,i):t(m,f,d,r,s,i);if(v!==void 0){if(v)continue;p=!1;break}if(h){if(!ob(s,function(b,w){if(!lb(h,w)&&(m===b||e(m,b,n,t,i)))return h.push(w)})){p=!1;break}}else if(!(m===f||e(m,f,n,t,i))){p=!1;break}}return i.delete(r),i.delete(s),p}function db(r){var s=-1,n=Array(r.size);return r.forEach(function(t,e){n[++s]=[e,t]}),n}function pb(r){var s=-1,n=Array(r.size);return r.forEach(function(t){n[++s]=t}),n}var hb=1,fb=2,mb="[object Boolean]",vb="[object Date]",yb="[object Error]",gb="[object Map]",bb="[object Number]",Sb="[object RegExp]",wb="[object Set]",Cb="[object String]",Lb="[object Symbol]",Tb="[object ArrayBuffer]",kb="[object DataView]",lc=Jn?Jn.prototype:void 0,go=lc?lc.valueOf:void 0;function _b(r,s,n,t,e,i,a){switch(n){case kb:if(r.byteLength!=s.byteLength||r.byteOffset!=s.byteOffset)return!1;r=r.buffer,s=s.buffer;case Tb:return!(r.byteLength!=s.byteLength||!i(new ya(r),new ya(s)));case mb:case vb:case bb:return xl(+r,+s);case yb:return r.name==s.name&&r.message==s.message;case Sb:case Cb:return r==s+"";case gb:var o=db;case wb:var l=t&hb;if(o||(o=pb),r.size!=s.size&&!l)return!1;var u=a.get(r);if(u)return u==s;t|=fb,a.set(r,s);var c=Kp(o(r),o(s),t,e,i,a);return a.delete(r),c;case Lb:if(go)return go.call(r)==go.call(s)}return!1}var Zb=1,Db=Object.prototype,Eb=Db.hasOwnProperty;function xb(r,s,n,t,e,i){var a=n&Zb,o=jo(r),l=o.length,u=jo(s),c=u.length;if(l!=c&&!a)return!1;for(var d=l;d--;){var p=o[d];if(!(a?p in s:Eb.call(s,p)))return!1}var h=i.get(r),m=i.get(s);if(h&&m)return h==s&&m==r;var f=!0;i.set(r,s),i.set(s,r);for(var v=a;++d<l;){p=o[d];var b=r[p],w=s[p];if(t)var C=a?t(w,b,p,s,r,i):t(b,w,p,r,s,i);if(!(C===void 0?b===w||e(b,w,n,t,i):C)){f=!1;break}v||(v=p=="constructor")}if(f&&!v){var T=r.constructor,L=s.constructor;T!=L&&"constructor"in r&&"constructor"in s&&!(typeof T=="function"&&T instanceof T&&typeof L=="function"&&L instanceof L)&&(f=!1)}return i.delete(r),i.delete(s),f}var Fb=1,uc="[object Arguments]",cc="[object Array]",Hs="[object Object]",Rb=Object.prototype,dc=Rb.hasOwnProperty;function Ib(r,s,n,t,e,i){var a=br(r),o=br(s),l=a?cc:vs(r),u=o?cc:vs(s);l=l==uc?Hs:l,u=u==uc?Hs:u;var c=l==Hs,d=u==Hs,p=l==u;if(p&&va(r)){if(!va(s))return!1;a=!0,c=!1}if(p&&!c)return i||(i=new fr),a||Fp(r)?Kp(r,s,n,t,e,i):_b(r,s,l,n,t,e,i);if(!(n&Fb)){var h=c&&dc.call(r,"__wrapped__"),m=d&&dc.call(s,"__wrapped__");if(h||m){var f=h?r.value():r,v=m?s.value():s;return i||(i=new fr),e(f,v,n,t,i)}}return p?(i||(i=new fr),xb(r,s,n,t,e,i)):!1}function Up(r,s,n,t,e){return r===s?!0:r==null||s==null||!Vr(r)&&!Vr(s)?r!==r&&s!==s:Ib(r,s,n,t,Up,e)}var Pb=function(){return Gn.Date.now()};const bo=Pb;var Mb="Expected a function",Xb=Math.max,Gb=Math.min;function pc(r,s,n){var t,e,i,a,o,l,u=0,c=!1,d=!1,p=!0;if(typeof r!="function")throw new TypeError(Mb);s=Au(s)||0,Qn(n)&&(c=!!n.leading,d="maxWait"in n,i=d?Xb(Au(n.maxWait)||0,s):i,p="trailing"in n?!!n.trailing:p);function h(_){var D=t,x=e;return t=e=void 0,u=_,a=r.apply(x,D),a}function m(_){return u=_,o=setTimeout(b,s),c?h(_):a}function f(_){var D=_-l,x=_-u,P=s-D;return d?Gb(P,i-x):P}function v(_){var D=_-l,x=_-u;return l===void 0||D>=s||D<0||d&&x>=i}function b(){var _=bo();if(v(_))return w(_);o=setTimeout(b,f(_))}function w(_){return o=void 0,p&&t?h(_):(t=e=void 0,a)}function C(){o!==void 0&&clearTimeout(o),u=0,t=l=e=o=void 0}function T(){return o===void 0?a:w(bo())}function L(){var _=bo(),D=v(_);if(t=arguments,e=this,l=_,D){if(o===void 0)return m(l);if(d)return clearTimeout(o),o=setTimeout(b,s),h(l)}return o===void 0&&(o=setTimeout(b,s)),a}return L.cancel=C,L.flush=T,L}function ba(r){for(var s=-1,n=r==null?0:r.length,t={};++s<n;){var e=r[s];t[e[0]]=e[1]}return t}function hc(r,s){return Up(r,s)}function Ua(r){return r==null}function Wb(r){return r===void 0}function Vb(r,s,n,t){if(!Qn(r))return r;s=Pp(s,r);for(var e=-1,i=s.length,a=i-1,o=r;o!=null&&++e<i;){var l=Mp(s[e]),u=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return r;if(e!=a){var c=o[l];u=t?t(c,l,o):void 0,u===void 0&&(u=Qn(c)?c:Tp(s[e+1])?[]:{})}Fl(o,l,u),o=o[l]}return r}function Ab(r,s,n){return r==null?r:Vb(r,s,n)}const Nb=r=>r===void 0,za=r=>typeof r=="boolean",cn=r=>typeof r=="number",ys=r=>typeof Element>"u"?!1:r instanceof Element,Ob=r=>Pn(r)?!Number.isNaN(Number(r)):!1,Yb=(r="")=>r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),So=(r,s,n)=>({get value(){return an(r,s,n)},set value(t){Ab(r,s,t)}});class Hb extends Error{constructor(s){super(s),this.name="ElementPlusError"}}function zp(r,s){throw new Hb(`[${r}] ${s}`)}function gs(r,s="px"){if(!r)return"";if(cn(r)||Ob(r))return`${r}${s}`;if(Pn(r))return r}function Kb(r,s){if(!Ot)return;if(!s){r.scrollTop=0;return}const n=[];let t=s.offsetParent;for(;t!==null&&r!==t&&r.contains(t);)n.push(t),t=t.offsetParent;const e=s.offsetTop+n.reduce((l,u)=>l+u.offsetTop,0),i=e+s.offsetHeight,a=r.scrollTop,o=a+r.clientHeight;e<a?r.scrollTop=e:i>o&&(r.scrollTop=i-r.clientHeight)}/*! Element Plus Icons Vue v2.1.0 */var pi=(r,s)=>{let n=r.__vccOpts||r;for(let[t,e]of s)n[t]=e;return n},Ub={name:"ArrowDown"},zb={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Bb=ye("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1),jb=[Bb];function Jb(r,s,n,t,e,i){return $(),me("svg",zb,jb)}var Qb=pi(Ub,[["render",Jb],["__file","arrow-down.vue"]]),$b={name:"CircleCheck"},qb={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},e1=ye("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),t1=ye("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"},null,-1),n1=[e1,t1];function r1(r,s,n,t,e,i){return $(),me("svg",qb,n1)}var i1=pi($b,[["render",r1],["__file","circle-check.vue"]]),s1={name:"CircleClose"},a1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},o1=ye("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248L466.752 512z"},null,-1),l1=ye("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),u1=[o1,l1];function c1(r,s,n,t,e,i){return $(),me("svg",a1,u1)}var Vl=pi(s1,[["render",c1],["__file","circle-close.vue"]]),d1={name:"Close"},p1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},h1=ye("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),f1=[h1];function m1(r,s,n,t,e,i){return $(),me("svg",p1,f1)}var fc=pi(d1,[["render",m1],["__file","close.vue"]]),v1={name:"Hide"},y1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},g1=ye("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2L371.2 588.8ZM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"},null,-1),b1=ye("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"},null,-1),S1=[g1,b1];function w1(r,s,n,t,e,i){return $(),me("svg",y1,S1)}var C1=pi(v1,[["render",w1],["__file","hide.vue"]]),L1={name:"Loading"},T1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},k1=ye("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),_1=[k1];function Z1(r,s,n,t,e,i){return $(),me("svg",T1,_1)}var D1=pi(L1,[["render",Z1],["__file","loading.vue"]]),E1={name:"View"},x1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},F1=ye("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448zm0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"},null,-1),R1=[F1];function I1(r,s,n,t,e,i){return $(),me("svg",x1,R1)}var P1=pi(E1,[["render",I1],["__file","view.vue"]]);const Bp="__epPropKey",Ie=r=>r,M1=r=>gr(r)&&!!r[Bp],Ba=(r,s)=>{if(!gr(r)||M1(r))return r;const{values:n,required:t,default:e,type:i,validator:a}=r,l={type:i,required:!!t,validator:n||a?u=>{let c=!1,d=[];if(n&&(d=Array.from(n),Zu(r,"default")&&d.push(e),c||(c=d.includes(u))),a&&(c||(c=a(u))),!c&&d.length>0){const p=[...new Set(d)].map(h=>JSON.stringify(h)).join(", ");sm(`Invalid prop: validation failed${s?` for prop "${s}"`:""}. Expected one of [${p}], got value ${JSON.stringify(u)}.`)}return c}:void 0,[Bp]:!0};return Zu(r,"default")&&(l.default=e),l},ft=r=>ba(Object.entries(r).map(([s,n])=>[s,Ba(n,s)])),Sa=Ie([String,Object,Function]),X1={validating:D1,success:i1,error:Vl},Wn=(r,s)=>{if(r.install=n=>{for(const t of[r,...Object.values(s??{})])n.component(t.name,t)},s)for(const[n,t]of Object.entries(s))r[n]=t;return r},Al=r=>(r.install=ps,r),Mi={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},Fn="update:modelValue",jp="change",Rs=["","default","small","large"],G1={large:40,default:32,small:24},W1=r=>G1[r||"default"],V1=r=>["",...Rs].includes(r),Jp=r=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(r),_i=r=>r,A1=["class","style"],N1=/^on[A-Z]/,O1=(r={})=>{const{excludeListeners:s=!1,excludeKeys:n}=r,t=W(()=>((n==null?void 0:n.value)||[]).concat(A1)),e=Lr();return e?W(()=>{var i;return ba(Object.entries((i=e.proxy)==null?void 0:i.$attrs).filter(([a])=>!t.value.includes(a)&&!(s&&N1.test(a))))}):W(()=>({}))},Y1=({from:r,replacement:s,scope:n,version:t,ref:e,type:i="API"},a)=>{ve(()=>F(a),o=>{},{immediate:!0})},H1=r=>({focus:()=>{var s,n;(n=(s=r.value)==null?void 0:s.focus)==null||n.call(s)}});var K1={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const U1=r=>(s,n)=>z1(s,n,F(r)),z1=(r,s,n)=>an(n,r,r).replace(/\{(\w+)\}/g,(t,e)=>{var i;return`${(i=s==null?void 0:s[e])!=null?i:`{${e}}`}`}),B1=r=>{const s=W(()=>F(r).name),n=am(r)?r:ee(r);return{lang:s,locale:n,t:U1(r)}},j1=Symbol("localeContextKey"),Nl=r=>{const s=r||Je(j1,ee());return B1(W(()=>s.value||K1))},mc="el",J1="is-",Hr=(r,s,n,t,e)=>{let i=`${r}-${s}`;return n&&(i+=`-${n}`),t&&(i+=`__${t}`),e&&(i+=`--${e}`),i},Q1=Symbol("namespaceContextKey"),Ol=r=>{const s=r||Je(Q1,ee(mc));return W(()=>F(s)||mc)},ct=(r,s)=>{const n=Ol(s);return{namespace:n,b:(f="")=>Hr(n.value,r,f,"",""),e:f=>f?Hr(n.value,r,"",f,""):"",m:f=>f?Hr(n.value,r,"","",f):"",be:(f,v)=>f&&v?Hr(n.value,r,f,v,""):"",em:(f,v)=>f&&v?Hr(n.value,r,"",f,v):"",bm:(f,v)=>f&&v?Hr(n.value,r,f,"",v):"",bem:(f,v,b)=>f&&v&&b?Hr(n.value,r,f,v,b):"",is:(f,...v)=>{const b=v.length>=1?v[0]:!0;return f&&b?`${J1}${f}`:""},cssVar:f=>{const v={};for(const b in f)f[b]&&(v[`--${n.value}-${b}`]=f[b]);return v},cssVarName:f=>`--${n.value}-${f}`,cssVarBlock:f=>{const v={};for(const b in f)f[b]&&(v[`--${n.value}-${r}-${b}`]=f[b]);return v},cssVarBlockName:f=>`--${n.value}-${r}-${f}`}},$1=Ba({type:Ie(Boolean),default:null}),q1=Ba({type:Ie(Function)}),Qp=r=>{const s=`update:${r}`,n=`onUpdate:${r}`,t=[s],e={[r]:$1,[n]:q1};return{useModelToggle:({indicator:a,toggleReason:o,shouldHideWhenRouteChanges:l,shouldProceed:u,onShow:c,onHide:d})=>{const p=Lr(),{emit:h}=p,m=p.props,f=W(()=>ln(m[n])),v=W(()=>m[r]===null),b=D=>{a.value!==!0&&(a.value=!0,o&&(o.value=D),ln(c)&&c(D))},w=D=>{a.value!==!1&&(a.value=!1,o&&(o.value=D),ln(d)&&d(D))},C=D=>{if(m.disabled===!0||ln(u)&&!u())return;const x=f.value&&Ot;x&&h(s,!0),(v.value||!x)&&b(D)},T=D=>{if(m.disabled===!0||!Ot)return;const x=f.value&&Ot;x&&h(s,!1),(v.value||!x)&&w(D)},L=D=>{za(D)&&(m.disabled&&D?f.value&&h(s,!1):a.value!==D&&(D?b():w()))},_=()=>{a.value?T():C()};return ve(()=>m[r],L),l&&p.appContext.config.globalProperties.$route!==void 0&&ve(()=>({...p.proxy.$route}),()=>{l.value&&a.value&&T()}),Tt(()=>{L(m[r])}),{hide:T,show:C,toggle:_,hasUpdateHandler:f}},useModelToggleProps:e,useModelToggleEmits:t}};Qp("modelValue");const $p=r=>{const s=Lr();return W(()=>{var n,t;return(t=(n=s==null?void 0:s.proxy)==null?void 0:n.$props)==null?void 0:t[r]})};var Jt="top",bn="bottom",Sn="right",Qt="left",Yl="auto",Is=[Jt,bn,Sn,Qt],Xi="start",bs="end",eS="clippingParents",qp="viewport",qi="popper",tS="reference",vc=Is.reduce(function(r,s){return r.concat([s+"-"+Xi,s+"-"+bs])},[]),ja=[].concat(Is,[Yl]).reduce(function(r,s){return r.concat([s,s+"-"+Xi,s+"-"+bs])},[]),nS="beforeRead",rS="read",iS="afterRead",sS="beforeMain",aS="main",oS="afterMain",lS="beforeWrite",uS="write",cS="afterWrite",dS=[nS,rS,iS,sS,aS,oS,lS,uS,cS];function $n(r){return r?(r.nodeName||"").toLowerCase():null}function Vn(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var s=r.ownerDocument;return s&&s.defaultView||window}return r}function Gi(r){var s=Vn(r).Element;return r instanceof s||r instanceof Element}function yn(r){var s=Vn(r).HTMLElement;return r instanceof s||r instanceof HTMLElement}function Hl(r){if(typeof ShadowRoot>"u")return!1;var s=Vn(r).ShadowRoot;return r instanceof s||r instanceof ShadowRoot}function pS(r){var s=r.state;Object.keys(s.elements).forEach(function(n){var t=s.styles[n]||{},e=s.attributes[n]||{},i=s.elements[n];!yn(i)||!$n(i)||(Object.assign(i.style,t),Object.keys(e).forEach(function(a){var o=e[a];o===!1?i.removeAttribute(a):i.setAttribute(a,o===!0?"":o)}))})}function hS(r){var s=r.state,n={popper:{position:s.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(s.elements.popper.style,n.popper),s.styles=n,s.elements.arrow&&Object.assign(s.elements.arrow.style,n.arrow),function(){Object.keys(s.elements).forEach(function(t){var e=s.elements[t],i=s.attributes[t]||{},a=Object.keys(s.styles.hasOwnProperty(t)?s.styles[t]:n[t]),o=a.reduce(function(l,u){return l[u]="",l},{});!yn(e)||!$n(e)||(Object.assign(e.style,o),Object.keys(i).forEach(function(l){e.removeAttribute(l)}))})}}var eh={name:"applyStyles",enabled:!0,phase:"write",fn:pS,effect:hS,requires:["computeStyles"]};function Bn(r){return r.split("-")[0]}var ei=Math.max,wa=Math.min,Wi=Math.round;function Vi(r,s){s===void 0&&(s=!1);var n=r.getBoundingClientRect(),t=1,e=1;if(yn(r)&&s){var i=r.offsetHeight,a=r.offsetWidth;a>0&&(t=Wi(n.width)/a||1),i>0&&(e=Wi(n.height)/i||1)}return{width:n.width/t,height:n.height/e,top:n.top/e,right:n.right/t,bottom:n.bottom/e,left:n.left/t,x:n.left/t,y:n.top/e}}function Kl(r){var s=Vi(r),n=r.offsetWidth,t=r.offsetHeight;return Math.abs(s.width-n)<=1&&(n=s.width),Math.abs(s.height-t)<=1&&(t=s.height),{x:r.offsetLeft,y:r.offsetTop,width:n,height:t}}function th(r,s){var n=s.getRootNode&&s.getRootNode();if(r.contains(s))return!0;if(n&&Hl(n)){var t=s;do{if(t&&r.isSameNode(t))return!0;t=t.parentNode||t.host}while(t)}return!1}function Sr(r){return Vn(r).getComputedStyle(r)}function fS(r){return["table","td","th"].indexOf($n(r))>=0}function Ar(r){return((Gi(r)?r.ownerDocument:r.document)||window.document).documentElement}function Ja(r){return $n(r)==="html"?r:r.assignedSlot||r.parentNode||(Hl(r)?r.host:null)||Ar(r)}function yc(r){return!yn(r)||Sr(r).position==="fixed"?null:r.offsetParent}function mS(r){var s=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&yn(r)){var t=Sr(r);if(t.position==="fixed")return null}var e=Ja(r);for(Hl(e)&&(e=e.host);yn(e)&&["html","body"].indexOf($n(e))<0;){var i=Sr(e);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||s&&i.willChange==="filter"||s&&i.filter&&i.filter!=="none")return e;e=e.parentNode}return null}function Ps(r){for(var s=Vn(r),n=yc(r);n&&fS(n)&&Sr(n).position==="static";)n=yc(n);return n&&($n(n)==="html"||$n(n)==="body"&&Sr(n).position==="static")?s:n||mS(r)||s}function Ul(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function ls(r,s,n){return ei(r,wa(s,n))}function vS(r,s,n){var t=ls(r,s,n);return t>n?n:t}function nh(){return{top:0,right:0,bottom:0,left:0}}function rh(r){return Object.assign({},nh(),r)}function ih(r,s){return s.reduce(function(n,t){return n[t]=r,n},{})}var yS=function(r,s){return r=typeof r=="function"?r(Object.assign({},s.rects,{placement:s.placement})):r,rh(typeof r!="number"?r:ih(r,Is))};function gS(r){var s,n=r.state,t=r.name,e=r.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,o=Bn(n.placement),l=Ul(o),u=[Qt,Sn].indexOf(o)>=0,c=u?"height":"width";if(!(!i||!a)){var d=yS(e.padding,n),p=Kl(i),h=l==="y"?Jt:Qt,m=l==="y"?bn:Sn,f=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],v=a[l]-n.rects.reference[l],b=Ps(i),w=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,C=f/2-v/2,T=d[h],L=w-p[c]-d[m],_=w/2-p[c]/2+C,D=ls(T,_,L),x=l;n.modifiersData[t]=(s={},s[x]=D,s.centerOffset=D-_,s)}}function bS(r){var s=r.state,n=r.options,t=n.element,e=t===void 0?"[data-popper-arrow]":t;e!=null&&(typeof e=="string"&&(e=s.elements.popper.querySelector(e),!e)||!th(s.elements.popper,e)||(s.elements.arrow=e))}var SS={name:"arrow",enabled:!0,phase:"main",fn:gS,effect:bS,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ai(r){return r.split("-")[1]}var wS={top:"auto",right:"auto",bottom:"auto",left:"auto"};function CS(r){var s=r.x,n=r.y,t=window,e=t.devicePixelRatio||1;return{x:Wi(s*e)/e||0,y:Wi(n*e)/e||0}}function gc(r){var s,n=r.popper,t=r.popperRect,e=r.placement,i=r.variation,a=r.offsets,o=r.position,l=r.gpuAcceleration,u=r.adaptive,c=r.roundOffsets,d=r.isFixed,p=a.x,h=p===void 0?0:p,m=a.y,f=m===void 0?0:m,v=typeof c=="function"?c({x:h,y:f}):{x:h,y:f};h=v.x,f=v.y;var b=a.hasOwnProperty("x"),w=a.hasOwnProperty("y"),C=Qt,T=Jt,L=window;if(u){var _=Ps(n),D="clientHeight",x="clientWidth";if(_===Vn(n)&&(_=Ar(n),Sr(_).position!=="static"&&o==="absolute"&&(D="scrollHeight",x="scrollWidth")),_=_,e===Jt||(e===Qt||e===Sn)&&i===bs){T=bn;var P=d&&_===L&&L.visualViewport?L.visualViewport.height:_[D];f-=P-t.height,f*=l?1:-1}if(e===Qt||(e===Jt||e===bn)&&i===bs){C=Sn;var I=d&&_===L&&L.visualViewport?L.visualViewport.width:_[x];h-=I-t.width,h*=l?1:-1}}var V=Object.assign({position:o},u&&wS),g=c===!0?CS({x:h,y:f}):{x:h,y:f};if(h=g.x,f=g.y,l){var y;return Object.assign({},V,(y={},y[T]=w?"0":"",y[C]=b?"0":"",y.transform=(L.devicePixelRatio||1)<=1?"translate("+h+"px, "+f+"px)":"translate3d("+h+"px, "+f+"px, 0)",y))}return Object.assign({},V,(s={},s[T]=w?f+"px":"",s[C]=b?h+"px":"",s.transform="",s))}function LS(r){var s=r.state,n=r.options,t=n.gpuAcceleration,e=t===void 0?!0:t,i=n.adaptive,a=i===void 0?!0:i,o=n.roundOffsets,l=o===void 0?!0:o,u={placement:Bn(s.placement),variation:Ai(s.placement),popper:s.elements.popper,popperRect:s.rects.popper,gpuAcceleration:e,isFixed:s.options.strategy==="fixed"};s.modifiersData.popperOffsets!=null&&(s.styles.popper=Object.assign({},s.styles.popper,gc(Object.assign({},u,{offsets:s.modifiersData.popperOffsets,position:s.options.strategy,adaptive:a,roundOffsets:l})))),s.modifiersData.arrow!=null&&(s.styles.arrow=Object.assign({},s.styles.arrow,gc(Object.assign({},u,{offsets:s.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),s.attributes.popper=Object.assign({},s.attributes.popper,{"data-popper-placement":s.placement})}var sh={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:LS,data:{}},Ks={passive:!0};function TS(r){var s=r.state,n=r.instance,t=r.options,e=t.scroll,i=e===void 0?!0:e,a=t.resize,o=a===void 0?!0:a,l=Vn(s.elements.popper),u=[].concat(s.scrollParents.reference,s.scrollParents.popper);return i&&u.forEach(function(c){c.addEventListener("scroll",n.update,Ks)}),o&&l.addEventListener("resize",n.update,Ks),function(){i&&u.forEach(function(c){c.removeEventListener("scroll",n.update,Ks)}),o&&l.removeEventListener("resize",n.update,Ks)}}var ah={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:TS,data:{}},kS={left:"right",right:"left",bottom:"top",top:"bottom"};function la(r){return r.replace(/left|right|bottom|top/g,function(s){return kS[s]})}var _S={start:"end",end:"start"};function bc(r){return r.replace(/start|end/g,function(s){return _S[s]})}function zl(r){var s=Vn(r),n=s.pageXOffset,t=s.pageYOffset;return{scrollLeft:n,scrollTop:t}}function Bl(r){return Vi(Ar(r)).left+zl(r).scrollLeft}function ZS(r){var s=Vn(r),n=Ar(r),t=s.visualViewport,e=n.clientWidth,i=n.clientHeight,a=0,o=0;return t&&(e=t.width,i=t.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=t.offsetLeft,o=t.offsetTop)),{width:e,height:i,x:a+Bl(r),y:o}}function DS(r){var s,n=Ar(r),t=zl(r),e=(s=r.ownerDocument)==null?void 0:s.body,i=ei(n.scrollWidth,n.clientWidth,e?e.scrollWidth:0,e?e.clientWidth:0),a=ei(n.scrollHeight,n.clientHeight,e?e.scrollHeight:0,e?e.clientHeight:0),o=-t.scrollLeft+Bl(r),l=-t.scrollTop;return Sr(e||n).direction==="rtl"&&(o+=ei(n.clientWidth,e?e.clientWidth:0)-i),{width:i,height:a,x:o,y:l}}function jl(r){var s=Sr(r),n=s.overflow,t=s.overflowX,e=s.overflowY;return/auto|scroll|overlay|hidden/.test(n+e+t)}function oh(r){return["html","body","#document"].indexOf($n(r))>=0?r.ownerDocument.body:yn(r)&&jl(r)?r:oh(Ja(r))}function us(r,s){var n;s===void 0&&(s=[]);var t=oh(r),e=t===((n=r.ownerDocument)==null?void 0:n.body),i=Vn(t),a=e?[i].concat(i.visualViewport||[],jl(t)?t:[]):t,o=s.concat(a);return e?o:o.concat(us(Ja(a)))}function qo(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function ES(r){var s=Vi(r);return s.top=s.top+r.clientTop,s.left=s.left+r.clientLeft,s.bottom=s.top+r.clientHeight,s.right=s.left+r.clientWidth,s.width=r.clientWidth,s.height=r.clientHeight,s.x=s.left,s.y=s.top,s}function Sc(r,s){return s===qp?qo(ZS(r)):Gi(s)?ES(s):qo(DS(Ar(r)))}function xS(r){var s=us(Ja(r)),n=["absolute","fixed"].indexOf(Sr(r).position)>=0,t=n&&yn(r)?Ps(r):r;return Gi(t)?s.filter(function(e){return Gi(e)&&th(e,t)&&$n(e)!=="body"}):[]}function FS(r,s,n){var t=s==="clippingParents"?xS(r):[].concat(s),e=[].concat(t,[n]),i=e[0],a=e.reduce(function(o,l){var u=Sc(r,l);return o.top=ei(u.top,o.top),o.right=wa(u.right,o.right),o.bottom=wa(u.bottom,o.bottom),o.left=ei(u.left,o.left),o},Sc(r,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function lh(r){var s=r.reference,n=r.element,t=r.placement,e=t?Bn(t):null,i=t?Ai(t):null,a=s.x+s.width/2-n.width/2,o=s.y+s.height/2-n.height/2,l;switch(e){case Jt:l={x:a,y:s.y-n.height};break;case bn:l={x:a,y:s.y+s.height};break;case Sn:l={x:s.x+s.width,y:o};break;case Qt:l={x:s.x-n.width,y:o};break;default:l={x:s.x,y:s.y}}var u=e?Ul(e):null;if(u!=null){var c=u==="y"?"height":"width";switch(i){case Xi:l[u]=l[u]-(s[c]/2-n[c]/2);break;case bs:l[u]=l[u]+(s[c]/2-n[c]/2);break}}return l}function Ss(r,s){s===void 0&&(s={});var n=s,t=n.placement,e=t===void 0?r.placement:t,i=n.boundary,a=i===void 0?eS:i,o=n.rootBoundary,l=o===void 0?qp:o,u=n.elementContext,c=u===void 0?qi:u,d=n.altBoundary,p=d===void 0?!1:d,h=n.padding,m=h===void 0?0:h,f=rh(typeof m!="number"?m:ih(m,Is)),v=c===qi?tS:qi,b=r.rects.popper,w=r.elements[p?v:c],C=FS(Gi(w)?w:w.contextElement||Ar(r.elements.popper),a,l),T=Vi(r.elements.reference),L=lh({reference:T,element:b,strategy:"absolute",placement:e}),_=qo(Object.assign({},b,L)),D=c===qi?_:T,x={top:C.top-D.top+f.top,bottom:D.bottom-C.bottom+f.bottom,left:C.left-D.left+f.left,right:D.right-C.right+f.right},P=r.modifiersData.offset;if(c===qi&&P){var I=P[e];Object.keys(x).forEach(function(V){var g=[Sn,bn].indexOf(V)>=0?1:-1,y=[Jt,bn].indexOf(V)>=0?"y":"x";x[V]+=I[y]*g})}return x}function RS(r,s){s===void 0&&(s={});var n=s,t=n.placement,e=n.boundary,i=n.rootBoundary,a=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?ja:l,c=Ai(t),d=c?o?vc:vc.filter(function(m){return Ai(m)===c}):Is,p=d.filter(function(m){return u.indexOf(m)>=0});p.length===0&&(p=d);var h=p.reduce(function(m,f){return m[f]=Ss(r,{placement:f,boundary:e,rootBoundary:i,padding:a})[Bn(f)],m},{});return Object.keys(h).sort(function(m,f){return h[m]-h[f]})}function IS(r){if(Bn(r)===Yl)return[];var s=la(r);return[bc(r),s,bc(s)]}function PS(r){var s=r.state,n=r.options,t=r.name;if(!s.modifiersData[t]._skip){for(var e=n.mainAxis,i=e===void 0?!0:e,a=n.altAxis,o=a===void 0?!0:a,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,m=h===void 0?!0:h,f=n.allowedAutoPlacements,v=s.options.placement,b=Bn(v),w=b===v,C=l||(w||!m?[la(v)]:IS(v)),T=[v].concat(C).reduce(function(qe,Xe){return qe.concat(Bn(Xe)===Yl?RS(s,{placement:Xe,boundary:c,rootBoundary:d,padding:u,flipVariations:m,allowedAutoPlacements:f}):Xe)},[]),L=s.rects.reference,_=s.rects.popper,D=new Map,x=!0,P=T[0],I=0;I<T.length;I++){var V=T[I],g=Bn(V),y=Ai(V)===Xi,S=[Jt,bn].indexOf(g)>=0,E=S?"width":"height",Z=Ss(s,{placement:V,boundary:c,rootBoundary:d,altBoundary:p,padding:u}),R=S?y?Sn:Qt:y?bn:Jt;L[E]>_[E]&&(R=la(R));var M=la(R),O=[];if(i&&O.push(Z[g]<=0),o&&O.push(Z[R]<=0,Z[M]<=0),O.every(function(qe){return qe})){P=V,x=!1;break}D.set(V,O)}if(x)for(var z=m?3:1,N=function(qe){var Xe=T.find(function(ze){var te=D.get(ze);if(te)return te.slice(0,qe).every(function(oe){return oe})});if(Xe)return P=Xe,"break"},ne=z;ne>0;ne--){var B=N(ne);if(B==="break")break}s.placement!==P&&(s.modifiersData[t]._skip=!0,s.placement=P,s.reset=!0)}}var MS={name:"flip",enabled:!0,phase:"main",fn:PS,requiresIfExists:["offset"],data:{_skip:!1}};function wc(r,s,n){return n===void 0&&(n={x:0,y:0}),{top:r.top-s.height-n.y,right:r.right-s.width+n.x,bottom:r.bottom-s.height+n.y,left:r.left-s.width-n.x}}function Cc(r){return[Jt,Sn,bn,Qt].some(function(s){return r[s]>=0})}function XS(r){var s=r.state,n=r.name,t=s.rects.reference,e=s.rects.popper,i=s.modifiersData.preventOverflow,a=Ss(s,{elementContext:"reference"}),o=Ss(s,{altBoundary:!0}),l=wc(a,t),u=wc(o,e,i),c=Cc(l),d=Cc(u);s.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},s.attributes.popper=Object.assign({},s.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}var GS={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:XS};function WS(r,s,n){var t=Bn(r),e=[Qt,Jt].indexOf(t)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},s,{placement:r})):n,a=i[0],o=i[1];return a=a||0,o=(o||0)*e,[Qt,Sn].indexOf(t)>=0?{x:o,y:a}:{x:a,y:o}}function VS(r){var s=r.state,n=r.options,t=r.name,e=n.offset,i=e===void 0?[0,0]:e,a=ja.reduce(function(c,d){return c[d]=WS(d,s.rects,i),c},{}),o=a[s.placement],l=o.x,u=o.y;s.modifiersData.popperOffsets!=null&&(s.modifiersData.popperOffsets.x+=l,s.modifiersData.popperOffsets.y+=u),s.modifiersData[t]=a}var AS={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:VS};function NS(r){var s=r.state,n=r.name;s.modifiersData[n]=lh({reference:s.rects.reference,element:s.rects.popper,strategy:"absolute",placement:s.placement})}var uh={name:"popperOffsets",enabled:!0,phase:"read",fn:NS,data:{}};function OS(r){return r==="x"?"y":"x"}function YS(r){var s=r.state,n=r.options,t=r.name,e=n.mainAxis,i=e===void 0?!0:e,a=n.altAxis,o=a===void 0?!1:a,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,p=n.tether,h=p===void 0?!0:p,m=n.tetherOffset,f=m===void 0?0:m,v=Ss(s,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),b=Bn(s.placement),w=Ai(s.placement),C=!w,T=Ul(b),L=OS(T),_=s.modifiersData.popperOffsets,D=s.rects.reference,x=s.rects.popper,P=typeof f=="function"?f(Object.assign({},s.rects,{placement:s.placement})):f,I=typeof P=="number"?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),V=s.modifiersData.offset?s.modifiersData.offset[s.placement]:null,g={x:0,y:0};if(_){if(i){var y,S=T==="y"?Jt:Qt,E=T==="y"?bn:Sn,Z=T==="y"?"height":"width",R=_[T],M=R+v[S],O=R-v[E],z=h?-x[Z]/2:0,N=w===Xi?D[Z]:x[Z],ne=w===Xi?-x[Z]:-D[Z],B=s.elements.arrow,qe=h&&B?Kl(B):{width:0,height:0},Xe=s.modifiersData["arrow#persistent"]?s.modifiersData["arrow#persistent"].padding:nh(),ze=Xe[S],te=Xe[E],oe=ls(0,D[Z],qe[Z]),le=C?D[Z]/2-z-oe-ze-I.mainAxis:N-oe-ze-I.mainAxis,Ce=C?-D[Z]/2+z+oe+te+I.mainAxis:ne+oe+te+I.mainAxis,Me=s.elements.arrow&&Ps(s.elements.arrow),pt=Me?T==="y"?Me.clientTop||0:Me.clientLeft||0:0,Rt=(y=V==null?void 0:V[T])!=null?y:0,hn=R+le-Rt-pt,Ln=R+Ce-Rt,Lt=ls(h?wa(M,hn):M,R,h?ei(O,Ln):O);_[T]=Lt,g[T]=Lt-R}if(o){var fn,kt=T==="x"?Jt:Qt,It=T==="x"?bn:Sn,Pt=_[L],An=L==="y"?"height":"width",er=Pt+v[kt],_r=Pt-v[It],Nn=[Jt,Qt].indexOf(b)!==-1,J=(fn=V==null?void 0:V[L])!=null?fn:0,we=Nn?er:Pt-D[An]-x[An]-J+I.altAxis,et=Nn?Pt+D[An]+x[An]-J-I.altAxis:_r,en=h&&Nn?vS(we,Pt,et):ls(h?we:er,Pt,h?et:_r);_[L]=en,g[L]=en-Pt}s.modifiersData[t]=g}}var HS={name:"preventOverflow",enabled:!0,phase:"main",fn:YS,requiresIfExists:["offset"]};function KS(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function US(r){return r===Vn(r)||!yn(r)?zl(r):KS(r)}function zS(r){var s=r.getBoundingClientRect(),n=Wi(s.width)/r.offsetWidth||1,t=Wi(s.height)/r.offsetHeight||1;return n!==1||t!==1}function BS(r,s,n){n===void 0&&(n=!1);var t=yn(s),e=yn(s)&&zS(s),i=Ar(s),a=Vi(r,e),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(t||!t&&!n)&&(($n(s)!=="body"||jl(i))&&(o=US(s)),yn(s)?(l=Vi(s,!0),l.x+=s.clientLeft,l.y+=s.clientTop):i&&(l.x=Bl(i))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function jS(r){var s=new Map,n=new Set,t=[];r.forEach(function(i){s.set(i.name,i)});function e(i){n.add(i.name);var a=[].concat(i.requires||[],i.requiresIfExists||[]);a.forEach(function(o){if(!n.has(o)){var l=s.get(o);l&&e(l)}}),t.push(i)}return r.forEach(function(i){n.has(i.name)||e(i)}),t}function JS(r){var s=jS(r);return dS.reduce(function(n,t){return n.concat(s.filter(function(e){return e.phase===t}))},[])}function QS(r){var s;return function(){return s||(s=new Promise(function(n){Promise.resolve().then(function(){s=void 0,n(r())})})),s}}function $S(r){var s=r.reduce(function(n,t){var e=n[t.name];return n[t.name]=e?Object.assign({},e,t,{options:Object.assign({},e.options,t.options),data:Object.assign({},e.data,t.data)}):t,n},{});return Object.keys(s).map(function(n){return s[n]})}var Lc={placement:"bottom",modifiers:[],strategy:"absolute"};function Tc(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return!s.some(function(t){return!(t&&typeof t.getBoundingClientRect=="function")})}function Jl(r){r===void 0&&(r={});var s=r,n=s.defaultModifiers,t=n===void 0?[]:n,e=s.defaultOptions,i=e===void 0?Lc:e;return function(a,o,l){l===void 0&&(l=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Lc,i),modifiersData:{},elements:{reference:a,popper:o},attributes:{},styles:{}},c=[],d=!1,p={state:u,setOptions:function(f){var v=typeof f=="function"?f(u.options):f;m(),u.options=Object.assign({},i,u.options,v),u.scrollParents={reference:Gi(a)?us(a):a.contextElement?us(a.contextElement):[],popper:us(o)};var b=JS($S([].concat(t,u.options.modifiers)));return u.orderedModifiers=b.filter(function(w){return w.enabled}),h(),p.update()},forceUpdate:function(){if(!d){var f=u.elements,v=f.reference,b=f.popper;if(Tc(v,b)){u.rects={reference:BS(v,Ps(b),u.options.strategy==="fixed"),popper:Kl(b)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(x){return u.modifiersData[x.name]=Object.assign({},x.data)});for(var w=0;w<u.orderedModifiers.length;w++){if(u.reset===!0){u.reset=!1,w=-1;continue}var C=u.orderedModifiers[w],T=C.fn,L=C.options,_=L===void 0?{}:L,D=C.name;typeof T=="function"&&(u=T({state:u,options:_,name:D,instance:p})||u)}}}},update:QS(function(){return new Promise(function(f){p.forceUpdate(),f(u)})}),destroy:function(){m(),d=!0}};if(!Tc(a,o))return p;p.setOptions(l).then(function(f){!d&&l.onFirstUpdate&&l.onFirstUpdate(f)});function h(){u.orderedModifiers.forEach(function(f){var v=f.name,b=f.options,w=b===void 0?{}:b,C=f.effect;if(typeof C=="function"){var T=C({state:u,name:v,instance:p,options:w}),L=function(){};c.push(T||L)}})}function m(){c.forEach(function(f){return f()}),c=[]}return p}}Jl();var qS=[ah,uh,sh,eh];Jl({defaultModifiers:qS});var e2=[ah,uh,sh,eh,AS,MS,HS,SS,GS],t2=Jl({defaultModifiers:e2});const n2=(r,s,n={})=>{const t={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const u=r2(l);Object.assign(a.value,u)},requires:["computeStyles"]},e=W(()=>{const{onFirstUpdate:l,placement:u,strategy:c,modifiers:d}=F(n);return{onFirstUpdate:l,placement:u||"bottom",strategy:c||"absolute",modifiers:[...d||[],t,{name:"applyStyles",enabled:!1}]}}),i=Qr(),a=ee({styles:{popper:{position:F(e).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),o=()=>{i.value&&(i.value.destroy(),i.value=void 0)};return ve(e,l=>{const u=F(i);u&&u.setOptions(l)},{deep:!0}),ve([r,s],([l,u])=>{o(),!(!l||!u)&&(i.value=t2(l,u,F(e)))}),Cn(()=>{o()}),{state:W(()=>{var l;return{...((l=F(i))==null?void 0:l.state)||{}}}),styles:W(()=>F(a).styles),attributes:W(()=>F(a).attributes),update:()=>{var l;return(l=F(i))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=F(i))==null?void 0:l.forceUpdate()},instanceRef:W(()=>F(i))}};function r2(r){const s=Object.keys(r.elements),n=ba(s.map(e=>[e,r.styles[e]||{}])),t=ba(s.map(e=>[e,r.attributes[e]]));return{styles:n,attributes:t}}function kc(){let r;const s=(t,e)=>{n(),r=window.setTimeout(t,e)},n=()=>window.clearTimeout(r);return Dl(()=>n()),{registerTimeout:s,cancelTimeout:n}}const _c={prefix:Math.floor(Math.random()*1e4),current:0},i2=Symbol("elIdInjection"),ch=()=>Lr()?Je(i2,_c):_c,Ql=r=>{const s=ch(),n=Ol();return W(()=>F(r)||`${n.value}-id-${s.prefix}-${s.current++}`)};let Zi=[];const Zc=r=>{const s=r;s.key===Mi.esc&&Zi.forEach(n=>n(s))},s2=r=>{Tt(()=>{Zi.length===0&&document.addEventListener("keydown",Zc),Ot&&Zi.push(r)}),Cn(()=>{Zi=Zi.filter(s=>s!==r),Zi.length===0&&Ot&&document.removeEventListener("keydown",Zc)})};let Dc;const dh=()=>{const r=Ol(),s=ch(),n=W(()=>`${r.value}-popper-container-${s.prefix}`),t=W(()=>`#${n.value}`);return{id:n,selector:t}},a2=r=>{const s=document.createElement("div");return s.id=r,document.body.appendChild(s),s},o2=()=>{const{id:r,selector:s}=dh();return om(()=>{Ot&&!Dc&&!document.body.querySelector(s.value)&&(Dc=a2(r.value))}),{id:r,selector:s}},l2=ft({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),u2=({showAfter:r,hideAfter:s,autoClose:n,open:t,close:e})=>{const{registerTimeout:i}=kc(),{registerTimeout:a,cancelTimeout:o}=kc();return{onOpen:c=>{i(()=>{t(c);const d=F(n);cn(d)&&d>0&&a(()=>{e(c)},d)},F(r))},onClose:c=>{o(),i(()=>{e(c)},F(s))}}},ph=Symbol("elForwardRef"),c2=r=>{gn(ph,{setForwardRef:n=>{r.value=n}})},d2=r=>({mounted(s){r(s)},updated(s){r(s)},unmounted(){r(null)}}),Ec=ee(0),p2=2e3,h2=Symbol("zIndexContextKey"),f2=r=>{const s=r||Je(h2,void 0),n=W(()=>{const i=F(s);return cn(i)?i:p2}),t=W(()=>n.value+Ec.value);return{initialZIndex:n,currentZIndex:t,nextZIndex:()=>(Ec.value++,t.value)}};function m2(r){const s=ee();function n(){if(r.value==null)return;const{selectionStart:e,selectionEnd:i,value:a}=r.value;if(e==null||i==null)return;const o=a.slice(0,Math.max(0,e)),l=a.slice(Math.max(0,i));s.value={selectionStart:e,selectionEnd:i,value:a,beforeTxt:o,afterTxt:l}}function t(){if(r.value==null||s.value==null)return;const{value:e}=r.value,{beforeTxt:i,afterTxt:a,selectionStart:o}=s.value;if(i==null||a==null||o==null)return;let l=e.length;if(e.endsWith(a))l=e.length-a.length;else if(e.startsWith(i))l=i.length;else{const u=i[o-1],c=e.indexOf(u,o-1);c!==-1&&(l=c+1)}r.value.setSelectionRange(l,l)}return[n,t]}const v2=Ba({type:String,values:Rs,required:!1}),y2=Symbol("size"),g2=()=>{const r=Je(y2,{});return W(()=>F(r.size)||"")};function b2(r,{afterFocus:s,afterBlur:n}={}){const t=Lr(),{emit:e}=t,i=Qr(),a=ee(!1),o=c=>{a.value||(a.value=!0,e("focus",c),s==null||s())},l=c=>{var d;c.relatedTarget&&((d=i.value)!=null&&d.contains(c.relatedTarget))||(a.value=!1,e("blur",c),n==null||n())},u=()=>{var c;(c=r.value)==null||c.focus()};return ve(i,c=>{c&&(c.setAttribute("role","button"),c.setAttribute("tabindex","-1"))}),qr(i,"click",u),{wrapperRef:i,isFocused:a,handleFocus:o,handleBlur:l}}var dt=(r,s)=>{const n=r.__vccOpts||r;for(const[t,e]of s)n[t]=e;return n};const S2=ft({size:{type:Ie([Number,String])},color:{type:String}}),w2=_e({name:"ElIcon",inheritAttrs:!1}),C2=_e({...w2,props:S2,setup(r){const s=r,n=ct("icon"),t=W(()=>{const{size:e,color:i}=s;return!e&&!i?{}:{fontSize:Nb(e)?void 0:gs(e),"--color":i}});return(e,i)=>($(),me("i",$r({class:F(n).b(),style:F(t)},e.$attrs),[Ke(e.$slots,"default")],16))}});var L2=dt(C2,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);const Pr=Wn(L2),Ki=Symbol("formContextKey"),ii=Symbol("formItemContextKey"),Ms=(r,s={})=>{const n=ee(void 0),t=s.prop?n:$p("size"),e=s.global?n:g2(),i=s.form?{size:void 0}:Je(Ki,void 0),a=s.formItem?{size:void 0}:Je(ii,void 0);return W(()=>t.value||F(r)||(a==null?void 0:a.size)||(i==null?void 0:i.size)||e.value||"")},T2=r=>{const s=$p("disabled"),n=Je(Ki,void 0);return W(()=>s.value||F(r)||(n==null?void 0:n.disabled)||!1)},hh=()=>{const r=Je(Ki,void 0),s=Je(ii,void 0);return{form:r,formItem:s}},k2=(r,{formItemContext:s,disableIdGeneration:n,disableIdManagement:t})=>{n||(n=ee(!1)),t||(t=ee(!1));const e=ee();let i;const a=W(()=>{var o;return!!(!r.label&&s&&s.inputIds&&((o=s.inputIds)==null?void 0:o.length)<=1)});return Tt(()=>{i=ve([dr(r,"id"),n],([o,l])=>{const u=o??(l?void 0:Ql().value);u!==e.value&&(s!=null&&s.removeInputId&&(e.value&&s.removeInputId(e.value),!(t!=null&&t.value)&&!l&&u&&s.addInputId(u)),e.value=u)},{immediate:!0})}),lm(()=>{i&&i(),s!=null&&s.removeInputId&&e.value&&s.removeInputId(e.value)}),{isLabeledByFormItem:a,inputId:e}},_2=ft({size:{type:String,values:Rs},disabled:Boolean}),Z2=ft({..._2,model:Object,rules:{type:Ie(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),D2={validate:(r,s,n)=>(vp(r)||Pn(r))&&za(s)&&Pn(n)};function E2(){const r=ee([]),s=W(()=>{if(!r.value.length)return"0";const i=Math.max(...r.value);return i?`${i}px`:""});function n(i){const a=r.value.indexOf(i);return a===-1&&s.value,a}function t(i,a){if(i&&a){const o=n(a);r.value.splice(o,1,i)}else i&&r.value.push(i)}function e(i){const a=n(i);a>-1&&r.value.splice(a,1)}return{autoLabelWidth:s,registerLabelWidth:t,deregisterLabelWidth:e}}const Us=(r,s)=>{const n=Bo(s);return n.length>0?r.filter(t=>t.prop&&n.includes(t.prop)):r},x2="ElForm",F2=_e({name:x2}),R2=_e({...F2,props:Z2,emits:D2,setup(r,{expose:s,emit:n}){const t=r,e=[],i=Ms(),a=ct("form"),o=W(()=>{const{labelPosition:w,inline:C}=t;return[a.b(),a.m(i.value||"default"),{[a.m(`label-${w}`)]:w,[a.m("inline")]:C}]}),l=w=>{e.push(w)},u=w=>{w.prop&&e.splice(e.indexOf(w),1)},c=(w=[])=>{t.model&&Us(e,w).forEach(C=>C.resetField())},d=(w=[])=>{Us(e,w).forEach(C=>C.clearValidate())},p=W(()=>!!t.model),h=w=>{if(e.length===0)return[];const C=Us(e,w);return C.length?C:[]},m=async w=>v(void 0,w),f=async(w=[])=>{if(!p.value)return!1;const C=h(w);if(C.length===0)return!0;let T={};for(const L of C)try{await L.validate("")}catch(_){T={...T,..._}}return Object.keys(T).length===0?!0:Promise.reject(T)},v=async(w=[],C)=>{const T=!ln(C);try{const L=await f(w);return L===!0&&(C==null||C(L)),L}catch(L){if(L instanceof Error)throw L;const _=L;return t.scrollToError&&b(Object.keys(_)[0]),C==null||C(!1,_),T&&Promise.reject(_)}},b=w=>{var C;const T=Us(e,w)[0];T&&((C=T.$el)==null||C.scrollIntoView(t.scrollIntoViewOptions))};return ve(()=>t.rules,()=>{t.validateOnRuleChange&&m().catch(w=>void 0)},{deep:!0}),gn(Ki,zn({...xs(t),emit:n,resetFields:c,clearValidate:d,validateField:v,addField:l,removeField:u,...E2()})),s({validate:m,validateField:v,resetFields:c,clearValidate:d,scrollToField:b}),(w,C)=>($(),me("form",{class:se(F(o))},[Ke(w.$slots,"default")],2))}});var I2=dt(R2,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);function Br(){return Br=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r},Br.apply(this,arguments)}function P2(r,s){r.prototype=Object.create(s.prototype),r.prototype.constructor=r,ws(r,s)}function el(r){return el=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},el(r)}function ws(r,s){return ws=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ws(r,s)}function M2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ua(r,s,n){return M2()?ua=Reflect.construct.bind():ua=function(e,i,a){var o=[null];o.push.apply(o,i);var l=Function.bind.apply(e,o),u=new l;return a&&ws(u,a.prototype),u},ua.apply(null,arguments)}function X2(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function tl(r){var s=typeof Map=="function"?new Map:void 0;return tl=function(t){if(t===null||!X2(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof s<"u"){if(s.has(t))return s.get(t);s.set(t,e)}function e(){return ua(t,arguments,el(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),ws(e,t)},tl(r)}var G2=/%[sdj%]/g,W2=function(){};typeof process<"u"&&process.env;function nl(r){if(!r||!r.length)return null;var s={};return r.forEach(function(n){var t=n.field;s[t]=s[t]||[],s[t].push(n)}),s}function dn(r){for(var s=arguments.length,n=new Array(s>1?s-1:0),t=1;t<s;t++)n[t-1]=arguments[t];var e=0,i=n.length;if(typeof r=="function")return r.apply(null,n);if(typeof r=="string"){var a=r.replace(G2,function(o){if(o==="%%")return"%";if(e>=i)return o;switch(o){case"%s":return String(n[e++]);case"%d":return Number(n[e++]);case"%j":try{return JSON.stringify(n[e++])}catch{return"[Circular]"}break;default:return o}});return a}return r}function V2(r){return r==="string"||r==="url"||r==="hex"||r==="email"||r==="date"||r==="pattern"}function gt(r,s){return!!(r==null||s==="array"&&Array.isArray(r)&&!r.length||V2(s)&&typeof r=="string"&&!r)}function A2(r,s,n){var t=[],e=0,i=r.length;function a(o){t.push.apply(t,o||[]),e++,e===i&&n(t)}r.forEach(function(o){s(o,a)})}function xc(r,s,n){var t=0,e=r.length;function i(a){if(a&&a.length){n(a);return}var o=t;t=t+1,o<e?s(r[o],i):n([])}i([])}function N2(r){var s=[];return Object.keys(r).forEach(function(n){s.push.apply(s,r[n]||[])}),s}var Fc=function(r){P2(s,r);function s(n,t){var e;return e=r.call(this,"Async Validation Error")||this,e.errors=n,e.fields=t,e}return s}(tl(Error));function O2(r,s,n,t,e){if(s.first){var i=new Promise(function(p,h){var m=function(b){return t(b),b.length?h(new Fc(b,nl(b))):p(e)},f=N2(r);xc(f,n,m)});return i.catch(function(p){return p}),i}var a=s.firstFields===!0?Object.keys(r):s.firstFields||[],o=Object.keys(r),l=o.length,u=0,c=[],d=new Promise(function(p,h){var m=function(v){if(c.push.apply(c,v),u++,u===l)return t(c),c.length?h(new Fc(c,nl(c))):p(e)};o.length||(t(c),p(e)),o.forEach(function(f){var v=r[f];a.indexOf(f)!==-1?xc(v,n,m):A2(v,n,m)})});return d.catch(function(p){return p}),d}function Y2(r){return!!(r&&r.message!==void 0)}function H2(r,s){for(var n=r,t=0;t<s.length;t++){if(n==null)return n;n=n[s[t]]}return n}function Rc(r,s){return function(n){var t;return r.fullFields?t=H2(s,r.fullFields):t=s[n.field||r.fullField],Y2(n)?(n.field=n.field||r.fullField,n.fieldValue=t,n):{message:typeof n=="function"?n():n,fieldValue:t,field:n.field||r.fullField}}}function Ic(r,s){if(s){for(var n in s)if(s.hasOwnProperty(n)){var t=s[n];typeof t=="object"&&typeof r[n]=="object"?r[n]=Br({},r[n],t):r[n]=t}}return r}var fh=function(s,n,t,e,i,a){s.required&&(!t.hasOwnProperty(s.field)||gt(n,a||s.type))&&e.push(dn(i.messages.required,s.fullField))},K2=function(s,n,t,e,i){(/^\s+$/.test(n)||n==="")&&e.push(dn(i.messages.whitespace,s.fullField))},zs,U2=function(){if(zs)return zs;var r="[a-fA-F\\d:]",s=function(T){return T&&T.includeBoundaries?"(?:(?<=\\s|^)(?="+r+")|(?<="+r+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",t="[a-fA-F\\d]{1,4}",e=(`
(?:
(?:`+t+":){7}(?:"+t+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+t+":){6}(?:"+n+"|:"+t+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+t+":){5}(?::"+n+"|(?::"+t+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+t+":){4}(?:(?::"+t+"){0,1}:"+n+"|(?::"+t+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+t+":){3}(?:(?::"+t+"){0,2}:"+n+"|(?::"+t+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+t+":){2}(?:(?::"+t+"){0,3}:"+n+"|(?::"+t+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+t+":){1}(?:(?::"+t+"){0,4}:"+n+"|(?::"+t+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+t+"){0,5}:"+n+"|(?::"+t+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),i=new RegExp("(?:^"+n+"$)|(?:^"+e+"$)"),a=new RegExp("^"+n+"$"),o=new RegExp("^"+e+"$"),l=function(T){return T&&T.exact?i:new RegExp("(?:"+s(T)+n+s(T)+")|(?:"+s(T)+e+s(T)+")","g")};l.v4=function(C){return C&&C.exact?a:new RegExp(""+s(C)+n+s(C),"g")},l.v6=function(C){return C&&C.exact?o:new RegExp(""+s(C)+e+s(C),"g")};var u="(?:(?:[a-z]+:)?//)",c="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,p=l.v6().source,h="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",m="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",f="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",b='(?:[/?#][^\\s"]*)?',w="(?:"+u+"|www\\.)"+c+"(?:localhost|"+d+"|"+p+"|"+h+m+f+")"+v+b;return zs=new RegExp("(?:^"+w+"$)","i"),zs},Pc={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},is={integer:function(s){return is.number(s)&&parseInt(s,10)===s},float:function(s){return is.number(s)&&!is.integer(s)},array:function(s){return Array.isArray(s)},regexp:function(s){if(s instanceof RegExp)return!0;try{return!!new RegExp(s)}catch{return!1}},date:function(s){return typeof s.getTime=="function"&&typeof s.getMonth=="function"&&typeof s.getYear=="function"&&!isNaN(s.getTime())},number:function(s){return isNaN(s)?!1:typeof s=="number"},object:function(s){return typeof s=="object"&&!is.array(s)},method:function(s){return typeof s=="function"},email:function(s){return typeof s=="string"&&s.length<=320&&!!s.match(Pc.email)},url:function(s){return typeof s=="string"&&s.length<=2048&&!!s.match(U2())},hex:function(s){return typeof s=="string"&&!!s.match(Pc.hex)}},z2=function(s,n,t,e,i){if(s.required&&n===void 0){fh(s,n,t,e,i);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=s.type;a.indexOf(o)>-1?is[o](n)||e.push(dn(i.messages.types[o],s.fullField,s.type)):o&&typeof n!==s.type&&e.push(dn(i.messages.types[o],s.fullField,s.type))},B2=function(s,n,t,e,i){var a=typeof s.len=="number",o=typeof s.min=="number",l=typeof s.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=n,d=null,p=typeof n=="number",h=typeof n=="string",m=Array.isArray(n);if(p?d="number":h?d="string":m&&(d="array"),!d)return!1;m&&(c=n.length),h&&(c=n.replace(u,"_").length),a?c!==s.len&&e.push(dn(i.messages[d].len,s.fullField,s.len)):o&&!l&&c<s.min?e.push(dn(i.messages[d].min,s.fullField,s.min)):l&&!o&&c>s.max?e.push(dn(i.messages[d].max,s.fullField,s.max)):o&&l&&(c<s.min||c>s.max)&&e.push(dn(i.messages[d].range,s.fullField,s.min,s.max))},gi="enum",j2=function(s,n,t,e,i){s[gi]=Array.isArray(s[gi])?s[gi]:[],s[gi].indexOf(n)===-1&&e.push(dn(i.messages[gi],s.fullField,s[gi].join(", ")))},J2=function(s,n,t,e,i){if(s.pattern){if(s.pattern instanceof RegExp)s.pattern.lastIndex=0,s.pattern.test(n)||e.push(dn(i.messages.pattern.mismatch,s.fullField,n,s.pattern));else if(typeof s.pattern=="string"){var a=new RegExp(s.pattern);a.test(n)||e.push(dn(i.messages.pattern.mismatch,s.fullField,n,s.pattern))}}},Pe={required:fh,whitespace:K2,type:z2,range:B2,enum:j2,pattern:J2},Q2=function(s,n,t,e,i){var a=[],o=s.required||!s.required&&e.hasOwnProperty(s.field);if(o){if(gt(n,"string")&&!s.required)return t();Pe.required(s,n,e,a,i,"string"),gt(n,"string")||(Pe.type(s,n,e,a,i),Pe.range(s,n,e,a,i),Pe.pattern(s,n,e,a,i),s.whitespace===!0&&Pe.whitespace(s,n,e,a,i))}t(a)},$2=function(s,n,t,e,i){var a=[],o=s.required||!s.required&&e.hasOwnProperty(s.field);if(o){if(gt(n)&&!s.required)return t();Pe.required(s,n,e,a,i),n!==void 0&&Pe.type(s,n,e,a,i)}t(a)},q2=function(s,n,t,e,i){var a=[],o=s.required||!s.required&&e.hasOwnProperty(s.field);if(o){if(n===""&&(n=void 0),gt(n)&&!s.required)return t();Pe.required(s,n,e,a,i),n!==void 0&&(Pe.type(s,n,e,a,i),Pe.range(s,n,e,a,i))}t(a)},ew=function(s,n,t,e,i){var a=[],o=s.required||!s.required&&e.hasOwnProperty(s.field);if(o){if(gt(n)&&!s.required)return t();Pe.required(s,n,e,a,i),n!==void 0&&Pe.type(s,n,e,a,i)}t(a)},tw=function(s,n,t,e,i){var a=[],o=s.required||!s.required&&e.hasOwnProperty(s.field);if(o){if(gt(n)&&!s.required)return t();Pe.required(s,n,e,a,i),gt(n)||Pe.type(s,n,e,a,i)}t(a)},nw=function(s,n,t,e,i){var a=[],o=s.required||!s.required&&e.hasOwnProperty(s.field);if(o){if(gt(n)&&!s.required)return t();Pe.required(s,n,e,a,i),n!==void 0&&(Pe.type(s,n,e,a,i),Pe.range(s,n,e,a,i))}t(a)},rw=function(s,n,t,e,i){var a=[],o=s.required||!s.required&&e.hasOwnProperty(s.field);if(o){if(gt(n)&&!s.required)return t();Pe.required(s,n,e,a,i),n!==void 0&&(Pe.type(s,n,e,a,i),Pe.range(s,n,e,a,i))}t(a)},iw=function(s,n,t,e,i){var a=[],o=s.required||!s.required&&e.hasOwnProperty(s.field);if(o){if(n==null&&!s.required)return t();Pe.required(s,n,e,a,i,"array"),n!=null&&(Pe.type(s,n,e,a,i),Pe.range(s,n,e,a,i))}t(a)},sw=function(s,n,t,e,i){var a=[],o=s.required||!s.required&&e.hasOwnProperty(s.field);if(o){if(gt(n)&&!s.required)return t();Pe.required(s,n,e,a,i),n!==void 0&&Pe.type(s,n,e,a,i)}t(a)},aw="enum",ow=function(s,n,t,e,i){var a=[],o=s.required||!s.required&&e.hasOwnProperty(s.field);if(o){if(gt(n)&&!s.required)return t();Pe.required(s,n,e,a,i),n!==void 0&&Pe[aw](s,n,e,a,i)}t(a)},lw=function(s,n,t,e,i){var a=[],o=s.required||!s.required&&e.hasOwnProperty(s.field);if(o){if(gt(n,"string")&&!s.required)return t();Pe.required(s,n,e,a,i),gt(n,"string")||Pe.pattern(s,n,e,a,i)}t(a)},uw=function(s,n,t,e,i){var a=[],o=s.required||!s.required&&e.hasOwnProperty(s.field);if(o){if(gt(n,"date")&&!s.required)return t();if(Pe.required(s,n,e,a,i),!gt(n,"date")){var l;n instanceof Date?l=n:l=new Date(n),Pe.type(s,l,e,a,i),l&&Pe.range(s,l.getTime(),e,a,i)}}t(a)},cw=function(s,n,t,e,i){var a=[],o=Array.isArray(n)?"array":typeof n;Pe.required(s,n,e,a,i,o),t(a)},wo=function(s,n,t,e,i){var a=s.type,o=[],l=s.required||!s.required&&e.hasOwnProperty(s.field);if(l){if(gt(n,a)&&!s.required)return t();Pe.required(s,n,e,o,i,a),gt(n,a)||Pe.type(s,n,e,o,i)}t(o)},dw=function(s,n,t,e,i){var a=[],o=s.required||!s.required&&e.hasOwnProperty(s.field);if(o){if(gt(n)&&!s.required)return t();Pe.required(s,n,e,a,i)}t(a)},cs={string:Q2,method:$2,number:q2,boolean:ew,regexp:tw,integer:nw,float:rw,array:iw,object:sw,enum:ow,pattern:lw,date:uw,url:wo,hex:wo,email:wo,required:cw,any:dw};function rl(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var s=JSON.parse(JSON.stringify(this));return s.clone=this.clone,s}}}var il=rl(),Xs=function(){function r(n){this.rules=null,this._messages=il,this.define(n)}var s=r.prototype;return s.define=function(t){var e=this;if(!t)throw new Error("Cannot configure a schema with no rules");if(typeof t!="object"||Array.isArray(t))throw new Error("Rules must be an object");this.rules={},Object.keys(t).forEach(function(i){var a=t[i];e.rules[i]=Array.isArray(a)?a:[a]})},s.messages=function(t){return t&&(this._messages=Ic(rl(),t)),this._messages},s.validate=function(t,e,i){var a=this;e===void 0&&(e={}),i===void 0&&(i=function(){});var o=t,l=e,u=i;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,o),Promise.resolve(o);function c(f){var v=[],b={};function w(T){if(Array.isArray(T)){var L;v=(L=v).concat.apply(L,T)}else v.push(T)}for(var C=0;C<f.length;C++)w(f[C]);v.length?(b=nl(v),u(v,b)):u(null,o)}if(l.messages){var d=this.messages();d===il&&(d=rl()),Ic(d,l.messages),l.messages=d}else l.messages=this.messages();var p={},h=l.keys||Object.keys(this.rules);h.forEach(function(f){var v=a.rules[f],b=o[f];v.forEach(function(w){var C=w;typeof C.transform=="function"&&(o===t&&(o=Br({},o)),b=o[f]=C.transform(b)),typeof C=="function"?C={validator:C}:C=Br({},C),C.validator=a.getValidationMethod(C),C.validator&&(C.field=f,C.fullField=C.fullField||f,C.type=a.getType(C),p[f]=p[f]||[],p[f].push({rule:C,value:b,source:o,field:f}))})});var m={};return O2(p,l,function(f,v){var b=f.rule,w=(b.type==="object"||b.type==="array")&&(typeof b.fields=="object"||typeof b.defaultField=="object");w=w&&(b.required||!b.required&&f.value),b.field=f.field;function C(_,D){return Br({},D,{fullField:b.fullField+"."+_,fullFields:b.fullFields?[].concat(b.fullFields,[_]):[_]})}function T(_){_===void 0&&(_=[]);var D=Array.isArray(_)?_:[_];!l.suppressWarning&&D.length&&r.warning("async-validator:",D),D.length&&b.message!==void 0&&(D=[].concat(b.message));var x=D.map(Rc(b,o));if(l.first&&x.length)return m[b.field]=1,v(x);if(!w)v(x);else{if(b.required&&!f.value)return b.message!==void 0?x=[].concat(b.message).map(Rc(b,o)):l.error&&(x=[l.error(b,dn(l.messages.required,b.field))]),v(x);var P={};b.defaultField&&Object.keys(f.value).map(function(g){P[g]=b.defaultField}),P=Br({},P,f.rule.fields);var I={};Object.keys(P).forEach(function(g){var y=P[g],S=Array.isArray(y)?y:[y];I[g]=S.map(C.bind(null,g))});var V=new r(I);V.messages(l.messages),f.rule.options&&(f.rule.options.messages=l.messages,f.rule.options.error=l.error),V.validate(f.value,f.rule.options||l,function(g){var y=[];x&&x.length&&y.push.apply(y,x),g&&g.length&&y.push.apply(y,g),v(y.length?y:null)})}}var L;if(b.asyncValidator)L=b.asyncValidator(b,f.value,T,f.source,l);else if(b.validator){try{L=b.validator(b,f.value,T,f.source,l)}catch(_){console.error==null||console.error(_),l.suppressValidatorError||setTimeout(function(){throw _},0),T(_.message)}L===!0?T():L===!1?T(typeof b.message=="function"?b.message(b.fullField||b.field):b.message||(b.fullField||b.field)+" fails"):L instanceof Array?T(L):L instanceof Error&&T(L.message)}L&&L.then&&L.then(function(){return T()},function(_){return T(_)})},function(f){c(f)},o)},s.getType=function(t){if(t.type===void 0&&t.pattern instanceof RegExp&&(t.type="pattern"),typeof t.validator!="function"&&t.type&&!cs.hasOwnProperty(t.type))throw new Error(dn("Unknown rule type %s",t.type));return t.type||"string"},s.getValidationMethod=function(t){if(typeof t.validator=="function")return t.validator;var e=Object.keys(t),i=e.indexOf("message");return i!==-1&&e.splice(i,1),e.length===1&&e[0]==="required"?cs.required:cs[this.getType(t)]||void 0},r}();Xs.register=function(s,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");cs[s]=n};Xs.warning=W2;Xs.messages=il;Xs.validators=cs;const pw=["","error","validating","success"],hw=ft({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:Ie([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Ie([Object,Array])},error:String,validateStatus:{type:String,values:pw},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:Rs}}),Mc="ElLabelWrap";var fw=_e({name:Mc,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(r,{slots:s}){const n=Je(Ki,void 0),t=Je(ii);t||zp(Mc,"usage: <el-form-item><label-wrap /></el-form-item>");const e=ct("form"),i=ee(),a=ee(0),o=()=>{var c;if((c=i.value)!=null&&c.firstElementChild){const d=window.getComputedStyle(i.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},l=(c="update")=>{rt(()=>{s.default&&r.isAutoWidth&&(c==="update"?a.value=o():c==="remove"&&(n==null||n.deregisterLabelWidth(a.value)))})},u=()=>l("update");return Tt(()=>{u()}),Cn(()=>{l("remove")}),yp(()=>u()),ve(a,(c,d)=>{r.updateAll&&(n==null||n.registerLabelWidth(c,d))}),Fs(W(()=>{var c,d;return(d=(c=i.value)==null?void 0:c.firstElementChild)!=null?d:null}),u),()=>{var c,d;if(!s)return null;const{isAutoWidth:p}=r;if(p){const h=n==null?void 0:n.autoLabelWidth,m=t==null?void 0:t.hasLabel,f={};if(m&&h&&h!=="auto"){const v=Math.max(0,Number.parseInt(h,10)-a.value),b=n.labelPosition==="left"?"marginRight":"marginLeft";v&&(f[b]=`${v}px`)}return He("div",{ref:i,class:[e.be("item","label-wrap")],style:f},[(c=s.default)==null?void 0:c.call(s)])}else return He(In,{ref:i},[(d=s.default)==null?void 0:d.call(s)])}}});const mw=["role","aria-labelledby"],vw=_e({name:"ElFormItem"}),yw=_e({...vw,props:hw,setup(r,{expose:s}){const n=r,t=gp(),e=Je(Ki,void 0),i=Je(ii,void 0),a=Ms(void 0,{formItem:!1}),o=ct("form-item"),l=Ql().value,u=ee([]),c=ee(""),d=_m(c,100),p=ee(""),h=ee();let m,f=!1;const v=W(()=>{if((e==null?void 0:e.labelPosition)==="top")return{};const te=gs(n.labelWidth||(e==null?void 0:e.labelWidth)||"");return te?{width:te}:{}}),b=W(()=>{if((e==null?void 0:e.labelPosition)==="top"||e!=null&&e.inline)return{};if(!n.label&&!n.labelWidth&&P)return{};const te=gs(n.labelWidth||(e==null?void 0:e.labelWidth)||"");return!n.label&&!t.label?{marginLeft:te}:{}}),w=W(()=>[o.b(),o.m(a.value),o.is("error",c.value==="error"),o.is("validating",c.value==="validating"),o.is("success",c.value==="success"),o.is("required",S.value||n.required),o.is("no-asterisk",e==null?void 0:e.hideRequiredAsterisk),(e==null?void 0:e.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[o.m("feedback")]:e==null?void 0:e.statusIcon}]),C=W(()=>za(n.inlineMessage)?n.inlineMessage:(e==null?void 0:e.inlineMessage)||!1),T=W(()=>[o.e("error"),{[o.em("error","inline")]:C.value}]),L=W(()=>n.prop?Pn(n.prop)?n.prop:n.prop.join("."):""),_=W(()=>!!(n.label||t.label)),D=W(()=>n.for||u.value.length===1?u.value[0]:void 0),x=W(()=>!D.value&&_.value),P=!!i,I=W(()=>{const te=e==null?void 0:e.model;if(!(!te||!n.prop))return So(te,n.prop).value}),V=W(()=>{const{required:te}=n,oe=[];n.rules&&oe.push(...Bo(n.rules));const le=e==null?void 0:e.rules;if(le&&n.prop){const Ce=So(le,n.prop).value;Ce&&oe.push(...Bo(Ce))}if(te!==void 0){const Ce=oe.map((Me,pt)=>[Me,pt]).filter(([Me])=>Object.keys(Me).includes("required"));if(Ce.length>0)for(const[Me,pt]of Ce)Me.required!==te&&(oe[pt]={...Me,required:te});else oe.push({required:te})}return oe}),g=W(()=>V.value.length>0),y=te=>V.value.filter(le=>!le.trigger||!te?!0:Array.isArray(le.trigger)?le.trigger.includes(te):le.trigger===te).map(({trigger:le,...Ce})=>Ce),S=W(()=>V.value.some(te=>te.required)),E=W(()=>{var te;return d.value==="error"&&n.showMessage&&((te=e==null?void 0:e.showMessage)!=null?te:!0)}),Z=W(()=>`${n.label||""}${(e==null?void 0:e.labelSuffix)||""}`),R=te=>{c.value=te},M=te=>{var oe,le;const{errors:Ce,fields:Me}=te;(!Ce||!Me)&&console.error(te),R("error"),p.value=Ce?(le=(oe=Ce==null?void 0:Ce[0])==null?void 0:oe.message)!=null?le:`${n.prop} is required`:"",e==null||e.emit("validate",n.prop,!1,p.value)},O=()=>{R("success"),e==null||e.emit("validate",n.prop,!0,"")},z=async te=>{const oe=L.value;return new Xs({[oe]:te}).validate({[oe]:I.value},{firstFields:!0}).then(()=>(O(),!0)).catch(Ce=>(M(Ce),Promise.reject(Ce)))},N=async(te,oe)=>{if(f||!n.prop)return!1;const le=ln(oe);if(!g.value)return oe==null||oe(!1),!1;const Ce=y(te);return Ce.length===0?(oe==null||oe(!0),!0):(R("validating"),z(Ce).then(()=>(oe==null||oe(!0),!0)).catch(Me=>{const{fields:pt}=Me;return oe==null||oe(!1,pt),le?!1:Promise.reject(pt)}))},ne=()=>{R(""),p.value="",f=!1},B=async()=>{const te=e==null?void 0:e.model;if(!te||!n.prop)return;const oe=So(te,n.prop);f=!0,oe.value=oc(m),await rt(),ne(),f=!1},qe=te=>{u.value.includes(te)||u.value.push(te)},Xe=te=>{u.value=u.value.filter(oe=>oe!==te)};ve(()=>n.error,te=>{p.value=te||"",R(te?"error":"")},{immediate:!0}),ve(()=>n.validateStatus,te=>R(te||""));const ze=zn({...xs(n),$el:h,size:a,validateState:c,labelId:l,inputIds:u,isGroup:x,hasLabel:_,addInputId:qe,removeInputId:Xe,resetField:B,clearValidate:ne,validate:N});return gn(ii,ze),Tt(()=>{n.prop&&(e==null||e.addField(ze),m=oc(I.value))}),Cn(()=>{e==null||e.removeField(ze)}),s({size:a,validateMessage:p,validateState:c,validate:N,clearValidate:ne,resetField:B}),(te,oe)=>{var le;return $(),me("div",{ref_key:"formItemRef",ref:h,class:se(F(w)),role:F(x)?"group":void 0,"aria-labelledby":F(x)?F(l):void 0},[He(F(fw),{"is-auto-width":F(v).width==="auto","update-all":((le=F(e))==null?void 0:le.labelWidth)==="auto"},{default:pe(()=>[F(_)?($(),Re(Kn(F(D)?"label":"div"),{key:0,id:F(l),for:F(D),class:se(F(o).e("label")),style:vt(F(v))},{default:pe(()=>[Ke(te.$slots,"label",{label:F(Z)},()=>[Na(Ft(F(Z)),1)])]),_:3},8,["id","for","class","style"])):Ee("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),ye("div",{class:se(F(o).e("content")),style:vt(F(b))},[Ke(te.$slots,"default"),He(um,{name:`${F(o).namespace.value}-zoom-in-top`},{default:pe(()=>[F(E)?Ke(te.$slots,"error",{key:0,error:p.value},()=>[ye("div",{class:se(F(T))},Ft(p.value),3)]):Ee("v-if",!0)]),_:3},8,["name"])],6)],10,mw)}}});var mh=dt(yw,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const gw=Wn(I2,{FormItem:mh}),Xc=Al(mh);let kn;const bw=`
  height:0 !important;
  visibility:hidden !important;
  ${Wm()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Sw=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function ww(r){const s=window.getComputedStyle(r),n=s.getPropertyValue("box-sizing"),t=Number.parseFloat(s.getPropertyValue("padding-bottom"))+Number.parseFloat(s.getPropertyValue("padding-top")),e=Number.parseFloat(s.getPropertyValue("border-bottom-width"))+Number.parseFloat(s.getPropertyValue("border-top-width"));return{contextStyle:Sw.map(a=>`${a}:${s.getPropertyValue(a)}`).join(";"),paddingSize:t,borderSize:e,boxSizing:n}}function Gc(r,s=1,n){var t;kn||(kn=document.createElement("textarea"),document.body.appendChild(kn));const{paddingSize:e,borderSize:i,boxSizing:a,contextStyle:o}=ww(r);kn.setAttribute("style",`${o};${bw}`),kn.value=r.value||r.placeholder||"";let l=kn.scrollHeight;const u={};a==="border-box"?l=l+i:a==="content-box"&&(l=l-e),kn.value="";const c=kn.scrollHeight-e;if(cn(s)){let d=c*s;a==="border-box"&&(d=d+e+i),l=Math.max(d,l),u.minHeight=`${d}px`}if(cn(n)){let d=c*n;a==="border-box"&&(d=d+e+i),l=Math.min(d,l)}return u.height=`${l}px`,(t=kn.parentNode)==null||t.removeChild(kn),kn=void 0,u}const Cw=ft({id:{type:String,default:void 0},size:v2,disabled:Boolean,modelValue:{type:Ie([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Ie([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Sa},prefixIcon:{type:Sa},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Ie([Object,Array,String]),default:()=>_i({})}}),Lw={[Fn]:r=>Pn(r),input:r=>Pn(r),change:r=>Pn(r),focus:r=>r instanceof FocusEvent,blur:r=>r instanceof FocusEvent,clear:()=>!0,mouseleave:r=>r instanceof MouseEvent,mouseenter:r=>r instanceof MouseEvent,keydown:r=>r instanceof Event,compositionstart:r=>r instanceof CompositionEvent,compositionupdate:r=>r instanceof CompositionEvent,compositionend:r=>r instanceof CompositionEvent},Tw=["role"],kw=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],_w=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],Zw=_e({name:"ElInput",inheritAttrs:!1}),Dw=_e({...Zw,props:Cw,emits:Lw,setup(r,{expose:s,emit:n}){const t=r,e=cm(),i=gp(),a=W(()=>{const J={};return t.containerRole==="combobox"&&(J["aria-haspopup"]=e["aria-haspopup"],J["aria-owns"]=e["aria-owns"],J["aria-expanded"]=e["aria-expanded"]),J}),o=W(()=>[t.type==="textarea"?v.b():f.b(),f.m(h.value),f.is("disabled",m.value),f.is("exceed",qe.value),{[f.b("group")]:i.prepend||i.append,[f.bm("group","append")]:i.append,[f.bm("group","prepend")]:i.prepend,[f.m("prefix")]:i.prefix||t.prefixIcon,[f.m("suffix")]:i.suffix||t.suffixIcon||t.clearable||t.showPassword,[f.bm("suffix","password-clear")]:z.value&&N.value},e.class]),l=W(()=>[f.e("wrapper"),f.is("focus",I.value)]),u=O1({excludeKeys:W(()=>Object.keys(a.value))}),{form:c,formItem:d}=hh(),{inputId:p}=k2(t,{formItemContext:d}),h=Ms(),m=T2(),f=ct("input"),v=ct("textarea"),b=Qr(),w=Qr(),C=ee(!1),T=ee(!1),L=ee(!1),_=ee(),D=Qr(t.inputStyle),x=W(()=>b.value||w.value),{wrapperRef:P,isFocused:I,handleFocus:V,handleBlur:g}=b2(x,{afterBlur(){var J;t.validateEvent&&((J=d==null?void 0:d.validate)==null||J.call(d,"blur").catch(we=>void 0))}}),y=W(()=>{var J;return(J=c==null?void 0:c.statusIcon)!=null?J:!1}),S=W(()=>(d==null?void 0:d.validateState)||""),E=W(()=>S.value&&X1[S.value]),Z=W(()=>L.value?P1:C1),R=W(()=>[e.style,t.inputStyle]),M=W(()=>[t.inputStyle,D.value,{resize:t.resize}]),O=W(()=>Ua(t.modelValue)?"":String(t.modelValue)),z=W(()=>t.clearable&&!m.value&&!t.readonly&&!!O.value&&(I.value||C.value)),N=W(()=>t.showPassword&&!m.value&&!t.readonly&&!!O.value&&(!!O.value||I.value)),ne=W(()=>t.showWordLimit&&!!u.value.maxlength&&(t.type==="text"||t.type==="textarea")&&!m.value&&!t.readonly&&!t.showPassword),B=W(()=>O.value.length),qe=W(()=>!!ne.value&&B.value>Number(u.value.maxlength)),Xe=W(()=>!!i.suffix||!!t.suffixIcon||z.value||t.showPassword||ne.value||!!S.value&&y.value),[ze,te]=m2(b);Fs(w,J=>{if(Ce(),!ne.value||t.resize!=="both")return;const we=J[0],{width:et}=we.contentRect;_.value={right:`calc(100% - ${et+15+6}px)`}});const oe=()=>{const{type:J,autosize:we}=t;if(!(!Ot||J!=="textarea"||!w.value))if(we){const et=gr(we)?we.minRows:void 0,en=gr(we)?we.maxRows:void 0,Or=Gc(w.value,et,en);D.value={overflowY:"hidden",...Or},rt(()=>{w.value.offsetHeight,D.value=Or})}else D.value={minHeight:Gc(w.value).minHeight}},Ce=(J=>{let we=!1;return()=>{var et;if(we||!t.autosize)return;((et=w.value)==null?void 0:et.offsetParent)===null||(J(),we=!0)}})(oe),Me=()=>{const J=x.value,we=t.formatter?t.formatter(O.value):O.value;!J||J.value===we||(J.value=we)},pt=async J=>{ze();let{value:we}=J.target;if(t.formatter&&(we=t.parser?t.parser(we):we),!T.value){if(we===O.value){Me();return}n(Fn,we),n("input",we),await rt(),Me(),te()}},Rt=J=>{n("change",J.target.value)},hn=J=>{n("compositionstart",J),T.value=!0},Ln=J=>{var we;n("compositionupdate",J);const et=(we=J.target)==null?void 0:we.value,en=et[et.length-1]||"";T.value=!Jp(en)},Lt=J=>{n("compositionend",J),T.value&&(T.value=!1,pt(J))},fn=()=>{L.value=!L.value,kt()},kt=async()=>{var J;await rt(),(J=x.value)==null||J.focus()},It=()=>{var J;return(J=x.value)==null?void 0:J.blur()},Pt=J=>{C.value=!1,n("mouseleave",J)},An=J=>{C.value=!0,n("mouseenter",J)},er=J=>{n("keydown",J)},_r=()=>{var J;(J=x.value)==null||J.select()},Nn=()=>{n(Fn,""),n("change",""),n("clear"),n("input","")};return ve(()=>t.modelValue,()=>{var J;rt(()=>oe()),t.validateEvent&&((J=d==null?void 0:d.validate)==null||J.call(d,"change").catch(we=>void 0))}),ve(O,()=>Me()),ve(()=>t.type,async()=>{await rt(),Me(),oe()}),Tt(()=>{!t.formatter&&t.parser,Me(),rt(oe)}),s({input:b,textarea:w,ref:x,textareaStyle:M,autosize:dr(t,"autosize"),focus:kt,blur:It,select:_r,clear:Nn,resizeTextarea:oe}),(J,we)=>hr(($(),me("div",$r(F(a),{class:F(o),style:F(R),role:J.containerRole,onMouseenter:An,onMouseleave:Pt}),[Ee(" input "),J.type!=="textarea"?($(),me(In,{key:0},[Ee(" prepend slot "),J.$slots.prepend?($(),me("div",{key:0,class:se(F(f).be("group","prepend"))},[Ke(J.$slots,"prepend")],2)):Ee("v-if",!0),ye("div",{ref_key:"wrapperRef",ref:P,class:se(F(l))},[Ee(" prefix slot "),J.$slots.prefix||J.prefixIcon?($(),me("span",{key:0,class:se(F(f).e("prefix"))},[ye("span",{class:se(F(f).e("prefix-inner"))},[Ke(J.$slots,"prefix"),J.prefixIcon?($(),Re(F(Pr),{key:0,class:se(F(f).e("icon"))},{default:pe(()=>[($(),Re(Kn(J.prefixIcon)))]),_:1},8,["class"])):Ee("v-if",!0)],2)],2)):Ee("v-if",!0),ye("input",$r({id:F(p),ref_key:"input",ref:b,class:F(f).e("inner")},F(u),{type:J.showPassword?L.value?"text":"password":J.type,disabled:F(m),formatter:J.formatter,parser:J.parser,readonly:J.readonly,autocomplete:J.autocomplete,tabindex:J.tabindex,"aria-label":J.label,placeholder:J.placeholder,style:J.inputStyle,form:t.form,onCompositionstart:hn,onCompositionupdate:Ln,onCompositionend:Lt,onInput:pt,onFocus:we[0]||(we[0]=(...et)=>F(V)&&F(V)(...et)),onBlur:we[1]||(we[1]=(...et)=>F(g)&&F(g)(...et)),onChange:Rt,onKeydown:er}),null,16,kw),Ee(" suffix slot "),F(Xe)?($(),me("span",{key:1,class:se(F(f).e("suffix"))},[ye("span",{class:se(F(f).e("suffix-inner"))},[!F(z)||!F(N)||!F(ne)?($(),me(In,{key:0},[Ke(J.$slots,"suffix"),J.suffixIcon?($(),Re(F(Pr),{key:0,class:se(F(f).e("icon"))},{default:pe(()=>[($(),Re(Kn(J.suffixIcon)))]),_:1},8,["class"])):Ee("v-if",!0)],64)):Ee("v-if",!0),F(z)?($(),Re(F(Pr),{key:1,class:se([F(f).e("icon"),F(f).e("clear")]),onMousedown:En(F(ps),["prevent"]),onClick:Nn},{default:pe(()=>[He(F(Vl))]),_:1},8,["class","onMousedown"])):Ee("v-if",!0),F(N)?($(),Re(F(Pr),{key:2,class:se([F(f).e("icon"),F(f).e("password")]),onClick:fn},{default:pe(()=>[($(),Re(Kn(F(Z))))]),_:1},8,["class"])):Ee("v-if",!0),F(ne)?($(),me("span",{key:3,class:se(F(f).e("count"))},[ye("span",{class:se(F(f).e("count-inner"))},Ft(F(B))+" / "+Ft(F(u).maxlength),3)],2)):Ee("v-if",!0),F(S)&&F(E)&&F(y)?($(),Re(F(Pr),{key:4,class:se([F(f).e("icon"),F(f).e("validateIcon"),F(f).is("loading",F(S)==="validating")])},{default:pe(()=>[($(),Re(Kn(F(E))))]),_:1},8,["class"])):Ee("v-if",!0)],2)],2)):Ee("v-if",!0)],2),Ee(" append slot "),J.$slots.append?($(),me("div",{key:1,class:se(F(f).be("group","append"))},[Ke(J.$slots,"append")],2)):Ee("v-if",!0)],64)):($(),me(In,{key:1},[Ee(" textarea "),ye("textarea",$r({id:F(p),ref_key:"textarea",ref:w,class:F(v).e("inner")},F(u),{tabindex:J.tabindex,disabled:F(m),readonly:J.readonly,autocomplete:J.autocomplete,style:F(M),"aria-label":J.label,placeholder:J.placeholder,form:t.form,onCompositionstart:hn,onCompositionupdate:Ln,onCompositionend:Lt,onInput:pt,onFocus:we[2]||(we[2]=(...et)=>F(V)&&F(V)(...et)),onBlur:we[3]||(we[3]=(...et)=>F(g)&&F(g)(...et)),onChange:Rt,onKeydown:er}),null,16,_w),F(ne)?($(),me("span",{key:0,style:vt(_.value),class:se(F(f).e("count"))},Ft(F(B))+" / "+Ft(F(u).maxlength),7)):Ee("v-if",!0)],64))],16,Tw)),[[Yi,J.type!=="hidden"]])}});var Ew=dt(Dw,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const vh=Wn(Ew),Ei=4,xw={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Fw=({move:r,size:s,bar:n})=>({[n.size]:s,transform:`translate${n.axis}(${r}%)`}),yh=Symbol("scrollbarContextKey"),Rw=ft({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Iw="Thumb",Pw=_e({__name:"thumb",props:Rw,setup(r){const s=r,n=Je(yh),t=ct("scrollbar");n||zp(Iw,"can not inject scrollbar context");const e=ee(),i=ee(),a=ee({}),o=ee(!1);let l=!1,u=!1,c=Ot?document.onselectstart:null;const d=W(()=>xw[s.vertical?"vertical":"horizontal"]),p=W(()=>Fw({size:s.size,move:s.move,bar:d.value})),h=W(()=>e.value[d.value.offset]**2/n.wrapElement[d.value.scrollSize]/s.ratio/i.value[d.value.offset]),m=_=>{var D;if(_.stopPropagation(),_.ctrlKey||[1,2].includes(_.button))return;(D=window.getSelection())==null||D.removeAllRanges(),v(_);const x=_.currentTarget;x&&(a.value[d.value.axis]=x[d.value.offset]-(_[d.value.client]-x.getBoundingClientRect()[d.value.direction]))},f=_=>{if(!i.value||!e.value||!n.wrapElement)return;const D=Math.abs(_.target.getBoundingClientRect()[d.value.direction]-_[d.value.client]),x=i.value[d.value.offset]/2,P=(D-x)*100*h.value/e.value[d.value.offset];n.wrapElement[d.value.scroll]=P*n.wrapElement[d.value.scrollSize]/100},v=_=>{_.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",b),document.addEventListener("mouseup",w),c=document.onselectstart,document.onselectstart=()=>!1},b=_=>{if(!e.value||!i.value||l===!1)return;const D=a.value[d.value.axis];if(!D)return;const x=(e.value.getBoundingClientRect()[d.value.direction]-_[d.value.client])*-1,P=i.value[d.value.offset]-D,I=(x-P)*100*h.value/e.value[d.value.offset];n.wrapElement[d.value.scroll]=I*n.wrapElement[d.value.scrollSize]/100},w=()=>{l=!1,a.value[d.value.axis]=0,document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w),L(),u&&(o.value=!1)},C=()=>{u=!1,o.value=!!s.size},T=()=>{u=!0,o.value=l};Cn(()=>{L(),document.removeEventListener("mouseup",w)});const L=()=>{document.onselectstart!==c&&(document.onselectstart=c)};return qr(dr(n,"scrollbarElement"),"mousemove",C),qr(dr(n,"scrollbarElement"),"mouseleave",T),(_,D)=>($(),Re(hs,{name:F(t).b("fade"),persisted:""},{default:pe(()=>[hr(ye("div",{ref_key:"instance",ref:e,class:se([F(t).e("bar"),F(t).is(F(d).key)]),onMousedown:f},[ye("div",{ref_key:"thumb",ref:i,class:se(F(t).e("thumb")),style:vt(F(p)),onMousedown:m},null,38)],34),[[Yi,_.always||o.value]])]),_:1},8,["name"]))}});var Wc=dt(Pw,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Mw=ft({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Xw=_e({__name:"bar",props:Mw,setup(r,{expose:s}){const n=r,t=ee(0),e=ee(0);return s({handleScroll:a=>{if(a){const o=a.offsetHeight-Ei,l=a.offsetWidth-Ei;e.value=a.scrollTop*100/o*n.ratioY,t.value=a.scrollLeft*100/l*n.ratioX}}}),(a,o)=>($(),me(In,null,[He(Wc,{move:t.value,ratio:a.ratioX,size:a.width,always:a.always},null,8,["move","ratio","size","always"]),He(Wc,{move:e.value,ratio:a.ratioY,size:a.height,vertical:"",always:a.always},null,8,["move","ratio","size","always"])],64))}});var Gw=dt(Xw,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Ww=ft({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Ie([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Vw={scroll:({scrollTop:r,scrollLeft:s})=>[r,s].every(cn)},Aw="ElScrollbar",Nw=_e({name:Aw}),Ow=_e({...Nw,props:Ww,emits:Vw,setup(r,{expose:s,emit:n}){const t=r,e=ct("scrollbar");let i,a;const o=ee(),l=ee(),u=ee(),c=ee("0"),d=ee("0"),p=ee(),h=ee(1),m=ee(1),f=W(()=>{const D={};return t.height&&(D.height=gs(t.height)),t.maxHeight&&(D.maxHeight=gs(t.maxHeight)),[t.wrapStyle,D]}),v=W(()=>[t.wrapClass,e.e("wrap"),{[e.em("wrap","hidden-default")]:!t.native}]),b=W(()=>[e.e("view"),t.viewClass]),w=()=>{var D;l.value&&((D=p.value)==null||D.handleScroll(l.value),n("scroll",{scrollTop:l.value.scrollTop,scrollLeft:l.value.scrollLeft}))};function C(D,x){gr(D)?l.value.scrollTo(D):cn(D)&&cn(x)&&l.value.scrollTo(D,x)}const T=D=>{cn(D)&&(l.value.scrollTop=D)},L=D=>{cn(D)&&(l.value.scrollLeft=D)},_=()=>{if(!l.value)return;const D=l.value.offsetHeight-Ei,x=l.value.offsetWidth-Ei,P=D**2/l.value.scrollHeight,I=x**2/l.value.scrollWidth,V=Math.max(P,t.minSize),g=Math.max(I,t.minSize);h.value=P/(D-P)/(V/(D-V)),m.value=I/(x-I)/(g/(x-g)),d.value=V+Ei<D?`${V}px`:"",c.value=g+Ei<x?`${g}px`:""};return ve(()=>t.noresize,D=>{D?(i==null||i(),a==null||a()):({stop:i}=Fs(u,_),a=qr("resize",_))},{immediate:!0}),ve(()=>[t.maxHeight,t.height],()=>{t.native||rt(()=>{var D;_(),l.value&&((D=p.value)==null||D.handleScroll(l.value))})}),gn(yh,zn({scrollbarElement:o,wrapElement:l})),Tt(()=>{t.native||rt(()=>{_()})}),yp(()=>_()),s({wrapRef:l,update:_,scrollTo:C,setScrollTop:T,setScrollLeft:L,handleScroll:w}),(D,x)=>($(),me("div",{ref_key:"scrollbarRef",ref:o,class:se(F(e).b())},[ye("div",{ref_key:"wrapRef",ref:l,class:se(F(v)),style:vt(F(f)),onScroll:w},[($(),Re(Kn(D.tag),{ref_key:"resizeRef",ref:u,class:se(F(b)),style:vt(D.viewStyle)},{default:pe(()=>[Ke(D.$slots,"default")]),_:3},8,["class","style"]))],38),D.native?Ee("v-if",!0):($(),Re(Gw,{key:0,ref_key:"barRef",ref:p,height:d.value,width:c.value,always:D.always,"ratio-x":m.value,"ratio-y":h.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Yw=dt(Ow,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Hw=Wn(Yw),$l=Symbol("popper"),gh=Symbol("popperContent"),Kw=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],bh=ft({role:{type:String,values:Kw,default:"tooltip"}}),Uw=_e({name:"ElPopper",inheritAttrs:!1}),zw=_e({...Uw,props:bh,setup(r,{expose:s}){const n=r,t=ee(),e=ee(),i=ee(),a=ee(),o=W(()=>n.role),l={triggerRef:t,popperInstanceRef:e,contentRef:i,referenceRef:a,role:o};return s(l),gn($l,l),(u,c)=>Ke(u.$slots,"default")}});var Bw=dt(zw,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const Sh=ft({arrowOffset:{type:Number,default:5}}),jw=_e({name:"ElPopperArrow",inheritAttrs:!1}),Jw=_e({...jw,props:Sh,setup(r,{expose:s}){const n=r,t=ct("popper"),{arrowOffset:e,arrowRef:i,arrowStyle:a}=Je(gh,void 0);return ve(()=>n.arrowOffset,o=>{e.value=o}),Cn(()=>{i.value=void 0}),s({arrowRef:i}),(o,l)=>($(),me("span",{ref_key:"arrowRef",ref:i,class:se(F(t).e("arrow")),style:vt(F(a)),"data-popper-arrow":""},null,6))}});var Qw=dt(Jw,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const $w="ElOnlyChild",qw=_e({name:$w,setup(r,{slots:s,attrs:n}){var t;const e=Je(ph),i=d2((t=e==null?void 0:e.setForwardRef)!=null?t:ps);return()=>{var a;const o=(a=s.default)==null?void 0:a.call(s,n);if(!o||o.length>1)return null;const l=wh(o);return l?hr(dm(l,n),[[i]]):null}}});function wh(r){if(!r)return null;const s=r;for(const n of s){if(gr(n))switch(n.type){case hm:continue;case pm:case"svg":return Vc(n);case In:return wh(n.children);default:return n}return Vc(n)}return null}function Vc(r){const s=ct("only-child");return He("span",{class:s.e("content")},[r])}const Ch=ft({virtualRef:{type:Ie(Object)},virtualTriggering:Boolean,onMouseenter:{type:Ie(Function)},onMouseleave:{type:Ie(Function)},onClick:{type:Ie(Function)},onKeydown:{type:Ie(Function)},onFocus:{type:Ie(Function)},onBlur:{type:Ie(Function)},onContextmenu:{type:Ie(Function)},id:String,open:Boolean}),eC=_e({name:"ElPopperTrigger",inheritAttrs:!1}),tC=_e({...eC,props:Ch,setup(r,{expose:s}){const n=r,{role:t,triggerRef:e}=Je($l,void 0);c2(e);const i=W(()=>o.value?n.id:void 0),a=W(()=>{if(t&&t.value==="tooltip")return n.open&&n.id?n.id:void 0}),o=W(()=>{if(t&&t.value!=="tooltip")return t.value}),l=W(()=>o.value?`${n.open}`:void 0);let u;return Tt(()=>{ve(()=>n.virtualRef,c=>{c&&(e.value=Mr(c))},{immediate:!0}),ve(e,(c,d)=>{u==null||u(),u=void 0,ys(c)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(p=>{var h;const m=n[p];m&&(c.addEventListener(p.slice(2).toLowerCase(),m),(h=d==null?void 0:d.removeEventListener)==null||h.call(d,p.slice(2).toLowerCase(),m))}),u=ve([i,a,o,l],p=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((h,m)=>{Ua(p[m])?c.removeAttribute(h):c.setAttribute(h,p[m])})},{immediate:!0})),ys(d)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(p=>d.removeAttribute(p))},{immediate:!0})}),Cn(()=>{u==null||u(),u=void 0}),s({triggerRef:e}),(c,d)=>c.virtualTriggering?Ee("v-if",!0):($(),Re(F(qw),$r({key:0},c.$attrs,{"aria-controls":F(i),"aria-describedby":F(a),"aria-expanded":F(l),"aria-haspopup":F(o)}),{default:pe(()=>[Ke(c.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var nC=dt(tC,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]);const Co="focus-trap.focus-after-trapped",Lo="focus-trap.focus-after-released",rC="focus-trap.focusout-prevented",Ac={cancelable:!0,bubbles:!1},iC={cancelable:!0,bubbles:!1},Nc="focusAfterTrapped",Oc="focusAfterReleased",sC=Symbol("elFocusTrap"),ql=ee(),Qa=ee(0),eu=ee(0);let Bs=0;const Lh=r=>{const s=[],n=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:t=>{const e=t.tagName==="INPUT"&&t.type==="hidden";return t.disabled||t.hidden||e?NodeFilter.FILTER_SKIP:t.tabIndex>=0||t===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s},Yc=(r,s)=>{for(const n of r)if(!aC(n,s))return n},aC=(r,s)=>{if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(s&&r===s)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1},oC=r=>{const s=Lh(r),n=Yc(s,r),t=Yc(s.reverse(),r);return[n,t]},lC=r=>r instanceof HTMLInputElement&&"select"in r,xr=(r,s)=>{if(r&&r.focus){const n=document.activeElement;r.focus({preventScroll:!0}),eu.value=window.performance.now(),r!==n&&lC(r)&&s&&r.select()}};function Hc(r,s){const n=[...r],t=r.indexOf(s);return t!==-1&&n.splice(t,1),n}const uC=()=>{let r=[];return{push:t=>{const e=r[0];e&&t!==e&&e.pause(),r=Hc(r,t),r.unshift(t)},remove:t=>{var e,i;r=Hc(r,t),(i=(e=r[0])==null?void 0:e.resume)==null||i.call(e)}}},cC=(r,s=!1)=>{const n=document.activeElement;for(const t of r)if(xr(t,s),document.activeElement!==n)return},Kc=uC(),dC=()=>Qa.value>eu.value,js=()=>{ql.value="pointer",Qa.value=window.performance.now()},Uc=()=>{ql.value="keyboard",Qa.value=window.performance.now()},pC=()=>(Tt(()=>{Bs===0&&(document.addEventListener("mousedown",js),document.addEventListener("touchstart",js),document.addEventListener("keydown",Uc)),Bs++}),Cn(()=>{Bs--,Bs<=0&&(document.removeEventListener("mousedown",js),document.removeEventListener("touchstart",js),document.removeEventListener("keydown",Uc))}),{focusReason:ql,lastUserFocusTimestamp:Qa,lastAutomatedFocusTimestamp:eu}),Js=r=>new CustomEvent(rC,{...iC,detail:r}),hC=_e({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[Nc,Oc,"focusin","focusout","focusout-prevented","release-requested"],setup(r,{emit:s}){const n=ee();let t,e;const{focusReason:i}=pC();s2(m=>{r.trapped&&!a.paused&&s("release-requested",m)});const a={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},o=m=>{if(!r.loop&&!r.trapped||a.paused)return;const{key:f,altKey:v,ctrlKey:b,metaKey:w,currentTarget:C,shiftKey:T}=m,{loop:L}=r,_=f===Mi.tab&&!v&&!b&&!w,D=document.activeElement;if(_&&D){const x=C,[P,I]=oC(x);if(P&&I){if(!T&&D===I){const g=Js({focusReason:i.value});s("focusout-prevented",g),g.defaultPrevented||(m.preventDefault(),L&&xr(P,!0))}else if(T&&[P,x].includes(D)){const g=Js({focusReason:i.value});s("focusout-prevented",g),g.defaultPrevented||(m.preventDefault(),L&&xr(I,!0))}}else if(D===x){const g=Js({focusReason:i.value});s("focusout-prevented",g),g.defaultPrevented||m.preventDefault()}}};gn(sC,{focusTrapRef:n,onKeydown:o}),ve(()=>r.focusTrapEl,m=>{m&&(n.value=m)},{immediate:!0}),ve([n],([m],[f])=>{m&&(m.addEventListener("keydown",o),m.addEventListener("focusin",c),m.addEventListener("focusout",d)),f&&(f.removeEventListener("keydown",o),f.removeEventListener("focusin",c),f.removeEventListener("focusout",d))});const l=m=>{s(Nc,m)},u=m=>s(Oc,m),c=m=>{const f=F(n);if(!f)return;const v=m.target,b=m.relatedTarget,w=v&&f.contains(v);r.trapped||b&&f.contains(b)||(t=b),w&&s("focusin",m),!a.paused&&r.trapped&&(w?e=v:xr(e,!0))},d=m=>{const f=F(n);if(!(a.paused||!f))if(r.trapped){const v=m.relatedTarget;!Ua(v)&&!f.contains(v)&&setTimeout(()=>{if(!a.paused&&r.trapped){const b=Js({focusReason:i.value});s("focusout-prevented",b),b.defaultPrevented||xr(e,!0)}},0)}else{const v=m.target;v&&f.contains(v)||s("focusout",m)}};async function p(){await rt();const m=F(n);if(m){Kc.push(a);const f=m.contains(document.activeElement)?t:document.activeElement;if(t=f,!m.contains(f)){const b=new Event(Co,Ac);m.addEventListener(Co,l),m.dispatchEvent(b),b.defaultPrevented||rt(()=>{let w=r.focusStartEl;Pn(w)||(xr(w),document.activeElement!==w&&(w="first")),w==="first"&&cC(Lh(m),!0),(document.activeElement===f||w==="container")&&xr(m)})}}}function h(){const m=F(n);if(m){m.removeEventListener(Co,l);const f=new CustomEvent(Lo,{...Ac,detail:{focusReason:i.value}});m.addEventListener(Lo,u),m.dispatchEvent(f),!f.defaultPrevented&&(i.value=="keyboard"||!dC()||m.contains(document.activeElement))&&xr(t??document.body),m.removeEventListener(Lo,l),Kc.remove(a)}}return Tt(()=>{r.trapped&&p(),ve(()=>r.trapped,m=>{m?p():h()})}),Cn(()=>{r.trapped&&h()}),{onKeydown:o}}});function fC(r,s,n,t,e,i){return Ke(r.$slots,"default",{handleKeydown:r.onKeydown})}var mC=dt(hC,[["render",fC],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const vC=["fixed","absolute"],yC=ft({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Ie(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:ja,default:"bottom"},popperOptions:{type:Ie(Object),default:()=>({})},strategy:{type:String,values:vC,default:"absolute"}}),Th=ft({...yC,id:String,style:{type:Ie([String,Array,Object])},className:{type:Ie([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:Ie([String,Array,Object])},popperStyle:{type:Ie([String,Array,Object])},referenceEl:{type:Ie(Object)},triggerTargetEl:{type:Ie(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),gC={mouseenter:r=>r instanceof MouseEvent,mouseleave:r=>r instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},bC=(r,s=[])=>{const{placement:n,strategy:t,popperOptions:e}=r,i={placement:n,strategy:t,...e,modifiers:[...wC(r),...s]};return CC(i,e==null?void 0:e.modifiers),i},SC=r=>{if(Ot)return Mr(r)};function wC(r){const{offset:s,gpuAcceleration:n,fallbackPlacements:t}=r;return[{name:"offset",options:{offset:[0,s??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:t}},{name:"computeStyles",options:{gpuAcceleration:n}}]}function CC(r,s){s&&(r.modifiers=[...r.modifiers,...s??[]])}const LC=0,TC=r=>{const{popperInstanceRef:s,contentRef:n,triggerRef:t,role:e}=Je($l,void 0),i=ee(),a=ee(),o=W(()=>({name:"eventListeners",enabled:!!r.visible})),l=W(()=>{var b;const w=F(i),C=(b=F(a))!=null?b:LC;return{name:"arrow",enabled:!Wb(w),options:{element:w,padding:C}}}),u=W(()=>({onFirstUpdate:()=>{m()},...bC(r,[F(l),F(o)])})),c=W(()=>SC(r.referenceEl)||F(t)),{attributes:d,state:p,styles:h,update:m,forceUpdate:f,instanceRef:v}=n2(c,n,u);return ve(v,b=>s.value=b),Tt(()=>{ve(()=>{var b;return(b=F(c))==null?void 0:b.getBoundingClientRect()},()=>{m()})}),{attributes:d,arrowRef:i,contentRef:n,instanceRef:v,state:p,styles:h,role:e,forceUpdate:f,update:m}},kC=(r,{attributes:s,styles:n,role:t})=>{const{nextZIndex:e}=f2(),i=ct("popper"),a=W(()=>F(s).popper),o=ee(r.zIndex||e()),l=W(()=>[i.b(),i.is("pure",r.pure),i.is(r.effect),r.popperClass]),u=W(()=>[{zIndex:F(o)},F(n).popper,r.popperStyle||{}]),c=W(()=>t.value==="dialog"?"false":void 0),d=W(()=>F(n).arrow||{});return{ariaModal:c,arrowStyle:d,contentAttrs:a,contentClass:l,contentStyle:u,contentZIndex:o,updateZIndex:()=>{o.value=r.zIndex||e()}}},_C=(r,s)=>{const n=ee(!1),t=ee();return{focusStartRef:t,trapped:n,onFocusAfterReleased:u=>{var c;((c=u.detail)==null?void 0:c.focusReason)!=="pointer"&&(t.value="first",s("blur"))},onFocusAfterTrapped:()=>{s("focus")},onFocusInTrap:u=>{r.visible&&!n.value&&(u.target&&(t.value=u.target),n.value=!0)},onFocusoutPrevented:u=>{r.trapping||(u.detail.focusReason==="pointer"&&u.preventDefault(),n.value=!1)},onReleaseRequested:()=>{n.value=!1,s("close")}}},ZC=_e({name:"ElPopperContent"}),DC=_e({...ZC,props:Th,emits:gC,setup(r,{expose:s,emit:n}){const t=r,{focusStartRef:e,trapped:i,onFocusAfterReleased:a,onFocusAfterTrapped:o,onFocusInTrap:l,onFocusoutPrevented:u,onReleaseRequested:c}=_C(t,n),{attributes:d,arrowRef:p,contentRef:h,styles:m,instanceRef:f,role:v,update:b}=TC(t),{ariaModal:w,arrowStyle:C,contentAttrs:T,contentClass:L,contentStyle:_,updateZIndex:D}=kC(t,{styles:m,attributes:d,role:v}),x=Je(ii,void 0),P=ee();gn(gh,{arrowStyle:C,arrowRef:p,arrowOffset:P}),x&&(x.addInputId||x.removeInputId)&&gn(ii,{...x,addInputId:ps,removeInputId:ps});let I;const V=(y=!0)=>{b(),y&&D()},g=()=>{V(!1),t.visible&&t.focusOnShow?i.value=!0:t.visible===!1&&(i.value=!1)};return Tt(()=>{ve(()=>t.triggerTargetEl,(y,S)=>{I==null||I(),I=void 0;const E=F(y||h.value),Z=F(S||h.value);ys(E)&&(I=ve([v,()=>t.ariaLabel,w,()=>t.id],R=>{["role","aria-label","aria-modal","id"].forEach((M,O)=>{Ua(R[O])?E.removeAttribute(M):E.setAttribute(M,R[O])})},{immediate:!0})),Z!==E&&ys(Z)&&["role","aria-label","aria-modal","id"].forEach(R=>{Z.removeAttribute(R)})},{immediate:!0}),ve(()=>t.visible,g,{immediate:!0})}),Cn(()=>{I==null||I(),I=void 0}),s({popperContentRef:h,popperInstanceRef:f,updatePopper:V,contentStyle:_}),(y,S)=>($(),me("div",$r({ref_key:"contentRef",ref:h},F(T),{style:F(_),class:F(L),tabindex:"-1",onMouseenter:S[0]||(S[0]=E=>y.$emit("mouseenter",E)),onMouseleave:S[1]||(S[1]=E=>y.$emit("mouseleave",E))}),[He(F(mC),{trapped:F(i),"trap-on-focus-in":!0,"focus-trap-el":F(h),"focus-start-el":F(e),onFocusAfterTrapped:F(o),onFocusAfterReleased:F(a),onFocusin:F(l),onFocusoutPrevented:F(u),onReleaseRequested:F(c)},{default:pe(()=>[Ke(y.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var EC=dt(DC,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const xC=Wn(Bw),tu=Symbol("elTooltip"),nu=ft({...l2,...Th,appendTo:{type:Ie([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:Ie(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),kh=ft({...Ch,disabled:Boolean,trigger:{type:Ie([String,Array]),default:"hover"},triggerKeys:{type:Ie(Array),default:()=>[Mi.enter,Mi.space]}}),{useModelToggleProps:FC,useModelToggleEmits:RC,useModelToggle:IC}=Qp("visible"),PC=ft({...bh,...FC,...nu,...kh,...Sh,showArrow:{type:Boolean,default:!0}}),MC=[...RC,"before-show","before-hide","show","hide","open","close"],XC=(r,s)=>vp(r)?r.includes(s):r===s,bi=(r,s,n)=>t=>{XC(F(r),s)&&n(t)},GC=_e({name:"ElTooltipTrigger"}),WC=_e({...GC,props:kh,setup(r,{expose:s}){const n=r,t=ct("tooltip"),{controlled:e,id:i,open:a,onOpen:o,onClose:l,onToggle:u}=Je(tu,void 0),c=ee(null),d=()=>{if(F(e)||n.disabled)return!0},p=dr(n,"trigger"),h=lr(d,bi(p,"hover",o)),m=lr(d,bi(p,"hover",l)),f=lr(d,bi(p,"click",T=>{T.button===0&&u(T)})),v=lr(d,bi(p,"focus",o)),b=lr(d,bi(p,"focus",l)),w=lr(d,bi(p,"contextmenu",T=>{T.preventDefault(),u(T)})),C=lr(d,T=>{const{code:L}=T;n.triggerKeys.includes(L)&&(T.preventDefault(),u(T))});return s({triggerRef:c}),(T,L)=>($(),Re(F(nC),{id:F(i),"virtual-ref":T.virtualRef,open:F(a),"virtual-triggering":T.virtualTriggering,class:se(F(t).e("trigger")),onBlur:F(b),onClick:F(f),onContextmenu:F(w),onFocus:F(v),onMouseenter:F(h),onMouseleave:F(m),onKeydown:F(C)},{default:pe(()=>[Ke(T.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var VC=dt(WC,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const AC=_e({name:"ElTooltipContent",inheritAttrs:!1}),NC=_e({...AC,props:nu,setup(r,{expose:s}){const n=r,{selector:t}=dh(),e=ct("tooltip"),i=ee(null),a=ee(!1),{controlled:o,id:l,open:u,trigger:c,onClose:d,onOpen:p,onShow:h,onHide:m,onBeforeShow:f,onBeforeHide:v}=Je(tu,void 0),b=W(()=>n.transition||`${e.namespace.value}-fade-in-linear`),w=W(()=>n.persistent);Cn(()=>{a.value=!0});const C=W(()=>F(w)?!0:F(u)),T=W(()=>n.disabled?!1:F(u)),L=W(()=>n.appendTo||t.value),_=W(()=>{var R;return(R=n.style)!=null?R:{}}),D=W(()=>!F(u)),x=()=>{m()},P=()=>{if(F(o))return!0},I=lr(P,()=>{n.enterable&&F(c)==="hover"&&p()}),V=lr(P,()=>{F(c)==="hover"&&d()}),g=()=>{var R,M;(M=(R=i.value)==null?void 0:R.updatePopper)==null||M.call(R),f==null||f()},y=()=>{v==null||v()},S=()=>{h(),Z=Dm(W(()=>{var R;return(R=i.value)==null?void 0:R.popperContentRef}),()=>{if(F(o))return;F(c)!=="hover"&&d()})},E=()=>{n.virtualTriggering||d()};let Z;return ve(()=>F(u),R=>{R||Z==null||Z()},{flush:"post"}),ve(()=>n.content,()=>{var R,M;(M=(R=i.value)==null?void 0:R.updatePopper)==null||M.call(R)}),s({contentRef:i}),(R,M)=>($(),Re(fm,{disabled:!R.teleported,to:F(L)},[He(hs,{name:F(b),onAfterLeave:x,onBeforeEnter:g,onAfterEnter:S,onBeforeLeave:y},{default:pe(()=>[F(C)?hr(($(),Re(F(EC),$r({key:0,id:F(l),ref_key:"contentRef",ref:i},R.$attrs,{"aria-label":R.ariaLabel,"aria-hidden":F(D),"boundaries-padding":R.boundariesPadding,"fallback-placements":R.fallbackPlacements,"gpu-acceleration":R.gpuAcceleration,offset:R.offset,placement:R.placement,"popper-options":R.popperOptions,strategy:R.strategy,effect:R.effect,enterable:R.enterable,pure:R.pure,"popper-class":R.popperClass,"popper-style":[R.popperStyle,F(_)],"reference-el":R.referenceEl,"trigger-target-el":R.triggerTargetEl,visible:F(T),"z-index":R.zIndex,onMouseenter:F(I),onMouseleave:F(V),onBlur:E,onClose:F(d)}),{default:pe(()=>[a.value?Ee("v-if",!0):Ke(R.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[Yi,F(T)]]):Ee("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var OC=dt(NC,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const YC=["innerHTML"],HC={key:1},KC=_e({name:"ElTooltip"}),UC=_e({...KC,props:PC,emits:MC,setup(r,{expose:s,emit:n}){const t=r;o2();const e=Ql(),i=ee(),a=ee(),o=()=>{var b;const w=F(i);w&&((b=w.popperInstanceRef)==null||b.update())},l=ee(!1),u=ee(),{show:c,hide:d,hasUpdateHandler:p}=IC({indicator:l,toggleReason:u}),{onOpen:h,onClose:m}=u2({showAfter:dr(t,"showAfter"),hideAfter:dr(t,"hideAfter"),autoClose:dr(t,"autoClose"),open:c,close:d}),f=W(()=>za(t.visible)&&!p.value);gn(tu,{controlled:f,id:e,open:mm(l),trigger:dr(t,"trigger"),onOpen:b=>{h(b)},onClose:b=>{m(b)},onToggle:b=>{F(l)?m(b):h(b)},onShow:()=>{n("show",u.value)},onHide:()=>{n("hide",u.value)},onBeforeShow:()=>{n("before-show",u.value)},onBeforeHide:()=>{n("before-hide",u.value)},updatePopper:o}),ve(()=>t.disabled,b=>{b&&l.value&&(l.value=!1)});const v=()=>{var b,w;const C=(w=(b=a.value)==null?void 0:b.contentRef)==null?void 0:w.popperContentRef;return C&&C.contains(document.activeElement)};return vm(()=>l.value&&d()),s({popperRef:i,contentRef:a,isFocusInsideContent:v,updatePopper:o,onOpen:h,onClose:m,hide:d}),(b,w)=>($(),Re(F(xC),{ref_key:"popperRef",ref:i,role:b.role},{default:pe(()=>[He(VC,{disabled:b.disabled,trigger:b.trigger,"trigger-keys":b.triggerKeys,"virtual-ref":b.virtualRef,"virtual-triggering":b.virtualTriggering},{default:pe(()=>[b.$slots.default?Ke(b.$slots,"default",{key:0}):Ee("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),He(OC,{ref_key:"contentRef",ref:a,"aria-label":b.ariaLabel,"boundaries-padding":b.boundariesPadding,content:b.content,disabled:b.disabled,effect:b.effect,enterable:b.enterable,"fallback-placements":b.fallbackPlacements,"hide-after":b.hideAfter,"gpu-acceleration":b.gpuAcceleration,offset:b.offset,persistent:b.persistent,"popper-class":b.popperClass,"popper-style":b.popperStyle,placement:b.placement,"popper-options":b.popperOptions,pure:b.pure,"raw-content":b.rawContent,"reference-el":b.referenceEl,"trigger-target-el":b.triggerTargetEl,"show-after":b.showAfter,strategy:b.strategy,teleported:b.teleported,transition:b.transition,"virtual-triggering":b.virtualTriggering,"z-index":b.zIndex,"append-to":b.appendTo},{default:pe(()=>[Ke(b.$slots,"content",{},()=>[b.rawContent?($(),me("span",{key:0,innerHTML:b.content},null,8,YC)):($(),me("span",HC,Ft(b.content),1))]),b.showArrow?($(),Re(F(Qw),{key:0,"arrow-offset":b.arrowOffset},null,8,["arrow-offset"])):Ee("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var zC=dt(UC,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const BC=Wn(zC),Fr=new Map;let zc;Ot&&(document.addEventListener("mousedown",r=>zc=r),document.addEventListener("mouseup",r=>{for(const s of Fr.values())for(const{documentHandler:n}of s)n(r,zc)}));function Bc(r,s){let n=[];return Array.isArray(s.arg)?n=s.arg:ys(s.arg)&&n.push(s.arg),function(t,e){const i=s.instance.popperRef,a=t.target,o=e==null?void 0:e.target,l=!s||!s.instance,u=!a||!o,c=r.contains(a)||r.contains(o),d=r===a,p=n.length&&n.some(m=>m==null?void 0:m.contains(a))||n.length&&n.includes(o),h=i&&(i.contains(a)||i.contains(o));l||u||c||d||p||h||s.value(t,e)}}const jC={beforeMount(r,s){Fr.has(r)||Fr.set(r,[]),Fr.get(r).push({documentHandler:Bc(r,s),bindingFn:s.value})},updated(r,s){Fr.has(r)||Fr.set(r,[]);const n=Fr.get(r),t=n.findIndex(i=>i.bindingFn===s.oldValue),e={documentHandler:Bc(r,s),bindingFn:s.value};t>=0?n.splice(t,1,e):n.push(e)},unmounted(r){Fr.delete(r)}},JC=ft({header:{type:String,default:""},bodyStyle:{type:Ie([String,Object,Array]),default:""},shadow:{type:String,values:["always","hover","never"],default:"always"}}),QC=_e({name:"ElCard"}),$C=_e({...QC,props:JC,setup(r){const s=ct("card");return(n,t)=>($(),me("div",{class:se([F(s).b(),F(s).is(`${n.shadow}-shadow`)])},[n.$slots.header||n.header?($(),me("div",{key:0,class:se(F(s).e("header"))},[Ke(n.$slots,"header",{},()=>[Na(Ft(n.header),1)])],2)):Ee("v-if",!0),ye("div",{class:se(F(s).e("body")),style:vt(n.bodyStyle)},[Ke(n.$slots,"default")],6)],2))}});var qC=dt($C,[["__file","/home/runner/work/element-plus/element-plus/packages/components/card/src/card.vue"]]);const eL=Wn(qC),_h=ft({type:{type:String,values:["success","info","warning","danger",""],default:""},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:{type:String,default:""},size:{type:String,values:Rs,default:""},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),tL={close:r=>r instanceof MouseEvent,click:r=>r instanceof MouseEvent},nL=_e({name:"ElTag"}),rL=_e({...nL,props:_h,emits:tL,setup(r,{emit:s}){const n=r,t=Ms(),e=ct("tag"),i=W(()=>{const{type:l,hit:u,effect:c,closable:d,round:p}=n;return[e.b(),e.is("closable",d),e.m(l),e.m(t.value),e.m(c),e.is("hit",u),e.is("round",p)]}),a=l=>{s("close",l)},o=l=>{s("click",l)};return(l,u)=>l.disableTransitions?($(),me("span",{key:0,class:se(F(i)),style:vt({backgroundColor:l.color}),onClick:o},[ye("span",{class:se(F(e).e("content"))},[Ke(l.$slots,"default")],2),l.closable?($(),Re(F(Pr),{key:0,class:se(F(e).e("close")),onClick:En(a,["stop"])},{default:pe(()=>[He(F(fc))]),_:1},8,["class","onClick"])):Ee("v-if",!0)],6)):($(),Re(hs,{key:1,name:`${F(e).namespace.value}-zoom-in-center`,appear:""},{default:pe(()=>[ye("span",{class:se(F(i)),style:vt({backgroundColor:l.color}),onClick:o},[ye("span",{class:se(F(e).e("content"))},[Ke(l.$slots,"default")],2),l.closable?($(),Re(F(Pr),{key:0,class:se(F(e).e("close")),onClick:En(a,["stop"])},{default:pe(()=>[He(F(fc))]),_:1},8,["class","onClick"])):Ee("v-if",!0)],6)]),_:3},8,["name"]))}});var iL=dt(rL,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]);const sL=Wn(iL),Zh=Symbol("rowContextKey"),aL=["start","center","end","space-around","space-between","space-evenly"],oL=["top","middle","bottom"],lL=ft({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:aL,default:"start"},align:{type:String,values:oL,default:"top"}}),uL=_e({name:"ElRow"}),cL=_e({...uL,props:lL,setup(r){const s=r,n=ct("row"),t=W(()=>s.gutter);gn(Zh,{gutter:t});const e=W(()=>{const a={};return s.gutter&&(a.marginRight=a.marginLeft=`-${s.gutter/2}px`),a}),i=W(()=>[n.b(),n.is(`justify-${s.justify}`,s.justify!=="start"),n.is(`align-${s.align}`,s.align!=="top")]);return(a,o)=>($(),Re(Kn(a.tag),{class:se(F(i)),style:vt(F(e))},{default:pe(()=>[Ke(a.$slots,"default")]),_:3},8,["class","style"]))}});var dL=dt(cL,[["__file","/home/runner/work/element-plus/element-plus/packages/components/row/src/row.vue"]]);const pL=Wn(dL),hL=ft({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:Ie([Number,Object]),default:()=>_i({})},sm:{type:Ie([Number,Object]),default:()=>_i({})},md:{type:Ie([Number,Object]),default:()=>_i({})},lg:{type:Ie([Number,Object]),default:()=>_i({})},xl:{type:Ie([Number,Object]),default:()=>_i({})}}),fL=_e({name:"ElCol"}),mL=_e({...fL,props:hL,setup(r){const s=r,{gutter:n}=Je(Zh,{gutter:W(()=>0)}),t=ct("col"),e=W(()=>{const a={};return n.value&&(a.paddingLeft=a.paddingRight=`${n.value/2}px`),a}),i=W(()=>{const a=[];return["span","offset","pull","push"].forEach(u=>{const c=s[u];cn(c)&&(u==="span"?a.push(t.b(`${s[u]}`)):c>0&&a.push(t.b(`${u}-${s[u]}`)))}),["xs","sm","md","lg","xl"].forEach(u=>{cn(s[u])?a.push(t.b(`${u}-${s[u]}`)):gr(s[u])&&Object.entries(s[u]).forEach(([c,d])=>{a.push(c!=="span"?t.b(`${u}-${c}-${d}`):t.b(`${u}-${d}`))})}),n.value&&a.push(t.is("guttered")),[t.b(),a]});return(a,o)=>($(),Re(Kn(a.tag),{class:se(F(i)),style:vt(F(e))},{default:pe(()=>[Ke(a.$slots,"default")]),_:3},8,["class","style"]))}});var vL=dt(mL,[["__file","/home/runner/work/element-plus/element-plus/packages/components/col/src/col.vue"]]);const jc=Wn(vL),Dh=Symbol("ElSelectGroup"),$a=Symbol("ElSelect");function yL(r,s){const n=Je($a),t=Je(Dh,{disabled:!1}),e=W(()=>Object.prototype.toString.call(r.value).toLowerCase()==="[object object]"),i=W(()=>n.props.multiple?d(n.props.modelValue,r.value):p(r.value,n.props.modelValue)),a=W(()=>{if(n.props.multiple){const f=n.props.modelValue||[];return!i.value&&f.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),o=W(()=>r.label||(e.value?"":r.value)),l=W(()=>r.value||r.label||""),u=W(()=>r.disabled||s.groupDisabled||a.value),c=Lr(),d=(f=[],v)=>{if(e.value){const b=n.props.valueKey;return f&&f.some(w=>ha(an(w,b))===an(v,b))}else return f&&f.includes(v)},p=(f,v)=>{if(e.value){const{valueKey:b}=n.props;return an(f,b)===an(v,b)}else return f===v},h=()=>{!r.disabled&&!t.disabled&&(n.hoverIndex=n.optionsArray.indexOf(c.proxy))};ve(()=>o.value,()=>{!r.created&&!n.props.remote&&n.setSelected()}),ve(()=>r.value,(f,v)=>{const{remote:b,valueKey:w}=n.props;if(Object.is(f,v)||(n.onOptionDestroy(v,c.proxy),n.onOptionCreate(c.proxy)),!r.created&&!b){if(w&&typeof f=="object"&&typeof v=="object"&&f[w]===v[w])return;n.setSelected()}}),ve(()=>t.disabled,()=>{s.groupDisabled=t.disabled},{immediate:!0});const{queryChange:m}=ha(n);return ve(m,f=>{const{query:v}=F(f),b=new RegExp(Yb(v),"i");s.visible=b.test(o.value)||r.created,s.visible||n.filteredOptionsCount--},{immediate:!0}),{select:n,currentLabel:o,currentValue:l,itemSelected:i,isDisabled:u,hoverItem:h}}const gL=_e({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},setup(r){const s=ct("select"),n=W(()=>[s.be("dropdown","item"),s.is("disabled",F(a)),{selected:F(i),hover:F(c)}]),t=zn({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:e,itemSelected:i,isDisabled:a,select:o,hoverItem:l}=yL(r,t),{visible:u,hover:c}=xs(t),d=Lr().proxy;o.onOptionCreate(d),Cn(()=>{const h=d.value,{selected:m}=o,v=(o.props.multiple?m:[m]).some(b=>b.value===d.value);rt(()=>{o.cachedOptions.get(h)===d&&!v&&o.cachedOptions.delete(h)}),o.onOptionDestroy(h,d)});function p(){r.disabled!==!0&&t.groupDisabled!==!0&&o.handleOptionSelect(d)}return{ns:s,containerKls:n,currentLabel:e,itemSelected:i,isDisabled:a,select:o,hoverItem:l,visible:u,hover:c,selectOptionClick:p,states:t}}});function bL(r,s,n,t,e,i){return hr(($(),me("li",{class:se(r.containerKls),onMouseenter:s[0]||(s[0]=(...a)=>r.hoverItem&&r.hoverItem(...a)),onClick:s[1]||(s[1]=En((...a)=>r.selectOptionClick&&r.selectOptionClick(...a),["stop"]))},[Ke(r.$slots,"default",{},()=>[ye("span",null,Ft(r.currentLabel),1)])],34)),[[Yi,r.visible]])}var ru=dt(gL,[["render",bL],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue"]]);const SL=_e({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const r=Je($a),s=ct("select"),n=W(()=>r.props.popperClass),t=W(()=>r.props.multiple),e=W(()=>r.props.fitInputWidth),i=ee("");function a(){var o;i.value=`${(o=r.selectWrapper)==null?void 0:o.offsetWidth}px`}return Tt(()=>{a(),Fs(r.selectWrapper,a)}),{ns:s,minWidth:i,popperClass:n,isMultiple:t,isFitInputWidth:e}}});function wL(r,s,n,t,e,i){return $(),me("div",{class:se([r.ns.b("dropdown"),r.ns.is("multiple",r.isMultiple),r.popperClass]),style:vt({[r.isFitInputWidth?"width":"minWidth"]:r.minWidth})},[Ke(r.$slots,"default")],6)}var CL=dt(SL,[["render",wL],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select-dropdown.vue"]]);function LL(r){const{t:s}=Nl();return zn({options:new Map,cachedOptions:new Map,createdLabel:null,createdSelected:!1,selected:r.multiple?[]:{},inputLength:20,inputWidth:0,optionsCount:0,filteredOptionsCount:0,visible:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:s("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,prefixWidth:11,mouseEnter:!1})}let To=!1;const TL=(r,s,n)=>{const{t}=Nl(),e=ct("select");Y1({from:"suffixTransition",replacement:"override style scheme",version:"2.3.0",scope:"props",ref:"https://element-plus.org/en-US/component/select.html#select-attributes"},W(()=>r.suffixTransition===!1));const i=ee(null),a=ee(null),o=ee(null),l=ee(null),u=ee(null),c=ee(null),d=ee(null),p=ee(null),h=ee(-1),m=Qr({query:""}),f=Qr(""),v=ee([]);let b=0;const{form:w,formItem:C}=hh(),T=W(()=>!r.filterable||r.multiple||!s.visible),L=W(()=>r.disabled||(w==null?void 0:w.disabled)),_=W(()=>{const X=r.multiple?Array.isArray(r.modelValue)&&r.modelValue.length>0:r.modelValue!==void 0&&r.modelValue!==null&&r.modelValue!=="";return r.clearable&&!L.value&&s.inputHovering&&X}),D=W(()=>r.remote&&r.filterable&&!r.remoteShowSuffix?"":r.suffixIcon),x=W(()=>e.is("reverse",D.value&&s.visible&&r.suffixTransition)),P=W(()=>r.remote?300:0),I=W(()=>r.loading?r.loadingText||t("el.select.loading"):r.remote&&s.query===""&&s.options.size===0?!1:r.filterable&&s.query&&s.options.size>0&&s.filteredOptionsCount===0?r.noMatchText||t("el.select.noMatch"):s.options.size===0?r.noDataText||t("el.select.noData"):null),V=W(()=>{const X=Array.from(s.options.values()),H=[];return v.value.forEach(ae=>{const xe=X.findIndex(_t=>_t.currentLabel===ae);xe>-1&&H.push(X[xe])}),H.length?H:X}),g=W(()=>Array.from(s.cachedOptions.values())),y=W(()=>{const X=V.value.filter(H=>!H.created).some(H=>H.currentLabel===s.query);return r.filterable&&r.allowCreate&&s.query!==""&&!X}),S=Ms(),E=W(()=>["small"].includes(S.value)?"small":"default"),Z=W({get(){return s.visible&&I.value!==!1},set(X){s.visible=X}});ve([()=>L.value,()=>S.value,()=>w==null?void 0:w.size],()=>{rt(()=>{R()})}),ve(()=>r.placeholder,X=>{s.cachedPlaceHolder=s.currentPlaceholder=X,r.multiple&&Array.isArray(r.modelValue)&&r.modelValue.length>0&&(s.currentPlaceholder="")}),ve(()=>r.modelValue,(X,H)=>{r.multiple&&(R(),X&&X.length>0||a.value&&s.query!==""?s.currentPlaceholder="":s.currentPlaceholder=s.cachedPlaceHolder,r.filterable&&!r.reserveKeyword&&(s.query="",M(s.query))),N(),r.filterable&&!r.multiple&&(s.inputLength=20),!hc(X,H)&&r.validateEvent&&(C==null||C.validate("change").catch(ae=>void 0))},{flush:"post",deep:!0}),ve(()=>s.visible,X=>{var H,ae,xe,_t,Mt;X?((ae=(H=l.value)==null?void 0:H.updatePopper)==null||ae.call(H),r.filterable&&(s.filteredOptionsCount=s.optionsCount,s.query=r.remote?"":s.selectedLabel,(_t=(xe=o.value)==null?void 0:xe.focus)==null||_t.call(xe),r.multiple?(Mt=a.value)==null||Mt.focus():s.selectedLabel&&(s.currentPlaceholder=`${s.selectedLabel}`,s.selectedLabel=""),M(s.query),!r.multiple&&!r.remote&&(m.value.query="",Qi(m),Qi(f)))):(r.filterable&&(ln(r.filterMethod)&&r.filterMethod(""),ln(r.remoteMethod)&&r.remoteMethod("")),a.value&&a.value.blur(),s.query="",s.previousQuery=null,s.selectedLabel="",s.inputLength=20,s.menuVisibleOnFocus=!1,B(),rt(()=>{a.value&&a.value.value===""&&s.selected.length===0&&(s.currentPlaceholder=s.cachedPlaceHolder)}),r.multiple||(s.selected&&(r.filterable&&r.allowCreate&&s.createdSelected&&s.createdLabel?s.selectedLabel=s.createdLabel:s.selectedLabel=s.selected.currentLabel,r.filterable&&(s.query=s.selectedLabel)),r.filterable&&(s.currentPlaceholder=s.cachedPlaceHolder))),n.emit("visible-change",X)}),ve(()=>s.options.entries(),()=>{var X,H,ae;if(!Ot)return;(H=(X=l.value)==null?void 0:X.updatePopper)==null||H.call(X),r.multiple&&R();const xe=((ae=d.value)==null?void 0:ae.querySelectorAll("input"))||[];Array.from(xe).includes(document.activeElement)||N(),r.defaultFirstOption&&(r.filterable||r.remote)&&s.filteredOptionsCount&&z()},{flush:"post"}),ve(()=>s.hoverIndex,X=>{cn(X)&&X>-1?h.value=V.value[X]||{}:h.value={},V.value.forEach(H=>{H.hover=h.value===H})});const R=()=>{rt(()=>{var X,H;if(!i.value)return;const ae=i.value.$el.querySelector("input");b=b||(ae.clientHeight>0?ae.clientHeight+2:0);const xe=c.value,_t=W1(S.value||(w==null?void 0:w.size)),Mt=S.value||_t===b||b<=0?_t:b;!(ae.offsetParent===null)&&(ae.style.height=`${(s.selected.length===0?Mt:Math.max(xe?xe.clientHeight+(xe.clientHeight>Mt?6:0):0,Mt))-2}px`),s.visible&&I.value!==!1&&((H=(X=l.value)==null?void 0:X.updatePopper)==null||H.call(X))})},M=async X=>{if(!(s.previousQuery===X||s.isOnComposition)){if(s.previousQuery===null&&(ln(r.filterMethod)||ln(r.remoteMethod))){s.previousQuery=X;return}s.previousQuery=X,rt(()=>{var H,ae;s.visible&&((ae=(H=l.value)==null?void 0:H.updatePopper)==null||ae.call(H))}),s.hoverIndex=-1,r.multiple&&r.filterable&&rt(()=>{const H=a.value.value.length*15+20;s.inputLength=r.collapseTags?Math.min(50,H):H,O(),R()}),r.remote&&ln(r.remoteMethod)?(s.hoverIndex=-1,r.remoteMethod(X)):ln(r.filterMethod)?(r.filterMethod(X),Qi(f)):(s.filteredOptionsCount=s.optionsCount,m.value.query=X,Qi(m),Qi(f)),r.defaultFirstOption&&(r.filterable||r.remote)&&s.filteredOptionsCount&&(await rt(),z())}},O=()=>{s.currentPlaceholder!==""&&(s.currentPlaceholder=a.value.value?"":s.cachedPlaceHolder)},z=()=>{const X=V.value.filter(xe=>xe.visible&&!xe.disabled&&!xe.states.groupDisabled),H=X.find(xe=>xe.created),ae=X[0];s.hoverIndex=hn(V.value,H||ae)},N=()=>{var X;if(r.multiple)s.selectedLabel="";else{const ae=ne(r.modelValue);(X=ae.props)!=null&&X.created?(s.createdLabel=ae.props.value,s.createdSelected=!0):s.createdSelected=!1,s.selectedLabel=ae.currentLabel,s.selected=ae,r.filterable&&(s.query=s.selectedLabel);return}const H=[];Array.isArray(r.modelValue)&&r.modelValue.forEach(ae=>{H.push(ne(ae))}),s.selected=H,rt(()=>{R()})},ne=X=>{let H;const ae=mo(X).toLowerCase()==="object",xe=mo(X).toLowerCase()==="null",_t=mo(X).toLowerCase()==="undefined";for(let nr=s.cachedOptions.size-1;nr>=0;nr--){const mn=g.value[nr];if(ae?an(mn.value,r.valueKey)===an(X,r.valueKey):mn.value===X){H={value:X,currentLabel:mn.currentLabel,isDisabled:mn.isDisabled};break}}if(H)return H;const Mt=ae?X.label:!xe&&!_t?X:"",tr={value:X,currentLabel:Mt};return r.multiple&&(tr.hitState=!1),tr},B=()=>{setTimeout(()=>{const X=r.valueKey;r.multiple?s.selected.length>0?s.hoverIndex=Math.min.apply(null,s.selected.map(H=>V.value.findIndex(ae=>an(ae,X)===an(H,X)))):s.hoverIndex=-1:s.hoverIndex=V.value.findIndex(H=>yi(H)===yi(s.selected))},300)},qe=()=>{var X,H;Xe(),(H=(X=l.value)==null?void 0:X.updatePopper)==null||H.call(X),r.multiple&&R()},Xe=()=>{var X;s.inputWidth=(X=i.value)==null?void 0:X.$el.offsetWidth},ze=()=>{r.filterable&&s.query!==s.selectedLabel&&(s.query=s.selectedLabel,M(s.query))},te=pc(()=>{ze()},P.value),oe=pc(X=>{M(X.target.value)},P.value),le=X=>{hc(r.modelValue,X)||n.emit(jp,X)},Ce=X=>{if(X.code!==Mi.delete){if(X.target.value.length<=0&&!Pt()){const H=r.modelValue.slice();H.pop(),n.emit(Fn,H),le(H)}X.target.value.length===1&&r.modelValue.length===0&&(s.currentPlaceholder=s.cachedPlaceHolder)}},Me=(X,H)=>{const ae=s.selected.indexOf(H);if(ae>-1&&!L.value){const xe=r.modelValue.slice();xe.splice(ae,1),n.emit(Fn,xe),le(xe),n.emit("remove-tag",H.value)}X.stopPropagation()},pt=X=>{X.stopPropagation();const H=r.multiple?[]:"";if(!Pn(H))for(const ae of s.selected)ae.isDisabled&&H.push(ae.value);n.emit(Fn,H),le(H),s.hoverIndex=-1,s.visible=!1,n.emit("clear")},Rt=X=>{var H;if(r.multiple){const ae=(r.modelValue||[]).slice(),xe=hn(ae,X.value);xe>-1?ae.splice(xe,1):(r.multipleLimit<=0||ae.length<r.multipleLimit)&&ae.push(X.value),n.emit(Fn,ae),le(ae),X.created&&(s.query="",M(""),s.inputLength=20),r.filterable&&((H=a.value)==null||H.focus())}else n.emit(Fn,X.value),le(X.value),s.visible=!1;Ln(),!s.visible&&rt(()=>{Lt(X)})},hn=(X=[],H)=>{if(!gr(H))return X.indexOf(H);const ae=r.valueKey;let xe=-1;return X.some((_t,Mt)=>ha(an(_t,ae))===an(H,ae)?(xe=Mt,!0):!1),xe},Ln=()=>{const X=a.value||i.value;X&&(X==null||X.focus())},Lt=X=>{var H,ae,xe,_t,Mt;const tr=Array.isArray(X)?X[0]:X;let nr=null;if(tr!=null&&tr.value){const mn=V.value.filter(Ys=>Ys.value===tr.value);mn.length>0&&(nr=mn[0].$el)}if(l.value&&nr){const mn=(_t=(xe=(ae=(H=l.value)==null?void 0:H.popperRef)==null?void 0:ae.contentRef)==null?void 0:xe.querySelector)==null?void 0:_t.call(xe,`.${e.be("dropdown","wrap")}`);mn&&Kb(mn,nr)}(Mt=p.value)==null||Mt.handleScroll()},fn=X=>{s.optionsCount++,s.filteredOptionsCount++,s.options.set(X.value,X),s.cachedOptions.set(X.value,X)},kt=(X,H)=>{s.options.get(X)===H&&(s.optionsCount--,s.filteredOptionsCount--,s.options.delete(X))},It=X=>{X.code!==Mi.backspace&&Pt(!1),s.inputLength=a.value.value.length*15+20,R()},Pt=X=>{if(!Array.isArray(s.selected))return;const H=s.selected[s.selected.length-1];if(H)return X===!0||X===!1?(H.hitState=X,X):(H.hitState=!H.hitState,H.hitState)},An=X=>{const H=X.target.value;if(X.type==="compositionend")s.isOnComposition=!1,rt(()=>M(H));else{const ae=H[H.length-1]||"";s.isOnComposition=!Jp(ae)}},er=()=>{rt(()=>Lt(s.selected))},_r=X=>{To?To=!1:((r.automaticDropdown||r.filterable)&&(r.filterable&&!s.visible&&(s.menuVisibleOnFocus=!0),s.visible=!0),n.emit("focus",X))},Nn=()=>{var X,H,ae;s.visible=!1,(X=i.value)==null||X.blur(),(ae=(H=o.value)==null?void 0:H.blur)==null||ae.call(H)},J=X=>{setTimeout(()=>{var H;if((H=l.value)!=null&&H.isFocusInsideContent()){To=!0;return}s.visible&&et(),n.emit("blur",X)})},we=X=>{pt(X)},et=()=>{s.visible=!1},en=X=>{s.visible&&(X.preventDefault(),X.stopPropagation(),s.visible=!1)},Or=X=>{var H;X&&!s.mouseEnter||L.value||(s.menuVisibleOnFocus?s.menuVisibleOnFocus=!1:(!l.value||!l.value.isFocusInsideContent())&&(s.visible=!s.visible),s.visible&&((H=a.value||i.value)==null||H.focus()))},po=()=>{s.visible?V.value[s.hoverIndex]&&Rt(V.value[s.hoverIndex]):Or()},yi=X=>gr(X.value)?an(X.value,r.valueKey):X.value,Ns=W(()=>V.value.filter(X=>X.visible).every(X=>X.disabled)),ho=W(()=>s.selected.slice(0,r.maxCollapseTags)),Ji=W(()=>s.selected.slice(r.maxCollapseTags)),Os=X=>{if(!s.visible){s.visible=!0;return}if(!(s.options.size===0||s.filteredOptionsCount===0)&&!s.isOnComposition&&!Ns.value){X==="next"?(s.hoverIndex++,s.hoverIndex===s.options.size&&(s.hoverIndex=0)):X==="prev"&&(s.hoverIndex--,s.hoverIndex<0&&(s.hoverIndex=s.options.size-1));const H=V.value[s.hoverIndex];(H.disabled===!0||H.states.groupDisabled===!0||!H.visible)&&Os(X),rt(()=>Lt(h.value))}};return{optionList:v,optionsArray:V,selectSize:S,handleResize:qe,debouncedOnInputChange:te,debouncedQueryChange:oe,deletePrevTag:Ce,deleteTag:Me,deleteSelected:pt,handleOptionSelect:Rt,scrollToOption:Lt,readonly:T,resetInputHeight:R,showClose:_,iconComponent:D,iconReverse:x,showNewOption:y,collapseTagSize:E,setSelected:N,managePlaceholder:O,selectDisabled:L,emptyText:I,toggleLastOptionHitState:Pt,resetInputState:It,handleComposition:An,onOptionCreate:fn,onOptionDestroy:kt,handleMenuEnter:er,handleFocus:_r,blur:Nn,handleBlur:J,handleClearClick:we,handleClose:et,handleKeydownEscape:en,toggleMenu:Or,selectOption:po,getValueKey:yi,navigateOptions:Os,handleDeleteTooltipTag:(X,H)=>{var ae,xe;Me(X,H),(xe=(ae=u.value)==null?void 0:ae.updatePopper)==null||xe.call(ae)},dropMenuVisible:Z,queryChange:m,groupQueryChange:f,showTagList:ho,collapseTagList:Ji,reference:i,input:a,iOSInput:o,tooltipRef:l,tagTooltipRef:u,tags:c,selectWrapper:d,scrollbar:p,handleMouseEnter:()=>{s.mouseEnter=!0},handleMouseLeave:()=>{s.mouseEnter=!1}}};var kL=_e({name:"ElOptions",emits:["update-options"],setup(r,{slots:s,emit:n}){let t=[];function e(i,a){if(i.length!==a.length)return!1;for(const[o]of i.entries())if(i[o]!=a[o])return!1;return!0}return()=>{var i,a;const o=(i=s.default)==null?void 0:i.call(s),l=[];function u(c){Array.isArray(c)&&c.forEach(d=>{var p,h,m,f;const v=(p=(d==null?void 0:d.type)||{})==null?void 0:p.name;v==="ElOptionGroup"?u(!Pn(d.children)&&!Array.isArray(d.children)&&ln((h=d.children)==null?void 0:h.default)?(m=d.children)==null?void 0:m.default():d.children):v==="ElOption"?l.push((f=d.props)==null?void 0:f.label):Array.isArray(d.children)&&u(d.children)})}return o.length&&u((a=o[0])==null?void 0:a.children),e(l,t)||(t=l,n("update-options",l)),o}}});const Jc="ElSelect",_L=_e({name:Jc,componentName:Jc,components:{ElInput:vh,ElSelectMenu:CL,ElOption:ru,ElOptions:kL,ElTag:sL,ElScrollbar:Hw,ElTooltip:BC,ElIcon:Pr},directives:{ClickOutside:jC},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:V1},effect:{type:String,default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},maxCollapseTags:{type:Number,default:1},teleported:nu.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:Sa,default:Vl},fitInputWidth:{type:Boolean,default:!1},suffixIcon:{type:Sa,default:Qb},tagType:{..._h.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:{type:Boolean,default:!1},suffixTransition:{type:Boolean,default:!0},placement:{type:String,values:ja,default:"bottom-start"}},emits:[Fn,jp,"remove-tag","clear","visible-change","focus","blur"],setup(r,s){const n=ct("select"),t=ct("input"),{t:e}=Nl(),i=LL(r),{optionList:a,optionsArray:o,selectSize:l,readonly:u,handleResize:c,collapseTagSize:d,debouncedOnInputChange:p,debouncedQueryChange:h,deletePrevTag:m,deleteTag:f,deleteSelected:v,handleOptionSelect:b,scrollToOption:w,setSelected:C,resetInputHeight:T,managePlaceholder:L,showClose:_,selectDisabled:D,iconComponent:x,iconReverse:P,showNewOption:I,emptyText:V,toggleLastOptionHitState:g,resetInputState:y,handleComposition:S,onOptionCreate:E,onOptionDestroy:Z,handleMenuEnter:R,handleFocus:M,blur:O,handleBlur:z,handleClearClick:N,handleClose:ne,handleKeydownEscape:B,toggleMenu:qe,selectOption:Xe,getValueKey:ze,navigateOptions:te,handleDeleteTooltipTag:oe,dropMenuVisible:le,reference:Ce,input:Me,iOSInput:pt,tooltipRef:Rt,tagTooltipRef:hn,tags:Ln,selectWrapper:Lt,scrollbar:fn,queryChange:kt,groupQueryChange:It,handleMouseEnter:Pt,handleMouseLeave:An,showTagList:er,collapseTagList:_r}=TL(r,i,s),{focus:Nn}=H1(Ce),{inputWidth:J,selected:we,inputLength:et,filteredOptionsCount:en,visible:Or,selectedLabel:po,hoverIndex:yi,query:Ns,inputHovering:ho,currentPlaceholder:Ji,menuVisibleOnFocus:Os,isOnComposition:ku,options:fo,cachedOptions:_u,optionsCount:X,prefixWidth:H}=xs(i),ae=W(()=>{const tn=[n.b()],Yr=F(l);return Yr&&tn.push(n.m(Yr)),r.disabled&&tn.push(n.m("disabled")),tn}),xe=W(()=>[n.e("tags"),n.is("disabled",F(D))]),_t=W(()=>[n.b("tags-wrapper"),{"has-prefix":F(H)&&F(we).length}]),Mt=W(()=>[n.e("input"),n.is(F(l)),n.is("disabled",F(D))]),tr=W(()=>[n.e("input"),n.is(F(l)),n.em("input","iOS")]),nr=W(()=>[n.is("empty",!r.allowCreate&&!!F(Ns)&&F(en)===0)]),mn=W(()=>({maxWidth:`${F(J)-32}px`,width:"100%"})),Ys=W(()=>({maxWidth:`${F(J)>123?F(J)-123:F(J)-75}px`})),em=W(()=>({marginLeft:`${F(H)}px`,flexGrow:1,width:`${F(et)/(F(J)-32)}%`,maxWidth:`${F(J)-42}px`}));gn($a,zn({props:r,options:fo,optionsArray:o,cachedOptions:_u,optionsCount:X,filteredOptionsCount:en,hoverIndex:yi,handleOptionSelect:b,onOptionCreate:E,onOptionDestroy:Z,selectWrapper:Lt,selected:we,setSelected:C,queryChange:kt,groupQueryChange:It})),Tt(()=>{i.cachedPlaceHolder=Ji.value=r.placeholder||(()=>e("el.select.placeholder")),r.multiple&&Array.isArray(r.modelValue)&&r.modelValue.length>0&&(Ji.value=""),Fs(Lt,c),r.remote&&r.multiple&&T(),rt(()=>{const tn=Ce.value&&Ce.value.$el;if(tn&&(J.value=tn.getBoundingClientRect().width,s.slots.prefix)){const Yr=tn.querySelector(`.${t.e("prefix")}`);H.value=Math.max(Yr.getBoundingClientRect().width+11,30)}}),C()}),r.multiple&&!Array.isArray(r.modelValue)&&s.emit(Fn,[]),!r.multiple&&Array.isArray(r.modelValue)&&s.emit(Fn,"");const tm=W(()=>{var tn,Yr;return(Yr=(tn=Rt.value)==null?void 0:tn.popperRef)==null?void 0:Yr.contentRef});return{isIOS:bp,onOptionsRendered:tn=>{a.value=tn},prefixWidth:H,selectSize:l,readonly:u,handleResize:c,collapseTagSize:d,debouncedOnInputChange:p,debouncedQueryChange:h,deletePrevTag:m,deleteTag:f,handleDeleteTooltipTag:oe,deleteSelected:v,handleOptionSelect:b,scrollToOption:w,inputWidth:J,selected:we,inputLength:et,filteredOptionsCount:en,visible:Or,selectedLabel:po,hoverIndex:yi,query:Ns,inputHovering:ho,currentPlaceholder:Ji,menuVisibleOnFocus:Os,isOnComposition:ku,options:fo,resetInputHeight:T,managePlaceholder:L,showClose:_,selectDisabled:D,iconComponent:x,iconReverse:P,showNewOption:I,emptyText:V,toggleLastOptionHitState:g,resetInputState:y,handleComposition:S,handleMenuEnter:R,handleFocus:M,blur:O,handleBlur:z,handleClearClick:N,handleClose:ne,handleKeydownEscape:B,toggleMenu:qe,selectOption:Xe,getValueKey:ze,navigateOptions:te,dropMenuVisible:le,focus:Nn,reference:Ce,input:Me,iOSInput:pt,tooltipRef:Rt,popperPaneRef:tm,tags:Ln,selectWrapper:Lt,scrollbar:fn,wrapperKls:ae,tagsKls:xe,tagWrapperKls:_t,inputKls:Mt,iOSInputKls:tr,scrollbarKls:nr,selectTagsStyle:mn,nsSelect:n,tagTextStyle:Ys,inputStyle:em,handleMouseEnter:Pt,handleMouseLeave:An,showTagList:er,collapseTagList:_r,tagTooltipRef:hn}}}),ZL=["disabled","autocomplete"],DL=["disabled"],EL={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}};function xL(r,s,n,t,e,i){const a=or("el-tag"),o=or("el-tooltip"),l=or("el-icon"),u=or("el-input"),c=or("el-option"),d=or("el-options"),p=or("el-scrollbar"),h=or("el-select-menu"),m=ym("click-outside");return hr(($(),me("div",{ref:"selectWrapper",class:se(r.wrapperKls),onMouseenter:s[21]||(s[21]=(...f)=>r.handleMouseEnter&&r.handleMouseEnter(...f)),onMouseleave:s[22]||(s[22]=(...f)=>r.handleMouseLeave&&r.handleMouseLeave(...f)),onClick:s[23]||(s[23]=En((...f)=>r.toggleMenu&&r.toggleMenu(...f),["stop"]))},[He(o,{ref:"tooltipRef",visible:r.dropMenuVisible,placement:r.placement,teleported:r.teleported,"popper-class":[r.nsSelect.e("popper"),r.popperClass],"popper-options":r.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:r.effect,pure:"",trigger:"click",transition:`${r.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:r.persistent,onShow:r.handleMenuEnter},{default:pe(()=>[ye("div",{class:"select-trigger",onMouseenter:s[19]||(s[19]=f=>r.inputHovering=!0),onMouseleave:s[20]||(s[20]=f=>r.inputHovering=!1)},[r.multiple?($(),me("div",{key:0,ref:"tags",class:se(r.tagsKls),style:vt(r.selectTagsStyle)},[r.collapseTags&&r.selected.length?($(),Re(hs,{key:0,onAfterLeave:r.resetInputHeight},{default:pe(()=>[ye("span",{class:se(r.tagWrapperKls)},[($(!0),me(In,null,aa(r.showTagList,f=>($(),Re(a,{key:r.getValueKey(f),closable:!r.selectDisabled&&!f.isDisabled,size:r.collapseTagSize,hit:f.hitState,type:r.tagType,"disable-transitions":"",onClose:v=>r.deleteTag(v,f)},{default:pe(()=>[ye("span",{class:se(r.nsSelect.e("tags-text")),style:vt(r.tagTextStyle)},Ft(f.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128)),r.selected.length>r.maxCollapseTags?($(),Re(a,{key:0,closable:!1,size:r.collapseTagSize,type:r.tagType,"disable-transitions":""},{default:pe(()=>[r.collapseTagsTooltip?($(),Re(o,{key:0,ref:"tagTooltipRef",disabled:r.dropMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:r.effect,placement:"bottom",teleported:r.teleported},{default:pe(()=>[ye("span",{class:se(r.nsSelect.e("tags-text"))},"+ "+Ft(r.selected.length-r.maxCollapseTags),3)]),content:pe(()=>[ye("div",{class:se(r.nsSelect.e("collapse-tags"))},[($(!0),me(In,null,aa(r.collapseTagList,f=>($(),me("div",{key:r.getValueKey(f),class:se(r.nsSelect.e("collapse-tag"))},[He(a,{class:"in-tooltip",closable:!r.selectDisabled&&!f.isDisabled,size:r.collapseTagSize,hit:f.hitState,type:r.tagType,"disable-transitions":"",style:{margin:"2px"},onClose:v=>r.handleDeleteTooltipTag(v,f)},{default:pe(()=>[ye("span",{class:se(r.nsSelect.e("tags-text")),style:vt({maxWidth:r.inputWidth-75+"px"})},Ft(f.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):($(),me("span",{key:1,class:se(r.nsSelect.e("tags-text"))},"+ "+Ft(r.selected.length-r.maxCollapseTags),3))]),_:1},8,["size","type"])):Ee("v-if",!0)],2)]),_:1},8,["onAfterLeave"])):Ee("v-if",!0),r.collapseTags?Ee("v-if",!0):($(),Re(hs,{key:1,onAfterLeave:r.resetInputHeight},{default:pe(()=>[ye("span",{class:se(r.tagWrapperKls),style:vt(r.prefixWidth&&r.selected.length?{marginLeft:`${r.prefixWidth}px`}:"")},[($(!0),me(In,null,aa(r.selected,f=>($(),Re(a,{key:r.getValueKey(f),closable:!r.selectDisabled&&!f.isDisabled,size:r.collapseTagSize,hit:f.hitState,type:r.tagType,"disable-transitions":"",onClose:v=>r.deleteTag(v,f)},{default:pe(()=>[ye("span",{class:se(r.nsSelect.e("tags-text")),style:vt({maxWidth:r.inputWidth-75+"px"})},Ft(f.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],6)]),_:1},8,["onAfterLeave"])),r.filterable&&!r.selectDisabled?hr(($(),me("input",{key:2,ref:"input","onUpdate:modelValue":s[0]||(s[0]=f=>r.query=f),type:"text",class:se(r.inputKls),disabled:r.selectDisabled,autocomplete:r.autocomplete,style:vt(r.inputStyle),onFocus:s[1]||(s[1]=(...f)=>r.handleFocus&&r.handleFocus(...f)),onBlur:s[2]||(s[2]=(...f)=>r.handleBlur&&r.handleBlur(...f)),onKeyup:s[3]||(s[3]=(...f)=>r.managePlaceholder&&r.managePlaceholder(...f)),onKeydown:[s[4]||(s[4]=(...f)=>r.resetInputState&&r.resetInputState(...f)),s[5]||(s[5]=Tn(En(f=>r.navigateOptions("next"),["prevent"]),["down"])),s[6]||(s[6]=Tn(En(f=>r.navigateOptions("prev"),["prevent"]),["up"])),s[7]||(s[7]=Tn((...f)=>r.handleKeydownEscape&&r.handleKeydownEscape(...f),["esc"])),s[8]||(s[8]=Tn(En((...f)=>r.selectOption&&r.selectOption(...f),["stop","prevent"]),["enter"])),s[9]||(s[9]=Tn((...f)=>r.deletePrevTag&&r.deletePrevTag(...f),["delete"])),s[10]||(s[10]=Tn(f=>r.visible=!1,["tab"]))],onCompositionstart:s[11]||(s[11]=(...f)=>r.handleComposition&&r.handleComposition(...f)),onCompositionupdate:s[12]||(s[12]=(...f)=>r.handleComposition&&r.handleComposition(...f)),onCompositionend:s[13]||(s[13]=(...f)=>r.handleComposition&&r.handleComposition(...f)),onInput:s[14]||(s[14]=(...f)=>r.debouncedQueryChange&&r.debouncedQueryChange(...f))},null,46,ZL)),[[gm,r.query]]):Ee("v-if",!0)],6)):Ee("v-if",!0),Ee(" fix: https://github.com/element-plus/element-plus/issues/11415 "),r.isIOS&&!r.multiple&&r.filterable&&r.readonly?($(),me("input",{key:1,ref:"iOSInput",class:se(r.iOSInputKls),disabled:r.selectDisabled,type:"text"},null,10,DL)):Ee("v-if",!0),He(u,{id:r.id,ref:"reference",modelValue:r.selectedLabel,"onUpdate:modelValue":s[15]||(s[15]=f=>r.selectedLabel=f),type:"text",placeholder:typeof r.currentPlaceholder=="function"?r.currentPlaceholder():r.currentPlaceholder,name:r.name,autocomplete:r.autocomplete,size:r.selectSize,disabled:r.selectDisabled,readonly:r.readonly,"validate-event":!1,class:se([r.nsSelect.is("focus",r.visible)]),tabindex:r.multiple&&r.filterable?-1:void 0,onFocus:r.handleFocus,onBlur:r.handleBlur,onInput:r.debouncedOnInputChange,onPaste:r.debouncedOnInputChange,onCompositionstart:r.handleComposition,onCompositionupdate:r.handleComposition,onCompositionend:r.handleComposition,onKeydown:[s[16]||(s[16]=Tn(En(f=>r.navigateOptions("next"),["stop","prevent"]),["down"])),s[17]||(s[17]=Tn(En(f=>r.navigateOptions("prev"),["stop","prevent"]),["up"])),Tn(En(r.selectOption,["stop","prevent"]),["enter"]),Tn(r.handleKeydownEscape,["esc"]),s[18]||(s[18]=Tn(f=>r.visible=!1,["tab"]))]},bm({suffix:pe(()=>[r.iconComponent&&!r.showClose?($(),Re(l,{key:0,class:se([r.nsSelect.e("caret"),r.nsSelect.e("icon"),r.iconReverse])},{default:pe(()=>[($(),Re(Kn(r.iconComponent)))]),_:1},8,["class"])):Ee("v-if",!0),r.showClose&&r.clearIcon?($(),Re(l,{key:1,class:se([r.nsSelect.e("caret"),r.nsSelect.e("icon")]),onClick:r.handleClearClick},{default:pe(()=>[($(),Re(Kn(r.clearIcon)))]),_:1},8,["class","onClick"])):Ee("v-if",!0)]),_:2},[r.$slots.prefix?{name:"prefix",fn:pe(()=>[ye("div",EL,[Ke(r.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])],32)]),content:pe(()=>[He(h,null,{default:pe(()=>[hr(He(p,{ref:"scrollbar",tag:"ul","wrap-class":r.nsSelect.be("dropdown","wrap"),"view-class":r.nsSelect.be("dropdown","list"),class:se(r.scrollbarKls)},{default:pe(()=>[r.showNewOption?($(),Re(c,{key:0,value:r.query,created:!0},null,8,["value"])):Ee("v-if",!0),He(d,{onUpdateOptions:r.onOptionsRendered},{default:pe(()=>[Ke(r.$slots,"default")]),_:3},8,["onUpdateOptions"])]),_:3},8,["wrap-class","view-class","class"]),[[Yi,r.options.size>0&&!r.loading]]),r.emptyText&&(!r.allowCreate||r.loading||r.allowCreate&&r.options.size===0)?($(),me(In,{key:0},[r.$slots.empty?Ke(r.$slots,"empty",{key:0}):($(),me("p",{key:1,class:se(r.nsSelect.be("dropdown","empty"))},Ft(r.emptyText),3))],64)):Ee("v-if",!0)]),_:3})]),_:3},8,["visible","placement","teleported","popper-class","popper-options","effect","transition","persistent","onShow"])],34)),[[m,r.handleClose,r.popperPaneRef]])}var FL=dt(_L,[["render",xL],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select.vue"]]);const RL=_e({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},setup(r){const s=ct("select"),n=ee(!0),t=Lr(),e=ee([]);gn(Dh,zn({...xs(r)}));const i=Je($a);Tt(()=>{e.value=a(t.subTree)});const a=l=>{const u=[];return Array.isArray(l.children)&&l.children.forEach(c=>{var d;c.type&&c.type.name==="ElOption"&&c.component&&c.component.proxy?u.push(c.component.proxy):(d=c.children)!=null&&d.length&&u.push(...a(c))}),u},{groupQueryChange:o}=ha(i);return ve(o,()=>{n.value=e.value.some(l=>l.visible===!0)},{flush:"post"}),{visible:n,ns:s}}});function IL(r,s,n,t,e,i){return hr(($(),me("ul",{class:se(r.ns.be("group","wrap"))},[ye("li",{class:se(r.ns.be("group","title"))},Ft(r.label),3),ye("li",null,[ye("ul",{class:se(r.ns.b("group"))},[Ke(r.$slots,"default")],2)])],2)),[[Yi,r.visible]])}var Eh=dt(RL,[["render",IL],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option-group.vue"]]);const PL=Wn(FL,{Option:ru,OptionGroup:Eh}),ML=Al(ru);Al(Eh);function Qc(r,s){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);s&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),n.push.apply(n,t)}return n}function ht(r){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?Qc(Object(n),!0).forEach(function(t){K(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Qc(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ht(r){"@babel/helpers - typeof";return Ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ht(r)}function ue(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function $c(r,s){for(var n=0;n<s.length;n++){var t=s[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,xh(t.key),t)}}function ce(r,s,n){return s&&$c(r.prototype,s),n&&$c(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function K(r,s,n){return s=xh(s),s in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n,r}function be(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&sl(r,s)}function fe(r){return fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fe(r)}function sl(r,s){return sl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sl(r,s)}function XL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function iu(r,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A(r)}function Se(r){var s=XL();return function(){var t=fe(r),e;if(s){var i=fe(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return iu(this,e)}}function GL(r,s){for(;!Object.prototype.hasOwnProperty.call(r,s)&&(r=fe(r),r!==null););return r}function ge(){return typeof Reflect<"u"&&Reflect.get?ge=Reflect.get.bind():ge=function(s,n,t){var e=GL(s,n);if(e){var i=Object.getOwnPropertyDescriptor(e,n);return i.get?i.get.call(arguments.length<3?s:t):i.value}},ge.apply(this,arguments)}function Xr(r){return WL(r)||VL(r)||AL(r)||NL()}function WL(r){if(Array.isArray(r))return al(r)}function VL(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function AL(r,s){if(r){if(typeof r=="string")return al(r,s);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return al(r,s)}}function al(r,s){(s==null||s>r.length)&&(s=r.length);for(var n=0,t=new Array(s);n<s;n++)t[n]=r[n];return t}function NL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OL(r,s){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var t=n.call(r,s||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}function xh(r){var s=OL(r,"string");return typeof s=="symbol"?s:String(s)}var Fh={exports:{}};(function(r){var s=Object.prototype.hasOwnProperty,n="~";function t(){}Object.create&&(t.prototype=Object.create(null),new t().__proto__||(n=!1));function e(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function i(l,u,c,d,p){if(typeof c!="function")throw new TypeError("The listener must be a function");var h=new e(c,d||l,p),m=n?n+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],h]:l._events[m].push(h):(l._events[m]=h,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new t:delete l._events[u]}function o(){this._events=new t,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)s.call(c,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=n?n+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var p=0,h=d.length,m=new Array(h);p<h;p++)m[p]=d[p].fn;return m},o.prototype.listenerCount=function(u){var c=n?n+u:u,d=this._events[c];return d?d.fn?1:d.length:0},o.prototype.emit=function(u,c,d,p,h,m){var f=n?n+u:u;if(!this._events[f])return!1;var v=this._events[f],b=arguments.length,w,C;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,d),!0;case 4:return v.fn.call(v.context,c,d,p),!0;case 5:return v.fn.call(v.context,c,d,p,h),!0;case 6:return v.fn.call(v.context,c,d,p,h,m),!0}for(C=1,w=new Array(b-1);C<b;C++)w[C-1]=arguments[C];v.fn.apply(v.context,w)}else{var T=v.length,L;for(C=0;C<T;C++)switch(v[C].once&&this.removeListener(u,v[C].fn,void 0,!0),b){case 1:v[C].fn.call(v[C].context);break;case 2:v[C].fn.call(v[C].context,c);break;case 3:v[C].fn.call(v[C].context,c,d);break;case 4:v[C].fn.call(v[C].context,c,d,p);break;default:if(!w)for(L=1,w=new Array(b-1);L<b;L++)w[L-1]=arguments[L];v[C].fn.apply(v[C].context,w)}}return!0},o.prototype.on=function(u,c,d){return i(this,u,c,d,!1)},o.prototype.once=function(u,c,d){return i(this,u,c,d,!0)},o.prototype.removeListener=function(u,c,d,p){var h=n?n+u:u;if(!this._events[h])return this;if(!c)return a(this,h),this;var m=this._events[h];if(m.fn)m.fn===c&&(!p||m.once)&&(!d||m.context===d)&&a(this,h);else{for(var f=0,v=[],b=m.length;f<b;f++)(m[f].fn!==c||p&&!m[f].once||d&&m[f].context!==d)&&v.push(m[f]);v.length?this._events[h]=v.length===1?v[0]:v:a(this,h)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&a(this,c)):(this._events=new t,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,r.exports=o})(Fh);var YL=Fh.exports;const qn=Aa(YL);var HL=typeof window<"u"&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,ko={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},_o="%c[xgplayer]",We={config:{debug:HL?3:0},logInfo:function(s){for(var n,t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];this.config.debug>=3&&(n=console).log.apply(n,[_o,ko.info,s].concat(e))},logWarn:function(s){for(var n,t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];this.config.debug>=1&&(n=console).warn.apply(n,[_o,ko.warn,s].concat(e))},logError:function(s){var n;if(!(this.config.debug<1)){for(var t=this.config.debug>=2?"trace":"error",e=arguments.length,i=new Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];(n=console)[t].apply(n,[_o,ko.error,s].concat(i))}}};function KL(r){r.logInfo=We.logInfo.bind(r),r.logWarn=We.logWarn.bind(r),r.logError=We.logError.bind(r)}var UL=function(){function r(s){ue(this,r),this.bufferedList=s}return ce(r,[{key:"start",value:function(n){return this.bufferedList[n].start}},{key:"end",value:function(n){return this.bufferedList[n].end}},{key:"length",get:function(){return this.bufferedList.length}}]),r}(),k={};k.createDom=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",e=document.createElement(r);return e.className=t,e.innerHTML=s,Object.keys(n).forEach(function(i){var a=i,o=n[i];r==="video"||r==="audio"||r==="live-video"?o&&e.setAttribute(a,o):e.setAttribute(a,o)}),e};k.createDomFromHtml=function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";try{var t=document.createElement("div");t.innerHTML=r;var e=t.children;return t=null,e.length>0?(e=e[0],n&&k.addClass(e,n),s&&Object.keys(s).forEach(function(i){e.setAttribute(i,s[i])}),e):null}catch(i){return We.logError("util.createDomFromHtml",i),null}};k.hasClass=function(r,s){if(!r||!s)return!1;try{return Array.prototype.some.call(r.classList,function(t){return t===s})}catch{var n=r.className&&Ht(r.className)==="object"?r.getAttribute("class"):r.className;return n&&!!n.match(new RegExp("(\\s|^)"+s+"(\\s|$)"))}};k.addClass=function(r,s){if(!(!r||!s))try{s.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(n){n&&r.classList.add(n)})}catch{k.hasClass(r,s)||(r.className&&Ht(r.className)==="object"?r.setAttribute("class",r.getAttribute("class")+" "+s):r.className+=" "+s)}};k.removeClass=function(r,s){if(!(!r||!s))try{s.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(n){n&&r.classList.remove(n)})}catch{k.hasClass(r,s)&&s.split(/\s+/g).forEach(function(t){var e=new RegExp("(\\s|^)"+t+"(\\s|$)");r.className&&Ht(r.className)==="object"?r.setAttribute("class",r.getAttribute("class").replace(e," ")):r.className=r.className.replace(e," ")})}};k.toggleClass=function(r,s){r&&s.split(/\s+/g).forEach(function(n){k.hasClass(r,n)?k.removeClass(r,n):k.addClass(r,n)})};k.classNames=function(){for(var r=arguments,s=[],n=function(i){k.typeOf(r[i])==="String"?s.push(r[i]):k.typeOf(r[i])==="Object"&&Object.keys(r[i]).map(function(a){r[i][a]&&s.push(a)})},t=0;t<arguments.length;t++)n(t);return s.join(" ")};k.findDom=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,s=arguments.length>1?arguments[1]:void 0,n;try{n=r.querySelector(s)}catch(t){We.logError("util.findDom",t),s.indexOf("#")===0&&(n=r.getElementById(s.slice(1)))}return n};k.getCss=function(r,s){return r.currentStyle?r.currentStyle[s]:document.defaultView.getComputedStyle(r,!1)[s]};k.padStart=function(r,s,n){for(var t=String(n),e=s>>0,i=Math.ceil(e/t.length),a=[],o=String(r);i--;)a.push(t);return a.join("").substring(0,e-o.length)+o};k.format=function(r){if(window.isNaN(r))return"";r=Math.round(r);var s=k.padStart(Math.floor(r/3600),2,0),n=k.padStart(Math.floor((r-s*3600)/60),2,0),t=k.padStart(Math.floor(r-s*3600-n*60),2,0);return(s==="00"?[n,t]:[s,n,t]).join(":")};k.event=function(r){if(r.touches){var s=r.touches[0]||r.changedTouches[0];r.clientX=s.clientX||0,r.clientY=s.clientY||0,r.offsetX=s.pageX-s.target.offsetLeft,r.offsetY=s.pageY-s.target.offsetTop}r._target=r.target||r.srcElement};k.typeOf=function(r){return Object.prototype.toString.call(r).match(/([^\s.*]+)(?=]$)/g)[0]};k.deepCopy=function(r,s){if(k.typeOf(s)==="Object"&&k.typeOf(r)==="Object")return Object.keys(s).forEach(function(n){k.typeOf(s[n])==="Object"&&!(s[n]instanceof Node)?r[n]===void 0||r[n]===void 0?r[n]=s[n]:k.deepCopy(r[n],s[n]):k.typeOf(s[n])==="Array"?r[n]=k.typeOf(r[n])==="Array"?r[n].concat(s[n]):s[n]:r[n]=s[n]}),r};k.deepMerge=function(r,s){return Object.keys(s).map(function(n){if(k.typeOf(s[n])==="Array"&&k.typeOf(r[n])==="Array"){if(k.typeOf(r[n])==="Array"){var t;(t=r[n]).push.apply(t,Xr(s[n]))}}else k.typeOf(r[n])===k.typeOf(s[n])&&r[n]!==null&&k.typeOf(r[n])==="Object"&&!(s[n]instanceof window.Node)?k.deepMerge(r[n],s[n]):s[n]!==null&&(r[n]=s[n])}),r};k.getBgImage=function(r){var s=(r.currentStyle||window.getComputedStyle(r,null)).backgroundImage;if(!s||s==="none")return"";var n=document.createElement("a");return n.href=s.replace(/url\("|"\)/g,""),n.href};k.copyDom=function(r){if(r&&r.nodeType===1){var s=document.createElement(r.tagName);return Array.prototype.forEach.call(r.attributes,function(n){s.setAttribute(n.name,n.value)}),r.innerHTML&&(s.innerHTML=r.innerHTML),s}else return""};k.setInterval=function(r,s,n,t){r._interval[s]||(r._interval[s]=window.setInterval(n.bind(r),t))};k.clearInterval=function(r,s){clearInterval(r._interval[s]),r._interval[s]=null};k.setTimeout=function(r,s,n){r._timers||(r._timers=[]);var t=setTimeout(function(){s(),k.clearTimeout(r,t)},n);return r._timers.push(t),t};k.clearTimeout=function(r,s){var n=r._timers;if(k.typeOf(n)==="Array"){for(var t=0;t<n.length;t++)if(n[t]===s){n.splice(t,1),clearTimeout(s);break}}else clearTimeout(s)};k.clearAllTimers=function(r){var s=r._timers;k.typeOf(s)==="Array"&&(s.map(function(n){clearTimeout(n)}),r._timerIds=[])};k.createImgBtn=function(r,s,n,t){var e=k.createDom("xg-".concat(r),"",{},"xgplayer-".concat(r,"-img"));if(e.style.backgroundImage='url("'.concat(s,'")'),n&&t){var i,a,o;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(l){return n.indexOf(l)>-1&&t.indexOf(l)>-1?(i=parseFloat(n.slice(0,n.indexOf(l)).trim()),a=parseFloat(t.slice(0,t.indexOf(l)).trim()),o=l,!1):!0}),e.style.width="".concat(i).concat(o),e.style.height="".concat(a).concat(o),e.style.backgroundSize="".concat(i).concat(o," ").concat(a).concat(o),r==="start"?e.style.margin="-".concat(a/2).concat(o," auto auto -").concat(i/2).concat(o):e.style.margin="auto 5px auto 5px"}return e};k.Hex2RGBA=function(r,s){var n=[];if(/^\#[0-9A-F]{3}$/i.test(r)){var t="#";r.replace(/[0-9A-F]/ig,function(e){t+=e+e}),r=t}return/^#[0-9A-F]{6}$/i.test(r)?(r.replace(/[0-9A-F]{2}/ig,function(e){n.push(parseInt(e,16))}),"rgba(".concat(n.join(","),", ").concat(s,")")):"rgba(255, 255, 255, 0.1)"};k.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement};k.checkIsFunction=function(r){return r&&typeof r=="function"};k.checkIsObject=function(r){return r!==null&&Ht(r)==="object"};k.hide=function(r){r.style.display="none"};k.show=function(r,s){r.style.display=s||"block"};k.isUndefined=function(r){if(typeof r>"u"||r===null)return!0};k.isNotNull=function(r){return r!=null};k.setStyleFromCsstext=function(r,s){if(s)if(k.typeOf(s)==="String"){var n=s.replace(/\s+/g,"").split(";");n.map(function(t){if(t){var e=t.split(":");e.length>1&&(r.style[e[0]]=e[1])}})}else Object.keys(s).map(function(t){r.style[t]=s[t]})};function zL(r,s){for(var n=0,t=s.length;n<t;n++)if(r.indexOf(s[n])>-1)return!0;return!1}k.filterStyleFromText=function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],n=r.style.cssText;if(!n)return{};var t=n.replace(/\s+/g,"").split(";"),e={},i={};return t.map(function(a){if(a){var o=a.split(":");o.length>1&&(zL(o[0],s)?e[o[0]]=o[1]:i[o[0]]=o[1])}}),r.setAttribute("style",""),Object.keys(i).map(function(a){r.style[a]=i[a]}),e};k.getStyleFromCsstext=function(r){var s=r.style.cssText;if(!s)return{};var n=s.replace(/\s+/g,"").split(";"),t={};return n.map(function(e){if(e){var i=e.split(":");i.length>1&&(t[i[0]]=i[1])}}),t};k.preloadImg=function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(r){var t=new window.Image;t.onload=function(e){t=null,s&&s(e)},t.onerror=function(e){t=null,n&&n(e)},t.src=r}};k.stopPropagation=function(r){r&&r.stopPropagation()};k.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0};k.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};k.checkTouchSupport=function(){return"ontouchstart"in window};k.getBuffered2=function(r){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,n=[],t=0;t<r.length;t++)n.push({start:r.start(t)<.5?0:r.start(t),end:r.end(t)});n.sort(function(l,u){var c=l.start-u.start;return c||u.end-l.end});var e=[];if(s)for(var i=0;i<n.length;i++){var a=e.length;if(a){var o=e[a-1].end;n[i].start-o<s?n[i].end>o&&(e[a-1].end=n[i].end):e.push(n[i])}else e.push(n[i])}else e=n;return new UL(e)};k.getEventPos=function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return r.touches&&r.touches.length>0&&(r=r.touches[0]),{x:r.x/s,y:r.y/s,clientX:r.clientX/s,clientY:r.clientY/s,offsetX:r.offsetX/s,offsetY:r.offsetY/s,pageX:r.pageX/s,pageY:r.pageY/s}};k.requestAnimationFrame=function(r){var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(s)return s(r)};k.getHostFromUrl=function(r){if(k.typeOf(r)!=="String")return"";var s=r.split("/"),n="";return s.length>3&&s[2]&&(n=s[2]),n};k.cancelAnimationFrame=function(r){var s=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;s&&s(r)};k.isMSE=function(r){return!r||!(r instanceof HTMLMediaElement)?!1:/^blob/.test(r.currentSrc)||/^blob/.test(r.src)};k.generateSessionId=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=new Date().getTime();try{r=parseInt(r)}catch{r=0}s+=r,window.performance&&typeof window.performance.now=="function"&&(s+=parseInt(window.performance.now()));var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(s+Math.random()*16)%16|0;return s=Math.floor(s/16),(t==="x"?e:e&3|8).toString(16)});return n};k.createEvent=function(r){var s;return typeof window.Event=="function"?s=new Event(r):(s=document.createEvent("Event"),s.initEvent(r,!0,!0)),s};k.adjustTimeByDuration=function(r,s,n){return!s||!r?r:r>s||n&&r<s?s:r};k.createPositionBar=function(r,s){var n=k.createDom("xg-bar","",{"data-index":-1},r);return s.appendChild(n),n};k.getTransformStyle=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{x:0,y:0,scale:1,rotate:0};return"scale(".concat(r.scale||1,") translate(").concat(r.x||0,"%, ").concat(r.y||0,"%) rotate(").concat(r.rotate||0,"deg)")};k.convertDeg=function(r){return Math.abs(r)<=1?r*360:r%360};function Rh(r){var s=Ht(r);return r!==null&&(s==="object"||s==="function")}function BL(r,s,n){var t,e,i,a,o,l,u=0,c=!1,d=!1,p=!0,h=!s&&s!==0&&typeof window.requestAnimationFrame=="function";if(typeof r!="function")throw new TypeError("Expected a function");s=+s||0,Rh(n)&&(c=!!n.leading,d="maxWait"in n,i=d?Math.max(+n.maxWait||0,s):i,p="trailing"in n?!!n.trailing:p);function m(I){var V=t,g=e;return t=e=void 0,u=I,a=r.apply(g,V),a}function f(I,V){return h?(window.cancelAnimationFrame(o),window.requestAnimationFrame(I)):setTimeout(I,V)}function v(I){if(h)return window.cancelAnimationFrame(I);clearTimeout(I)}function b(I){return u=I,o=f(T,s),c?m(I):a}function w(I){var V=I-l,g=I-u,y=s-V;return d?Math.min(y,i-g):y}function C(I){var V=I-l,g=I-u;return l===void 0||V>=s||V<0||d&&g>=i}function T(){var I=Date.now();if(C(I))return L(I);o=f(T,w(I))}function L(I){return o=void 0,p&&t?m(I):(t=e=void 0,a)}function _(){o!==void 0&&v(o),u=0,t=l=e=o=void 0}function D(){return o===void 0?a:L(Date.now())}function x(){return o!==void 0}function P(){for(var I=Date.now(),V=C(I),g=arguments.length,y=new Array(g),S=0;S<g;S++)y[S]=arguments[S];if(t=y,e=this,l=I,V){if(o===void 0)return b(l);if(d)return o=f(T,s),m(l)}return o===void 0&&(o=f(T,s)),a}return P.cancel=_,P.flush=D,P.pending=x,P}function jL(r,s,n){var t=!0,e=!0;if(typeof r!="function")throw new TypeError("Expected a function");return Rh(n)&&(t="leading"in n?!!n.leading:t,e="trailing"in n?!!n.trailing:e),BL(r,s,{leading:t,trailing:e,maxWait:s})}function JL(){var r=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return r==="zh-cn"&&(r="zh"),r}function QL(r,s,n){if(r){var t=r.getAttribute(n);return!!(t&&t===s&&(r.tagName==="VIDEO"||r.tagName==="AUDIO"))}}var qc={android:/(Android)\s([\d.]+)/,ios:/(Version)\/([\d.]+)/},$L=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],Te={get device(){var r=Te.os;return r.isPc?"pc":"mobile"},get browser(){if(typeof navigator>"u")return"";var r=navigator.userAgent.toLowerCase(),s={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(s).filter(function(n){return s[n].test(r)}))[0]},get os(){if(typeof navigator>"u")return{};var r=navigator.userAgent,s=/(?:Windows Phone)/.test(r),n=/(?:SymbianOS)/.test(r)||s,t=/(?:Android)/.test(r),e=/(?:Firefox)/.test(r),i=/(?:iPad|PlayBook)/.test(r)||t&&!/(?:Mobile)/.test(r)||e&&/(?:Tablet)/.test(r),a=/(?:iPhone)/.test(r)&&!i,o=!a&&!t&&!n&&!i,l=/(?:iPad|PlayBook)/.test(r);return{isTablet:i,isPhone:a,isIpad:l,isIos:a||l,isAndroid:t,isPc:o,isSymbian:n,isWindowsPhone:s,isFireFox:e}},get osVersion(){if(typeof navigator>"u")return 0;var r=navigator.userAgent,s="";/(?:iPhone)|(?:iPad|PlayBook)/.test(r)?s=qc.ios:s=qc.android;var n=s?s.exec(r):[];if(n&&n.length>=3){var t=n[2].split(".");return t.length>0?parseInt(t[0]):0}return 0},get isWeixin(){if(typeof navigator>"u")return!1;var r=/(micromessenger)\/([\d.]+)/,s=r.exec(navigator.userAgent.toLocaleLowerCase());return!!s},isSupportMP4:function(){var s={isSupport:!1,mime:""};if(typeof document>"u")return s;if(this.supportResult)return this.supportResult;var n=document.createElement("video");return typeof n.canPlayType=="function"&&$L.map(function(t){n.canPlayType('video/mp4; codecs="'.concat(t,'"'))==="probably"&&(s.isSupport=!0,s.mime+="||".concat(t))}),this.supportResult=s,n=null,s},isMSESupport:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if(typeof MediaSource>"u"||!MediaSource)return!1;try{return MediaSource.isTypeSupported(s)}catch(n){return this._logger.error(s,n),!1}},isHevcSupported:function(){return typeof MediaSource>"u"||!MediaSource.isTypeSupported?!1:MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"')},probeConfigSupported:function(s){var n={supported:!1,smooth:!1,powerEfficient:!1};if(!s||typeof navigator>"u")return Promise.resolve(n);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(s);var t=s.video||{},e=s.audio||{};try{var i=MediaSource.isTypeSupported(t.contentType),a=MediaSource.isTypeSupported(e.contentType);return Promise.resolve({supported:i&&a,smooth:!1,powerEfficient:!1})}catch{return Promise.resolve(n)}}},ol="3.0.7",ed={1:"media",2:"media",3:"media",4:"media",5:"media",6:"media"},td={1:5101,2:5102,3:5103,4:5104,5:5105,6:5106},Un=ce(function r(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};ue(this,r);var t=s&&s.i18n?s.i18n.ERROR_TYPES:null;if(s.media){var e=n.mediaError?n.mediaError:s.media.error||{},i=s.duration,a=s.currentTime,o=s.ended,l=s.src,u=s.currentSrc,c=s.media,d=c.readyState,p=c.networkState,h=n.errorCode||e.code;td[h]&&(h=td[h]);var m={playerVersion:ol,currentTime:a,duration:i,ended:o,readyState:d,networkState:p,src:l||u,errorType:n.errorType,errorCode:h,message:n.errorMessage||e.message,mediaError:e,originError:n.originError?n.originError.stack:"",host:k.getHostFromUrl(l||u)};return n.ext&&Object.keys(n.ext).map(function(w){m[w]=n.ext[w]}),m}else if(arguments.length>1){for(var f={playerVersion:ol,domain:document.domain},v=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],b=0;b<arguments.length;b++)f[v[b]]=arguments[b];return f.ex=t?(t[arguments[0]]||{}).msg:"",f}}),wn="play",su="playing",hi="ended",Ui="pause",fi="error",Fi="seeking",Gr="seeked",Mn="timeupdate",si="waiting",pr="canplay",qL="canplaythrough",mi="durationchange",Ih="volumechange",ai="loadeddata",Ph="ratechange",Mh="progress",au="loadstart",zi="emptied",eT="stalled",tT="suspend",nT="abort",rT="bufferedChange",ou="focus",Xh="blur",lu="ready",Gh="urlNull",ti="autoplay_started",uu="autoplay_was_prevented",qa="complete",cu="replay",Gs="destroy",mr="urlchange",Wh="download_speed_change",ur="fullscreen_change",Ca="cssFullscreen_change",La="mini_state_change",eo="definition_change",iT="before_definition_change",Ta="after_definition_change",sT="SEI_PARSED",aT="retry",oi="video_resize",ll="pip_change",Vh="rotate",Ah="screenShot",ka="playnext",Nh="shortcut",Oh="xglog",_a="user_action",to="reset",Yh="source_error",Hh="source_success",Kh="switch_subtitle",Uh=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],zh={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},Bh="fps_stuck";const oT=Object.freeze(Object.defineProperty({__proto__:null,ABORT:nT,AFTER_DEFINITION_CHANGE:Ta,AUTOPLAY_PREVENTED:uu,AUTOPLAY_STARTED:ti,BEFORE_DEFINITION_CHANGE:iT,BUFFER_CHANGE:rT,CANPLAY:pr,CANPLAY_THROUGH:qL,COMPLETE:qa,CSS_FULLSCREEN_CHANGE:Ca,DEFINITION_CHANGE:eo,DESTROY:Gs,DOWNLOAD_SPEED_CHANGE:Wh,DURATION_CHANGE:mi,EMPTIED:zi,ENDED:hi,ERROR:fi,FPS_STUCK:Bh,FULLSCREEN_CHANGE:ur,LOADED_DATA:ai,LOAD_START:au,MINI_STATE_CHANGE:La,PAUSE:Ui,PIP_CHANGE:ll,PLAY:wn,PLAYER_BLUR:Xh,PLAYER_FOCUS:ou,PLAYING:su,PLAYNEXT:ka,PROGRESS:Mh,RATE_CHANGE:Ph,READY:lu,REPLAY:cu,RESET:to,RETRY:aT,ROTATE:Vh,SCREEN_SHOT:Ah,SEEKED:Gr,SEEKING:Fi,SEI_PARSED:sT,SHORTCUT:Nh,SOURCE_ERROR:Yh,SOURCE_SUCCESS:Hh,STALLED:eT,STATS_EVENTS:zh,SUSPEND:tT,SWITCH_SUBTITLE:Kh,TIME_UPDATE:Mn,URL_CHANGE:mr,URL_NULL:Gh,USER_ACTION:_a,VIDEO_EVENTS:Uh,VIDEO_RESIZE:oi,VOLUME_CHANGE:Ih,WAITING:si,XGLOG:Oh},Symbol.toStringTag,{value:"Module"}));function Zo(r,s){!this||!this.emit||(r==="error"?this.errorHandler(r,s.error):this.emit(r,s))}function lT(r,s){return function(n,t){var e={player:s,eventName:r,originalEvent:n,detail:n.detail||{},timeStamp:n.timeStamp,currentTime:s.currentTime,duration:s.duration,paused:s.paused,ended:s.ended,isInternalOp:!!s._internalOp[n.type],muted:s.muted,volume:s.volume,host:k.getHostFromUrl(s.currentSrc),vtype:s.vtype};if(s.removeInnerOP(n.type),r==="timeupdate"&&(s._currentTime=s.media&&s.media.currentTime),r==="ratechange"){var i=s.media?s.media.playbackRate:0;if(i&&s._rate===i)return;s._rate=s.media&&s.media.playbackRate}if(r==="durationchange"&&(s._duration=s.media.duration),r==="volumechange"&&(e.isMutedChange=s._lastMuted!==s.muted,s._lastMuted=s.muted),r==="error"&&(e.error=t||s.video.error),s.mediaEventMiddleware[r]){var a=Zo.bind(s,r,e);try{s.mediaEventMiddleware[r].call(s,e,a)}catch(o){throw Zo.call(s,r,e),o}}else Zo.call(s,r,e)}}var uT=function(r){be(n,r);var s=Se(n);function n(t){var e;ue(this,n),e=s.call(this,t),e._hasStart=!1,e._currentTime=0,e._duration=0,e._internalOp={},e._lastMuted=!1,e.vtype="MP4",e._rate=-1,e.mediaConfig=Object.assign({},{controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"x5-playsinline":t.playsinline,"webkit-playsinline":t.playsinline,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:t.tabindex|0,mediaType:t.mediaType||"video","data-index":-1},t.videoConfig,t.videoAttributes);var i=t["x5-video-player-type"]||t.x5VideoPlayerType;return Te.isWeixin&&Te.os.isAndroid&&i&&(e.mediaConfig["x5-video-player-type"]=i,delete e.mediaConfig.playsinline,delete e.mediaConfig["webkit-playsinline"],delete e.mediaConfig["x5-playsinline"]),t.loop&&(e.mediaConfig.loop="loop"),e.media=k.createDom(e.mediaConfig.mediaType,"",e.mediaConfig,""),t.defaultPlaybackRate&&(e.media.defaultPlaybackRate=e.media.playbackRate=t.defaultPlaybackRate),k.typeOf(t.volume)==="Number"&&(e.volume=t.volume),t.autoplayMuted&&(e.media.muted=!0,e._lastMuted=!0),t.autoplay&&(e.media.autoplay=!0),e._interval={},e.mediaEventMiddleware={},e.attachVideoEvents(),e}return ce(n,[{key:"setEventsMiddleware",value:function(e){var i=this;Object.keys(e).map(function(a){i.mediaEventMiddleware[a]=e[a]})}},{key:"removeEventsMiddleware",value:function(e){var i=this;Object.keys(e).map(function(a){delete i.mediaEventMiddleware[a]})}},{key:"attachVideoEvents",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers||(this._evHandlers=Uh.map(function(a){var o="on".concat(a.charAt(0).toUpperCase()).concat(a.slice(1));return typeof e[o]=="function"&&e.on(a,e[o]),K({},a,lT(a,e))})),this._evHandlers.forEach(function(a){var o=Object.keys(a)[0];i.addEventListener(o,a[o],!1)})}},{key:"detachVideoEvents",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers.forEach(function(a){var o=Object.keys(a)[0];i.removeEventListener(o,a[o],!1)}),this._evHandlers.forEach(function(a){var o=Object.keys(a)[0],l="on".concat(o.charAt(0).toUpperCase()).concat(o.slice(1));typeof e[l]=="function"&&e.off(o,e[l])}),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,i){var a=this;e.removeAttribute("src"),e.load(),i.forEach(function(d){a.media.appendChild(k.createDom("source","",{src:"".concat(d.src),type:"".concat(d.type||"")}))});var o=e.children;if(o){this._videoSourceCount=o.length,this._vLoadeddata=function(d){a.emit(Hh,{src:d.target.currentSrc,host:k.getHostFromUrl(d.target.currentSrc)})};for(var l=null,u=0;u<this._evHandlers.length;u++)if(Object.keys(this._evHandlers[u])[0]==="error"){l=this._evHandlers[u];break}!this._sourceError&&(this._sourceError=function(d){if(a._videoSourceCount--,a._videoSourceCount===0){var p={code:4,message:"sources_load_error"};l?l.error(d,p):a.errorHandler("error",p)}var h=ed[4];a.emit(Yh,new Un(a,{errorType:h,errorCode:4,errorMessage:"sources_load_error",mediaError:{code:4,message:"sources_load_error"},src:d.target.src}))});for(var c=0;c<o.length;c++)o[c].addEventListener("error",this._sourceError);e.addEventListener("loadeddata",this._vLoadeddata)}}},{key:"_detachSourceEvents",value:function(e){var i=e.children;if(!(!i||i.length===0||!this._sourceError)){for(var a=0;a<i.length;a++)i[a].removeEventListener("error",this._sourceError);for(;i.length>0;)e.removeChild(i[0]);this._vLoadeddata&&e.removeEventListener("loadeddata",this._vLoadeddata)}}},{key:"errorHandler",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.media&&(this.media.error||i)){var a=this.media.error||i,o=a.code?ed[a.code]:"other",l=a.message;this.media.currentSrc||(l="empty_src",a={code:6,message:l}),this.emit(e,new Un(this,{errorType:o,errorCode:a.code,errorMessage:a.message||"",mediaError:a}))}}},{key:"destroy",value:function(){this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null;for(var e in this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media},set:function(e){this.media=e}},{key:"play",value:function(){var e=this.media?this.media.play():null;return e}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return this.media?this.media.canPlayType(e):!1}},{key:"getBufferedRange",value:function(e){var i=[0,0];if(!this.media)return i;e||(e=this.media.buffered);var a=this.media.currentTime;if(e)for(var o=0,l=e.length;o<l&&(i[0]=e.start(o),i[1]=e.end(o),!(i[0]<=a&&a<=i[1]));o++);return i[0]-a<=0&&a-i[1]<=0?i:[0,0]}},{key:"autoplay",get:function(){return this.media?this.media.autoplay:!1},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?k.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var i=this.media.buffered;if(!i||i.length===0)return e;for(var a=0;a<i.length;a++)if((i.start(a)<=this.currentTime||i.start(a)<.1)&&i.end(a)>=this.currentTime)return{start:i.start(a),end:i.end(a)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?this.media.currentTime!==void 0?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return this.media?this.media.defaultMuted:!1},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.media?this.media.ended:!1}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){var e=this.media.error;if(!e)return"";var i=["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];return i[this.media.error.code-1]}},{key:"loop",get:function(){return this.media?this.media.loop:!1},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return this.media?this.media.muted:!1},set:function(e){!this.media||this.media.muted===e||(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkState}},{key:"paused",get:function(){return this.media?this.media.paused:!0}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){!this.media||e===1/0||(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return this.media?this.media.preload:!1},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return this.media?this.media.seekable:!1}},{key:"seeking",get:function(){return this.media?this.media.seeking:!1}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){if(this.media){if(this.emit(mr,e),this.emit(si),this._currentTime=0,this._duration=0,/^blob/.test(this.media.currentSrc)||/^blob/.test(this.media.src)){this.onWaiting();return}this._detachSourceEvents(this.media),k.typeOf(e)==="Array"?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()}}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e===1/0||!this.media||(this.media.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,i){for(var a,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];(a=ge(fe(n.prototype),"emit",this)).call.apply(a,[this,e,i].concat(l))}},{key:"on",value:function(e,i){for(var a,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];(a=ge(fe(n.prototype),"on",this)).call.apply(a,[this,e,i].concat(l))}},{key:"once",value:function(e,i){for(var a,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];(a=ge(fe(n.prototype),"once",this)).call.apply(a,[this,e,i].concat(l))}},{key:"off",value:function(e,i){for(var a,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];(a=ge(fe(n.prototype),"off",this)).call.apply(a,[this,e,i].concat(l))}},{key:"offAll",value:function(){ge(fe(n.prototype),"removeAllListeners",this).call(this)}}]),n}(qn),cT=function(){function r(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};ue(this,r),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=s}return ce(r,[{key:"openDB",value:function(n){var t=this,e=this,i=this.myDB.version||1,a=e.indexedDB.open(e.myDB.name,i);a.onerror=function(o){},a.onsuccess=function(o){t.myDB.db=o.target.result,n.call(e)},a.onupgradeneeded=function(o){var l=o.target.result;o.target.transaction,l.objectStoreNames.contains(e.myDB.ojstore.name)||l.createObjectStore(e.myDB.ojstore.name,{keyPath:e.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){var n=this;n.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(n,t){for(var e=this.myDB.db.transaction(n,"readwrite").objectStore(n),i,a=0;a<t.length;a++)i=e.add(t[a]),i.onerror=function(){},i.onsuccess=function(){}}},{key:"putData",value:function(n,t){for(var e=this.myDB.db.transaction(n,"readwrite").objectStore(n),i,a=0;a<t.length;a++)i=e.put(t[a]),i.onerror=function(){},i.onsuccess=function(){}}},{key:"getDataByKey",value:function(n,t,e){var i=this,a=this.myDB.db.transaction(n,"readwrite").objectStore(n),o=a.get(t);o.onerror=function(){e.call(i,null)},o.onsuccess=function(l){var u=l.target.result;e.call(i,u)}}},{key:"deleteData",value:function(n,t){var e=this.myDB.db.transaction(n,"readwrite").objectStore(n);e.delete(t)}},{key:"clearData",value:function(n){var t=this.myDB.db.transaction(n,"readwrite").objectStore(n);t.clear()}}]),r}(),nd=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],rd=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],id=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],zr="data-xgplayerid";function Qs(r,s,n){for(var t=arguments.length,e=new Array(t>3?t-3:0),i=3;i<t;i++)e[i-3]=arguments[i];var a=s.call.apply(s,[r].concat(e));!n||typeof n!="function"||(a&&a.then?a.then(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];n.call.apply(n,[r].concat(l))}):n.call.apply(n,[r].concat(e)))}function Za(r,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[r]&&(this.__hooks[r]=null),(function(){var t=arguments,e=this;if(n.pre)try{var i;(i=n.pre).call.apply(i,[this].concat(Array.prototype.slice.call(arguments)))}catch(l){throw l.message="[pluginName: ".concat(this.pluginName,":").concat(r,":pre error] >> ").concat(l.message),l}if(this.__hooks&&this.__hooks[r])try{var a,o=(a=this.__hooks[r]).call.apply(a,[this,this].concat(Array.prototype.slice.call(arguments)));o?o.then?o.then(function(l){l!==!1&&Qs.apply(void 0,[e,s,n.next].concat(Xr(t)))}).catch(function(l){throw l}):Qs.apply(void 0,[this,s,n.next].concat(Array.prototype.slice.call(arguments))):o===void 0&&Qs.apply(void 0,[this,s,n.next].concat(Array.prototype.slice.call(arguments)))}catch(l){throw l.message="[pluginName: ".concat(this.pluginName,":").concat(r,"] >> ").concat(l.message),l}else Qs.apply(void 0,[this,s,n.next].concat(Array.prototype.slice.call(arguments)))}).bind(this)}function Da(r,s){var n=this.__hooks;if(n)return n.hasOwnProperty(r)?(n&&(n[r]=s),!0):(console.warn("has no supported hook which name [".concat(r,"]")),!1)}function Ea(r,s){var n=this.__hooks;n&&delete n[r]}function sd(r){if(!(!this.plugins||!this.plugins[r.toLowerCase()])){for(var s=this.plugins[r.toLowerCase()],n=arguments.length,t=new Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];return s.useHooks&&s.useHooks.apply(s,t)}}function ad(r){if(!(!this.plugins||!this.plugins[r.toLowerCase()])){var s=this.plugins[r.toLowerCase()];if(s){for(var n=arguments.length,t=new Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];return s.removeHooks&&s.removeHooks.apply(s,t)}}}function jh(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];r.__hooks={},s&&s.map(function(n){r.__hooks[n]=null}),Object.defineProperty(r,"hooks",{get:function(){return r.__hooks&&Object.keys(r.__hooks).map(function(t){if(r.__hooks[t])return t})}})}function Jh(r){r.__hooks=null}function cr(r,s,n){for(var t=arguments.length,e=new Array(t>3?t-3:0),i=3;i<t;i++)e[i-3]=arguments[i];if(r.__hooks&&r.__hooks[s]){var a,o=(a=r.__hooks[s]).call.apply(a,[r,r].concat(e));if(o&&o.then)o.then(function(l){return l===!1?null:n.call.apply(n,[r,r].concat(e))}).catch(function(l){console.warn("[runHooks]".concat(s," reject"),l.message)});else if(o!==!1)return n.call.apply(n,[r,r].concat(e))}else return n.call.apply(n,[r,r].concat(e))}function Do(r,s){We.logError("[".concat(r,"] event or callback cant be undefined or null when call ").concat(s))}var pn=function(){function r(s){ue(this,r),k.checkIsFunction(this.beforeCreate)&&this.beforeCreate(s),jh(this),this.__args=s,this.__events={},this.__onceEvents={},this.config=s.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(s)}return ce(r,[{key:"beforeCreate",value:function(n){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(n){this.player=n.player,this.playerConfig=n.player&&n.player.config,this.pluginName=n.pluginName?n.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=n.player&&n.player.logger}},{key:"updateLang",value:function(n){n||(n=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var n=k.checkTouchSupport()?"touch":"mouse";return this.playerConfig&&(this.playerConfig.domEventType==="touch"||this.playerConfig.domEventType==="mouse")&&(n=this.playerConfig.domEventType),n}},{key:"on",value:function(n,t){var e=this;if(!n||!t||!this.player){Do(this.pluginName,"plugin.on(event, callback)");return}typeof n=="string"?(this.__events[n]=t,this.player.on(n,t)):Array.isArray(n)&&n.forEach(function(i){e.__events[i]=t,e.player.on(i,t)})}},{key:"once",value:function(n,t){var e=this;if(!n||!t||!this.player){Do(this.pluginName,"plugin.once(event, callback)");return}typeof n=="string"?(this.__onceEvents[n]=t,this.player.once(n,t)):Array.isArray(n)&&n.forEach(function(i){e.__onceEvents[i]=t,e.player.once(n,t)})}},{key:"off",value:function(n,t){var e=this;if(!n||!t||!this.player){Do(this.pluginName,"plugin.off(event, callback)");return}typeof n=="string"?(delete this.__events[n],this.player.off(n,t)):Array.isArray(n)&&n.forEach(function(i){delete e.__events[n],e.player.off(i,t)})}},{key:"offAll",value:function(){var n=this;["__events","__onceEvents"].forEach(function(t){Object.keys(n[t]).forEach(function(e){n[t][e]&&n.off(e,n[t][e]),e&&delete n[t][e]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(n){var t;if(this.player){for(var e=arguments.length,i=new Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];(t=this.player).emit.apply(t,[n].concat(i))}}},{key:"emitUserAction",value:function(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.player){var i=ht(ht({},e),{},{pluginName:this.pluginName});this.player.emitUserAction(n,t,i)}}},{key:"hook",value:function(n,t){return Za.call.apply(Za,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(n,t){for(var e=arguments.length,i=new Array(e>2?e-2:0),a=2;a<e;a++)i[a-2]=arguments[a];return Da.call.apply(Da,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(n,t){for(var e=arguments.length,i=new Array(e>2?e-2:0),a=2;a<e;a++)i[a-2]=arguments[a];return Ea.call.apply(Ea,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(this.player)return e&&(t.pluginName=e),this.player.registerPlugin({plugin:n,options:t})}},{key:"getPlugin",value:function(n){return this.player?this.player.getPlugin(n):null}},{key:"__destroy",value:function(){var n=this,t=this.player,e=this.pluginName;this.offAll(),k.clearAllTimers(this),k.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(i){n[i]=null}),t.unRegisterPlugin(e),Jh(this)}}],[{key:"defineGetterOrSetter",value:function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&Object.defineProperty(n,e,t[e])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),r}(),dT=9;if(typeof Element<"u"&&!Element.prototype.matches){var Si=Element.prototype;Si.matches=Si.matchesSelector||Si.mozMatchesSelector||Si.msMatchesSelector||Si.oMatchesSelector||Si.webkitMatchesSelector}function pT(r,s){for(;r&&r.nodeType!==dT;){if(typeof r.matches=="function"&&r.matches(s))return r;r=r.parentNode}}var hT=pT,fT=hT;function Eo(r,s,n,t,e){var i=vT.apply(this,arguments);return r.addEventListener(n,i,e),{destroy:function(){r.removeEventListener(n,i,e)}}}function mT(r,s,n,t,e){return typeof r.addEventListener=="function"?Eo.apply(null,arguments):typeof n=="function"?Eo.bind(null,document).apply(null,arguments):(typeof r=="string"&&(r=document.querySelectorAll(r)),Array.prototype.map.call(r,function(i){return Eo(i,s,n,t,e)}))}function vT(r,s,n,t){return function(e){e.delegateTarget=fT(e.target,s),e.delegateTarget&&t.call(r,e)}}var yT=mT;const od=Aa(yT);var gT={CONTROLS:"controls",ROOT:"root"},st={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function xo(r){return r?r.indexOf&&/^(?:http|data:|\/)/.test(r):!1}function bT(r,s){return Ht(r)==="object"&&r.class&&typeof r.class=="string"?"".concat(s," ").concat(r.class):s}function ST(r,s){return Ht(r)==="object"&&r.attr&&Ht(r.attr)==="object"&&Object.keys(r.attr).map(function(n){s[n]=r.attr[n]}),s}function ld(r,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",i=null;if(r instanceof window.Element)return k.addClass(r,n),Object.keys(t).map(function(a){r.setAttribute(a,t[a])}),r;if(xo(r)||xo(r.url))return t.src=xo(r)?r:r.url||"",i=k.createDom(r.tag||"img","",t,"xg-img ".concat(n)),i;if(typeof r=="function")try{return i=r(),i instanceof window.Element?(k.addClass(i,n),Object.keys(t).map(function(a){i.setAttribute(a,t[a])}),i):(We.logWarn("warn>>icons.".concat(s," in config of plugin named [").concat(e,"] is a function mast return an Element Object")),null)}catch(a){return We.logError("Plugin named [".concat(e,"]:createIcon"),a),null}return typeof r=="string"?k.createDomFromHtml(r,t,n):(We.logWarn("warn>>icons.".concat(s," in config of plugin named [").concat(e,"] is invalid")),null)}function wT(r,s){var n=s.config.icons||s.playerConfig.icons;Object.keys(r).map(function(t){var e=r[t],i=e&&e.class?e.class:"",a=e&&e.attr?e.attr:{},o=null;n&&n[t]&&(i=bT(n[t],i),a=ST(n[t],a),o=ld(n[t],t,i,a,s.pluginName)),!o&&e&&(o=ld(e.icon?e.icon:e,a,i,{},s.pluginName)),s.icons[t]=o})}function CT(r,s){Object.keys(r).map(function(n){Object.defineProperty(s.langText,n,{get:function(){var e=s.lang,i=s.i18n;return i[n]?i[n]:r[n]&&r[n][e]||""}})})}var Ue=function(r){be(n,r);var s=Se(n);function n(){var t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ue(this,n),t=s.call(this,e),t.__delegates=[],t}return ce(n,[{key:"__init",value:function(e){if(ge(fe(n.prototype),"__init",this).call(this,e),!!e.root){var i=e.root,a=null;this.icons={},this.root=null,this.parent=null;var o=this.registerIcons()||{};wT(o,this),this.langText={};var l=this.registerLanguageTexts()||{};CT(l,this);var u="";try{u=this.render()}catch(p){throw We.logError("Plugin:".concat(this.pluginName,":render"),p),new Error("Plugin:".concat(this.pluginName,":render:").concat(p.message))}if(u)a=n.insert(u,i,e.index),a.setAttribute("data-index",e.index);else if(e.tag)a=k.createDom(e.tag,"",e.attr,e.name),a.setAttribute("data-index",e.index),i.appendChild(a);else return;this.root=a,this.parent=i;var c=this.config.attr||{},d=this.config.style||{};this.setAttr(c),this.setStyle(d),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var i=this.children();i&&Ht(i)==="object"&&Object.keys(i).length>0&&Object.keys(i).map(function(a){var o=a,l=i[o],u={root:e.root},c,d;typeof l=="function"?(c=e.config[o]||{},d=l):Ht(l)==="object"&&typeof l.plugin=="function"&&(c=l.options?k.deepCopy(e.config[o]||{},l.options):e.config[o]||{},d=l.plugin),u.config=c,c.index!==void 0&&(u.index=c.index),c.root&&(u.root=c.root),e.registerPlugin(d,u,o)})}}},{key:"updateLang",value:function(e){e||(e=this.lang);function i(u,c){for(var d=0;d<u.children.length;d++)u.children[d].children.length>0?i(u.children[d],c):c(u.children[d])}var a=this.root,o=this.i18n,l=this.langText;a&&i(a,function(u){var c=u.getAttribute&&u.getAttribute("lang-key");if(c){var d=o[c.toUpperCase()]||l[c];d&&(u.innerHTML=typeof d=="function"?d(e):d)}})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=this.i18n||{},o=this.langText;e.setAttribute&&e.setAttribute("lang-key",i);var l=a[i]||o[i]||"";l&&(e.innerHTML=l)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";i.root=i.root||this.root;var o=ge(fe(n.prototype),"registerPlugin",this).call(this,e,i,a);return this._children.push(o),o}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,i,a){var o=this;if(arguments.length<3&&typeof i=="function")Array.isArray(e)?e.forEach(function(u){o.bindEL(u,i)}):this.bindEL(e,i);else{var l=n.delegate.call(this,this.root,e,i,a);this.__delegates=this.__delegates.concat(l)}}},{key:"unbind",value:function(e,i){var a=this;if(arguments.length<3&&typeof i=="function")Array.isArray(e)?e.forEach(function(u){a.unbindEL(u,i)}):this.unbindEL(e,i);else for(var o="".concat(e,"_").concat(i),l=0;l<this.__delegates.length;l++)if(this.__delegates[l].key===o){this.__delegates[l].destroy(),this.__delegates.splice(l,1);break}}},{key:"setStyle",value:function(e,i){var a=this;if(this.root){if(k.typeOf(e)==="String")return this.root.style[e]=i;k.typeOf(e)==="Object"&&Object.keys(e).map(function(o){a.root.style[o]=e[o]})}}},{key:"setAttr",value:function(e,i){var a=this;if(this.root){if(k.typeOf(e)==="String")return this.root.setAttribute(e,i);k.typeOf(e)==="Object"&&Object.keys(e).map(function(o){a.root.setAttribute(o,e[o])})}}},{key:"setHtml",value:function(e,i){this.root&&(this.root.innerHTML=e,typeof i=="function"&&i())}},{key:"bindEL",value:function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof i=="function"&&this.root.addEventListener(e,i,a)}},{key:"unbindEL",value:function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof i=="function"&&this.root.removeEventListener(e,i,a)}},{key:"show",value:function(e){if(this.root){this.root.style.display=e!==void 0?e:"block";var i=window.getComputedStyle(this.root,null),a=i.getPropertyValue("display");if(a==="none")return this.root.style.display="block"}}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,i){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!i||!(i instanceof window.Element))return null;try{return typeof e=="string"?this.find(e).appendChild(i):e.appendChild(i)}catch(a){return We.logError("Plugin:appendChild",a),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,i=this.player;this.__delegates.map(function(a){a.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(a){i.unRegisterPlugin(a.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),ge(fe(n.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map(function(a){e[a]=null})}}],[{key:"insert",value:function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=i.children.length,l=Number(a),u=e instanceof window.Node;if(o){for(var c=0,d=null,p="";c<o;c++){d=i.children[c];var h=Number(d.getAttribute("data-index"));if(h>=l){p="beforebegin";break}else h<l&&(p="afterend")}return u?p==="afterend"?i.appendChild(e):i.insertBefore(e,d):d.insertAdjacentHTML(p,e),p==="afterend"?i.children[i.children.length-1]:i.children[c]}else return u?i.appendChild(e):i.insertAdjacentHTML("beforeend",e),i.children[i.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,i,a,o){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u=[];if(e instanceof window.Node&&typeof o=="function")if(Array.isArray(a))a.forEach(function(d){var p=od(e,i,d,o,l);p.key="".concat(i,"_").concat(d),u.push(p)});else{var c=od(e,i,a,o,l);c.key="".concat(i,"_").concat(a),u.push(c)}return u}},{key:"ROOT_TYPES",get:function(){return gT}},{key:"POSITIONS",get:function(){return st}}]),n}(pn),LT=function(){function r(){var s=this;if(ue(this,r),K(this,"__trigger",function(n){var t=new Date().getTime();s.timeStamp=t;for(var e=0;e<n.length;e++)s.__runHandler(n[e].target)}),this.__handlers=[],this.timeStamp=0,this.observer=null,!!window.ResizeObserver)try{this.observer=new window.ResizeObserver(jL(this.__trigger,100,{trailing:!0})),this.timeStamp=new Date().getTime()}catch(n){console.error(n)}}return ce(r,[{key:"addObserver",value:function(n,t){if(this.observer){this.observer&&this.observer.observe(n);for(var e=n.getAttribute(zr),i=this.__handlers,a=-1,o=0;o<i.length;o++)i[o]&&n===i[o].target&&(a=o);a>-1?this.__handlers[a].handler=t:this.__handlers.push({target:n,handler:t,playerId:e})}}},{key:"unObserver",value:function(n){var t=-1;this.__handlers.map(function(e,i){n===e.target&&(t=i)});try{this.observer&&this.observer.unobserve(n)}catch{}this.observer&&this.observer.unobserve(n),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(n){for(var t=this.__handlers,e=0;e<t.length;e++)if(t[e]&&n===t[e].target){try{t[e].handler(n)}catch(i){console.error(i)}return!0}return!1}}]),r}(),ss=null;function TT(r,s){return ss||(ss=new LT),ss.addObserver(r,s),ss}function kT(r,s){ss.unObserver(r,s)}var mt={pluginGroup:{},init:function(s){var n=s._pluginInfoId;n||(n=new Date().getTime(),s._pluginInfoId=n),!s.config.closeResizeObserver&&TT(s.root,function(){s.resize()}),Object.keys(this.pluginGroup).length===0&&(s.isUserActive=!0),this.pluginGroup[n]={_player:s,_originalOptions:s.config||{},_plugins:{}}},checkPlayerRoot:function(s){if(this.pluginGroup){for(var n=Object.keys(this.pluginGroup),t=0;t<n.length;t++){var e=this.pluginGroup[n[t]]._player;if(e.root===s)return e}return null}return null},formatPluginInfo:function(s,n){var t=null,e=null;return s.plugin&&typeof s.plugin=="function"?(t=s.plugin,e=s.options):(t=s,e={}),n&&(e.config=n||{}),{PLUFGIN:t,options:e}},checkPluginIfExits:function(s,n){for(var t=0;t<n.length;t++)if(s.toLowerCase()===n[t].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(s,n){for(var t=Object.keys(n),e=null,i=0;i<t.length;i++)if(s.toLowerCase()===t[i].toLowerCase()){e=n[t[i]];break}return k.typeOf(e)==="Object"?{root:e.root,position:e.position}:{}},lazyRegister:function(s,n){var t=this,e=n.timeout||1500;return Promise.race([n.loader().then(function(i){var a;i&&i.__esModule?a=i.default:a=i,t.register(s,a,i.options)}),new Promise(function(i,a){setTimeout(function(){a(new Error("timeout"))},e)})])},register:function(s,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!s||!n||typeof n!="function"||n.prototype===void 0)){var e=s._pluginInfoId;if(!(!e||!this.pluginGroup[e])){this.pluginGroup[e]._plugins||(this.pluginGroup[e]._plugins={});var i=this.pluginGroup[e]._plugins,a=this.pluginGroup[e]._originalOptions;t.player=this.pluginGroup[e]._player;var o=t.pluginName||n.pluginName;if(!o)throw new Error("The property pluginName is necessary");if(n.isSupported&&!n.isSupported(s.config.mediaType,s.config.codecType)){console.warn("not supported plugin [".concat(o,"]"));return}t.config||(t.config={});for(var l=Object.keys(a),u=0;u<l.length;u++)if(o.toLowerCase()===l[u].toLowerCase()){var c=a[l[u]];k.typeOf(c)==="Object"?t.config=Object.assign({},t.config,a[l[u]]):k.typeOf(c)==="Boolean"&&(t.config.disable=!c);break}n.defaultConfig&&Object.keys(n.defaultConfig).forEach(function(p){typeof t.config[p]>"u"&&(t.config[p]=n.defaultConfig[p])}),t.root?typeof t.root=="string"&&(t.root=s[t.root]):t.root=s.root,t.index=t.config.index||0;try{i[o.toLowerCase()]&&(this.unRegister(e,o.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(o,"] exist, destroy the old instance")));var d=new n(t);return i[o.toLowerCase()]=d,i[o.toLowerCase()].func=n,d&&typeof d.afterCreate=="function"&&d.afterCreate(),d}catch(p){throw console.error(p),p}}}},unRegister:function(s,n){s._pluginInfoId&&(s=s._pluginInfoId),n=n.toLowerCase();try{var t=this.pluginGroup[s]._plugins[n];t&&(t.pluginName&&t.__destroy(),delete this.pluginGroup[s]._plugins[n])}catch(e){console.error("[unRegister:".concat(n,"] cgid:[").concat(s,"] error"),e)}},deletePlugin:function(s,n){var t=s._pluginInfoId;t&&this.pluginGroup[t]&&this.pluginGroup[t]._plugins&&delete this.pluginGroup[t]._plugins[n]},getPlugins:function(s){var n=s._pluginInfoId;return n&&this.pluginGroup[n]?this.pluginGroup[n]._plugins:{}},findPlugin:function(s,n){var t=s._pluginInfoId;if(!t||!this.pluginGroup[t])return null;var e=n.toLowerCase();return this.pluginGroup[t]._plugins[e]},beforeInit:function(s){var n=this;function t(e){return!e||!e.then?new Promise(function(i){i()}):e}return new Promise(function(e){if(n.pluginGroup){var i;return s._loadingPlugins&&s._loadingPlugins.length?i=Promise.all(s._loadingPlugins):i=Promise.resolve(),i.then(function(){var a=s._pluginInfoId;if(!n.pluginGroup[a]){e();return}var o=n.pluginGroup[a]._plugins,l=[];Object.keys(o).forEach(function(u){if(o[u]&&o[u].beforePlayerInit)try{var c=o[u].beforePlayerInit();l.push(t(c))}catch(d){throw l.push(t(null)),d}}),Promise.all([].concat(l)).then(function(){e()}).catch(function(u){console.error(u),e()})})}})},afterInit:function(s){var n=s._pluginInfoId;if(!(!n||!this.pluginGroup[n])){var t=this.pluginGroup[n]._plugins;Object.keys(t).forEach(function(e){t[e]&&t[e].afterPlayerInit&&t[e].afterPlayerInit()})}},setLang:function(s,n){var t=n._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=this.pluginGroup[t]._plugins;Object.keys(e).forEach(function(i){if(e[i].updateLang)e[i].updateLang(s);else try{e[i].lang=s}catch{console.warn("".concat(i," setLang"))}})}},reRender:function(s){var n=this,t=s._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=[],i=this.pluginGroup[t]._plugins;Object.keys(i).forEach(function(a){a!=="controls"&&i[a]&&(e.push({plugin:i[a].func,options:i[a].__args}),n.unRegister(t,a))}),e.forEach(function(a){n.register(s,a.plugin,a.options)})}},onPluginsReady:function(s){var n=s._pluginInfoId;if(!(!n||!this.pluginGroup[n])){var t=this.pluginGroup[n]._plugins||{};Object.keys(t).forEach(function(e){t[e].onPluginsReady&&typeof t[e].onPluginsReady=="function"&&t[e].onPluginsReady()})}},setCurrentUserActive:function(s,n){if(this.pluginGroup[s]){if(!n)return this.pluginGroup[s]._player.isUserActive=n,s;for(var t=Object.keys(this.pluginGroup),e=0;e<t.length;e++){var i=this.pluginGroup[t[e]];i&&i._player&&(this.pluginGroup[t[e]]._player.isUserActive=!1)}return this.pluginGroup[s]._player.isUserActive=n,s}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var s=Object.keys(this.pluginGroup),n=0;n<s.length;n++){var t=this.pluginGroup[s[n]];if(t&&t._player&&t._player.isUserActive)return s[n]}return null}},destroy:function(s){var n=s._pluginInfoId;if(this.pluginGroup[n]){kT(s.root);for(var t=this.pluginGroup[n]._plugins,e=0,i=Object.keys(t);e<i.length;e++){var a=i[e];this.unRegister(n,a)}var o=s.isUseActive;if(delete this.pluginGroup[n],delete s._pluginInfoId,o){var l=Object.keys(this.pluginGroup);l.length>0&&this.setCurrentUserActive(l[l.length-1],!0)}}}},Q={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function ud(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:JL(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,minWaitDelay:200,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}var _T=function(s,n){var t,e,i;n.preset&&n.options?i=new n.preset(n.options,s.config):i=new n({},s.config);var a=i,o=a.plugins,l=o===void 0?[]:o,u=a.ignores,c=u===void 0?[]:u,d=a.icons,p=d===void 0?{}:d,h=a.i18n,m=h===void 0?[]:h;s.config.plugins||(s.config.plugins=[]),s.config.ignores||(s.config.ignores=[]),(t=s.config.plugins).push.apply(t,Xr(l)),(e=s.config.ignores).push.apply(e,Xr(c)),Object.keys(p).map(function(v){s.config.icons[v]||(s.config.icons[v]=p[v])});var f=s.config.i18n||[];m.push.apply(m,Xr(f)),s.config.i18n=m},ZT=function(r){be(n,r);var s=Se(n);function n(){var t;ue(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),K(A(t),"onMouseEnter",function(o){var l=A(t),u=l.player,c=l.playerConfig;c.closeControlsBlur&&u.focus({autoHide:!1})}),K(A(t),"onMouseLeave",function(){var o=A(t),l=o.player;l.focus()}),t}return ce(n,[{key:"beforeCreate",value:function(e){!e.config.mode&&Te.device==="mobile"&&(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,i=this.config,a=i.disable,o=i.height,l=i.mode;if(!a){l==="flex"&&this.player.addClass(Q.FLEX_CONTROLS);var u={height:"".concat(o,"px")};Object.keys(u).map(function(d){e.root.style[d]=u[d]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(La,function(d){d?k.addClass(e.root,"mini-controls"):k.removeClass(e.root,"mini-controls")});var c=this.playerConfig.isMobileSimulateMode;Te.device!=="mobile"&&c!=="mobile"&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&k.addClass(this.root,Q.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){k.removeClass(this.root,Q.CONTROLS_AUTOHIDE)}},{key:"show",value:function(){k.addClass(this.root,"show")}},{key:"hide",value:function(){k.removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;if(this.root){var o=e.defaultConfig||{};if(!i.root){var l=i.position?i.position:i.config&&i.config.position?i.config.position:o.position;switch(l){case st.CONTROLS_LEFT:i.root=this.left;break;case st.CONTROLS_RIGHT:i.root=this.right;break;case st.CONTROLS_CENTER:i.root=this.center;break;case st.CONTROLS:i.root=this.root;break;default:i.root=this.left}return ge(fe(n.prototype),"registerPlugin",this).call(this,e,i,a)}}}},{key:"destroy",value:function(){Te.device!=="mobile"&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,i=e.mode,a=e.autoHide,o=e.initShow,l=e.disable;if(!l){var u=k.classNames({"xgplayer-controls":!0},{"flex-controls":i==="flex"},{"bottom-controls":i==="bottom"},K({},Q.CONTROLS_AUTOHIDE,a),{"xgplayer-controls-initshow":o||!a});return'<xg-controls class="'.concat(u,`" unselectable="on">
    <xg-inner-controls class="xg-inner-controls xg-pos">
      <xg-left-grid class="xg-left-grid">
      </xg-left-grid>
      <xg-center-grid class="xg-center-grid"></xg-center-grid>
      <xg-right-grid class="xg-right-grid">
      </xg-right-grid>
    </xg-inner-controls>
    </xg-controls>`)}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),n}(Ue),DT={LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}},un={lang:{},langKeys:[],textKeys:[]};function Cs(r,s){return Object.keys(s).forEach(function(n){var t=k.typeOf(s[n]),e=k.typeOf(r[n]);if(t==="Array"){var i;e!=="Array"&&(r[n]=[]),(i=r[n]).push.apply(i,Xr(s[n]))}else t==="Object"?(e!=="Object"&&(r[n]={}),Cs(r[n],s[n])):r[n]=s[n]}),r}function Qh(){Object.keys(un.lang.en).map(function(r){un.textKeys[r]=r})}function ET(r,s){var n=[];if(s||(s=un),!!s.lang){k.typeOf(r)!=="Array"?n=Object.keys(r).map(function(i){var a=i==="zh"?"zh-cn":i;return{LANG:a,TEXT:r[i]}}):n=r;var t=s,e=t.lang;n.map(function(i){i.LANG==="zh"&&(i.LANG="zh-cn"),e[i.LANG]?Cs(e[i.LANG]||{},i.TEXT||{}):du(i,s)}),Qh()}}function du(r,s){var n=r.LANG;if(s||(s=un),!!s.lang){var t=r.TEXT||{};n==="zh"&&(n="zh-cn"),s.lang[n]?Cs(s.lang[n],t):(s.langKeys.push(n),s.lang[n]=t),Qh()}}function xT(r){var s,n={lang:{},langKeys:[],textKeys:{},pId:r};return Cs(n.lang,un.lang),(s=n.langKeys).push.apply(s,Xr(un.langKeys)),Cs(n.textKeys,un.textKeys),n}du(DT);var xi={get textKeys(){return un.textKeys},get langKeys(){return un.langKeys},get lang(){var r={};return un.langKeys.map(function(s){r[s]=un.lang[s]}),un.lang["zh-cn"]&&(r.zh=un.lang["zh-cn"]||{}),r},extend:ET,use:du,init:xT},Ve={INITIAL:1,READY:2,ATTACHING:3,ATTACHED:4,NOTALLOW:5,RUNNING:6,ENDED:7,DESTROYED:8},cd=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],FT=["play","pause","replay","retry"],dd=0,pd=0,pu=function(r){be(n,r);var s=Se(n);function n(t){var e;ue(this,n);var i=k.deepMerge(ud(),t);e=s.call(this,i),K(A(e),"canPlayFunc",function(){if(e.config){var m=e.config,f=m.autoplay,v=m.startTime,b=m.defaultPlaybackRate;We.logInfo("player","canPlayFunc, startTime",v),v&&(e.currentTime=v>e.duration?e.duration:v,e.config.startTime=0),e.playbackRate=b,(f||e._useAutoplay)&&e.mediaPlay(),e.off(pr,e.canPlayFunc),e.removeClass(Q.ENTER)}}),K(A(e),"onFullscreenChange",function(m,f){var v=function(){k.setTimeout(A(e),function(){e.resize()},100)},b=k.getFullScreenEl();e._fullActionFrom?e._fullActionFrom="":e.emit(_a,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var w=QL(b,e.playerId,zr);if(f||b&&(b===e._fullscreenEl||w))v(),!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,b,Q.FULLSCREEN),e.emit(ur,!0,e._fullScreenOffset),e.cssfullscreen&&e.exitCssFullscreen();else if(e.fullscreen){v();var C=A(e),T=C._fullScreenOffset,L=C.config;L.needFullscreenScroll?(window.scrollTo(T.left,T.top),k.setTimeout(A(e),function(){e.fullscreen=!1,e._fullScreenOffset=null},100)):(!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!1,e._fullScreenOffset=null),e.cssfullscreen?e.removeClass(Q.FULLSCREEN):e.recoverFullStyle(e.root,e._fullscreenEl,Q.FULLSCREEN),e._fullscreenEl=null,e.emit(ur,!1)}}),K(A(e),"_onWebkitbeginfullscreen",function(m){e._fullscreenEl=e.media,e.onFullscreenChange(m,!0)}),K(A(e),"_onWebkitendfullscreen",function(m){e.onFullscreenChange(m,!1)}),jh(A(e),FT),e.config=i,e._pluginInfoId=k.generateSessionId(),KL(A(e));var a=e.constructor.defaultPreset;if(e.config.presets.length){var o=e.config.presets.indexOf("default");o>=0&&a&&(e.config.presets[o]=a)}else a&&e.config.presets.push(a);e.userTimer=null,e.waitTimer=null,e._state=Ve.INITIAL,e.isError=!1,e._hasStart=!1,e.isSeeking=!1,e.isCanplay=!1,e._useAutoplay=!1,e.rotateDeg=0,e.isActive=!1,e.fullscreen=!1,e.cssfullscreen=!1,e.isRotateFullscreen=!1,e._fullscreenEl=null,e._cssfullscreenEl=null,e.curDefinition=null,e._orgCss="",e._fullScreenOffset=null,e._videoHeight=0,e._videoWidth=0,e.videoPos={pi:1,scale:0,rotate:0,x:0,y:0,h:-1,w:-1,vy:0,vx:0},e._accPlayed={t:0,acc:0,loopAcc:0},e.innerContainer=null,e.controls=null,e.topBar=null,e.root=null,e.__i18n=xi.init(e._pluginInfoId),Te.os.isAndroid&&Te.osVersion>0&&Te.osVersion<6&&(e.config.autoplay=!1),e.database=new cT,e.isUserActive=!1,e._onceSeekCanplay=null,e._isPauseBeforeSeek=0;var l=e._initDOM();if(!l)return console.error(new Error("can't find the dom which id is ".concat(e.config.id," or this.config.el does not exist"))),iu(e);var u=e.config,c=u.definition,d=c===void 0?{}:c,p=u.url;if(!p&&d.list&&d.list.length>0){var h=d.list.find(function(m){return m.definition&&m.definition===d.defaultDefinition});h||(d.defaultDefinition=d.list[0].definition,h=d.list[0]),e.config.url=h.url,e.curDefinition=h}return e._bindEvents(),e._registerPresets(),e._registerPlugins(),mt.onPluginsReady(A(e)),e.getInitDefinition(),e.setState(Ve.READY),k.setTimeout(A(e),function(){e.emit(lu)},0),e.onReady&&e.onReady(),(e.config.videoInit||e.config.autoplay)&&(!e.hasStart||e.state<Ve.ATTACHED)&&e.start(),e}return ce(n,[{key:"_initDOM",value:function(){var e=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var i=this.config.el;if(i&&i.nodeType===1)this.root=i;else return this.emit(fi,new Un("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1}var a=mt.checkPlayerRoot(this.root);a&&(We.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),a.destroy()),this.root.setAttribute(zr,this.playerId),mt.init(this),this._initBaseDoms();var o=this.constructor.XgVideoProxy;if(o&&this.mediaConfig.mediaType===o.mediaType){var l=this.innerContainer||this.root;this.detachVideoEvents(this.media);var u=new o(l,this.config,this.mediaConfig);this.attachVideoEvents(u),this.media=u}if(this.media.setAttribute(zr,this.playerId),this.config.controls){var c=this.config.controls.root||null,d=mt.register(this,ZT,{root:c});this.controls=d}var p=this.config.isMobileSimulateMode==="mobile"?"mobile":Te.device;if(this.addClass("".concat(Q.DEFAULT," ").concat(Q.INACTIVE," xgplayer-").concat(p," ").concat(this.config.controls?"":Q.NO_CONTROLS)),this.config.autoplay?this.addClass(Q.ENTER):this.addClass(Q.NO_START),this.config.fluid){var h=this.config,m=h.width,f=h.height;(typeof m!="number"||typeof f!="number")&&(m=600,f=337.5);var v={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(f*100/m,"%")};Object.keys(v).forEach(function(b){e.root.style[b]=v[b]})}else["width","height"].forEach(function(b){e.config[b]&&(typeof e.config[b]!="number"?e.root.style[b]=e.config[b]:e.root.style[b]="".concat(e.config[b],"px"))});return!0}},{key:"_initBaseDoms",value:function(){this.topBar=null,this.leftBar=null,this.rightBar=null,this.config.marginControls&&(this.innerContainer=k.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer))}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach(function(i){e.on(i,e["on"+i.charAt(0).toUpperCase()+i.slice(1)])}),nd.forEach(function(i){document&&document.addEventListener(i,e.onFullscreenChange)}),Te.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(ai,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.media.focus()},this.once(wn,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),nd.forEach(function(i){document.removeEventListener(i,e.onFullscreenChange)}),this.playFunc&&this.off(wn,this.playFunc),this.off(pr,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_startInit",value:function(e){var i=this;if(this.media&&!((!e||e===""||k.typeOf(e)==="Array"&&e.length===0)&&(e="",this.emit(Gh),We.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart))){this._detachSourceEvents(this.media),k.typeOf(e)==="Array"&&e.length>0?this._attachSourceEvents(this.media,e):!this.media.src||this.media.src!==e?this.media.src=e:e||this.media.removeAttribute("src"),k.typeOf(this.config.volume)==="Number"&&(this.volume=this.config.volume);var a=this.innerContainer?this.innerContainer:this.root;this.media instanceof window.Element&&!a.contains(this.media)&&a.insertBefore(this.media,a.firstChild);var o=this.media.readyState;We.logInfo("_startInit readyState",o),this.config.autoplay&&(!(/^blob/.test(this.media.currentSrc)||/^blob/.test(this.media.src))&&this.load(),(Te.os.isIpad||Te.os.isPhone)&&this.mediaPlay()),o>=2?this.canPlayFunc():this.once(pr,this.canPlayFunc),(!this.hasStart||this.state<Ve.ATTACHED)&&mt.afterInit(this),this.hasStart=!0,this.setState(Ve.ATTACHED),k.setTimeout(this,function(){i.emit(qa)},0)}}},{key:"_registerPlugins",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._loadingPlugins=[];var a=this.config.ignores||[],o=this.config.plugins||[],l=this.config.i18n||[];i&&xi.extend(l,this.__i18n);var u=a.join("||").toLowerCase().split("||"),c=this.plugins;o.forEach(function(d){try{var p=d.plugin?d.plugin.pluginName:d.pluginName;if(p&&u.indexOf(p.toLowerCase())>-1)return null;if(!i&&c[p.toLowerCase()])return;if(d.lazy&&d.loader){var h=mt.lazyRegister(e,d);d.forceBeforeInit&&(h.then(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(h),1)}).catch(function(m){We.logError("_registerPlugins:loadingPlugin",m),e._loadingPlugins.splice(e._loadingPlugins.indexOf(h),1)}),e._loadingPlugins.push(h));return}return e.registerPlugin(d)}catch(m){We.logError("_registerPlugins:",m)}})}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach(function(i){_T(e,i)})}},{key:"_getRootByPosition",value:function(e){var i=null;switch(e){case st.ROOT_RIGHT:this.rightBar||(this.rightBar=k.createPositionBar("xg-right-bar",this.root)),i=this.rightBar;break;case st.ROOT_LEFT:this.leftBar||(this.leftBar=k.createPositionBar("xg-left-bar",this.root)),i=this.leftBar;break;case st.ROOT_TOP:this.topBar||(this.topBar=k.createPositionBar("xg-top-bar",this.root),this.config.topBarAutoHide&&k.addClass(this.topBar,Q.TOP_BAR_AUTOHIDE)),i=this.topBar;break;default:i=this.innerContainer||this.root;break}return i}},{key:"registerPlugin",value:function(e,i){var a=mt.formatPluginInfo(e,i),o=a.PLUFGIN,l=a.options,u=this.config.plugins,c=mt.checkPluginIfExits(o.pluginName,u);!c&&u.push(o);var d=mt.getRootByConfig(o.pluginName,this.config);d.root&&(l.root=d.root),d.position&&(l.position=d.position);var p=l.position?l.position:l.config&&l.config.position||o.defaultConfig&&o.defaultConfig.position;return!l.root&&typeof p=="string"&&p.indexOf("controls")>-1?this.controls&&this.controls.registerPlugin(o,l,o.pluginName):(l.root||(l.root=this._getRootByPosition(p)),mt.register(this,o,l))}},{key:"deregister",value:function(e){typeof e=="string"?mt.unRegister(this,e):e instanceof pn&&mt.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.deregister(e),i&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var i;if(typeof e=="string"?i=e:e instanceof pn&&(i=e.pluginName),!!i)for(var a=this.config.plugins.length-1;a>-1;a--){var o=this.config.plugins[a];if(o.pluginName.toLowerCase()===i.toLowerCase()){this.config.plugins.splice(a,1);break}}}},{key:"plugins",get:function(){return mt.getPlugins(this)}},{key:"getPlugin",value:function(e){var i=mt.findPlugin(this,e);return i&&i.pluginName?i:null}},{key:"addClass",value:function(e){this.root&&(k.hasClass(this.root,e)||k.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&k.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return k.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,i){this.root&&this.root.setAttribute(e,i)}},{key:"removeAttribute",value:function(e,i){this.root&&this.root.removeAttribute(e,i)}},{key:"start",value:function(e){var i=this;if(!(this.state>Ve.ATTACHING))return!e&&!this.config.url&&this.getInitDefinition(),this.hasStart=!0,this.setState(Ve.ATTACHING),this._registerPlugins(!1),mt.beforeInit(this).then(function(){if(i.config){e||(e=i.url||i.config.url);var a=i._startInit(e);return a}}).catch(function(a){throw a.fileName="player",a.lineNumber="236",We.logError("start:beforeInit:",a),a})}},{key:"switchURL",value:function(e,i){var a=this,o=e;k.typeOf(e)==="Object"&&(o=e.url);var l=this.currentTime,u=this.paused&&!this.isError;return this.src=o,new Promise(function(c,d){var p=function(f){a.off("timeupdate",h),a.off("canplay",h),d(f)},h=function(){a.currentTime=l,u&&a.pause(),a.off("error",p),c(!0)};if(a.once("error",p),!o){a.errorHandler("error",{code:6,message:"empty_src"});return}Te.os.isAndroid?a.once("timeupdate",h):a.once("canplay",h),a.play()})}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e=this;if(!this.hasStart&&this.state<Ve.ATTACHED){this.removeClass(Q.NO_START),this.addClass(Q.ENTER),this.start(),this._useAutoplay=!0;return}this.state<Ve.RUNNING&&(this.removeClass(Q.NO_START),!this.isCanplay&&this.addClass(Q.ENTER));var i=ge(fe(n.prototype),"play",this).call(this);return i!==void 0&&i&&i.then?i.then(function(){e.removeClass(Q.NOT_ALLOW_AUTOPLAY),e.addClass(Q.PLAYING),e.state<Ve.RUNNING&&(We.logInfo(">>>>playPromise.then"),e.setState(Ve.RUNNING),e.emit(ti))}).catch(function(a){if(We.logWarn(">>>>playPromise.catch",a.name),e.media&&e.media.error){e.onError(),e.removeClass(Q.ENTER);return}a.name==="NotAllowedError"&&(e._errorTimer=k.setTimeout(e,function(){e._errorTimer=null,e.emit(uu),e.addClass(Q.NOT_ALLOW_AUTOPLAY),e.removeClass(Q.ENTER),e.pause(),e.setState(Ve.NOTALLOW)},0))}):(We.logWarn("video.play not return promise"),this.state<Ve.RUNNING&&(this.setState(Ve.RUNNING),this.removeClass(Q.NOT_ALLOW_AUTOPLAY),this.removeClass(Q.NO_START),this.removeClass(Q.ENTER),this.addClass(Q.PLAYING),this.emit(ti))),i}},{key:"mediaPause",value:function(){ge(fe(n.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){ge(fe(n.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;return this.removeClass(Q.PAUSED),cr(this,"play",function(){return e.mediaPlay()})}},{key:"pause",value:function(){var e=this;cr(this,"pause",function(){ge(fe(n.prototype),"pause",e).call(e)})}},{key:"seek",value:function(e,i){var a=this;if(!(!this.media||Number.isNaN(Number(e))||!this.hasStart)){var o=this.config,l=o.isSeekedPlay,u=o.seekedStatus,c=i||(l?"play":u);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,!this._isPauseBeforeSeek&&(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off(Gr,this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(a.removeClass(Q.ENTER),a.isSeeking=!1,c){case"play":a.play();break;case"pause":a.pause();break;default:a._isPauseBeforeSeek>1||a.paused?a.pause():a.play()}a._isPauseBeforeSeek=0,a._onceSeekCanplay=null},this.once(Gr,this._onceSeekCanplay),this.state<Ve.RUNNING?(this.removeClass(Q.NO_START),this.currentTime=e,this.play()):this.currentTime=e}}},{key:"getInitDefinition",value:function(){var e=this,i=this.config,a=i.definition,o=i.url;!o&&a&&a.list&&a.list.length>0&&a.defaultDefinition&&a.list.map(function(l){l.definition===a.defaultDefinition&&(e.config.url=l.url,e.curDefinition=l)})}},{key:"changeDefinition",value:function(e,i){var a=this,o=this.config.definition;if(Array.isArray(o==null?void 0:o.list)&&o.list.forEach(function(u){(e==null?void 0:e.definition)===u.definition&&(a.curDefinition=u)}),e!=null&&e.bitrate&&typeof e.bitrate!="number"&&(e.bitrate=parseInt(e.bitrate,10)||0),this.emit(eo,{from:i,to:e}),!this.hasStart){this.config.url=e.url;return}var l=this.switchURL(e.url,ht({seamless:o.seamless!==!1&&typeof MediaSource<"u"&&typeof MediaSource.isTypeSupported=="function"},e));l&&l.then?l.then(function(){a.emit(Ta,{from:i,to:e})}):this.emit(Ta,{from:i,to:e})}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(ai,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,i=Q.NOT_ALLOW_AUTOPLAY,a=Q.PLAYING,o=Q.NO_START,l=Q.PAUSED,u=Q.REPLAY,c=Q.ENTER,d=Q.ENDED,p=Q.ERROR,h=Q.LOADING,m=[i,a,o,l,u,c,d,p,h];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,m.forEach(function(f){e.removeClass(f)}),this.addClass(Q.ENTER),this.emit(to)}},{key:"reset",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;this.resetState();var o=this.plugins;if(o&&(i.map(function(u){e.deregister(u)}),a)){var l=ud();Object.keys(this.config).keys(function(u){e.config[u]!=="undefined"&&(u==="plugins"||u==="presets"||u==="el"||u==="id")&&(e.config[u]=l[u])})}}},{key:"destroy",value:function(){var e=this,i=this.innerContainer,a=this.root,o=this.media;if(!(!a||!o)){if(this.hasStart=!1,this._useAutoplay=!1,a.removeAttribute(zr),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),k.clearAllTimers(this),this.emit(Gs),mt.destroy(this),Jh(this),ge(fe(n.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),i)for(var l=i.children,u=0;u<l.length;u++)i.removeChild(l[u]);!i&&o instanceof window.Node&&a.contains(o)&&a.removeChild(o),["topBar","leftBar","rightBar","innerContainer"].map(function(d){e[d]&&a.removeChild(e[d]),e[d]=null});var c=a.className.split(" ");c.length>0?a.className=c.filter(function(d){return d.indexOf("xgplayer")<0}).join(" "):a.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach(function(d){e[d]=!1})}}},{key:"replay",value:function(){var e=this;this.removeClass(Q.ENDED),this.currentTime=0,this.isSeeking=!1,cr(this,"replay",function(){e.once(Gr,function(){var i=e.mediaPlay();i&&i.catch&&i.catch(function(a){console.log(a)})}),e.play(),e.emit(cu),e.onPlay()})}},{key:"retry",value:function(){var e=this;this.removeClass(Q.ERROR),this.addClass(Q.LOADING),cr(this,"retry",function(){var i=e.currentTime;e.src=e.config.url,!e.config.isLive&&(e.currentTime=i),e.once(pr,function(){e.mediaPlay()})})}},{key:"changeFullStyle",value:function(e,i,a,o){e&&(o||(o=Q.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=k.filterStyleFromText(e)),k.addClass(e,a),i&&i!==e&&!this._orgPCss&&(this._orgPCss=k.filterStyleFromText(i),k.addClass(i,o),i.setAttribute(zr,this.playerId)))}},{key:"recoverFullStyle",value:function(e,i,a,o){o||(o=Q.PARENT_FULLSCREEN),this._orgCss&&(k.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),k.removeClass(e,a),i&&i!==e&&this._orgPCss&&(k.setStyleFromCsstext(i,this._orgPCss),this._orgPCss="",k.removeClass(i,o),i.removeAttribute(zr))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget,i=this.root,a=this.media;e||(e=i),this._fullScreenOffset={top:k.scrollTop(),left:k.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var o=k.getFullScreenEl();if(o===this._fullscreenEl){this.onFullscreenChange();return}try{for(var l=0;l<rd.length;l++){var u=rd[l];if(e[u]){var c=u==="webkitRequestFullscreen"?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[u]();return c&&c.then?c:Promise.resolve()}}return a.fullscreenEnabled||a.webkitSupportsFullscreen?(a.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch{return Promise.reject(new Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),!(!this._fullscreenEl&&!k.getFullScreenEl())){this.root;var i=this.media;this._fullActionFrom="exit";try{for(var a=0;a<id.length;a++){var o=id[a];if(document[o]){var l=document[o]();return l&&l.then?l:Promise.resolve()}}return i&&i.webkitSupportsFullscreen?(i.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch{return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var i=e?"".concat(Q.INNER_FULLSCREEN," ").concat(Q.CSS_FULLSCREEN):Q.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,i);var a=this.config.fullscreen,o=a===void 0?{}:a,l=o.useCssFullscreen===!0||typeof o.useCssFullscreen=="function"&&o.useCssFullscreen();l&&(this.fullscreen=!0,this.emit(ur,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(Ca,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(Q.INNER_FULLSCREEN," ").concat(Q.CSS_FULLSCREEN):Q.CSS_FULLSCREEN;if(!this.fullscreen)this.recoverFullStyle(this.root,this._cssfullscreenEl,e);else{var i=this.config.fullscreen,a=i===void 0?{}:i,o=a.useCssFullscreen===!0||typeof a.useCssFullscreen=="function"&&a.useCssFullscreen();o?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(ur,!1)):this.removeClass(e)}this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(Ca,!1)}},{key:"getRotateFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.cssfullscreen&&this.exitCssFullscreen(e);var i=e?"".concat(Q.INNER_FULLSCREEN," ").concat(Q.ROTATE_FULLSCREEN):Q.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,i,Q.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this._rootStyle=this.root.getAttribute("style"),this.root.style.width="".concat(window.innerHeight,"px"),this.emit(ur,!0)}},{key:"exitRotateFullscreen",value:function(e){var i=this._fullscreenEl!==this.root?"".concat(Q.INNER_FULLSCREEN," ").concat(Q.ROTATE_FULLSCREEN):Q.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,i,Q.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(ur,!1),this._rootStyle&&(this.root.style.style=this._rootStyle,this._rootStyle=!1)}},{key:"setRotateDeg",value:function(e){window.orientation===90||window.orientation===-90?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};if(this.isActive){this.onFocus(e);return}this.emit(ou,ht({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ignorePaused:!1};if(!this.isActive){this.onBlur(e);return}this.emit(Xh,ht({paused:this.paused,ended:this.ended},e))}},{key:"onFocus",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=i.autoHide,o=a===void 0?!this.config.closePlayerBlur:a,l=i.delay,u=l===void 0?this.config.inactive:l;if(this.isActive=!0,this.removeClass(Q.INACTIVE),this.userTimer&&(k.clearTimeout(this,this.userTimer),this.userTimer=null),!o){this.userTimer&&(k.clearTimeout(this,this.userTimer),this.userTimer=null);return}this.userTimer=k.setTimeout(this,function(){e.userTimer=null,e.blur()},u)}},{key:"onBlur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=e.ignorePaused,a=i===void 0?!1:i;if(this.isActive){var o=this.config.closePauseVideoFocus;this.isActive=!1,(a||o||!this.paused&&!this.ended)&&this.addClass(Q.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(Q.ENTER),this.removeClass(Q.ERROR),this.removeClass(Q.LOADING),this.isCanplay=!0,this.waitTimer&&k.clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){this.isError=!1,this.isSeeking=!1}},{key:"onLoadstart",value:function(){this.removeClass(Q.ERROR),this.isCanplay=!1}},{key:"onPlay",value:function(){this.state===Ve.ENDED&&this.setState(Ve.RUNNING),this.removeClass(Q.PAUSED),this.ended&&this.removeClass(Q.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(Q.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&(k.clearTimeout(this,this.userTimer),this.userTimer=null),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(Q.ENDED),this.setState(Ve.ENDED)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(Q.NOT_ALLOW_AUTOPLAY),this.removeClass(Q.NO_START),this.removeClass(Q.ENTER),this.removeClass(Q.LOADING),this.addClass(Q.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(Q.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&k.clearTimeout(this,this.waitTimer),this.removeClass(Q.LOADING),this.removeClass(Q.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&k.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=k.setTimeout(this,function(){e.addClass(Q.LOADING),k.clearTimeout(e,e.waitTimer),e.waitTimer=null},this.config.minWaitDelay)}},{key:"onPlaying",value:function(){var e=this;this.isError=!1;var i=Q.NO_START,a=Q.PAUSED,o=Q.ENDED,l=Q.ERROR,u=Q.REPLAY,c=Q.LOADING,d=[i,a,o,l,u,c];d.forEach(function(p){e.removeClass(p)})}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.resize(),(this.waitTimer||this.hasClass(Q.LOADING))&&this.media.readyState>2&&(this.removeClass(Q.LOADING),k.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state<Ve.RUNNING&&this.duration&&(this.setState(Ve.RUNNING),this.emit(ti)),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onVolumechange",value:function(){k.typeOf(this.config.volume)==="Number"&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,i,a){if(!(!this.media||!i||!e)){var o=k.typeOf(e)==="String"?e:e.type||"";a.props&&k.typeOf(a.props)!=="Array"&&(a.props=[a.props]),this.emit(_a,ht({eventType:o,action:i,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},a))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var i=new Date().getTime()-this._accPlayed.t;this._accPlayed.acc+=i,this._accPlayed.t=0,(e==="ended"||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var i=this.media.buffered;if(!i||i.length===0||!this.duration)return!0;for(var a=e||this.media.currentTime||.2,o=i.length,l=0;l<o;l++)if(i.start(l)<=a&&i.end(l)>a)return!0;return!1}},{key:"resizePosition",value:function(){var e=this.videoPos,i=e.rotate,a=e.vy,o=e.vx,l=e.h,u=e.w,c=this.videoPos._pi;if(c||(c=this.media.videoWidth/this.media.videoHeight*100),!!c){this.videoPos.pi=c;var d={rotate:i},p=0,h=0,m=1,f=Math.abs(i/90),v=this.root,b=this.innerContainer,w=v.offsetWidth,C=b?b.offsetHeight:v.offsetHeight,T=C,L=w;if(f%2===0)m=l>0?100/l:u>0?100/u:1,d.scale=m,p=a>0?(100-l)/2-a:0,d.y=f===2?0-p:p,h=o>0?(100-u)/2-o:0,d.x=f===2?0-h:h,this.media.style.width="".concat(L,"px"),this.media.style.height="".concat(T,"px");else if(f%2===1){L=C,T=w;var _=C-w;h=-_/2/L*100,d.x=f===3?h+a/2:h-a/2,p=_/2/T*100,d.y=f===3?p+o/2:p-o/2,d.scale=m,this.media.style.width="".concat(L,"px"),this.media.style.height="".concat(T,"px")}var D=k.getTransformStyle(d);this.media.style.transform=D,this.media.style.webkitTransform=D}}},{key:"position",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{h:0,y:0,x:0,w:0};if(!(!this.media||!e||!e.h)){var i=this.videoPos;i.h=e.h*100||0,i.w=e.w*100||0,i.vx=e.x*100||0,i.vy=e.y*100||0,this.resizePosition()}}},{key:"setConfig",value:function(e){var i=this;e&&Object.keys(e).map(function(a){if(a!=="plugins"){i.config[a]=e[a];var o=i.plugins[a.toLowerCase()];o&&k.typeOf(o.setConfig)==="Function"&&o.setConfig(e[a])}})}},{key:"playNext",value:function(e){var i=this;this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,cr(this,"playnext",function(){i.start(),i.emit(ka,e)})}},{key:"resize",value:function(){var e=this;if(this.media){var i=this.media,a=i.videoWidth,o=i.videoHeight,l=this.config,u=l.fitVideoSize,c=l.videoFillMode;if((c==="fill"||c==="cover")&&this.setAttribute("data-xgfill",c),!(!o||!a)){this._videoHeight=o,this._videoWidth=a;var d=this.root.getBoundingClientRect(),p=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,h=d.width,m=d.height-p,f=parseInt(a/o*1e3,10),v=parseInt(h/m*1e3,10),b=h,w=m,C={};u==="auto"&&v>f||u==="fixWidth"?(w=h/f*1e3,this.config.fluid?C.paddingTop="".concat(w*100/b,"%"):C.height="".concat(w+p,"px")):(u==="auto"&&v<f||u==="fixHeight")&&(b=f*m/1e3,C.width="".concat(b,"px")),!this.fullscreen&&!this.cssfullscreen&&Object.keys(C).forEach(function(L){e.root.style[L]=C[L]}),(c==="fillHeight"&&v<f||c==="fillWidth"&&v>f)&&this.setAttribute("data-xgfill","cover");var T={videoScale:f,vWidth:b,vHeight:w,cWidth:b,cHeight:w+p};this.resizePosition(),this.emit(oi,T)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.media.updateObjectPosition){this.media.updateObjectPosition(e,i);return}this.media.style.objectPosition="".concat(e*100,"% ").concat(i*100,"%")}},{key:"setState",value:function(e){We.logInfo("setState","state from:".concat(cd[this.state]," to:").concat(cd[e])),this._state=e}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){typeof e=="boolean"&&(this._hasStart=e,e===!1&&this.setState(Ve.READY),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return this._state===Ve.RUNNING||this._state===Ve.ENDED},set:function(e){e?this.setState(Ve.RUNNING):this._state>=Ve.RUNNING&&this.setState(Ve.ATTACHED)}},{key:"definitionList",get:function(){return!this.config||!this.config.definition?[]:this.config.definition.list||[]},set:function(e){var i=this,a=this.config.definition,o=null,l=null;a.list=e,this.emit("resourceReady",e),e.forEach(function(u){var c;((c=i.curDefinition)===null||c===void 0?void 0:c.definition)===u.definition&&(o=u),a.defaultDefinition===u.definition&&(l=u)}),!l&&e.length>0&&(l=e[0]),o?this.changeDefinition(o):l&&this.changeDefinition(l)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var i=this.media.getVideoPlaybackQuality();return e.dropped=i.droppedVideoFrames||0,e.total=i.totalVideoFrames||0,e.corrupted=i.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(e){var i=xi.langKeys.filter(function(a){return a===e});if(i.length===0&&e!=="zh"){console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(xi.langKeys.join(),"] "));return}this.config.lang=e,mt.setLang(e,this)}},{key:"i18n",get:function(){var e=this.config.lang;return e==="zh"&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return ol}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return ge(fe(n.prototype),"readyState",this)}},{key:"error",get:function(){var e=ge(fe(n.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){return ge(fe(n.prototype),"networkState",this)}},{key:"fullscreenChanging",get:function(){return this._fullScreenOffset!==null}},{key:"cumulateTime",get:function(){var e=this._accPlayed;return this.updateAcc("get"),e.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"videoRotateDeg",get:function(){return this.videoPos.rotate},set:function(e){e=k.convertDeg(e),!(e%90!==0||e===this.videoPos.rotate)&&(this.videoPos.rotate=e,this.resizePosition())}},{key:"avgSpeed",get:function(){return pd},set:function(e){pd=e}},{key:"realTimeSpeed",get:function(){return dd},set:function(e){dd=e}},{key:"hook",value:function(e,i){return Za.call.apply(Za,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,i){return Da.call.apply(Da,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,i){return Ea.call.apply(Ea,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,i,a){for(var o=arguments.length,l=new Array(o>3?o-3:0),u=3;u<o;u++)l[u-3]=arguments[u];return sd.call.apply(sd,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,i,a){for(var o=arguments.length,l=new Array(o>3?o-3:0),u=3;u<o;u++)l[u-3]=arguments[u];return ad.call.apply(ad,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,i){typeof i=="boolean"&&i!==this.muted&&(this.addInnerOP("volumechange"),this.muted=i),mt.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return We.config.debug},set:function(e){We.config.debug=e}},{key:"getCurrentUserActivePlayerId",value:function(){return mt.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,i){mt.setCurrentUserActive(e,i)}},{key:"isHevcSupported",value:function(){return Te.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return Te.probeConfigSupported(e)}},{key:"install",value:function(e,i){n.plugins||(n.plugins={}),n.plugins[e]||(n.plugins[e]=i)}},{key:"use",value:function(e,i){n.plugins||(n.plugins={}),n.plugins[e]=i}}]),n}(uT);K(pu,"defaultPreset",null);K(pu,"XgVideoProxy",null);function Xt(){return new Date().getTime()}var Zr={LOAD_START:"loadstart",LOADED_DATA:"loadeddata",FIRST_FRAME:"firstFrame",WAIT_START:"waitingStart",WAIT_END:"waitingEnd",SEEK_START:"seekStart",SEEK_END:"seekEnd"},RT=function(r){be(n,r);var s=Se(n);function n(){var t;ue(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),K(A(t),"_onTimeupdate",function(){t._state.isTimeUpdate=!0,t._state.autoplayStart&&(We.logInfo("[xgLogger]".concat(t.player.playerId," _onTimeupdate")),t._sendFF("onTimeupdate"))}),K(A(t),"_onAutoplayStart",function(){We.logInfo("[xgLogger]".concat(t.player.playerId," _onAutoplayStart")),t._state.autoplayStart=!0,t.vt&&t._sendFF("onAutoplayStart")}),K(A(t),"_onReset",function(){t._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},t.vt=0,t.pt=0,t.fvt=0,t.newPointTime=Xt(),t.loadedCostTime=0,t.startCostTime=0,t._isSeeking=!1,t.seekingStart=0,t.waitingStart=0,t.fixedWaitingStart=0,t._isWaiting=!1,t._waitTimer&&k.clearTimeout(A(t),t._waitTimer),t._waittTimer&&k.clearTimeout(A(t),t._waittTimer),t._waitTimer=null,t._waittTimer=null,t._waitType=0}),K(A(t),"_onSeeking",function(){t.seekingStart||(t.suspendWaitingStatus("seek"),t.seekingStart=Xt(),t.emitLog(Zr.SEEK_START,{start:Xt()}))}),K(A(t),"_onSeeked",function(){t.suspendSeekingStatus("seeked")}),K(A(t),"_onWaitingLoadStart",function(){t._isWaiting||t.vt||(t._isWaiting=!0,t.waitingStart=Xt(),t.fixedWaitingStart=Xt(),t._waitType=1,t.emitLog(Zr.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:1,endType:"loadstart"}))}),K(A(t),"_onWaiting",function(){t._isWaiting||!t.vt||(t._isWaiting=!0,t.vt?t.seekingStart?t._waitType=2:t._waitType=0:t._waitType=1,t.fixedWaitingStart=Xt(),t._waitTimer=k.setTimeout(A(t),function(){t._isWaiting&&(t.waitingStart=Xt(),k.clearTimeout(A(t),t._waitTimer),t._waitTimer=null,t._startWaitTimeout(),t.emitLog(Zr.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:t._waitType,endType:t._waitType===2?"seek":"playing"}))},200))}),K(A(t),"_onError",function(){t.suspendSeekingStatus("error"),t.suspendWaitingStatus("error")}),K(A(t),"_onPlaying",function(){t._isWaiting&&t.suspendWaitingStatus("playing")}),t}return ce(n,[{key:"afterCreate",value:function(){var e=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=Xt(),this.loadedCostTime=0,this.startCostTime=0,this.on(au,function(){var i=e._state,a=i.autoplayStart,o=i.isFFSend;e.startCostTime=Xt()-e.newPointTime,We.logInfo("[xgLogger]".concat(e.player.playerId," LOAD_START"),"autoplayStart:".concat(a," isFFSend:").concat(o," startCostTime:").concat(e.startCostTime," newPointTime").concat(e.newPointTime)),!o&&(!i.isLs&&e.emitLog(Zr.LOAD_START,{}),i.isLs=!0,i.isTimeUpdate=!1,i.isFFLoading=!0,e.pt=Xt(),e.vt=0,e.fvt=0,e._initOnceEvents(),e._onWaitingLoadStart())}),this.on(ai,function(){e.vt=Xt(),e.fvt=e.vt-e.pt,e.loadedCostTime=e.vt-e.newPointTime;var i=e._state,a=i.isTimeUpdate,o=i.isFFSend,l=i.autoplayStart;We.logInfo("[xgLogger]".concat(e.player.playerId," LOADED_DATA"),"fvt:".concat(e.fvt," isTimeUpdate:").concat(e._state.isTimeUpdate," loadedCostTime:").concat(e.loadedCostTime)),(a||l)&&e._sendFF("loadedData"),o||e.emitLog(Zr.LOADED_DATA,{}),e.suspendWaitingStatus("loadeddata")}),this.on(Fi,this._onSeeking),this.on(Gr,this._onSeeked),this.on(Gs,function(){e.endState("destroy")}),this.on(mr,function(){e.endState("urlChange"),We.logInfo("[xgLogger]".concat(e.player.playerId," URL_CHANGE")),e._state.isFFSend&&e._onReset()}),this.on([su,pr],this._onPlaying),this.on(si,this._onWaiting),this.on(fi,this._onError),this.on(to,function(){We.logInfo("[xgLogger]".concat(e.player.playerId," RESET")),e.endState("reset"),e._initOnceEvents(),e._onReset()})}},{key:"_initOnceEvents",value:function(){this.off(ti,this._onAutoplayStart),this.off(Mn,this._onTimeupdate),this.once(ti,this._onAutoplayStart),this.once(Mn,this._onTimeupdate)}},{key:"_sendFF",value:function(e){this.s=Xt();var i=this._state,a=i.isFFLoading,o=i.isFFSend;We.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(e," fvt:").concat(this.fvt," isFFLoading:").concat(a," !isFFSend:").concat(!o)),this.vt>0&&a&&!o&&(We.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),e),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog(Zr.FIRST_FRAME,{fvt:this.fvt,costTime:this.fvt,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&k.clearTimeout(this,this._waittTimer),this._waittTimer=k.setTimeout(this,function(){e.suspendWaitingStatus("timeout"),k.clearTimeout(e,e._waittTimer),e._waittTimer=null},this.config.waitTimeout)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var i=Xt(),a=i-this.seekingStart;this.seekingStart=0,this.emitLog(Zr.SEEK_END,{end:i,costTime:a,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(k.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(k.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,!!this.waitingStart){var i=Xt(),a=i-this.waitingStart,o=i-this.fixedWaitingStart,l=this.config.waitTimeout;this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0,this.emitLog(Zr.WAIT_END,{fixedCostTime:o>l?l:o,costTime:a>l?l:a,type:e==="loadeddata"?1:this._waitType,endType:this._waitType===2?"seek":e})}}},{key:"emitLog",value:function(e,i){var a=this.player;this.emit(Oh,ht({t:Xt(),host:k.getHostFromUrl(a.currentSrc),vtype:a.vtype,eventType:e,currentTime:this.player.currentTime,readyState:a.video.readyState,networkState:a.video.networkState},i))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}]),n}(Ue);function IT(){return new DOMParser().parseFromString(`<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">
  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>
</svg>
`,"image/svg+xml").firstChild}var PT=function(r){be(n,r);var s=Se(n);function n(){return ue(this,n),s.apply(this,arguments)}return ce(n,[{key:"registerIcons",value:function(){return{replay:IT}}},{key:"afterCreate",value:function(){var e=this;Ue.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",function(){e.player.replay()},{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(hi,function(){if(e.playerConfig.loop||k.addClass(e.player.root,"replay"),!e.config.disable){e.show();var i=e.root.querySelector("path");if(i){var a=window.getComputedStyle(i).getPropertyValue("transform");if(typeof a=="string"&&a.indexOf("none")>-1)return null;i.setAttribute("transform",a)}}}),this.on(wn,function(){e.hide()})}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),k.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return`<xg-replay class="xgplayer-replay">
      <xg-replay-txt class="xgplayer-replay-txt" lang-key="`.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,`</xg-replay-txt>
    </xg-replay>`)}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),n}(Ue),MT=function(r){be(n,r);var s=Se(n);function n(){return ue(this,n),s.apply(this,arguments)}return ce(n,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){k.addClass(this.root,"hide")}},{key:"show",value:function(){k.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){typeof e.player.config.poster=="string"&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(hi,function(){e.isEndedShow&&k.removeClass(e.root,"hide")}),this.config.hideCanplay?(this.once(Mn,function(){e.onTimeUpdate()}),this.on(mr,function(){k.removeClass(e.root,"hide"),k.addClass(e.root,"xg-showplay"),e.once(Mn,function(){e.onTimeUpdate()})})):this.on(wn,function(){k.addClass(e.root,"hide")})}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?k.removeClass(this.root,"xg-showplay"):this.once(Mn,function(){e.onTimeUpdate()})}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,i=e.poster,a=e.hideCanplay,o=i?"background-image:url(".concat(i,");"):"";return'<xg-poster class="xgplayer-poster '.concat(a?"xg-showplay":"",'" style="').concat(o,`">
    </xg-poster>`)}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),n}(Ue);function hu(){return new DOMParser().parseFromString(`<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>
</svg>
`,"image/svg+xml").firstChild}function fu(){return new DOMParser().parseFromString(`<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>
</svg>
`,"image/svg+xml").firstChild}var Yn={};function XT(r,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{start:null,end:null};return Yn[r]&&window.clearTimeout(Yn[r].id),Yn[r]={},n.start&&n.start(),Yn[r].id=window.setTimeout(function(){n.end&&n.end(),window.clearTimeout(Yn[r].id),delete Yn[r]},s),Yn[r].id}function hd(r){if(r){window.clearTimeout(r);return}Object.keys(Yn).map(function(s){window.clearTimeout(Yn[s].id),delete Yn[s]})}var GT=function(r){be(n,r);var s=Se(n);function n(t){var e;return ue(this,n),e=s.call(this,t),K(A(e),"onPlayerReset",function(){e.autoPlayStart=!1;var i=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),k.removeClass(e.root,i),e.show()}),K(A(e),"onAutoplayStart",function(){if(!e.autoPlayStart){var i=e.config.mode==="auto"?"auto-hide":"hide";k.addClass(e.root,i),e.autoPlayStart=!0,e.onPlayPause("play")}}),e.autoPlayStart=!1,e}return ce(n,[{key:"afterCreate",value:function(){var e=this,i=this.player,a=this.playerConfig;this.initIcons(),this.once(lu,function(){a&&(a.lang&&a.lang==="en"?k.addClass(i.root,"lang-is-en"):a.lang==="jp"&&k.addClass(i.root,"lang-is-jp"))}),this.on(ti,this.onAutoplayStart),a.autoplay||this.show(),this.on(uu,function(){var o=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),k.removeClass(e.root,o),e.show()}),this.on(wn,function(){e.onPlayPause("play")}),this.on(Ui,function(){e.onPlayPause("pause")}),this.on(to,function(){e.onPlayerReset()}),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(l){l.cancelable&&l.preventDefault(),l.stopPropagation();var u=e.player.paused;e.emitUserAction(l,"switch_play_pause",{props:"paused",from:u,to:!u})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:hu,class:"xg-icon-play"},startPause:{icon:fu,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){k.addClass(this.root,"hide")}},{key:"show",value:function(){k.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){k.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){k.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var i=this;this._animateId=XT("pauseplay",400,{start:function(){k.addClass(i.root,"interact"),i.show(),i.switchStatus(!0)},end:function(){k.removeClass(i.root,"interact"),!e&&i.hide(),i._animateId=null}})}},{key:"endAnimate",value:function(){k.removeClass(this.root,"interact"),hd(this._animateId),this._animateId=null}},{key:"switchPausePlay",value:function(e){var i=this.player;if(e.cancelable&&e.preventDefault(),e.stopPropagation(),!(i.state<Ve.READY)){var a=this.player.paused;!a&&i.state===Ve.RUNNING?i.pause():i.play()}}},{key:"onPlayPause",value:function(e){var i=this.config,a=this.player;if(!(!a||a.state<Ve.RUNNING||!this.autoPlayStart)){if(i.mode==="show"){this.switchStatus(),this.show();return}if(i.mode==="auto"){this.switchStatus();return}if(i.isShowPause&&a.paused&&!a.ended||i.isShowEnd&&a.ended){this.switchStatus(),this.show(),this.endAnimate();return}if(i.disableAnimate){this.switchStatus(),this.hide();return}if(e==="play")this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||a.ended)return;this.animate()}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),hd(this._animateId)}},{key:"render",value:function(){var e=this.playerConfig.autoplay?this.config.mode==="auto"?"auto-hide":"hide":"";return`
    <xg-start class="xgplayer-start `.concat(e,`">
    <xg-start-inner></xg-start-inner>
    </xg-start>`)}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),n}(Ue),WT=function(r){be(n,r);var s=Se(n);function n(){return ue(this,n),s.apply(this,arguments)}return ce(n,[{key:"render",value:function(){var e=this.config.innerHtml,i=k.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)i.appendChild(e);else if(e&&typeof e=="string")i.innerHTML=e;else{for(var a="",o=1;o<=12;o++)a+='<div class="xgplayer-enter-bar'.concat(o,'"></div>');i.innerHTML='<div class="xgplayer-enter-spinner">'.concat(a,"</div>")}return i}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),n}(Ue);function Nr(r,s,n){try{return' <div class="xg-tips '.concat(n?"hide":" ",'" lang-key="').concat(r.i18nKeys[s],`">
    `).concat(r.i18n[s],`
    </div>`)}catch{return'<div class="xg-tips hide"></div>'}}var fd=function(r){be(n,r);var s=Se(n);function n(){return ue(this,n),s.apply(this,arguments)}return ce(n,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return`
      <xg-icon class="xgplayer-miniicon">
      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="`.concat(this.i18nKeys[e],'">').concat(this.i18n[e],`</span></div>
      </xg-icon>`)}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:10}}}]),n}(Ue);function md(r){var s=parseFloat(r),n=r.indexOf("%")===-1&&!Number.isNaN(s);return n&&s}var mu=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],$h=mu.length;function VT(){for(var r={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},s=0;s<$h;s++){var n=mu[s];r[n]=0}return r}function AT(r){var s=window.getComputedStyle(r);return s}function vd(r){if(typeof r=="string"&&(r=document.querySelector(r)),!(!r||Ht(r)!=="object"||!r.nodeType)){var s=AT(r);if(s.display==="none")return VT();var n={};n.width=r.offsetWidth,n.height=r.offsetHeight;for(var t=n.isBorderBox=s.boxSizing==="border-box",e=0;e<$h;e++){var i=mu[e],a=s[i],o=parseFloat(a);n[i]=Number.isNaN(o)?0:o}var l=n.paddingLeft+n.paddingRight,u=n.paddingTop+n.paddingBottom,c=n.marginLeft+n.marginRight,d=n.marginTop+n.marginBottom,p=n.borderLeftWidth+n.borderRightWidth,h=n.borderTopWidth+n.borderBottomWidth,m=t,f=md(s.width);f!==!1&&(n.width=f+(m?0:l+p));var v=md(s.height);return v!==!1&&(n.height=v+(m?0:u+h)),n.innerWidth=n.width-(l+p),n.innerHeight=n.height-(u+h),n.outerWidth=n.width+c,n.outerHeight=n.height+d,n}}function Fo(r,s){for(var n=0;n<r.length;n++){var t=r[n];if(t.identifier===s)return t}}var Ro={START:"dragStart",MOVE:"dragMove",ENDED:"dragEnded"},yd={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},NT=function(r){be(n,r);var s=Se(n);function n(t){var e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ue(this,n),e=s.call(this),e.isEnabled=!0,e.isDragging=!1,e.isDown=!1,e.position={},e.downPoint={},e.dragPoint={x:0,y:0},e.startPos={x:0,y:0},e._root=t instanceof Element?t:document.querySelector(t),e._handlerDom=i.handle instanceof Element?i.handle:document.querySelector(i.handle),!e._root||!e._handlerDom?iu(e):(e._bindStartEvent(),e)}return ce(n,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),yd[this._startKey].map(function(i){e["on".concat(i)]=e["on".concat(i)].bind(e)})}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var i=this;if(e){var a=yd[this._startKey];a.map(function(o){window.addEventListener(o,i["on".concat(o)])}),this._boundPointerEvents=a}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map(function(i){window.removeEventListener(i,e["on".concat(i)])}),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame(function(){e.animate()}))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var i=e.changedTouches[0];this.dragStart(e,i),this.touchIdentifier=i.pointerId!==void 0?i.pointerId:i.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var i=Fo(e.changedTouches,this.touchIdentifier);i&&this.dragMove(e,i)}},{key:"ontouchend",value:function(e){var i=Fo(e.changedTouches,this.touchIdentifier);i&&this.dragEnd(e,i),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var i=Fo(e.changedTouches,this.touchIdentifier);i&&this.dragCancel(e,i)}},{key:"dragStart",value:function(e,i){if(!(!this._root||this.isDown||!this.isEnabled)){this.downPoint=i,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var a=vd(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-a.height,this.startPos.maxX=window.innerWidth-a.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,i){this.isDragging=!0,this.animate(),this.emit(Ro.START,this.startPos)}},{key:"dragEnd",value:function(e,i){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(Ro.ENDED)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,i){var a={x:i.pageX-this.downPoint.pageX,y:i.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(a)&&this.dragRealStart(e,i),a}},{key:"dragMove",value:function(e,i){if(e=e||window.event,!!this.isDown){var a=this.startPos,o=a.x,l=a.y,u=this._dragPointerMove(e,i),c=u.x,d=u.y;c=this.checkContain("x",c,o),d=this.checkContain("y",d,l),this.position.x=o+c,this.position.y=l+d,this.dragPoint.x=c,this.dragPoint.y=d,this.emit(Ro.MOVE,this.position)}}},{key:"dragCancel",value:function(e,i){this.dragEnd(e,i)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,i,a){return i+a<0?0-a:e==="x"&&i+a>this.startPos.maxX?this.startPos.maxX-a:e==="y"&&i+a>this.startPos.maxY?this.startPos.maxY-a:i}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),i=this._getPositionCoord(e.left,"width"),a=this._getPositionCoord(e.top,"height");this.position.x=Number.isNaN(i)?0:i,this.position.y=Number.isNaN(a)?0:a,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var i=e.transform;if(i.indexOf("matrix")===0){var a=i.split(","),o=i.indexOf("matrix3d")===0?12:4,l=parseInt(a[o],10),u=parseInt(a[o+1],10);this.position.x+=l,this.position.y+=u}}},{key:"_getPositionCoord",value:function(e,i){if(e.indexOf("%")!==-1){var a=vd(this._root.parentNode);return a?parseFloat(e)/100*a[i]:0}return parseInt(e,10)}}]),n}(qn),OT=function(r){be(n,r);var s=Se(n);function n(t){var e;ue(this,n),e=s.call(this,t),K(A(e),"onCancelClick",function(o){e.exitMini(),e.isClose=!0}),K(A(e),"onCenterClick",function(o){var l=A(e),u=l.player;u.paused?u.play():u.pause()}),K(A(e),"onScroll",function(o){if(!(!window.scrollY&&window.scrollY!==0||Math.abs(window.scrollY-e.pos.scrollY)<50)){var l=parseInt(k.getCss(e.player.root,"height"));l+=e.config.scrollTop,e.pos.scrollY=window.scrollY,window.scrollY>l+5?!e.isMini&&!e.isClose&&e.getMini():window.scrollY<=l&&(e.isMini&&e.exitMini(),e.isClose=!1)}}),e.isMini=!1,e.isClose=!1;var i=A(e),a=i.config;return e.pos={left:a.left<0?window.innerWidth-a.width-20:a.left,top:a.top<0?window.innerHeight-a.height-20:a.top,height:e.config.height,width:e.config.width,scrollY:window.scrollY||0},e.lastStyle=null,e}return ce(n,[{key:"beforeCreate",value:function(e){typeof e.player.config.mini=="boolean"&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(Ui,function(){e.setAttr("data-state","pause")}),this.on(wn,function(){e.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var e=this,i=this.player,a=this.config;if(!a.disable){if(this.config.isShowIcon){var o={config:{onClick:function(){e.getMini()}}};i.controls.registerPlugin(fd,o,fd.pluginName)}var l=k.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",l,this.onCancelClick),this.bind(".play-icon",l,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new NT(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:hu,class:"xg-icon-play"},pause:{icon:fu,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var i=this.player,a=this.playerConfig,o=this.config.target||this.player.root;this.lastStyle={},k.addClass(i.root,"xgplayer-mini"),["width","height","top","left"].map(function(l){e.lastStyle[l]=o.style[l],o.style[l]="".concat(e.pos[l],"px")}),a.fluid&&(o.style["padding-top"]=""),this.emit(La,!0),i.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var i=this.player,a=this.playerConfig,o=this.config.target||this.player.root;k.removeClass(i.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(l){o.style[l]=e.lastStyle[l]}),this.lastStyle=null,a.fluid&&(i.root.style.width="100%",i.root.style.height="0",i.root.style["padding-top"]="".concat(a.height*100/a.width,"%")),this.emit(La,!1),this.isMini=i.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=k.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return`
      <xg-mini-layer class="xg-mini-layer">
      <xg-mini-header class="xgplayer-mini-header">
      `.concat(Nr(this,"MINI_DRAG",this.playerConfig.isHideTips),`
      </xg-mini-header>
      <div class="mini-cancel-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>
        </svg>
      </div>
      <div class="play-icon">
      </div>
      </xg-mini-layer>`)}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),n}(Ue),$s={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},Io=["videoClick","videoDbClick"],Po=function(r){be(n,r);var s=Se(n);function n(){var t;ue(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),K(A(t),"onMouseMove",function(o){var l=A(t),u=l.player,c=l.playerConfig;u.isActive||(u.focus({autoHide:!c.closeDelayBlur}),!c.closeFocusVideoFocus&&u.media.focus())}),K(A(t),"onMouseEnter",function(o){var l=A(t),u=l.playerConfig,c=l.player;!u.closeFocusVideoFocus&&c.media.focus(),u.closeDelayBlur?c.focus({autoHide:!1}):c.focus()}),K(A(t),"onMouseLeave",function(o){var l=t.playerConfig,u=l.closePlayerBlur,c=l.leavePlayerTime,d=l.closeDelayBlur;!u&&!d&&(c?t.player.focus({autoHide:!0,delay:c}):t.player.blur())}),K(A(t),"onVideoClick",function(o){var l=A(t),u=l.player,c=l.playerConfig;o.target&&c.closeVideoClick||(o.target===u.root||o.target===u.media||o.target===u.innerContainer||o.target===u.media.__canvas)&&(o.preventDefault(),c.closeVideoStopPropagation||o.stopPropagation(),t._clickCount++,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),t.clickTimer=setTimeout(function(){t._clickCount&&(t._clickCount--,cr(A(t),Io[0],function(d,p){t.switchPlayPause(p.e)},{e:o,paused:u.paused}),clearTimeout(t.clickTimer),t.clickTimer=null)},300))}),K(A(t),"onVideoDblClick",function(o){var l=A(t),u=l.player,c=l.playerConfig;if(!(c.closeVideoDblclick||!o.target||o.target!==u.media&&o.target!==u.media.__canvas)){if(!c.closeVideoClick&&t._clickCount<2){t._clickCount=0;return}t._clickCount=0,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),o.preventDefault(),o.stopPropagation(),cr(A(t),Io[1],function(d,p){t.emitUserAction(p.e,"switch_fullscreen",{props:"fullscreen",from:u.fullscreen,to:!u.fullscreen}),u.fullscreen?u.exitFullscreen():u.getFullscreen()},{e:o,fullscreen:u.fullscreen})}}),t}return ce(n,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,Io.map(function(a){e.__hooks[a]=null});var i=this.playerConfig.isMobileSimulateMode;i==="mobile"||Te.device==="mobile"&&!Te.os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var e=this,i=this.player,a=i.video,o=i.root,l=this.playerConfig.enableContextmenu;o&&o.addEventListener("click",this.onVideoClick,!1),o&&o.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys($s).map(function(u){o.addEventListener(u,e[$s[u]],!1)}),l&&a&&a.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var i=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:i.paused,to:!i.paused}),i.ended?i.duration!==1/0&&i.duration>0&&i.replay():i.paused?i.play():i.pause()}},{key:"onContextmenu",value:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,i=this.player,a=i.video,o=i.root;this.clickTimer&&clearTimeout(this.clickTimer),o.removeEventListener("click",this.onVideoClick,!1),o.removeEventListener("dblclick",this.onVideoDblClick,!1),a.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys($s).map(function(l){o.removeEventListener(l,e[$s[l]],!1)})}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),n}(pn),Dr={PRESS:"press",PRESS_END:"pressend",DOUBlE_CLICK:"doubleclick",CLICK:"click",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",TOUCH_END:"touchend"},YT={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},HT={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function gd(r){return r&&r.length>0?r[r.length-1]:null}function KT(){return{pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0}}var UT=function(){function r(s){var n=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{eventType:"touch"};ue(this,r),this._pos={moving:!1,start:!1,x:0,y:0},this.config=KT(),Object.keys(t).map(function(e){n.config[e]=t[e]}),this.root=s,this.events=t.eventType==="mouse"?HT:YT,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return ce(r,[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(n){var t=this,e=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout(function(){t.trigger(Dr.PRESS,n),t._pos.press=!0,t.__clearPress()},e.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(n){var t=this,e=this.config;if(this.dbIntrvalId){this.__clearDb(),this.trigger(Dr.DOUBlE_CLICK,n);return}this.dbIntrvalId=setTimeout(function(){t.__clearDb(),!t._pos.start&&!t._pos.press&&!t._pos.moving&&t.trigger(Dr.CLICK,n)},e.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(n,t){this.__handlers[n]||(this.__handlers[n]=[]),this.__handlers[n].push(t)}},{key:"off",value:function(n,t){if(this.__handlers[n]){for(var e=this.__handlers[n],i=-1,a=0;a<e.length;a++)if(e[a]===t){i=a;break}i>=0&&this.__handlers[n].splice(i,1)}}},{key:"trigger",value:function(n,t){this.__handlers[n]&&this.__handlers[n].map(function(e){try{e(t)}catch(i){console.error("trigger>>:".concat(n),i)}})}},{key:"onTouchStart",value:function(n){var t=this._pos,e=this.root,i=gd(n.touches);t.x=i?parseInt(i.pageX,10):n.pageX,t.y=i?parseInt(i.pageX,10):n.pageX,t.start=!0,this.__setPress(n),e.addEventListener(this.events.end,this.onTouchEnd),e.addEventListener(this.events.cancel,this.onTouchCancel),e.addEventListener(this.events.move,this.onTouchMove),this.trigger(Dr.TOUCH_START,n)}},{key:"onTouchCancel",value:function(n){this.onTouchEnd(n)}},{key:"onTouchEnd",value:function(n){var t=this._pos,e=this.root;this.__clearPress(),e.removeEventListener(this.events.cancel,this.onTouchCancel),e.removeEventListener(this.events.end,this.onTouchEnd),e.removeEventListener(this.events.move,this.onTouchMove),n.moving=t.moving,n.press=t.press,t.press&&this.trigger(Dr.PRESS_END,n),this.trigger(Dr.TOUCH_END,n),!t.press&&!t.moving&&this.__setDb(n),t.press=!1,t.start=!1,t.moving=!1}},{key:"onTouchMove",value:function(n){var t=this._pos,e=this.config,i=gd(n.touches),a=i?parseInt(i.pageX,10):n.pageX,o=i?parseInt(i.pageY,10):n.pageX,l=a-t.x,u=o-t.y;Math.abs(u)<e.miniStep&&Math.abs(l)<e.miniStep||(this.__clearPress(),t.press&&this.trigger(Dr.PRESS_END,n),t.press=!1,t.moving=!0,this.trigger(Dr.TOUCH_MOVE,n))}},{key:"destroy",value:function(){var n=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).map(function(e){n.root.removeEventListener("touchend",n[t[e]])})}}]),r}();function zT(){return new DOMParser().parseFromString(`<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <path opacity="0.54"
    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"
    fill="white" />
  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>
</svg>`,"image/svg+xml").firstChild}var wi={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate",LIGHT:""},Mo=["videoClick","videoDbClick"],BT=function(r){be(n,r);var s=Se(n);function n(t){var e;return ue(this,n),e=s.call(this,t),K(A(e),"onTouchStart",function(i){var a=A(e),o=a.player,l=a.config,u=a.pos,c=a.playerConfig,d=e.getTouche(i);if(d&&!l.disableGesture&&e.duration>0&&!o.ended){u.isStart=!0,k.checkIsFunction(c.disableSwipeHandler)&&c.disableSwipeHandler(),e.find(".xg-dur").innerHTML=k.format(e.duration);var p=e.root.getBoundingClientRect();o.rotateDeg===90?(u.top=p.left,u.left=p.top,u.width=p.height,u.height=p.width):(u.top=p.top,u.left=p.left,u.width=p.width,u.height=p.height);var h=parseInt(d.pageX-u.left,10),m=parseInt(d.pageY-u.top,10);u.x=o.rotateDeg===90?m:h,u.y=o.rotateDeg===90?h:m,u.scopeL=l.scopeL*u.width,u.scopeR=(1-l.scopeR)*u.width,u.scopeM1=u.width*(1-l.scopeM)/2,u.scopeM2=u.width-u.scopeM1}}),K(A(e),"onTouchMove",function(i){var a=e.getTouche(i),o=A(e),l=o.pos,u=o.config,c=o.player;if(!(!a||u.disableGesture||!e.duration||!l.isStart)){var d=u.miniMoveStep,p=u.hideControlsActive,h=parseInt(a.pageX-l.left,10),m=parseInt(a.pageY-l.top,10),f=c.rotateDeg===90?m:h,v=c.rotateDeg===90?h:m;if(Math.abs(f-l.x)>d||Math.abs(v-l.y)>d){var b=f-l.x,w=v-l.y,C=l.scope;if(C===-1&&(C=e.checkScope(f,v,b,w,l),C===0&&(p?c.blur():c.focus({autoHide:!1}),!l.time&&(l.time=parseInt(c.currentTime*1e3,10)+e.timeOffset*1e3)),l.scope=C),C===-1||C>0&&!u.gestureY||C===0&&!u.gestureX)return;i.cancelable&&i.preventDefault(),e.executeMove(b,w,C,l.width,l.height),l.x=f,l.y=v}}}),K(A(e),"onTouchEnd",function(i){var a=A(e),o=a.player,l=a.pos,u=a.playerConfig;if(l.isStart){l.scope>-1&&i.cancelable&&i.preventDefault();var c=e.config,d=c.disableGesture,p=c.gestureX;!d&&p?(e.endLastMove(l.scope),setTimeout(function(){o.getPlugin("progress")&&o.getPlugin("progress").resetSeekState()},10)):l.time=0,l.scope=-1,e.resetPos(),k.checkIsFunction(u.enableSwipeHandler)&&u.enableSwipeHandler(),e.changeAction(wi.AUTO)}}),K(A(e),"onRootTouchMove",function(i){e.config.disableGesture||!e.config.gestureX||e.checkIsRootTarget(i)&&(i.stopPropagation(),e.pos.isStart?e.onTouchMove(i):e.onTouchStart(i))}),K(A(e),"onRootTouchEnd",function(i){e.pos.isStart&&e.checkIsRootTarget(i)&&(i.stopPropagation(),e.onTouchEnd(i))}),e.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},e.timer=null,e}return ce(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:zT,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this;Mo.map(function(d){e.__hooks[d]=null});var i=this.playerConfig,a=this.config,o=this.player;i.closeVideoDblclick===!0&&(a.closedbClick=!0),this.resetPos(),k.isUndefined(i.disableGesture)||(a.disableGesture=!!i.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=k.createDom("xg-mask","",{},"xgmask"),o.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var l=this.domEventType==="mouse"?"mouse":"touch";this.touch=new UT(this.root,{eventType:l,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",function(d){d.preventDefault()}),o.root.addEventListener("touchmove",this.onRootTouchMove,!0),o.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(mi,function(){var d=e.player,p=e.config;d.duration*1e3<p.moveDuration&&(p.moveDuration=d.duration*1e3)}),this.on([pr,hi],function(){var d=e.pos,p=d.time,h=d.isStart;!h&&p>0&&(e.pos.time=0)});var u={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(u).map(function(d){e.touch.on(d,function(p){e[u[d]](p)})}),!a.disableActive){var c=o.plugins.progress;c&&(c.addCallBack("dragmove",function(d){e.activeSeekNote(d.currentTime,d.forward)}),c.addCallBack("dragend",function(){e.changeAction(wi.AUTO)}))}}},{key:"registerThumbnail",value:function(){var e=this.player,i=e.plugins.thumbnail;if(i&&i.usable){this.thumbnail=i.createThumbnail(null,"mobile-thumbnail");var a=this.find(".time-preview");a.insertBefore(this.thumbnail,a.children[0])}}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},i=e.commonStyle,a=i.playedColor,o=i.progressColor;a&&(this.find(".xg-curbar").style.backgroundColor=a,this.find(".xg-cur").style.color=a),o&&(this.find(".xg-bar").style.backgroundColor=o,this.find(".time-preview").style.color=o),this.config.disableTimeProgress&&k.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map(function(i){e.pos[i]=0})):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var i=this.player,a=this.root;a.setAttribute("data-xg-action",e);var o=i.plugins.start;o&&o.recover()}},{key:"getTouche",value:function(e){var i=this.player.rotateDeg,a=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return i===0?{pageX:a.pageX,pageY:a.pageY}:{pageX:a.pageX,pageY:a.pageY}}},{key:"checkScope",value:function(e,i,a,o,l){var u=l.width,c=-1;if(e<0||e>u)return c;var d=Math.abs(o===0?a:a/o);return Math.abs(a)>0&&d>=1.73&&e>l.scopeM1&&e<l.scopeM2?c=0:(Math.abs(a)===0||d<=.57)&&(c=e<l.scopeL?1:e>l.scopeR?2:3),c}},{key:"executeMove",value:function(e,i,a,o,l){switch(a){case 0:this.updateTime(e/o*this.config.scopeM);break;case 1:this.updateBrightness(i/l);break;case 2:Te.os.isIos||this.updateVolume(i/l);break}}},{key:"endLastMove",value:function(e){var i=this,a=this.pos,o=this.player,l=this.config,u=(a.time-this.timeOffset)/1e3;switch(e){case 0:o.seek(Number(u).toFixed(1)),l.hideControlsEnd?o.blur():o.focus(),this.timer=setTimeout(function(){i.pos.time=0},500);break}this.changeAction(wi.AUTO)}},{key:"checkIsRootTarget",value:function(e){var i=this.player.plugins||{};return i.progress&&i.progress.root.contains(e.target)?!1:i.start&&i.start.root.contains(e.target)||i.controls&&i.controls.root.contains(e.target)}},{key:"sendUseAction",value:function(e){var i=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:i,to:!i})}},{key:"clickHandler",value:function(e){var i=this.player,a=this.config,o=this.playerConfig;if(i.state<Ve.RUNNING){o.closeVideoClick||(this.sendUseAction(k.createEvent("click")),i.play());return}!a.closedbClick||o.closeVideoClick?i.isActive?i.blur():i.focus():o.closeVideoClick||((i.isActive||a.focusVideoClick)&&(this.sendUseAction(k.createEvent("click")),this.switchPlayPause()),i.focus())}},{key:"dbClickHandler",value:function(e){var i=this.config,a=this.player;!i.closedbClick&&a.state>=Ve.RUNNING&&(this.sendUseAction(k.createEvent("dblclick")),this.switchPlayPause())}},{key:"onClick",value:function(e){var i=this,a=this.player;cr(this,Mo[0],function(o,l){i.clickHandler(l.e)},{e,paused:a.paused})}},{key:"onDbClick",value:function(e){var i=this,a=this.player;cr(this,Mo[1],function(o,l){i.dbClickHandler(l.e)},{e,paused:a.paused})}},{key:"onPress",value:function(e){var i=this.pos,a=this.config,o=this.player;a.disablePress||(i.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:o.playbackRate,to:a.pressRate}),o.playbackRate=a.pressRate,this.changeAction(wi.PLAYBACK))}},{key:"onPressEnd",value:function(e){var i=this.pos,a=this.config,o=this.player;a.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:o.playbackRate,to:i.rate}),o.playbackRate=i.rate,i.rate=1,this.changeAction(wi.AUTO))}},{key:"updateTime",value:function(e){var i=this.player,a=this.config,o=this.player.duration;e=Number(e.toFixed(4));var l=parseInt(e*a.moveDuration,10)+this.timeOffset;l+=this.pos.time,l=l<0?0:l>o*1e3?o*1e3-200:l,i.getPlugin("time")&&i.getPlugin("time").updateTime(l/1e3),i.getPlugin("progress")&&i.getPlugin("progress").updatePercent(l/1e3/this.duration,!0),this.activeSeekNote(l/1e3,e>0),a.isTouchingSeek&&i.seek(Number((l-this.timeOffset)/1e3).toFixed(1)),this.pos.time=l}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var i=this.player,a=this.pos;if(e=parseInt(e*100,10),a.volume+=e,!(Math.abs(a.volume)<10)){var o=parseInt(i.volume*10,10)-parseInt(a.volume/10,10);o=o>10?10:o<1?0:o,i.volume=o/10,a.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var i=this.pos,a=this.config,o=this.xgMask,l=i.light+.8*e;l=l>a.maxDarkness?a.maxDarkness:l<0?0:l,o&&(o.style.backgroundColor="rgba(0,0,0,".concat(l,")")),i.light=l}},{key:"activeSeekNote",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=this.player,o=this.config,l=!(this.duration!==1/0&&this.duration>0);if(!(!e||typeof e!="number"||l||o.disableActive)){e<0?e=0:e>a.duration&&(e=a.duration-.2),this.changeAction(wi.SEEKING);var u=a.plugins.start;u&&u.focusHide(),this.find(".xg-dur").innerHTML=k.format(this.duration),this.find(".xg-cur").innerHTML=k.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),i?k.removeClass(this.find(".xg-seek-show"),"xg-back"):k.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var i=this.player,a=i.plugins.thumbnail;a&&a.usable&&this.thumbnail&&a.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<Ve.ATTACHED)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e=this.config.gradient!=="normal"?"gradient ".concat(this.config.gradient):"gradient";return`
     <xg-trigger class="trigger">
     <div class="`.concat(e,`"></div>
        <div class="time-preview">
            <div class="xg-seek-show `).concat(this.config.disableSeekIcon?" hide-seek-icon":"",`">
              <i class="xg-seek-icon"></i>
              <span class="xg-cur">00:00</span>
              <span>/</span>
              <span class="xg-dur">00:00</span>
            </div>
              <div class="xg-bar xg-timebar">
                <div class="xg-curbar"></div>
              </div>
        </div>
        <div class="xg-playbackrate xg-top-note">
            <span><i>`).concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,`</span>
        </div>
     </xg-trigger>
    `)}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:60*6*1e3,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),n}(Ue);function bd(r){r.preventDefault(),r.returnValue=!1}function jT(r){var s=r.tagName;return!!(s==="INPUT"||s==="TEXTAREA"||r.isContentEditable)}var Sd=function(r){be(n,r);var s=Se(n);function n(){var t;ue(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),K(A(t),"onBodyKeyDown",function(o){var l=o||window.event;if(!(!t.player||!t.player.isUserActive&&!t.config.isIgnoreUserActive)&&!(t.config.disable||t.config.disableBodyTrigger||!t.checkIsVisible()||l.metaKey||l.altKey||l.ctrlKey)){var u=l.keyCode;return(l.target===document.body||t.config.isGlobalTrigger&&!jT(l.target))&&t.checkCode(u,!0)&&(bd(l),t.handleKeyCode(u,o)),!1}}),K(A(t),"onKeydown",function(o){var l=o||window.event;if(!(t.config.disable||t.config.disableRootTrigger||l.metaKey||l.altKey||l.ctrlKey)&&!(!t.player.isUserActive&&!t.config.isIgnoreUserActive)&&!(!t.player.isUserActive&&!t.config.isIgnoreUserActive)){if(l&&(l.keyCode===37||t.checkCode(l.keyCode))&&(l.target===t.player.root||l.target===t.player.video||l.target===t.player.controls.el))bd(l);else return!0;t.handleKeyCode(l.keyCode,o)}}),t}return ce(n,[{key:"mergekeyCodeMap",value:function(){var e=this,i=this.config.keyCodeMap;i&&Object.keys(i).map(function(a){e.keyCodeMap[a]?["keyCode","action","disable","isBodyTarget"].map(function(o){i[a][o]&&(e.keyCodeMap[a][o]=i[a][o])}):e.keyCodeMap[a]=i[a]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e=typeof this.config.seekStep=="function"?this.config.seekStep(this.player):this.config.seekStep;!e||typeof e!="number"||(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),i=e.height,a=e.top,o=e.bottom,l=window.innerHeight;return!(a<0&&a<0-i*.9||o>0&&o-l>i*.9)}},{key:"checkCode",value:function(e,i){var a=this,o=!1;return Object.keys(this.keyCodeMap).map(function(l){a.keyCodeMap[l]&&e===a.keyCodeMap[l].keyCode&&!a.keyCodeMap[l].disable&&(o=!i||i&&!a.keyCodeMap[l].noBodyTarget)}),o}},{key:"downVolume",value:function(e){var i=this.player,a=parseFloat((i.volume-.1).toFixed(1)),o={volume:{from:i.volume,to:a}};this.emitUserAction(e,"change_volume",{props:o}),a>=0?i.volume=a:i.volume=0}},{key:"upVolume",value:function(e){var i=this.player,a=parseFloat((i.volume+.1).toFixed(1)),o={volume:{from:i.volume,to:a}};this.emitUserAction(e,"change_volume",{props:o}),a<=1?i.volume=a:i.volume=1}},{key:"seek",value:function(e){var i=this.player,a=i.currentTime,o=i.duration,l=a;a+this.seekStep<=o?l=a+this.seekStep:l=o;var u={currentTime:{from:a,to:l}};this.emitUserAction(e,"seek",{props:u}),this.player.currentTime=l}},{key:"seekBack",value:function(e){var i=this.player.currentTime,a=0;i-this.seekStep>=0&&(a=i-this.seekStep);var o={currentTime:{from:i,to:a}};this.emitUserAction(e,"seek",{props:o}),this.player.currentTime=a}},{key:"playPause",value:function(e){var i=this.player;i&&(this.emitUserAction(e,"switch_play_pause"),i.paused?i.play():i.pause())}},{key:"exitFullscreen",value:function(e){var i=this.player,a=i.fullscreen,o=i.cssfullscreen;a&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:a,to:!a}),i.exitFullscreen()),o&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:o,to:!o}),i.exitCssFullscreen())}},{key:"handleKeyCode",value:function(e,i){var a=this;Object.keys(this.keyCodeMap).map(function(o){var l=a.keyCodeMap[o],u=l.action,c=l.keyCode,d=l.disable;c===e&&!d&&(typeof u=="function"?u(i,a.player):typeof u=="string"&&typeof a[u]=="function"&&a[u](i,a.player),a.emit(Nh,ht({key:o,target:i.target},a.keyCodeMap[o])))})}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,isIgnoreUserActive:!1}}}]),n}(pn);function JT(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">
  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>
</svg>
`,"image/svg+xml").firstChild}var QT=function(r){be(n,r);var s=Se(n);function n(){return ue(this,n),s.apply(this,arguments)}return ce(n,[{key:"registerIcons",value:function(){return{loadingIcon:JT}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return`
    <xg-loading class="xgplayer-loading">
      <xg-loading-inner></xg-loading-inner>
    </xg-loading>`}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:st.ROOT}}}]),n}(Ue),$T=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],qT=function(){function r(s){ue(this,r),this.fragments=s.fragments||[],this.fragments.length===0&&this.fragments.push({percent:1}),this._callBack=s.actionCallback,this.fragConfig={fragFocusClass:s.fragFocusClass||"inner-focus-point",fragAutoFocus:!!s.fragAutoFocus,fragClass:s.fragClass||""},this.style=s.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}return ce(r,[{key:"updateDuration",value:function(n){var t=this;this.duration=n;var e=0,i=this.fragments;this.fragments=i.map(function(a){return a.start=parseInt(e,10),a.end=parseInt(e+a.percent*t.duration,10),a.duration=parseInt(a.percent*t.duration,10),e+=a.percent*t.duration,a})}},{key:"updateProgress",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"played",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},e=this.progressList,i=this.fragments;if(!(e.length<1)){var a=t.newIndex,o=t.curIndex,l=t.millisecond;a!==o&&e.map(function(d,p){p<a?d[n].style.width="100%":p>a&&(d[n].style.width=0)});var u=i[a],c=l===0?0:(l-u.start)/u.duration;e[a][n].style.width=c<0?0:"".concat(c*100,"%")}}},{key:"updateFocus",value:function(n){if(!(!this.fragConfig.fragAutoFocus||this.fragments.length<2)){if(!n){if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var t={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(t),this.focusIndex=-1}return}var e=this.findIndex(n.currentTime*1e3,this.focusIndex);if(e>=0&&e!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(e);var i={index:e,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=e,this._callBack&&this._callBack(i)}}}},{key:"update",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(t*1e3,10)!==this.duration){if(!t&&t!==0)return;this.updateDuration(parseInt(t*1e3,10))}var e=this.playedIndex,i=this.cachedIndex;if(k.typeOf(n.played)!=="Undefined"){var a=this.findIndex(n.played*1e3,e);if(a<0)return;this.updateProgress("played",{newIndex:a,curIndex:e,millisecond:parseInt(n.played*1e3,10)}),this.playedIndex=a}if(k.typeOf(n.cached)!=="Undefined"){var o=this.findIndex(n.cached*1e3,i);if(o<0)return;this.updateProgress("cached",{newIndex:o,curIndex:i,millisecond:parseInt(n.cached*1e3,10)}),this.cachedIndex=o}}},{key:"findIndex",value:function(n,t){var e=this.fragments;if(!e||e.length===0)return-1;if(e.length===1)return 0;if(t>-1&&t<e.length&&n>e[t].start&&n<e[t].end)return t;if(n>e[e.length-1].start)return e.length-1;for(var i=0;i<e.length;i++)if(n>e[i].start&&n<=e[i].end){t=i;break}return t}},{key:"findHightLight",value:function(){for(var n=this.root.children,t=0;t<n.length;t++)if(k.hasClass(n[t],this.fragConfig.fragFocusClass))return{dom:n[t],pos:n[t].getBoundingClientRect()}}},{key:"findFragment",value:function(n){var t=this.root.children;return n<0||n>=t.length?null:{dom:t[n],pos:t[n].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var n=this.root.children,t=0;t<n.length;t++)k.removeClass(n[t],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(n){var t=this.root.children;if(n<t.length)return k.addClass(t[n],this.fragConfig.fragFocusClass),{dom:t[n],pos:t[n].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(n){var t=this;if(Object.keys(this.fragConfig).forEach(function(i){n[i]!==void 0&&(t.fragConfig[i]=n[i])}),n.fragments){if(this.fragments=n.fragments.length===0?[{percent:1}]:n.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var e=this.root.children;e.length>0;)this.root.removeChild(e[0]);this.render()}}},{key:"render",value:function(){var n=this,t=this.style.progressColor;if(this.root||(this.root=k.createDom("xg-inners","",{},"progress-list")),this.fragments){var e=this.fragConfig,i=e.fragClass,a=e.fragFocusClass;this.progressList=this.fragments.map(function(o){var l=k.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(o.percent):"flex: ".concat(o.percent)},"".concat(o.isFocus?a:""," xgplayer-progress-inner ").concat(i));return n.root.appendChild(l),$T.forEach(function(u){l.appendChild(k.createDom(u.tag,"",{style:u.styleKey?"background: ".concat(n.style[u.styleKey],"; width:0;"):"width:0;"},u.className))}),{cached:l.children[0],played:l.children[1]}})}return this.root}}]),r}(),wd={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},ek=function(r){be(n,r);var s=Se(n);function n(t){var e;return ue(this,n),e=s.call(this,t),K(A(e),"onMoveOnly",function(i,a){var o=A(e),l=o.pos,u=o.config,c=o.player,d=a;if(i){k.event(i);var p=k.getEventPos(i,c.zoom),h=c.rotateDeg===90?p.clientY:p.clientX;if(l.moving&&Math.abs(l.x-h)<u.miniMoveStep)return;l.moving=!0,l.x=h,d=e.computeTime(i,h)}e.triggerCallbacks("dragmove",d,i),e._updateInnerFocus(d)}),K(A(e),"onBodyClick",function(i){e.pos.isLocked&&(e.pos.isLocked=!1,i.preventDefault(),i.stopPropagation())}),K(A(e),"_mouseDownHandler",function(i,a){e._state.time=a.currentTime,e.updateWidth(a.currentTime,a.percent,0),e._updateInnerFocus(a)}),K(A(e),"_mouseUpHandler",function(i,a){var o=A(e),l=o.pos;l.moving&&e.updateWidth(a.currentTime,a.percent,2)}),K(A(e),"_mouseMoveHandler",function(i,a){var o=A(e),l=o._state,u=o.pos,c=o.config,d=o.player;l.time<a.currentTime?a.forward=!0:a.forward=!1,l.time=a.currentTime,u.isDown&&!u.moving&&(u.moving=!0,c.isPauseMoving&&d.pause(),e.triggerCallbacks("dragstart",a,i),e.emitUserAction("drag","dragstart",a)),e.updateWidth(a.currentTime,a.percent,1),e.triggerCallbacks("dragmove",a,i),e._updateInnerFocus(a)}),K(A(e),"onMouseDown",function(i){var a=A(e),o=a._state,l=a.player,u=a.pos,c=a.config,d=a.playerConfig,p=k.getEventPos(i,l.zoom),h=l.rotateDeg===90?p.clientY:p.clientX;if(!(l.isMini||c.closeMoveSeek||!d.allowSeekAfterEnded&&l.ended)){if(!l.duration&&!l.isPlaying){l.play();return}i.stopPropagation(),e.focus(),k.checkIsFunction(d.disableSwipeHandler)&&d.disableSwipeHandler(),k.checkIsFunction(c.onMoveStart)&&c.onMoveStart(),k.event(i),u.x=h,u.isDown=!0,u.moving=!1,o.prePlayTime=l.currentTime,l.focus({autoHide:!1}),e.isProgressMoving=!0,k.addClass(e.progressBtn,"active");var m=e.computeTime(i,h);m.prePlayTime=o.prePlayTime,e._mouseDownHandlerHook(i,m);var f=i.type;return f==="touchstart"?(e.root.addEventListener("touchmove",e.onMouseMove),e.root.addEventListener("touchend",e.onMouseUp)):(e.unbind("mousemove",e.onMoveOnly),document.addEventListener("mousemove",e.onMouseMove,!1),document.addEventListener("mouseup",e.onMouseUp,!1)),!0}}),K(A(e),"onMouseUp",function(i){var a=A(e),o=a.player,l=a.config,u=a.pos,c=a.playerConfig,d=a._state;i.stopPropagation(),i.preventDefault(),k.checkIsFunction(c.enableSwipeHandler)&&c.enableSwipeHandler(),k.checkIsFunction(l.onMoveEnd)&&l.onMoveEnd(),k.event(i),k.removeClass(e.progressBtn,"active");var p=e.computeTime(i,u.x);p.prePlayTime=d.prePlayTime,u.moving?(e.triggerCallbacks("dragend",p,i),e.emitUserAction("drag","dragend",p)):(e.triggerCallbacks("click",p,i),e.emitUserAction("click","click",p)),e._mouseUpHandlerHook(i,p),u.moving=!1,u.isDown=!1,u.x=0,u.y=0,u.isLocked=!0,d.prePlayTime=0,d.time=0;var h=i.type;h==="touchend"?(e.root.removeEventListener("touchmove",e.onMouseMove),e.root.removeEventListener("touchend",e.onMouseUp),e.blur()):(document.removeEventListener("mousemove",e.onMouseMove,!1),document.removeEventListener("mouseup",e.onMouseUp,!1),u.isEnter?c.isMobileSimulateMode!=="mobile"&&e.bind("mousemove",e.onMoveOnly):e.onMouseLeave(i)),k.setTimeout(A(e),function(){e.resetSeekState()},10),o.focus()}),K(A(e),"onMouseMove",function(i){var a=A(e),o=a._state,l=a.pos,u=a.player,c=a.config;k.checkTouchSupport()&&i.preventDefault(),k.event(i);var d=k.getEventPos(i,u.zoom),p=u.rotateDeg===90?d.clientY:d.clientX,h=Math.abs(l.x-p);if(!(l.moving&&h<c.miniMoveStep||!l.moving&&h<c.miniStartStep)){l.x=p;var m=e.computeTime(i,p);m.prePlayTime=o.prePlayTime,e._mouseMoveHandlerHook(i,m)}}),K(A(e),"onMouseOut",function(i){e.triggerCallbacks("mouseout",null,i)}),K(A(e),"onMouseOver",function(i){e.triggerCallbacks("mouseover",null,i)}),K(A(e),"onMouseEnter",function(i){var a=A(e),o=a.player,l=a.pos;if(!(l.isDown||l.isEnter||o.isMini||!o.config.allowSeekAfterEnded&&o.ended)){l.isEnter=!0,e.bind("mousemove",e.onMoveOnly),e.bind("mouseleave",e.onMouseLeave),k.event(i);var u=k.getEventPos(i,o.zoom),c=o.rotateDeg===90?u.clientY:u.clientX,d=e.computeTime(i,c);e.triggerCallbacks("mouseenter",d,i),e.focus()}}),K(A(e),"onMouseLeave",function(i){e.triggerCallbacks("mouseleave",null,i),e.unlock(),e._updateInnerFocus(null)}),K(A(e),"onVideoResize",function(){var i=e.pos,a=i.x,o=i.isDown,l=i.isEnter;if(l&&!o){var u=e.computeTime(null,a);e.onMoveOnly(null,u)}}),e.useable=!1,e.isProgressMoving=!1,e.__dragCallBacks=[],e._state={now:-1,direc:0,time:0,prePlayTime:-1},e._disableBlur=!1,e}return ce(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.useable=e}},{key:"show",value:function(){this.root&&(this.root.style.display="flex")}},{key:"_initInner",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!i||i.length===0)&&(i=[{percent:1}]);var o=ht(ht({fragments:i},a),{},{actionCallback:function(u){e.emitUserAction("fragment_focus","fragment_focus",u)}});this.innerList?this.innerList.reset(o):(this.innerList=new qT(o),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(l){e[l]=e.innerList[l].bind(e.innerList)}))}},{key:"_updateInnerFocus",value:function(e){this.innerList&&this.innerList.updateFocus(e)}},{key:"afterCreate",value:function(){var e=this;if(!(this.config.disable||this.playerConfig.isLive)){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1,isLocked:!1},this.outer=this.find("xg-outer");var i=this.config,a=i.fragFocusClass,o=i.fragAutoFocus,l=i.fragClass;this._initInner(this.config.fragments,{fragFocusClass:a,fragAutoFocus:o,fragClass:l,style:this.playerConfig.commonStyle||{}}),Te.device==="mobile"&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(mi,function(){e.onMouseLeave()}),this.on(Mn,function(){e.onTimeupdate()}),this.on(Gr,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on(Mh,function(){e.onCacheUpdate()}),this.on(hi,function(){e.onCacheUpdate(!0),e.onTimeupdate(!0),e._state.now=0}),this.on(zi,function(){e.onReset()}),this.on(oi,function(){e.onVideoResize()}),this.bindDomEvents(),this.initCustomStyle()}}},{key:"setConfig",value:function(e){var i=this,a=null;Object.keys(e).forEach(function(o){i.config[o]=e[o],o==="fragments"&&(a=e[o])}),a&&this._initInner(a,e)}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},i=e.commonStyle,a=i.sliderBtnStyle,o=this.progressBtn;a&&(typeof a=="string"?o.style.boxShadow=a:Ht(a)==="object"&&Object.keys(a).map(function(l){o.style[l]=a[l]}))}},{key:"triggerCallbacks",value:function(e,i,a){this.__dragCallBacks.length>0&&this.__dragCallBacks.map(function(o){if(o&&o.handler&&o.type===e)try{o.handler(i,a)}catch(l){console.error("[XGPLAYER][triggerCallbacks] ".concat(o," error"),l)}})}},{key:"addCallBack",value:function(e,i){i&&typeof i=="function"&&this.__dragCallBacks.push({type:e,handler:i})}},{key:"removeCallBack",value:function(e,i){var a=this.__dragCallBacks,o=-1;a.map(function(l,u){l&&l.type===e&&l.handler===i&&(o=u)}),o>-1&&a.splice(o,1)}},{key:"unlock",value:function(){var e=this.player,i=this.pos;if(i.isEnter=!1,!e.isMini){if(this.unbind("mousemove",this.onMoveOnly),i.isDown){this.unbind("mouseleave",this.onMouseLeave);return}this.blur()}}},{key:"bindDomEvents",value:function(){var e=this.player,i=e.controls,a=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),(this.domEventType==="touch"||this.domEventType==="compatible")&&(this.root.addEventListener("touchstart",this.onMouseDown),i&&(i.root&&i.root.addEventListener("touchmove",k.stopPropagation),i.center&&i.center.addEventListener("touchend",k.stopPropagation))),(this.domEventType==="mouse"||this.domEventType==="compatible")&&(this.bind("mousedown",this.onMouseDown),a.isMobileSimulateMode!=="mobile"&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut),this.player.root.addEventListener("click",this.onBodyClick,!0))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),k.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),k.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,i,a){var o=this.config,l=this.player;if(!(o.isCloseClickSeek&&a===0)){var u=e>=l.duration?l.duration-o.endedDiff:Number(e).toFixed(1);this.updatePercent(i),this.updateTime(e),!(a===1&&(!o.isDragingSeek||l.config.mediaType==="audio"))&&(this._state.now=u,this._state.direc=u>l.currentTime?0:1,l.seek(u))}}},{key:"computeTime",value:function(e,i){var a=this.player,o=this.root.getBoundingClientRect(),l=o.width,u=o.height,c=o.top,d=o.left,p,h,m=i;a.rotateDeg===90?(p=u,h=c):(p=l,h=d);var f=m-h;f=f>p?p:f<0?0:f;var v=f/p;v=v<0?0:v>1?1:v;var b=parseInt(v*this.duration*1e3,10)/1e3;return{percent:v,currentTime:b,offset:f,width:p,left:h,e}}},{key:"updateTime",value:function(e){var i=this.player,a=this.duration;e>a?e=a:e<0&&(e=0);var o=i.plugins.time;o&&o.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,i){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(e*100,"%"),this.innerList.update({played:e*this.duration},this.duration);var a=this.player.plugins.miniprogress;a&&a.update({played:e*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(e){var i=this.player,a=this._state,o=this.duration;if(!(i.isSeeking||this.isProgressMoving)){if(a.now>-1){var l=parseInt(a.now*1e3,10)-parseInt(i.currentTime*1e3,10);if(a.direc===0&&l>300||a.direc===1&&l>-300){a.now=-1;return}else a.now=-1}var u=this.timeOffset+i.currentTime;u=k.adjustTimeByDuration(u,o,e),this.innerList.update({played:u},o),this.progressBtn.style.left="".concat(u/o*100,"%");var c=this.player.plugins.miniprogress;c&&c.update({played:u},o)}}},{key:"onCacheUpdate",value:function(e){var i=this.player,a=this.duration;if(i){var o=i.bufferedPoint.end;o=k.adjustTimeByDuration(o,a,e),this.innerList.update({cached:o},a);var l=this.player.plugins.miniprogress;l&&l.update({cached:o},a)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,i=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var a=this.domEventType;(a==="touch"||a==="compatible")&&(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),i&&(i.root&&i.root.removeEventListener("touchmove",k.stopPropagation),i.center&&i.center.removeEventListener("touchend",k.stopPropagation))),(a==="mouse"||a==="compatible")&&(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!0))}},{key:"render",value:function(){if(!(this.config.disable||this.playerConfig.isLive)){var e=this.player.controls?this.player.controls.config.mode:"",i=e==="bottom"?"xgplayer-progress-bottom":"";return`
    <xg-progress class="xgplayer-progress `.concat(i,`">
      <xg-outer class="xgplayer-progress-outer">
        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>
      </xg-outer>
    </xg-progress>
    `)}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:wd.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return wd}}]),n}(Ue),vi=function(r){be(n,r);var s=Se(n);function n(){var t;ue(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),K(A(t),"_onMouseenter",function(o){t.emit("icon_mouseenter",{pluginName:t.pluginName})}),K(A(t),"_onMouseLeave",function(o){t.emit("icon_mouseleave",{pluginName:t.pluginName})}),t}return ce(n,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave)}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),n}(Ue),tk=function(r){be(n,r);var s=Se(n);function n(){return ue(this,n),s.apply(this,arguments)}return ce(n,[{key:"afterCreate",value:function(){var e=this;ge(fe(n.prototype),"afterCreate",this).call(this);var i=this.player,a=this.config;a.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on([Ui,fi,zi],function(){e.animate(i.paused)}),this.on(wn,function(){e.animate(i.paused)}),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:hu,class:"xg-icon-play"},pause:{icon:fu,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var i=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:i.paused,to:!i.paused}),i.ended?i.replay():i.paused?(i.play(),this.animate(!1)):(i.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){if(this.player){var i=this.i18nKeys,a=this.find(".xg-tips");e?(this.setAttr("data-state","pause"),a&&this.changeLangTextKey(a,i.PLAY_TIPS)):(this.setAttr("data-state","play"),a&&this.changeLangTextKey(a,i.PAUSE_TIPS))}}},{key:"destroy",value:function(){ge(fe(n.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-play">
    <div class="xgplayer-icon">
    </div>
    `.concat(Nr(this,"PLAY_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_LEFT,index:0,disable:!1}}}]),n}(vi);function nk(){return new DOMParser().parseFromString(`<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>
    </g>
</svg>`,"image/svg+xml").firstChild}var rk=function(r){be(n,r);var s=Se(n);function n(){return ue(this,n),s.apply(this,arguments)}return ce(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(i){i.preventDefault(),i.stopPropagation(),e.config.onClick(i)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:nk,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){k.addClass(this.root,"show")}},{key:"hide",value:function(){k.removeClass(this.root,"show")}},{key:"render",value:function(){return`<xg-icon class="xgplayer-back">
    </xg-icon>`}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:st.ROOT_TOP,index:0}}}]),n}(Ue);function ik(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>
</svg>
`,"image/svg+xml").firstChild}function sk(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>
</svg>
`,"image/svg+xml").firstChild}var ak=function(r){be(n,r);var s=Se(n);function n(){var t;ue(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),K(A(t),"_onOrientationChange",function(o){t.player.fullscreen&&t.config.rotateFullscreen&&(window.orientation===90||window.orientation===-90?t.player.setRotateDeg(0):t.player.setRotateDeg(90))}),t}return ce(n,[{key:"afterCreate",value:function(){var e=this;ge(fe(n.prototype),"afterCreate",this).call(this);var i=this.config,a=this.playerConfig;if(!i.disable){i.target&&(this.playerConfig.fullscreenTarget=this.config.target);var o=k.getFullScreenEl();a.fullscreenTarget===o&&this.player.getFullscreen().catch(function(l){}),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(u){var c=e.player.fullscreen;e.emitUserAction(u,"switch_fullscreen",{prop:"fullscreen",from:c,to:!c})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(ur,function(l){var u=e.find(".xg-tips");u&&e.changeLangTextKey(u,l?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(l)}),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:rk,options:{config:{onClick:function(u){e.handleFullscreen(u)}}}})),Te.device==="mobile"&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:ik,class:"xg-get-fullscreen"},exitFullscreen:{icon:sk,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){ge(fe(n.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",Te.device==="mobile"?"touchend":"click",this.handleFullscreen),Te.device==="mobile"&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var i=this.player,a=this.config,o=a.useCssFullscreen===!0||typeof a.useCssFullscreen=="function"&&a.useCssFullscreen();o?(i.fullscreen?i.exitCssFullscreen():i.getCssFullscreen(),this.animate(i.fullscreen)):a.rotateFullscreen?(i.fullscreen?i.exitRotateFullscreen():i.getRotateFullscreen(),this.animate(i.fullscreen)):a.switchCallback&&typeof a.switchCallback=="function"?a.switchCallback(i.fullscreen):i.fullscreen?i.exitFullscreen():i.getFullscreen().catch(function(l){})}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){ge(fe(n.prototype),"show",this).call(this)}},{key:"hide",value:function(){ge(fe(n.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return`<xg-icon class="xgplayer-fullscreen">
    <div class="xgplayer-icon">
    </div>
    `.concat(Nr(this,e,this.playerConfig.isHideTips),`
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),n}(vi),ok=function(r){be(n,r);var s=Se(n);function n(t){var e;return ue(this,n),e=s.call(this,t),e.isActiving=!1,e}return ce(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"currentTime",get:function(){return this.player.currentTime||0}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,i=this.player.controls.config.mode;this.mode=i==="flex"?"flex":"normal",!this.config.disable&&(this.mode==="flex"&&(this.createCenterTime(),this.root.style.display="none"),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(mi,function(){e.onTimeUpdate()}),this.on(Mn,function(){e.onTimeUpdate()}),this.on(hi,function(){e.onTimeUpdate(!0)}),this.on(zi,function(){e.onReset()}))}},{key:"show",value:function(){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="block"),this.centerDurDom&&(this.centerDurDom.style.display="block");return}this.root.style.display="block"}},{key:"hide",value:function(){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="none"),this.centerDurDom&&(this.centerDurDom.style.display="none");return}this.root.style.display="none"}},{key:"onTimeUpdate",value:function(e){var i=this.player,a=this.config,o=this.duration;if(!(a.disable||this.isActiving||!i.hasStart)){var l=i.currentTime+this.timeOffset;l=k.adjustTimeByDuration(l,o,e),this.mode==="flex"?(this.centerCurDom.innerHTML=k.format(l),o!==1/0&&o>0&&(this.centerDurDom.innerHTML=k.format(o))):(this.timeDom.innerHTML=k.format(l),o!==1/0&&o>0&&(this.durationDom.innerHTML=k.format(o)))}}},{key:"onReset",value:function(){this.mode==="flex"?(this.centerCurDom.innerHTML=k.format(0),this.centerDurDom.innerHTML=k.format(0)):(this.timeDom.innerHTML=k.format(0),this.durationDom.innerHTML=k.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(!(!e.controls||!e.controls.center)){var i=e.controls.center;this.centerCurDom=k.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-left"),this.centerDurDom=k.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-right"),i.children.length>0?i.insertBefore(this.centerCurDom,i.children[0]):i.appendChild(this.centerCurDom),i.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;if(this.duration===1/0||this.playerConfig.isLive?(k.hide(this.durationDom),k.hide(this.timeDom),k.hide(this.find(".time-separator")),k.show(this.find(".time-live-tag"))):k.hide(this.find(".time-live-tag")),e.hide){this.hide();return}this.show()}},{key:"changeLiveState",value:function(e){e?(k.hide(this.durationDom),k.hide(this.timeDom),k.hide(this.find(".time-separator")),k.show(this.find(".time-live-tag"))):(k.hide(this.find(".time-live-tag")),k.show(this.find(".time-separator")),k.show(this.durationDom),k.show(this.timeDom))}},{key:"updateTime",value:function(e){if(this.isActiving=!0,!(!e&&e!==0||e>this.duration)){if(this.mode==="flex"){this.centerCurDom.innerHTML=k.format(e);return}this.timeDom.innerHTML=k.format(e)}}},{key:"resetActive",value:function(){var e=this,i=this.player,a=function(){e.isActiving=!1};this.off(Gr,a),i.isSeeking?this.once(Gr,a):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-time">
    <span class="time-current">00:00</span>
    <span class="time-separator">/</span>
    <span class="time-duration">00:00</span>
    <span class="time-live-tag">`.concat(this.i18n.LIVE_TIP,`</span>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_LEFT,index:2,disable:!1}}}]),n}(Ue);function lk(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function uk(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function ck(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>
</svg>
`,"image/svg+xml").firstChild}var dk=function(r){be(n,r);var s=Se(n);function n(){var t;ue(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),K(A(t),"onBarMousedown",function(o){var l=A(t),u=l.player,c=t.find(".xgplayer-bar");k.event(o);var d=c.getBoundingClientRect(),p=k.getEventPos(o,u.zoom),h=d.height-(p.clientY-d.top);if(p.h=h,p.barH=d.height,t.pos=p,!(h<-2))return t.updateVolumePos(h,o),document.addEventListener("mouseup",t.onBarMouseUp),t._d.isStart=!0,!1}),K(A(t),"onBarMouseMove",function(o){var l=A(t),u=l._d;if(u.isStart){var c=A(t),d=c.pos,p=c.player;o.preventDefault(),o.stopPropagation(),k.event(o);var h=k.getEventPos(o,p.zoom);u.isMoving=!0;var m=d.h-h.clientY+d.clientY;m>d.barH||t.updateVolumePos(m,o)}}),K(A(t),"onBarMouseUp",function(o){k.event(o),document.removeEventListener("mouseup",t.onBarMouseUp);var l=A(t),u=l._d;u.isStart=!1,u.isMoving=!1}),K(A(t),"onMouseenter",function(o){t._d.isActive=!0,t.focus(),t.emit("icon_mouseenter",{pluginName:t.pluginName})}),K(A(t),"onMouseleave",function(o){t._d.isActive=!1,t.unFocus(100,!1,o),t.emit("icon_mouseleave",{pluginName:t.pluginName})}),K(A(t),"onVolumeChange",function(o){if(t.player){var l=t.player,u=l.muted,c=l.volume;t._d.isMoving||(t.find(".xgplayer-drag").style.height=u||c===0?"4px":"".concat(c*100,"%"),t.config.showValueLabel&&t.updateVolumeValue()),t.animate(u,c)}}),t}return ce(n,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:uk,class:"xg-volume-small"},volumeLarge:{icon:lk,class:"xg-volume"},volumeMuted:{icon:ck,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},!this.config.disable){this.initIcons();var i=this.playerConfig,a=i.commonStyle,o=i.volume;a.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=a.volumeColor),this.changeMutedHandler=this.hook("mutedChange",function(l){e.changeMuted(l)},{pre:function(u){u.preventDefault(),u.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),Te.device!=="mobile"&&this.playerConfig.isMobileSimulateMode!=="mobile"&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(Ih,this.onVolumeChange),this.once(ai,this.onVolumeChange),k.typeOf(o)!=="Number"&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,i){var a=this.player,o=this.find(".xgplayer-drag"),l=this.find(".xgplayer-bar");if(!(!l||!o)){var u=parseInt(e/l.getBoundingClientRect().height*1e3,10);o.style.height="".concat(e,"px");var c=Math.max(Math.min(u/1e3,1),0),d={volume:{from:a.volume,to:c}};a.muted&&(d.muted={from:!0,to:!1}),this.emitUserAction(i,"change_volume",{muted:a.muted,volume:a.volume,props:d}),a.volume=Math.max(Math.min(u/1e3,1),0),a.muted&&(a.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,i=e.volume,a=e.muted,o=this.find(".xgplayer-value-label"),l=Math.max(Math.min(i,1),0);o.innerText=a?0:Math.ceil(l*100)}},{key:"focus",value:function(){var e=this.player;e.focus({autoHide:!1}),this._timerId&&(k.clearTimeout(this,this._timerId),this._timerId=null),k.addClass(this.root,"slide-show")}},{key:"unFocus",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=arguments.length>2?arguments[2]:void 0,l=this._d,u=this.player;l.isActive||(this._timerId&&(k.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=k.setTimeout(this,function(){l.isActive||(a?u.blur():u.focus(),k.removeClass(e.root,"slide-show"),l.isStart&&e.onBarMouseUp(o)),e._timerId=null},i))}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var i=this.player,a=this._d;a.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:i.muted,volume:i.volume,props:{muted:{from:i.muted,to:!i.muted}}}),i.volume>0&&(i.muted=!i.muted),i.volume<.01&&(i.volume=this.config.miniVolume)}},{key:"animate",value:function(e,i){e||i===0?this.setAttr("data-state","mute"):i<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(k.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon",Te.device==="mobile"?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,i=this.config.showValueLabel;return`
    <xg-icon class="xgplayer-volume" data-state="normal">
      <div class="xgplayer-icon">
      </div>
      <xg-slider class="xgplayer-slider">
        `.concat(i?'<div class="xgplayer-value-label">'.concat(e*100,"</div>"):"",`
        <div class="xgplayer-bar">
          <xg-drag class="xgplayer-drag" style="height: `).concat(e*100,`%"></xg-drag>
        </div>
      </xg-slider>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),n}(Ue);function pk(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">
  <g clip-path="url(#clip0)">
    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>
    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>
  </g>
  <defs>
    <clipPath id="clip0">
      <rect width="40" height="40" fill="white"/>
    </clipPath>
  </defs>
</svg>
`,"image/svg+xml").firstChild}var hk=function(r){be(n,r);var s=Se(n);function n(t){var e;return ue(this,n),e=s.call(this,t),e.rotateDeg=e.config.rotateDeg||0,e}return ce(n,[{key:"afterCreate",value:function(){var e=this;this.config.disable||(ge(fe(n.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(oi,function(){e.rotateDeg&&k.setTimeout(e,function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)},100)}),this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){ge(fe(n.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,i){var a=this.player;if(e||(e=0),i){this.player.videoRotateDeg=e;return}var o=this.player,l=o.root,u=o.innerContainer,c=this.player.media,d=l.offsetWidth,p=u&&i?u.offsetHeight:l.offsetHeight,h="100%",m="100%",f=0,v=0;(e===.75||e===.25)&&(h="".concat(p,"px"),m="".concat(d,"px"),f=-(p-d)/2,v=-(d-p)/2);var b="translate(".concat(f,"px,").concat(v,"px) rotate(").concat(e,"turn)"),w={transformOrigin:"center center",transform:b,webKitTransform:b,height:m,width:h},C=i?c:l,T=i?a.getPlugin("poster"):null;Object.keys(w).map(function(L){C.style[L]=w[L],T&&T.root&&(T.root.style[L]=w[L])})}},{key:"rotate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,o=this.player;this.rotateDeg||(this.rotateDeg=0);var l=e?1:-1;this.rotateDeg=(this.rotateDeg+1+l*.25*a)%1,this.updateRotateDeg(this.rotateDeg,i),o.emit(Vh,this.rotateDeg*360)}},{key:"registerIcons",value:function(){return{rotate:pk}}},{key:"render",value:function(){if(!this.config.disable)return`
    <xg-icon class="xgplayer-rotate">
      <div class="xgplayer-icon">
      </div>
      `.concat(Nr(this,"ROTATE_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),n}(vi);function fk(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}function mk(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}var Ci={PIP:"picture-in-picture",INLINE:"inline",FULLSCREEN:"fullscreen"},vk=function(r){be(n,r);var s=Se(n);function n(){var t;ue(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),K(A(t),"switchPIP",function(o){if(!t.isPIPAvailable())return!1;o.stopPropagation&&o.stopPropagation(),t.isPip?(t.exitPIP(),t.emitUserAction(o,"change_pip",{props:"pip",from:!0,to:!1}),t.setAttr("data-state","normal")):t.player.media.readyState===4&&(t.requestPIP(),t.emitUserAction(o,"change_pip",{props:"pip",from:!1,to:!0}),t.setAttr("data-state","pip"))}),t}return ce(n,[{key:"beforeCreate",value:function(e){typeof e.player.config.pip=="boolean"&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(ge(fe(n.prototype),"afterCreate",this).call(this),this.pMode=Ci.INLINE,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(qa,function(){e.config.showIcon&&(k.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))}))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:fk,class:"xg-get-pip"},pipIconExit:{icon:mk,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,i=this.player;this.leavePIPCallback=function(){var a=i.paused;k.setTimeout(e,function(){!a&&i.mediaPlay()},0),!a&&i.mediaPlay(),e.setAttr("data-state","normal"),i.emit(ll,!1)},this.enterPIPCallback=function(a){i.emit(ll,!0),e.pipWindow=a.pictureInPictureWindow,e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(a){var o=i.media.webkitPresentationMode;e.pMode===Ci.FULLSCREEN&&o!==Ci.FULLSCREEN&&i.onFullscreenChange(null,!1),e.pMode=o,o===Ci.PIP?e.enterPIPCallback(a):o===Ci.INLINE&&e.leavePIPCallback(a)},i.media&&(i.media.addEventListener("enterpictureinpicture",this.enterPIPCallback),i.media.addEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(i.media)&&i.media.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var e=this.player,i=this.playerConfig;if(!(!this.isPIPAvailable()||this.isPip))try{var a=i.poster;return a&&(e.media.poster=k.typeOf(a)==="String"?a:a.poster),n.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("picture-in-picture"):e.media.requestPictureInPicture(),!0}catch(o){return console.error("requestPiP",o),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(n.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(i){return console.error("exitPIP",i),!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.media||e.media.webkitPresentationMode===Ci.PIP}},{key:"isPIPAvailable",value:function(){var e=this.player.media,i=k.typeOf(document.pictureInPictureEnabled)==="Boolean"?document.pictureInPictureEnabled:!0;return i&&(k.typeOf(e.disablePictureInPicture)==="Boolean"&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&k.typeOf(e.webkitSetPresentationMode)==="Function")}},{key:"destroy",value:function(){ge(fe(n.prototype),"destroy",this).call(this);var e=this.player;e.media.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.media.removeEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(e.media)&&e.media.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(!(!this.config.showIcon||!this.isPIPAvailable()))return`<xg-icon class="xgplayer-pip">
      <div class="xgplayer-icon xg-icon-disable">
      </div>
      `.concat(Nr(this,"PIP",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return typeof e.webkitSetPresentationMode=="function"}}]),n}(vi);function yk(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">
  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>
</svg>
`,"image/svg+xml").firstChild}var gk=function(r){be(n,r);var s=Se(n);function n(t){var e;return ue(this,n),e=s.call(this,t),K(A(e),"playNext",function(i){var a=A(e),o=a.player;i.preventDefault(),i.stopPropagation(),e.idx+1<e.config.urlList.length?(e.idx++,e.nextHandler(e.config.urlList[e.idx],e.idx),o.emit(ka,e.idx+1)):(e.nextHandler(),o.emit(ka))}),e.idx=-1,e}return ce(n,[{key:"afterCreate",value:function(){!this.config.urlList||this.config.urlList.length===0||(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:yk}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e=Te.device==="mobile"?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var i=this.player;e&&(i.pause(),i.currentTime=0,i.switchURL?i.switchURL(e):i.src=e,i.config.url=e,i.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(!(!this.config.urlList||this.config.urlList.length===0))return`
     <xg-icon class="xgplayer-playnext">
      <div class="xgplayer-icon">
      </div>
      `.concat(Nr(this,"PLAYNEXT_TIPS",this.playerConfig.isHideTips),`
     </xg-icon>
    `)}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),n}(Ue),qh={exports:{}};(function(r,s){(function(n,t){r.exports=t()})(nm,function(){return function n(t,e,i){var a=window,o="application/octet-stream",l=i||o,u=t,c=!e&&!i&&u,d=document.createElement("a"),p=function(D){return String(D)},h=a.Blob||a.MozBlob||a.WebKitBlob||p,m=e||"download",f,v;if(h=h.call?h.bind(a):Blob,String(this)==="true"&&(u=[u,l],l=u[0],u=u[1]),c&&c.length<2048&&(m=c.split("/").pop().split("?")[0],d.href=c,d.href.indexOf(c)!==-1)){var b=new XMLHttpRequest;return b.open("GET",c,!0),b.responseType="blob",b.onload=function(D){n(D.target.response,m,o)},setTimeout(function(){b.send()},0),b}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(u))if(u.length>1024*1024*1.999&&h!==p)u=L(u),l=u.type||o;else return navigator.msSaveBlob?navigator.msSaveBlob(L(u),m):_(u);else if(/([\x80-\xff])/.test(u)){var w=0,C=new Uint8Array(u.length),T=C.length;for(w;w<T;++w)C[w]=u.charCodeAt(w);u=new h([C],{type:l})}f=u instanceof h?u:new h([u],{type:l});function L(D){var x=D.split(/[:;,]/),P=x[1],I=x[2]=="base64"?atob:decodeURIComponent,V=I(x.pop()),g=V.length,y=0,S=new Uint8Array(g);for(y;y<g;++y)S[y]=V.charCodeAt(y);return new h([S],{type:P})}function _(D,x){if("download"in d)return d.href=D,d.setAttribute("download",m),d.className="download-js-link",d.innerHTML="downloading...",d.style.display="none",document.body.appendChild(d),setTimeout(function(){d.click(),document.body.removeChild(d),x===!0&&setTimeout(function(){a.URL.revokeObjectURL(d.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(D)&&(D="data:"+D.replace(/^data:([\w\/\-\+]+)/,o)),window.open(D)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=D),!0;var P=document.createElement("iframe");document.body.appendChild(P),!x&&/^data:/.test(D)&&(D="data:"+D.replace(/^data:([\w\/\-\+]+)/,o)),P.src=D,setTimeout(function(){document.body.removeChild(P)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(f,m);if(a.URL)_(a.URL.createObjectURL(f),!0);else{if(typeof f=="string"||f.constructor===p)try{return _("data:"+l+";base64,"+a.btoa(f))}catch{return _("data:"+l+","+encodeURIComponent(f))}v=new FileReader,v.onload=function(D){_(this.result)},v.readAsDataURL(f)}return!0}})})(qh);var bk=qh.exports;const Sk=Aa(bk);function wk(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">
  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">
      <g id="Group-2">
        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">
          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>
          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>
          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>
          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>
        </g>
      </g>
    </g>
  </g>
</svg>
`,"image/svg+xml").firstChild}var Ck=function(r){be(n,r);var s=Se(n);function n(t){var e;return ue(this,n),e=s.call(this,t),K(A(e),"download",function(i){if(!e.isLock){e.emitUserAction(i,"download");var a=e.getAbsoluteURL(e.player.src);Sk(a),e.isLock=!0,e.timer=window.setTimeout(function(){e.isLock=!1,window.clearTimeout(e.timer),e.timer=null},300)}}),e.timer=null,e.isLock=!1,e}return ce(n,[{key:"afterCreate",value:function(){ge(fe(n.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.appendChild(".xgplayer-icon",this.icons.download),this._handler=this.hook("click",this.download,{pre:function(i){i.preventDefault(),i.stopPropagation()}}),this.bind(["click","touchend"],this._handler))}},{key:"registerIcons",value:function(){return{download:wk}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var i=document.createElement("div");i.innerHTML='<a href="'.concat(e,'">x</a>'),e=i.firstChild.href}return e}},{key:"destroy",value:function(){ge(fe(n.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-download">
   <div class="xgplayer-icon">
   </div>
   `.concat(Nr(this,"DOWNLOAD_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:3,disable:!0}}}]),n}(vi),Lk=function(r){be(n,r);var s=Se(n);function n(){return ue(this,n),s.apply(this,arguments)}return ce(n,[{key:"beforeCreate",value:function(e){typeof e.player.config.screenShot=="boolean"&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){ge(fe(n.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(i){e.fitVideo&&(e.width=i.vWidth,e.height=i.vHeight)},this.once(oi,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,i){var a=document.createElement("a");a.href=e,a.download=i;var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(o)}},{key:"createCanvas",value:function(e,i){var a=document.createElement("canvas"),o=a.getContext("2d");this.canvasCtx=o,this.canvas=a,a.width=e||this.config.width,a.height=i||this.config.height,o.imageSmoothingEnabled=!0,o.imageSmoothingEnabled&&(o.imageSmoothingQuality="high")}},{key:"onClickBtn",value:function(e){var i=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then(function(a){i.emit(Ah,a),i.saveScreenShot(a,i.config.name+i.config.format)})}},{key:"shot",value:function(e,i){var a=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{quality:.92,type:"image/png"},l=this.config,u=this.player,c=o.quality||l.quality,d=o.type||l.type;return new Promise(function(p,h){var m=null,f;if(u.media.canvas)m=u.media.canvas;else{a.canvas?(a.canvas.width=e||l.width,a.canvas.height=i||l.height):a.createCanvas(e,i),m=a.canvas,f=a.canvasCtx;var v=u.media.videoWidth/u.media.videoHeight,b=m.width/m.height,w=0,C=0,T=u.media.videoWidth,L=u.media.videoHeight,_,D,x,P;v>b?(x=m.width,P=m.width/v,_=0,D=Math.round((m.height-P)/2)):v===b?(x=m.width,P=m.height,_=0,D=0):v<b&&(x=m.height*v,P=m.height,_=Math.round((m.width-x)/2),D=0),f.drawImage(u.media,w,C,T,L,_,D,x,P)}var I=m.toDataURL(d,c).replace(d,"image/octet-stream");I=I.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),p(I)})}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){ge(fe(n.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(oi,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",i="SCREENSHOT";return`
      <xg-icon class="xgplayer-shot">
      <div class="`.concat(e,`">
      `).concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[i],'">').concat(this.i18n[i],"</span>"),`
      </div>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),n}(vi),Tk=function(){function r(s){ue(this,r),this.config=s.config,this.parent=s.root,this.root=k.createDom("ul","",{},"xg-options-list xg-list-slide-scroll ".concat(this.config.className)),s.root.appendChild(this.root);var n=this.config.maxHeight;n&&this.setStyle({maxHeight:n}),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var t=Te.device==="mobile"?"touchend":"click";this._delegates=Ue.delegate.call(this,this.root,"li",t,this.onItemClick)}return ce(r,[{key:"renderItemList",value:function(n){var t=this,e=this.config,i=this.root;n?e.data=n:n=e.data,e.style&&Object.keys(e.style).map(function(a){i.style[a]=e[a]}),n.length>0&&(this.attrKeys=Object.keys(n[0])),this.root.innerHTML="",n.map(function(a,o){var l=a.selected?"option-item selected":"option-item";a["data-index"]=o,t.root.appendChild(k.createDom("li","<span>".concat(a.showText,"</span>"),a,l))})}},{key:"onItemClick",value:function(n){n.delegateTarget||(n.delegateTarget=n.target);var t=n.delegateTarget;if(t&&k.hasClass(t,"selected"))return!1;var e=typeof this.config.onItemClick=="function"?this.config.onItemClick:null,i=this.root.querySelector(".selected");k.addClass(t,"selected"),i&&k.removeClass(i,"selected"),e(n,{from:i?this.getAttrObj(i,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(n,t){if(!n||!t)return{};var e={};t.map(function(a){e[a]=n.getAttribute(a)});var i=n.getAttribute("data-index");return i&&(e.index=Number(i)),e}},{key:"show",value:function(){k.removeClass(this.root,"hide"),k.addClass(this.root,"active")}},{key:"hide",value:function(){k.removeClass(this.root,"active"),k.addClass(this.root,"hide")}},{key:"setStyle",value:function(n){var t=this;Object.keys(n).forEach(function(e){t.root.style[e]=n[e]})}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map(function(n){n.destroy&&n.destroy()}),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),r}(),On={SIDE:"side",MIDDLE:"middle"},Li={CLICK:"click",HOVER:"hover"};function kk(r,s){return r===On.SIDE?s===st.CONTROLS_LEFT?"xg-side-list xg-left-side":"xg-side-list xg-right-side":""}var qs=Te.device==="mobile",xa=function(r){be(n,r);var s=Se(n);function n(t){var e;return ue(this,n),e=s.call(this,t),K(A(e),"onEnter",function(i){i.stopPropagation(),e.emit("icon_mouseenter",{pluginName:e.pluginName}),e.switchActiveState(i)}),K(A(e),"switchActiveState",function(i){i.stopPropagation();var a=e.config.toggleMode;a===Li.CLICK?e.toggle(!e.isActive):e.toggle(!0)}),K(A(e),"onLeave",function(i){i.stopPropagation(),e.emit("icon_mouseleave",{pluginName:e.pluginName}),e.config.listType!==On.SIDE&&e.isActive&&e.toggle(!1)}),K(A(e),"onListEnter",function(i){e.enterType=2}),K(A(e),"onListLeave",function(i){e.enterType=0,e.isActive&&e.toggle(!1)}),e.isIcons=!1,e.isActive=!1,e.curValue=null,e.curIndex=0,e}return ce(n,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,i=this.config;this.initIcons(),qs&&i.listType!==On.MIDDLE&&(i.listType=On.SIDE),i.hidePortrait&&k.addClass(this.root,"portrait"),this.on([oi,ur],function(){e._resizeList()}),this.once(pr,function(){i.list&&i.list.length>0&&(e.renderItemList(i.list),e.show())}),qs&&this.on(ou,function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)}),qs?(i.toggleMode=Li.CLICK,this.activeEvent="touchend"):this.activeEvent=i.toggleMode===Li.CLICK?"click":"mouseenter",i.toggleMode===Li.CLICK?this.bind(this.activeEvent,this.switchActiveState):(this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)),this.isIcons&&this.bind("click",this.onIconClick)}},{key:"initIcons",value:function(){var e=this,i=this.icons,a=Object.keys(i),o=!1;a.length>0&&(a.forEach(function(l){e.appendChild(".xgplayer-icon",i[l]),!o&&(o=i[l])}),this.isIcons=o),!o&&(this.appendChild(".xgplayer-icon",k.createDom("span","",{},"icon-text")),k.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||k.addClass(this.root,"show")}},{key:"hide",value:function(){k.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,i,a){if(e===void 0)return"";var o=this.config.list;!a&&(a=this.player.lang),i=!i||k.isUndefined(e[i])?"text":i,typeof e=="number"&&(e=o[e]);try{return Ht(e[i])==="object"?e[i][a]||e[i].en:e[i]}catch(l){return console.warn(l),""}}},{key:"toggle",value:function(e){if(e!==this.isActive){var i=this.player.controls,a=this.config.listType;e?(a===On.SIDE?i.blur():i.focus(),this.optionsList&&this.optionsList.show()):(a===On.SIDE?i.focus():i.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,i){e.stopPropagation();var a=this.config,o=a.listType,l=a.list;this.curIndex=i.to.index,this.curItem=l[this.curIndex],this.changeCurrentText();var u=this.config.isItemClickHide;(u||qs||o===On.SIDE)&&this.toggle(!1)}},{key:"onIconClick",value:function(e){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,i=this.curIndex<e.length?this.curIndex:0,a=e[i];a&&(this.find(".icon-text").innerHTML=this.getTextByLang(a,"iconText"))}}},{key:"renderItemList",value:function(e,i){var a=this,o=this.config,l=this.optionsList,u=this.player;if(typeof i=="number"&&(this.curIndex=i,this.curItem=o.list[i]),l){l.renderItemList(e),this.changeCurrentText();return}var c={config:{data:e||[],className:kk(o.listType,o.position),onItemClick:function(f,v){a.onItemClick(f,v)}},root:o.listType===On.SIDE?u.innerContainer||u.root:this.root};if(this.config.isShowIcon){var d=this.player.root.getBoundingClientRect(),p=d.height,h=o.listType===On.MIDDLE?p-50:p;h&&(c.config.maxHeight="".concat(h,"px")),this.optionsList=new Tk(c),this.changeCurrentText(),this.show()}this._resizeList()}},{key:"_resizeList",value:function(){var e=this.player.root.getBoundingClientRect(),i=e.height,a=this.config.listType===On.MIDDLE?i-50:i;this.optionsList&&this.optionsList.setStyle({maxHeight:"".concat(a,"px")})}},{key:"destroy",value:function(){var e=this.config;e.toggleMode===Li.CLICK?this.unbind(this.activeEvent,this.switchActiveState):(this.unbind(this.activeEvent,this.onEnter),this.unbind("mouseleave",this.onLeave)),this.isIcons&&this.unbind("click",this.onIconClick),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",`">
    <div class="xgplayer-icon">
    </div>
   </xg-icon>`)}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1,isItemClickHide:!0,toggleMode:Li.HOVER}}}]),n}(Ue),_k=function(r){be(n,r);var s=Se(n);function n(t){var e;return ue(this,n),e=s.call(this,t),e.curTime=0,e.isPaused=!0,e}return ce(n,[{key:"beforeCreate",value:function(e){var i=e.config.list;Array.isArray(i)&&i.length>0&&(e.config.list=i.map(function(a){return!a.text&&a.name&&(a.text=a.name),a.text||(a.text=a.definition),a}))}},{key:"afterCreate",value:function(){var e=this;ge(fe(n.prototype),"afterCreate",this).call(this),this.on("resourceReady",function(i){e.changeDefinitionList(i)}),this.on(eo,function(i){e.renderItemList(e.config.list,i.to)}),this.player.definitionList.length<2&&this.hide()}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||k.addClass(this.root,"show")}},{key:"initDefinition",value:function(){var e=this.config,i=e.list,a=e.defaultDefinition;if(i.length>0){var o=null;i.map(function(l){l.definition===a&&(o=l)}),o||(o=i[0]),this.changeDefinition(o)}}},{key:"renderItemList",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.list||[],a=arguments.length>1?arguments[1]:void 0,o=a&&a.definition?a.definition:this.config.defaultDefinition;a&&i.forEach(function(c){c.selected=!1});var l=0,u=i.map(function(c,d){var p=ht(ht({},c),{},{showText:e.getTextByLang(c)||c.definition,selected:!1});return(c.selected||c.definition&&c.definition==o)&&(p.selected=!0,l=d),p});ge(fe(n.prototype),"renderItemList",this).call(this,u,l)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map(function(i){return!i.text&&i.name&&(i.text=i.name),i.text||(i.text=i.definition),i}),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,i){this.player.changeDefinition(e,i)}},{key:"onItemClick",value:function(e,i){var a=this.player.definitionList;ge(fe(n.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:i.from,to:i.to});for(var o=0;o<a.length;o++)i.to&&a[o].definition===i.to.definition&&(i.to.url=a[o].url),i.from&&a[o].definition===i.from.definition&&(i.from.url=a[o].url);this.player.changeDefinition(i.to,i.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return ht(ht({},xa.defaultConfig),{},{position:st.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0})}}]),n}(xa),Zk=function(r){be(n,r);var s=Se(n);function n(t){var e;return ue(this,n),e=s.call(this,t),e.curRate=1,e}return ce(n,[{key:"beforeCreate",value:function(e){var i=e.player.config.playbackRate,a=i?Array.isArray(i)?i:e.config.list:[];Array.isArray(a)&&(e.config.list=a.map(function(o){return typeof o=="number"?o={rate:o,text:"".concat(o,"x")}:!o.text&&o.rate&&(o.text="".concat(o.rate,"x")),o}))}},{key:"afterCreate",value:function(){var e=this;ge(fe(n.prototype),"afterCreate",this).call(this),this.on(Ph,function(){e.curValue!==e.player.playbackRate&&e.renderItemList()}),this.renderItemList()}},{key:"show",value:function(){!this.config.list||this.config.list.length===0||ge(fe(n.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,i){ge(fe(n.prototype),"onItemClick",this).apply(this,arguments);var a=e.delegateTarget,o=Number(a.getAttribute("rate"));if(!o||o===this.curValue)return!1;var l={playbackRate:{from:this.player.playbackRate,to:o}};this.emitUserAction(e,"change_rate",{props:l}),this.curValue=o,this.player.playbackRate=o}},{key:"renderItemList",value:function(){var e=this,i=this.player.playbackRate||1;this.curValue=i;var a=-1,o=this.config.list.map(function(l,u){var c={rate:l.rate};return c.rate===i&&(c.selected=!0,a=u),c.showText=e.getTextByLang(l),c});ge(fe(n.prototype),"renderItemList",this).call(this,o,a)}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,i=this.curIndex<e.length?this.curIndex:0,a=e[i],o="";!a||this.curIndex<0?o="".concat(this.player.playbackRate,"x"):o=this.getTextByLang(a,"iconText"),this.find(".icon-text").innerHTML=o}}},{key:"destroy",value:function(){ge(fe(n.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return ht(ht({},xa.defaultConfig),{},{position:st.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1})}}]),n}(xa);function Dk(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" class='path_full' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}function Ek(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}var Cd=function(r){be(n,r);var s=Se(n);function n(){return ue(this,n),s.apply(this,arguments)}return ce(n,[{key:"beforeCreate",value:function(e){typeof e.player.config.cssFullscreen=="boolean"&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;ge(fe(n.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(Ca,function(i){e.animate(i)}),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,i=this.find(".xgplayer-icon");i.appendChild(e.cssFullscreen),i.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var i=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:i}),i?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var i=this.i18nKeys,a=this.find(".xg-tips");a&&this.changeLangTextKey(a,e?i.EXITCSSFULLSCREEN_TIPS:i.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:Dk,class:"xg-get-cssfull"},exitCssFullscreen:{icon:Ek,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){ge(fe(n.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class='xgplayer-cssfullscreen'>
    <div class="xgplayer-icon">
    </div>
    `.concat(Nr(this,"CSSFULLSCREEN_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),n}(vi),xk=function(r){be(n,r);var s=Se(n);function n(){return ue(this,n),s.apply(this,arguments)}return ce(n,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(fi,function(i){e.onError(i)})}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleError",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.player,a=e.errorType,o=i.errorNote?this.i18n[i.errorNote]:"";if(!o)switch(a){case"decoder":o=this.i18n.MEDIA_ERR_DECODE;break;case"network":o=this.i18n.MEDIA_ERR_NETWORK;break;default:o=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=o,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return`<xg-error class="xgplayer-error">
      <div class="xgplayer-errornote">
       <span class="xgplayer-error-text"></span>
       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>
      </div>
    </xg-error>`}}],[{key:"pluginName",get:function(){return"error"}}]),n}(Ue),Fk=function(r){be(n,r);var s=Se(n);function n(){return ue(this,n),s.apply(this,arguments)}return ce(n,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],function(i){(e.config.onClick||e.customOnClick)&&(i.preventDefault(),i.stopPropagation(),e.customOnClick?e.customOnClick(i):e.config.onClick(i))}),this.player.showPrompt=function(){e.show.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var i=this;Object.keys(e).map(function(a){i.root.style[a]=e[a]})}},{key:"show",value:function(e){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(e){this.customOnClick=o;var l=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),k.addClass(this.root,"show"),a.mode==="arrow"&&k.addClass(this.root,"arrow"),typeof e=="string"?this.find(".xgplayer-prompt-detail").innerHTML=e:this.find(".xgplayer-prompt-detail").innerHTML="".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),a.style&&this.setStyle(a.style);var u=typeof a.autoHide=="boolean"?a.autoHide:this.config.autoHide;if(u){var c=a.interval||l;this.intervalId=setTimeout(function(){i.hide()},c)}}}},{key:"hide",value:function(){k.removeClass(this.root,"show"),k.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(Q.CONTROLS_FOLLOW,`">
    <span class="xgplayer-prompt-detail"></span>
    </xg-prompt>`)}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),n}(Ue),Ld={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function ef(r){Object.keys(Ld).map(function(s){r[s]===void 0&&(r[s]=Ld[s])})}var Td={_updateDotDom:function(s,n){if(n){var t=this.calcuPosition(s.time,s.duration),e=s.style||{};e.left="".concat(t.left,"%"),e.width="".concat(t.width,"%"),n.setAttribute("data-text",s.text),n.setAttribute("data-time",s.time),t.isMini?k.addClass(n,"mini"):k.removeClass(n,"mini"),Object.keys(e).map(function(i){n.style[i]=e[i]})}},initDots:function(){var s=this;this._ispots.map(function(n){s.createDot(n,!1)}),this.ispotsInit=!0},createDot:function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this.player.plugins.progress;if(t&&(n&&(ef(s),this._ispots.push(s)),!(!this.ispotsInit&&n))){var e=this.calcuPosition(s.time,s.duration),i=s.style||{};i.left="".concat(e.left,"%"),i.width="".concat(e.width,"%");var a="xgspot_".concat(s.id," xgplayer-spot");e.isMini&&(a+=" mini");var o=k.createDom("xg-spot",s.template||"",{"data-text":s.text,"data-time":s.time,"data-id":s.id},a);Object.keys(i).map(function(l){o.style[l]=i[l]}),t.outer&&t.outer.appendChild(o)}},findDot:function(s){if(this.player.plugins.progress){var n=this._ispots.filter(function(t,e){return t.id===s});return n.length>0?n[0]:null}},updateDot:function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=this.player.plugins.progress;if(t){var e=this.findDot(s.id);if(e&&Object.keys(s).map(function(a){e[a]=s[a]}),!!this.ispotsInit){var i=t.find('xg-spot[data-id="'.concat(s.id,'"]'));i&&(this._updateDotDom(s,i),n&&this.showDot(s.id))}}},deleteDot:function(s){var n=this._ispots,t=this.player.plugins.progress;if(t){for(var e=[],i=0;i<n.length;i++)n[i].id===s&&e.push(i);for(var a=e.length,o=a-1;o>=0;o--)if(n.splice(e[o],1),this.ispotsInit){var l=t.find('xg-spot[data-id="'.concat(s,'"]'));l&&l.parentElement.removeChild(l)}}},deleteAllDots:function(){var s=this.player.plugins.progress;if(s){if(!this.ispotsInit){this._ispots=[];return}for(var n=s.root.getElementsByTagName("xg-spot"),t=n.length-1;t>=0;t--)s.outer.removeChild(n[t]);this._ispots=[]}},updateAllDots:function(){var s=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.player.plugins.progress;if(t){if(!this.ispotsInit){this._ispots=n;return}this._ispots=[];var e=t.root.getElementsByTagName("xg-spot"),i=e.length;if(i>n.length)for(var a=i-1;a>n.length-1;a--)t.outer.removeChild(e[a]);n.forEach(function(o,l){l<i?(e[l].setAttribute("data-id","".concat(o.id)),s._ispots.push(o),s.updateDot(o)):s.createDot(o)})}},updateDuration:function(){var s=this,n=this.player.plugins.progress;if(n){var t=this._ispots;t.forEach(function(e){var i=n.find('xg-spot[data-id="'.concat(e.id,'"]'));s._updateDotDom(e,i)})}},getAllDotsDom:function(){var s=this.player.plugins.progress;if(!s)return[];var n=s.root.getElementsByTagName("xg-spot");return n},getDotDom:function(s){var n=this.player.plugins.progress;if(n)return n.find('xg-spot[data-id="'.concat(s,'"]'))}};function Rk(r){var s=r.config,n=r.player;Object.keys(Td).map(function(e){r[e]=Td[e].bind(r)});var t=n.config.progressDot||s.ispots||[];r._ispots=t.map(function(e){return ef(e),e}),r.ispotsInit=!1,r.on(mi,function(){r.ispotsInit?r.updateDuration():r.initDots()})}var Ti={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMove"},Ik=function(r){be(n,r);var s=Se(n);function n(t){var e;return ue(this,n),e=s.call(this,t),K(A(e),"onMousemove",function(i){if(!e.config.disable){if(k.hasClass(i.target,"xg-spot-content")&&e.config.isHideThumbnailHover){e.player.plugins.progress.onMouseLeave(i);return}(e._state.f||k.hasClass(i.target,"xg-spot-content"))&&(k.event(i),i.stopPropagation())}}),K(A(e),"onMousedown",function(i){e.config.disable||(e._state.f||k.hasClass(i.target,"xg-spot-content"))&&(k.event(i),i.stopPropagation())}),K(A(e),"onMouseup",function(i){if(e.isDrag){var a=e.player.plugins.progress;a&&a.pos&&(a.onMouseUp(i),!a.pos.isEnter&&a.onMouseLeave(i))}}),K(A(e),"onDotMouseLeave",function(i){if(!e.config.disable){e._curDot.removeEventListener("mouseleave",e.onDotMouseLeave),e.blurDot(i.target),e._curDot=null;var a=e.player.plugins.progress;a&&a.enableBlur(),e.show()}}),K(A(e),"onProgressMouseOver",function(i,a){if(!e.config.disable&&k.hasClass(a.target,"xgplayer-spot")&&!e._curDot){e._curDot=a.target,e.focusDot(a.target),e._curDot.children.length>0&&e.hide();var o=e.player.plugins.progress;o&&o.disableBlur(),e._curDot.addEventListener("mouseleave",e.onDotMouseLeave)}}),e._ispots=[],e.videoPreview=null,e.videothumbnail=null,e.thumbnail=null,e.timeStr="",e._state={now:0,f:!1},e}return ce(n,[{key:"beforeCreate",value:function(e){var i=e.player.plugins.progress;i&&(e.root=i.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",function(i,a){a.currentTime&&e.player.seek(a.currentTime)}),this.transformTimeHook=this.hook("transformTime",function(i){e.setTimeContent(k.format(i))}),Rk(this),this.on(mi,function(){e.show()}),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(e){var i=this;e&&Object.keys(e).map(function(a){i.config[a]=e[a]})}},{key:"onPluginsReady",value:function(){var e=this.player;e.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,i=this.player.plugins.progress;if(i&&(Object.keys(Ti).map(function(o){e[Ti[o]]=e[Ti[o]].bind(e),i.addCallBack(o,e[Ti[o]])}),Te.device!=="mobile")){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var a=this.hook("previewClick",function(){});this.handlerPreviewClick=function(o){o.stopPropagation(),a(parseInt(e._state.now*1e3,10)/1e3,o)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,i){this.config.disable||!this.player.duration||this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!0,this.videoPreview&&k.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!1,this.videoPreview&&k.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(e,i){this.config.disable||k.hasClass(i.target,"xgplayer-spot")&&(i.stopPropagation(),i.preventDefault(),["time","id","text"].map(function(a){e[a]=i.target.getAttribute("data-".concat(a))}),e.time&&(e.time=Number(e.time)),this.handlerSpotClick(i,e))}},{key:"updateLinePos",value:function(e,i){var a=this.root,o=this.previewLine,l=this.player,u=this.config,c=l.controls.mode,d=c==="flex",p=a.getBoundingClientRect().width;if(p){p=this._hasThumnail&&p<u.width?u.width:p;var h=e-p/2,m;h<0&&!d?(h=0,m=e-p/2):h>i-p&&!d?(m=h-(i-p),h=i-p):m=0,m!==void 0&&(o.style.transform="translateX(".concat(m.toFixed(2),"px)")),a.style.transform="translateX(".concat(h.toFixed(2),"px) translateZ(0)")}}},{key:"updateTimeText",value:function(e){var i=this.timeText,a=this.timePoint;i.innerHTML=e,!this.thumbnail&&(a.innerHTML=e)}},{key:"updatePosition",value:function(e,i,a,o){var l=this.root,u=this.config,c=this._state;if(l){c.now=a,this.transformTimeHook(a);var d=this.timeStr;o&&o.target&&k.hasClass(o.target,"xgplayer-spot")?(this.showTips(o.target.getAttribute("data-text"),!1,d),this.focusDot(o.target),c.f=!0,u.isFocusDots&&c.f&&(c.now=parseInt(o.target.getAttribute("data-time"),10))):u.defaultText?(c.f=!1,this.showTips(u.defaultText,!0,d)):(c.f=!1,this.hideTips("")),this.updateTimeText(d),this.updateThumbnails(c.now),this.updateLinePos(e,i)}}},{key:"setTimeContent",value:function(e){this.timeStr=e}},{key:"updateThumbnails",value:function(e){var i=this.player,a=this.videoPreview,o=this.config,l=i.plugins.thumbnail;if(l&&l.usable){this.thumbnail&&l.update(this.thumbnail,e,o.width,o.height);var u=a&&a.getBoundingClientRect();this.videothumbnail&&l.update(this.videothumbnail,e,u.width,u.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Te.device!=="mobile"){var i=this.player,a=this.config,o=i.getPlugin("thumbnail");if(o&&o.setConfig(e),!o||!o.usable||!a.isShowThumbnail){k.addClass(this.root,"short-line no-thumbnail");return}else k.removeClass(this.root,"short-line no-thumbnail");a.mode==="short"&&k.addClass(this.root,"short-line"),this._hasThumnail=!0;var l=this.find(".xg-spot-thumbnail");this.thumbnail=o.createThumbnail(l,"progress-thumbnail"),a.isShowCoverPreview&&(this.videoPreview=k.createDom("xg-video-preview","",{},"xgvideo-preview"),i.root.appendChild(this.videoPreview),this.videothumbnail=o.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)}}},{key:"calcuPosition",value:function(e,i){var a=this.player.plugins.progress,o=this.player,l=a.root.getBoundingClientRect().width,u=o.duration/l*6;return e+i>o.duration&&(i=o.duration-e),e/o.duration*100,i/o.duration,{left:e/o.duration*100,width:i/o.duration*100,isMini:i<u}}},{key:"showDot",value:function(e){var i=this.findDot(e);if(i){var a=this.root.getBoundingClientRect(),o=a.width,l=i.time/this.player.duration*o;this.updatePosition(l,o,i.time)}}},{key:"focusDot",value:function(e,i){e&&(i||(i=e.getAttribute("data-id")),k.addClass(e,"active"),this._activeDotId=i)}},{key:"blurDot",value:function(e){if(!e){var i=this._activeDotId;e=this.getDotDom(i)}e&&(k.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";k.addClass(this.root,"no-timepoint"),e&&(k.addClass(this.find(".xg-spot-content"),"show-text"),i&&this.config.mode==="production"?(k.addClass(this.root,"product"),this.tipText.textContent=e):(k.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(a," ").concat(e)))}},{key:"hideTips",value:function(){k.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",k.removeClass(this.find(".xg-spot-content"),"show-text"),k.removeClass(this.root,"product")}},{key:"hide",value:function(){k.addClass(this.root,"hide")}},{key:"show",value:function(){k.removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,i=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(i.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var e=this,i=this.player.plugins.progress;i&&Object.keys(Ti).map(function(a){i.removeCallBack(a,e[Ti[a]])}),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return Te.device==="mobile"||this.playerConfig.isMobileSimulateMode==="mobile"?"":'<div class="xg-spot-info hide '.concat(this.config.mode==="short"?"short-line":"",`">
      <div class="xg-spot-content">
        <div class="xg-spot-thumbnail">
          <span class="xg-spot-time"></span>
        </div>
        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>
      </div>
      <div class="xgplayer-progress-point">00:00</div>
      <div class="xg-spot-ext-text"></div>
      <div class="xg-spot-line"></div>
    </div>`)}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}]),n}(Ue),Pk=function(r){be(n,r);var s=Se(n);function n(t){var e;return ue(this,n),e=s.call(this,t),e.ratio=1,e.interval=null,e._preloadMark={},e}return ce(n,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([mi],function(){var i=e.config,a=i.pic_num,o=i.interval;e.usable&&(e.interval=o>0?o:Math.round(e.player.duration*1e3/a)/1e3)})}},{key:"setConfig",value:function(e){var i=this;if(e){var a=Object.keys(e);a.length<1||(a.forEach(function(o){i.config[o]=e[o]}),this.usable&&this.initThumbnail())}}},{key:"usable",get:function(){var e=this.config,i=e.urls,a=e.pic_num;return i&&i.length>0&&a>0}},{key:"initThumbnail",value:function(){var e=this.config,i=e.width,a=e.height,o=e.pic_num,l=e.interval;this.ratio=i/a*100,this.interval=l||Math.round(this.player.duration/o),this._preloadMark={}}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var i=this;if(!this._preloadMark[e]){var a=this.config.urls,o=a.length,l=[];e>0&&l.push(e-1),l.push(e),e>0&&e<o-1&&l.push(e+1),l.map(function(u){!i._preloadMark[u]&&u>=0&&u<o&&(i._preloadMark[u]=1,k.preloadImg(a[u],function(){i._preloadMark[u]=2}))})}}},{key:"getPosition",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=this.config,l=o.pic_num,u=o.row,c=o.col,d=o.width,p=o.height;this.interval=Math.round(this.player.duration/l);var h=Math.ceil(e/this.interval);h=h>l?l:h;var m=h<u*c?0:Math.ceil(h/(u*c))-1,f=h-m*(c*u),v=f>0?Math.ceil(f/c)-1:0,b=f>0?f-v*c-1:0,w=0,C=0;if(i&&a){var T=i/a;T<d/p?(C=a,w=C*(d/p)):(w=i,C=w/(d/p))}else a?i||(C=a||p,w=C*(d/p)):(w=i||d,C=w/(d/p));var L=this.getUrlByIndex(m);return{urlIndex:m,rowIndex:v,colIndex:b,url:L,height:C,width:w,style:{backgroundImage:"url(".concat(L,")"),backgroundSize:"".concat(w*c,"px auto"),backgroundPosition:"-".concat(b*w,"px -").concat(v*C,"px"),width:"".concat(w,"px"),height:"".concat(C,"px")}}}},{key:"update",value:function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",u=this.config,c=u.pic_num,d=u.urls;if(!(c<=0||!d||d.length===0)){var p=this.getPosition(i,a,o);this.preload(p.urlIndex),Object.keys(p.style).map(function(h){e.style[h]=p.style[h]}),Object.keys(l).map(function(h){e.style[h]=l[h]})}}},{key:"changeConfig",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.setConfig(e)}},{key:"createThumbnail",value:function(e,i){var a=k.createDom("xg-thumbnail","",{},"thumbnail ".concat(i));return e&&e.appendChild(a),a}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),n}(Ue),Mk=function(r){be(n,r);var s=Se(n);function n(){return ue(this,n),s.apply(this,arguments)}return ce(n,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},i=arguments.length>1?arguments[1]:void 0;!i||!this.root||(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/i*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/i*100,"%")))}},{key:"render",value:function(){if(!(!this.playerConfig.progress||!this.playerConfig.miniprogress))return`<xg-mini-progress class="xg-mini-progress">
    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>
    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>
    </xg-mini-progress>`}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),n}(Ue),es={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",FRAME_RATE:"framerate",POSTER:"poster"};function Xk(){try{return parseInt(window.performance.now(),10)}catch{return new Date().getTime()}}function Gk(){try{var r=document.createElement("canvas").getContext;return!!r}catch{return!1}}var ea=null,Wk=function(r){be(n,r);var s=Se(n);function n(){var t;ue(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),K(A(t),"onLoadedData",function(o){t.player&&(t._frameCount=t.config.startFrameCount,t.renderOnTimeupdate(o),t.off(Mn,t.renderOnTimeupdate),t.on(Mn,t.renderOnTimeupdate))}),K(A(t),"renderOnTimeupdate",function(o){t._frameCount>0?(t.renderOnce(),t._frameCount--):(t._isLoaded=!0,t.off(Mn,t.renderOnTimeupdate),!t.player.paused&&t._checkIfCanStart()&&t.start())}),K(A(t),"start",function(){var o=t.player.media,l=Xk(),u=t.checkVideoIsSupport(o);!u||!t.canvasCtx||(t.stop(),o.videoWidth&&o.videoHeight&&(t.videoPI=o.videoHeight>0?parseInt(o.videoWidth/o.videoHeight*100,10):0,(t.config.mode===es.REAL_TIME||l-t.preTime>=t.interval)&&(o&&o.videoWidth&&t.update(u,t.videoPI),t.preTime=l)),t.frameId=k.requestAnimationFrame(t.start))}),K(A(t),"stop",function(){t.frameId&&(k.cancelAnimationFrame(t.frameId),t.frameId=null)}),t}return ce(n,[{key:"afterCreate",value:function(){var e=this;this.playerConfig.dynamicBg===!0&&(this.config.disable=!1),n.isSupport||(this.config.disable=!0);var i=this.config,a=i.disable,o=i.mode,l=i.frameRate;a||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/l,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this.once(qa,function(){e.player&&(e.init(),e.player.paused||e.start())}),o!==es.POSTER&&(o!==es.FIRST_FRAME&&(this.on(zi,function(){e.stop()}),this.on(wn,function(){e._checkIfCanStart()&&e.start()}),this.on(Ui,function(){e.stop()})),this.on(ai,this.onLoadedData),this.on(au,function(){e._isLoaded=!1,e.stop()})))}},{key:"init",value:function(){var e=this.player,i=this.config;this.canvasFilter=n.supportCanvasFilter();try{var a=this.config.isInnerRender&&e.innerContainer||e.root;a.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg" data-index="'.concat(i.index,`"><canvas>
        </canvas><xgmask></xgmask></div>`)),this.root=a.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=i.filter,this.canvas.style.webkitFilter=i.filter),this.mask=this.find("xgmask"),i.addMask&&(this.mask.style.background=i.maskBg),this.canvasCtx=this.canvas.getContext("2d"),this.renderByPoster()}catch(o){We.logError("plugin:DynamicBg",o)}}},{key:"checkVideoIsSupport",value:function(e){if(!e)return null;var i=e&&e instanceof window.HTMLVideoElement?e:e.canvas?e.canvas:e.flyVideo?e.flyVideo:null;if(i&&!(Te.browser==="safari"&&(/^blob/.test(i.currentSrc)||/^blob/.test(i.src))))return i;var a=i?i.tagName.toLowerCase():"";return a==="canvas"||a==="img"?i:null}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;if(e){var i=k.typeOf(e)==="String"?e:k.typeOf(e.poster)==="String"?e.poster:null;this.updateImg(i)}}},{key:"_checkIfCanStart",value:function(){var e=this.config.mode;return this._isLoaded&&e!==es.FIRST_FRAME&&e!==es.POSTER}},{key:"renderOnce",value:function(){var e=this.player.media;if(!(!e.videoWidth||!e.videoHeight)){this.videoPI=parseInt(e.videoWidth/e.videoHeight*100,10);var i=this.checkVideoIsSupport(e);i&&e.videoWidth&&this.update(i,this.videoPI)}}},{key:"updateImg",value:function(e){var i=this;if(e){var a=this.canvas.getBoundingClientRect(),o=a.width,l=a.height,u=new window.Image;u.onload=function(){if(!(!i.canvas||i.frameId||i.isStart)){i.canvas.height=l,i.canvas.width=o;var c=parseInt(o/l*100,10);i.update(u,c),u=null}},u.src=e}}},{key:"update",value:function(e,i){if(!(!this.canvas||!this.canvasCtx||!i))try{var a=this._pos,o=this.config,l=this.canvas.getBoundingClientRect(),u=l.width,c=l.height;if(u!==a.width||c!==a.height||a.pi!==i){var d=parseInt(u/c*100,10);a.pi=i,a.width=this.canvas.width=u,a.height=this.canvas.height=c;var p=c,h=u;d<i?h=parseInt(c*i/100,10):d>i&&(p=parseInt(u*100/i,10)),a.rwidth=h*o.multiple,a.rheight=p*o.multiple,a.x=(u-a.rwidth)/2,a.y=(c-a.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=o.filter),this.canvasCtx.drawImage(e,a.x,a.y,a.rwidth,a.rheight)}catch(m){We.logError("plugin:DynamicBg",m)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,index:-1,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:2,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return typeof ea=="boolean"||(ea=Gk()),ea}},{key:"supportCanvasFilter",value:function(){return!(Te.browser==="safari"||Te.browser==="firefox")}}]),n}(Ue),Vk={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"视频下载错误"},mse:{code:2,msg:"流追加错误"},parse:{code:3,msg:"解析错误"},format:{code:4,msg:"格式错误"},decoder:{code:5,msg:"解码错误"},runtime:{code:6,msg:"语法错误"},timeout:{code:7,msg:"播放超时"},other:{code:8,msg:"其他错误"}},HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"网络错误",MEDIA_ERR_DECODE:"解码错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭",OPEN:"开启",MINI_DRAG:"点击按住可拖动视频",MINISCREEN:"小屏幕",REFRESH_TIPS:"请试试",REFRESH:"刷新",FORWARD:"快进中",LIVE_TIP:"直播"}},ts="info",Xo=zh,Ak=function(r){be(n,r);var s=Se(n);function n(){var t;ue(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),K(A(t),"_recordUserActions",function(o){var l=t._getTime(),u=Object.assign({},o,{msg:o.msg||o.action});t._stats[ts].push(ht(ht({type:"userAction"},l),{},{payload:u}))}),K(A(t),"_onReset",function(){t.reset()}),K(A(t),"_recordInfo",function(o){t.info(o)}),K(A(t),"_downloadStats",function(){var o=t.getStats(),l=new Blob([JSON.stringify(o)],{type:"application/json"}),u=window.URL.createObjectURL(l),c=document.createElement("a");c.style.display="none",c.href=u,c.download="player.txt",c.disabled=!1,c.click()}),t}return ce(n,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:new Date().toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(_a,this._recordUserActions),this.on(Xo.STATS_INFO,this._recordInfo),this.on(Xo.STATS_DOWNLOAD,this._downloadStats),this.on(Xo.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var i=this._getTime();this._stats[ts].push(ht(ht({},i),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var i=Date.now(),a=i-e.startMs,o=ht({cat:"function",dur:a,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(o)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(e={},K(e,ts,[]),K(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player,i=e.media,a=[],o=0;o<i.buffered.length;o++)a.push({start:i.buffered.start(o),end:i.buffered.end(o)});var l={currentTime:i.currentTime,readyState:i.readyState,buffered:a,paused:i.paused,ended:i.ended};return this._stats.media=l,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){var e=this._stats[ts],i=e.map(function(a){var o=a.payload.data,l="";try{o instanceof Error?l=o.msg:o!==void 0&&(l=JSON.stringify(o))}catch(u){console.log("err",u)}return"[".concat(a.timeFormat,"] : ").concat(a.payload.msg," ").concat(l," ")});return i}},{key:"_getProfile",value:function(){var e={traceEvents:[]},i=this._stats[ts];return i.forEach(function(a){a.payload.profile&&e.traceEvents.push(a.payload)}),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),n}(pn),tf=function(r){be(n,r);var s=Se(n);function n(){var t;ue(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),K(A(t),"onGapJump",function(){var o=A(t),l=o.player,u=o.config;if(l.media.readyState!==HTMLMediaElement.HAVE_NOTHING){if(l.media.seeking){if(!t.seekingEventReceived)return}else t.seekingEventReceived=!1;if(!(l.media.paused&&l.media.currentTime!==0&&t.hasPlayed)){var c=l.media.buffered,d=u.smallGapLimit||.5,p=u.gapDetectionThreshold||.3,h=l.media.currentTime,m=t._getIndex(c,h,p);if(!(m===null||m===0)){console.log("GapJump  bufferRange ",c.start(m),c.end(m));var f=c.start(m)+.1,v=l.media.duration;if(!(f>v)){var b=f-h,w=b<=d;b<n.BROWSER_GAP_TOLERANCE||w&&(u.useGapJump!==!1&&(l.media.currentTime=t.isSafari?f+.1:f),t.player&&t.player.emit("detectGap"),console.log("gapJump gapIndex",m," isGapSamll:",w," currentTime:",l.media.currentTime," jumpSize:",h-l.media.currentTime),f!==.08&&l&&l.emit("log",{type:"oneevent",end_type:"gap",vid:l.config.vid,ext:{video_postion:Math.floor(f*1e3)}}))}}}}}),t}return ce(n,[{key:"afterCreate",value:function(){var e=this,i=this.config.useGapJump;i!==!1&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(si,this.onGapJump),this.on(wn,function(){e.hasPlayed=!0}),this.on(Fi,function(){e.seekingEventReceived=!0}))}},{key:"_getIndex",value:function(e,i,a){if(!e||!e.length||e.length===1&&e.end(0)-e.start(0)<1e-6)return null;for(var o=this._getBuffered(e),l=null,u=0;u<o.length;u++){var c=o[u];if(c.start>i&&(u===0||o[u-1].end-i<=a)){l=u;break}}return l}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var i=[],a=0;a<e.length;a++)i.push({start:e.start(a),end:e.end(a)});return i}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),n}(Ue);tf.BROWSER_GAP_TOLERANCE=.001;var Nk=function(r){be(n,r);var s=Se(n);function n(){var t;ue(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),K(A(t),"onWaiting",function(){var o=A(t),l=o.config;t.jumpCnt>l.jumpCntMax||t.timer||l.useWaitingTimeoutJump===!1||(t.timer=setTimeout(t.onJump,l.waitingTime*1e3))}),K(A(t),"onJump",function(){var o=A(t),l=o.player,u=o.config;if(clearTimeout(t.timer),t.timer=null,!(t.jumpCnt>u.jumpCntMax||u.useWaitingTimeoutJump===!1)&&!(l.media.paused&&l.media.currentTime!==0&&t.hasPlayed)){t.jumpSize=u.jumpSize*(t.jumpCnt+1),t.jumpCnt===u.jumpSize&&t.jumpSize<6&&(t.jumpSize=6);var c=l.currentTime+t.jumpSize,d=l.media.duration;c>d||(console.log("waitintTimeout, currentTime:",l.currentTime,", jumpTo:",c),t.jumpCnt++,l.currentTime=c)}}),t}return ce(n,[{key:"afterCreate",value:function(){var e=this,i=this.config,a=i.useWaitingTimeoutJump,o=i.jumpSize;a!==!1&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=o,this.on(si,this.onWaiting),this.on([su,pr],function(){clearTimeout(e.timer),e.timer=null,e.jumpSize=e.config.jumpSize}),this.on(wn,function(){e.hasPlayed=!0}))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]),n}(Ue),Ok=function(r){be(n,r);var s=Se(n);function n(){var t;ue(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),K(A(t),"getSpeed",function(o){if(t.speedListCache.length<=0)return 0;var l=0;return t.speedListCache.map(function(u){l+=u}),Math.floor(l/t.speedListCache.length)}),K(A(t),"_onRealSpeedChange",function(o){o.speed&&t.appendList(o.speed)}),K(A(t),"testSpeed",function(){if(clearTimeout(t.timer),t.timer=null,!(!t.player||!t.config.openSpeed)){var o=t.config,l=o.url,u=o.loadSize,c=o.testCnt,d=o.testTimeStep,p=l+(l.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(t.cnt>=c)){t.cnt++;try{var h=new Date().getTime(),m=null,f=new XMLHttpRequest;t.xhr=f,f.open("GET",p);var v={},b=Math.floor(Math.random()*10);v.Range="bytes="+b+"-"+(u+b),v&&Object.keys(v).forEach(function(w){f.setRequestHeader(w,v[w])}),f.onreadystatechange=function(){if(f.readyState===4){t.xhr=null,m=new Date().getTime();var w=f.getResponseHeader("Content-Length")/1024*8,C=Math.round(w*1e3/(m-h));t.appendList(C),t.timer=setTimeout(t.testSpeed,d)}},f.send()}catch(w){console.error(w)}}}}),K(A(t),"appendList",function(o){var l=t.config.saveSpeedMax;t.speedListCache.length>=l&&t.speedListCache.shift(),t.speedListCache.push(o),t.player&&(t.player.realTimeSpeed=o),t.updateSpeed()}),K(A(t),"updateSpeed",function(){var o=t.getSpeed(),l=A(t),u=l.player;u&&(!u.avgSpeed||o!==u.avgSpeed)&&(u.avgSpeed=o,u.emit(Wh,{speed:o,realTimeSpeed:u.realTimeSpeed}))}),t}return ce(n,[{key:"afterCreate",value:function(){var e=this;this.speedListCache=[];var i=this.config,a=i.openSpeed,o=i.testTimeStep;this.timer=null,this.cnt=0,this.xhr=null,a&&(this.on("real_time_speed",this._onRealSpeedChange),this.on([ai,cu],function(){k.isMSE(e.player.video)||(e.speedListCache=[],e.cnt=0,e.timer=setTimeout(e.testSpeed,o))}))}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(e){if(this.config.openSpeed=e,!e&&this.timer){clearTimeout(this.timer),this.timer=null;return}if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){clearTimeout(this.timer),this.timer=null,this.xhr&&this.xhr.readyState!==4&&(this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:200*1024,testTimeStep:3e3,url:"",saveSpeedMax:5}}}]),n}(Ue),Yk=function(r){be(n,r);var s=Se(n);function n(){return ue(this,n),s.apply(this,arguments)}return ce(n,[{key:"afterCreate",value:function(){var e=this,i=this.player,a=this.config;if(this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,this._payload=[],!a.disabled){var o=i.media.getVideoPlaybackQuality;o&&(this.on(wn,function(){e._startTick()}),this.on(Ui,function(){e._stopTick()}),this.on(hi,function(){e._stopTick()}),this.on(zi,function(){e._stopTick()}))}}},{key:"_startTick",value:function(){var e=this;this._stopTick(),this._timer=setTimeout(function(){e._checkDecodeFPS(),e._startTick()},this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkStuck",value:function(e,i,a,o){var l=this.player.media,u=document.hidden,c=l.paused;if(typeof u=="boolean"&&!u&&!c){for(var d=l.currentTime,p=l.buffered,h=!1,m=[],f=0;f<p.length;f++){var v=p.start(f),b=p.end(f);if(m.push({start:v,end:b}),v<=d&&d<=b-1){h=!0;break}}l.readyState===4&&h&&(this._currentStuckCount>this.config.stuckCount?(this.emit(Bh,this._payload),this._reset()):e<=this.config.reportFrame?(this._currentStuckCount++,this._payload.push({bufs:m,currentTime:l.currentTime,curDecodedFrames:e,totalVideoFrames:i,droppedVideoFrames:a,checkInterval:o})):this._reset())}}},{key:"_reset",value:function(){this._payload=[],this._currentStuckCount=0}},{key:"_checkDecodeFPS",value:function(){if(this.player.media){var e=this.player.media.getVideoPlaybackQuality(),i=e.totalVideoFrames,a=e.droppedVideoFrames,o=performance.now();if(i&&this._lastCheckPoint){var l=i-this._lastDecodedFrames,u=o-this._lastCheckPoint;this._checkStuck(l,i,a,u)}this._lastDecodedFrames=i,this._lastCheckPoint=o}}},{key:"destroy",value:function(){this._stopTick()}}],[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}]),n}(Ue);xi.use(Vk);var Hk=ce(function r(s,n){var t,e,i;ue(this,r);var a=n&&n.isMobileSimulateMode==="mobile",o=n.isLive,l=o?[]:[ek,Mk,Ik,ok],u=[].concat(l,[tk,ak,hk,gk,_k,Zk,Ck,Lk,dk,vk]),c=[PT,MT,GT,QT,WT,xk,Fk,Pk,OT];this.plugins=[Ak,RT].concat(Xr(u),c,[tf,Nk]);var d=a?"mobile":Te.device;switch(d){case"pc":(t=this.plugins).push.apply(t,[Sd,Po,Cd,Ok,Yk]);break;case"mobile":(e=this.plugins).push.apply(e,[BT]);break;default:(i=this.plugins).push.apply(i,[Sd,Po,Cd])}(Te.os.isIpad||d==="pc")&&this.plugins.push(Wk),Te.os.isIpad&&this.plugins.push(Po),this.ignores=[],this.i18n=[]}),Xn=function(r){be(n,r);var s=Se(n);function n(){return ue(this,n),s.apply(this,arguments)}return ce(n)}(pu);K(Xn,"defaultPreset",Hk);K(Xn,"Util",k);K(Xn,"Sniffer",Te);K(Xn,"Errors",Un);K(Xn,"Events",oT);K(Xn,"Plugin",Ue);K(Xn,"BasePlugin",pn);K(Xn,"I18N",xi);K(Xn,"STATE_CLASS",Q);function Kk(r,s){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t,e,i,a,o=[],l=!0,u=!1;try{if(i=(n=n.call(r)).next,s===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(t=i.call(n)).done)&&(o.push(t.value),o.length!==s);l=!0);}catch(c){u=!0,e=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw e}}return o}}function kd(r,s){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);s&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),n.push.apply(n,t)}return n}function Be(r){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?kd(Object(n),!0).forEach(function(t){G(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):kd(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ie(){ie=function(){return r};var r={},s=Object.prototype,n=s.hasOwnProperty,t=Object.defineProperty||function(g,y,S){g[y]=S.value},e=typeof Symbol=="function"?Symbol:{},i=e.iterator||"@@iterator",a=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function l(g,y,S){return Object.defineProperty(g,y,{value:S,enumerable:!0,configurable:!0,writable:!0}),g[y]}try{l({},"")}catch{l=function(y,S,E){return y[S]=E}}function u(g,y,S,E){var Z=y&&y.prototype instanceof p?y:p,R=Object.create(Z.prototype),M=new P(E||[]);return t(R,"_invoke",{value:L(g,S,M)}),R}function c(g,y,S){try{return{type:"normal",arg:g.call(y,S)}}catch(E){return{type:"throw",arg:E}}}r.wrap=u;var d={};function p(){}function h(){}function m(){}var f={};l(f,i,function(){return this});var v=Object.getPrototypeOf,b=v&&v(v(I([])));b&&b!==s&&n.call(b,i)&&(f=b);var w=m.prototype=p.prototype=Object.create(f);function C(g){["next","throw","return"].forEach(function(y){l(g,y,function(S){return this._invoke(y,S)})})}function T(g,y){function S(Z,R,M,O){var z=c(g[Z],g,R);if(z.type!=="throw"){var N=z.arg,ne=N.value;return ne&&typeof ne=="object"&&n.call(ne,"__await")?y.resolve(ne.__await).then(function(B){S("next",B,M,O)},function(B){S("throw",B,M,O)}):y.resolve(ne).then(function(B){N.value=B,M(N)},function(B){return S("throw",B,M,O)})}O(z.arg)}var E;t(this,"_invoke",{value:function(Z,R){function M(){return new y(function(O,z){S(Z,R,O,z)})}return E=E?E.then(M,M):M()}})}function L(g,y,S){var E="suspendedStart";return function(Z,R){if(E==="executing")throw new Error("Generator is already running");if(E==="completed"){if(Z==="throw")throw R;return V()}for(S.method=Z,S.arg=R;;){var M=S.delegate;if(M){var O=_(M,S);if(O){if(O===d)continue;return O}}if(S.method==="next")S.sent=S._sent=S.arg;else if(S.method==="throw"){if(E==="suspendedStart")throw E="completed",S.arg;S.dispatchException(S.arg)}else S.method==="return"&&S.abrupt("return",S.arg);E="executing";var z=c(g,y,S);if(z.type==="normal"){if(E=S.done?"completed":"suspendedYield",z.arg===d)continue;return{value:z.arg,done:S.done}}z.type==="throw"&&(E="completed",S.method="throw",S.arg=z.arg)}}}function _(g,y){var S=y.method,E=g.iterator[S];if(E===void 0)return y.delegate=null,S==="throw"&&g.iterator.return&&(y.method="return",y.arg=void 0,_(g,y),y.method==="throw")||S!=="return"&&(y.method="throw",y.arg=new TypeError("The iterator does not provide a '"+S+"' method")),d;var Z=c(E,g.iterator,y.arg);if(Z.type==="throw")return y.method="throw",y.arg=Z.arg,y.delegate=null,d;var R=Z.arg;return R?R.done?(y[g.resultName]=R.value,y.next=g.nextLoc,y.method!=="return"&&(y.method="next",y.arg=void 0),y.delegate=null,d):R:(y.method="throw",y.arg=new TypeError("iterator result is not an object"),y.delegate=null,d)}function D(g){var y={tryLoc:g[0]};1 in g&&(y.catchLoc=g[1]),2 in g&&(y.finallyLoc=g[2],y.afterLoc=g[3]),this.tryEntries.push(y)}function x(g){var y=g.completion||{};y.type="normal",delete y.arg,g.completion=y}function P(g){this.tryEntries=[{tryLoc:"root"}],g.forEach(D,this),this.reset(!0)}function I(g){if(g){var y=g[i];if(y)return y.call(g);if(typeof g.next=="function")return g;if(!isNaN(g.length)){var S=-1,E=function Z(){for(;++S<g.length;)if(n.call(g,S))return Z.value=g[S],Z.done=!1,Z;return Z.value=void 0,Z.done=!0,Z};return E.next=E}}return{next:V}}function V(){return{value:void 0,done:!0}}return h.prototype=m,t(w,"constructor",{value:m,configurable:!0}),t(m,"constructor",{value:h,configurable:!0}),h.displayName=l(m,o,"GeneratorFunction"),r.isGeneratorFunction=function(g){var y=typeof g=="function"&&g.constructor;return!!y&&(y===h||(y.displayName||y.name)==="GeneratorFunction")},r.mark=function(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,m):(g.__proto__=m,l(g,o,"GeneratorFunction")),g.prototype=Object.create(w),g},r.awrap=function(g){return{__await:g}},C(T.prototype),l(T.prototype,a,function(){return this}),r.AsyncIterator=T,r.async=function(g,y,S,E,Z){Z===void 0&&(Z=Promise);var R=new T(u(g,y,S,E),Z);return r.isGeneratorFunction(y)?R:R.next().then(function(M){return M.done?M.value:R.next()})},C(w),l(w,o,"Generator"),l(w,i,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),r.keys=function(g){var y=Object(g),S=[];for(var E in y)S.push(E);return S.reverse(),function Z(){for(;S.length;){var R=S.pop();if(R in y)return Z.value=R,Z.done=!1,Z}return Z.done=!0,Z}},r.values=I,P.prototype={constructor:P,reset:function(g){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!g)for(var y in this)y.charAt(0)==="t"&&n.call(this,y)&&!isNaN(+y.slice(1))&&(this[y]=void 0)},stop:function(){this.done=!0;var g=this.tryEntries[0].completion;if(g.type==="throw")throw g.arg;return this.rval},dispatchException:function(g){if(this.done)throw g;var y=this;function S(z,N){return R.type="throw",R.arg=g,y.next=z,N&&(y.method="next",y.arg=void 0),!!N}for(var E=this.tryEntries.length-1;E>=0;--E){var Z=this.tryEntries[E],R=Z.completion;if(Z.tryLoc==="root")return S("end");if(Z.tryLoc<=this.prev){var M=n.call(Z,"catchLoc"),O=n.call(Z,"finallyLoc");if(M&&O){if(this.prev<Z.catchLoc)return S(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return S(Z.finallyLoc)}else if(M){if(this.prev<Z.catchLoc)return S(Z.catchLoc,!0)}else{if(!O)throw new Error("try statement without catch or finally");if(this.prev<Z.finallyLoc)return S(Z.finallyLoc)}}}},abrupt:function(g,y){for(var S=this.tryEntries.length-1;S>=0;--S){var E=this.tryEntries[S];if(E.tryLoc<=this.prev&&n.call(E,"finallyLoc")&&this.prev<E.finallyLoc){var Z=E;break}}Z&&(g==="break"||g==="continue")&&Z.tryLoc<=y&&y<=Z.finallyLoc&&(Z=null);var R=Z?Z.completion:{};return R.type=g,R.arg=y,Z?(this.method="next",this.next=Z.finallyLoc,d):this.complete(R)},complete:function(g,y){if(g.type==="throw")throw g.arg;return g.type==="break"||g.type==="continue"?this.next=g.arg:g.type==="return"?(this.rval=this.arg=g.arg,this.method="return",this.next="end"):g.type==="normal"&&y&&(this.next=y),d},finish:function(g){for(var y=this.tryEntries.length-1;y>=0;--y){var S=this.tryEntries[y];if(S.finallyLoc===g)return this.complete(S.completion,S.afterLoc),x(S),d}},catch:function(g){for(var y=this.tryEntries.length-1;y>=0;--y){var S=this.tryEntries[y];if(S.tryLoc===g){var E=S.completion;if(E.type==="throw"){var Z=E.arg;x(S)}return Z}}throw new Error("illegal catch attempt")},delegateYield:function(g,y,S){return this.delegate={iterator:I(g),resultName:y,nextLoc:S},this.method==="next"&&(this.arg=void 0),d}},r}function Fa(r){"@babel/helpers - typeof";return Fa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Fa(r)}function _d(r,s,n,t,e,i,a){try{var o=r[i](a),l=o.value}catch(u){n(u);return}o.done?s(l):Promise.resolve(l).then(t,e)}function Oe(r){return function(){var s=this,n=arguments;return new Promise(function(t,e){var i=r.apply(s,n);function a(l){_d(i,t,e,a,o,"next",l)}function o(l){_d(i,t,e,a,o,"throw",l)}a(void 0)})}}function bt(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function Zd(r,s){for(var n=0;n<s.length;n++){var t=s[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,rf(t.key),t)}}function St(r,s,n){return s&&Zd(r.prototype,s),n&&Zd(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function G(r,s,n){return s=rf(s),s in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n,r}function no(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&ul(r,s)}function Ra(r){return Ra=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ra(r)}function ul(r,s){return ul=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ul(r,s)}function Uk(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ze(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function zk(r,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ze(r)}function ro(r){var s=Uk();return function(){var t=Ra(r),e;if(s){var i=Ra(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return zk(this,e)}}function wr(r,s){return Jk(r)||Kk(r,s)||nf(r,s)||qk()}function Bk(r){return jk(r)||Qk(r)||nf(r)||$k()}function jk(r){if(Array.isArray(r))return cl(r)}function Jk(r){if(Array.isArray(r))return r}function Qk(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function nf(r,s){if(r){if(typeof r=="string")return cl(r,s);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cl(r,s)}}function cl(r,s){(s==null||s>r.length)&&(s=r.length);for(var n=0,t=new Array(s);n<s;n++)t[n]=r[n];return t}function $k(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e_(r,s){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var t=n.call(r,s||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}function rf(r){var s=e_(r,"string");return typeof s=="symbol"?s:String(s)}function Dd(r,s){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);s&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),n.push.apply(n,t)}return n}function Ls(r){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?Dd(Object(n),!0).forEach(function(t){U(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Dd(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function yt(){yt=function(){return r};var r={},s=Object.prototype,n=s.hasOwnProperty,t=Object.defineProperty||function(g,y,S){g[y]=S.value},e=typeof Symbol=="function"?Symbol:{},i=e.iterator||"@@iterator",a=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function l(g,y,S){return Object.defineProperty(g,y,{value:S,enumerable:!0,configurable:!0,writable:!0}),g[y]}try{l({},"")}catch{l=function(y,S,E){return y[S]=E}}function u(g,y,S,E){var Z=y&&y.prototype instanceof p?y:p,R=Object.create(Z.prototype),M=new P(E||[]);return t(R,"_invoke",{value:L(g,S,M)}),R}function c(g,y,S){try{return{type:"normal",arg:g.call(y,S)}}catch(E){return{type:"throw",arg:E}}}r.wrap=u;var d={};function p(){}function h(){}function m(){}var f={};l(f,i,function(){return this});var v=Object.getPrototypeOf,b=v&&v(v(I([])));b&&b!==s&&n.call(b,i)&&(f=b);var w=m.prototype=p.prototype=Object.create(f);function C(g){["next","throw","return"].forEach(function(y){l(g,y,function(S){return this._invoke(y,S)})})}function T(g,y){function S(Z,R,M,O){var z=c(g[Z],g,R);if(z.type!=="throw"){var N=z.arg,ne=N.value;return ne&&typeof ne=="object"&&n.call(ne,"__await")?y.resolve(ne.__await).then(function(B){S("next",B,M,O)},function(B){S("throw",B,M,O)}):y.resolve(ne).then(function(B){N.value=B,M(N)},function(B){return S("throw",B,M,O)})}O(z.arg)}var E;t(this,"_invoke",{value:function(Z,R){function M(){return new y(function(O,z){S(Z,R,O,z)})}return E=E?E.then(M,M):M()}})}function L(g,y,S){var E="suspendedStart";return function(Z,R){if(E==="executing")throw new Error("Generator is already running");if(E==="completed"){if(Z==="throw")throw R;return V()}for(S.method=Z,S.arg=R;;){var M=S.delegate;if(M){var O=_(M,S);if(O){if(O===d)continue;return O}}if(S.method==="next")S.sent=S._sent=S.arg;else if(S.method==="throw"){if(E==="suspendedStart")throw E="completed",S.arg;S.dispatchException(S.arg)}else S.method==="return"&&S.abrupt("return",S.arg);E="executing";var z=c(g,y,S);if(z.type==="normal"){if(E=S.done?"completed":"suspendedYield",z.arg===d)continue;return{value:z.arg,done:S.done}}z.type==="throw"&&(E="completed",S.method="throw",S.arg=z.arg)}}}function _(g,y){var S=y.method,E=g.iterator[S];if(E===void 0)return y.delegate=null,S==="throw"&&g.iterator.return&&(y.method="return",y.arg=void 0,_(g,y),y.method==="throw")||S!=="return"&&(y.method="throw",y.arg=new TypeError("The iterator does not provide a '"+S+"' method")),d;var Z=c(E,g.iterator,y.arg);if(Z.type==="throw")return y.method="throw",y.arg=Z.arg,y.delegate=null,d;var R=Z.arg;return R?R.done?(y[g.resultName]=R.value,y.next=g.nextLoc,y.method!=="return"&&(y.method="next",y.arg=void 0),y.delegate=null,d):R:(y.method="throw",y.arg=new TypeError("iterator result is not an object"),y.delegate=null,d)}function D(g){var y={tryLoc:g[0]};1 in g&&(y.catchLoc=g[1]),2 in g&&(y.finallyLoc=g[2],y.afterLoc=g[3]),this.tryEntries.push(y)}function x(g){var y=g.completion||{};y.type="normal",delete y.arg,g.completion=y}function P(g){this.tryEntries=[{tryLoc:"root"}],g.forEach(D,this),this.reset(!0)}function I(g){if(g){var y=g[i];if(y)return y.call(g);if(typeof g.next=="function")return g;if(!isNaN(g.length)){var S=-1,E=function Z(){for(;++S<g.length;)if(n.call(g,S))return Z.value=g[S],Z.done=!1,Z;return Z.value=void 0,Z.done=!0,Z};return E.next=E}}return{next:V}}function V(){return{value:void 0,done:!0}}return h.prototype=m,t(w,"constructor",{value:m,configurable:!0}),t(m,"constructor",{value:h,configurable:!0}),h.displayName=l(m,o,"GeneratorFunction"),r.isGeneratorFunction=function(g){var y=typeof g=="function"&&g.constructor;return!!y&&(y===h||(y.displayName||y.name)==="GeneratorFunction")},r.mark=function(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,m):(g.__proto__=m,l(g,o,"GeneratorFunction")),g.prototype=Object.create(w),g},r.awrap=function(g){return{__await:g}},C(T.prototype),l(T.prototype,a,function(){return this}),r.AsyncIterator=T,r.async=function(g,y,S,E,Z){Z===void 0&&(Z=Promise);var R=new T(u(g,y,S,E),Z);return r.isGeneratorFunction(y)?R:R.next().then(function(M){return M.done?M.value:R.next()})},C(w),l(w,o,"Generator"),l(w,i,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),r.keys=function(g){var y=Object(g),S=[];for(var E in y)S.push(E);return S.reverse(),function Z(){for(;S.length;){var R=S.pop();if(R in y)return Z.value=R,Z.done=!1,Z}return Z.done=!0,Z}},r.values=I,P.prototype={constructor:P,reset:function(g){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!g)for(var y in this)y.charAt(0)==="t"&&n.call(this,y)&&!isNaN(+y.slice(1))&&(this[y]=void 0)},stop:function(){this.done=!0;var g=this.tryEntries[0].completion;if(g.type==="throw")throw g.arg;return this.rval},dispatchException:function(g){if(this.done)throw g;var y=this;function S(z,N){return R.type="throw",R.arg=g,y.next=z,N&&(y.method="next",y.arg=void 0),!!N}for(var E=this.tryEntries.length-1;E>=0;--E){var Z=this.tryEntries[E],R=Z.completion;if(Z.tryLoc==="root")return S("end");if(Z.tryLoc<=this.prev){var M=n.call(Z,"catchLoc"),O=n.call(Z,"finallyLoc");if(M&&O){if(this.prev<Z.catchLoc)return S(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return S(Z.finallyLoc)}else if(M){if(this.prev<Z.catchLoc)return S(Z.catchLoc,!0)}else{if(!O)throw new Error("try statement without catch or finally");if(this.prev<Z.finallyLoc)return S(Z.finallyLoc)}}}},abrupt:function(g,y){for(var S=this.tryEntries.length-1;S>=0;--S){var E=this.tryEntries[S];if(E.tryLoc<=this.prev&&n.call(E,"finallyLoc")&&this.prev<E.finallyLoc){var Z=E;break}}Z&&(g==="break"||g==="continue")&&Z.tryLoc<=y&&y<=Z.finallyLoc&&(Z=null);var R=Z?Z.completion:{};return R.type=g,R.arg=y,Z?(this.method="next",this.next=Z.finallyLoc,d):this.complete(R)},complete:function(g,y){if(g.type==="throw")throw g.arg;return g.type==="break"||g.type==="continue"?this.next=g.arg:g.type==="return"?(this.rval=this.arg=g.arg,this.method="return",this.next="end"):g.type==="normal"&&y&&(this.next=y),d},finish:function(g){for(var y=this.tryEntries.length-1;y>=0;--y){var S=this.tryEntries[y];if(S.finallyLoc===g)return this.complete(S.completion,S.afterLoc),x(S),d}},catch:function(g){for(var y=this.tryEntries.length-1;y>=0;--y){var S=this.tryEntries[y];if(S.tryLoc===g){var E=S.completion;if(E.type==="throw"){var Z=E.arg;x(S)}return Z}}throw new Error("illegal catch attempt")},delegateYield:function(g,y,S){return this.delegate={iterator:I(g),resultName:y,nextLoc:S},this.method==="next"&&(this.arg=void 0),d}},r}function Ni(r){"@babel/helpers - typeof";return Ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ni(r)}function Ed(r,s,n,t,e,i,a){try{var o=r[i](a),l=o.value}catch(u){n(u);return}o.done?s(l):Promise.resolve(l).then(t,e)}function vr(r){return function(){var s=this,n=arguments;return new Promise(function(t,e){var i=r.apply(s,n);function a(l){Ed(i,t,e,a,o,"next",l)}function o(l){Ed(i,t,e,a,o,"throw",l)}a(void 0)})}}function $t(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function xd(r,s){for(var n=0;n<s.length;n++){var t=s[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,af(t.key),t)}}function qt(r,s,n){return s&&xd(r.prototype,s),n&&xd(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function U(r,s,n){return s=af(s),s in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n,r}function Ws(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&Ts(r,s)}function li(r){return li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},li(r)}function Ts(r,s){return Ts=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ts(r,s)}function sf(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ca(r,s,n){return sf()?ca=Reflect.construct.bind():ca=function(e,i,a){var o=[null];o.push.apply(o,i);var l=Function.bind.apply(e,o),u=new l;return a&&Ts(u,a.prototype),u},ca.apply(null,arguments)}function t_(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Ia(r){var s=typeof Map=="function"?new Map:void 0;return Ia=function(t){if(t===null||!t_(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof s<"u"){if(s.has(t))return s.get(t);s.set(t,e)}function e(){return ca(t,arguments,li(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Ts(e,t)},Ia(r)}function n_(r,s){if(r==null)return{};var n={},t=Object.keys(r),e,i;for(i=0;i<t.length;i++)e=t[i],!(s.indexOf(e)>=0)&&(n[e]=r[e]);return n}function r_(r,s){if(r==null)return{};var n=n_(r,s),t,e;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(e=0;e<i.length;e++)t=i[e],!(s.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function de(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function i_(r,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return de(r)}function Vs(r){var s=sf();return function(){var t=li(r),e;if(s){var i=li(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return i_(this,e)}}function s_(r,s){for(;!Object.prototype.hasOwnProperty.call(r,s)&&(r=li(r),r!==null););return r}function da(){return typeof Reflect<"u"&&Reflect.get?da=Reflect.get.bind():da=function(s,n,t){var e=s_(s,n);if(e){var i=Object.getOwnPropertyDescriptor(e,n);return i.get?i.get.call(arguments.length<3?s:t):i.value}},da.apply(this,arguments)}function a_(r,s){if(r){if(typeof r=="string")return Fd(r,s);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fd(r,s)}}function Fd(r,s){(s==null||s>r.length)&&(s=r.length);for(var n=0,t=new Array(s);n<s;n++)t[n]=r[n];return t}function o_(r,s){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=a_(r))||s&&r&&typeof r.length=="number"){n&&(r=n);var t=0,e=function(){};return{s:e,n:function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}},e:function(l){throw l},f:e}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,a=!1,o;return{s:function(){n=n.call(r)},n:function(){var l=n.next();return i=l.done,l},e:function(l){a=!0,o=l},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw o}}}}function l_(r,s){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var t=n.call(r,s||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}function af(r){var s=l_(r,"string");return typeof s=="symbol"?s:String(s)}function Di(){var r,s,n=new Promise(function(t,e){r=t,s=e});return n.used=!1,n.resolve=function(){return n.used=!0,r.apply(void 0,arguments)},n.reject=function(){return n.used=!0,s.apply(void 0,arguments)},n}function ki(){try{return parseInt(performance.now(),10)}catch{return new Date().getTime()}}var ut=function(){function r(){$t(this,r)}return qt(r,null,[{key:"start",value:function(n){return!n||!n.length||n.length===1&&n.end(0)-n.start(0)<1e-6||n.length===1&&n.start(0)<0?0:n.start(0)}},{key:"end",value:function(n){return!n||!n.length||n.length===1&&n.end(0)-n.start(0)<1e-6?0:n.end(n.length-1)}},{key:"get",value:function(n){if(n)try{return n.buffered}catch{}}},{key:"buffers",value:function(n,t){if(!n||!n.length)return[];for(var e=[],i=0,a=n.length;i<a;i++){var o=e.length;if(!o||!t)e.push([n.start(i),n.end(i)]);else{var l=e[o-1],u=l[1],c=n.start(i);if(c-u<=t){var d=n.end(i);d>u&&(l[1]=d)}else e.push([n.start(i),n.end(i)])}}return e}},{key:"totalLength",value:function(n){return!n||!n.length?0:n.reduce(function(t,e){return t+=e[1]-e[0]},0)}},{key:"info",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(!n||!n.length)return{start:0,end:0,buffers:[]};for(var i=0,a=0,o=0,l=0,u=0,c=0,d=0,p=r.buffers(n,e),h=0,m=p.length;h<m;h++){var f=p[h];if(t+e>=f[0]&&t<=f[1])i=f[0],a=f[1],o=h;else if(t+e<f[0]){l=f[0],u=f[1];break}else t+e>f[1]&&(c=f[0],d=f[1])}return{start:i,end:a,index:o,buffers:p,nextStart:l,nextEnd:u,prevStart:c,prevEnd:d,currentTime:t,behind:t-i,remaining:a?a-t:0,length:r.totalLength&&r.totalLength(p)}}}]),r}(),zt,De={MANIFEST:"manifest",NETWORK:"network",NETWORK_TIMEOUT:"network_timeout",NETWORK_FORBIDDEN:"network_forbidden",NETWORK_NOTFOUND:"network_notfound",NETWROK_RANGE_NOT_SATISFIABLE:"network_range_not_satisfiable",DEMUX:"demux",REMUX:"remux",MEDIA:"media",DRM:"drm",OTHER:"other",RUNTIME:"runtime",SUB_TYPES:{FLV:"FLV",HLS:"HLS",MP4:"MP4",FMP4:"FMP4",MSE_ADD_SB:"MSE_ADD_SB",MSE_APPEND_BUFFER:"MSE_APPEND_BUFFER",MSE_OTHER:"MSE_OTHER",MSE_FULL:"MSE_FULL",OPTION:"OPTION",DASH:"DASH",LICENSE:"LICENSE",CUSTOM_LICENSE:"CUSTOM_LICENSE",MSE_HIJACK:"MSE_HIJACK",EME_HIJACK:"EME_HIJACK",SIDX:"SIDX",NO_CANPLAY_ERROR:"NO_CANPLAY_ERROR",BUFFERBREAK_ERROR:"BUFFERBREAK_ERROR",WAITING_TIMEOUT_ERROR:"WAITINT_TIME_OUT_ERROR",MEDIA_ERR_ABORTED:"MEDIA_ERR_ABORTED",MEDIA_ERR_NETWORK:"MEDIA_ERR_NETWORK",MEDIA_ERR_DECODE:"MEDIA_ERR_DECODE",MEDIA_ERR_SRC_NOT_SUPPORTED:"MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ERR_CODEC_NOT_SUPPORTED:"MEDIA_ERR_CODEC_NOT_SUPPORTED",MEDIA_ERR_URL_EMPTY:"MEDIA_ERR_URL_EMPTY"}},Go=(zt={},U(zt,De.MANIFEST,{HLS:1100,DASH:1200}),U(zt,De.NETWORK,2100),U(zt,De.NETWORK_TIMEOUT,2101),U(zt,De.NETWORK_FORBIDDEN,2103),U(zt,De.NETWORK_NOTFOUND,2104),U(zt,De.NETWROK_RANGE_NOT_SATISFIABLE,2116),U(zt,De.DEMUX,{FLV:3100,HLS:3200,MP4:3300,FMP4:3400,SIDX:3410}),U(zt,De.REMUX,{FMP4:4100,MP4:4200}),U(zt,De.MEDIA,{MEDIA_ERR_ABORTED:5101,MEDIA_ERR_NETWORK:5102,MEDIA_ERR_DECODE:5103,MEDIA_ERR_SRC_NOT_SUPPORTED:5104,MEDIA_ERR_CODEC_NOT_SUPPORTED:5105,MEDIA_ERR_URL_EMPTY:5106,MSE_ADD_SB:5200,MSE_APPEND_BUFFER:5201,MSE_OTHER:5202,MSE_FULL:5203,MSE_HIJACK:5204,EME_HIJACK:5301}),U(zt,De.DRM,{LICENSE:7100,CUSTOM_LICENSE:7200}),U(zt,De.OTHER,8e3),U(zt,De.RUNTIME,{NO_CANPLAY_ERROR:9001,BUFFERBREAK_ERROR:9002,WAITING_TIMEOUT_ERROR:9003}),zt),it=function(r){Ws(n,r);var s=Vs(n);function n(t,e,i,a,o){var l;return $t(this,n),l=s.call(this,o||(i==null?void 0:i.message)),l.errorType=t===De.NETWORK_TIMEOUT?De.NETWORK:t,l.originError=i,l.ext=a,l.errorCode=Go[t][e]||Go[t],l.errorMessage=l.message,l.errorCode||(l.errorType=De.OTHER,l.errorCode=Go[l.errorType]),l}return qt(n,null,[{key:"create",value:function(e,i,a,o,l){return e instanceof n?e:(e instanceof Error&&(a=e,e=""),e||(e=De.OTHER),new n(e,i,a,o,l))}},{key:"network",value:function(e){var i;return new n(e!=null&&e.isTimeout?De.NETWORK_TIMEOUT:De.NETWORK,null,e instanceof Error?e:null,{url:e==null?void 0:e.url,response:e==null?void 0:e.response,httpCode:e==null||(i=e.response)===null||i===void 0?void 0:i.status})}}]),n}(Ia(Error)),u_=typeof window<"u",ta={DEBUG:1,LOG:2,WARN:3,ERROR:4},c_=200*1024,d_=["Boolean","Number","String","Undefined","Null","Date","Object"],Kt=function(){function r(s,n){$t(this,r),this.name=s||"",this._prefix="[".concat(this.name,"]"),r.disabled=(n==null?void 0:n.disabled)||!0,this.logCacheLevel=(n==null?void 0:n.logCacheLevel)||3,this.logMaxSize=(n==null?void 0:n.logMaxSize)||c_,this.logSize=0,this.logTextArray=[]}return qt(r,[{key:"debug",value:function(){for(var n,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.logCache.apply(this,[ta.DEBUG].concat(e)),!r.disabled&&(n=console).debug.apply(n,[this._prefix,ns()].concat(e))}},{key:"log",value:function(){for(var n,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.logCache.apply(this,[ta.LOG].concat(e)),!r.disabled&&(n=console).log.apply(n,[this._prefix,ns()].concat(e))}},{key:"warn",value:function(){for(var n,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.logCache.apply(this,[ta.WARN].concat(e)),!r.disabled&&(n=console).warn.apply(n,[this._prefix,ns()].concat(e))}},{key:"error",value:function(){for(var n,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.logCache.apply(this,[ta.ERROR].concat(e)),!r.disabled&&(n=console).error.apply(n,[this._prefix,ns()].concat(e))}},{key:"logCache",value:function(n){if(!(n<this.logCacheLevel)){var t="";try{for(var e=arguments.length,i=new Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];var o=i.map(function(u){return of(u)});t=this._prefix+ns()+JSON.stringify(o)}catch{return}if(n>=this.logCacheLevel&&(this.logSize+=t.length,this.logTextArray.push(t)),this.logSize>this.logMaxSize){var l=this.logTextArray.shift();this.logSize-=l.length}}}},{key:"getLogCache",value:function(){var n=this.logTextArray.join(`
`);return this.reset(),n}},{key:"reset",value:function(){this.logTextArray=[],this.logSize=0}},{key:"table",value:function(){var n;r.disabled||(console.group(this._prefix),(n=console).table.apply(n,arguments),console.groupEnd())}},{key:"setLogLevel",value:function(n){this.logCacheLevel=n}}],[{key:"enable",value:function(){r.disabled=!1}},{key:"disable",value:function(){r.disabled=!0}}]),r}();U(Kt,"disabled",!0);function ns(){return new Date().toLocaleString()}function p_(r){if(Ni(r)!=="object")return r;var s=Object.prototype.toString.call(r).slice(8,-1);switch(s){case"Array":case"Uint8Array":case"ArrayBuffer":return s+"["+r.length+"]";case"Object":return"{}";default:return s}}function of(r,s,n){n||(n=1),s||(s=2);var t={};if(!r||Ni(r)!=="object")return r;var e=Object.prototype.toString.call(r).slice(8,-1);if(!d_.includes(e))return e;if(!(n>s)){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n===s?t[i]=p_(r[i]):Ni(r[i])==="object"?t[i]=of(r[i],s,n+1):t[i]=r[i]);return t}}function h_(){try{return u_?window.MediaSource:null}catch{}}var na=h_(),rs={APPEND:"appendBuffer",REMOVE:"removeBuffer",UPDATE_DURATION:"updateDuration"},lt=function(){function r(s,n){var t=this;$t(this,r),U(this,"media",null),U(this,"mediaSource",null),U(this,"_openPromise",Di()),U(this,"_queue",Object.create(null)),U(this,"_sourceBuffer",Object.create(null)),U(this,"_mseFullFlag",{}),U(this,"_st",0),U(this,"_opst",0),U(this,"_logger",null),U(this,"_config",null),U(this,"_url",null),U(this,"_onSBUpdateEnd",function(e){var i=t._queue[e];if(i){var a=i[0];if((a==null?void 0:a.opName)!==rs.UPDATE_DURATION&&i.shift(),a){var o=ki()-t._opst;t._logger.debug("UpdateEnd",a.opName,o,a.context),a.promise.resolve({name:a.opName,context:a.context,costtime:o}),t._startQueue(e)}}}),U(this,"_onSBUpdateError",function(e,i){var a=t._queue[e];if(a){var o=a[0];o&&(t._logger.error("UpdateError",e,o.opName,o.context),o.promise.reject(new it(De.MEDIA,De.SUB_TYPES.MSE_APPEND_BUFFER,i)))}}),this._config=Object.assign(r.getDefaultConfig(),n),s&&this.bindMedia(s),this._logger=new Kt("MSE"),this._config.openLog&&Kt.enable()}return qt(r,[{key:"isOpened",get:function(){var n;return((n=this.mediaSource)===null||n===void 0?void 0:n.readyState)==="open"}},{key:"url",get:function(){return this._url}},{key:"duration",get:function(){var n;return((n=this.mediaSource)===null||n===void 0?void 0:n.duration)||-1}},{key:"isEnded",get:function(){return this.mediaSource?this.mediaSource.readyState==="ended":!1}},{key:"isFull",value:function(n){return n?this._mseFullFlag[n]:this._mseFullFlag[r.VIDEO]}},{key:"updateDuration",value:function(n){var t=this,e=this.mediaSource&&this.mediaSource.duration>n;if(this.mediaSource&&this.mediaSource.duration>n){var i=0;if(Object.keys(this._sourceBuffer).forEach(function(a){try{i=Math.max(t.bufferEnd(a)||0,i)}catch{}}),n<i)return Promise.resolve()}return this._enqueueBlockingOp(function(){if(t.isEnded){t._logger.debug("[debug mse] setDuration ended");return}t.mediaSource&&(t.mediaSource.duration=n,t._logger.debug("[debug mse] setDuration"))},rs.UPDATE_DURATION,{isReduceDuration:e})}},{key:"open",value:function(){var n=this;if(this._openPromise.used&&!this.isOpened&&this.mediaSource){var t=this.mediaSource,e=function i(){var a=ki()-n._st;n._logger.debug("MSE OPEN",a),t.removeEventListener("sourceopen",i),n._openPromise.resolve({costtime:a})};t.addEventListener("sourceopen",e),this._openPromise=Di()}return this._openPromise}},{key:"bindMedia",value:function(){var s=vr(yt().mark(function t(e){var i=this,a,o;return yt().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(this.mediaSource||this.media)){u.next=3;break}return u.next=3,this.unbindMedia();case 3:if(!(!e||!na)){u.next=5;break}throw new Error("Param media or MediaSource does not exist");case 5:return this.media=e,a=this.mediaSource=new na,this._st=ki(),o=function c(){var d=ki()-i._st;i._logger.debug("MSE OPEN"),a.removeEventListener("sourceopen",c),URL.revokeObjectURL(e.src),i._openPromise.resolve({costtime:d})},a.addEventListener("sourceopen",o),this._url=URL.createObjectURL(a),e.src=this._url,u.abrupt("return",this._openPromise);case 13:case"end":return u.stop()}},t,this)}));function n(t){return s.apply(this,arguments)}return n}()},{key:"unbindMedia",value:function(){var s=vr(yt().mark(function t(){var e=this,i,a,o;return yt().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this._openPromise.used||this._openPromise.resolve(),i=this.mediaSource,i){if(Object.keys(this._queue).forEach(function(c){var d=e._queue[c];d&&d.forEach(function(p){return p.promise.resolve})}),a=!!this.media&&this.media.readyState>=1,o=i.readyState==="open",a&&o)try{i.endOfStream()}catch{}Object.keys(this._sourceBuffer).forEach(function(c){try{i.removeSourceBuffer(e._sourceBuffer[c])}catch{}})}if(this.media){this.media.removeAttribute("src");try{this.media.load()}catch{}this.media=null}this.mediaSource=null,this._openPromise=Di(),this._queue=Object.create(null),this._sourceBuffer=Object.create(null);case 8:case"end":return u.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"createSource",value:function(n,t){if(!(this._sourceBuffer[n]||!this.mediaSource)){var e;try{e=this._sourceBuffer[n]=this.mediaSource.addSourceBuffer(t)}catch(i){throw new it(De.MEDIA,De.SUB_TYPES.MSE_ADD_SB,i)}e.mimeType=t,e.addEventListener("updateend",this._onSBUpdateEnd.bind(this,n)),e.addEventListener("error",this._onSBUpdateError.bind(this,n))}}},{key:"changeType",value:function(n,t){var e=this,i=this._sourceBuffer[n];return!this.mediaSource||!i||i.mimeType===t?Promise.resolve():typeof i.changeType!="function"?Promise.reject():this._enqueueOp(n,function(){i.changeType(t),i.mimeType=t,e._onSBUpdateEnd(n)},"changeType",{mimeType:t})}},{key:"createOrChangeSource",value:function(n,t){return this.createSource(n,t),this.changeType(n,t)}},{key:"append",value:function(n,t,e){var i=this;return!t||!t.byteLength||!this._sourceBuffer[n]?Promise.resolve():this._enqueueOp(n,function(){var a;!i.mediaSource||i.media.error||(i._logger.debug("MSE APPEND START",e),i._opst=ki(),(a=i._sourceBuffer[n])===null||a===void 0||a.appendBuffer(t))},rs.APPEND,e)}},{key:"remove",value:function(n,t,e,i){var a=this,o=!1;return this._mseFullFlag[n]&&(o=!0),this._enqueueOp(n,function(){if(!(!a.mediaSource||a.media.error)){var l=a._sourceBuffer[n];if(t>=e||!l){a._onSBUpdateEnd(n);return}a._opst=ki(),a._logger.debug("MSE REMOVE START",n,t,e,i),l.remove(t,e)}},rs.REMOVE,i,o)}},{key:"clearBuffer",value:function(n,t){var e=this,i;return Object.keys(this._sourceBuffer).forEach(function(a){i=e._enqueueOp(a,function(){if(!(!e.mediaSource||e.media.error)){var o=e._sourceBuffer[a];e._logger.debug("MSE clearBuffer START",a,n,t),o.remove(n,t)}},rs.REMOVE)}),i}},{key:"clearAllBuffer",value:function(){var n=this,t;return Object.keys(this._sourceBuffer).forEach(function(e){t=n._enqueueOp(e,function(){if(!(!n.mediaSource||n.media.error)){var i=n._sourceBuffer[e];n._logger.debug("MSE clearAllBuffer START",e),i.remove(0,ut.end(ut.get(i)))}})}),t}},{key:"clearOpQueues",value:function(n,t){var e;this._logger.debug("MSE clearOpQueue START");var i=this._queue[n];if(t&&i){this._queue[n]=[];return}if(!(!i||!i[n]||i.length<5)){var a=[];i.forEach(function(o){o.context&&o.context.isinit&&a.push(o)}),this._queue[n]=i.slice(0,2),a.length>0&&(e=this._queue[n]).push.apply(e,a)}}},{key:"endOfStream",value:function(n){var t=this;return!this.mediaSource||this.mediaSource.readyState!=="open"?Promise.resolve():this._enqueueBlockingOp(function(){var e=t.mediaSource;!e||e.readyState!=="open"||(t._logger.debug("MSE endOfStream START"),n?e.endOfStream(n):e.endOfStream())},"endOfStream")}},{key:"setLiveSeekableRange",value:function(n,t){var e=this.mediaSource;n<0||t<n||!(e!=null&&e.setLiveSeekableRange)||e.readyState!=="open"||e.setLiveSeekableRange(n,t)}},{key:"getSourceBuffer",value:function(n){return this._sourceBuffer[n]}},{key:"buffered",value:function(n){return ut.get(this._sourceBuffer[n])}},{key:"bufferStart",value:function(n){return ut.start(this.buffered(n))}},{key:"bufferEnd",value:function(n){return ut.end(this.buffered(n))}},{key:"_enqueueOp",value:function(n,t,e,i,a){var o=this;if(!this.mediaSource)return Promise.resolve();var l=this._queue[n]=this._queue[n]||[],u={exec:t,promise:Di(),opName:e,context:i};return a?(l.splice(0,0,u),this._mseFullFlag[n]=!1,this._startQueue(n)):l.push(u),this.isOpened||this.isEnded?l.length===1&&this._startQueue(n):this._openPromise.then(function(){l.length===1&&o._startQueue(n)}),u.promise}},{key:"_enqueueBlockingOp",value:function(){var s=vr(yt().mark(function t(e,i,a){var o=this,l,u;return yt().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.mediaSource){d.next=2;break}return d.abrupt("return",Promise.resolve());case 2:if(l=Object.keys(this._sourceBuffer),l.length){d.next=5;break}return d.abrupt("return",e());case 5:return u=[],l.forEach(function(p){var h=o._queue[p],m=Di();u.push(m),h.push({exec:function(){m.resolve()},promise:m,opName:i,context:a}),h.length===1&&o._startQueue(p)}),d.abrupt("return",Promise.all(u).then(function(){try{return e()}finally{l.forEach(function(p){var h=o._queue[p],m=o._sourceBuffer[p];h==null||h.shift(),(!m||!m.updating)&&o._startQueue(p)})}}));case 8:case"end":return d.stop()}},t,this)}));function n(t,e,i){return s.apply(this,arguments)}return n}()},{key:"_startQueue",value:function(n){var t=this._queue[n];if(t){var e=t[0];if(e&&!this._mseFullFlag[n])try{e.exec()}catch(i){i&&i.message&&i.message.indexOf("SourceBuffer is full")>=0?(this._mseFullFlag[n]=!0,this._logger.error("[MSE error],  context,",e.context," ,name,",e.opName,",err,SourceBuffer is full"),e.promise.reject(new it(De.MEDIA,De.SUB_TYPES.MSE_FULL,i))):(this._logger.error(i),e.promise.reject(new it(De.MEDIA,De.SUB_TYPES.MSE_OTHER,i)),t.shift(),this._startQueue(n))}}}},{key:"setTimeoffset",value:function(n,t,e){var i=this;return this._enqueueOp(n,function(){t<0&&(t+=.001),i._sourceBuffer[n].timestampOffset=t,i._onSBUpdateEnd(n)},"setTimeoffset",e)}},{key:"abort",value:function(n,t){var e=this;return this.isOpened?this._enqueueOp(n,function(){e._sourceBuffer[n].abort(),e._onSBUpdateEnd(n)},"abort",t):Promise.resolve()}}],[{key:"getDefaultConfig",value:function(){return{openLog:!1}}},{key:"isSupported",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if(!na)return!1;try{return na.isTypeSupported(n)}catch(t){return this._logger.error(n,t),!1}}}]),r}();U(lt,"VIDEO","video");U(lt,"AUDIO","audio");var jr={FETCH:"fetch",XHR:"xhr"},ks={ARRAY_BUFFER:"arraybuffer",TEXT:"text",JSON:"json"},Hn=function(r){Ws(n,r);var s=Vs(n);function n(t,e,i,a){var o;return $t(this,n),o=s.call(this,a),U(de(o),"retryCount",0),U(de(o),"isTimeout",!1),U(de(o),"loaderType",jr.FETCH),U(de(o),"startTime",0),U(de(o),"endTime",0),U(de(o),"options",{}),o.url=t,o.request=e,o.response=i,o}return qt(n)}(Ia(Error)),lf=Object.prototype.toString;function f_(r){return r!==null&&Ni(r)==="object"}function Rd(r){if(lf.call(r)!=="[object Object]")return!1;var s=Object.getPrototypeOf(r);return s===null||s===Object.prototype}function m_(r){return lf.call(r)==="[object Date]"}function uf(r){if(!(!r||r[0]===null||r[0]===void 0||r[0]===0&&(r[1]===null||r[1]===void 0))){var s="bytes="+r[0]+"-";return r[1]&&(s+=r[1]),s}}function Id(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function cf(r,s){if(r){if(!s)return r;var n,t=Object.keys(s).map(function(i){if(n=s[i],n!=null)return Array.isArray(n)?i=i+"[]":n=[n],n.map(function(a){return m_(a)?a=a.toISOString():f_(a)&&(a=JSON.stringify(a)),"".concat(Id(i),"=").concat(Id(a))}).join("&")}).filter(Boolean).join("&");if(t){var e=r.indexOf("#");e!==-1&&(r=r.slice(0,e)),r+=(r.indexOf("?")===-1?"?":"&")+t}return r}}function dl(r,s,n,t,e,i,a,o,l,u,c){e=e!=null?parseFloat(e):null,t=parseInt(t||"0",10),Number.isNaN(t)&&(t=0);var d={range:l,vid:u,index:o,contentLength:t,age:e,startTime:i,firstByteTime:a,endTime:Date.now(),priOptions:c};return{data:r,done:s,options:d,response:n}}function pl(r,s){return Math.round(r*8*1e3/s/1024)}var j={ERROR:"error",TTFB:"core.ttfb",LOAD_START:"core.loadstart",LOAD_RESPONSE_HEADERS:"core.loadresponseheaders",LOAD_COMPLETE:"core.loadcomplete",LOAD_RETRY:"core.loadretry",SOURCEBUFFER_CREATED:"core.sourcebuffercreated",ANALYZE_DURATION_EXCEEDED:"core.analyzedurationexceeded",REMOVE_BUFFER:"core.removebuffer",BUFFEREOS:"core.buffereos",KEYFRAME:"core.keyframe",METADATA_PARSED:"core.metadataparsed",SEI:"core.sei",SEI_IN_TIME:"core.seiintime",FLV_SCRIPT_DATA:"core.flvscriptdata",LOWDECODE:"core.lowdecode",SWITCH_URL_SUCCESS:"core.switchurlsuccess",SWITCH_URL_FAILED:"core.switchurlfailed",SPEED:"core.speed",HLS_MANIFEST_LOADED:"core.hlsmanifestloaded",HLS_LEVEL_LOADED:"core.hlslevelloaded",DEMUXED_TRACK:"core.demuxedtrack",STREAM_EXCEPTION:"core.streamexception",LARGE_AV_FIRST_FRAME_GAP_DETECT:"LARGE_AV_FIRST_FRAME_GAP_DETECT",LARGE_VIDEO_DTS_GAP_DETECT:"LARGE_VIDEO_DTS_GAP_DETECT",LARGE_AUDIO_DTS_GAP_DETECT:"LARGE_AUDIO_DTS_GAP_DETECT",AUDIO_GAP_DETECT:"AUDIO_GAP_DETECT",AUDIO_OVERLAP_DETECT:"AUDIO_OVERLAP_DETECT",MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT:"MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT",REAL_TIME_SPEED:"real_time_speed"},Pd=2*1024*1024,hl=function(r){Ws(n,r);var s=Vs(n);function n(){var t;return $t(this,n),t=s.call(this),U(de(t),"_abortController",null),U(de(t),"_timeoutTimer",null),U(de(t),"_reader",null),U(de(t),"_response",null),U(de(t),"_aborted",!1),U(de(t),"_index",-1),U(de(t),"_range",null),U(de(t),"_receivedLength",0),U(de(t),"_running",!1),U(de(t),"_logger",null),U(de(t),"_vid",""),U(de(t),"_onProcessMinLen",0),U(de(t),"_onCancel",null),U(de(t),"_priOptions",null),t}return qt(n,[{key:"load",value:function(e){var i,a=this,o=e.url,l=e.vid,u=e.timeout,c=e.responseType,d=e.onProgress,p=e.index,h=e.onTimeout,m=e.onCancel,f=e.range,v=e.transformResponse,b=e.request,w=e.params,C=e.logger,T=e.method,L=e.headers,_=e.body,D=e.mode,x=e.credentials,P=e.cache,I=e.redirect,V=e.referrer,g=e.referrerPolicy,y=e.onProcessMinLen,S=e.priOptions;this._logger=C,this._aborted=!1,this._onProcessMinLen=y,this._onCancel=m,this._abortController=typeof AbortController<"u"&&new AbortController,this._running=!0,this._index=p,this._range=f||[0,0],this._vid=l||o,this._priOptions=S||{};var E={method:T,headers:L,body:_,mode:D,credentials:x,cache:P,redirect:I,referrer:V,referrerPolicy:g,signal:(i=this._abortController)===null||i===void 0?void 0:i.signal},Z=!1;clearTimeout(this._timeoutTimer),o=cf(o,w);var R=uf(f);R&&(b?L=b.headers:L=E.headers=E.headers||(Headers?new Headers:{}),Headers&&L instanceof Headers?L.append("Range",R):L.Range=R),u&&(this._timeoutTimer=setTimeout(function(){if(Z=!0,a.cancel(),h){var O=new Hn(o,E,null,"timeout");O.isTimeout=!0,h(O,{index:a._index,range:a._range,vid:a._vid,priOptions:a._priOptions})}},u));var M=Date.now();return this._logger.debug("[fetch load start], index,",p,",range,",f),new Promise(function(O,z){fetch(b||o,b?void 0:E).then(function(){var N=vr(yt().mark(function ne(B){var qe,Xe,ze,te;return yt().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(clearTimeout(a._timeoutTimer),a._response=B,!(a._aborted||!a._running)){le.next=4;break}return le.abrupt("return");case 4:if(v&&(B=v(B,o)||B),B.ok){le.next=7;break}throw new Hn(o,E,B,"bad network response");case 7:if(qe=Date.now(),c!==ks.TEXT){le.next=15;break}return le.next=11,B.text();case 11:Xe=le.sent,a._running=!1,le.next=37;break;case 15:if(c!==ks.JSON){le.next=22;break}return le.next=18,B.json();case 18:Xe=le.sent,a._running=!1,le.next=37;break;case 22:if(!d){le.next=29;break}return a.resolve=O,a.reject=z,a._loadChunk(B,d,M,qe),le.abrupt("return");case 29:return le.next=31,B.arrayBuffer();case 31:Xe=le.sent,Xe=new Uint8Array(Xe),a._running=!1,ze=Date.now()-M,te=pl(Xe.byteLength,ze),a.emit(j.REAL_TIME_SPEED,{speed:te,len:Xe.byteLength,time:ze,vid:a._vid,index:a._index,range:a._range,priOptions:a._priOptions});case 37:a._logger.debug("[fetch load end], index,",p,",range,",f),O(dl(Xe,!0,B,B.headers.get("Content-Length"),B.headers.get("age"),M,qe,p,f,a._vid,a._priOptions));case 39:case"end":return le.stop()}},ne)}));return function(ne){return N.apply(this,arguments)}}()).catch(function(N){var ne;clearTimeout(a._timeoutTimer),a._running=!1,!(a._aborted&&!Z)&&(N=N instanceof Hn?N:new Hn(o,E,null,(ne=N)===null||ne===void 0?void 0:ne.message),N.startTime=M,N.endTime=Date.now(),N.isTimeout=Z,N.options={index:a._index,range:a._range,vid:a._vid,priOptions:a._priOptions},z(N))})})}},{key:"cancel",value:function(){var t=vr(yt().mark(function i(){return yt().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this._aborted){o.next=2;break}return o.abrupt("return");case 2:if(this._aborted=!0,this._running=!1,!this._response){o.next=14;break}if(o.prev=5,!this._reader){o.next=9;break}return o.next=9,this._reader.cancel();case 9:o.next=13;break;case 11:o.prev=11,o.t0=o.catch(5);case 13:this._response=this._reader=null;case 14:if(this._abortController){try{this._abortController.abort()}catch{}this._abortController=null}this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions});case 16:case"end":return o.stop()}},i,this,[[5,11]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"_loadChunk",value:function(e,i,a,o){var l=this;if(!e.body||!e.body.getReader){this._running=!1;var u=new Hn(e.url,"",e,"onProgress of bad response.body.getReader");u.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this.reject(u);return}this._onProcessMinLen>0&&(this._cache=new Uint8Array(Pd),this._writeIdx=0);var c=this._reader=e.body.getReader(),d,p,h,m=function(){var f=vr(yt().mark(function v(){var b,w,C,T,L,_,D,x;return yt().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return p=Date.now(),I.prev=1,I.next=4,c.read();case 4:d=I.sent,h=Date.now(),I.next=13;break;case 8:return I.prev=8,I.t0=I.catch(1),h=Date.now(),l._aborted||(l._running=!1,I.t0.options={index:l._index,range:l._range,vid:l._vid,priOptions:l._priOptions},l.reject(I.t0)),I.abrupt("return");case 13:if(w=((b=l._range)===null||b===void 0?void 0:b.length)>0?l._range[0]:0,C=w+l._receivedLength,!l._aborted){I.next=19;break}return l._running=!1,i(void 0,!1,{range:[C,C],vid:l._vid,index:l._index,startTime:p,endTime:h,st:a,firstByteTime:o,priOptions:l._priOptions},e),I.abrupt("return");case 19:T=d.value?d.value.byteLength:0,l._receivedLength+=T,l._logger.debug("【fetchLoader,onProgress call】,task,",l._range,", start,",C,", end,",w+l._receivedLength,", done,",d.done),l._onProcessMinLen>0?l._writeIdx+T>=l._onProcessMinLen||d.done?(L=new Uint8Array(l._writeIdx+T),L.set(l._cache.slice(0,l._writeIdx),0),T>0&&L.set(d.value,l._writeIdx),l._writeIdx=0,l._logger.debug("【fetchLoader,onProgress enough】,done,",d.done,",len,",L.byteLength,", writeIdx,",l._writeIdx)):T>0&&l._writeIdx+T<Pd?(l._cache.set(d.value,l._writeIdx),l._writeIdx+=T,l._logger.debug("【fetchLoader,onProgress cache】,len,",T,", writeIdx,",l._writeIdx)):T>0&&(_=new Uint8Array(l._writeIdx+T+2048),l._logger.debug("【fetchLoader,onProgress extra start】,size,",l._writeIdx+T+2048,", datalen,",T,", writeIdx,",l._writeIdx),_.set(l._cache.slice(0,l._writeIdx),0),T>0&&_.set(d.value,l._writeIdx),l._writeIdx+=T,delete l._cache,l._cache=_,l._logger.debug("【fetchLoader,onProgress extra end】,len,",T,", writeIdx,",l._writeIdx)):L=d.value,(L&&L.byteLength>0||d.done)&&i(L,d.done,{range:[l._range[0]+l._receivedLength-(L?L.byteLength:0),l._range[0]+l._receivedLength],vid:l._vid,index:l._index,startTime:p,endTime:h,st:a,firstByteTime:o,priOptions:l._priOptions},e),d.done?(D=Date.now()-a,x=pl(l._receivedLength,D),l.emit(j.REAL_TIME_SPEED,{speed:x,len:l._receivedLength,time:D,vid:l._vid,index:l._index,range:l._range,priOptions:l._priOptions}),l._running=!1,l._logger.debug("[fetchLoader onProgress end],task,",l._range,",done,",d.done),l.resolve(dl(d,!0,e,e.headers.get("Content-Length"),e.headers.get("age"),a,o,l._index,l._range,l._vid,l._priOptions))):m();case 25:case"end":return I.stop()}},v,null,[[1,8]])}));return function(){return f.apply(this,arguments)}}();m()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}}],[{key:"isSupported",value:function(){return typeof fetch<"u"}}]),n}(qn);function v_(r){return Ls({loaderType:jr.FETCH,retry:0,retryDelay:0,timeout:0,request:null,onTimeout:void 0,onProgress:void 0,onRetryError:void 0,transformRequest:void 0,transformResponse:void 0,transformError:void 0,responseType:ks.TEXT,range:void 0,url:"",params:void 0,method:"GET",headers:{},body:void 0,mode:void 0,credentials:void 0,cache:void 0,redirect:void 0,referrer:void 0,referrerPolicy:void 0,integrity:void 0,onProcessMinLen:0},r)}var y_=function(r){Ws(n,r);var s=Vs(n);function n(){var t;return $t(this,n),t=s.call(this),U(de(t),"_xhr",null),U(de(t),"_aborted",!1),U(de(t),"_timeoutTimer",null),U(de(t),"_range",null),U(de(t),"_receivedLength",0),U(de(t),"_url",null),U(de(t),"_onProgress",null),U(de(t),"_index",-1),U(de(t),"_headers",null),U(de(t),"_currentChunkSizeKB",384),U(de(t),"_timeout",null),U(de(t),"_xhr",null),U(de(t),"_withCredentials",null),U(de(t),"_startTime",-1),U(de(t),"_loadCompleteResolve",null),U(de(t),"_loadCompleteReject",null),U(de(t),"_runing",!1),U(de(t),"_logger",!1),U(de(t),"_vid",""),U(de(t),"_responseType",void 0),U(de(t),"_credentials",void 0),U(de(t),"_method",void 0),U(de(t),"_transformResponse",void 0),U(de(t),"_firstRtt",void 0),U(de(t),"_onCancel",null),U(de(t),"_priOptions",null),t}return qt(n,[{key:"load",value:function(e){var i=this;clearTimeout(this._timeoutTimer),this._logger=e.logger,this._range=e.range,this._onProgress=e.onProgress,this._index=e.index,this._headers=e.headers,this._withCredentials=e.credentials==="include"||e.credentials==="same-origin",this._body=e.body||null,e.method&&(this._method=e.method),this._timeout=e.timeout||null,this._runing=!0,this._vid=e.vid||e.url,this._responseType=e.responseType,this._firstRtt=-1,this._onTimeout=e.onTimeout,this._onCancel=e.onCancel,this._request=e.request,this._priOptions=e.priOptions||{},this._logger.debug("【xhrLoader task】, range",this._range),this._url=cf(e.url,e.params);var a=Date.now();return new Promise(function(o,l){i._loadCompleteResolve=o,i._loadCompleteReject=l,i._startLoad()}).catch(function(o){if(clearTimeout(i._timeoutTimer),i._runing=!1,!i._aborted)throw o=o instanceof Hn?o:new Hn(i._url,i._request),o.startTime=a,o.endTime=Date.now(),o.options={index:i._index,vid:i._vid,priOptions:i._priOptions},o})}},{key:"_startLoad",value:function(){var e=null;if(this._responseType===ks.ARRAY_BUFFER&&this._range&&this._range.length>1)if(this._onProgress){this._firstRtt=-1;var i=this._currentChunkSizeKB*1024,a=this._range[0]+this._receivedLength,o=this._range[1];i<this._range[1]-a&&(o=a+i),e=[a,o],this._logger.debug("[xhr_loader->],tast :",this._range,", SubRange, ",e)}else e=this._range,this._logger.debug("[xhr_loader->],tast :",this._range,", allRange, ",e);this._internalOpen(e)}},{key:"_internalOpen",value:function(e){var i=this;try{this._startTime=Date.now();var a=this._xhr=new XMLHttpRequest;a.open(this._method||"GET",this._url,!0),a.responseType=this._responseType,this._timeout&&(a.timeout=this._timeout),a.withCredentials=this._withCredentials,a.onload=this._onLoad.bind(this),a.onreadystatechange=this._onReadyStatechange.bind(this),a.onerror=function(u){var c,d,p;i._running=!1;var h=new Hn(i._url,i._request,u==null||(c=u.currentTarget)===null||c===void 0?void 0:c.response,"xhr.onerror.status:"+(u==null||(d=u.currentTarget)===null||d===void 0?void 0:d.status)+",statusText,"+(u==null||(p=u.currentTarget)===null||p===void 0?void 0:p.statusText));h.options={index:i._index,range:i._range,vid:i._vid,priOptions:i._priOptions},i._loadCompleteReject(h)},a.ontimeout=function(u){i.cancel();var c=new Hn(i._url,i._request,{status:408},"timeout");i._onTimeout&&(c.isTimeout=!0,i._onTimeout(c,{index:i._index,range:i._range,vid:i._vid,priOptions:i._priOptions})),c.options={index:i._index,range:i._range,vid:i._vid,priOptions:i._priOptions},i._loadCompleteReject(c)};var o=this._headers||{},l=uf(e);l&&(o.Range=l),o&&Object.keys(o).forEach(function(u){a.setRequestHeader(u,o[u])}),this._logger.debug("[xhr.send->] tast,",this._range,",load sub range, ",e),a.send(this._body)}catch(u){u.options={index:this._index,range:e,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(u)}}},{key:"_onReadyStatechange",value:function(e){var i=e.target;i.readyState===2&&this._firstRtt<0&&(this._firstRtt=Date.now())}},{key:"_onLoad",value:function(e){var i,a=e.target.status;if(a<200||a>299){var o=new Hn(this._url,null,Ls(Ls({},e.target.response),{},{status:a}),"bad response,status:"+a);return o.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(o)}var l=null,u=!1,c,d=((i=this._range)===null||i===void 0?void 0:i.length)>0?this._range[0]:0;if(this._responseType===ks.ARRAY_BUFFER){var p,h=new Uint8Array(e.target.response);if(c=d+this._receivedLength,h&&h.byteLength>0){this._receivedLength+=h.byteLength;var m=Date.now()-this._startTime,f=pl(this._receivedLength,m);this.emit(j.REAL_TIME_SPEED,{speed:f,len:this._receivedLength,time:m,vid:this._vid,index:this._index,range:[c,d+this._receivedLength],priOptions:this._priOptions})}l=h,((p=this._range)===null||p===void 0?void 0:p.length)>1&&this._range[1]&&this._receivedLength<this._range[1]-this._range[0]?u=!1:u=!0,this._logger.debug("[xhr load done->], tast :",this._range,", start",c,"end ",d+this._receivedLength,",dataLen,",h?h.byteLength:0,",receivedLength",this._receivedLength,",index,",this._index,", done,",u)}else u=!0,l=e.target.response;var v={ok:a>=200&&a<300,status:a,statusText:this._xhr.statusText,url:this._xhr.responseURL,headers:this._getHeaders(this._xhr),body:this._xhr.response};this._transformResponse&&(v=this._transformResponse(v,this._url)||v),this._onProgress&&this._onProgress(l,u,{index:this._index,vid:this._vid,range:[c,d+this._receivedLength],startTime:this._startTime,endTime:Date.now(),priOptions:this._priOptions},v),u?(this._runing=!1,this._loadCompleteResolve&&this._loadCompleteResolve(dl(this._onProgress?null:l,u,v,v.headers["content-length"],v.headers.age,this._startTime,this._firstRtt,this._index,this._range,this._vid,this._priOptions))):this._startLoad()}},{key:"cancel",value:function(){if(!this._aborted&&(this._aborted=!0,this._runing=!1,da(li(n.prototype),"removeAllListeners",this).call(this),this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions}),this._xhr))return this._xhr.abort()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}},{key:"_getHeaders",value:function(e){var i=e.getAllResponseHeaders().trim().split(`\r
`),a={},o=o_(i),l;try{for(o.s();!(l=o.n()).done;){var u=l.value,c=u.split(": ");a[c[0].toLowerCase()]=c.slice(1).join(": ")}}catch(d){o.e(d)}finally{o.f()}return a}}],[{key:"isSupported",value:function(){return typeof XMLHttpRequest<"u"}}]),n}(qn),g_=["retry","retryDelay","onRetryError","transformError"],b_=function(){function r(s,n){$t(this,r),this.promise=Di(),this.alive=!!n.onProgress,!n.logger&&(n.logger=new Kt("Loader")),this._loaderType=s,this._loader=s===jr.FETCH&&window.fetch?new hl:new y_,this._config=n,this._retryCount=0,this._retryTimer=null,this._canceled=!1,this._retryCheckFunc=n.retryCheckFunc,this._logger=n.logger}return qt(r,[{key:"exec",value:function(){var n=this,t=this._config,e=t.retry,i=t.retryDelay,a=t.onRetryError,o=t.transformError,l=r_(t,g_),u=function(){var c=vr(yt().mark(function d(){var p,h,m;return yt().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.prev=0,v.next=3,n._loader.load(l);case 3:p=v.sent,n.promise.resolve(p),v.next=27;break;case 7:if(v.prev=7,v.t0=v.catch(0),n._loader.running=!1,n._logger.debug("[task request catch err]",v.t0),!n._canceled){v.next=13;break}return v.abrupt("return");case 13:if(v.t0.loaderType=n._loaderType,v.t0.retryCount=n._retryCount,h=v.t0,o&&(h=o(h)||h),a&&n._retryCount>0&&a(h,n._retryCount,{index:l.index,vid:l.vid,range:l.range,priOptions:l.priOptions}),n._retryCount++,m=!0,n._retryCheckFunc&&(m=n._retryCheckFunc(v.t0)),!(m&&n._retryCount<=e)){v.next=26;break}return clearTimeout(n._retryTimer),n._logger.debug("[task request setTimeout],retry",n._retryCount,",retry range,",l.range),n._retryTimer=setTimeout(u,i),v.abrupt("return");case 26:n.promise.reject(h);case 27:case"end":return v.stop()}},d,null,[[0,7]])}));return function(){return c.apply(this,arguments)}}();return u(),this.promise}},{key:"cancel",value:function(){var s=vr(yt().mark(function t(){return yt().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return clearTimeout(this._retryTimer),this._canceled=!0,this._loader.running=!1,i.abrupt("return",this._loader.cancel());case 4:case"end":return i.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"running",get:function(){return this._loader&&this._loader.running}},{key:"loader",get:function(){return this._loader}}]),r}();function df(r){return r&&!r.paused&&!r.ended&&r.playbackRate!==0&&r.readyState!==0}function pf(r){if(!r)return{};if(typeof r.getVideoPlaybackQuality=="function"){var s=r.getVideoPlaybackQuality();return{droppedVideoFrames:s.droppedVideoFrames||s.corruptedVideoFrames,totalVideoFrames:s.totalVideoFrames,creationTime:s.creationTime}}return{droppedVideoFrames:r.webkitDroppedFrameCount,totalVideoFrames:r.webkitDecodedFrameCount,creationTime:performance.now()}}function ni(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];if(s=s.filter(Boolean),s.length<2)return s[0];var t=new Uint8Array(s.reduce(function(i,a){return i+a.byteLength},0)),e=0;return s.forEach(function(i){t.set(i,e),e+=i.byteLength}),t}function S_(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise(function(s){return setTimeout(s,r)})}var Wr=function(r){Ws(n,r);var s=Vs(n);function n(t){var e;return $t(this,n),e=s.call(this,t),U(de(e),"type",jr.FETCH),U(de(e),"_queue",[]),U(de(e),"_alive",[]),U(de(e),"_currentTask",null),U(de(e),"_config",void 0),e._config=v_(t),(e._config.loaderType===jr.XHR||!hl.isSupported())&&(e.type=jr.XHR),e.log=t.logger,e}return qt(n,[{key:"isFetch",value:function(){return this.type===jr.FETCH}},{key:"load",value:function(e){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof e=="string"||!e?a.url=e||a.url||this._config.url:a=e,a=Object.assign({},this._config,a),a.params&&(a.params=Object.assign({},a.params)),a.headers&&Rd(a.headers)&&(a.headers=Object.assign({},a.headers)),a.body&&Rd(a.body)&&(a.body=Object.assign({},a.body)),a.transformRequest&&(a=a.transformRequest(a)||a),a.logger=this.log;var o=new b_(this.type,a);return o.loader.on(j.REAL_TIME_SPEED,function(l){i.emit(j.REAL_TIME_SPEED,l)}),this._queue.push(o),this._queue.length===1&&(!this._currentTask||!this._currentTask.running)&&this._processTask(),o.promise}},{key:"cancel",value:function(){var t=vr(yt().mark(function i(){var a;return yt().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return a=this._queue.map(function(u){return u.cancel()}).concat(this._alive.map(function(u){return u.cancel()})),this._currentTask&&a.push(this._currentTask.cancel()),this._queue=[],this._alive=[],l.next=6,Promise.all(a);case 6:return l.next=8,S_();case 8:case"end":return l.stop()}},i,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_processTask",value:function(){var e=this;if(this._currentTask=this._queue.shift(),!!this._currentTask){this._currentTask.alive&&this._alive.push(this._currentTask);var i=this._currentTask.exec().catch(function(a){});i&&typeof i.finally=="function"&&i.finally(function(){var a,o;(a=e._currentTask)!==null&&a!==void 0&&a.alive&&((o=e._alive)===null||o===void 0?void 0:o.length)>0&&(e._alive=e._alive.filter(function(l){return l&&l!==e._currentTask})),e._processTask()})}}}],[{key:"isFetchSupport",value:function(){return hl.isSupported()}}]),n}(qn),hf=function(){function r(){$t(this,r),U(this,"_prevCurrentTime",0)}return qt(r,[{key:"do",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,e=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(n){var a=n.currentTime,o=0;if(this._prevCurrentTime===a){var l=ut.info(ut.get(n),a);if(!l.buffers.length)return;e&&l.nextStart||l.nextStart&&l.nextStart-a<t?o=l.nextStart+.1:l.end&&l.end-a>i&&!n.seeking&&(o=a+.1)}this._prevCurrentTime=a,o&&a!==o&&(n.currentTime=o)}}}]),r}(),ff=function(){function r(s){var n=this;$t(this,r),U(this,"_seiSet",new Set),this.emitter=s,s.on(j.SEI,function(t){t&&n._seiSet.add(t)})}return qt(r,[{key:"throw",value:function(n){var t=this;if(!(n==null||!this._seiSet.size)){var e=n-.2,i=n+.2,a=[];this._seiSet.forEach(function(o){o.time>=e&&o.time<=i&&a.push(o)}),a.forEach(function(o){t._seiSet.delete(o),t.emitter.emit(j.SEI_IN_TIME,o)})}}},{key:"reset",value:function(){this._seiSet.clear()}}]),r}(),mf=function(){function r(){$t(this,r),U(this,"_chunkSpeeds",[]),U(this,"_speeds",[])}return qt(r,[{key:"addRecord",value:function(n,t){!n||!t||(this._speeds.push(8e3*n/t),this._speeds=this._speeds.slice(-3))}},{key:"addChunkRecord",value:function(n,t){!n||!t||(this._chunkSpeeds.push(8e3*n/t),this._chunkSpeeds=this._chunkSpeeds.slice(-100))}},{key:"getAvgSpeed",value:function(){return!this._chunkSpeeds.length&&!this._speeds.length?0:this._speeds.length?this._speeds.reduce(function(n,t){return n+=t})/this._speeds.length:this._chunkSpeeds.reduce(function(n,t){return n+=t})/this._chunkSpeeds.length}},{key:"getLatestSpeed",value:function(){return!this._chunkSpeeds.length&&!this._speeds.length?0:this._speeds.length?this._speeds[this._speeds.length-1]:this._chunkSpeeds[this._chunkSpeeds.length-1]}},{key:"reset",value:function(){this._chunkSpeeds=[],this._speeds=[]}}]),r}(),Md=function(){function r(s){$t(this,r),U(this,"encodeType",""),U(this,"audioCodec",""),U(this,"videoCodec",""),U(this,"domain",""),U(this,"fps",0),U(this,"bitrate",0),U(this,"width",0),U(this,"height",0),U(this,"samplerate",0),U(this,"channelCount",0),U(this,"gop",0),U(this,"_bitsAccumulateSize",0),U(this,"_bitsAccumulateDuration",0),this._timescale=s}return qt(r,[{key:"getStats",value:function(){return{encodeType:this.encodeType,audioCodec:this.audioCodec,videoCodec:this.videoCodec,domain:this.domain,fps:this.fps,bitrate:this.bitrate,width:this.width,height:this.height,samplerate:this.samplerate,channelCount:this.channelCount,gop:this.gop}}},{key:"setEncodeType",value:function(n){this.encodeType=n}},{key:"setFpsFromScriptData",value:function(n){var t,e=n.data,i=e==null||(t=e.onMetaData)===null||t===void 0?void 0:t.framerate;i&&i>0&&i<100&&(this.fps=i)}},{key:"setVideoMeta",value:function(n){if(this.width=n.width,this.height=n.height,this.videoCodec=n.codec,this.encodeType=n.codecType,n.fpsNum&&n.fpsDen){var t=n.fpsNum/n.fpsDen;t>0&&t<100&&(this.fps=t)}}},{key:"setAudioMeta",value:function(n){this.audioCodec=n.codec,this.samplerate=n.sampleRate,this.channelCount=n.channelCount}},{key:"setDomain",value:function(n){this.domain=n.split("/").slice(2,3)[0]}},{key:"updateBitrate",value:function(n){var t=this;if((!this.fps||this.fps>=100)&&n.length){var e=n.reduce(function(i,a){return i+=a.duration},0)/n.length;this.fps=Math.round(this._timescale/e)}n.forEach(function(i){i.gopId===1&&t.gop++,t._bitsAccumulateDuration+=i.duration/(t._timescale/1e3),t._bitsAccumulateSize+=i.units.reduce(function(a,o){return a+=o.length},0),t._bitsAccumulateDuration>=1e3&&(t.bitrate=t._bitsAccumulateSize*8,t._bitsAccumulateDuration=0,t._bitsAccumulateSize=0)})}}]),r}(),vf=function(){function r(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;$t(this,r),U(this,"_core",null),U(this,"_samples",[]),this._core=s,this._timescale=n,this._stats=new Md(n),this._bindEvents()}return qt(r,[{key:"getStats",value:function(){var n,t,e,i,a,o,l,u=((n=this._core)===null||n===void 0?void 0:n.media)||{},c=u.currentTime,d=c===void 0?0:c,p=u.decodeFps,h=p===void 0?0:p;return Ls(Ls({},this._stats.getStats()),{},{downloadSpeed:((t=this._core)===null||t===void 0||(e=t.speedInfo)===null||e===void 0?void 0:e.call(t).speed)||0,avgSpeed:((i=this._core)===null||i===void 0||(a=i.speedInfo)===null||a===void 0?void 0:a.call(i).avgSpeed)||0,currentTime:d,bufferEnd:((o=this._core)===null||o===void 0||(l=o.bufferInfo())===null||l===void 0?void 0:l.remaining)||0,decodeFps:h})}},{key:"_bindEvents",value:function(){var n=this;this._core.on(j.DEMUXED_TRACK,function(t){var e=t.videoTrack;return n._stats.updateBitrate(e.samples)}),this._core.on(j.FLV_SCRIPT_DATA,function(t){n._stats.setFpsFromScriptData(t)}),this._core.on(j.METADATA_PARSED,function(t){t.type==="video"?n._stats.setVideoMeta(t.track):n._stats.setAudioMeta(t.track)}),this._core.on(j.TTFB,function(t){n._stats.setDomain(t.responseUrl)})}},{key:"reset",value:function(){this._samples=[],this._stats=new Md(this._timescale)}}]),r}();function w_(r,s){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t,e,i,a,o=[],l=!0,u=!1;try{if(i=(n=n.call(r)).next,s===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(t=i.call(n)).done)&&(o.push(t.value),o.length!==s);l=!0);}catch(c){u=!0,e=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw e}}return o}}function Qe(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function Xd(r,s){for(var n=0;n<s.length;n++){var t=s[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,Sf(t.key),t)}}function $e(r,s,n){return s&&Xd(r.prototype,s),n&&Xd(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Y(r,s,n){return s=Sf(s),s in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n,r}function yf(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&fl(r,s)}function Pa(r){return Pa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pa(r)}function fl(r,s){return fl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fl(r,s)}function C_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L_(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function T_(r,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L_(r)}function gf(r){var s=C_();return function(){var t=Pa(r),e;if(s){var i=Pa(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return T_(this,e)}}function k_(r,s){return Z_(r)||w_(r,s)||bf(r,s)||x_()}function Wt(r){return __(r)||D_(r)||bf(r)||E_()}function __(r){if(Array.isArray(r))return ml(r)}function Z_(r){if(Array.isArray(r))return r}function D_(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function bf(r,s){if(r){if(typeof r=="string")return ml(r,s);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ml(r,s)}}function ml(r,s){(s==null||s>r.length)&&(s=r.length);for(var n=0,t=new Array(s);n<s;n++)t[n]=r[n];return t}function E_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F_(r,s){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var t=n.call(r,s||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}function Sf(r){var s=F_(r,"string");return typeof s=="symbol"?s:String(s)}var Ri={VIDEO:"video",AUDIO:"audio",METADATA:"metadata"},yr={AVC:"avc",HEVC:"hevc"},jn={AAC:"aac",G711PCMA:"g7110a",G711PCMU:"g7110m"},ot={LARGE_AV_SHIFT:"LARGE_AV_SHIFT",LARGE_VIDEO_GAP:"LARGE_VIDEO_GAP",LARGE_VIDEO_GAP_BETWEEN_CHUNK:"LARGE_VIDEO_GAP_BETWEEN_CHUNK",LARGE_AUDIO_GAP:"LARGE_AUDIO_GAP",AUDIO_FILLED:"AUDIO_FILLED",AUDIO_DROPPED:"AUDIO_DROPPED"},io=function(){function r(){Qe(this,r),Y(this,"id",1),Y(this,"type",Ri.VIDEO),Y(this,"codecType",yr.AVC),Y(this,"pid",-1),Y(this,"hvcC",void 0),Y(this,"codec",""),Y(this,"timescale",0),Y(this,"formatTimescale",0),Y(this,"sequenceNumber",0),Y(this,"baseMediaDecodeTime",0),Y(this,"baseDts",0),Y(this,"duration",0),Y(this,"warnings",[]),Y(this,"samples",[]),Y(this,"pps",[]),Y(this,"sps",[]),Y(this,"vps",[]),Y(this,"fpsNum",0),Y(this,"fpsDen",0),Y(this,"sarRatio",[]),Y(this,"width",0),Y(this,"height",0),Y(this,"nalUnitSize",4),Y(this,"present",!1),Y(this,"isVideoEncryption",!1),Y(this,"isAudioEncryption",!1),Y(this,"isVideo",!0),Y(this,"kid",null),Y(this,"pssh",null),Y(this,"ext",void 0)}return $e(r,[{key:"reset",value:function(){this.sequenceNumber=this.width=this.height=this.fpsDen=this.fpsNum=this.duration=this.baseMediaDecodeTime=this.timescale=0,this.codec="",this.present=!1,this.pid=-1,this.pps=[],this.sps=[],this.vps=[],this.sarRatio=[],this.samples=[],this.warnings=[],this.hvcC=null}},{key:"exist",value:function(){return!!(this.pps.length&&this.sps.length&&this.codec)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isVideoEncryption}}]),r}(),so=function(){function r(){Qe(this,r),Y(this,"id",2),Y(this,"type",Ri.AUDIO),Y(this,"codecType",jn.AAC),Y(this,"pid",-1),Y(this,"codec",""),Y(this,"sequenceNumber",0),Y(this,"sampleDuration",0),Y(this,"timescale",0),Y(this,"formatTimescale",0),Y(this,"baseMediaDecodeTime",0),Y(this,"duration",0),Y(this,"warnings",[]),Y(this,"samples",[]),Y(this,"baseDts",0),Y(this,"sampleSize",16),Y(this,"sampleRate",0),Y(this,"channelCount",0),Y(this,"objectType",0),Y(this,"sampleRateIndex",0),Y(this,"config",[]),Y(this,"present",!1),Y(this,"isVideoEncryption",!1),Y(this,"isAudioEncryption",!1),Y(this,"kid",null),Y(this,"ext",void 0)}return $e(r,[{key:"reset",value:function(){this.sequenceNumber=0,this.timescale=0,this.sampleDuration=0,this.sampleRate=0,this.channelCount=0,this.baseMediaDecodeTime=0,this.present=!1,this.pid=-1,this.codec="",this.samples=[],this.config=[],this.warnings=[]}},{key:"exist",value:function(){return!!(this.sampleRate&&this.channelCount&&this.codec&&this.codecType===jn.AAC)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isAudioEncryption}}]),r}(),_s=function(){function r(s,n,t){Qe(this,r),Y(this,"flag",{}),Y(this,"keyframe",!1),Y(this,"gopId",0),Y(this,"duration",0),Y(this,"size",0),Y(this,"units",[]),Y(this,"chromaFormat",420),this.originPts=this.pts=s,this.originDts=this.dts=n,t&&(this.units=t)}return $e(r,[{key:"cts",get:function(){return this.pts-this.dts}},{key:"setToKeyframe",value:function(){this.keyframe=!0,this.flag.dependsOn=2,this.flag.isNonSyncSample=0}}]),r}(),Cr=$e(function r(s,n,t,e){Qe(this,r),Y(this,"duration",1024),Y(this,"flag",{dependsOn:2,isNonSyncSample:0}),Y(this,"keyframe",!0),this.originPts=this.pts=this.dts=s,this.data=n,this.size=n.byteLength,this.sampleOffset=e,t&&(this.duration=t)}),wf=$e(function r(s,n){Qe(this,r),Y(this,"time",0),this.data=s,this.originPts=this.pts=n}),R_=function(r){yf(n,r);var s=gf(n);function n(){return Qe(this,n),s.apply(this,arguments)}return $e(n)}(wf),Cf=function(r){yf(n,r);var s=gf(n);function n(){return Qe(this,n),s.apply(this,arguments)}return $e(n)}(wf),ao=function(){function r(){Qe(this,r),Y(this,"id",3),Y(this,"type",Ri.METADATA),Y(this,"timescale",0),Y(this,"flvScriptSamples",[]),Y(this,"seiSamples",[])}return $e(r,[{key:"exist",value:function(){return!!((this.flvScriptSamples.length||this.seiSamples.length)&&this.timescale)}},{key:"reset",value:function(){this.timescale=0,this.flvScriptSamples=[],this.seiSamples=[]}},{key:"hasSample",value:function(){return!!(this.flvScriptSamples.length||this.seiSamples.length)}}]),r}(),ui=function(){function r(s){Qe(this,r),this.name=s||"",this._prefix="[".concat(this.name,"]")}return $e(r,[{key:"warn",value:function(){var n;if(!r.disabled){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];(n=console).warn.apply(n,[this._prefix].concat(e))}}}],[{key:"enable",value:function(){r.disabled=!1}},{key:"disable",value:function(){r.disabled=!0}}]),r}();Y(ui,"disabled",!0);var oo=typeof window<"u",vu=oo&&navigator.userAgent.toLocaleLowerCase(),Lf=oo&&/^((?!chrome|android).)*safari/.test(vu),I_=oo&&vu.includes("firefox"),P_=oo&&vu.includes("android"),vn=function(){function r(){Qe(this,r)}return $e(r,null,[{key:"getRateIndexByRate",value:function(n){return r.FREQ.indexOf(n)}},{key:"parseADTS",value:function(n,t){for(var e=n.length,i=0;i+2<e&&!(n[i]===255&&(n[i+1]&246)===240);)i++;if(!(i>=e)){var a=i,o=[],l=(n[i+2]&60)>>>2,u=r.FREQ[l];if(!u)throw new Error("Invalid sampling index: ".concat(l));for(var c=((n[i+2]&192)>>>6)+1,d=(n[i+2]&1)<<2|(n[i+3]&192)>>>6,p=r._getConfig(l,d,c),h=p.config,m=p.codec,f,v,b=0,w=r.getFrameDuration(u);i+7<e;){if(n[i]!==255||(n[i+1]&246)!==240){i++;continue}if(v=(n[i+3]&3)<<11|n[i+4]<<3|(n[i+5]&224)>>5,e-i<v)break;f=(~n[i+1]&1)*2,o.push({pts:t+b*w,data:n.subarray(i+7+f,i+v)}),b++,i+=v}return{skip:a,remaining:i>=e?void 0:n.subarray(i),frames:o,samplingFrequencyIndex:l,sampleRate:u,objectType:c,channelCount:d,codec:m,config:h,originCodec:"mp4a.40.".concat(c)}}}},{key:"parseAudioSpecificConfig",value:function(n){if(n.length){var t=n[0]>>>3,e=(n[0]&7)<<1|n[1]>>>7,i=(n[1]&120)>>>3,a=r.FREQ[e];if(a){var o=r._getConfig(e,i,t),l=o.config,u=o.codec;return{samplingFrequencyIndex:e,sampleRate:a,objectType:t,channelCount:i,config:l,codec:u,originCodec:"mp4a.40.".concat(t)}}}}},{key:"getFrameDuration",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4;return 1024*t/n}},{key:"_getConfig",value:function(n,t,e){var i=[],a,o;return I_?n>=6?(a=5,o=n-3):(a=2,o=n):P_?(a=2,o=n):(a=e===2||e===5?e:5,o=n,n>=6?o=n-3:t===1&&(a=2,o=n)),i[0]=a<<3,i[0]|=(n&14)>>1,i[1]=(n&1)<<7,i[1]|=t<<3,a===5&&(i[1]|=(o&14)>>1,i[2]=(o&1)<<7,i[2]|=8,i[3]=0),{config:i,codec:"mp4a.40.".concat(a)}}},{key:"getSilentFrame",value:function(n,t){switch(n){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}]),r}();Y(vn,"FREQ",[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]);var M_=500,Gd=3,Wo=1e3,Vo=5e3,X_=1e3,G_=200,Wd=5e3,Vd=5,W_=function(){function r(s,n,t){Qe(this,r),this.videoTrack=s,this.audioTrack=n,this.metadataTrack=t,this._baseDts=-1,this._baseDtsInited=!1,this._audioNextPts=void 0,this._videoNextDts=void 0,this._audioTimestampBreak=0,this._videoTimestampBreak=0,this._lastVideoDuration=0,this._keyFrameInNextChunk=!1,this._lastAudioExceptionGapDot=-1/0,this._lastAudioExceptionOverlapDot=-1/0,this._lastAudioExceptionLargeGapDot=-1/0,this._lastVideoExceptionLargeGapDot=-1/0,this._lastVideoExceptionChunkFirstDtsDot=-1/0}return $e(r,[{key:"fix",value:function(){var n=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;t=Math.round(t*1e3);var a=this.videoTrack,o=this.audioTrack;(e||!i)&&(this._videoLastSample=null,this._audioNextPts=void 0,this._videoNextDts=void 0,this._audioTimestampBreak=0,this._videoTimestampBreak=0,this._lastAudioExceptionGapDot=-1/0,this._lastAudioExceptionOverlapDot=-1/0,this._lastAudioExceptionLargeGapDot=-1/0,this._lastVideoExceptionLargeGapDot=-1/0,this._lastVideoExceptionChunkFirstDtsDot=-1/0),e&&!i&&(this._baseDtsInited=!1),this._baseDtsInited||this._calculateBaseDts(o,a),!i&&t&&(this._audioNextPts=this._videoNextDts=t);var l=this._baseDtsInited&&(this._videoTimestampBreak||!this.videoTrack.exist())&&(this._audioTimestampBreak||!this.audioTrack.exist());if(l&&this._resetBaseDtsWhenStreamBreaked(),this._fixAudio(o),this._keyFrameInNextChunk=!1,this._fixVideo(a),this.metadataTrack.exist()){var u=this.metadataTrack.timescale;this.metadataTrack.seiSamples.forEach(function(c){c.pts=c.originPts-n._baseDts,c.time=Math.max(0,c.pts)/u}),this.metadataTrack.flvScriptSamples.forEach(function(c){c.pts=c.originPts-n._baseDts,c.time=Math.max(0,c.pts)/u})}a.samples.length&&(a.baseMediaDecodeTime=a.samples[0].dts),o.samples.length&&(o.baseMediaDecodeTime=o.samples[0].pts*o.timescale/1e3)}},{key:"_fixVideo",value:function(n){var t=this,e=n.samples;if(e.length){e.forEach(function(w){w.dts-=t._baseDts,w.pts-=t._baseDts,w.keyframe&&(t._keyFrameInNextChunk=!0)});var i;if(n.fpsNum&&n.fpsDen)i=n.timescale*(n.fpsDen/n.fpsNum);else if(n.length>1){var a=n.samples[0],o=n.samples[e.length-1];i=Math.floor((o.dts-a.dts)/(e.length-1))}else i=this._lastVideoDuration||40;var l=e.pop();if(this._videoLastSample&&e.unshift(this._videoLastSample),this._videoLastSample=l,!!e.length){if(this._videoNextDts===void 0){var u=e[0];this._videoNextDts=u.dts}var c=e.length,d=0,p=e[0],h=this._videoNextDts-p.dts;if(Math.abs(h)>G_){if(Math.abs(p.dts-this._lastVideoExceptionChunkFirstDtsDot)>Wd){var m;this._lastVideoExceptionChunkFirstDtsDot=p.dts,n.warnings.push({type:ot.LARGE_VIDEO_GAP_BETWEEN_CHUNK,nextDts:this._videoNextDts,firstSampleDts:p.dts,nextSampleDts:(m=e[1])===null||m===void 0?void 0:m.dts,sampleDuration:h})}this._videoTimestampBreak>=Vd?(this._videoNextDts=p.dts,this._videoTimestampBreak=0):(p.dts+=h,p.pts+=h,this.audioTrack.exist()||(this._videoTimestampBreak=1))}for(var f=0;f<c;f++){var v=e[f].dts,b=e[f+1];f<c-1?d=b.dts-v:l?d=l.dts-v:d=i,(d>X_||d<0)&&(this._videoTimestampBreak++,Math.abs(v-this._lastVideoExceptionLargeGapDot)>Wd&&(this._lastVideoExceptionLargeGapDot=v,n.warnings.push({type:ot.LARGE_VIDEO_GAP,time:v/n.timescale,dts:v,originDts:e[f].originDts,nextDts:this._videoNextDts,sampleDuration:d,refSampleDuration:i})),d=i),e[f].duration=d,this._videoNextDts+=d,this._lastVideoDuration=d}}}}},{key:"_fixAudio",value:function(n){var t=this,e=n.samples;e.length&&(e.forEach(function(i){i.dts=i.pts-=t._baseDts}),this._doFixAudioInternal(n,e,1e3))}},{key:"_calculateBaseDts",value:function(n,t){var e=n.samples,i=t.samples;if(!e.length&&!i.length)return!1;var a=1/0,o=1/0;e.length&&(n.baseDts=a=e[0].pts),i.length&&(t.baseDts=o=i[0].dts),this._baseDts=Math.min(a,o);var l=o-a;return Number.isFinite(l)&&Math.abs(l)>M_&&t.warnings.push({type:ot.LARGE_AV_SHIFT,videoBaseDts:o,audioBasePts:a,baseDts:this._baseDts,delta:l}),this._baseDtsInited=!0,!0}},{key:"_resetBaseDtsWhenStreamBreaked",value:function(){var n=this._calculateBaseDts(this.audioTrack,this.videoTrack);n&&(this.audioTrack.exist()?this.videoTrack.exist()?this._baseDts-=Math.min(this._audioNextPts,this._videoNextDts):this._baseDts-=this._audioNextPts:this._baseDts-=this._videoNextDts,this._videoTimestampBreak=0,this._audioTimestampBreak=0)}},{key:"_doFixAudioInternal",value:function(n,t,e){n.sampleDuration||(n.sampleDuration=n.codecType===jn.AAC?vn.getFrameDuration(n.timescale,e):this._getG711Duration(n));var i=n.sampleDuration,a=n.codecType===jn.AAC?1024:i*n.timescale/1e3;if(this._audioNextPts===void 0){var o=t[0];this._audioNextPts=o.pts}for(var l=0;l<t.length;l++){var u=this._audioNextPts,c=t[l],d=c.pts-u;if(l===0&&this._audioTimestampBreak>=Vd&&this._keyFrameInNextChunk&&(u=this._audioNextPts=c.dts,d=0,this._audioTimestampBreak=0),!this._audioTimestampBreak&&d>=Gd*i&&d<=Wo&&!Lf){var p=this._getSilentFrame(n)||t[0].data.subarray(),h=Math.floor(d/i);Math.abs(c.pts-this._lastAudioExceptionGapDot)>Vo&&(this._lastAudioExceptionGapDot=c.pts,n.warnings.push({type:ot.AUDIO_FILLED,pts:c.pts,originPts:c.originPts,count:h,nextPts:u,refSampleDuration:i}));for(var m=0;m<h;m++){var f=new Cr(Math.floor(this._audioNextPts+i)-Math.floor(this._audioNextPts),p,a);f.originPts=Math.floor(this._baseDts+u),t.splice(l,0,f),this._audioNextPts+=i,l++}l--}else d<=-Gd*i&&d>=-1*Wo?(Math.abs(c.pts-this._lastAudioExceptionOverlapDot)>Vo&&(this._lastAudioExceptionOverlapDot=c.pts,n.warnings.push({type:ot.AUDIO_DROPPED,pts:c.pts,originPts:c.originPts,nextPts:u,refSampleDuration:i})),t.splice(l,1),l--):(Math.abs(d)>Wo&&(this._audioTimestampBreak++,Math.abs(c.pts-this._lastAudioExceptionLargeGapDot)>Vo&&(this._lastAudioExceptionLargeGapDot=c.pts,n.warnings.push({type:ot.LARGE_AUDIO_GAP,time:c.pts/1e3,pts:c.pts,originPts:c.originPts,nextPts:u,sampleDuration:d,refSampleDuration:i}))),c.dts=c.pts=u,c.duration=a,this._audioNextPts+=i)}}},{key:"_getG711Duration",value:function(n){var t=n.sampleSize,e=n.channelCount,i=n.sampleRate,a=n.samples[0];if(a)return a.data.byteLength*2/e/(t/8)/i*1e3}},{key:"_getSilentFrame",value:function(n){return n.codecType===jn.AAC?vn.getSilentFrame(n.codec,n.channelCount):new Uint8Array(8*n.sampleDuration*n.channelCount)}}]),r}();function on(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];s=s.filter(Boolean);var t=new Uint8Array(s.reduce(function(i,a){return i+a.byteLength},0)),e=0;return s.forEach(function(i){t.set(i,e),e+=i.byteLength}),t}var V_=Math.pow(2,32);function nt(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r[s]<<8)+(r[s+1]||0)}function A_(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r[s]<<16)+(r[s+1]<<8)+(r[s+2]||0)}function q(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r[s]<<24>>>0)+(r[s+1]<<16)+(r[s+2]<<8)+(r[s+3]||0)}function Er(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return q(r,s)*V_+q(r,s+4)}function Tf(r){for(var s="avc1.",n,t=0;t<3;t++)n=r[t].toString(16),n.length<2&&(n="0".concat(n)),s+=n;return s}function N_(r){var s="";if(r.forEach(function(e){s+=O_(e)}),s.length<=32)for(var n=32-s.length,t=0;t<n;t++)s+="0";return s}function Ad(r){if(!Array.isArray(r)){for(var s=[],n="",t=0;t<r.length;t++)t%2&&(n=r[t-1]+r[t],s.push(parseInt(n,16)),n="");return s}return r.map(function(e){return parseInt(e,16)})}function O_(r){return("0"+Number(r).toString(16)).slice(-2).toUpperCase()}var Rn=function(){function r(){Qe(this,r)}return $e(r,null,[{key:"parseAnnexB",value:function(n){for(var t=n.length,e=2,i=0;n[e]!==null&&n[e]!==void 0&&n[e]!==1;)e++;if(e++,i=e+2,i>=t)return[];for(var a=[];i<t;)switch(n[i]){case 0:if(n[i-1]!==0){i+=2;break}else if(n[i-2]!==0){i++;break}e!==i-2&&a.push(n.subarray(e,i-2));do i++;while(n[i]!==1&&i<t);e=i+1,i=e+2;break;case 1:if(n[i-1]!==0||n[i-2]!==0){i+=3;break}e!==i-2&&a.push(n.subarray(e,i-2)),e=i+1,i=e+2;break;default:i+=3;break}return e<t&&a.push(n.subarray(e)),a}},{key:"parseAvcC",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;if(!(n.length<4)){for(var e=n.length,i=[],a=0,o;a+t<e;)if(o=q(n,a),t===3&&(o>>>=8),a+=t,!!o){if(a+o>e)break;i.push(n.subarray(a,a+o)),a+=o}return i}}},{key:"parseSEI",value:function(n,t){for(var e=n.length,i=t?2:1,a=0,o=0,l="";n[i]===255;)a+=255,i++;for(a+=n[i++];n[i]===255;)o+=255,i++;if(o+=n[i++],a===5&&e>i+16)for(var u=0;u<16;u++)l+=n[i].toString(16),i++;return{payload:n.subarray(i),type:a,size:o,uuid:l}}},{key:"removeEPB",value:function(n){for(var t=n.byteLength,e=[],i=1;i<t-2;)n[i]===0&&n[i+1]===0&&n[i+2]===3?(e.push(i+2),i+=2):i++;if(!e.length)return n;var a=t-e.length,o=new Uint8Array(a),l=0;for(i=0;i<a;l++,i++)l===e[0]&&(l++,e.shift()),o[i]=n[l];return o}}]),r}(),vl=function(){function r(s){if(Qe(this,r),Y(this,"_bytesAvailable",void 0),Y(this,"_bitsAvailable",0),Y(this,"_word",0),!s)throw new Error("ExpGolomb data params is required");this._data=s,this._bytesAvailable=s.byteLength,this._bytesAvailable&&this._loadWord()}return $e(r,[{key:"_loadWord",value:function(){var n=this._data.byteLength-this._bytesAvailable,t=Math.min(4,this._bytesAvailable);if(t===0)throw new Error("No bytes available");var e=new Uint8Array(4);e.set(this._data.subarray(n,n+t)),this._word=new DataView(e.buffer).getUint32(0),this._bitsAvailable=t*8,this._bytesAvailable-=t}},{key:"skipBits",value:function(n){if(this._bitsAvailable>n)this._word<<=n,this._bitsAvailable-=n;else{n-=this._bitsAvailable;var t=Math.floor(n/8);n-=t*8,this._bytesAvailable-=t,this._loadWord(),this._word<<=n,this._bitsAvailable-=n}}},{key:"readBits",value:function(n){if(n>32)throw new Error("Cannot read more than 32 bits");var t=Math.min(this._bitsAvailable,n),e=this._word>>>32-t;return this._bitsAvailable-=t,this._bitsAvailable>0?this._word<<=t:this._bytesAvailable>0&&this._loadWord(),t=n-t,t>0&&this._bitsAvailable?e<<t|this.readBits(t):e}},{key:"skipLZ",value:function(){var n;for(n=0;n<this._bitsAvailable;++n)if(this._word&2147483648>>>n)return this._word<<=n,this._bitsAvailable-=n,n;return this._loadWord(),n+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var n=this.skipLZ();return this.readBits(n+1)-1}},{key:"readEG",value:function(){var n=this.readUEG();return 1&n?1+n>>>1:-1*(n>>>1)}},{key:"readBool",value:function(){return this.readBits(1)===1}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"skipScalingList",value:function(n){for(var t=8,e=8,i,a=0;a<n;a++)e!==0&&(i=this.readEG(),e=(t+i+256)%256),t=e===0?t:e}}]),r}(),kf=function(){function r(){Qe(this,r)}return $e(r,null,[{key:"parseAVCDecoderConfigurationRecord",value:function(n){if(!(n.length<7)){for(var t=(n[4]&3)+1,e,i=[],a=[],o=6,l=n[5]&31,u,c=0;c<l;c++)if(u=n[o]<<8|n[o+1],o+=2,!!u){var d=n.subarray(o,o+u);o+=u,i.push(d),e||(e=r.parseSPS(Rn.removeEPB(d)))}var p=n[o];o++;for(var h,m=0;m<p;m++)h=n[o]<<8|n[o+1],o+=2,h&&(a.push(n.subarray(o,o+h)),o+=h);return{sps:e,spsArr:i,ppsArr:a,nalUnitSize:t}}}},{key:"parseSPS",value:function(n){var t=new vl(n);t.readUByte();var e=t.readUByte(),i=t.readUByte(),a=t.readUByte();t.skipUEG();var o=420;if(e===100||e===110||e===122||e===244||e===44||e===83||e===86||e===118||e===128||e===138||e===144){var l=t.readUEG();if(l<=3&&(o=[0,420,422,444][l]),l===3&&t.skipBits(1),t.skipUEG(),t.skipUEG(),t.skipBits(1),t.readBool())for(var u=l!==3?8:12,c=0;c<u;c++)t.readBool()&&(c<6?t.skipScalingList(16):t.skipScalingList(64))}t.skipUEG();var d=t.readUEG();if(d===0)t.readUEG();else if(d===1){t.skipBits(1),t.skipUEG(),t.skipUEG();for(var p=t.readUEG(),h=0;h<p;h++)t.skipUEG()}t.skipUEG(),t.skipBits(1);var m=t.readUEG(),f=t.readUEG(),v=t.readBits(1);v===0&&t.skipBits(1),t.skipBits(1);var b=0,w=0,C=0,T=0;t.readBool()&&(b=t.readUEG(),w=t.readUEG(),C=t.readUEG(),T=t.readUEG());var L,_,D,x,P;if(t.readBool()){if(t.readBool()){var I=t.readUByte();switch(I){case 1:L=[1,1];break;case 2:L=[12,11];break;case 3:L=[10,11];break;case 4:L=[16,11];break;case 5:L=[40,33];break;case 6:L=[24,11];break;case 7:L=[20,11];break;case 8:L=[32,11];break;case 9:L=[80,33];break;case 10:L=[18,11];break;case 11:L=[15,11];break;case 12:L=[64,33];break;case 13:L=[160,99];break;case 14:L=[4,3];break;case 15:L=[3,2];break;case 16:L=[2,1];break;case 255:{L=[t.readUByte()<<8|t.readUByte(),t.readUByte()<<8|t.readUByte()];break}}}if(t.readBool()&&t.readBool(),t.readBool()&&(t.readBits(4),t.readBool()&&t.readBits(24)),t.readBool()&&(t.readUEG(),t.readUEG()),t.readBool()){var V=t.readBits(32),g=t.readBits(32);_=t.readBool(),D=g,x=V*2,P=D/x}}return{codec:Tf(n.subarray(1,4)),profileIdc:e,profileCompatibility:i,levelIdc:a,chromaFormat:o,width:Math.ceil((m+1)*16-2*(b+w)),height:(2-v)*(f+1)*16-(v?2:4)*(C+T),sarRatio:L,fpsNum:D,fpsDen:x,fps:P,fixedFrame:_}}}]),r}(),yl=function(){function r(){Qe(this,r)}return $e(r,null,[{key:"parseHEVCDecoderConfigurationRecord",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(n.length<23)){t=t||{};for(var e=(n[21]&3)+1,i,a,o=[],l=[],u=[],c=23,d=n[22],p,h,m,f=0;f<d;f++){p=n[c]&63,h=n[c+1]<<8|n[c+2],c+=3;for(var v=0;v<h;v++)if(m=n[c]<<8|n[c+1],c+=2,!!m){switch(p){case 32:{var b=n.subarray(c,c+m);i||(i=r.parseVPS(Rn.removeEPB(b),t)),u.push(b)}break;case 33:{var w=n.subarray(c,c+m);a||(a=r.parseSPS(Rn.removeEPB(w),t)),o.push(w)}break;case 34:l.push(n.subarray(c,c+m));break}c+=m}}return{hvcC:t,sps:a,spsArr:o,ppsArr:l,vpsArr:u,nalUnitSize:e}}}},{key:"parseVPS",value:function(n,t){t=t||{};var e=new vl(n);e.readUByte(),e.readUByte(),e.readBits(12);var i=e.readBits(3);return t.numTemporalLayers=Math.max(t.numTemporalLayers||0,i+1),e.readBits(17),r._parseProfileTierLevel(e,i,t),t}},{key:"parseSPS",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t=t||{};var e=new vl(n);e.readUByte(),e.readUByte(),e.readBits(4);var i=e.readBits(3);t.numTemporalLayers=Math.max(i+1,t.numTemporalLayers||0),t.temporalIdNested=e.readBits(1),r._parseProfileTierLevel(e,i,t),e.readUEG();var a=t.chromaFormatIdc=e.readUEG(),o=420;a<=3&&(o=[0,420,422,444][a]);var l=0;a===3&&(l=e.readBits(1));var u=e.readUEG(),c=e.readUEG(),d=e.readBits(1),p,h,m,f;if(d===1&&(p=e.readUEG(),h=e.readUEG(),m=e.readUEG(),f=e.readUEG()),t.bitDepthLumaMinus8=e.readUEG(),t.bitDepthChromaMinus8=e.readUEG(),d===1){var v=(a===1||a===2)&&l===0?2:1,b=a===1&&l===0?2:1;u-=v*(h+p),c-=b*(f+m)}return{codec:"hev1.1.6.L93.B0",width:u,height:c,chromaFormat:o,hvcC:t}}},{key:"_parseProfileTierLevel",value:function(n,t,e){var i=e.generalTierFlag||0;e.generalProfileSpace=n.readBits(2),e.generalTierFlag=Math.max(n.readBits(1),i),e.generalProfileIdc=Math.max(n.readBits(5),e.generalProfileIdc||0),e.generalProfileCompatibilityFlags=n.readBits(32),e.generalConstraintIndicatorFlags=[n.readBits(8),n.readBits(8),n.readBits(8),n.readBits(8),n.readBits(8),n.readBits(8)];var a=n.readBits(8);i<e.generalTierFlag?e.generalLevelIdc=a:e.generalLevelIdc=Math.max(a,e.generalLevelIdc||0);for(var o=[],l=[],u=0;u<t;u++)o[u]=n.readBits(1),l[u]=n.readBits(1);t>0&&n.readBits((8-t)*2);for(var c=0;c<t;c++)o[c]!==0&&(n.readBits(2),n.readBits(1),n.readBits(5),n.readBits(16),n.readBits(16),n.readBits(4),n.readBits(16),n.readBits(16),n.readBits(12)),l[c]!==0&&n.readBits(8)}}]),r}(),Nd=function(){function r(){Qe(this,r)}return $e(r,null,[{key:"decode",value:function(n){for(var t=[],e=n,i=0,a=n.length;i<a;){if(e[i]<128){t.push(String.fromCharCode(e[i])),++i;continue}else if(!(e[i]<192)){if(e[i]<224){if(r._checkContinuation(e,i,1)){var o=(e[i]&31)<<6|e[i+1]&63;if(o>=128){t.push(String.fromCharCode(o&65535)),i+=2;continue}}}else if(e[i]<240){if(r._checkContinuation(e,i,2)){var l=(e[i]&15)<<12|(e[i+1]&63)<<6|e[i+2]&63;if(l>=2048&&(l&63488)!==55296){t.push(String.fromCharCode(l&65535)),i+=3;continue}}}else if(e[i]<248&&r._checkContinuation(e,i,3)){var u=(e[i]&7)<<18|(e[i+1]&63)<<12|(e[i+2]&63)<<6|e[i+3]&63;if(u>65536&&u<1114112){u-=65536,t.push(String.fromCharCode(u>>>10|55296)),t.push(String.fromCharCode(u&1023|56320)),i+=4;continue}}}t.push(String.fromCharCode(65533)),++i}return t.join("")}},{key:"_checkContinuation",value:function(n,t,e){var i=n;if(t+e<i.length){for(;e--;)if((i[++t]&192)!==128)return!1;return!0}else return!1}}]),r}(),Y_=function(){function r(){Qe(this,r)}return $e(r,null,[{key:"parse",value:function(n){if(!(n.length<3)){var t={},e=r._parseValue(new DataView(n.buffer,n.byteOffset,n.byteLength)),i=r._parseValue(new DataView(n.buffer,n.byteOffset+e.size,n.byteLength-e.size));return t[e.data]=i.data,t}}},{key:"_parseValue",value:function(n){var t=n.byteLength,e=n.getUint8(0),i=1,a=!1,o;switch(e){case 0:o=n.getFloat64(1),i+=8;break;case 1:{o=!!n.getUint8(1),i+=1;break}case 2:{var l=r._parseString(new DataView(n.buffer,n.byteOffset+i,n.byteLength-i)),u=l.data,c=l.size;o=u,i+=c}break;case 3:{o={};var d=0;for((n.getUint32(t-4)&16777215)===9&&(d=3);i<t-4;){var p=r._parseObject(new DataView(n.buffer,n.byteOffset+i,n.byteLength-i-d)),h=p.size,m=p.data,f=p.isEnd;if(f)break;o[m.name]=m.value,i+=h}if(i<=t-3){var v=n.getUint32(i-1)&16777215;v===9&&(i+=3)}}break;case 8:{o={},i+=4;var b=0;for((n.getUint32(t-4)&16777215)===9&&(b=3);i<t-8;){var w=r._parseObject(new DataView(n.buffer,n.byteOffset+i,n.byteLength-i-b)),C=w.size,T=w.data,L=w.isEnd;if(L)break;o[T.name]=T.value,i+=C}if(i<=t-3){var _=n.getUint32(i-1)&16777215;_===9&&(i+=3)}}break;case 9:o=void 0,i=1,a=!0;break;case 10:{o=[];var D=n.getUint32(1);i+=4;for(var x=0;x<D;x++){var P=r._parseValue(new DataView(n.buffer,n.byteOffset+i,n.byteLength-i)),I=P.data,V=P.size;o.push(I),i+=V}}break;case 11:{var g=n.getFloat64(i)+n.getInt16(i+8)*6e4;o=new Date(g),i+=10}break;case 12:{var y=n.getUint32(1);i+=4,o="",y>0&&(o=Nd.decode(new Uint8Array(n.buffer,n.byteOffset+i,y))),i+=y}break;default:i=t;break}return{data:o,size:i,isEnd:a}}},{key:"_parseString",value:function(n){var t=n.getUint16(0),e="";return t>0&&(e=Nd.decode(new Uint8Array(n.buffer,n.byteOffset+2,t))),{data:e,size:2+t}}},{key:"_parseObject",value:function(n){if(!(n.byteLength<3)){var t=r._parseString(n),e=r._parseValue(new DataView(n.buffer,n.byteOffset+t.size,n.byteLength-t.size));return{data:{name:t.data,value:e.data},size:t.size+e.size,isEnd:e.isEnd}}}}]),r}(),rr=new ui("FlvDemuxer"),_f=function(){function r(s,n,t){Qe(this,r),Y(this,"_headerParsed",!1),Y(this,"_remainingData",null),Y(this,"_gopId",0),Y(this,"_needAddMetaBeforeKeyFrameNal",!0),this.videoTrack=s||new io,this.audioTrack=n||new so,this.metadataTrack=t||new ao,this._fixer=new W_(this.videoTrack,this.audioTrack,this.metadataTrack)}return $e(r,[{key:"demux",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=this.audioTrack,a=this.videoTrack,o=this.metadataTrack;if((t||!e)&&(this._remainingData=null,this._headerParsed=!1),t?(a.reset(),i.reset(),o.reset()):(a.samples=[],i.samples=[],o.seiSamples=[],o.flvScriptSamples=[],a.warnings=[],i.warnings=[],this._remainingData&&(n=on(this._remainingData,n),this._remainingData=null)),!n.length)return{videoTrack:a,audioTrack:i,metadataTrack:o};var l=0;if(!this._headerParsed){if(!r.probe(n))throw new Error("Invalid flv file");i.present=(n[4]&4)>>>2!==0,a.present=(n[4]&1)!==0,this._headerParsed=!0,l=q(n,5)+4}for(var u=n.length,c,d,p,h,m;l+15<u&&(c=n[l],d=n[l+1]<<16|n[l+2]<<8|n[l+3],!(l+15+d>u));)p=(n[l+7]<<24>>>0)+(n[l+4]<<16)+(n[l+5]<<8)+n[l+6],l+=11,h=n.subarray(l,l+d),c===8?this._parseAudio(h,p):c===9?this._parseVideo(h,p):c===18?this._parseScript(h,p):rr.warn("Invalid tag type: ".concat(c)),l+=d,m=q(n,l),m!==11+d&&rr.warn("Invalid PrevTagSize ".concat(m," (").concat(11+d,")")),l+=4;return l<u&&(this._remainingData=n.subarray(l)),i.formatTimescale=a.formatTimescale=a.timescale=o.timescale=1e3,i.timescale=i.sampleRate||0,!i.exist()&&i.hasSample()&&i.reset(),!a.exist()&&a.hasSample()&&a.reset(),{videoTrack:a,audioTrack:i,metadataTrack:o}}},{key:"fix",value:function(n,t,e){return this._fixer.fix(n,t,e),{videoTrack:this.videoTrack,audioTrack:this.audioTrack,metadataTrack:this.metadataTrack}}},{key:"demuxAndFix",value:function(n,t,e,i){return this.demux(n,t,e),this.fix(i,t,e)}},{key:"_parseAudio",value:function(n,t){if(n.length){var e=(n[0]&240)>>>4,i=this.audioTrack;if(e!==10&&e!==7&&e!==8){rr.warn("Unsupported sound format: ".concat(e)),i.reset();return}if(e!==10){var a=(n[0]&12)>>2,o=(n[0]&2)>>1,l=n[0]&1;i.sampleRate=r.AUDIO_RATE[a],i.sampleSize=o?16:8,i.channelCount=l+1}e===10?this._parseAac(n,t):this._parseG711(n,t,e)}}},{key:"_parseG711",value:function(n,t,e){var i=this.audioTrack;i.codecType=e===7?jn.G711PCMA:jn.G711PCMU,i.sampleRate=8e3,i.codec=i.codecType,i.samples.push(new Cr(t,n.subarray(1)))}},{key:"_parseAac",value:function(n,t){var e=this.audioTrack;if(e.codecType=jn.AAC,n[1]===0){var i=vn.parseAudioSpecificConfig(n.subarray(2));i?(e.codec=i.codec,e.channelCount=i.channelCount,e.sampleRate=i.sampleRate,e.config=i.config,e.objectType=i.objectType,e.sampleRateIndex=i.samplingFrequencyIndex):(e.reset(),rr.warn("Cannot parse AudioSpecificConfig",n))}else if(n[1]===1){if(t==null)return;e.samples.push(new Cr(t,n.subarray(2)))}else rr.warn("Unknown AACPacketType: ".concat(n[1]))}},{key:"_parseVideo",value:function(n,t){var e=this;if(!(n.length<6)){var i=(n[0]&240)>>>4,a=n[0]&15,o=this.videoTrack;if(a!==7&&a!==12){o.reset(),rr.warn("Unsupported codecId: ".concat(a));return}var l=a===12;o.codecType=l?yr.HEVC:yr.AVC;var u=n[1],c=(n[2]<<16|n[3]<<8|n[4])<<8>>8;if(u===0){var d=n.subarray(5),p=l?yl.parseHEVCDecoderConfigurationRecord(d):kf.parseAVCDecoderConfigurationRecord(d);if(p){var h=p.hvcC,m=p.sps,f=p.ppsArr,v=p.spsArr,b=p.vpsArr,w=p.nalUnitSize;h&&(o.hvcC=o.hvcC||h),m&&(o.codec=m.codec,o.width=m.width,o.height=m.height,o.sarRatio=m.sarRatio,o.fpsNum=m.fpsNum,o.fpsDen=m.fpsDen),v.length&&(o.sps=v),f.length&&(o.pps=f),b&&b.length&&(o.vps=b),w&&(o.nalUnitSize=w)}else rr.warn("Cannot parse ".concat(l?"HEVC":"AVC","DecoderConfigurationRecord"),n)}else if(u===1){var C=Rn.parseAvcC(n.subarray(5),o.nalUnitSize);if(C=this._checkAddMetaNalToUnits(l,C,o),C&&C.length){var T=new _s(t+c,t,C);i===1&&T.setToKeyframe(),o.samples.push(T),C.forEach(function(L){var _=l?L[0]>>>1&63:L[0]&31;switch(_){case 5:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:if(!l&&_!==5||l&&_===5)break;T.setToKeyframe();break;case 6:case 39:case 40:if(!l&&_!==6||l&&_===6)break;e.metadataTrack.seiSamples.push(new Cf(Rn.parseSEI(Rn.removeEPB(L),l),t+c));break}}),T.keyframe&&this._gopId++,T.gopId=this._gopId}else rr.warn("Cannot parse NALUs",n)}else u===2||rr.warn("Unknown AVCPacketType: ".concat(u))}}},{key:"_checkAddMetaNalToUnits",value:function(n,t,e){if(!n||!this._needAddMetaBeforeKeyFrameNal)return this._needAddMetaBeforeKeyFrameNal=!1,t;var i=t.map(function(a){return a[0]>>>1&63});return i.includes(32)?(this._needAddMetaBeforeKeyFrameNal=!1,t):(t.unshift(e.pps[0]),t.unshift(e.sps[0]),t.unshift(e.vps[0]),t.filter(Boolean))}},{key:"_parseScript",value:function(n,t){this.metadataTrack.flvScriptSamples.push(new R_(Y_.parse(n),t))}}],[{key:"probe",value:function(n){return n[0]!==70||n[1]!==76||n[2]!==86||n[3]!==1?!1:q(n,5)>=9}}]),r}();Y(_f,"AUDIO_RATE",[5500,11e3,22e3,44e3]);var H_=9e4/2,Od=3,Ao=9e4,No=5*9e4,Oo=9e4,K_=9e4/2,U_=function(){function r(s,n,t){Qe(this,r),this.videoTrack=s,this.audioTrack=n,this.metadataTrack=t,this._baseDts=-1,this._baseDtsInited=!1,this._audioNextPts=void 0,this._videoNextDts=void 0,this._audioTimestampBreak=!1,this._videoTimestampBreak=!1,this._lastAudioExceptionGapDot=0,this._lastAudioExceptionOverlapDot=0,this._lastAudioExceptionLargeGapDot=0}return $e(r,[{key:"fix",value:function(){var n=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;t=Math.round(t*9e4);var a=this.videoTrack,o=this.audioTrack,l=a.samples,u=o.samples;if(!(!l.length&&!u.length)){var c=l[0],d=u[0],p=0;if(l.length&&u.length&&(p=c.dts-d.pts),this._baseDtsInited||this._calculateBaseDts(this.audioTrack,this.videoTrack),e&&(this._calculateBaseDts(this.audioTrack,this.videoTrack),this._baseDts-=t),!i){this._videoNextDts=p>0?t+p:t,this._audioNextPts=p>0?t:t-p;var h=c?c.dts-this._baseDts-this._videoNextDts:0,m=d?d.pts-this._baseDts-this._audioNextPts:0;Math.abs(h||m)>Oo&&(this._calculateBaseDts(this.audioTrack,this.videoTrack),this._baseDts-=t)}if(this._resetBaseDtsWhenStreamBreaked(),this._fixAudio(o),this._fixVideo(a),this.metadataTrack.exist()){var f=this.metadataTrack.timescale;this.metadataTrack.seiSamples.forEach(function(v){v.pts=v.originPts-n._baseDts,v.time=Math.max(0,v.pts)/f})}a.samples.length&&(a.baseMediaDecodeTime=a.samples[0].dts),o.samples.length&&(o.baseMediaDecodeTime=o.samples[0].pts*o.timescale/9e4)}}},{key:"_fixVideo",value:function(n){var t=this,e=n.samples;if(e.length){if(e.forEach(function(C){C.dts-=t._baseDts,C.pts-=t._baseDts}),this._videoNextDts===void 0){var i=e[0];this._videoNextDts=i.dts}var a=e.length,o=0,l=e[0],u=e[1],c=this._videoNextDts-l.dts;if(Math.abs(c)>K_){var d;l.dts+=c,l.pts+=c,n.warnings.push({type:ot.LARGE_VIDEO_GAP_BETWEEN_CHUNK,nextDts:this._videoNextDts,firstSampleDts:l.dts,nextSampleDts:(d=e[1])===null||d===void 0?void 0:d.dts,sampleDuration:c}),u&&Math.abs(u.dts-l.dts)>Oo&&(this._videoTimestampBreak=!0,e.forEach(function(C,T){T!==0&&(C.dts+=c,C.pts+=c)}))}var p;if(n.fpsNum&&n.fpsDen)p=n.timescale*(n.fpsDen/n.fpsNum);else{var h=n.samples[0],m=n.samples[a-1];p=a===1?9e3:Math.floor((m.dts-h.dts)/(a-1))}for(var f=0;f<a;f++){var v=e[f].dts,b=e[f+1];if(f<a-1?o=b.dts-v:e[f-1]?o=Math.min(v-e[f-1].dts,p):o=p,o>Oo||o<0){this._videoTimestampBreak=!0,o=this._audioTimestampBreak?p:Math.max(o,30*90);var w=this._audioNextPts||0;b&&b.dts>w&&(o=p),n.warnings.push({type:ot.LARGE_VIDEO_GAP,time:v/n.timescale,dts:v,originDts:e[f].originDts,nextDts:this._videoNextDts,sampleDuration:o,refSampleDuration:p})}e[f].duration=o,this._videoNextDts+=o}}}},{key:"_fixAudio",value:function(n){var t=this,e=n.samples;e.length&&(e.forEach(function(i){i.pts-=t._baseDts,i.dts=i.pts}),this._doFixAudioInternal(n,e,9e4))}},{key:"_calculateBaseDts",value:function(n,t){var e=n.samples,i=t.samples;if(!e.length&&!i.length)return!1;var a=1/0,o=1/0;e.length&&(n.baseDts=a=e[0].pts),i.length&&(t.baseDts=o=i[0].dts),this._baseDts=Math.min(a,o);var l=o-a;return Number.isFinite(l)&&Math.abs(l)>H_&&t.warnings.push({type:ot.LARGE_AV_SHIFT,videoBaseDts:o,audioBasePts:a,baseDts:this._baseDts,delta:l}),this._baseDtsInited=!0,!0}},{key:"_resetBaseDtsWhenStreamBreaked",value:function(){if(this._baseDtsInited&&this._videoTimestampBreak&&this._audioTimestampBreak){var n=this._calculateBaseDts(this.audioTrack,this.videoTrack);if(!n)return;this._baseDts-=Math.min(this._audioNextPts,this._videoNextDts),this._audioLastSample=null,this._videoLastSample=null,this._videoTimestampBreak=!1,this._audioTimestampBreak=!1}}},{key:"_doFixAudioInternal",value:function(n,t,e){n.sampleDuration||(n.sampleDuration=vn.getFrameDuration(n.timescale,e));var i=n.sampleDuration;if(this._audioNextPts===void 0){var a=t[0];this._audioNextPts=a.pts}for(var o=0;o<t.length;o++){var l=this._audioNextPts,u=t[o],c=u.pts-l;if(!this._audioTimestampBreak&&c>=Od*i&&c<=Ao&&!Lf){var d=vn.getSilentFrame(n.codec,n.channelCount)||t[0].data.subarray(),p=Math.floor(c/i);Math.abs(u.pts-this._lastAudioExceptionGapDot)>No&&(this._lastAudioExceptionGapDot=u.pts),n.warnings.push({type:ot.AUDIO_FILLED,pts:u.pts,originPts:u.originPts,count:p,nextPts:l,refSampleDuration:i});for(var h=0;h<p;h++){var m=new Cr(Math.floor(l),d);m.originPts=Math.floor(this._baseDts+l),t.splice(o,0,m),this._audioNextPts+=i,o++}o--}else c<=-Od*i&&c>=-1*Ao?(Math.abs(u.pts-this._lastAudioExceptionOverlapDot)>No&&(this._lastAudioExceptionOverlapDot=u.pts,n.warnings.push({type:ot.AUDIO_DROPPED,pts:u.pts,originPts:u.originPts,nextPts:l,refSampleDuration:i})),t.splice(o,1),o--):(Math.abs(c)>=Ao&&(this._audioTimestampBreak=!0,Math.abs(u.pts-this._lastAudioExceptionLargeGapDot)>No&&(this._lastAudioExceptionLargeGapDot=u.pts,n.warnings.push({type:ot.LARGE_AUDIO_GAP,time:u.pts/1e3,pts:u.pts,originPts:u.originPts,nextPts:l,sampleDuration:c,refSampleDuration:i}))),u.dts=u.pts=l,this._audioNextPts+=i)}}}]),r}(),_n=new ui("TsDemuxer"),Zf=function(){function r(s,n,t){Qe(this,r),Y(this,"_pmtId",-1),Y(this,"_remainingPacketData",null),Y(this,"_videoPesData",[]),Y(this,"_audioPesData",[]),Y(this,"_gopId",0),this.videoTrack=s||new io,this.audioTrack=n||new so,this.metadataTrack=t||new ao,this._fixer=new U_(this.videoTrack,this.audioTrack,this.metadataTrack)}return $e(r,[{key:"demux",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=this.audioTrack,a=this.videoTrack,o=this.metadataTrack;t&&(this._pmtId=-1,a.reset(),i.reset(),o.reset()),!e||t?(this._remainingPacketData=null,this._videoPesData=[],this._audioPesData=[]):(a.samples=[],i.samples=[],o.seiSamples=[],a.warnings=[],i.warnings=[],this._remainingPacketData&&(n=on(this._remainingPacketData,n),this._remainingPacketData=null));var l=n.length,u=l%188;u&&(this._remainingPacketData=n.subarray(l-u),l-=u);for(var c=a.pid,d=i.pid,p=0;p<l;p+=188){if(n[p]!==71)throw new Error("TS packet did not start with 0x47");var h=!!(n[p+1]&64),m=((n[p+1]&31)<<8)+n[p+2],f=(n[p+3]&48)>>4,v=void 0;if(f>1){if(v=p+5+n[p+4],v===p+188)continue}else v=p+4;switch(m){case 0:h&&(v+=n[v]+1),this._pmtId=(n[v+10]&31)<<8|n[v+11];break;case this._pmtId:{h&&(v+=n[v]+1);var b=v+3+((n[v+1]&15)<<8|n[v+2])-4,w=(n[v+10]&15)<<8|n[v+11];for(v+=12+w;v<b;){var C=(n[v+1]&31)<<8|n[v+2];switch(n[v]){case 15:i.pid=d=C;break;case 27:if(c!==-1)break;a.codecType=yr.AVC,a.pid=c=C;break;case 36:if(c!==-1)break;a.codecType=yr.HEVC,a.pid=c=C;break;default:_n.warn("Unsupported stream. type: ".concat(n[v],", pid: ").concat(C))}v+=((n[v+3]&15)<<8|n[v+4])+5}}break;case c:h&&this._videoPesData.length&&this._parseVideoData(),this._videoPesData.push(n.subarray(v,p+188));break;case d:h&&this._audioPesData.length&&this._parseAudioData(),this._audioPesData.push(n.subarray(v,p+188));break;case 17:case 8191:break;default:_n.warn("Unknown pid: ".concat(m))}}return this._parseVideoData(),this._parseAudioData(),i.formatTimescale=a.formatTimescale=a.timescale=o.timescale=9e4,i.timescale=i.sampleRate||0,{videoTrack:a,audioTrack:i,metadataTrack:o}}},{key:"fix",value:function(n,t,e){return this._fixer.fix(n,t,e),{videoTrack:this.videoTrack,audioTrack:this.audioTrack,metadataTrack:this.metadataTrack}}},{key:"demuxAndFix",value:function(n,t,e,i){return this.demux(n,t,e),this.fix(i,t,e)}},{key:"_parseVideoData",value:function(){if(this._videoPesData.length){var n=r._parsePES(on.apply(void 0,Wt(this._videoPesData)));if(!n){_n.warn("Cannot parse video pes",this._videoPesData);return}var t=Rn.parseAnnexB(n.data);t?this._createVideoSample(t,n.pts,n.dts):_n.warn("Cannot parse avc units",n),this._videoPesData=[]}}},{key:"_createVideoSample",value:function(n,t,e){var i=this;if(n.length){var a=this.videoTrack,o=a.codecType===yr.HEVC,l=new _s(t,e);n.forEach(function(u){var c=o?u[0]>>>1&63:u[0]&31;switch(c){case 5:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:if(!o&&c!==5||o&&c===5)break;l.setToKeyframe(),i._gopId++;break;case 6:case 39:case 40:if(!o&&c!==6||o&&c===6)break;i.metadataTrack.seiSamples.push(new Cf(Rn.parseSEI(Rn.removeEPB(u),o),t));return;case 32:if(!o)break;if(!a.vps.length){var d=yl.parseVPS(Rn.removeEPB(u),a.hvcC);a.hvcC=a.hvcC||d,a.vps=[u]}break;case 7:case 33:if(!o&&c!==7||o&&c===7)break;if(!a.sps.length){var p=Rn.removeEPB(u),h=o?yl.parseSPS(p,a.hvcC):kf.parseSPS(p);a.sps=[u],a.hvcC=a.hvcC||h.hvcC,a.codec=h.codec,a.width=h.width,a.height=h.height,a.sarRatio=h.sarRatio,a.fpsNum=h.fpsNum,a.fpsDen=h.fpsDen}break;case 8:case 34:if(!o&&c!==8||o&&c===8)break;a.pps.length||(a.pps=[u]);break}l.units.push(u)}),l.gopId=this._gopId,this._pushVideoSample(a,l)}}},{key:"_pushVideoSample",value:function(n,t){if(t.units.length)if(t.pts===null||t.pts===void 0){_n.warn("Video sample no pts",t);var e=n.samples[n.samples.length-1];e?(t.pts=e.pts,t.dts=e.dts):_n.warn("Drop video sample",t)}else n.samples.push(t)}},{key:"_parseAudioData",value:function(){if(this._audioPesData.length){var n=r._parsePES(on.apply(void 0,Wt(this._audioPesData)));if(!n){_n.warn("Cannot parse audio pes",this._audioPesData);return}this._parseAacData(n),this._audioPesData=[]}}},{key:"_parseAacData",value:function(n){var t=this.audioTrack,e=n.pts;if(e==null){if(_n.warn("AAC pes not pts",t),!t.samples.length||!t.sampleRate)return;e=t.samples[t.samples.length-1].pts+vn.getFrameDuration(t.sampleRate)}var i=vn.parseADTS(n.data,e);if(i){var a;t.codec=i.codec,t.channelCount=i.channelCount,t.sampleRate=i.sampleRate,t.objectType=i.objectType,t.sampleRateIndex=i.samplingFrequencyIndex,t.config=i.config,(a=t.samples).push.apply(a,Wt(i.frames.map(function(o){return new Cr(o.pts,o.data)}))),i.skip&&_n.warn("Skip aac adts ".concat(i.skip," bits")),i.remaining&&_n.warn("Remaining aac adts ".concat(i.remaining," bits"))}else _n.warn("Cannot parse aac adts",n)}}],[{key:"probe",value:function(n){return n.length?n[0]===71&&n[188]===71&&n[376]===71:!1}},{key:"_parsePES",value:function(n){var t=n[8];if(!(t==null||n.length<t+9)){var e=n[0]<<16|n[1]<<8|n[2];if(e===1){var i=(n[4]<<8)+n[5];if(!(i&&i>n.length-6)){var a,o,l=n[7];return l&192&&(a=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,l&64?(o=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,a-o>60*9e4&&(a=o)):o=a),{data:n.subarray(9+t),pts:a,dts:o}}}}}}]),r}(),Ye=function(){function r(){Qe(this,r)}return $e(r,null,[{key:"findBox",value:function(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=[];if(!n)return i;for(var a=0,o="",l=0;n.length>7;){if(a=q(n),o=String.fromCharCode.apply(null,n.subarray(4,8)),l=8,a===1?(a=Er(n,8),l+=8):a||(a=n.length),!t[0]||o===t[0]){var u=n.subarray(0,a);if(t.length<2)i.push({start:e,size:a,headerSize:l,type:o,data:u});else return r.findBox(u.subarray(l),t.slice(1),e+l)}e+=a,n=n.subarray(a)}return i}},{key:"tfhd",value:function(n){return Le(n,!0,function(t,e){t.trackId=q(e);var i=4,a=t.flags&255&1,o=t.flags&255&2,l=t.flags&255&8,u=t.flags&255&16,c=t.flags&255&32;a&&(i+=4,t.baseDataOffset=q(e,i),i+=4),o&&(t.sampleDescriptionIndex=q(e,i),i+=4),l&&(t.defaultSampleDuration=q(e,i),i+=4),u&&(t.defaultSampleSize=q(e,i),i+=4),c&&(t.defaultSampleFlags=q(e,i))})}},{key:"sidx",value:function(n){return Le(n,!0,function(t,e){var i=0;t.reference_ID=q(e,i),i+=4,t.timescale=q(e,i),i+=4,t.version===0?(t.earliest_presentation_time=q(e,i),i+=4,t.first_offset=q(e,i),i+=4):(t.earliest_presentation_time=Er(e,i),i+=8,t.first_offset=Er(e,i),i+=8),i+=2,t.references=[];var a=nt(e,i);i+=2;for(var o=0;o<a;o++){var l={};t.references.push(l);var u=q(e,i);i+=4,l.reference_type=u>>31&1,l.referenced_size=u&2147483647,l.subsegment_duration=q(e,i),i+=4,u=q(e,i),i+=4,l.starts_with_SAP=u>>31&1,l.SAP_type=u>>28&7,l.SAP_delta_time=u&268435455}})}},{key:"moov",value:function(n){return Le(n,!1,function(t,e,i){t.mvhd=r.mvhd(r.findBox(e,["mvhd"],i)[0]),t.trak=r.findBox(e,["trak"],i).map(function(a){return r.trak(a)}),t.pssh=r.pssh(r.findBox(e,["pssh"],i)[0])})}},{key:"mvhd",value:function(n){return Le(n,!0,function(t,e){var i=0;t.version===1?(t.timescale=q(e,16),t.duration=Er(e,20),i+=28):(t.timescale=q(e,8),t.duration=q(e,12),i+=16),t.nextTrackId=q(e,i+76)})}},{key:"trak",value:function(n){return Le(n,!1,function(t,e,i){t.tkhd=r.tkhd(r.findBox(e,["tkhd"],i)[0]),t.mdia=r.mdia(r.findBox(e,["mdia"],i)[0])})}},{key:"tkhd",value:function(n){return Le(n,!0,function(t,e){var i=0;t.version===1?(t.trackId=q(e,16),t.duration=Er(e,24),i+=32):(t.trackId=q(e,8),t.duration=q(e,16),i+=20),t.width=q(e,i+52),t.height=q(e,i+56)})}},{key:"mdia",value:function(n){return Le(n,!1,function(t,e,i){t.mdhd=r.mdhd(r.findBox(e,["mdhd"],i)[0]),t.hdlr=r.hdlr(r.findBox(e,["hdlr"],i)[0]),t.minf=r.minf(r.findBox(e,["minf"],i)[0])})}},{key:"mdhd",value:function(n){return Le(n,!0,function(t,e){var i=0;t.version===1?(t.timescale=q(e,16),t.duration=Er(e,20),i+=28):(t.timescale=q(e,8),t.duration=q(e,12),i+=16);var a=nt(e,i);t.language=String.fromCharCode((a>>10&31)+96,(a>>5&31)+96,(a&31)+96)})}},{key:"hdlr",value:function(n){return Le(n,!0,function(t,e){t.version===0&&(t.handlerType=String.fromCharCode.apply(null,e.subarray(4,8)))})}},{key:"minf",value:function(n){return Le(n,!1,function(t,e,i){t.vmhd=r.vmhd(r.findBox(e,["vmhd"],i)[0]),t.smhd=r.smhd(r.findBox(e,["smhd"],i)[0]),t.stbl=r.stbl(r.findBox(e,["stbl"],i)[0])})}},{key:"vmhd",value:function(n){return Le(n,!0,function(t,e){t.graphicsmode=nt(e),t.opcolor=[nt(e,2),nt(e,4),nt(e,6)]})}},{key:"smhd",value:function(n){return Le(n,!0,function(t,e){t.balance=nt(e)})}},{key:"stbl",value:function(n){return Le(n,!1,function(t,e,i){var a,o,l;t.stsd=r.stsd(r.findBox(e,["stsd"],i)[0]),t.stts=r.stts(r.findBox(e,["stts"],i)[0]),t.ctts=r.ctts(r.findBox(e,["ctts"],i)[0]),t.stsc=r.stsc(r.findBox(e,["stsc"],i)[0]),t.stsz=r.stsz(r.findBox(e,["stsz"],i)[0]),t.stco=r.stco(r.findBox(e,["stco"],i)[0]),t.stco||(t.co64=r.co64(r.findBox(e,["co64"],i)[0]),t.stco=t.co64);var u=(a=t.stsd.entries[0])===null||a===void 0||(o=a.sinf)===null||o===void 0||(l=o.schi)===null||l===void 0?void 0:l.tenc.default_IV_size;t.stss=r.stss(r.findBox(e,["stss"],i)[0]),t.senc=r.senc(r.findBox(e,["senc"],i)[0],u)})}},{key:"senc",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;return Le(n,!0,function(e,i){var a=0,o=q(i,a);a+=4,e.samples=[];for(var l=0;l<o;l++){var u={};u.InitializationVector=[];for(var c=0;c<t;c++)u.InitializationVector[c]=i[a+c];if(a+=t,e.flags&2){u.subsamples=[];var d=nt(i,a);a+=2;for(var p=0;p<d;p++){var h={};h.BytesOfClearData=nt(i,a),a+=2,h.BytesOfProtectedData=q(i,a),a+=4,u.subsamples.push(h)}}e.samples.push(u)}})}},{key:"pssh",value:function(n){return Le(n,!0,function(t,e){for(var i=[],a=[],o=0,l=0;l<16;l++)a.push(Yo(e[o+l]));if(o+=16,t.version>0){var u=q(e,o);o+=4;for(var c=0;c<(""+u).length;c++)for(var d=0;d<16;d++){var p=e[o];o+=1,i.push(Yo(p))}}var h=q(e,o);t.data_size=h,o+=4,t.kid=i,t.system_id=a,t.buffer=e})}},{key:"stsd",value:function(n){return Le(n,!0,function(t,e,i){t.entryCount=q(e),t.entries=r.findBox(e.subarray(4),[],i+4).map(function(a){switch(a.type){case"avc1":case"avc2":case"avc3":case"avc4":return r.avc1(a);case"hvc1":case"hev1":return r.hvc1(a);case"mp4a":return r.mp4a(a);case"alaw":case"ulaw":return r.alaw(a);case"enca":return Le(a,!1,function(o,l,u){o.channelCount=nt(l,16),o.samplesize=nt(l,18),o.sampleRate=q(l,24)/65536,l=l.subarray(28),o.sinf=r.sinf(r.findBox(l,["sinf"],u)[0]),o.esds=r.esds(r.findBox(l,["esds"],u)[0])});case"encv":return Le(a,!1,function(o,l,u){o.width=nt(l,24),o.height=nt(l,26),o.horizresolution=q(l,28),o.vertresolution=q(l,32),l=l.subarray(78),o.sinf=r.sinf(r.findBox(l,["sinf"],u)[0]),o.avcC=r.avcC(r.findBox(l,["avcC"],u)[0]),o.hvcC=r.hvcC(r.findBox(l,["hvcC"],u)[0]),o.pasp=r.pasp(r.findBox(l,["pasp"],u)[0])})}}).filter(Boolean)})}},{key:"tenc",value:function(n){return Le(n,!1,function(t,e){var i=6;t.default_IsEncrypted=e[i],i+=1,t.default_IV_size=e[i],i+=1,t.default_KID=[];for(var a=0;a<16;a++)t.default_KID.push(Yo(e[i])),i+=1})}},{key:"schi",value:function(n){return Le(n,!1,function(t,e,i){t.tenc=r.tenc(r.findBox(e,["tenc"],i)[0])})}},{key:"sinf",value:function(n){return Le(n,!1,function(t,e,i){t.schi=r.schi(r.findBox(e,["schi"],i)[0]),t.frma=r.frma(r.findBox(e,["frma"],i)[0])})}},{key:"frma",value:function(n){return Le(n,!1,function(t,e){t.data_format="";for(var i=0;i<4;i++)t.data_format+=String.fromCharCode(e[i])})}},{key:"avc1",value:function(n){return Le(n,!1,function(t,e,i){var a=Hd(t,e),o=e.subarray(a);i+=a,t.avcC=r.avcC(r.findBox(o,["avcC"],i)[0]),t.pasp=r.pasp(r.findBox(o,["pasp"],i)[0])})}},{key:"avcC",value:function(n){return Le(n,!1,function(t,e){t.configurationVersion=e[0],t.AVCProfileIndication=e[1],t.profileCompatibility=e[2],t.AVCLevelIndication=e[3],t.codec=Tf([e[1],e[2],e[3]]),t.lengthSizeMinusOne=e[4]&3,t.spsLength=e[5]&31,t.sps=[];for(var i=6,a=0;a<t.spsLength;a++){var o=nt(e,i);i+=2,t.sps.push(e.subarray(i,i+o)),i+=o}t.ppsLength=e[i],i+=1,t.pps=[];for(var l=0;l<t.ppsLength;l++){var u=nt(e,i);i+=2,t.pps.push(e.subarray(i,i+=u)),i+=u}})}},{key:"hvc1",value:function(n){return Le(n,!1,function(t,e,i){var a=Hd(t,e),o=e.subarray(a);i+=a,t.hvcC=r.hvcC(r.findBox(o,["hvcC"],i)[0]),t.pasp=r.pasp(r.findBox(o,["pasp"],i)[0])})}},{key:"hvcC",value:function(n){return Le(n,!1,function(t,e){t.data=n.data,t.codec="hev1.1.6.L93.B0",t.configurationVersion=e[0];var i=e[1];t.generalProfileSpace=i>>6,t.generalTierFlag=(i&32)>>5,t.generalProfileIdc=i&31,t.generalProfileCompatibility=q(e,2),t.generalConstraintIndicatorFlags=e.subarray(6,12),t.generalLevelIdc=e[12],t.avgFrameRate=nt(e,19),t.numOfArrays=e[22],t.vps=[],t.sps=[],t.pps=[];for(var a=23,o=0,l=0,u=0,c=0;c<t.numOfArrays;c++){o=e[a]&63,l=nt(e,a+1),a+=3;for(var d=[],p=0;p<l;p++)u=nt(e,a),a+=2,d.push(e.subarray(a,a+u)),a+=u;if(o===32){var h;(h=t.vps).push.apply(h,d)}else if(o===33){var m;(m=t.sps).push.apply(m,d)}else if(o===34){var f;(f=t.pps).push.apply(f,d)}}})}},{key:"pasp",value:function(n){return Le(n,!1,function(t,e){t.hSpacing=q(e),t.vSpacing=q(e,4)})}},{key:"mp4a",value:function(n){return Le(n,!1,function(t,e,i){var a=Kd(t,e);t.esds=r.esds(r.findBox(e.subarray(a),["esds"],i+a)[0])})}},{key:"esds",value:function(n){return Le(n,!0,function(t,e){t.codec="mp4a.";for(var i=0,a=0,o=0,l=0;e.length;){for(i=0,l=e[i],a=e[i+1],i+=2;a&128;)o=(a&127)<<7,a=e[i],i+=1;if(o+=a&127,l===3)e=e.subarray(i+3);else if(l===4)t.codec+=(e[i].toString(16)+".").padStart(3,"0"),e=e.subarray(i+13);else if(l===5){var u=t.config=e.subarray(i,i+o),c=(u[0]&248)>>3;c===31&&u.length>=2&&(c=32+((u[0]&7)<<3)+((u[1]&224)>>5)),t.objectType=c,t.codec+=c.toString(16),t.codec[t.codec.length-1]==="."&&(t.codec=t.codec.substring(0,t.codec.length-1));return}else{t.codec[t.codec.length-1]==="."&&(t.codec=t.codec.substring(0,t.codec.length-1));return}}})}},{key:"alaw",value:function(n){return Le(n,!1,function(t,e){Kd(t,e)})}},{key:"stts",value:function(n){return Le(n,!0,function(t,e){for(var i=q(e),a=[],o=4,l=0;l<i;l++)a.push({count:q(e,o),delta:q(e,o+4)}),o+=8;t.entryCount=i,t.entries=a})}},{key:"ctts",value:function(n){return Le(n,!0,function(t,e){var i=q(e),a=[],o=4;if(t.version===1)for(var l=0;l<i;l++)a.push({count:q(e,o),offset:q(e,o+4)}),o+=8;else for(var u=0;u<i;u++)a.push({count:q(e,o),offset:-(~q(e,o+4)+1)}),o+=8;t.entryCount=i,t.entries=a})}},{key:"stsc",value:function(n){return Le(n,!0,function(t,e){for(var i=q(e),a=[],o=4,l=0;l<i;l++)a.push({firstChunk:q(e,o),samplesPerChunk:q(e,o+4),sampleDescriptionIndex:q(e,o+8)}),o+=12;t.entryCount=i,t.entries=a})}},{key:"stsz",value:function(n){return Le(n,!0,function(t,e){var i=q(e),a=q(e,4),o=[];if(!i)for(var l=8,u=0;u<a;u++)o.push(q(e,l)),l+=4;t.sampleSize=i,t.sampleCount=a,t.entrySizes=o})}},{key:"stco",value:function(n){return Le(n,!0,function(t,e){for(var i=q(e),a=[],o=4,l=0;l<i;l++)a.push(q(e,o)),o+=4;t.entryCount=i,t.entries=a})}},{key:"co64",value:function(n){return Le(n,!0,function(t,e){for(var i=q(e),a=[],o=4,l=0;l<i;l++)a.push(Er(e,o)),o+=8;t.entryCount=i,t.entries=a})}},{key:"stss",value:function(n){return Le(n,!0,function(t,e){for(var i=q(e),a=[],o=4,l=0;l<i;l++)a.push(q(e,o)),o+=4;t.entryCount=i,t.entries=a})}},{key:"moof",value:function(n){return Le(n,!1,function(t,e,i){t.mfhd=r.mfhd(r.findBox(e,["mfhd"],i)[0]),t.traf=r.findBox(e,["traf"],i).map(function(a){return r.traf(a)})})}},{key:"mfhd",value:function(n){return Le(n,!0,function(t,e){t.sequenceNumber=q(e)})}},{key:"traf",value:function(n){return Le(n,!1,function(t,e,i){t.tfhd=r.tfhd(r.findBox(e,["tfhd"],i)[0]),t.tfdt=r.tfdt(r.findBox(e,["tfdt"],i)[0]),t.trun=r.trun(r.findBox(e,["trun"],i)[0])})}},{key:"trun",value:function(n){return Le(n,!0,function(t,e){var i=t.version,a=t.flags,o=e.length,l=t.sampleCount=q(e),u=4;if(o>u&&a&1&&(t.dataOffset=-(~q(e,u)+1),u+=4),o>u&&a&4&&(t.firstSampleFlags=q(e,u),u+=4),t.samples=[],o>u)for(var c,d=0;d<l;d++)c={},a&256&&(c.duration=q(e,u),u+=4),a&512&&(c.size=q(e,u),u+=4),a&1024&&(c.flags=q(e,u),u+=4),a&2048&&(i?c.cts=-(~q(e,u+4)+1):c.cts=q(e,u),u+=4),t.samples.push(c)})}},{key:"tfdt",value:function(n){return Le(n,!0,function(t,e){t.version===1?t.baseMediaDecodeTime=Er(e):t.baseMediaDecodeTime=q(e)})}},{key:"probe",value:function(n){return!!r.findBox(n,["ftyp"])}},{key:"parseSampleFlags",value:function(n){return{isLeading:(n[0]&12)>>>2,dependsOn:n[0]&3,isDependedOn:(n[1]&192)>>>6,hasRedundancy:(n[1]&48)>>>4,paddingValue:(n[1]&14)>>>1,isNonSyncSample:n[1]&1,degradationPriority:n[2]<<8|n[3]}}},{key:"moovToTrack",value:function(n,t,e){var i,a,o=n.trak;if(!(!o||!o.length)){var l=o.find(function(fn){var kt,It;return((kt=fn.mdia)===null||kt===void 0||(It=kt.hdlr)===null||It===void 0?void 0:It.handlerType)==="vide"}),u=o.find(function(fn){var kt,It;return((kt=fn.mdia)===null||kt===void 0||(It=kt.hdlr)===null||It===void 0?void 0:It.handlerType)==="soun"});if(l&&t){var c,d,p,h,m,f,v,b=t,w=(c=l.tkhd)===null||c===void 0?void 0:c.trackId;w!=null&&(b.id=l.tkhd.trackId),b.tkhdDuration=l.tkhd.duration,b.mvhdDurtion=n.mvhd.duration,b.mvhdTimecale=n.mvhd.timescale,b.timescale=b.formatTimescale=l.mdia.mdhd.timescale,b.duration=l.mdia.mdhd.duration||b.mvhdDurtion/b.mvhdTimecale*b.timescale;var C=l.mdia.minf.stbl.stsd.entries[0];if(b.width=C.width,b.height=C.height,C.pasp&&(b.sarRatio=[C.pasp.hSpacing,C.pasp.vSpacing]),C.hvcC)b.codecType=yr.HEVC,b.codec=C.hvcC.codec,b.vps=C.hvcC.vps,b.sps=C.hvcC.sps,b.pps=C.hvcC.pps,b.hvcC=C.hvcC.data;else if(C.avcC)b.codec=C.avcC.codec,b.sps=C.avcC.sps,b.pps=C.avcC.pps;else throw new Error("unknown video stsd entry");if(b.present=!0,b.ext={},b.ext.stss=(d=l.mdia)===null||d===void 0||(p=d.minf)===null||p===void 0||(h=p.stbl)===null||h===void 0?void 0:h.stss,b.ext.ctts=(m=l.mdia)===null||m===void 0||(f=m.minf)===null||f===void 0||(v=f.stbl)===null||v===void 0?void 0:v.ctts,C&&C.type==="encv"){var T,L,_,D,x,P,I,V;b.isVideoEncryption=!0,C.default_KID=(T=C.sinf)===null||T===void 0||(L=T.schi)===null||L===void 0?void 0:L.tenc.default_KID,C.default_IsEncrypted=(_=C.sinf)===null||_===void 0||(D=_.schi)===null||D===void 0?void 0:D.tenc.default_IsEncrypted,C.default_IV_size=(x=C.sinf)===null||x===void 0||(P=x.schi)===null||P===void 0?void 0:P.tenc.default_IV_size,b.videoSenc=l.mdia.minf.stbl.senc&&l.mdia.minf.stbl.senc.samples,C.data_format=(I=C.sinf)===null||I===void 0||(V=I.frma)===null||V===void 0?void 0:V.data_format,b.useEME=n.useEME,b.kidValue=n.kidValue,b.pssh=n.pssh,b.encv=C}}if(u&&e){var g,y,S,E,Z,R,M,O,z,N=e,ne=(g=u.tkhd)===null||g===void 0?void 0:g.trackId;ne!=null&&(N.id=u.tkhd.trackId),N.tkhdDuration=u.tkhd.duration,N.mvhdDurtion=n.mvhd.duration,N.mvhdTimecale=n.mvhd.timescale,N.timescale=N.formatTimescale=u.mdia.mdhd.timescale,N.duration=u.mdia.mdhd.duration||N.mvhdDurtion/N.mvhdTimecale*N.timescale;var B=u.mdia.minf.stbl.stsd.entries[0];switch(N.sampleSize=B.sampleSize,N.sampleRate=B.sampleRate,N.channelCount=B.channelCount,N.present=!0,B.type){case"alaw":N.codecType=N.codec=jn.G711PCMA,N.sampleRate=8e3;break;case"ulaw":N.codecType=N.codec=jn.G711PCMU,N.sampleRate=8e3;break;default:N.sampleDuration=vn.getFrameDuration(N.sampleRate,N.timescale),N.sampleRateIndex=vn.getRateIndexByRate(N.sampleRate),N.objectType=((i=B.esds)===null||i===void 0?void 0:i.objectType)||2,B.esds&&(N.config=Array.from(B.esds.config)),N.codec=((a=B.esds)===null||a===void 0?void 0:a.codec)||"mp4a.40.2";break}if(N.sampleDuration=vn.getFrameDuration(N.sampleRate,N.timescale),N.objectType=((y=B.esds)===null||y===void 0?void 0:y.objectType)||2,B.esds&&(B.esds.config?N.config=Array.from(B.esds.config):console.warn("esds config is null")),N.codec=((S=B.esds)===null||S===void 0?void 0:S.codec)||"mp4a.40.2",N.sampleRateIndex=vn.getRateIndexByRate(N.sampleRate),N.ext={},N.ext.stss=(E=u.mdia)===null||E===void 0||(Z=E.minf)===null||Z===void 0||(R=Z.stbl)===null||R===void 0?void 0:R.stss,N.ext.ctts=(M=u.mdia)===null||M===void 0||(O=M.minf)===null||O===void 0||(z=O.stbl)===null||z===void 0?void 0:z.ctts,N.present=!0,B&&B.type==="enca"){var qe,Xe,ze,te,oe,le,Ce,Me;N.isAudioEncryption=!0,B.data_format=(qe=B.sinf)===null||qe===void 0||(Xe=qe.frma)===null||Xe===void 0?void 0:Xe.data_format,B.default_KID=(ze=B.sinf)===null||ze===void 0||(te=ze.schi)===null||te===void 0?void 0:te.tenc.default_KID,B.default_IsEncrypted=(oe=B.sinf)===null||oe===void 0||(le=oe.schi)===null||le===void 0?void 0:le.tenc.default_IsEncrypted,B.default_IV_size=(Ce=B.sinf)===null||Ce===void 0||(Me=Ce.schi)===null||Me===void 0?void 0:Me.tenc.default_IV_size,N.audioSenc=u.mdia.minf.stbl.senc&&u.mdia.minf.stbl.senc.samples,N.useEME=n.useEME,N.kidValue=n.kidValue,N.enca=B}}if(e&&(e.isVideoEncryption=t?t.isVideoEncryption:!1),t&&(t.isAudioEncryption=e?e.isAudioEncryption:!1),t!=null&&t.encv||e!=null&&e.enca){var pt,Rt,hn=t==null||(pt=t.encv)===null||pt===void 0?void 0:pt.default_KID,Ln=e==null||(Rt=e.enca)===null||Rt===void 0?void 0:Rt.default_KID,Lt=hn||Ln?(hn||Ln).join(""):null;t&&(t.kid=Lt),e&&(e.kid=Lt)}return t&&(t.flags=3841),e&&(e.flags=1793),{videoTrack:t,audioTrack:e}}}},{key:"evaluateDefaultDuration",value:function(n,t,e){var i,a=t==null||(i=t.samples)===null||i===void 0?void 0:i.length;if(!a)return 1024;var o=1024*a/t.timescale;return o*n.timescale/e}},{key:"moofToSamples",value:function(n,t,e){var i={};return n.mfhd&&(t&&(t.sequenceNumber=n.mfhd.sequenceNumber),e&&(e.sequenceNumber=n.mfhd.sequenceNumber)),n.traf.forEach(function(a){var o=a.tfhd,l=a.tfdt,u=a.trun;if(!(!o||!u)){l&&(t&&t.id===o.trackId&&(t.baseMediaDecodeTime=l.baseMediaDecodeTime),e&&e.id===o.trackId&&(e.baseMediaDecodeTime=l.baseMediaDecodeTime));var c=o.defaultSampleSize||0,d=o.defaultSampleDuration||r.evaluateDefaultDuration(t,e,u.samples.length||u.sampleCount),p=u.dataOffset||0,h=0,m=-1;if(!u.samples.length&&u.sampleCount){i[o.trackId]=[];for(var f=0;f<u.sampleCount;f++)i[o.trackId].push({offset:p,dts:h,duration:d,size:c}),h+=d,p+=c}else i[o.trackId]=u.samples.map(function(v,b){return v={offset:p,dts:h,pts:h+(v.cts||0),duration:v.duration||d,size:v.size||c,gopId:m,keyframe:b===0||v.flags!==null&&v.flags!==void 0&&(v.flags&65536)>>>0!==65536},v.keyframe&&(m++,v.gopId=m),h+=v.duration,p+=v.size,v})}}),i}},{key:"moovToSamples",value:function(n){var t=n.trak;if(!(!t||!t.length)){var e=t.find(function(I){var V,g;return((V=I.mdia)===null||V===void 0||(g=V.hdlr)===null||g===void 0?void 0:g.handlerType)==="vide"}),i=t.find(function(I){var V,g;return((V=I.mdia)===null||V===void 0||(g=V.hdlr)===null||g===void 0?void 0:g.handlerType)==="soun"});if(!(!e&&!i)){var a,o;if(e){var l,u,c=(l=e.mdia)===null||l===void 0||(u=l.minf)===null||u===void 0?void 0:u.stbl;if(!c)return;var d=c.stts,p=c.stsc,h=c.stsz,m=c.stco,f=c.stss,v=c.ctts;if(!d||!p||!h||!m||!f)return;a=Yd(d,p,h,m,v,f)}if(i){var b,w,C,T=(b=i.mdia)===null||b===void 0||(w=b.minf)===null||w===void 0?void 0:w.stbl;if(!T)return;var L=(C=i.mdia.mdhd)===null||C===void 0?void 0:C.timescale,_=T.stts,D=T.stsc,x=T.stsz,P=T.stco;if(!L||!_||!D||!x||!P)return;o=Yd(_,D,x,P)}return{videoSamples:a,audioSamples:o}}}}}]),r}();function Yd(r,s,n,t,e,i){var a=[],o=e==null?void 0:e.entries,l=s.entries,u=t.entries,c=n.entrySizes,d=i==null?void 0:i.entries,p;d&&(p={},d.forEach(function(D){p[D-1]=!0}));var h;o&&(h=[],o.forEach(function(D){for(var x=D.count,P=D.offset,I=0;I<x;I++)h.push(P)}));var m,f=-1,v=0,b=0,w=0,C=0,T=0,L=l[0].samplesPerChunk,_=l[1]?l[1].firstChunk-1:1/0;return r.entries.forEach(function(D){for(var x=D.count,P=D.delta,I=0;I<x;I++)m={dts:v,duration:P,size:c[b]||n.sampleSize,offset:u[w]+T,index:b},d&&(m.keyframe=p[b],m.keyframe&&f++,m.gopId=f),h&&b<h.length&&(m.pts=m.dts+h[b]),a.push(m),v+=P,b++,b<L?T+=m.size:(w++,T=0,w>=_&&(C++,_=l[C+1]?l[C+1].firstChunk-1:1/0),L+=l[C].samplesPerChunk)}),a}function Hd(r,s){return r.dataReferenceIndex=nt(s,6),r.width=nt(s,24),r.height=nt(s,26),r.horizresolution=q(s,28),r.vertresolution=q(s,32),r.frameCount=nt(s,40),r.depth=nt(s,74),78}function Kd(r,s){return r.dataReferenceIndex=nt(s,6),r.channelCount=nt(s,16),r.sampleSize=nt(s,18),r.sampleRate=q(s,24)/65536,28}function Le(r,s,n){if(r){if(r.size!==r.data.length)throw new Error("box ".concat(r.type," size !== data.length"));var t={start:r.start,size:r.size,headerSize:r.headerSize,type:r.type};return s&&(t.version=r.data[r.headerSize],t.flags=A_(r.data,r.headerSize+1),t.headerSize+=4),n(t,r.data.subarray(t.headerSize),t.start+t.headerSize),t}}var z_=function(s,n,t){for(var e=String(t),i=n>>0,a=Math.ceil(i/e.length),o=[],l=String(s);a--;)o.push(e);return o.join("").substring(0,i-l.length)+l},Yo=function(){for(var s=[],n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return t.forEach(function(i){s.push(z_(Number(i).toString(16),2,0))}),s[0]},B_=function(){function r(s,n,t){Qe(this,r),this.videoTrack=s||new io,this.audioTrack=n||new so,this.metadataTrack=t||new ao}return $e(r,[{key:"demux",value:function(n,t){var e=this.videoTrack,i=this.audioTrack,a=e.exist(),o=i.exist();if(e.samples=[],i.samples=[],t){if(!o){var l=Ye.findBox(t,["moov"])[0];if(!l)throw new Error("cannot found moov box");Ye.moovToTrack(Ye.moov(l),null,i)}var u=Ye.findBox(t,["moof"])[0];if(u){var c=Ye.moofToSamples(Ye.moof(u),null,i)[i.id],d=i.baseMediaDecodeTime;if(c){var p=u.start;c.map(function(T){T.offset+=p;var L=t.subarray(T.offset,T.offset+T.size);i.samples.push(new Cr(T.dts+d,L,T.duration))})}}}if(n){if(!a&&!o){var h=Ye.findBox(n,["moov"])[0];if(!h)throw new Error("cannot found moov box");Ye.moovToTrack(Ye.moov(h),e,i)}var m=Ye.findBox(n,["moof"])[0];if(m){var f=Ye.moofToSamples(Ye.moof(m),e,i),v=e.baseMediaDecodeTime,b=i.baseMediaDecodeTime,w=m.start,C;Object.keys(f).forEach(function(T){e.id==T?f[T].map(function(L){L.offset+=w;var _=new _s((L.pts||L.dts)+v,L.dts+v);_.duration=L.duration,_.gopId=L.gopId,L.keyframe&&_.setToKeyframe();var D=n.subarray(L.offset,L.offset+L.size);_.data=D;for(var x=0,P=D.length-1;x<P;)C=q(D,x),x+=4,_.units.push(D.subarray(x,x+C)),x+=C;e.samples.push(_)}):i.id==T&&f[T].map(function(L){L.offset+=w;var _=n.subarray(L.offset,L.offset+L.size);i.samples.push(new Cr(L.dts+b,_,L.duration))})})}}return{videoTrack:e,audioTrack:i,metadataTrack:this.metadataTrack}}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset(),this.metadataTrack.reset()}}],[{key:"probe",value:function(n){return Ye.probe(n)}}]),r}();function j_(r){for(var s=0,n=arguments.length,t=new Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];t.forEach(function(o){s+=o.length});var i=new r(s),a=0;return t.forEach(function(o){i.set(o,a),a+=o.length}),i}var wt=function(){function r(){Qe(this,r),this.buffer=new Uint8Array(0)}return $e(r,[{key:"write",value:function(){for(var n=this,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(a){a?n.buffer=j_(Uint8Array,n.buffer,a):window.console.warn(a)})}}],[{key:"writeUint16",value:function(n){return new Uint8Array([n>>8&255,n&255])}},{key:"writeUint32",value:function(n){return new Uint8Array([n>>24,n>>16&255,n>>8&255,n&255])}}]),r}(),Ud=Math.pow(2,32)-1,ke=function(){function r(){Qe(this,r)}return $e(r,null,[{key:"box",value:function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];e=e.filter(Boolean);var a=8+e.reduce(function(u,c){return u+c.byteLength},0),o=new Uint8Array(a);o[0]=a>>24&255,o[1]=a>>16&255,o[2]=a>>8&255,o[3]=a&255,o.set(n,4);var l=8;return e.forEach(function(u){o.set(u,l),l+=u.byteLength}),o}},{key:"ftyp",value:function(n){var t=n.find(function(e){return e.type===Ri.VIDEO&&e.codecType===yr.HEVC});return t?r.FTYPHEV1:r.FTYPAVC1}},{key:"initSegment",value:function(n){var t=r.ftyp(n),e=on(t,r.moov(n));return e}},{key:"pssh",value:function(n){var t=new Uint8Array([1,0,0,0].concat([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75],[0,0,0,1],Ad(n.kid),[0,0,0,0]));return r.box(r.types.pssh,t)}},{key:"moov",value:function(n){if(n[0].useEME&&(n[0].encv||n[0].enca)){n[0].pssh||(n[0].pssh={kid:n[0].kid});var t=this.pssh(n[0].pssh);return r.box.apply(r,[r.types.moov,r.mvhd(n[0].mvhdDurtion||n[0].duration,n[0].mvhdTimecale||n[0].timescale),r.mvex(n)].concat(Wt(n.map(function(e){return r.trak(e)})),[t]))}else return r.box.apply(r,[r.types.moov,r.mvhd(n[0].mvhdDurtion||n[0].duration,n[0].mvhdTimecale||n[0].timescale)].concat(Wt(n.map(function(e){return r.trak(e)})),[r.mvex(n)]))}},{key:"mvhd",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4,e=r.box(r.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24&255,n>>16&255,n>>8&255,n&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));return e}},{key:"trak",value:function(n){var t=r.box(r.types.trak,r.tkhd(n.id,n.tkhdDuration||0,n.width,n.height),r.mdia(n));return t}},{key:"tkhd",value:function(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=r.box(r.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,e>>8&255,e&255,0,0,i>>8&255,i&255,0,0]));return a}},{key:"mdia",value:function(n){var t=r.box(r.types.mdia,r.mdhd(n.duration,n.timescale),r.hdlr(n.type),r.minf(n));return t}},{key:"mdhd",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4,e=r.box(r.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24&255,n>>16&255,n>>8&255,n&255,85,196,0,0]));return e}},{key:"hdlr",value:function(n){var t=r.box(r.types.hdlr,r.HDLR_TYPES[n]);return t}},{key:"minf",value:function(n){var t=r.box(r.types.minf,n.type===Ri.VIDEO?r.VMHD:r.SMHD,r.DINF,r.stbl(n));return t}},{key:"stbl",value:function(n){var t=[];n&&n.ext&&n.ext.stss&&t.push(r.stss(n.ext.stss.entries));var e=r.box(r.types.stbl,r.stsd(n),r.STTS,t[0],r.STSC,r.STSZ,r.STCO);return e}},{key:"stsd",value:function(n){var t;n.type==="audio"?n.useEME&&n.enca?t=r.enca(n):t=r.mp4a(n):n.useEME&&n.encv?t=r.encv(n):t=r.avc1hev1(n);var e=r.box(r.types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),t);return e}},{key:"enca",value:function(n){var t=n.enca.channelCount,e=n.enca.sampleRate,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,e>>8&255,e&255,0,0]),a=r.esds(n.config),o=r.sinf(n.enca);return r.box(r.types.enca,i,a,o)}},{key:"encv",value:function(n){var t,e,i=n.sps.length>0?n.sps[0]:[],a=n.pps.length>0?n.pps[0]:[],o=n.width,l=n.height,u=n.sarRatio[0],c=n.sarRatio[1],d=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,o&255,l>>8&255,l&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),p=new Uint8Array((t=(e=[1,i[1],i[2],i[3],255,225,i.length>>>8&255,i.length&255]).concat.apply(e,Wt(i)).concat([1,a.length>>>8&255,a.length&255])).concat.apply(t,Wt(a))),h=new Uint8Array([0,0,88,57,0,15,200,192,0,4,86,72]),m=r.sinf(n.encv),f=new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,c>>24,c>>16&255,c>>8&255,c&255]);return r.box(r.types.encv,d,r.box(r.types.avcC,p),r.box(r.types.btrt,h),m,r.box(r.types.pasp,f))}},{key:"schi",value:function(n){var t=new Uint8Array([]),e=r.tenc(n);return r.box(r.types.schi,t,e)}},{key:"tenc",value:function(n){var t=new Uint8Array([0,0,0,0,0,0,n.default_IsEncrypted&255,n.default_IV_size&255].concat(Ad(n.default_KID)));return r.box(r.types.tenc,t)}},{key:"sinf",value:function(n){var t=new Uint8Array([]),e=new Uint8Array([n.data_format.charCodeAt(0),n.data_format.charCodeAt(1),n.data_format.charCodeAt(2),n.data_format.charCodeAt(3)]),i=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),a=r.schi(n);return r.box(r.types.sinf,t,r.box(r.types.frma,e),r.box(r.types.schm,i),a)}},{key:"avc1hev1",value:function(n){var t=n.codecType===yr.HEVC,e=t?r.types.hvc1:r.types.avc1,i=t?r.hvcC(n):r.avcC(n),a=[new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n.width>>8&255,n.width&255,n.height>>8&255,n.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),i];return t?a.push(r.box(r.types.fiel,new Uint8Array([1,0]))):n.sarRatio&&n.sarRatio.length>1&&a.push(r.pasp(n.sarRatio)),r.box.apply(r,[e].concat(a))}},{key:"avcC",value:function(n){var t,e,i=[],a=[],o;return n.sps.forEach(function(l){o=l.byteLength,i.push(o>>>8&255),i.push(o&255),i.push.apply(i,Wt(l))}),n.pps.forEach(function(l){o=l.byteLength,a.push(o>>>8&255),a.push(o&255),a.push.apply(a,Wt(l))}),r.box(r.types.avcC,new Uint8Array((t=(e=[1,i[3],i[4],i[5],255,224|n.sps.length]).concat.apply(e,i).concat([n.pps.length])).concat.apply(t,a)))}},{key:"hvcC",value:function(n){var t=n.hvcC;if(t instanceof ArrayBuffer||t instanceof Uint8Array)return t;var e=n.vps,i=n.sps,a=n.pps,o;if(t){var l=t.generalProfileCompatibilityFlags,u=t.generalConstraintIndicatorFlags,c=(e.length&&1)+(i.length&&1)+(a.length&&1);o=[1,t.generalProfileSpace<<6|t.generalTierFlag<<5|t.generalProfileIdc,l>>>24,l>>>16,l>>>8,l,u[0],u[1],u[2],u[3],u[4],u[5],t.generalLevelIdc,240,0,252,t.chromaFormatIdc|252,t.bitDepthLumaMinus8|248,t.bitDepthChromaMinus8|248,0,0,t.numTemporalLayers<<3|t.temporalIdNested<<2|3,c];var d=function(h){var m;o.push(h.length>>8,h.length),(m=o).push.apply(m,Wt(h))};e.length&&(o.push(160,0,e.length),e.forEach(d)),i.length&&(o.push(161,0,i.length),i.forEach(d)),a.length&&(o.push(162,0,a.length),a.forEach(d))}else o=[1,1,96,0,0,0,144,0,0,0,0,0,93,240,0,252,253,248,248,0,0,15,3,160,0,1,0,24,64,1,12,1,255,255,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,153,152,9,161,0,1,0,45,66,1,1,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,160,2,128,128,45,22,89,153,164,147,43,154,128,128,128,130,0,0,3,0,2,0,0,3,0,50,16,162,0,1,0,7,68,1,193,114,180,98,64];return r.box(r.types.hvcC,new Uint8Array(o))}},{key:"pasp",value:function(n){var t=k_(n,2),e=t[0],i=t[1];return r.box(r.types.pasp,new Uint8Array([e>>24,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255]))}},{key:"mp4a",value:function(n){return r.box(r.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n.channelCount,0,16,0,0,0,0,n.sampleRate>>8&255,n.sampleRate&255,0,0]),n.config.length?r.esds(n.config):void 0)}},{key:"esds",value:function(n){var t=n.length,e=r.box(r.types.esds,new Uint8Array([0,0,0,0,3,23+t,0,0,0,4,15+t,64,21,0,6,0,0,0,218,192,0,0,218,192,5].concat([t]).concat(n).concat([6,1,2])));return e}},{key:"mvex",value:function(n){var t=r.box.apply(r,[r.types.mvex].concat(Wt(n.map(function(e){return r.trex(e.id)}))));return t}},{key:"trex",value:function(n){var t=r.box(r.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]));return t}},{key:"trex1",value:function(n){var t=r.box(r.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,2,0,0,0,0,0,0,1,0,0]));return t}},{key:"trex2",value:function(n){var t=r.box(r.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,4,0,0,0,0,0,2,0,0,0]));return t}},{key:"moof",value:function(n){var t=r.box.apply(r,[r.types.moof,r.mfhd(n[0].samples?n[0].samples[0].gopId:0)].concat(Wt(n.map(function(e){return r.traf(e)}))));return t}},{key:"mfhd",value:function(n){var t=r.box(r.types.mfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255]));return t}},{key:"traf",value:function(n){var t=r.tfhd(n.id),e=r.tfdt(n,n.baseMediaDecodeTime),i=0,a;if(n.isVideo&&n.videoSenc&&(a=n.videoSenc,a.forEach(function(y){i=i+8,y.subsamples&&y.subsamples.length&&(i=i+2,i=i+y.subsamples.length*6)})),n.videoSencLength=i,!n.useEME||!n.isVideoEncryption&&!n.isAudioEncryption){var o=r.sdtp(n),l=16+20+8+16+8+8;return r.box(r.types.traf,t,e,o,r.trun(n.samples,o.byteLength+l))}else if(n.isVideoEncryption)if(n.isVideo){var u=r.saiz(n),c=r.saio(n),d=r.trun1(n),p=r.senc(n),h=r.box(r.types.traf,t,e,u,c,d,p);return h}else if(n.isAudioEncryption){var v=r.sbgp(),b=r.saiz(n),w=r.saio(n),C=r.senc(n),T=r.trun1(n),L=r.box(r.types.traf,t,e,v,b,w,C,T);return L}else{var m=r.sbgp(),f=r.trun1(n);return r.box(r.types.traf,t,e,m,f)}else if(n.isVideo){var _=r.trun1(n);return r.box(r.types.traf,t,e,_)}else{var D=r.sbgp(),x=r.saiz(n),P=r.saio(n),I=r.senc(n),V=r.trun1(n),g=r.box(r.types.traf,t,e,D,x,P,I,V);return g}}},{key:"sdtp",value:function(n){var t=new wt;return n.samples.forEach(function(e){t.write(new Uint8Array(n.isVideo?[e.keyframe?32:16]:[16]))}),r.box(r.types.sdtp,this.extension(0,0),t.buffer)}},{key:"trun1",value:function(n){var t=new wt,e=wt.writeUint32(n.samples.length),i=null;if(n.isVideo){var a=n.videoSencLength;i=wt.writeUint32(n.samples.length*16+a+149),!n.isVideoEncryption&&n.isAudioEncryption&&(i=wt.writeUint32(n.samples.length*16+92))}else{var o=n.samples.length*12+124;n.isAudioEncryption&&(o=n.samples.length*12+8*n.audioSenc.length+177),i=wt.writeUint32(o)}return n.samples.forEach(function(l){t.write(wt.writeUint32(l.duration)),t.write(wt.writeUint32(l.size)),t.write(wt.writeUint32(l.keyframe?33554432:65536)),n.isVideo&&t.write(wt.writeUint32(l.cts?l.cts:0))}),r.box(r.types.trun,this.extension(0,n.flags),e,i,t.buffer)}},{key:"senc",value:function(n){var t=new wt,e=n.samples.length,i=n.isVideo?16:8,a=n.isVideo?2:0,o=[],l=0;return n.isVideo?(o=n.videoSenc,l=n.videoSencLength):o=n.audioSenc,l=l||i*e,t.write(wt.writeUint32(16+l),r.types.senc,this.extension(0,a)),t.write(wt.writeUint32(e)),o.forEach(function(u){for(var c=0;c<u.InitializationVector.length;c++)t.write(new Uint8Array([u.InitializationVector[c]]));u.subsamples&&u.subsamples.length&&(t.write(wt.writeUint16(u.subsamples.length)),u.subsamples.forEach(function(d){t.write(wt.writeUint16(d.BytesOfClearData)),t.write(wt.writeUint32(d.BytesOfProtectedData))}))}),t.buffer}},{key:"saio",value:function(n){var t=n.samples.length*12+141;!n.isVideo&&n.isAudioEncryption&&(t=149);var e=new Uint8Array([1,0,0,0,0,0,0,1,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255]);return r.box(r.types.saio,e)}},{key:"saiz",value:function(n){var t=n.samples.length,e=new Uint8Array([0,0,0,0,16,t>>24&255,t>>16&255,t>>8&255,t&255]);return r.box(r.types.saiz,e)}},{key:"sbgp",value:function(){var n=new Uint8Array([114,111,108,108,0,0,0,1,0,0,1,25,0,0,0,1]);return r.box(r.types.sbgp,this.extension(0,0),n)}},{key:"extension",value:function(n,t){return new Uint8Array([n,t>>16&255,t>>8&255,t&255])}},{key:"tfhd",value:function(n){return r.box(r.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255]))}},{key:"tfdt",value:function(n,t){var e=Math.floor(t/(Ud+1)),i=Math.floor(t%(Ud+1));return n.useEME&&(n.isVideoEncryption||n.isAudioEncryption)?r.box(r.types.tfdt,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])):r.box(r.types.tfdt,new Uint8Array([1,0,0,0,e>>24,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255]))}},{key:"trun",value:function(n,t){var e=n.length,i=12+16*e;t+=8+i;var a=new Uint8Array(i);a.set([0,0,15,1,e>>>24&255,e>>>16&255,e>>>8&255,e&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0);for(var o=0;o<e;o++){var l=n[o],u=l.duration,c=l.size,d=l.flag,p=d===void 0?{}:d,h=l.cts,m=h===void 0?0:h;a.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,p.isLeading<<2|(p.dependsOn===null||p.dependsOn===void 0?1:p.dependsOn),p.isDependedOn<<6|p.hasRedundancy<<4|p.paddingValue<<1|(p.isNonSyncSample===null||p.isNonSyncSample===void 0?1:p.isNonSyncSample),p.degradationPriority&61440,p.degradationPriority&15,m>>>24&255,m>>>16&255,m>>>8&255,m&255],12+16*o)}return r.box(r.types.trun,a)}},{key:"moovMP4",value:function(n){return r.box.apply(r,[r.types.moov,r.mvhd(n[0].duration,n[0].timescale)].concat(Wt(n.map(function(t){return r.trackMP4(t)}))))}},{key:"trackMP4",value:function(n){return r.box(r.types.trak,r.tkhd(n.id,n.duration,n.width,n.height),r.mdiaMP4(n))}},{key:"mdiaMP4",value:function(n){return r.box(r.types.mdia,r.mdhd(n.duration,n.timescale),r.hdlr(n.type),r.minfMP4(n))}},{key:"minfMP4",value:function(n){return r.box(r.types.minf,n.type===Ri.VIDEO?r.VMHD:r.SMHD,r.DINF,r.stblMP4(n))}},{key:"stblMP4",value:function(n){var t=n.ext,e=[r.stsd(n),r.stts(t.stts),r.stsc(t.stsc),r.stsz(t.stsz),r.stco(t.stco)];return t.stss.length&&e.push(r.stss(t.stss)),t.ctts.length&&e.push(r.ctts(t.ctts)),r.box.apply(r,[r.types.stbl].concat(e))}},{key:"stts",value:function(n){var t=n.length,e=new Uint8Array(8*t),i=0;return n.forEach(function(a){var o=a.value,l=a.count;e.set([l>>24,l>>16&255,l>>8&255,l&255,o>>24,o>>16&255,o>>8&255,o&255],i),i+=8}),r.box(r.types.stts,on(new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"stsc",value:function(n){var t=n.length,e=new Uint8Array(12*t),i=0;return n.forEach(function(a){var o=a.firstChunk,l=a.samplesPerChunk,u=a.sampleDescIndex;e.set([o>>24,o>>16&255,o>>8&255,o&255,l>>24,l>>16&255,l>>8&255,l&255,u>>24,u>>16&255,u>>8&255,u&255],i),i+=12}),r.box(r.types.stsc,on(new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"stsz",value:function(n){var t=n.length,e=new Uint8Array(4*t),i=0;return n.forEach(function(a){e.set([a>>24,a>>16&255,a>>8&255,a&255],i),i+=4}),r.box(r.types.stsz,on(new Uint8Array([0,0,0,0,0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"stco",value:function(n){var t=n.length,e=new Uint8Array(4*t),i=0;return n.forEach(function(a){e.set([a>>24,a>>16&255,a>>8&255,a&255],i),i+=4}),r.box(r.types.stco,on(new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"stss",value:function(n){var t=n.length,e=new Uint8Array(4*t),i=0;return n.forEach(function(a){e.set([a>>24,a>>16&255,a>>8&255,a&255],i),i+=4}),r.box(r.types.stss,on(new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"ctts",value:function(n){var t=n.length,e=new Uint8Array(8*t),i=0;return n.forEach(function(a){var o=a.value,l=a.count;e.set([l>>24,l>>16&255,l>>8&255,l&255,o>>24,o>>16&255,o>>8&255,o&255],i),i+=8}),r.box(r.types.ctts,on(new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"styp",value:function(){return r.box(r.types.styp,new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120]))}},{key:"sidx",value:function(n){var t=n.timescale,e=n.samples[0].duration,i=e*n.samples.length,a=n.samples[0].sampleOffset*e,o=8;n.samples.forEach(function(p){o+=p.size});var l=0;if(n.isVideo){var u=0,c;n.videoSenc&&(c=n.videoSenc),n.isVideo&&c.forEach(function(p){u=u+8,p.subsamples&&p.subsamples.length&&(u=u+2,u=u+p.subsamples.length*6)}),n.videoSencLength=u,l=o+141+n.samples.length*16+u,n.useEME&&n.isAudioEncryption&&!n.isVideoEncryption&&(l=o+n.samples.length*16+84)}else l=o+116+n.samples.length*12,n.useEME&&n.isAudioEncryption&&(l=o+169+n.samples.length*12+8*n.audioSenc.length);var d=new Uint8Array([0,0,0,0,0,0,0,n.id&255,t>>24&255,t>>16&255,t>>8&255,t&255,a>>24&255,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,1,0,l>>16&255,l>>8&255,l&255,i>>24&255,i>>16&255,i>>8&255,i&255,144,0,0,0]);return r.box(r.types.sidx,d)}},{key:"mdat",value:function(n){var t=r.box(r.types.mdat,n);return t}}]),r}();Y(ke,"types",["avc1","avcC","hvc1","hvcC","dinf","dref","esds","ftyp","hdlr","mdat","mdhd","mdia","mfhd","minf","moof","moov","mp4a","mvex","mvhd","pasp","stbl","stco","stsc","stsd","stsz","stts","tfdt","tfhd","traf","trak","trex","tkhd","vmhd","smhd","ctts","stss","styp","pssh","sidx","sbgp","saiz","saio","senc","trun","encv","enca","sinf","btrt","frma","tenc","schm","schi","mehd","fiel","sdtp"].reduce(function(r,s){return r[s]=[s.charCodeAt(0),s.charCodeAt(1),s.charCodeAt(2),s.charCodeAt(3)],r},Object.create(null)));Y(ke,"HDLR_TYPES",{video:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),audio:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])});Y(ke,"FTYPAVC1",ke.box(ke.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49])));Y(ke,"FTYPHEV1",ke.box(ke.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,104,101,118,49])));Y(ke,"DINF",ke.box(ke.types.dinf,ke.box(ke.types.dref,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]))));Y(ke,"VMHD",ke.box(ke.types.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])));Y(ke,"SMHD",ke.box(ke.types.smhd,new Uint8Array([0,0,0,0,0,0,0,0])));Y(ke,"StblTable",new Uint8Array([0,0,0,0,0,0,0,0]));Y(ke,"STTS",ke.box(ke.types.stts,ke.StblTable));Y(ke,"STSC",ke.box(ke.types.stsc,ke.StblTable));Y(ke,"STSZ",ke.box(ke.types.stsz,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])));Y(ke,"STCO",ke.box(ke.types.stco,ke.StblTable));var yu=function(){function r(s,n){Qe(this,r),this.name=s||"",this._prefix="[".concat(this.name,"]"),r.disabled=n}return $e(r,[{key:"debug",value:function(){var n;if(!r.disabled){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];(n=console).debug.apply(n,[this._prefix].concat(e))}}},{key:"log",value:function(){var n;if(!r.disabled){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];(n=console).log.apply(n,[this._prefix].concat(e))}}},{key:"warn",value:function(){var n;if(!r.disabled){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];(n=console).warn.apply(n,[this._prefix].concat(e))}}},{key:"error",value:function(){var n;if(!r.disabled){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];(n=console).error.apply(n,[this._prefix].concat(e))}}},{key:"table",value:function(){var n;r.disabled||(console.group(this._prefix),(n=console).table.apply(n,arguments),console.groupEnd())}}],[{key:"enable",value:function(){r.disabled=!1}},{key:"disable",value:function(){r.disabled=!0}}]),r}();Y(yu,"disabled",!0);var gu=function(){function r(s,n,t){Qe(this,r),this.videoTrack=s,this.audioTrack=n;var e=/Chrome\/([^.]+)/.exec(navigator.userAgent);this.forceFirstIDR=e&&Number(e[1])<50,this.log=new yu("FMP4Remuxer",t&&t.openLog?!t.openLog:!0)}return $e(r,[{key:"remux",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=this.videoTrack,i=this.audioTrack,a=e.exist(),o=i.exist(),l,u,c,d=[];n&&(t&&t.initMerge?(a&&d.push(this.videoTrack),o&&d.push(this.audioTrack),c=ke.initSegment(d)):(a&&(l=ke.initSegment([this.videoTrack])),o&&(u=ke.initSegment([this.audioTrack]))));var p,h;return a&&e.hasSample()&&(p=this._remuxVideo()),o&&i.hasSample()&&(h=this._remuxAudio()),e.samples=[],i.samples=[],{initSegment:c,videoInitSegment:l,audioInitSegment:u,videoSegment:p,audioSegment:h}}},{key:"_remuxVideo",value:function(){var n=this.videoTrack;this.forceFirstIDR&&(n.samples[0].flag={dependsOn:2,isNonSyncSample:0});var t=n.samples,e=0;t.forEach(function(m){e+=m.units.reduce(function(f,v){return f+v.byteLength},0),e+=m.units.length*4});for(var i=new Uint8Array(e),a=new DataView(i.buffer),o=function(f,v){v=t[l];var b=0;v.units.forEach(function(w){a.setUint32(f,w.byteLength),f+=4,i.set(w,f),f+=w.byteLength,b+=4+w.byteLength}),v.size=b,c=f,d=v},l=0,u=t.length,c=0,d;l<u;l++)o(c,d);var p=ke.mdat(i),h=ke.moof([n]);return on(h,p)}},{key:"_remuxAudio",value:function(){var n=this.audioTrack,t=new Uint8Array(n.samples.reduce(function(a,o){return a+o.size},0));n.samples.reduce(function(a,o){return t.set(o.data,a),a+o.size},0);var e=ke.mdat(t),i=ke.moof([n]);return on(i,e)}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset()}}]),r}();class Yt{static create(...s){return new this(...s)}mixIn(s){return Object.assign(this,s)}clone(){const s=new this.constructor;return Object.assign(s,this),s}}class Ut extends Yt{constructor(s=[],n=s.length*4){super();let t=s;if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){const e=t.byteLength,i=[];for(let a=0;a<e;a+=1)i[a>>>2]|=t[a]<<24-a%4*8;this.words=i,this.sigBytes=e}else this.words=s,this.sigBytes=n}static random(s){const n=[],t=e=>{let i=e,a=987654321;const o=4294967295;return()=>{a=36969*(a&65535)+(a>>16)&o,i=18e3*(i&65535)+(i>>16)&o;let l=(a<<16)+i&o;return l/=4294967296,l+=.5,l*(Math.random()>.5?1:-1)}};for(let e=0,i;e<s;e+=4){const a=t((i||Math.random())*4294967296);i=a()*987654071,n.push(a()*4294967296|0)}return new Ut(n,s)}toString(s=gl){return s.stringify(this)}concat(s){const n=this.words,t=s.words,e=this.sigBytes,i=s.sigBytes;if(this.clamp(),e%4)for(let a=0;a<i;a+=1){const o=t[a>>>2]>>>24-a%4*8&255;n[e+a>>>2]|=o<<24-(e+a)%4*8}else for(let a=0;a<i;a+=4)n[e+a>>>2]=t[a>>>2];return this.sigBytes+=i,this}clamp(){const{words:s,sigBytes:n}=this;s[n>>>2]&=4294967295<<32-n%4*8,s.length=Math.ceil(n/4)}clone(){const s=super.clone.call(this);return s.words=this.words.slice(0),s}}const gl={stringify(r){const{words:s,sigBytes:n}=r,t=[];for(let e=0;e<n;e+=1){const i=s[e>>>2]>>>24-e%4*8&255;t.push((i>>>4).toString(16)),t.push((i&15).toString(16))}return t.join("")},parse(r){const s=r.length,n=[];for(let t=0;t<s;t+=2)n[t>>>3]|=parseInt(r.substr(t,2),16)<<24-t%8*4;return new Ut(n,s/2)}},zd={stringify(r){const{words:s,sigBytes:n}=r,t=[];for(let e=0;e<n;e+=1){const i=s[e>>>2]>>>24-e%4*8&255;t.push(String.fromCharCode(i))}return t.join("")},parse(r){const s=r.length,n=[];for(let t=0;t<s;t+=1)n[t>>>2]|=(r.charCodeAt(t)&255)<<24-t%4*8;return new Ut(n,s)}},Df={stringify(r){try{return decodeURIComponent(escape(zd.stringify(r)))}catch{throw new Error("Malformed UTF-8 data")}},parse(r){return zd.parse(unescape(encodeURIComponent(r)))}};class Ef extends Yt{constructor(){super(),this._minBufferSize=0}reset(){this._data=new Ut,this._nDataBytes=0}_append(s){let n=s;typeof n=="string"&&(n=Df.parse(n)),this._data.concat(n),this._nDataBytes+=n.sigBytes}_process(s){let n;const{_data:t,blockSize:e}=this,i=t.words,a=t.sigBytes,o=e*4;let l=a/o;s?l=Math.ceil(l):l=Math.max((l|0)-this._minBufferSize,0);const u=l*e,c=Math.min(u*4,a);if(u){for(let d=0;d<u;d+=e)this._doProcessBlock(i,d);n=i.splice(0,u),t.sigBytes-=c}return new Ut(n,c)}clone(){const s=super.clone.call(this);return s._data=this._data.clone(),s}}class J_ extends Ef{constructor(s){super(),this.blockSize=512/32,this.cfg=Object.assign(new Yt,s),this.reset()}static _createHelper(s){return(n,t)=>new s(t).finalize(n)}static _createHmacHelper(s){return(n,t)=>new Q_(s,t).finalize(n)}reset(){super.reset.call(this),this._doReset()}update(s){return this._append(s),this._process(),this}finalize(s){return s&&this._append(s),this._doFinalize()}}class Q_ extends Yt{constructor(s,n){super();const t=new s;this._hasher=t;let e=n;typeof e=="string"&&(e=Df.parse(e));const i=t.blockSize,a=i*4;e.sigBytes>a&&(e=t.finalize(n)),e.clamp();const o=e.clone();this._oKey=o;const l=e.clone();this._iKey=l;const u=o.words,c=l.words;for(let d=0;d<i;d+=1)u[d]^=1549556828,c[d]^=909522486;o.sigBytes=a,l.sigBytes=a,this.reset()}reset(){const s=this._hasher;s.reset(),s.update(this._iKey)}update(s){return this._hasher.update(s),this}finalize(s){const n=this._hasher,t=n.finalize(s);return n.reset(),n.finalize(this._oKey.clone().concat(t))}}const $_=(r,s,n)=>{const t=[];let e=0;for(let i=0;i<s;i+=1)if(i%4){const a=n[r.charCodeAt(i-1)]<<i%4*2,o=n[r.charCodeAt(i)]>>>6-i%4*2,l=a|o;t[e>>>2]|=l<<24-e%4*8,e+=1}return Ut.create(t,e)},Bd={stringify(r){const{words:s,sigBytes:n}=r,t=this._map;r.clamp();const e=[];for(let a=0;a<n;a+=3){const o=s[a>>>2]>>>24-a%4*8&255,l=s[a+1>>>2]>>>24-(a+1)%4*8&255,u=s[a+2>>>2]>>>24-(a+2)%4*8&255,c=o<<16|l<<8|u;for(let d=0;d<4&&a+d*.75<n;d+=1)e.push(t.charAt(c>>>6*(3-d)&63))}const i=t.charAt(64);if(i)for(;e.length%4;)e.push(i);return e.join("")},parse(r){let s=r.length;const n=this._map;let t=this._reverseMap;if(!t){this._reverseMap=[],t=this._reverseMap;for(let i=0;i<n.length;i+=1)t[n.charCodeAt(i)]=i}const e=n.charAt(64);if(e){const i=r.indexOf(e);i!==-1&&(s=i)}return $_(r,s,t)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},re=[];for(let r=0;r<64;r+=1)re[r]=Math.abs(Math.sin(r+1))*4294967296|0;const Zt=(r,s,n,t,e,i,a)=>{const o=r+(s&n|~s&t)+e+a;return(o<<i|o>>>32-i)+s},Dt=(r,s,n,t,e,i,a)=>{const o=r+(s&t|n&~t)+e+a;return(o<<i|o>>>32-i)+s},Et=(r,s,n,t,e,i,a)=>{const o=r+(s^n^t)+e+a;return(o<<i|o>>>32-i)+s},xt=(r,s,n,t,e,i,a)=>{const o=r+(n^(s|~t))+e+a;return(o<<i|o>>>32-i)+s};class q_ extends J_{_doReset(){this._hash=new Ut([1732584193,4023233417,2562383102,271733878])}_doProcessBlock(s,n){const t=s;for(let P=0;P<16;P+=1){const I=n+P,V=s[I];t[I]=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360}const e=this._hash.words,i=t[n+0],a=t[n+1],o=t[n+2],l=t[n+3],u=t[n+4],c=t[n+5],d=t[n+6],p=t[n+7],h=t[n+8],m=t[n+9],f=t[n+10],v=t[n+11],b=t[n+12],w=t[n+13],C=t[n+14],T=t[n+15];let L=e[0],_=e[1],D=e[2],x=e[3];L=Zt(L,_,D,x,i,7,re[0]),x=Zt(x,L,_,D,a,12,re[1]),D=Zt(D,x,L,_,o,17,re[2]),_=Zt(_,D,x,L,l,22,re[3]),L=Zt(L,_,D,x,u,7,re[4]),x=Zt(x,L,_,D,c,12,re[5]),D=Zt(D,x,L,_,d,17,re[6]),_=Zt(_,D,x,L,p,22,re[7]),L=Zt(L,_,D,x,h,7,re[8]),x=Zt(x,L,_,D,m,12,re[9]),D=Zt(D,x,L,_,f,17,re[10]),_=Zt(_,D,x,L,v,22,re[11]),L=Zt(L,_,D,x,b,7,re[12]),x=Zt(x,L,_,D,w,12,re[13]),D=Zt(D,x,L,_,C,17,re[14]),_=Zt(_,D,x,L,T,22,re[15]),L=Dt(L,_,D,x,a,5,re[16]),x=Dt(x,L,_,D,d,9,re[17]),D=Dt(D,x,L,_,v,14,re[18]),_=Dt(_,D,x,L,i,20,re[19]),L=Dt(L,_,D,x,c,5,re[20]),x=Dt(x,L,_,D,f,9,re[21]),D=Dt(D,x,L,_,T,14,re[22]),_=Dt(_,D,x,L,u,20,re[23]),L=Dt(L,_,D,x,m,5,re[24]),x=Dt(x,L,_,D,C,9,re[25]),D=Dt(D,x,L,_,l,14,re[26]),_=Dt(_,D,x,L,h,20,re[27]),L=Dt(L,_,D,x,w,5,re[28]),x=Dt(x,L,_,D,o,9,re[29]),D=Dt(D,x,L,_,p,14,re[30]),_=Dt(_,D,x,L,b,20,re[31]),L=Et(L,_,D,x,c,4,re[32]),x=Et(x,L,_,D,h,11,re[33]),D=Et(D,x,L,_,v,16,re[34]),_=Et(_,D,x,L,C,23,re[35]),L=Et(L,_,D,x,a,4,re[36]),x=Et(x,L,_,D,u,11,re[37]),D=Et(D,x,L,_,p,16,re[38]),_=Et(_,D,x,L,f,23,re[39]),L=Et(L,_,D,x,w,4,re[40]),x=Et(x,L,_,D,i,11,re[41]),D=Et(D,x,L,_,l,16,re[42]),_=Et(_,D,x,L,d,23,re[43]),L=Et(L,_,D,x,m,4,re[44]),x=Et(x,L,_,D,b,11,re[45]),D=Et(D,x,L,_,T,16,re[46]),_=Et(_,D,x,L,o,23,re[47]),L=xt(L,_,D,x,i,6,re[48]),x=xt(x,L,_,D,p,10,re[49]),D=xt(D,x,L,_,C,15,re[50]),_=xt(_,D,x,L,c,21,re[51]),L=xt(L,_,D,x,b,6,re[52]),x=xt(x,L,_,D,l,10,re[53]),D=xt(D,x,L,_,f,15,re[54]),_=xt(_,D,x,L,a,21,re[55]),L=xt(L,_,D,x,h,6,re[56]),x=xt(x,L,_,D,T,10,re[57]),D=xt(D,x,L,_,d,15,re[58]),_=xt(_,D,x,L,w,21,re[59]),L=xt(L,_,D,x,u,6,re[60]),x=xt(x,L,_,D,v,10,re[61]),D=xt(D,x,L,_,o,15,re[62]),_=xt(_,D,x,L,m,21,re[63]),e[0]=e[0]+L|0,e[1]=e[1]+_|0,e[2]=e[2]+D|0,e[3]=e[3]+x|0}_doFinalize(){const s=this._data,n=s.words,t=this._nDataBytes*8,e=s.sigBytes*8;n[e>>>5]|=128<<24-e%32;const i=Math.floor(t/4294967296),a=t;n[(e+64>>>9<<4)+15]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360,n[(e+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360,s.sigBytes=(n.length+1)*4,this._process();const o=this._hash,l=o.words;for(let u=0;u<4;u+=1){const c=l[u];l[u]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360}return o}clone(){const s=super.clone.call(this);return s._hash=this._hash.clone(),s}}class eZ extends Yt{constructor(s){super(),this.cfg=Object.assign(new Yt,{keySize:128/32,hasher:q_,iterations:1},s)}compute(s,n){let t;const{cfg:e}=this,i=e.hasher.create(),a=Ut.create(),o=a.words,{keySize:l,iterations:u}=e;for(;o.length<l;){t&&i.update(t),t=i.update(s).finalize(n),i.reset();for(let c=1;c<u;c+=1)t=i.finalize(t),i.reset();a.concat(t)}return a.sigBytes=l*4,a}}class As extends Ef{constructor(s,n,t){super(),this.cfg=Object.assign(new Yt,t),this._xformMode=s,this._key=n,this.reset()}static createEncryptor(s,n){return this.create(this._ENC_XFORM_MODE,s,n)}static createDecryptor(s,n){return this.create(this._DEC_XFORM_MODE,s,n)}static _createHelper(s){const n=t=>typeof t=="string"?If:Ii;return{encrypt(t,e,i){return n(e).encrypt(s,t,e,i)},decrypt(t,e,i){return n(e).decrypt(s,t,e,i)}}}reset(){super.reset.call(this),this._doReset()}process(s){return this._append(s),this._process()}finalize(s){return s&&this._append(s),this._doFinalize()}}As._ENC_XFORM_MODE=1;As._DEC_XFORM_MODE=2;As.keySize=128/32;As.ivSize=128/32;class xf extends Yt{constructor(s,n){super(),this._cipher=s,this._iv=n}static createEncryptor(s,n){return this.Encryptor.create(s,n)}static createDecryptor(s,n){return this.Decryptor.create(s,n)}}function Ff(r,s,n){const t=r;let e;const i=this._iv;i?(e=i,this._iv=void 0):e=this._prevBlock;for(let a=0;a<n;a+=1)t[s+a]^=e[a]}class Zs extends xf{}Zs.Encryptor=class extends Zs{processBlock(r,s){const n=this._cipher,{blockSize:t}=n;Ff.call(this,r,s,t),n.encryptBlock(r,s),this._prevBlock=r.slice(s,s+t)}};Zs.Decryptor=class extends Zs{processBlock(r,s){const n=this._cipher,{blockSize:t}=n,e=r.slice(s,s+t);n.decryptBlock(r,s),Ff.call(this,r,s,t),this._prevBlock=e}};const tZ={pad(r,s){const n=s*4,t=n-r.sigBytes%n,e=t<<24|t<<16|t<<8|t,i=[];for(let o=0;o<t;o+=4)i.push(e);const a=Ut.create(i,t);r.concat(a)},unpad(r){const s=r,n=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=n}};class Rf extends As{constructor(s,n,t){super(s,n,Object.assign({mode:Zs,padding:tZ},t)),this.blockSize=128/32}reset(){let s;super.reset.call(this);const{cfg:n}=this,{iv:t,mode:e}=n;this._xformMode===this.constructor._ENC_XFORM_MODE?s=e.createEncryptor:(s=e.createDecryptor,this._minBufferSize=1),this._mode=s.call(e,this,t&&t.words),this._mode.__creator=s}_doProcessBlock(s,n){this._mode.processBlock(s,n)}_doFinalize(){let s;const{padding:n}=this.cfg;return this._xformMode===this.constructor._ENC_XFORM_MODE?(n.pad(this._data,this.blockSize),s=this._process(!0)):(s=this._process(!0),n.unpad(s)),s}}class lo extends Yt{constructor(s){super(),this.mixIn(s)}toString(s){return(s||this.formatter).stringify(this)}}const nZ={stringify(r){let s;const{ciphertext:n,salt:t}=r;return t?s=Ut.create([1398893684,1701076831]).concat(t).concat(n):s=n,s.toString(Bd)},parse(r){let s;const n=Bd.parse(r),t=n.words;return t[0]===1398893684&&t[1]===1701076831&&(s=Ut.create(t.slice(2,4)),t.splice(0,4),n.sigBytes-=16),lo.create({ciphertext:n,salt:s})}};class Ii extends Yt{static encrypt(s,n,t,e){const i=Object.assign(new Yt,this.cfg,e),a=s.createEncryptor(t,i),o=a.finalize(n),l=a.cfg;return lo.create({ciphertext:o,key:t,iv:l.iv,algorithm:s,mode:l.mode,padding:l.padding,blockSize:a.blockSize,formatter:i.format})}static decrypt(s,n,t,e){let i=n;const a=Object.assign(new Yt,this.cfg,e);return i=this._parse(i,a.format),s.createDecryptor(t,a).finalize(i.ciphertext)}static _parse(s,n){return typeof s=="string"?n.parse(s,this):s}}Ii.cfg=Object.assign(new Yt,{format:nZ});const rZ={execute(r,s,n,t){let e=t;e||(e=Ut.random(64/8));const i=eZ.create({keySize:s+n}).compute(r,e),a=Ut.create(i.words.slice(s),n*4);return i.sigBytes=s*4,lo.create({key:i,iv:a,salt:e})}};class If extends Ii{static encrypt(s,n,t,e){const i=Object.assign(new Yt,this.cfg,e),a=i.kdf.execute(t,s.keySize,s.ivSize);i.iv=a.iv;const o=Ii.encrypt.call(this,s,n,a.key,i);return o.mixIn(a),o}static decrypt(s,n,t,e){let i=n;const a=Object.assign(new Yt,this.cfg,e);i=this._parse(i,a.format);const o=a.kdf.execute(t,s.keySize,s.ivSize,i.salt);return a.iv=o.iv,Ii.decrypt.call(this,s,i,o.key,a)}}If.cfg=Object.assign(Ii.cfg,{kdf:rZ});const Bt=[],Pf=[],Mf=[],Xf=[],Gf=[],Wf=[],bl=[],Sl=[],wl=[],Cl=[],Dn=[];for(let r=0;r<256;r+=1)r<128?Dn[r]=r<<1:Dn[r]=r<<1^283;let Zn=0,ir=0;for(let r=0;r<256;r+=1){let s=ir^ir<<1^ir<<2^ir<<3^ir<<4;s=s>>>8^s&255^99,Bt[Zn]=s,Pf[s]=Zn;const n=Dn[Zn],t=Dn[n],e=Dn[t];let i=Dn[s]*257^s*16843008;Mf[Zn]=i<<24|i>>>8,Xf[Zn]=i<<16|i>>>16,Gf[Zn]=i<<8|i>>>24,Wf[Zn]=i,i=e*16843009^t*65537^n*257^Zn*16843008,bl[s]=i<<24|i>>>8,Sl[s]=i<<16|i>>>16,wl[s]=i<<8|i>>>24,Cl[s]=i,Zn?(Zn=n^Dn[Dn[Dn[e^n]]],ir^=Dn[Dn[ir]]):(ir=1,Zn=ir)}const iZ=[0,1,2,4,8,16,32,64,128,27,54];class Vf extends Rf{_doReset(){let s;if(this._nRounds&&this._keyPriorReset===this._key)return;this._keyPriorReset=this._key;const n=this._keyPriorReset,t=n.words,e=n.sigBytes/4;this._nRounds=e+6;const a=(this._nRounds+1)*4;this._keySchedule=[];const o=this._keySchedule;for(let u=0;u<a;u+=1)u<e?o[u]=t[u]:(s=o[u-1],u%e?e>6&&u%e===4&&(s=Bt[s>>>24]<<24|Bt[s>>>16&255]<<16|Bt[s>>>8&255]<<8|Bt[s&255]):(s=s<<8|s>>>24,s=Bt[s>>>24]<<24|Bt[s>>>16&255]<<16|Bt[s>>>8&255]<<8|Bt[s&255],s^=iZ[u/e|0]<<24),o[u]=o[u-e]^s);this._invKeySchedule=[];const l=this._invKeySchedule;for(let u=0;u<a;u+=1){const c=a-u;u%4?s=o[c]:s=o[c-4],u<4||c<=4?l[u]=s:l[u]=bl[Bt[s>>>24]]^Sl[Bt[s>>>16&255]]^wl[Bt[s>>>8&255]]^Cl[Bt[s&255]]}}encryptBlock(s,n){this._doCryptBlock(s,n,this._keySchedule,Mf,Xf,Gf,Wf,Bt)}decryptBlock(s,n){const t=s;let e=t[n+1];t[n+1]=t[n+3],t[n+3]=e,this._doCryptBlock(t,n,this._invKeySchedule,bl,Sl,wl,Cl,Pf),e=t[n+1],t[n+1]=t[n+3],t[n+3]=e}_doCryptBlock(s,n,t,e,i,a,o,l){const u=s,c=this._nRounds;let d=u[n]^t[0],p=u[n+1]^t[1],h=u[n+2]^t[2],m=u[n+3]^t[3],f=4;for(let T=1;T<c;T+=1){const L=e[d>>>24]^i[p>>>16&255]^a[h>>>8&255]^o[m&255]^t[f];f+=1;const _=e[p>>>24]^i[h>>>16&255]^a[m>>>8&255]^o[d&255]^t[f];f+=1;const D=e[h>>>24]^i[m>>>16&255]^a[d>>>8&255]^o[p&255]^t[f];f+=1;const x=e[m>>>24]^i[d>>>16&255]^a[p>>>8&255]^o[h&255]^t[f];f+=1,d=L,p=_,h=D,m=x}const v=(l[d>>>24]<<24|l[p>>>16&255]<<16|l[h>>>8&255]<<8|l[m&255])^t[f];f+=1;const b=(l[p>>>24]<<24|l[h>>>16&255]<<16|l[m>>>8&255]<<8|l[d&255])^t[f];f+=1;const w=(l[h>>>24]<<24|l[m>>>16&255]<<16|l[d>>>8&255]<<8|l[p&255])^t[f];f+=1;const C=(l[m>>>24]<<24|l[d>>>16&255]<<16|l[p>>>8&255]<<8|l[h&255])^t[f];f+=1,u[n]=v,u[n+1]=b,u[n+2]=w,u[n+3]=C}}Vf.keySize=256/32;const sZ=Rf._createHelper(Vf);class Ds extends xf{}Ds.Encryptor=class extends Ds{processBlock(r,s){const n=r,t=this._cipher,{blockSize:e}=t,i=this._iv;let a=this._counter;i&&(this._counter=i.slice(0),a=this._counter,this._iv=void 0);const o=a.slice(0);t.encryptBlock(o,0),a[e-1]=a[e-1]+1|0;for(let l=0;l<e;l+=1)n[s+l]^=o[l]}};Ds.Decryptor=Ds.Encryptor;const aZ={pad(){},unpad(){}};var pa={decryptWordArray:function(s,n,t){var e=gl.parse(n),i=gl.parse(N_(t)),a=Ut.create(new Uint8Array(s)),o=sZ.decrypt(lo.create({ciphertext:a}),e,{iv:i,mode:Ds,padding:aZ});return pa.wordArrayToUint8Array(o)},wordArrayToUint8Array:function(s){for(var n=s.sigBytes,t=s.words,e=new Uint8Array(n),i=0,a=0;i!==n;){var o=t[a++];if(e[i++]=(o&4278190080)>>>24,i===n||(e[i++]=(o&16711680)>>>16,i===n)||(e[i++]=(o&65280)>>>8,i===n))break;e[i++]=o&255}return e},decoderAESCTRData:function(s,n,t){if(s.videoSenc){var e=s.kidValue,i=s.videoSenc;s.samples.forEach(function(l,u){var c=i[u],d=l.data,p=[],h=[],m=c.InitializationVector;if(c.subsamples&&c.subsamples.length)c.subsamples.forEach(function(C){var T=C.BytesOfClearData+C.BytesOfProtectedData,L=d.slice(0,T);p.push(L.slice(0,C.BytesOfClearData)),h.push(L.slice(C.BytesOfClearData)),d=d.slice(T)});else{var f=l.size;p.push(d.slice(0,0)),h.push(d.slice(0,f)),d=d.slice(f)}var v=new wt;v.write.apply(v,h);var b=t?t(v.buffer,e,m):pa.decryptWordArray(v.buffer,e,m),w=new wt;p.forEach(function(C,T){var L=h[T].length,_=b.slice(0,L);w.write(C),w.write(_),b=b.slice(L)}),s.samples[u].data=w.buffer})}if(n.audioSenc){var a=n.kidValue,o=n.audioSenc;n.samples.forEach(function(l,u){var c=o[u],d=t?t(l.data,a,c.InitializationVector):pa.decryptWordArray(l.data,a,c.InitializationVector);n.samples[u].data=d})}}},jd=20,oZ=function(){function r(s,n,t,e){var i=this;Qe(this,r),Y(this,"_videoSamples",[]),Y(this,"_audioSamples",[]),Y(this,"_lastRemainBuffer",[]),Y(this,"_lastRemainBufferStartPos",0),this.videoTrack=new io,this.audioTrack=new so,this.metadataTrack=t||new ao,this.log=new yu("MP4Demuxer",e&&e.openLog?!e.openLog:!0),s&&s.forEach(function(a){var o;(o=i._videoSamples).push.apply(o,Wt(a.frames))}),n&&n.forEach(function(a){var o;(o=i._audioSamples).push.apply(o,Wt(a.frames))})}return $e(r,[{key:"parseSamples",value:function(n){if(!n)throw new Error("moov is required");if(!this.videoTrack.codec&&!this.audioTrack.codec&&(Ye.moovToTrack(n,this.videoTrack,this.audioTrack),this.videoSenc=this.videoTrack.videoSenc,this.audioSenc=this.audioTrack.audioSenc),!this._audioSamples.length&&!this._videoSamples.length){var t=Ye.moovToSamples(n);if(!t)throw new Error("cannot parse samples from moov box");this._videoSamples=t.videoSamples||[],this._audioSamples=t.audioSamples||[]}}},{key:"demux",value:function(n,t,e,i,a){this.parseSamples(a);var o=this.videoTrack,l=this.audioTrack;o.samples=[],l.samples=[];var u,c,d;if(e){for(var p,h=0,m=e[0],f=e[1];m<=f;m++){if(u=this._videoSamples[m],!u)throw new Error("cannot found video frame #".concat(m));d=u.offset-t,c=n.subarray(d,d+u.size),p=new _s(u.pts||u.dts,u.dts),p.duration=u.duration,p.gopId=u.gopId,u.keyframe&&p.setToKeyframe();for(var v=0,b=c.length-1;v<b;)h=q(c,v),v+=4,p.units.push(c.subarray(v,v+h)),v+=h;o.samples.push(p)}o.baseMediaDecodeTime=o.samples[0].dts}if(i){for(var w=i[0],C=i[1];w<=C;w++){if(u=this._audioSamples[w],!u)throw new Error("cannot found video frame #".concat(w));d=u.offset-t,c=n.subarray(d,d+u.size),l.samples.push(new Cr(u.dts,c,u.duration))}l.baseMediaDecodeTime=l.samples[0].dts}return{videoTrack:o,audioTrack:l,metadataTrack:this.metadataTrack}}},{key:"demuxPart",value:function(n,t,e,i,a,o,l,u){if(this.parseSamples(a),this.videoTrack.useEME=o,this.audioTrack.useEME=o,this._lastRemainBuffer&&this._lastRemainBuffer.byteLength>0&&t>this._lastRemainBufferStartPos&&t<=this._lastRemainBufferStartPos+this._lastRemainBuffer.byteLength)for(var c=0;c<jd;)try{var d=this._lastRemainBuffer.subarray(0,t-this._lastRemainBufferStartPos),p=new Uint8Array(n.byteLength+d.byteLength);p.set(d,0),p.set(new Uint8Array(n),d.byteLength),n=p,t-=d.byteLength,this._lastRemainBuffer=null,this._lastRemainBufferStartPos=0;break}catch(y){if(c<jd)c++;else throw new Error("new Uint8Array error:,"+y.errorMessage)}var h=this.videoTrack,m=this.audioTrack;h.samples=[],m.samples=[],h.videoSenc=null,m.audioSenc=null;var f,v,b,w=0,C=0;if(this._videoSamples.length>0&&e.length>0){for(var T,L=n.byteLength+t,_=e[0];_<=e[1];_++){if(f=this._videoSamples[_],!f)throw new Error("cannot found video frame #".concat(_));f.offset>=t&&f.offset+f.size<=L&&(b=f.offset-t,w=b+f.size,v=n.subarray(b,w),T=new _s(f.pts||f.dts,f.dts),T.duration=f.duration,T.gopId=f.gopId,T.sampleOffset=f.index,f.keyframe&&T.setToKeyframe(),T.data=v,T.size=f.size,h.samples.push(T))}h.samples.length>0&&(h.gopId=h.samples[0].gopId,h.baseMediaDecodeTime=h.samples[0].dts,h.startPts=h.samples[0].pts/h.timescale,h.endPts=h.samples[h.samples.length-1].pts/h.timescale,this.videoSenc&&(h.videoSenc=this.videoSenc.slice(h.samples[0].sampleOffset,h.samples[0].sampleOffset+h.samples.length),h.kidValue=l))}if(this._audioSamples.length>0&&i.length>0){for(var D=i[0];D<=i[1];D++){if(f=this._audioSamples[D],!f)throw new Error("cannot found video frame #".concat(D));f.offset>=t&&f.offset+f.size<=n.byteLength+t&&(b=f.offset-t,C=b+f.size,v=n.subarray(b,C),m.samples.push(new Cr(f.dts,v,f.duration,f.index)))}m.samples.length>0&&(m.gopId=m.samples[0].gopId||h.gopId,m.baseMediaDecodeTime=m.samples[0].dts,m.startPts=m.samples[0].pts/m.timescale,m.endPts=m.samples[m.samples.length-1].pts/m.timescale,this.audioSenc&&(m.audioSenc=this.audioSenc.slice(m.samples[0].sampleOffset,m.samples[0].sampleOffset+m.samples.length),m.kidValue=l))}this.decoderData(h,m,u);for(var x=0,P=0;P<h.samples.length;P++)for(var I=0,V=h.samples[P].data,g=V.length-1;I<g;)x=q(V,I),I+=4,h.samples[P].units.push(V.subarray(I,I+x)),I+=x;return this._lastRemainBuffer=n.subarray(Math.max(w,C)),this._lastRemainBuffer.byteLength>0?this._lastRemainBufferStartPos=t+n.byteLength-this._lastRemainBuffer.byteLength:this._lastRemainBufferStartPos=0,{videoTrack:h,audioTrack:m,metadataTrack:this.metadataTrack}}},{key:"reset",value:function(){this._videoSamples=[],this._audioSamples=[],this._lastRemainBuffer=null,this._lastRemainBufferStartPos=0,this.videoTrack.reset(),this.audioTrack.reset(),this.metadataTrack.reset()}},{key:"decoderData",value:function(n,t,e){n.useEME||t.useEME||pa.decoderAESCTRData(n,t,e)}}],[{key:"probe",value:function(n){return Ye.probe(n)}}]),r}(),lZ=function(){function r(){bt(this,r);var s=window.crypto||window.msCrypto;this.subtle=s&&(s.subtle||s.webkitSubtle),this.externalDecryptor=null}return St(r,[{key:"destroy",value:function(){var n;(n=this.externalDecryptor)!==null&&n!==void 0&&n.destroy&&this.externalDecryptor.destroy()}},{key:"decrypt",value:function(n,t){if(!(!n&&!t)){var e=[];return n&&(e[0]=this._decryptSegment(n)),t&&(e[1]=this._decryptSegment(t)),Promise.all(e)}}},{key:"_decryptSegment",value:function(){var s=Oe(ie().mark(function t(e){var i;return ie().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(i=e.data,!e.key){o.next=5;break}return o.next=4,this._decryptData(e.data,e.key,e.keyIv);case 4:i=o.sent;case 5:if(e.map){o.next=7;break}return o.abrupt("return",i);case 7:return o.abrupt("return",ni(e.map,i));case 8:case"end":return o.stop()}},t,this)}));function n(t){return s.apply(this,arguments)}return n}()},{key:"_decryptData",value:function(){var s=Oe(ie().mark(function t(e,i,a){var o;return ie().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!this.externalDecryptor){u.next=6;break}return u.next=3,this.externalDecryptor.decrypt(e,i,a);case 3:return u.abrupt("return",u.sent);case 6:if(this.subtle){u.next=8;break}throw new Error("crypto is not defined");case 8:return u.next=10,this.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt","decrypt"]);case 10:return o=u.sent,u.t0=Uint8Array,u.next=14,this.subtle.decrypt({name:"AES-CBC",iv:a},o,e);case 14:return u.t1=u.sent,u.abrupt("return",new u.t0(u.t1));case 16:case"end":return u.stop()}},t,this)}));function n(t,e,i){return s.apply(this,arguments)}return n}()}]),r}(),Fe=Be(Be({},j),{},{STREAM_PARSED:"core.streamparsed",NO_AUDIO_TRACK:"core.noaudiotrack",SUBTITLE_SEGMENTS:"core.subtitlesegments",SUBTITLE_PLAYLIST:"core.subtitleplaylist",SEI_PAYLOAD_TIME:"core.seipayloadtime",APPEND_COST:"core.appendcost"}),ra=new Kt("Transmuxer"),Jd=function(){function r(s,n,t){bt(this,r),G(this,"_initSegmentId",""),this.hls=s,this._demuxer=n?new B_:new Zf,this._isMP4=n,t&&(this._remuxer=new gu(this._demuxer.videoTrack,this._demuxer.audioTrack))}return St(r,[{key:"transmux",value:function(n,t,e,i,a,o){var l=this._demuxer;try{this._isMP4?l.demux(n,t):l.demuxAndFix(ni(n,t),e,i,a)}catch(T){throw new it(De.DEMUX,De.SUB_TYPES.HLS,T)}var u=l.videoTrack,c=l.audioTrack,d=l.metadataTrack,p="".concat(u.codec,"/").concat(u.width,"/").concat(u.height,"/").concat(c.codec,"/").concat(c.config);if(p!==this._initSegmentId&&(this._initSegmentId=p,o=!0),this._fireEvents(u,c,d,e||o),this.hls.emit(Fe.DEMUXED_TRACK,{videoTrack:u,audioTrack:c}),this._remuxer)try{var h=this._remuxer.remux(o),m=h.videoInitSegment,f=h.videoSegment,v=h.audioInitSegment,b=h.audioSegment,w=ni(m,f),C=ni(v,b);return[w?{codec:u.codec,data:w}:void 0,C?{codec:c.codec,data:C}:void 0]}catch(T){throw new it(De.REMUX,De.SUB_TYPES.FMP4,T)}else return[u,c]}},{key:"_fireEvents",value:function(n,t,e,i){var a=this;ra.debug(n.samples,t.samples),i&&(n.exist()&&this.hls.emit(Fe.METADATA_PARSED,{type:"video",track:n,meta:{codec:n.codec,timescale:n.timescale,width:n.width,height:n.height,sarRatio:n.sarRatio,baseDts:n.baseDts}}),t.exist()&&this.hls.emit(Fe.METADATA_PARSED,{type:"audio",track:t,meta:{codec:t.codec,channelCount:t.channelCount,sampleRate:t.sampleRate,timescale:t.timescale,baseDts:t.baseDts}}),ra.debug("discontinuity",n,t)),n.warnings.forEach(function(o){var l;switch(o.type){case ot.LARGE_AV_SHIFT:l=Fe.LARGE_AV_FIRST_FRAME_GAP_DETECT;break;case ot.LARGE_VIDEO_GAP:l=Fe.LARGE_VIDEO_DTS_GAP_DETECT;break;case ot.LARGE_VIDEO_GAP_BETWEEN_CHUNK:l=Fe.MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT;break}l&&a.hls.emit(Fe.STREAM_EXCEPTION,Be(Be({},o),{},{type:l})),ra.warn("video exception",o)}),t.warnings.forEach(function(o){var l;switch(o.type){case ot.LARGE_AUDIO_GAP:l=Fe.LARGE_AUDIO_DTS_GAP_DETECT;break;case ot.AUDIO_FILLED:l=Fe.AUDIO_GAP_DETECT;break;case ot.AUDIO_DROPPED:l=Fe.AUDIO_OVERLAP_DETECT;break}l&&a.hls.emit(Fe.STREAM_EXCEPTION,Be(Be({},o),{},{type:l})),ra.warn("audio exception",o)}),n.samples.forEach(function(o){o.keyframe&&a.hls.emit(Fe.KEYFRAME,{pts:o.pts})}),e.seiSamples.forEach(function(o){a.hls.emit(Fe.SEI,Be(Be({},o),{},{originPts:o.originPts/90,sei:{code:o.data.type,content:o.data.payload,dts:o.pts}}))})}}]),r}(),Qd=new Kt("BufferService"),uZ=function(){function r(s){bt(this,r),G(this,"_decryptor",new lZ),G(this,"_transmuxer",null),G(this,"_mse",null),G(this,"_softVideo",null),G(this,"_sourceCreated",!1),G(this,"_needInitSegment",!0),G(this,"_directAppend",!1),this.hls=s,s.config.softDecode?this._softVideo=s.media:(this._mse=new lt,s.config.url&&this._mse.bindMedia(s.media)),s.config.decryptor&&(this._decryptor.externalDecryptor=s.config.decryptor)}return St(r,[{key:"baseDts",get:function(){var n,t,e;return(n=this._transmuxer)===null||n===void 0||(t=n._demuxer)===null||t===void 0||(e=t._fixer)===null||e===void 0?void 0:e._baseDts}},{key:"nbSb",get:function(){var n;return(n=this._mse)!==null&&n!==void 0&&n._sourceBuffer?Object.keys(this._mse._sourceBuffer).length:0}},{key:"msIsOpend",get:function(){var n;return(n=this._mse)===null||n===void 0?void 0:n.isOpened}},{key:"updateDuration",value:function(){var s=Oe(ie().mark(function t(e){return ie().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(Qd.debug("update duration",e),!this._mse){a.next=9;break}if(this._mse.isOpened){a.next=5;break}return a.next=5,this._mse.open();case 5:return a.next=7,this._mse.updateDuration(e);case 7:a.next=10;break;case 9:this._softVideo&&(this._softVideo.duration=e);case 10:case"end":return a.stop()}},t,this)}));function n(t){return s.apply(this,arguments)}return n}()},{key:"createSource",value:function(n,t,e,i){if(!this._sourceCreated){var a=n||t;if(a){if(Zf.probe(a))this._transmuxer||(this._transmuxer=new Jd(this.hls,!1,!this._softVideo));else if(Ye.probe(a))if(this._softVideo)this._transmuxer||(this._transmuxer=new Jd(this.hls,!0));else{this._directAppend=!0;var o=!1;n&&!e&&Ye.findBox(n,["moov","trak"]).forEach(function(l){var u=Ye.findBox(l.data,["trak","mdia","minf","stbl","stsd"])[0];if(u){var c=Ye.stsd(u).entries[0];if(c){if(c.hvcC)e=c.hvcC.codec||"hev1.1.6.L93.B0";else if(c.avcC)e=c.avcC.codec;else if(c.sampleRate||c.esds){var d;i=((d=c.esds)===null||d===void 0?void 0:d.codec)||"mp4a.40.2",o=!0}}}}),t&&!i&&Ye.findBox(t,["moov","trak","mdia","minf","stbl","stsd"]).forEach(function(l){var u=Ye.stsd(l).entries[0];u&&u.esds&&(i=u.esds.codec)}),n&&!e&&(e="avc1.42e01e"),t&&!i&&(i="mp4a.40.2"),o&&(e+=", ".concat(i),i=""),this._createMseSource(e,i)}else throw new it(De.OTHER,null,null,null,"unsupported stream");this._softVideo&&(this._sourceCreated=!0)}}}},{key:"appendBuffer",value:function(){var s=Oe(ie().mark(function t(e,i,a,o,l,u,c){var d,p,h,m,f,v,b,w,C;return ie().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!(!(a!=null&&a.length)&&!(o!=null&&o.length))){L.next=2;break}return L.abrupt("return");case 2:if(!this._directAppend){L.next=7;break}return d=[],a&&d.push(this._mse.append(lt.VIDEO,a)),o&&d.push(this._mse.append(lt.AUDIO,o)),L.abrupt("return",Promise.all(d));case 7:if(p=this._needInitSegment||l,h=this._transmuxer.transmux(a,o,l,u,c,this._needInitSegment||l),m=wr(h,2),f=m[0],v=m[1],o&&i&&(i==null||i.setTrackExist(!1,!0)),o&&e&&(e==null||e.setTrackExist(!0,!1)),i||e==null||e.setTrackExist(!!f,!!v),f&&!v&&this.hls.emit(Fe.NO_AUDIO_TRACK),!this._softVideo){L.next=18;break}this._softVideo.appendBuffer(f,v),this._needInitSegment=!1,L.next=28;break;case 18:if(!this._mse){L.next=28;break}return b=!this._sourceCreated,b&&this._createMseSource(f==null?void 0:f.codec,v==null?void 0:v.codec),this._needInitSegment=!1,w=this._mse,C=[],p&&!b&&this._handleCodecChange(f,v),f&&C.push(w.append(lt.VIDEO,f.data)),v&&C.push(w.append(lt.AUDIO,v.data)),L.abrupt("return",Promise.all(C));case 28:case"end":return L.stop()}},t,this)}));function n(t,e,i,a,o,l,u){return s.apply(this,arguments)}return n}()},{key:"removeBuffer",value:function(){var s=Oe(ie().mark(function t(){var e=this,i,a,o,l=arguments;return ie().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(i=l.length>0&&l[0]!==void 0?l[0]:0,a=l.length>1&&l[1]!==void 0?l[1]:1/0,o=this.hls.media,!(!this._mse||!o||i<0||a<i||i>=this._mse.duration)){c.next=5;break}return c.abrupt("return");case 5:return c.abrupt("return",this._mse.clearBuffer(i,a).then(function(){return e.hls.emit(j.REMOVE_BUFFER,{start:i,end:a,removeEnd:a})}));case 6:case"end":return c.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"evictBuffer",value:function(){var s=Oe(ie().mark(function t(e){var i,a,o,l;return ie().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(i=this.hls.media,!(!this._mse||!i||!e||e<0)){c.next=3;break}return c.abrupt("return");case 3:if(a=i.currentTime,o=a-e,!(o<=0)){c.next=7;break}return c.abrupt("return");case 7:if(l=ut.start(ut.get(i)),!(l+1>=o)){c.next=10;break}return c.abrupt("return");case 10:return c.abrupt("return",this.removeBuffer(0,o));case 11:case"end":return c.stop()}},t,this)}));function n(t){return s.apply(this,arguments)}return n}()},{key:"clearAllBuffer",value:function(){var s=Oe(ie().mark(function t(){return ie().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!this._mse){i.next=2;break}return i.abrupt("return",this._mse.clearAllBuffer());case 2:case"end":return i.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"decryptBuffer",value:function(n,t){return this._decryptor.decrypt(n,t)}},{key:"reset",value:function(){var s=Oe(ie().mark(function t(){var e,i=arguments;return ie().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(e=i.length>0&&i[0]!==void 0?i[0]:!1,!(this._mse&&!e)){o.next=8;break}return this._transmuxer=null,this._sourceCreated=!1,o.next=6,this._mse.unbindMedia();case 6:return o.next=8,this._mse.bindMedia(this.hls.media);case 8:this._needInitSegment=!0,this._directAppend=!1;case 10:case"end":return o.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"endOfStream",value:function(){var s=Oe(ie().mark(function t(){return ie().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!this._mse){i.next=5;break}if(!this._sourceCreated){i.next=5;break}return i.next=4,this._mse.endOfStream();case 4:this.hls.emit(j.BUFFEREOS);case 5:this._softVideo&&this._softVideo.endOfStream();case 6:case"end":return i.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"setLiveSeekableRange",value:function(){var s=Oe(ie().mark(function t(e,i){return ie().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:this._mse&&this._mse.setLiveSeekableRange(e,i);case 1:case"end":return o.stop()}},t,this)}));function n(t,e){return s.apply(this,arguments)}return n}()},{key:"destroy",value:function(){var s=Oe(ie().mark(function t(){var e;return ie().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if((e=this._decryptor)===null||e===void 0||e.destroy(),!this._mse){a.next=4;break}return a.next=4,this._mse.unbindMedia();case 4:this._decryptor=null,this._mse=null,this._softVideo=null;case 7:case"end":return a.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"_createMseSource",value:function(n,t){Qd.debug("create mse source, videoCodec=".concat(n,", audioCodec=").concat(t));var e=this._mse;e&&(n&&(e.createSource(lt.VIDEO,"video/mp4;codecs=".concat(n)),this._sourceCreated=!0),t&&(e.createSource(lt.AUDIO,"audio/mp4;codecs=".concat(t)),this._sourceCreated=!0),this.hls.emit(j.SOURCEBUFFER_CREATED))}},{key:"_handleCodecChange",value:function(n,t){var e=this._mse,i=[{type:lt.VIDEO,codecs:n==null?void 0:n.codec},{type:lt.AUDIO,codecs:t==null?void 0:t.codec}];i.filter(function(a){return!!a.codecs}).forEach(function(a){var o=a.type,l=a.codecs,u=e.getSourceBuffer(o);if(u){var c=l.split(",")[0];new RegExp(c,"ig").test(u.mimeType)||e.changeType(o,"".concat(o,"/mp4;codecs=").concat(l))}})}},{key:"seamlessSwitch",value:function(){this._needInitSegment=!0}}]),r}();function cZ(r){var s=(r==null?void 0:r.media)||document.createElement("video");return Be(Be({maxPlaylistSize:50,retryCount:3,retryDelay:1e3,pollRetryCount:2,loadTimeout:1e4,preloadTime:30,softDecode:!1,bufferBehind:10,maxJumpDistance:3,startTime:0,targetLatency:10,maxLatency:20,allowedStreamTrackChange:!0,seiInTime:!1,manifest:""},r),{},{media:s})}var dZ=St(function r(){bt(this,r),G(this,"version",0),G(this,"streams",[]),G(this,"isMaster",!0)}),Af={Audio:"AUDIO",Video:"VIDEO",SubTitle:"SUBTITLE",ClosedCaptions:"CLOSED-CAPTIONS"},bu=St(function r(){bt(this,r),G(this,"id",0),G(this,"url",""),G(this,"default",!1),G(this,"autoSelect",!1),G(this,"forced",!1),G(this,"group",""),G(this,"name",""),G(this,"lang",""),G(this,"segments",[]),G(this,"endSN",0)}),pZ=function(r){no(n,r);var s=ro(n);function n(){var t;bt(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),G(Ze(t),"mediaType",Af.Audio),G(Ze(t),"channels",0),t}return St(n)}(bu),hZ=function(r){no(n,r);var s=ro(n);function n(){var t;bt(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),G(Ze(t),"mediaType",Af.SubTitle),t}return St(n)}(bu),fZ=St(function r(){bt(this,r),G(this,"id",0),G(this,"bitrate",0),G(this,"width",0),G(this,"height",0),G(this,"name",""),G(this,"url",""),G(this,"audioCodec",""),G(this,"videoCodec",""),G(this,"textCodec",""),G(this,"audioGroup",""),G(this,"audioStreams",[]),G(this,"subtitleStreams",[]),G(this,"closedCaptionsStream",[])}),mZ=St(function r(){bt(this,r),G(this,"version",0),G(this,"url",""),G(this,"type",""),G(this,"startCC",0),G(this,"endCC",0),G(this,"startSN",0),G(this,"endSN",0),G(this,"totalDuration",0),G(this,"targetDuration",0),G(this,"live",!0),G(this,"segments",[])}),Ho=function(){function r(){bt(this,r),G(this,"sn",0),G(this,"cc",0),G(this,"url",""),G(this,"title",""),G(this,"start",0),G(this,"duration",0),G(this,"key",null),G(this,"byteRange",null),G(this,"isInitSegment",!1),G(this,"initSegment",null),G(this,"isLast",!1),G(this,"hasAudio",!1),G(this,"hasVideo",!1)}return St(r,[{key:"end",get:function(){return this.start+this.duration}},{key:"setTrackExist",value:function(n,t){this.hasVideo=n,this.hasAudio=t}},{key:"setByteRange",value:function(n,t){this.byteRange=[0];var e=n.split("@");e.length===1&&t&&t.byteRange?(this.byteRange[0]=t.byteRange[1]||0,this.byteRange[0]&&(this.byteRange[0]+=1)):this.byteRange[0]=parseInt(e[1]),this.byteRange[1]=this.byteRange[0]+parseInt(e[0])-1}}]),r}(),vZ=function(){function r(s){bt(this,r),G(this,"method",""),G(this,"url",""),G(this,"iv",null),G(this,"keyFormat",""),G(this,"keyFormatVersions",""),s instanceof r&&(this.method=s.method,this.url=s.url,this.keyFormat=s.keyFormat,this.keyFormatVersions=s.keyFormatVersions,s.iv&&(this.iv=new Uint8Array(s.iv)))}return St(r,[{key:"clone",value:function(n){var t=new r(this);return n!=null&&t.setIVFromSN(n),t}},{key:"setIVFromSN",value:function(n){if(!this.iv&&this.method==="AES-128"&&typeof n=="number"&&this.url){this.iv=new Uint8Array(16);for(var t=12;t<16;t++)this.iv[t]=n>>8*(15-t)&255}}}]),r}(),yZ=/^#(EXT[^:]*)(?::(.*))?$/,$d=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g,gZ=/^(?:[a-zA-Z0-9+\-.]+:)?\/\//,bZ=/^((?:[a-zA-Z0-9+\-.]+:)?\/\/[^/?#]*)?([^?#]*\/)?/;function SZ(r){return r.split(/[\r\n]/).map(function(s){return s.trim()}).filter(Boolean)}function Nf(r){var s=r.match(yZ);if(!(!s||!s[1]))return[s[1].replace("EXT-X-",""),s[2]]}function Ma(r){for(var s={},n=$d.exec(r);n;)s[n[1]]=n[2]||n[3],n=$d.exec(r);return s}function ds(r,s){if(!s||!r||gZ.test(r))return r;var n=bZ.exec(s);return n?r[0]==="/"?n[1]+r:n[1]+n[2]+r:r}var wZ={audio:[/^mp4a/,/^vorbis$/,/^opus$/,/^flac$/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Ko(r,s){var n=wZ[r];if(!(!n||!s||!s.length)){for(var t=0;t<n.length;t++)for(var e=0;e<s.length;e++)if(n[t].test(s[e]))return s[e]}}function CZ(r,s){for(var n=new dZ,t=0,e,i=[],a=[];e=r[t++];){var o=Nf(e);if(o){var l=wr(o,2),u=l[0],c=l[1];if(u==="VERSION")n.version=parseInt(c);else if(u==="MEDIA"&&c){var d=Ma(c),p=void 0;switch(d.TYPE){case"AUDIO":p=new pZ;break;case"SUBTITLES":p=new hZ;break;default:p=new bu}p.url=ds(d.URI,s),p.default=d.DEFAULT==="YES",p.autoSelect=d.AUTOSELECT==="YES",p.group=d["GROUP-ID"],p.name=d.NAME,p.lang=d.LANGUAGE,d.CHANNELS&&(p.channels=Number(d.CHANNELS.split("/")[0]),Number.isNaN(p.channels)&&(p.channels=0)),d.TYPE==="AUDIO"&&d.URI&&i.push(p),d.TYPE==="SUBTITLES"&&a.push(p)}else if(u==="STREAM-INF"&&c){var h=new fZ,m=Ma(c);if(h.bitrate=parseInt(m["AVERAGE-BANDWIDTH"]||m.BANDWIDTH),h.name=m.NAME,h.url=ds(r[t++],s),m.RESOLUTION){var f=m.RESOLUTION.split("x"),v=wr(f,2),b=v[0],w=v[1];h.width=parseInt(b),h.height=parseInt(w)}if(m.CODECS){var C=m.CODECS.split(/[ ,]+/).filter(Boolean);h.videoCodec=Ko("video",C),h.audioCodec=Ko("audio",C),h.textCodec=Ko("text",C)}h.audioGroup=m.AUDIO,h.subtitleGroup=m.SUBTITLES,n.streams.push(h)}}}return n.streams.forEach(function(T,L){T.id=L}),i.length&&(i.forEach(function(T,L){T.id=L}),n.streams.forEach(function(T){T.audioGroup&&(T.audioStreams=i.filter(function(L){return L.group===T.audioGroup}))})),a.length&&(a.forEach(function(T,L){T.id=L}),n.streams.forEach(function(T){T.subtitleGroup&&(T.subtitleStreams=a.filter(function(L){return L.group===T.subtitleGroup}))})),n}function LZ(r,s){var n=new mZ;n.url=s;for(var t=new Ho,e=null,i=null,a=0,o=0,l=0,u=0,c,d=!1;(c=r[u++])&&!d;){if(c[0]!=="#"){t.sn=o,t.cc=l,t.url=ds(c,s),i&&(t.key=i.clone(o)),e&&(t.initSegment=e),n.segments.push(t),t=new Ho,o++;continue}var p=Nf(c);if(p){var h=wr(p,2),m=h[0],f=h[1];switch(m){case"VERSION":n.version=parseInt(f);break;case"PLAYLIST-TYPE":n.type=f==null?void 0:f.toUpperCase();break;case"TARGETDURATION":n.targetDuration=parseFloat(f);break;case"ENDLIST":{var v=n.segments[n.segments.length-1];v&&(v.isLast=!0),n.live=!1,d=!0}break;case"MEDIA-SEQUENCE":o=n.startSN=parseInt(f);break;case"DISCONTINUITY-SEQUENCE":l=n.startCC=parseInt(f);break;case"DISCONTINUITY":l++;break;case"BYTERANGE":t.setByteRange(f,n.segments[n.segments.length-1]);break;case"EXTINF":{var b=f.split(","),w=wr(b,2),C=w[0],T=w[1];t.start=a,t.duration=parseFloat(C),a+=t.duration,t.title=T}break;case"KEY":{var L=Ma(f);if(L.METHOD==="NONE"){i=null;break}if(L.METHOD!=="AES-128")throw new Error("encrypt ".concat(L.METHOD,"/").concat(L.KEYFORMAT," is not supported"));if(i=new vZ,i.method=L.METHOD,i.url=/^blob:/.test(L.URI)?L.URI:ds(L.URI,s),i.keyFormat=L.KEYFORMAT||"identity",i.keyFormatVersions=L.KEYFORMATVERSIONS,L.IV){var _=L.IV.slice(2);_=(_.length&1?"0":"")+_,i.iv=new Uint8Array(_.length/2);for(var D=0,x=_.length/2;D<x;D++)i.iv[D]=parseInt(_.slice(D*2,D*2+2),16)}}break;case"MAP":{var P=Ma(f);t.url=ds(P.URI,s),P.BYTERANGE&&t.setByteRange(P.BYTERANGE),t.isInitSegment=!0,t.sn=0,i&&(t.key=i.clone(0)),e=t,t=new Ho}break}}}n.segments=n.segments.filter(function(V){return V.duration!==0});var I=n.segments[n.segments.length-1];return I&&(n.endSN=I.sn),n.totalDuration=a,n.endCC=l,n}var ia=function(){function r(){bt(this,r)}return St(r,null,[{key:"parse",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(!n.includes("#EXTM3U"))throw new Error("Invalid m3u8 file");var e=SZ(n);return r.isMediaPlaylist(n)?LZ(e,t):CZ(e,t)}},{key:"isMediaPlaylist",value:function(n){return n.includes("#EXTINF:")||n.includes("#EXT-X-TARGETDURATION:")}}]),r}(),TZ=function(){function r(s){var n=this;bt(this,r),G(this,"_emitOnLoaded",function(l,u){var c=l.response,d=l.options,p=d||{},h=p.firstByteTime,m=p.startTime,f=p.endTime,v=p.contentLength,b=f-m;n.hls.emit(j.SPEED,{time:b,byteLength:v,url:u}),n.hls.emit(j.LOAD_COMPLETE,{url:u,elapsed:b||0}),n.hls.emit(j.TTFB,{url:u,responseUrl:c.url,elapsed:h-m}),n.hls.emit(j.LOAD_RESPONSE_HEADERS,{headers:c.headers,url:u})}),G(this,"_onLoaderRetry",function(l,u){n.hls.emit(Fe.LOAD_RETRY,{error:it.network(l),retryTime:u})}),this.hls=s,this._timer=null;var t=this.hls.config,e=t.retryCount,i=t.retryDelay,a=t.loadTimeout,o=t.fetchOptions;this._loader=new Wr(Be(Be({},o),{},{responseType:"text",retry:e,retryDelay:i,timeout:a,onRetryError:this._onLoaderRetry})),this._audioLoader=new Wr(Be(Be({},o),{},{responseType:"text",retry:e,retryDelay:i,timeout:a,onRetryError:this._onLoaderRetry})),this._subtitleLoader=new Wr(Be(Be({},o),{},{responseType:"text",retry:e,retryDelay:i,timeout:a,onRetryError:this._onLoaderRetry}))}return St(r,[{key:"load",value:function(){var s=Oe(ie().mark(function t(e,i,a){var o,l,u,c,d,p,h,m,f,v,b,w,C,T;return ie().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return o=[this._loader.load(e)],i&&o.push(this._audioLoader.load(i)),a&&o.push(this._subtitleLoader.load(a)),_.prev=3,_.next=6,Promise.all(o);case 6:if(d=_.sent,p=wr(d,3),h=p[0],m=p[1],f=p[2],h){_.next=13;break}return _.abrupt("return",[]);case 13:this._emitOnLoaded(h,e),l=h.data,i?(u=m==null?void 0:m.data,c=f==null?void 0:f.data,u&&this._emitOnLoaded(m,i),c&&this._emitOnLoaded(f,a)):(c=f==null?void 0:f.data,c&&this._emitOnLoaded(f,a)),_.next=21;break;case 18:throw _.prev=18,_.t0=_.catch(3),it.network(_.t0);case 21:if(v=this.hls.config.onPreM3U8Parse,_.prev=22,v&&(l=v(l)||l,u&&(u=v(u,!0)||u),c&&(c=v(c,!0)||c)),b=ia.parse(l,e),!(((T=b)===null||T===void 0?void 0:T.live)===!1&&b.segments&&!b.segments.length)){_.next=27;break}throw new Error("empty segments list");case 27:u&&(w=ia.parse(u,i)),c&&(C=ia.parse(c,a)),_.next=34;break;case 31:throw _.prev=31,_.t1=_.catch(22),new it(De.MANIFEST,De.SUB_TYPES.HLS,_.t1);case 34:return b&&(b.isMaster?this.hls.emit(Fe.HLS_MANIFEST_LOADED,{playlist:b}):this.hls.emit(Fe.HLS_LEVEL_LOADED,{playlist:b})),_.abrupt("return",[b,w,C]);case 36:case"end":return _.stop()}},t,this,[[3,18],[22,31]])}));function n(t,e,i){return s.apply(this,arguments)}return n}()},{key:"parseText",value:function(n,t){var e=this.hls.config.onPreM3U8Parse,i;try{var a;if(e&&(n=e(n)||n),i=ia.parse(n,t),((a=i)===null||a===void 0?void 0:a.live)===!1&&i.segments&&!i.segments.length)throw new Error("empty segments list")}catch(o){throw new it(De.MANIFEST,De.SUB_TYPES.HLS,o)}return i&&(i.isMaster?this.hls.emit(Fe.HLS_MANIFEST_LOADED,{playlist:i}):this.hls.emit(Fe.HLS_LEVEL_LOADED,{playlist:i})),[i]}},{key:"poll",value:function(n,t,e,i,a,o){var l=this;clearTimeout(this._timer),o=o||3e3;var u=this.hls.config.pollRetryCount,c=function(){var d=Oe(ie().mark(function p(){var h;return ie().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return clearTimeout(l._timer),f.prev=1,f.next=4,l.load(n,t,e);case 4:if(h=f.sent,h[0]){f.next=7;break}return f.abrupt("return");case 7:u=l.hls.config.pollRetryCount,i(h[0],h[1],h[2]),f.next=15;break;case 11:f.prev=11,f.t0=f.catch(1),u--,u<=0&&a(f.t0);case 15:l._timer=setTimeout(c,o);case 16:case"end":return f.stop()}},p,null,[[1,11]])}));return function(){return d.apply(this,arguments)}}();this._timer=setTimeout(c,o)}},{key:"stopPoll",value:function(){return clearTimeout(this._timer),this.cancel()}},{key:"cancel",value:function(){return Promise.all([this._loader.cancel(),this._audioLoader.cancel()])}}]),r}();function Of(r,s,n){return s>n&&(n=s),Math.min(Math.max(r,s),n)}var qd=function(){function r(s,n,t){bt(this,r),G(this,"live",void 0),G(this,"id",0),G(this,"bitrate",0),G(this,"width",0),G(this,"height",0),G(this,"name",""),G(this,"url",""),G(this,"audioCodec",""),G(this,"videoCodec",""),G(this,"textCodec",""),G(this,"startCC",0),G(this,"endCC",0),G(this,"startSN",0),G(this,"endSN",-1),G(this,"totalDuration",0),G(this,"targetDuration",0),G(this,"snDiff",null),G(this,"segments",[]),G(this,"audioStreams",[]),G(this,"subtitleStreams",[]),G(this,"closedCaptions",[]),G(this,"currentAudioStream",null),G(this,"currentSubtitleStream",null),this.update(s,n,t)}return St(r,[{key:"lastSegment",get:function(){return this.segments.length?this.segments[this.segments.length-1]:null}},{key:"segmentDuration",get:function(){var n;return this.targetDuration||((n=this.segments[0])===null||n===void 0?void 0:n.duration)||0}},{key:"liveEdge",get:function(){return this.endTime}},{key:"endTime",get:function(){var n;return((n=this.lastSegment)===null||n===void 0?void 0:n.end)||0}},{key:"currentSubtitleEndSn",get:function(){var n;return((n=this.currentSubtitleStream)===null||n===void 0?void 0:n.endSN)||0}},{key:"clearOldSegment",value:function(n,t){return this.currentAudioStream&&this._clearSegments(n,t),this._clearSegments(n,t)}},{key:"getAudioSegment",value:function(n){if(!(!n||!this.currentAudioStream)){var t=n.sn-this.snDiff;return this.currentAudioStream.segments.find(function(e){return e.sn===t})}}},{key:"update",value:function(n,t){this.url=n.url,Array.isArray(n.segments)?((this.live===null||this.live===void 0)&&(this.live=n.live),this._updateSegments(n,this),this.startCC=n.startCC,this.endCC=n.endCC,this.startSN=n.startSN,this.endSN=n.endSN||-1,this.totalDuration=n.totalDuration,this.targetDuration=n.targetDuration,this.live=n.live,t&&this.currentAudioStream&&Array.isArray(t.segments)&&(this._updateSegments(t,this.currentAudioStream),(this.snDiff===null||this.snDiff===void 0)&&n.segments.length&&t.segments.length&&(this.snDiff=n.segments[0].sn-t.segments[0].sn))):(this.id=n.id,this.bitrate=n.bitrate,this.width=n.width,this.height=n.height,this.name=n.name,this.audioCodec=n.audioCodec,this.videoCodec=n.videoCodec,this.textCodec=n.textCodec,this.audioStreams=n.audioStreams,this.subtitleStreams=n.subtitleStreams,!this.currentAudioStream&&this.audioStreams.length&&(this.currentAudioStream=this.audioStreams.find(function(e){return e.default})||this.audioStreams[0]),!this.currentSubtitleStream&&this.subtitleStreams.length&&(this.currentSubtitleStream=this.subtitleStreams.find(function(e){return e.default})||this.subtitleStreams[0]))}},{key:"updateSubtitle",value:function(n){var t=this;if(n&&this.currentSubtitleStream&&Array.isArray(n.segments)){var e=this._updateSegments(n,this.currentSubtitleStream),i=this.currentSubtitleStream.segments;if(i.length>100&&(this.currentSubtitleStream.segments=i.slice(100)),!!e)return e.map(function(a){return{sn:a.sn,url:a.url,duration:a.duration,start:a.start,end:a.end,lang:t.currentSubtitleStream.lang}})}}},{key:"switchSubtitle",value:function(n){var t=this.subtitleStreams.find(function(i){return i.lang===n}),e=this.currentSubtitleStream;t&&(this.currentSubtitleStream=t,e.segments=[])}},{key:"_clearSegments",value:function(n,t){for(var e=0,i=this.segments,a=0,o=i.length;a<o;a++)if(i[a].end>=n){e=a;break}return e>t&&(e=t),e&&(this.segments=this.segments.slice(e),this.currentAudioStream&&(this.currentAudioStream.segments=this.currentAudioStream.segments.slice(e))),t-e}},{key:"_updateSegments",value:function(n,t){var e=t.segments;if(this.live){var i=e[e.length-1],a=(i==null?void 0:i.sn)||-1;if(a<n.endSN&&n.segments.length){var o=n.segments.findIndex(function(d){return d.sn===a}),l=o<0?n.segments:n.segments.slice(o+1);if(e.length&&l.length){var u=i.end;l.forEach(function(d){d.start=u,u=d.end});var c=(i==null?void 0:i.cc)||-1;c>l[0].cc&&l.forEach(function(d){return d.cc+=c})}return t.endSN=n.endSN,t.segments=e.concat(l),l}}else t.segments=n.segments}}]),r}(),kZ=function(){function r(s){bt(this,r),G(this,"streams",[]),G(this,"currentStream",null),G(this,"dvrWindow",0),G(this,"_segmentPointer",-1),this.hls=s}return St(r,[{key:"lastSegment",get:function(){var n;return(n=this.currentStream)===null||n===void 0?void 0:n.lastSegment}},{key:"currentSegment",get:function(){var n;return(n=this.currentSegments)===null||n===void 0?void 0:n[this._segmentPointer]}},{key:"nextSegment",get:function(){var n;return(n=this.currentSegments)===null||n===void 0?void 0:n[this._segmentPointer+1]}},{key:"currentSegments",get:function(){var n;return(n=this.currentStream)===null||n===void 0?void 0:n.segments}},{key:"currentSubtitleEndSn",get:function(){var n;return(n=this.currentStream)===null||n===void 0?void 0:n.currentSubtitleEndSn}},{key:"liveEdge",get:function(){var n;return(n=this.currentStream)===null||n===void 0?void 0:n.liveEdge}},{key:"totalDuration",get:function(){var n;return((n=this.currentStream)===null||n===void 0?void 0:n.totalDuration)||0}},{key:"seekRange",get:function(){var n=this.currentSegments;if(!(!n||!n.length))return[n[0].start,n[n.length-1].end]}},{key:"isEmpty",get:function(){var n;return!((n=this.currentSegments)!==null&&n!==void 0&&n.length)}},{key:"isLive",get:function(){var n;return(n=this.currentStream)===null||n===void 0?void 0:n.live}},{key:"hasSubtitle",get:function(){var n;return!!((n=this.currentStream)!==null&&n!==void 0&&n.currentSubtitleStream)}},{key:"getAudioSegment",value:function(n){var t;return(t=this.currentStream)===null||t===void 0?void 0:t.getAudioSegment(n)}},{key:"moveSegmentPointer",value:function(n){var t;n==null&&(n=this._segmentPointer+1),this._segmentPointer=Of(n,-1,(t=this.currentSegments)===null||t===void 0?void 0:t.length)}},{key:"reset",value:function(){this.streams=[],this.currentStream=null,this.dvrWindow=0,this._segmentPointer=-1}},{key:"getSegmentByIndex",value:function(n){var t;return(t=this.currentSegments)===null||t===void 0?void 0:t[n]}},{key:"setNextSegmentByIndex",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this._segmentPointer=n-1}},{key:"findSegmentIndexByTime",value:function(n){var t=this.currentSegments;if(t){for(var e=0,i=t.length,a;e<i;e++)if(a=t[e],n>=a.start&&n<a.end)return e;var o=t[t.length-1];if(Math.abs(n-o.end)<.2)return t.length-1}}},{key:"upsertPlaylist",value:function(n,t,e){var i=this;if(n){if(n.isMaster)this.streams.length=n.streams.length,n.streams.filter(function(u){return u.url}).forEach(function(u,c){i.streams[c]?i.streams[c].update(u):i.streams[c]=new qd(u)}),this.currentStream=this.streams[0];else if(Array.isArray(n.segments)){var a=this.currentStream;if(a){a.update(n,t,e);var o=a.updateSubtitle(e);o&&this.hls.emit(Fe.SUBTITLE_SEGMENTS,{list:o})}else this.reset(),this.currentStream=this.streams[0]=new qd(n,t,e)}var l=this.currentStream;l&&this.hls.isLive&&!this.dvrWindow&&(this.dvrWindow=this.currentSegments.reduce(function(u,c){return u+=c.duration,u},0))}}},{key:"switchSubtitle",value:function(n){var t;(t=this.currentStream)===null||t===void 0||t.switchSubtitle(n)}},{key:"clearOldSegment",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,t=this.currentStream;if(!(!this.dvrWindow||!t)){var e=t.endTime-this.dvrWindow;if(!(e<=0)){var i=t.segments;i.length<=n||(this._segmentPointer=t.clearOldSegment(e,this._segmentPointer))}}}},{key:"checkSegmentTrackChange",value:function(n,t){var e=this.findSegmentIndexByTime(n),i=this.getSegmentByIndex(e);if(i&&!(!i.hasAudio&&!i.hasVideo)){if(t!==2&&i.hasAudio&&i.hasVideo)return i;if(!(i.end-n>.3)){var a=this.getSegmentByIndex(e+1);if(a&&!(!a.hasAudio&&!a.hasVideo)&&(a.hasAudio!==i.hasAudio||a.hasVideo!==i.hasVideo))return a}}}}]),r}(),_Z=function(){function r(s){var n=this;bt(this,r),G(this,"error",null),G(this,"_emitOnLoaded",function(l,u){var c=l.data,d=l.response,p=l.options,h=p||{},m=h.firstByteTime,f=h.startTime,v=h.endTime,b=h.contentLength,w=v-f;n._bandwidthService.addRecord(b||c.byteLength,w),n.hls.emit(j.SPEED,{time:w,byteLength:b,url:u}),n.hls.emit(j.LOAD_COMPLETE,{url:u,elapsed:w||0}),n.hls.emit(j.TTFB,{url:u,responseUrl:d.url,elapsed:m-f}),n.hls.emit(j.LOAD_RESPONSE_HEADERS,{headers:d.headers,url:u})}),G(this,"_onLoaderRetry",function(l,u){n.hls.emit(j.LOAD_RETRY,{error:it.network(l),retryTime:u})}),this.hls=s,this._bandwidthService=new mf,this._mapCache={},this._keyCache={};var t=this.hls.config,e=t.retryCount,i=t.retryDelay,a=t.loadTimeout,o=t.fetchOptions;this._segmentLoader=new Wr(Be(Be({},o),{},{responseType:"arraybuffer",retry:e,retryDelay:i,timeout:a,onRetryError:this._onLoaderRetry})),this._audioSegmentLoader=new Wr(Be(Be({},o),{},{responseType:"arraybuffer",retry:e,retryDelay:i,timeout:a,onRetryError:this._onLoaderRetry})),this._keyLoader=new Wr(Be(Be({},o),{},{responseType:"arraybuffer",retry:e,retryDelay:i,timeout:a,onRetryError:this._onLoaderRetry}))}return St(r,[{key:"speedInfo",value:function(){return{speed:this._bandwidthService.getLatestSpeed(),avgSpeed:this._bandwidthService.getAvgSpeed()}}},{key:"load",value:function(n,t,e){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,a=[];return n&&(a[0]=this.loadVideoSegment(n,e)),t&&(a[1]=this.loadAudioSegment(t,i)),Promise.all(a)}},{key:"loadVideoSegment",value:function(n,t){return this._loadSegment(this._segmentLoader,n,t)}},{key:"loadAudioSegment",value:function(n,t){return this._loadSegment(this._audioSegmentLoader,n,t)}},{key:"_loadSegment",value:function(){var s=Oe(ie().mark(function t(e,i,a){var o=this,l,u,c,d,p,h,m,f,v,b,w,C,T,L,_;return ie().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return m=[],this.hls.emit(j.LOAD_START,{url:i.url}),m[0]=e.load(i.url),a&&i.initSegment&&(v=i.initSegment.url,u=this._mapCache[v],u||(this.hls.emit(j.LOAD_START,{url:v}),m[1]=e.load(v).then(function(P){if(P){var I=Object.keys(o._mapCache);I>30&&(o._mapCache={}),u=o._mapCache[v]=P.data,o._emitOnLoaded(P,v)}})),b=(f=i.initSegment.key)===null||f===void 0?void 0:f.url,b&&(h=i.initSegment.key.iv,p=this._keyCache[b],p||(this.hls.emit(j.LOAD_START,{url:b}),m[2]=this._keyLoader.load(b).then(function(P){P&&(p=o._keyCache[b]=P.data,o._emitOnLoaded(P,b))})))),w=(l=i.key)===null||l===void 0?void 0:l.url,w&&(d=i.key.iv,c=this._keyCache[w],c||(this.hls.emit(j.LOAD_START,{url:w}),m[3]=this._keyLoader.load(w).then(function(P){P&&(c=o._keyCache[w]=P.data,o._emitOnLoaded(P,w))}))),x.next=8,Promise.all(m);case 8:if(C=x.sent,T=wr(C,1),L=T[0],L){x.next=13;break}return x.abrupt("return");case 13:return _=L.data,this._emitOnLoaded(L,i.url),x.abrupt("return",{data:_,map:u,key:c,mapKey:p,keyIv:d,mapKeyIv:h});case 16:case"end":return x.stop()}},t,this)}));function n(t,e,i){return s.apply(this,arguments)}return n}()},{key:"reset",value:function(){this.error=null,this._mapCache={},this._keyCache={},this._bandwidthService.reset()}},{key:"cancel",value:function(){var s=Oe(ie().mark(function t(){return ie().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Promise.all([this._keyLoader.cancel(),this._segmentLoader.cancel(),this._audioSegmentLoader.cancel()]);case 2:case"end":return i.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()}]),r}(),Kr=new Kt("hls"),Oi=function(r){no(n,r);var s=ro(n);function n(t){var e;return bt(this,n),e=s.call(this),G(Ze(e),"version",n.version),G(Ze(e),"media",null),G(Ze(e),"config",null),G(Ze(e),"_manifestLoader",null),G(Ze(e),"_segmentLoader",null),G(Ze(e),"_playlist",null),G(Ze(e),"_bufferService",null),G(Ze(e),"_gapService",null),G(Ze(e),"_seiService",null),G(Ze(e),"_stats",null),G(Ze(e),"_prevSegSn",null),G(Ze(e),"_prevSegCc",null),G(Ze(e),"_tickTimer",null),G(Ze(e),"_tickInterval",500),G(Ze(e),"_segmentProcessing",!1),G(Ze(e),"_reloadOnPlay",!1),G(Ze(e),"_switchUrlOpts",null),G(Ze(e),"_loadSegment",Oe(ie().mark(function i(){var a,o,l;return ie().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(e._segmentProcessing||!e.media)){c.next=2;break}return c.abrupt("return");case 2:if(a=e._playlist.nextSegment,a){c.next=5;break}return c.abrupt("return");case 5:if(e.isLive){c.next=12;break}if(o=e.bufferInfo(),l=Math.abs(o.end-e.media.duration)<.1,!(o.remaining>=e.config.preloadTime||l)){c.next=11;break}return l&&e._bufferService.msIsOpend&&e._bufferService.endOfStream(),c.abrupt("return");case 11:!e._urlSwitching&&e._prevSegSn!==a.sn-1&&o.end&&Math.abs(a.start-o.end)>1&&e._playlist.setNextSegmentByIndex(e._playlist.findSegmentIndexByTime(o.end+.1));case 12:return c.abrupt("return",e._loadSegmentDirect());case 13:case"end":return c.stop()}},i)}))),G(Ze(e),"_onPlay",Oe(ie().mark(function i(){return ie().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(clearTimeout(e._disconnectTimer),!e._reloadOnPlay){o.next=6;break}e._reloadOnPlay=!1,e.replay(!0),o.next=9;break;case 6:return o.next=8,e._loadSegment();case 8:e._startTick();case 9:case"end":return o.stop()}},i)}))),G(Ze(e),"_onPause",function(){if(e.isLive){if(!e._reloadOnPlay){var i=e.config.disconnectTime;if(i==null&&(i=e._playlist.dvrWindow),!Number.isFinite(i))return;clearTimeout(e._disconnectTimer),e._disconnectTimer=setTimeout(function(){e._reloadOnPlay=!0,e._clear()},i||0)}}else e._stopTick()}),G(Ze(e),"_onSeeking",Oe(ie().mark(function i(){var a,o,l,u,c,d,p;return ie().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(e.media){m.next=2;break}return m.abrupt("return");case 2:if(a=e.media.currentTime,o=e._playlist.seekRange,!o){m.next=9;break}if(l=Of(a,o[0],o[1]),!(l>=0&&Math.abs(a-l)>=.1)){m.next=9;break}return e.media.currentTime=l,m.abrupt("return");case 9:if(u=e._playlist.currentSegment,c=ut.info(ut.get(e.media),a,.1),!u){m.next=14;break}if(!(c.end&&Math.abs(c.end-u.end)<.2)){m.next=14;break}return m.abrupt("return");case 14:if(d=e._playlist.findSegmentIndexByTime(a),p=e._playlist.getSegmentByIndex(d),!(d==null||!p||e._segmentProcessing&&p===e._playlist.nextSegment)){m.next=18;break}return m.abrupt("return");case 18:return Kr.debug("seek to",a,p),e._playlist.setNextSegmentByIndex(d),e._stopTick(),m.next=23,e._segmentLoader.cancel();case 23:if(e._segmentProcessing=!1,!(!c.end||e.isLive)){m.next=27;break}return m.next=27,e._loadSegmentDirect();case 27:e._startTick();case 28:case"end":return m.stop()}},i)}))),G(Ze(e),"_onTimeupdate",function(){if(e.media){var i=e.config;if(i.isLive&&i.maxLatency&&i.targetLatency&&e.media){var a=e._playlist.liveEdge;if(!a)return;var o=a-e.media.currentTime;o>=i.maxLatency&&(Kr.debug("latency jump, currentTime:".concat(e.media.currentTime,", liveEdge:").concat(a,",  latency=").concat(o)),e.media.currentTime=a-i.targetLatency)}if(i.seiInTime){var l;(l=e._seiService)===null||l===void 0||l.throw(e.media.currentTime)}e.config.allowedStreamTrackChange&&!e.config.softDecode&&e._checkStreamTrackChange(e.media.currentTime)}}),G(Ze(e),"_tick",function(){if(e.media){e._startTick();var i=e.media,a=ut.get(i),o=e._segmentLoader.error;if(o){var l=.5;(!i.readyState||e.bufferInfo(l).remaining<1)&&(o.fatal=!0,e._emitError(it.network(o)));return}ut.end(a)<.1||!i.readyState||(df(i)?(e._loadSegment(),e._gapService&&e._gapService.do(i,e.config.maxJumpDistance,e.isLive)):i.readyState<2&&e._gapService&&e._gapService.do(i,e.config.maxJumpDistance,i.currentTime?e.isLive:!0))}}),e.config=t=cZ(t),e.media=e.config.media,e._manifestLoader=new TZ(Ze(e)),e._segmentLoader=new _Z(Ze(e)),e._playlist=new kZ(Ze(e)),e._bufferService=new uZ(Ze(e)),t.seiInTime&&(e._seiService=new ff(Ze(e))),t.softDecode||(e._gapService=new hf),e._stats=new vf(Ze(e),9e4),e.media.addEventListener("play",e._onPlay),e.media.addEventListener("pause",e._onPause),e.media.addEventListener("seeking",e._onSeeking),e.media.addEventListener("timeupdate",e._onTimeupdate),e}return St(n,[{key:"isLive",get:function(){return this._playlist.isLive}},{key:"streams",get:function(){return this._playlist.streams}},{key:"currentStream",get:function(){return this._playlist.currentStream}},{key:"hasSubtitle",get:function(){return this._playlist.hasSubtitle}},{key:"baseDts",get:function(){var e;return(e=this._bufferService)===null||e===void 0?void 0:e.baseDts}},{key:"speedInfo",value:function(){return this._segmentLoader.speedInfo()}},{key:"bufferInfo",value:function(){var e,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.1;return ut.info(ut.get(this.media),(e=this.media)===null||e===void 0?void 0:e.currentTime,i)}},{key:"getStats",value:function(){return this._stats.getStats()}},{key:"playbackQuality",value:function(){return pf(this.media)}},{key:"load",value:function(){var t=Oe(ie().mark(function i(a){var o,l=arguments;return ie().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=l.length>1&&l[1]!==void 0?l[1]:!1,a&&(this.config.url=a),a=this.config.url,c.next=5,this._reset(o);case 5:return c.next=7,this._loadData(a);case 7:this._startTick();case 8:case"end":return c.stop()}},i,this)}));function e(i){return t.apply(this,arguments)}return e}()},{key:"_loadData",value:function(){var t=Oe(ie().mark(function i(a){var o,l,u,c,d,p,h,m,f,v;return ie().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:try{a&&(a=a.trim())}catch{}if(a){w.next=3;break}throw this._emitError(new it(De.OTHER,De.SUB_TYPES.OPTION,null,null,"m3u8 url is missing"));case 3:return w.next=5,this._loadM3U8(a,this.config.manifest);case 5:if(o=w.sent,l=this._playlist.currentStream,!this._urlSwitching){w.next=17;break}if(l.bitrate===0&&(u=this._switchUrlOpts)!==null&&u!==void 0&&u.bitrate&&(l.bitrate=(c=this._switchUrlOpts)===null||c===void 0?void 0:c.bitrate),d=this._getSeamlessSwitchPoint(),this.config.startTime=d,p=this._playlist.findSegmentIndexByTime(d),h=this._playlist.getSegmentByIndex(p+1),!h){w.next=17;break}return m=h.start,w.next=17,this._bufferService.removeBuffer(m);case 17:if(!o){w.next=29;break}if(!this.isLive){w.next=25;break}this._bufferService.setLiveSeekableRange(0,4294967295),Kr.log("totalDuration first time got",this._playlist.totalDuration),this.config.targetLatency<this._playlist.totalDuration&&(this.config.targetLatency=this._playlist.totalDuration,this.config.maxLatency=1.5*this.config.targetLatency),o.isMaster||this._pollM3U8(a),w.next=29;break;case 25:return w.next=27,this._bufferService.updateDuration(l.totalDuration);case 27:f=this.config.startTime,f&&((v=this._switchUrlOpts)!==null&&v!==void 0&&v.seamless||(this.media.currentTime=f),this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(f)||0));case 29:return w.next=31,this._loadSegment();case 31:case"end":return w.stop()}},i,this)}));function e(i){return t.apply(this,arguments)}return e}()},{key:"replay",value:function(){var t=Oe(ie().mark(function i(a){return ie().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.config.startTime=0,l.next=3,this.load();case 3:return this._reloadOnPlay=!1,l.abrupt("return",this.media.play(!a));case 5:case"end":return l.stop()}},i,this)}));function e(i){return t.apply(this,arguments)}return e}()},{key:"switchURL",value:function(){var t=Oe(ie().mark(function i(a){var o,l,u,c,d,p,h,m=arguments;return ie().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:o=m.length>1&&m[1]!==void 0?m[1]:{},l={seamless:!1,startTime:0,bitrate:0},v.t0=Fa(o),v.next=v.t0==="number"?5:v.t0==="boolean"?7:v.t0==="object"?9:11;break;case 5:return o={startTime:o},v.abrupt("break",12);case 7:return o={seamless:o},v.abrupt("break",12);case 9:for(u in o)(o[u]===void 0||o[u]===null)&&delete o[u];return v.abrupt("break",12);case 11:throw"unsupported switchURL args: ".concat(o);case 12:if(o=Object.assign({},l,o),c=o,d=c.seamless,p=c.startTime,this.config.url=a,this.config.startTime=p,this._switchUrlOpts=o,d){v.next=38;break}if(v.prev=18,!this.config.softDecode){v.next=23;break}v.t1=this.load(a),v.next=26;break;case 23:return v.next=25,this.load(a);case 25:v.t1=v.sent;case 26:h=v.t1,v.next=33;break;case 29:throw v.prev=29,v.t2=v.catch(18),this.emit(Fe.SWITCH_URL_FAILED,v.t2),v.t2;case 33:return this._reloadOnPlay=!1,h&&this.emit(Fe.SWITCH_URL_SUCCESS,{url:a}),v.abrupt("return",this.media.play(!0));case 38:return this._urlSwitching=!0,this._prevSegSn=null,this._prevSegCc=null,this._playlist.reset(),this._bufferService.seamlessSwitch(),v.next=45,this._clear();case 45:return v.next=47,this._loadData(a);case 47:this._startTick();case 48:this._switchUrlOpts=null;case 49:case"end":return v.stop()}},i,this,[[18,29]])}));function e(i){return t.apply(this,arguments)}return e}()},{key:"switchStream",value:function(){var t=Oe(ie().mark(function i(a){var o,l,u,c,d,p=arguments;return ie().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(o=p.length>1&&p[1]!==void 0?p[1]:!0,l=this.currentStream,u=this.streams,!(!l||l.id===a||!u||u.length<2)){m.next=5;break}return m.abrupt("return");case 5:if(c=u.find(function(f){return f.id===a}),c){m.next=8;break}return m.abrupt("return");case 8:return m.prev=8,m.next=11,this._clear();case 11:if(!o){m.next=14;break}return m.next=14,this._bufferService.clearAllBuffer();case 14:m.next=19;break;case 16:throw m.prev=16,m.t0=m.catch(8),this._emitError(it.create(m.t0));case 19:if(l.currentAudioStream&&c.audioStreams.length>2&&(d=l.currentAudioStream.id,c.currentAudioStream=c.audioStreams.find(function(f){return f.id===d})||c.currentAudioStream),this._playlist.currentStream=c,m.prev=21,!(this.isLive||!c.segments.length)){m.next=25;break}return m.next=25,this._refreshM3U8();case 25:return this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(this.media.currentTime)||0),this._prevSegCc=null,m.next=29,this._loadSegmentDirect();case 29:m.next=35;break;case 31:throw m.prev=31,m.t1=m.catch(21),this._playlist.currentStream=l,m.t1;case 35:return this._startTick(),m.abrupt("return",c);case 37:case"end":return m.stop()}},i,this,[[8,16],[21,31]])}));function e(i){return t.apply(this,arguments)}return e}()},{key:"switchAudioStream",value:function(){var t=Oe(ie().mark(function i(a){var o,l,u,c,d=arguments;return ie().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(o=d.length>1&&d[1]!==void 0?d[1]:!0,l=this.currentStream,l){h.next=4;break}return h.abrupt("return");case 4:if(u=l.currentAudioStream,!(!u||u.id===a||l.audioStreams.length<2)){h.next=7;break}return h.abrupt("return");case 7:if(c=l.audioStreams.find(function(m){return m.id===a}),c){h.next=10;break}return h.abrupt("return");case 10:return h.prev=10,h.next=13,this._clear();case 13:if(!o){h.next=16;break}return h.next=16,this._bufferService.clearAllBuffer();case 16:h.next=21;break;case 18:throw h.prev=18,h.t0=h.catch(10),this._emitError(it.create(h.t0));case 21:if(l.currentAudioStream=c,h.prev=22,!(this.isLive||!c.segments.length)){h.next=26;break}return h.next=26,this._refreshM3U8();case 26:return this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(this.media.currentTime)||0),this._prevSegCc=null,h.next=30,this._loadSegmentDirect();case 30:h.next=36;break;case 32:throw h.prev=32,h.t1=h.catch(22),l.currentAudioStream=u,h.t1;case 36:return this._startTick(),h.abrupt("return",c);case 38:case"end":return h.stop()}},i,this,[[10,18],[22,32]])}));function e(i){return t.apply(this,arguments)}return e}()},{key:"switchSubtitleStream",value:function(){var t=Oe(ie().mark(function i(a){return ie().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this._playlist.switchSubtitle(a),l.next=3,this._manifestLoader.stopPoll();case 3:return l.next=5,this._refreshM3U8();case 5:case"end":return l.stop()}},i,this)}));function e(i){return t.apply(this,arguments)}return e}()},{key:"destroy",value:function(){var t=Oe(ie().mark(function i(){var a;return ie().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.media){l.next=2;break}return l.abrupt("return");case 2:return this.removeAllListeners(),this._playlist.reset(),this._segmentLoader.reset(),(a=this._seiService)===null||a===void 0||a.reset(),this.media.removeEventListener("play",this._onPlay),this.media.removeEventListener("pause",this._onPause),this.media.removeEventListener("seeking",this._onSeeking),this.media.removeEventListener("timeupdate",this._onTimeupdate),l.next=12,Promise.all([this._clear(),this._bufferService.destroy()]);case 12:this.media=null;case 13:case"end":return l.stop()}},i,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_loadM3U8",value:function(){var t=Oe(ie().mark(function i(a,o){var l,u,c,d;return ie().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(h.prev=0,!o){h.next=5;break}h.t0=this._manifestLoader.parseText(o,a),h.next=8;break;case 5:return h.next=7,this._manifestLoader.load(a);case 7:h.t0=h.sent;case 8:u=h.t0,c=wr(u,1),l=c[0],h.next=16;break;case 13:throw h.prev=13,h.t1=h.catch(0),this._emitError(it.create(h.t1));case 16:if(l){h.next=18;break}return h.abrupt("return");case 18:if(this._playlist.upsertPlaylist(l),!l.isMaster){h.next=23;break}return(d=this._playlist.currentStream.subtitleStreams)!==null&&d!==void 0&&d.length&&this.emit(Fe.SUBTITLE_PLAYLIST,{list:this._playlist.currentStream.subtitleStreams}),h.next=23,this._refreshM3U8();case 23:return this.emit(Fe.STREAM_PARSED),h.abrupt("return",l);case 25:case"end":return h.stop()}},i,this,[[0,13]])}));function e(i,a){return t.apply(this,arguments)}return e}()},{key:"_refreshM3U8",value:function(){var e,i,a=this,o=this._playlist.currentStream;if(!o||!o.url)throw this._emitError(it.create(null,null,new Error("m3u8 url is not defined")));var l=o.url,u=(e=o.currentAudioStream)===null||e===void 0?void 0:e.url,c=(i=o.currentSubtitleStream)===null||i===void 0?void 0:i.url;return this._manifestLoader.load(l,u,c).then(function(d){var p=wr(d,3),h=p[0],m=p[1],f=p[2];h&&(a._playlist.upsertPlaylist(h,m,f),a.isLive&&a._pollM3U8(l,u,c))}).catch(function(d){throw a._emitError(it.create(d))})}},{key:"_pollM3U8",value:function(e,i,a){var o=this,l,u=this._playlist.isEmpty;this._manifestLoader.poll(e,i,a,function(c,d,p){o._playlist.upsertPlaylist(c,d,p),o._playlist.clearOldSegment(),c&&u&&!o._playlist.isEmpty&&o._loadSegment(),u&&(u=o._playlist.isEmpty)},function(c){o._emitError(it.create(c))},(((l=this._playlist.lastSegment)===null||l===void 0?void 0:l.duration)||0)*1e3)}},{key:"_loadSegmentDirect",value:function(){var t=Oe(ie().mark(function i(){var a,o,l;return ie().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(a=this._playlist.nextSegment,a){c.next=3;break}return c.abrupt("return");case 3:return o=!1,l=null,c.prev=5,this._segmentProcessing=!0,c.next=9,this._reqAndBufferSegment(a,this._playlist.getAudioSegment(a));case 9:o=c.sent,c.next=15;break;case 12:c.prev=12,c.t0=c.catch(5),l=c.t0;case 15:return c.prev=15,this._segmentProcessing=!1,c.finish(15);case 18:if(!l){c.next=20;break}return c.abrupt("return",this._emitError(it.create(l)));case 20:return o&&(this._urlSwitching&&(this._urlSwitching=!1,this.emit(Fe.SWITCH_URL_SUCCESS,{url:this.config.url})),this._playlist.moveSegmentPointer(),a.isLast?this._end():this._loadSegment()),c.abrupt("return",o);case 22:case"end":return c.stop()}},i,this,[[5,12,15,18]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"_reqAndBufferSegment",value:function(){var t=Oe(ie().mark(function i(a,o){var l,u,c,d,p,h,m,f,v;return ie().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return u=a?a.cc:o.cc,c=this._prevSegCc!==u,d=[],w.prev=3,w.next=6,this._segmentLoader.load(a,o,c);case 6:d=w.sent,w.next=14;break;case 9:throw w.prev=9,w.t0=w.catch(3),w.t0.fatal=!1,this._segmentLoader.error=w.t0,w.t0;case 14:if(d[0]){w.next=16;break}return w.abrupt("return");case 16:return w.next=18,(l=this._bufferService).decryptBuffer.apply(l,Bk(d));case 18:if(p=w.sent,p){w.next=21;break}return w.abrupt("return");case 21:return h=a?a.sn:o.sn,m=a?a.start:o.start,f=this._playlist.currentStream,this._bufferService.createSource(p[0],p[1],f==null?void 0:f.videoCodec,f==null?void 0:f.audioCodec),v=Date.now(),w.next=28,this._bufferService.appendBuffer(a,o,p[0],p[1],c,this._prevSegSn===h-1,m);case 28:return this.emit(Fe.APPEND_COST,{elapsed:Date.now()-v,url:a.url}),w.next=31,this._bufferService.evictBuffer(this.config.bufferBehind);case 31:return this._prevSegCc=u,this._prevSegSn=h,w.abrupt("return",!0);case 34:case"end":return w.stop()}},i,this,[[3,9]])}));function e(i,a){return t.apply(this,arguments)}return e}()},{key:"_checkStreamTrackChange",value:function(e){var i=this._playlist.checkSegmentTrackChange(e,this._bufferService.nbSb);i&&this.switchURL(this.config.url,i.start+.2)}},{key:"_clear",value:function(){var t=Oe(ie().mark(function i(){return ie().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return clearTimeout(this._disconnectTimer),this._stopTick(),o.next=4,Promise.all([this._segmentLoader.cancel(),this._manifestLoader.stopPoll()]);case 4:this._segmentProcessing=!1;case 5:case"end":return o.stop()}},i,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_reset",value:function(){var t=Oe(ie().mark(function i(){var a,o,l=arguments;return ie().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=l.length>0&&l[0]!==void 0?l[0]:!1,this._reloadOnPlay=!1,this._prevSegSn=null,this._prevSegCc=null,this._switchUrlOpts=null,this._playlist.reset(),this._segmentLoader.reset(),(a=this._seiService)===null||a===void 0||a.reset(),this._stats.reset(),c.next=11,this._clear();case 11:return c.abrupt("return",this._bufferService.reset(o));case 12:case"end":return c.stop()}},i,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_end",value:function(){this._clear(),this._bufferService.endOfStream(),this.media.readyState<=2&&this._startTick()}},{key:"_stopTick",value:function(){this._tickTimer&&clearTimeout(this._tickTimer),this._tickTimer=null}},{key:"_startTick",value:function(){this._stopTick(),this._tickTimer=setTimeout(this._tick,this._tickInterval)}},{key:"_emitError",value:function(e){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(((i=e.originError)===null||i===void 0?void 0:i.fatal)===!1)Kr.warn(e);else{var o,l,u;Kr.table(e),Kr.error(e),Kr.error((o=this.media)===null||o===void 0?void 0:o.error),(l=this.media)!==null&&l!==void 0&&l.readyState&&this.media.pause(),this._stopTick(),this._urlSwitching&&(this._urlSwitching=!1,this.emit(Fe.SWITCH_URL_FAILED,e)),this.emit(Fe.ERROR,e),a&&this._end(),(u=this._seiService)===null||u===void 0||u.reset()}return e}},{key:"_getSeamlessSwitchPoint",value:function(){var e=this.media,i=e.currentTime;if(!e.paused){var a,o=this._playlist.findSegmentIndexByTime(e.currentTime),l=this._playlist.getSegmentByIndex(o),u=(a=this._stats)===null||a===void 0?void 0:a.getStats().downloadSpeed;if(u&&l){var c=l.duration*this._playlist.currentStream.bitrate/u+1;i+=c}else i+=5}return i}}],[{key:"isSupported",value:function(e){return!e||e==="video"||e==="audio"?lt.isSupported():typeof WebAssembly<"u"}},{key:"enableLogger",value:function(){Kt.enable(),ui.enable()}},{key:"disableLogger",value:function(){Kt.disable(),ui.disable()}}]),n}(qn);G(Oi,"version","3.0.7");try{localStorage.getItem("xgd")?Oi.enableLogger():Oi.disableLogger()}catch{}var ZZ=function(){function r(s,n){var t=this;bt(this,r),G(this,"_opts",null),G(this,"_plugin",null),G(this,"_onLowDecode",function(){var e,i,a,o,l=t._opts,u=l.media,c=l.innerDegrade;(e=t._plugin)===null||e===void 0||(i=e.player)===null||i===void 0||i.emit("lowdecode",u.degradeInfo),(a=t._plugin)===null||a===void 0||(o=a.player)===null||o===void 0||o.emit("core_event",Be(Be({},u.degradeInfo),{},{eventName:Fe.LOWDECODE})),c===1&&t._degrade(u.src)}),G(this,"_degrade",function(e){var i=t._plugin.player,a=i.video;if(!(a&&a.TAG!=="MVideo")){var o=i.video.degradeVideo;i.video=o,a.degrade(e),e&&(i.config.url=e);var l=i.root.firstChild;l.TAG==="MVideo"&&i.root.replaceChild(o,l);var u=t._plugin.constructor.pluginName.toLowerCase();i.unRegisterPlugin(u),i.once("canplay",function(){i.play()})}}),G(this,"forceDegradeToVideo",function(e){var i=t._opts.innerDegrade;i===1&&t._degrade(e)}),this._opts=s,this._plugin=n,this._init()}return St(r,[{key:"_init",value:function(){var n=this._opts,t=n.media,e=n.preloadTime,i=n.innerDegrade,a=n.isLive;if(t){if(!a&&t.setPlayMode){t.setPlayMode("VOD");return}i&&t.setAttribute("innerdegrade",i),e&&t.setAttribute("preloadtime",e),this._bindEvents()}}},{key:"_bindEvents",value:function(){var n=this._opts.media;n.addEventListener("lowdecode",this._onLowDecode)}},{key:"destroy",value:function(){var n,t;(n=this._opts)===null||n===void 0||(t=n.media)===null||t===void 0||t.removeEventListener("lowdecode",this._onLowDecode),this._plugin=null}}]),r}();function DZ(r,s){var n=s.player,t=n.currentTime,e={startTime:t};switch(Fa(r)){case"boolean":e.seamless=r;break;case"object":Object.assign(e,r);break}return e}var Xa=function(r){no(n,r);var s=ro(n);function n(){var t;bt(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),G(Ze(t),"hls",null),G(Ze(t),"pluginExtension",null),G(Ze(t),"getStats",function(){var o;return(o=t.hls)===null||o===void 0?void 0:o.getStats()}),G(Ze(t),"_onSwitchSubtitle",function(o){var l,u=o.lang;(l=t.hls)===null||l===void 0||l.switchSubtitleStream(u)}),G(Ze(t),"_onSwitchURL",function(o,l){var u=Ze(t),c=u.player,d=u.hls;if(d){var p,h,m=DZ(l,Ze(t));c.config.url=o,d.switchURL(o,m).catch(function(f){}),!m.seamless&&(p=t.player.config)!==null&&p!==void 0&&(h=p.hls)!==null&&h!==void 0&&h.keepStatusAfterSwitch&&t._keepPauseStatus()}}),G(Ze(t),"_keepPauseStatus",function(){var o=t.player.paused;o&&t.player.once("canplay",function(){t.player.pause()})}),t}return St(n,[{key:"core",get:function(){return this.hls}},{key:"version",get:function(){var e;return(e=this.hls)===null||e===void 0?void 0:e.version}},{key:"softDecode",get:function(){var e,i,a=(e=this.player)===null||e===void 0||(i=e.config)===null||i===void 0?void 0:i.mediaType;return!!a&&a!=="video"&&a!=="audio"}},{key:"beforePlayerInit",value:function(){var e=this,i=this.player.config;if(!(!i.url&&!i.__allowHlsEmptyUrl__)){this.hls&&this.hls.destroy(),this.player.switchURL=this._onSwitchURL;var a=i.hls||{};if(a.innerDegrade=a.innerDegrade||i.innerDegrade,(a.disconnectTime===null||a.disconnectTime===void 0)&&(a.disconnectTime=0),this.hls=new Oi(Be({softDecode:this.softDecode,isLive:i.isLive,media:this.player.media||this.player.video,startTime:i.startTime,url:i.url},a)),this.softDecode||pn.defineGetterOrSetter(this.player,{url:{get:function(){var u,c;return(u=e.hls)===null||u===void 0||(c=u.media)===null||c===void 0?void 0:c.src},configurable:!0}}),this.softDecode&&(this.pluginExtension=new ZZ(Be({isLive:i.isLive,media:this.player.video},a),this),this.player.forceDegradeToVideo=function(){for(var l,u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];return(l=e.pluginExtension)===null||l===void 0?void 0:l.forceDegradeToVideo.apply(l,c)}),i.isLive){var o;(o=this.player)===null||o===void 0||o.useHooks("replay",function(){var l;return(l=e.hls)===null||l===void 0?void 0:l.replay()})}this.on(Kh,this._onSwitchSubtitle),this.on(mr,this._onSwitchURL),this.on(Gs,this.destroy.bind(this)),this._transError(),this._transCoreEvent(j.TTFB),this._transCoreEvent(j.LOAD_START),this._transCoreEvent(j.LOAD_RESPONSE_HEADERS),this._transCoreEvent(j.LOAD_COMPLETE),this._transCoreEvent(j.LOAD_RETRY),this._transCoreEvent(j.SOURCEBUFFER_CREATED),this._transCoreEvent(j.REMOVE_BUFFER),this._transCoreEvent(j.BUFFEREOS),this._transCoreEvent(j.KEYFRAME),this._transCoreEvent(j.METADATA_PARSED),this._transCoreEvent(j.DEMUXED_TRACK),this._transCoreEvent(j.SEI),this._transCoreEvent(j.SEI_IN_TIME),this._transCoreEvent(j.SPEED),this._transCoreEvent(j.HLS_MANIFEST_LOADED),this._transCoreEvent(j.HLS_LEVEL_LOADED),this._transCoreEvent(j.STREAM_EXCEPTION),this._transCoreEvent(j.SWITCH_URL_SUCCESS),this._transCoreEvent(j.SWITCH_URL_FAILED),this._transCoreEvent(Fe.NO_AUDIO_TRACK),this._transCoreEvent(Fe.STREAM_PARSED),this._transCoreEvent(Fe.SUBTITLE_SEGMENTS),this._transCoreEvent(Fe.SUBTITLE_PLAYLIST),this._transCoreEvent(Fe.APPEND_COST),i.url&&this.hls.load(i.url,!0).catch(function(l){})}}},{key:"destroy",value:function(){var e;this.hls&&(this.hls.destroy(),this.hls=null),(e=this.pluginExtension)===null||e===void 0||e.destroy(),this.pluginExtension=null}},{key:"_transError",value:function(){var e=this;this.hls.on(Fe.ERROR,function(i){e.player&&e.player.emit(fi,new Un(e.player,i))})}},{key:"_transCoreEvent",value:function(e){var i=this;this.hls.on(e,function(a){i.player&&(i.player.emit("core_event",Be(Be({},a),{},{eventName:e})),e===j.SEI_IN_TIME&&i.hls.hasSubtitle&&i._emitSeiPaylodTime(a))})}},{key:"_emitSeiPaylodTime",value:function(e){try{var i=JSON.parse(Array.from(e.data.payload).map(function(a){return String.fromCharCode(a)}).join("").slice(0,-1));if(!i.rtmp_dts)return;this.player.emit("core_event",{eventName:Fe.SEI_PAYLOAD_TIME,time:i.rtmp_dts})}catch{}}}],[{key:"pluginName",get:function(){return"hls"}},{key:"isSupported",value:function(e,i){return Oi.isSupported(e,i)}}]),n}(pn);G(Xa,"Hls",Oi);G(Xa,"EVENT",Fe);function ep(r,s){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);s&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),n.push.apply(n,t)}return n}function Nt(r){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?ep(Object(n),!0).forEach(function(t){he(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):ep(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ne(){Ne=function(){return r};var r={},s=Object.prototype,n=s.hasOwnProperty,t=Object.defineProperty||function(g,y,S){g[y]=S.value},e=typeof Symbol=="function"?Symbol:{},i=e.iterator||"@@iterator",a=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function l(g,y,S){return Object.defineProperty(g,y,{value:S,enumerable:!0,configurable:!0,writable:!0}),g[y]}try{l({},"")}catch{l=function(y,S,E){return y[S]=E}}function u(g,y,S,E){var Z=y&&y.prototype instanceof p?y:p,R=Object.create(Z.prototype),M=new P(E||[]);return t(R,"_invoke",{value:L(g,S,M)}),R}function c(g,y,S){try{return{type:"normal",arg:g.call(y,S)}}catch(E){return{type:"throw",arg:E}}}r.wrap=u;var d={};function p(){}function h(){}function m(){}var f={};l(f,i,function(){return this});var v=Object.getPrototypeOf,b=v&&v(v(I([])));b&&b!==s&&n.call(b,i)&&(f=b);var w=m.prototype=p.prototype=Object.create(f);function C(g){["next","throw","return"].forEach(function(y){l(g,y,function(S){return this._invoke(y,S)})})}function T(g,y){function S(Z,R,M,O){var z=c(g[Z],g,R);if(z.type!=="throw"){var N=z.arg,ne=N.value;return ne&&typeof ne=="object"&&n.call(ne,"__await")?y.resolve(ne.__await).then(function(B){S("next",B,M,O)},function(B){S("throw",B,M,O)}):y.resolve(ne).then(function(B){N.value=B,M(N)},function(B){return S("throw",B,M,O)})}O(z.arg)}var E;t(this,"_invoke",{value:function(Z,R){function M(){return new y(function(O,z){S(Z,R,O,z)})}return E=E?E.then(M,M):M()}})}function L(g,y,S){var E="suspendedStart";return function(Z,R){if(E==="executing")throw new Error("Generator is already running");if(E==="completed"){if(Z==="throw")throw R;return V()}for(S.method=Z,S.arg=R;;){var M=S.delegate;if(M){var O=_(M,S);if(O){if(O===d)continue;return O}}if(S.method==="next")S.sent=S._sent=S.arg;else if(S.method==="throw"){if(E==="suspendedStart")throw E="completed",S.arg;S.dispatchException(S.arg)}else S.method==="return"&&S.abrupt("return",S.arg);E="executing";var z=c(g,y,S);if(z.type==="normal"){if(E=S.done?"completed":"suspendedYield",z.arg===d)continue;return{value:z.arg,done:S.done}}z.type==="throw"&&(E="completed",S.method="throw",S.arg=z.arg)}}}function _(g,y){var S=y.method,E=g.iterator[S];if(E===void 0)return y.delegate=null,S==="throw"&&g.iterator.return&&(y.method="return",y.arg=void 0,_(g,y),y.method==="throw")||S!=="return"&&(y.method="throw",y.arg=new TypeError("The iterator does not provide a '"+S+"' method")),d;var Z=c(E,g.iterator,y.arg);if(Z.type==="throw")return y.method="throw",y.arg=Z.arg,y.delegate=null,d;var R=Z.arg;return R?R.done?(y[g.resultName]=R.value,y.next=g.nextLoc,y.method!=="return"&&(y.method="next",y.arg=void 0),y.delegate=null,d):R:(y.method="throw",y.arg=new TypeError("iterator result is not an object"),y.delegate=null,d)}function D(g){var y={tryLoc:g[0]};1 in g&&(y.catchLoc=g[1]),2 in g&&(y.finallyLoc=g[2],y.afterLoc=g[3]),this.tryEntries.push(y)}function x(g){var y=g.completion||{};y.type="normal",delete y.arg,g.completion=y}function P(g){this.tryEntries=[{tryLoc:"root"}],g.forEach(D,this),this.reset(!0)}function I(g){if(g){var y=g[i];if(y)return y.call(g);if(typeof g.next=="function")return g;if(!isNaN(g.length)){var S=-1,E=function Z(){for(;++S<g.length;)if(n.call(g,S))return Z.value=g[S],Z.done=!1,Z;return Z.value=void 0,Z.done=!0,Z};return E.next=E}}return{next:V}}function V(){return{value:void 0,done:!0}}return h.prototype=m,t(w,"constructor",{value:m,configurable:!0}),t(m,"constructor",{value:h,configurable:!0}),h.displayName=l(m,o,"GeneratorFunction"),r.isGeneratorFunction=function(g){var y=typeof g=="function"&&g.constructor;return!!y&&(y===h||(y.displayName||y.name)==="GeneratorFunction")},r.mark=function(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,m):(g.__proto__=m,l(g,o,"GeneratorFunction")),g.prototype=Object.create(w),g},r.awrap=function(g){return{__await:g}},C(T.prototype),l(T.prototype,a,function(){return this}),r.AsyncIterator=T,r.async=function(g,y,S,E,Z){Z===void 0&&(Z=Promise);var R=new T(u(g,y,S,E),Z);return r.isGeneratorFunction(y)?R:R.next().then(function(M){return M.done?M.value:R.next()})},C(w),l(w,o,"Generator"),l(w,i,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),r.keys=function(g){var y=Object(g),S=[];for(var E in y)S.push(E);return S.reverse(),function Z(){for(;S.length;){var R=S.pop();if(R in y)return Z.value=R,Z.done=!1,Z}return Z.done=!0,Z}},r.values=I,P.prototype={constructor:P,reset:function(g){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!g)for(var y in this)y.charAt(0)==="t"&&n.call(this,y)&&!isNaN(+y.slice(1))&&(this[y]=void 0)},stop:function(){this.done=!0;var g=this.tryEntries[0].completion;if(g.type==="throw")throw g.arg;return this.rval},dispatchException:function(g){if(this.done)throw g;var y=this;function S(z,N){return R.type="throw",R.arg=g,y.next=z,N&&(y.method="next",y.arg=void 0),!!N}for(var E=this.tryEntries.length-1;E>=0;--E){var Z=this.tryEntries[E],R=Z.completion;if(Z.tryLoc==="root")return S("end");if(Z.tryLoc<=this.prev){var M=n.call(Z,"catchLoc"),O=n.call(Z,"finallyLoc");if(M&&O){if(this.prev<Z.catchLoc)return S(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return S(Z.finallyLoc)}else if(M){if(this.prev<Z.catchLoc)return S(Z.catchLoc,!0)}else{if(!O)throw new Error("try statement without catch or finally");if(this.prev<Z.finallyLoc)return S(Z.finallyLoc)}}}},abrupt:function(g,y){for(var S=this.tryEntries.length-1;S>=0;--S){var E=this.tryEntries[S];if(E.tryLoc<=this.prev&&n.call(E,"finallyLoc")&&this.prev<E.finallyLoc){var Z=E;break}}Z&&(g==="break"||g==="continue")&&Z.tryLoc<=y&&y<=Z.finallyLoc&&(Z=null);var R=Z?Z.completion:{};return R.type=g,R.arg=y,Z?(this.method="next",this.next=Z.finallyLoc,d):this.complete(R)},complete:function(g,y){if(g.type==="throw")throw g.arg;return g.type==="break"||g.type==="continue"?this.next=g.arg:g.type==="return"?(this.rval=this.arg=g.arg,this.method="return",this.next="end"):g.type==="normal"&&y&&(this.next=y),d},finish:function(g){for(var y=this.tryEntries.length-1;y>=0;--y){var S=this.tryEntries[y];if(S.finallyLoc===g)return this.complete(S.completion,S.afterLoc),x(S),d}},catch:function(g){for(var y=this.tryEntries.length-1;y>=0;--y){var S=this.tryEntries[y];if(S.tryLoc===g){var E=S.completion;if(E.type==="throw"){var Z=E.arg;x(S)}return Z}}throw new Error("illegal catch attempt")},delegateYield:function(g,y,S){return this.delegate={iterator:I(g),resultName:y,nextLoc:S},this.method==="next"&&(this.arg=void 0),d}},r}function tp(r,s,n,t,e,i,a){try{var o=r[i](a),l=o.value}catch(u){n(u);return}o.done?s(l):Promise.resolve(l).then(t,e)}function At(r){return function(){var s=this,n=arguments;return new Promise(function(t,e){var i=r.apply(s,n);function a(l){tp(i,t,e,a,o,"next",l)}function o(l){tp(i,t,e,a,o,"throw",l)}a(void 0)})}}function uo(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function np(r,s){for(var n=0;n<s.length;n++){var t=s[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,Kf(t.key),t)}}function co(r,s,n){return s&&np(r.prototype,s),n&&np(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function he(r,s,n){return s=Kf(s),s in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n,r}function Yf(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&Ll(r,s)}function Ga(r){return Ga=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ga(r)}function Ll(r,s){return Ll=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ll(r,s)}function EZ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ge(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function xZ(r,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ge(r)}function Hf(r){var s=EZ();return function(){var t=Ga(r),e;if(s){var i=Ga(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return xZ(this,e)}}function FZ(r,s){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var t=n.call(r,s||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}function Kf(r){var s=FZ(r,"string");return typeof s=="symbol"?s:String(s)}var sr=new Kt("BufferService"),RZ=function(){function r(s,n,t){uo(this,r),he(this,"flv",null),he(this,"_demuxer",new _f),he(this,"_remuxer",null),he(this,"_mse",null),he(this,"_softVideo",null),he(this,"_sourceCreated",!1),he(this,"_needInitSegment",!0),he(this,"_discontinuity",!0),he(this,"_contiguous",!1),he(this,"_initSegmentId",""),he(this,"_cachedBuffer",null),he(this,"_demuxStartTime",0),he(this,"_opts",null),this.flv=s,this._opts=t,n?this._softVideo=n:(this._remuxer=new gu(this._demuxer.videoTrack,this._demuxer.audioTrack),this._mse=new lt,this._mse.bindMedia(s.media))}return co(r,[{key:"baseDts",get:function(){var n,t;return(n=this._demuxer)===null||n===void 0||(t=n._fixer)===null||t===void 0?void 0:t._baseDts}},{key:"seamlessSwitch",value:function(){this._needInitSegment=!0,this._discontinuity=!0,this._contiguous=!0,this._initSegmentId=""}},{key:"unContiguous",value:function(n){this._contiguous=!1,this._demuxStartTime=n}},{key:"reset",value:function(){var s=At(Ne().mark(function t(){var e,i=arguments;return Ne().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(e=i.length>0&&i[0]!==void 0?i[0]:!1,!(this._mse&&!e)){o.next=6;break}return o.next=4,this._mse.unbindMedia();case 4:return o.next=6,this._mse.bindMedia(this.flv.media);case 6:this._needInitSegment=!0,this._discontinuity=!0,this._contiguous=!1,this._sourceCreated=!1,this._initSegmentId="";case 11:case"end":return o.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"endOfStream",value:function(){var s=At(Ne().mark(function t(){return Ne().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!this._mse){i.next=7;break}if(!this._sourceCreated){i.next=5;break}return i.next=4,this._mse.endOfStream();case 4:this.flv.emit(j.BUFFEREOS);case 5:i.next=8;break;case 7:this._softVideo&&this._softVideo.endOfStream();case 8:case"end":return i.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"updateDuration",value:function(){var s=At(Ne().mark(function t(e){return Ne().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this._mse){a.next=7;break}if(this._mse.isOpened){a.next=4;break}return a.next=4,this._mse.open();case 4:return sr.debug("update duration",e),a.next=7,this._mse.updateDuration(e);case 7:case"end":return a.stop()}},t,this)}));function n(t){return s.apply(this,arguments)}return n}()},{key:"destroy",value:function(){var s=At(Ne().mark(function t(){return Ne().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!this._mse){i.next=3;break}return i.next=3,this._mse.unbindMedia();case 3:this._mse=null,this._softVideo=null,this._demuxer=null,this._remuxer=null;case 7:case"end":return i.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"appendBuffer",value:function(){var s=At(Ne().mark(function t(e){var i,a,o,l,u,c,d,p,h,m,f,v,b,w;return Ne().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(this._cachedBuffer&&(e=ni(this._cachedBuffer,e),this._cachedBuffer=null),i=this._demuxer,!(!e||!e.length||!i)){T.next=4;break}return T.abrupt("return");case 4:T.prev=4,i.demuxAndFix(e,this._discontinuity,this._contiguous,this._demuxStartTime),T.next=11;break;case 8:throw T.prev=8,T.t0=T.catch(4),new it(De.DEMUX,De.SUB_TYPES.FLV,T.t0);case 11:if(a=i.videoTrack,o=i.audioTrack,l=i.metadataTrack,u=a.exist(),c=o.exist(),this._opts.onlyAudio&&(u=!1,a.present=!1),this._opts.onlyVideo&&(c=!1,o.present=!1),!(!u&&a.present||!c&&o.present)){T.next=29;break}if(d=0,p=u?a:c?o:void 0,p&&p.samples.length&&(d=(p.samples[p.samples.length-1].originPts-p.samples[0].originPts)/p.timescale*1e3),!(d>this._opts.analyzeDuration)){T.next=27;break}sr.warn("analyze duration exceeded, ".concat(d,"ms"),p),a.present=u,o.present=c,this.flv.emit(j.ANALYZE_DURATION_EXCEEDED,{duration:d}),T.next=29;break;case 27:return this._cachedBuffer=e,T.abrupt("return");case 29:if(h=a.type,m=o.type,this._fireEvents(a,o,l),this._discontinuity=!1,this._contiguous=!0,this._demuxStartTime=0,f=this._mse,this.flv.emit(j.DEMUXED_TRACK,{videoTrack:a}),v="".concat(a.codec,"/").concat(a.width,"/").concat(a.height,"/").concat(o.codec,"/").concat(o.config),v!==this._initSegmentId&&(this._needInitSegment=!0,this._initSegmentId=v,this._emitMetaParsedEvent(a,o)),!f){T.next=65;break}if(this._sourceCreated){T.next=47;break}return T.next=43,f.open();case 43:u&&(sr.log("codec: video/mp4;codecs=".concat(a.codec)),f.createSource(h,"video/mp4;codecs=".concat(a.codec))),c&&(sr.log("codec: audio/mp4;codecs=".concat(o.codec)),f.createSource(m,"audio/mp4;codecs=".concat(o.codec))),this._sourceCreated=!0,this.flv.emit(j.SOURCEBUFFER_CREATED);case 47:T.prev=47,b=this._remuxer.remux(this._needInitSegment),T.next=54;break;case 51:throw T.prev=51,T.t1=T.catch(47),new it(De.REMUX,De.SUB_TYPES.FMP4,T.t1);case 54:if(!(this._needInitSegment&&!b.videoInitSegment&&!b.audioInitSegment)){T.next=56;break}return T.abrupt("return");case 56:return this._needInitSegment=!1,w=[],b.videoInitSegment&&w.push(f.append(h,b.videoInitSegment)),b.audioInitSegment&&w.push(f.append(m,b.audioInitSegment)),b.videoSegment&&w.push(f.append(h,b.videoSegment)),b.audioSegment&&w.push(f.append(m,b.audioSegment)),T.abrupt("return",Promise.all(w));case 65:this._softVideo&&this._softVideo.appendBuffer(a,o);case 66:case"end":return T.stop()}},t,this,[[4,8],[47,51]])}));function n(t){return s.apply(this,arguments)}return n}()},{key:"evictBuffer",value:function(){var s=At(Ne().mark(function t(e){var i=this,a,o,l,u;return Ne().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(a=this.flv.media,!(!this._mse||!this._demuxer||!a||!e||e<0)){d.next=3;break}return d.abrupt("return");case 3:if(o=a.currentTime,l=o-e,!(l<=0)){d.next=7;break}return d.abrupt("return");case 7:if(u=ut.start(ut.get(a)),!(u+1>=l)){d.next=10;break}return d.abrupt("return");case 10:return d.abrupt("return",this._mse.clearBuffer(0,l).then(function(){return i.flv.emit(j.REMOVE_BUFFER,{removeEnd:l})}));case 11:case"end":return d.stop()}},t,this)}));function n(t){return s.apply(this,arguments)}return n}()},{key:"_emitMetaParsedEvent",value:function(n,t){n.exist()&&this.flv.emit(j.METADATA_PARSED,{type:"video",track:n,meta:{codec:n.codec,timescale:n.timescale,width:n.width,height:n.height,sarRatio:n.sarRatio,baseDts:n.baseDts}}),t.exist()&&this.flv.emit(j.METADATA_PARSED,{type:"audio",track:t,meta:{codec:t.codec,channelCount:t.channelCount,sampleRate:t.sampleRate,timescale:t.timescale,baseDts:t.baseDts}}),sr.debug("track parsed",n,t)}},{key:"_fireEvents",value:function(n,t,e){var i=this;sr.debug(n.samples,t.samples),e.flvScriptSamples.forEach(function(a){i.flv.emit(j.FLV_SCRIPT_DATA,a),sr.debug("flvScriptData",a)}),n.samples.forEach(function(a){a.keyframe&&i.flv.emit(j.KEYFRAME,{pts:a.pts})}),n.warnings.forEach(function(a){var o;switch(a.type){case ot.LARGE_AV_SHIFT:o=j.LARGE_AV_FIRST_FRAME_GAP_DETECT;break;case ot.LARGE_VIDEO_GAP:o=j.LARGE_VIDEO_DTS_GAP_DETECT;break;case ot.LARGE_VIDEO_GAP_BETWEEN_CHUNK:o=j.MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT;break}o&&i.flv.emit(j.STREAM_EXCEPTION,Nt(Nt({},a),{},{type:o})),sr.warn("video exception",a)}),t.warnings.forEach(function(a){var o;switch(a.type){case ot.LARGE_AUDIO_GAP:o=j.LARGE_AUDIO_DTS_GAP_DETECT;break;case ot.AUDIO_FILLED:o=j.AUDIO_GAP_DETECT;break;case ot.AUDIO_DROPPED:o=j.AUDIO_OVERLAP_DETECT;break}o&&i.flv.emit(j.STREAM_EXCEPTION,Nt(Nt({},a),{},{type:o})),sr.warn("audio exception",a)}),e.seiSamples.forEach(function(a){i.flv.emit(j.SEI,Nt(Nt({},a),{},{sei:{code:a.data.type,content:a.data.payload,dts:a.pts}}))})}}]),r}();function IZ(r){var s=Nt({retryCount:3,retryDelay:1e3,loadTimeout:1e4,maxReaderInterval:5e3,preloadTime:5,isLive:!1,softDecode:!1,bufferBehind:10,maxJumpDistance:3,analyzeDuration:2e4,seamlesslyReload:!1,keepStatusAfterSwitch:!0,onlyVideo:!1,onlyAudio:!1},r);return s.isLive&&s.preloadTime&&(s.maxLatency||(s.maxLatency=s.preloadTime*2),s.targetLatency||(s.targetLatency=s.preloadTime),(s.disconnectTime===null||s.disconnectTime===void 0)&&(s.disconnectTime=s.maxLatency)),s}function PZ(r,s){var n=0,t=r.length-1,e=0,i=0,a=t;for(s<r[0]&&(n=0,i=a+1);i<=a;)if(e=i+Math.floor((a-i)/2),e===t||s>=r[e]&&s<r[e+1]){n=e;break}else r[e]<s?i=e+1:a=e-1;return n}var ar=new Kt("flv"),Es=function(r){Yf(n,r);var s=Hf(n);function n(t){var e;return uo(this,n),e=s.call(this),he(Ge(e),"media",null),he(Ge(e),"_loading",!1),he(Ge(e),"_opts",null),he(Ge(e),"_bufferService",null),he(Ge(e),"_gapService",null),he(Ge(e),"_stats",null),he(Ge(e),"_mediaLoader",null),he(Ge(e),"_maxChunkWaitTimer",null),he(Ge(e),"_tickTimer",null),he(Ge(e),"_tickInterval",500),he(Ge(e),"_urlSwitching",!1),he(Ge(e),"_seamlessSwitching",!1),he(Ge(e),"_keyframes",null),he(Ge(e),"_acceptRanges",!0),he(Ge(e),"_onProgress",function(){var i=At(Ne().mark(function a(o,l,u,c){var d,p,h,m,f,v,b,w;return Ne().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(d=u.startTime,p=u.endTime,h=u.st,m=u.firstByteTime,e._loading=!l,e._firstProgressEmit){T.next=11;break}if(e.media){T.next=6;break}return(f=e._mediaLoader)===null||f===void 0||f.cancel(),T.abrupt("return");case 6:v=c.headers,e.emit(j.TTFB,{url:e._opts.url,responseUrl:c.url,elapsed:h?m-h:p-d}),e.emit(j.LOAD_RESPONSE_HEADERS,{headers:v}),e._acceptRanges=!!(v!=null&&v.get("Accept-Ranges"))||!!(v!=null&&v.get("Content-Range")),e._firstProgressEmit=!0;case 11:if(e._bufferService){T.next=13;break}return T.abrupt("return");case 13:return clearTimeout(e._maxChunkWaitTimer),e._bandwidthService.addChunkRecord(o==null?void 0:o.byteLength,p-d),T.prev=15,T.next=18,e._bufferService.appendBuffer(o);case 18:(b=e._bufferService)===null||b===void 0||b.evictBuffer(e._opts.bufferBehind),T.next=24;break;case 21:return T.prev=21,T.t0=T.catch(15),T.abrupt("return",e._emitError(it.create(T.t0)));case 24:if(e._urlSwitching&&(e._urlSwitching=!1,e.emit(j.SWITCH_URL_SUCCESS,{url:e._opts.url})),e._seamlessSwitching&&(e._seamlessSwitching=!1,e._tick()),!(l&&!e.media.seeking)){T.next=32;break}return e.emit(j.LOAD_COMPLETE),ar.debug("load done"),T.abrupt("return",e._end());case 32:w=e._opts.maxReaderInterval,w&&(clearTimeout(e._maxChunkWaitTimer),e._maxChunkWaitTimer=setTimeout(function(){ar.debug("onMaxChunkWait",w),e._end()},w));case 34:case"end":return T.stop()}},a,null,[[15,21]])}));return function(a,o,l,u){return i.apply(this,arguments)}}()),he(Ge(e),"_onRetryError",function(i,a){ar.debug("load retry",i,a),e.emit(j.LOAD_RETRY,{error:it.network(i),retryTime:a})}),he(Ge(e),"_end",function(){e._clear(),e._bufferService&&e._bufferService.endOfStream(),ar.debug("end stream")}),he(Ge(e),"_tick",function(){clearTimeout(e._tickTimer);var i=Ge(e),a=i.media;if(a){e._tickTimer=setTimeout(e._tick,e._tickInterval);var o=ut.end(ut.get(a));if(!(o<.1||!a.readyState)){var l=e._opts;if(df(a))e._gapService&&e._gapService.do(a,l.maxJumpDistance,e.isLive,3);else{if(!a.currentTime&&e._gapService){e._gapService.do(a,l.maxJumpDistance,e.isLive,3);return}l.isLive&&o>l.disconnectTime&&e.disconnect()}}}}),he(Ge(e),"_onPlay",function(){var i,a,o=e._opts.softDecode||((i=e.media)===null||i===void 0||(a=i.buffered)===null||a===void 0?void 0:a.length);e.isLive&&!e._loading&&o&&e.replay(void 0,!0)}),he(Ge(e),"_onSeeking",At(Ne().mark(function i(){var a,o,l,u,c;return Ne().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(!e.isLive&&e.seekable)){p.next=14;break}if(a=e._keyframes.times,o=e._keyframes.filepositions,!(!(a!=null&&a.length)||!(o!=null&&o.length))){p.next=5;break}return p.abrupt("return");case 5:if(l=e.media.currentTime,u=PZ(e._keyframes.times,l),c=o[u],c!=null){p.next=10;break}return p.abrupt("return");case 10:return p.next=12,e._mediaLoader.cancel();case 12:e._loadData(null,[c]),e._bufferService.unContiguous(a[u]);case 14:case"end":return p.stop()}},i)}))),he(Ge(e),"_onTimeupdate",function(){if(e.media){var i=e._opts,a=e.media.currentTime;if(i.isLive&&i.maxLatency&&i.targetLatency){var o=ut.end(ut.get(e.media)),l=o-a;l>=i.maxLatency&&(e.media.currentTime=o-i.targetLatency)}e._seiService.throw(a)}}),he(Ge(e),"_onFlvScriptData",function(i){var a,o,l,u,c=(a=i.data)===null||a===void 0||(o=a.onMetaData)===null||o===void 0?void 0:o.keyframes,d=(l=i.data)===null||l===void 0||(u=l.onMetaData)===null||u===void 0?void 0:u.duration;c&&(e._keyframes=c),!e._opts.isLive&&d&&e._bufferService.updateDuration(d)}),e._opts=IZ(t),e.media=e._opts.media||document.createElement("video"),e._opts.media=null,e._firstProgressEmit=!1,e._mediaLoader=new Wr(Nt(Nt({},e._opts.fetchOptions),{},{retry:e._opts.retryCount,retryDelay:e._opts.retryDelay,timeout:e._opts.loadTimeout,onRetryError:e._onRetryError,onProgress:e._onProgress,responseType:"arraybuffer"})),e._bufferService=new RZ(Ge(e),e._opts.softDecode?e.media:void 0,e._opts),e._seiService=new ff(Ge(e)),e._bandwidthService=new mf,e._stats=new vf(Ge(e)),e._opts.softDecode||(e._gapService=new hf),e.media.addEventListener("play",e._onPlay),e.media.addEventListener("seeking",e._onSeeking),e.media.addEventListener("timeupdate",e._onTimeupdate),e.on(j.FLV_SCRIPT_DATA,e._onFlvScriptData),e}return co(n,[{key:"version",get:function(){return"3.0.7"}},{key:"isLive",get:function(){return this._opts.isLive}},{key:"baseDts",get:function(){var e;return(e=this._bufferService)===null||e===void 0?void 0:e.baseDts}},{key:"seekable",get:function(){return!!this._keyframes&&this._acceptRanges}},{key:"speedInfo",value:function(){return{speed:this._bandwidthService.getLatestSpeed(),avgSpeed:this._bandwidthService.getAvgSpeed()}}},{key:"getStats",value:function(){return this._stats.getStats()}},{key:"bufferInfo",value:function(){var e,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.1;return ut.info(ut.get(this.media),(e=this.media)===null||e===void 0?void 0:e.currentTime,i)}},{key:"playbackQuality",value:function(){return pf(this.media)}},{key:"load",value:function(){var t=At(Ne().mark(function i(a){var o,l=arguments;return Ne().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(o=l.length>1&&l[1]!==void 0?l[1]:!1,this._bufferService){c.next=3;break}return c.abrupt("return");case 3:return c.next=5,this._reset(o);case 5:this._loadData(a),clearTimeout(this._tickTimer),this._tickTimer=setTimeout(this._tick,this._tickInterval);case 8:case"end":return c.stop()}},i,this)}));function e(i){return t.apply(this,arguments)}return e}()},{key:"replay",value:function(){var t=At(Ne().mark(function i(){var a=this,o,l,u=arguments;return Ne().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(o=u.length>0&&u[0]!==void 0?u[0]:this._opts.seamlesslyReload,l=u.length>1?u[1]:void 0,this.media){d.next=4;break}return d.abrupt("return");case 4:if(!o){d.next=10;break}return d.next=7,this._clear();case 7:setTimeout(function(){a._loadData(a._opts.url),a._bufferService.seamlessSwitch(),a._seamlessSwitching=!0}),d.next=12;break;case 10:return d.next=12,this.load();case 12:return d.abrupt("return",this.media.play(!l).catch(function(){}));case 13:case"end":return d.stop()}},i,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"disconnect",value:function(){return ar.debug("disconnect!"),this._clear()}},{key:"switchURL",value:function(){var t=At(Ne().mark(function i(a,o){var l=this;return Ne().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this._bufferService){c.next=2;break}return c.abrupt("return");case 2:if(!(!o||!this._opts.isLive)){c.next=7;break}return c.next=5,this.load(a);case 5:return this._urlSwitching=!0,c.abrupt("return",this.media.play(!0).catch(function(){}));case 7:return c.next=9,this._clear();case 9:setTimeout(function(){l._loadData(a),l._bufferService.seamlessSwitch(),l._urlSwitching=!0,l._seamlessSwitching=!0});case 10:case"end":return c.stop()}},i,this)}));function e(i,a){return t.apply(this,arguments)}return e}()},{key:"destroy",value:function(){var t=At(Ne().mark(function i(){return Ne().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(this.media){o.next=2;break}return o.abrupt("return");case 2:return this.removeAllListeners(),this._seiService.reset(),this.media.removeEventListener("play",this._onPlay),this.media.removeEventListener("seeking",this._onSeeking),this.media.removeEventListener("timeupdate",this._onTimeupdate),o.next=9,Promise.all([this._clear(),this._bufferService.destroy()]);case 9:this.media=null,this._bufferService=null;case 11:case"end":return o.stop()}},i,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_emitError",value:function(e){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;ar.table(e),ar.error(e),ar.error((i=this.media)===null||i===void 0?void 0:i.error),this._urlSwitching&&(this._urlSwitching=!1,this._seamlessSwitching=!1,this.emit(j.SWITCH_URL_FAILED,e)),this.emit(j.ERROR,e),a&&(this._seiService.reset(),this._end())}},{key:"_reset",value:function(){var t=At(Ne().mark(function i(){var a,o=arguments;return Ne().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=o.length>0&&o[0]!==void 0?o[0]:!1,this._seiService.reset(),this._bandwidthService.reset(),this._stats.reset(),u.next=6,this._clear();case 6:return u.next=8,this._bufferService.reset(a);case 8:this._firstProgressEmit=!1;case 9:case"end":return u.stop()}},i,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_loadData",value:function(){var t=At(Ne().mark(function i(a,o){return Ne().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a&&(this._opts.url=a),a=this._opts.url,a){u.next=4;break}throw new Error("Source url is missing");case 4:if(this.emit(j.LOAD_START,{url:a}),ar.debug("load data, loading:",this._loading,a),!this._loading){u.next=9;break}return u.next=9,this._mediaLoader.cancel();case 9:return this._loading=!0,u.prev=10,u.next=13,this._mediaLoader.load({url:a,range:o});case 13:u.next=18;break;case 15:return u.prev=15,u.t0=u.catch(10),u.abrupt("return",this._emitError(it.network(u.t0)));case 18:case"end":return u.stop()}},i,this,[[10,15]])}));function e(i,a){return t.apply(this,arguments)}return e}()},{key:"_clear",value:function(){var t=At(Ne().mark(function i(){return Ne().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(clearTimeout(this._maxChunkWaitTimer),clearTimeout(this._tickTimer),!this._mediaLoader){o.next=5;break}return o.next=5,this._mediaLoader.cancel();case 5:this._loading=!1;case 6:case"end":return o.stop()}},i,this)}));function e(){return t.apply(this,arguments)}return e}()}],[{key:"isSupported",value:function(e){return!e||e==="video"||e==="audio"?lt.isSupported():typeof WebAssembly<"u"}},{key:"enableLogger",value:function(){Kt.enable(),ui.enable()}},{key:"disableLogger",value:function(){Kt.disable(),ui.disable()}}]),n}(qn);try{localStorage.getItem("xgd")?Es.enableLogger():Es.disableLogger()}catch{}var MZ=function(){function r(s,n){var t=this;uo(this,r),he(this,"_onLowDecode",function(){var e,i,a,o,l=t._opts,u=l.media,c=l.innerDegrade,d=l.backupURL;(e=t._plugin)===null||e===void 0||(i=e.player)===null||i===void 0||i.emit("lowdecode",u.degradeInfo),(a=t._plugin)===null||a===void 0||(o=a.player)===null||o===void 0||o.emit("core_event",Nt(Nt({},u.degradeInfo),{},{eventName:j.LOWDECODE})),(c===1||c===3)&&d&&t._degrade(d)}),he(this,"_degrade",function(e){var i=t._plugin.player,a=i.video;if((a==null?void 0:a.TAG)==="MVideo"){var o=i.video.degradeVideo;i.video=o,a.degrade(e),e&&(i.config.url=e);var l=i.root.firstChild;l.TAG==="MVideo"&&i.root.replaceChild(o,l);var u=t._plugin.constructor.pluginName.toLowerCase();i.unRegisterPlugin(u),i.once("canplay",function(){i.play()})}}),he(this,"forceDegradeToVideo",function(e){var i=t._opts.innerDegrade;(i===1||i===3)&&t._degrade(e)}),this._opts=s,this._plugin=n,this._init()}return co(r,[{key:"_init",value:function(){var n=this._opts,t=n.media,e=n.preloadTime,i=n.innerDegrade,a=n.decodeMode;t&&(i&&t.setAttribute("innerdegrade",i),e&&t.setAttribute("preloadtime",e),t.setDecodeMode&&t.setDecodeMode(a),this._bindEvents())}},{key:"_bindEvents",value:function(){var n=this._opts.media;n.addEventListener("lowdecode",this._onLowDecode)}},{key:"destroy",value:function(){var n,t;(n=this._opts)===null||n===void 0||(t=n.media)===null||t===void 0||t.removeEventListener("lowdecode",this._onLowDecode),this._plugin=null}}]),r}(),Uf=function(r){Yf(n,r);var s=Hf(n);function n(){var t;uo(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),he(Ge(t),"flv",null),he(Ge(t),"pluginExtension",null),he(Ge(t),"getStats",function(){var o;return(o=t.flv)===null||o===void 0?void 0:o.getStats()}),he(Ge(t),"destroy",function(){var o;t.flv&&(t.flv.destroy(),t.flv=null),(o=t.pluginExtension)===null||o===void 0||o.destroy(),t.pluginExtension=null}),he(Ge(t),"_onSwitchURL",function(o,l){if(t.flv){var u,c;t.player.config.url=o,t.flv.switchURL(o,l),!l&&(u=t.player.config)!==null&&u!==void 0&&(c=u.flv)!==null&&c!==void 0&&c.keepStatusAfterSwitch&&t._keepPauseStatus()}}),he(Ge(t),"_keepPauseStatus",function(){var o=t.player.paused;o&&t.player.once("canplay",function(){t.player.pause()})}),he(Ge(t),"_onDefinitionChange",function(o){var l=o.to;t.flv&&t.flv.switchURL(l)}),t}return co(n,[{key:"core",get:function(){return this.flv}},{key:"version",get:function(){var e;return(e=this.flv)===null||e===void 0?void 0:e.version}},{key:"softDecode",get:function(){var e,i,a=(e=this.player)===null||e===void 0||(i=e.config)===null||i===void 0?void 0:i.mediaType;return!!a&&a!=="video"&&a!=="audio"}},{key:"beforePlayerInit",value:function(){var e=this,i=this.player.config;if(i.url){this.flv&&this.flv.destroy(),this.player.switchURL=this._onSwitchURL;var a=i.flv||{};if((a.disconnectTime===null||a.disconnectTime===void 0)&&(a.disconnectTime=0),this.flv=new Es(Nt({softDecode:this.softDecode,isLive:i.isLive,media:this.player.video},a)),this.softDecode||pn.defineGetterOrSetter(this.player,{url:{get:function(){var u,c;return(u=e.flv)===null||u===void 0||(c=u.media)===null||c===void 0?void 0:c.src},configurable:!0}}),this.softDecode&&(this.pluginExtension=new MZ(Nt({media:this.player.video},i.flv),this),this.player.forceDegradeToVideo=function(){for(var l,u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];return(l=e.pluginExtension)===null||l===void 0?void 0:l.forceDegradeToVideo.apply(l,c)}),i.isLive){var o;(o=this.player)===null||o===void 0||o.useHooks("replay",function(){var l;return(l=e.flv)===null||l===void 0?void 0:l.replay()})}this.on(mr,this._onSwitchURL),this.on(Gs,this.destroy),this._transError(),this._transCoreEvent(j.TTFB),this._transCoreEvent(j.LOAD_START),this._transCoreEvent(j.LOAD_RESPONSE_HEADERS),this._transCoreEvent(j.LOAD_COMPLETE),this._transCoreEvent(j.LOAD_RETRY),this._transCoreEvent(j.SOURCEBUFFER_CREATED),this._transCoreEvent(j.ANALYZE_DURATION_EXCEEDED),this._transCoreEvent(j.REMOVE_BUFFER),this._transCoreEvent(j.BUFFEREOS),this._transCoreEvent(j.KEYFRAME),this._transCoreEvent(j.METADATA_PARSED),this._transCoreEvent(j.SEI),this._transCoreEvent(j.SEI_IN_TIME),this._transCoreEvent(j.FLV_SCRIPT_DATA),this._transCoreEvent(j.STREAM_EXCEPTION),this._transCoreEvent(j.SWITCH_URL_SUCCESS),this._transCoreEvent(j.SWITCH_URL_FAILED),this.flv.load(i.url,!0)}}},{key:"_transError",value:function(){var e=this;this.flv.on(j.ERROR,function(i){e.player&&e.player.emit(fi,new Un(e.player,i))})}},{key:"_transCoreEvent",value:function(e){var i=this;this.flv.on(e,function(a){i.player&&i.player.emit("core_event",Nt(Nt({},a),{},{eventName:e}))})}}],[{key:"pluginName",get:function(){return"flv"}},{key:"isSupported",value:function(e,i){return Es.isSupported(e,i)}}]),n}(pn);he(Uf,"Flv",Es);function rp(r,s){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);s&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),n.push.apply(n,t)}return n}function Ir(r){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?rp(Object(n),!0).forEach(function(t){sn(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):rp(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ae(){Ae=function(){return r};var r={},s=Object.prototype,n=s.hasOwnProperty,t=Object.defineProperty||function(g,y,S){g[y]=S.value},e=typeof Symbol=="function"?Symbol:{},i=e.iterator||"@@iterator",a=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function l(g,y,S){return Object.defineProperty(g,y,{value:S,enumerable:!0,configurable:!0,writable:!0}),g[y]}try{l({},"")}catch{l=function(y,S,E){return y[S]=E}}function u(g,y,S,E){var Z=y&&y.prototype instanceof p?y:p,R=Object.create(Z.prototype),M=new P(E||[]);return t(R,"_invoke",{value:L(g,S,M)}),R}function c(g,y,S){try{return{type:"normal",arg:g.call(y,S)}}catch(E){return{type:"throw",arg:E}}}r.wrap=u;var d={};function p(){}function h(){}function m(){}var f={};l(f,i,function(){return this});var v=Object.getPrototypeOf,b=v&&v(v(I([])));b&&b!==s&&n.call(b,i)&&(f=b);var w=m.prototype=p.prototype=Object.create(f);function C(g){["next","throw","return"].forEach(function(y){l(g,y,function(S){return this._invoke(y,S)})})}function T(g,y){function S(Z,R,M,O){var z=c(g[Z],g,R);if(z.type!=="throw"){var N=z.arg,ne=N.value;return ne&&typeof ne=="object"&&n.call(ne,"__await")?y.resolve(ne.__await).then(function(B){S("next",B,M,O)},function(B){S("throw",B,M,O)}):y.resolve(ne).then(function(B){N.value=B,M(N)},function(B){return S("throw",B,M,O)})}O(z.arg)}var E;t(this,"_invoke",{value:function(Z,R){function M(){return new y(function(O,z){S(Z,R,O,z)})}return E=E?E.then(M,M):M()}})}function L(g,y,S){var E="suspendedStart";return function(Z,R){if(E==="executing")throw new Error("Generator is already running");if(E==="completed"){if(Z==="throw")throw R;return V()}for(S.method=Z,S.arg=R;;){var M=S.delegate;if(M){var O=_(M,S);if(O){if(O===d)continue;return O}}if(S.method==="next")S.sent=S._sent=S.arg;else if(S.method==="throw"){if(E==="suspendedStart")throw E="completed",S.arg;S.dispatchException(S.arg)}else S.method==="return"&&S.abrupt("return",S.arg);E="executing";var z=c(g,y,S);if(z.type==="normal"){if(E=S.done?"completed":"suspendedYield",z.arg===d)continue;return{value:z.arg,done:S.done}}z.type==="throw"&&(E="completed",S.method="throw",S.arg=z.arg)}}}function _(g,y){var S=y.method,E=g.iterator[S];if(E===void 0)return y.delegate=null,S==="throw"&&g.iterator.return&&(y.method="return",y.arg=void 0,_(g,y),y.method==="throw")||S!=="return"&&(y.method="throw",y.arg=new TypeError("The iterator does not provide a '"+S+"' method")),d;var Z=c(E,g.iterator,y.arg);if(Z.type==="throw")return y.method="throw",y.arg=Z.arg,y.delegate=null,d;var R=Z.arg;return R?R.done?(y[g.resultName]=R.value,y.next=g.nextLoc,y.method!=="return"&&(y.method="next",y.arg=void 0),y.delegate=null,d):R:(y.method="throw",y.arg=new TypeError("iterator result is not an object"),y.delegate=null,d)}function D(g){var y={tryLoc:g[0]};1 in g&&(y.catchLoc=g[1]),2 in g&&(y.finallyLoc=g[2],y.afterLoc=g[3]),this.tryEntries.push(y)}function x(g){var y=g.completion||{};y.type="normal",delete y.arg,g.completion=y}function P(g){this.tryEntries=[{tryLoc:"root"}],g.forEach(D,this),this.reset(!0)}function I(g){if(g){var y=g[i];if(y)return y.call(g);if(typeof g.next=="function")return g;if(!isNaN(g.length)){var S=-1,E=function Z(){for(;++S<g.length;)if(n.call(g,S))return Z.value=g[S],Z.done=!1,Z;return Z.value=void 0,Z.done=!0,Z};return E.next=E}}return{next:V}}function V(){return{value:void 0,done:!0}}return h.prototype=m,t(w,"constructor",{value:m,configurable:!0}),t(m,"constructor",{value:h,configurable:!0}),h.displayName=l(m,o,"GeneratorFunction"),r.isGeneratorFunction=function(g){var y=typeof g=="function"&&g.constructor;return!!y&&(y===h||(y.displayName||y.name)==="GeneratorFunction")},r.mark=function(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,m):(g.__proto__=m,l(g,o,"GeneratorFunction")),g.prototype=Object.create(w),g},r.awrap=function(g){return{__await:g}},C(T.prototype),l(T.prototype,a,function(){return this}),r.AsyncIterator=T,r.async=function(g,y,S,E,Z){Z===void 0&&(Z=Promise);var R=new T(u(g,y,S,E),Z);return r.isGeneratorFunction(y)?R:R.next().then(function(M){return M.done?M.value:R.next()})},C(w),l(w,o,"Generator"),l(w,i,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),r.keys=function(g){var y=Object(g),S=[];for(var E in y)S.push(E);return S.reverse(),function Z(){for(;S.length;){var R=S.pop();if(R in y)return Z.value=R,Z.done=!1,Z}return Z.done=!0,Z}},r.values=I,P.prototype={constructor:P,reset:function(g){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!g)for(var y in this)y.charAt(0)==="t"&&n.call(this,y)&&!isNaN(+y.slice(1))&&(this[y]=void 0)},stop:function(){this.done=!0;var g=this.tryEntries[0].completion;if(g.type==="throw")throw g.arg;return this.rval},dispatchException:function(g){if(this.done)throw g;var y=this;function S(z,N){return R.type="throw",R.arg=g,y.next=z,N&&(y.method="next",y.arg=void 0),!!N}for(var E=this.tryEntries.length-1;E>=0;--E){var Z=this.tryEntries[E],R=Z.completion;if(Z.tryLoc==="root")return S("end");if(Z.tryLoc<=this.prev){var M=n.call(Z,"catchLoc"),O=n.call(Z,"finallyLoc");if(M&&O){if(this.prev<Z.catchLoc)return S(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return S(Z.finallyLoc)}else if(M){if(this.prev<Z.catchLoc)return S(Z.catchLoc,!0)}else{if(!O)throw new Error("try statement without catch or finally");if(this.prev<Z.finallyLoc)return S(Z.finallyLoc)}}}},abrupt:function(g,y){for(var S=this.tryEntries.length-1;S>=0;--S){var E=this.tryEntries[S];if(E.tryLoc<=this.prev&&n.call(E,"finallyLoc")&&this.prev<E.finallyLoc){var Z=E;break}}Z&&(g==="break"||g==="continue")&&Z.tryLoc<=y&&y<=Z.finallyLoc&&(Z=null);var R=Z?Z.completion:{};return R.type=g,R.arg=y,Z?(this.method="next",this.next=Z.finallyLoc,d):this.complete(R)},complete:function(g,y){if(g.type==="throw")throw g.arg;return g.type==="break"||g.type==="continue"?this.next=g.arg:g.type==="return"?(this.rval=this.arg=g.arg,this.method="return",this.next="end"):g.type==="normal"&&y&&(this.next=y),d},finish:function(g){for(var y=this.tryEntries.length-1;y>=0;--y){var S=this.tryEntries[y];if(S.finallyLoc===g)return this.complete(S.completion,S.afterLoc),x(S),d}},catch:function(g){for(var y=this.tryEntries.length-1;y>=0;--y){var S=this.tryEntries[y];if(S.tryLoc===g){var E=S.completion;if(E.type==="throw"){var Z=E.arg;x(S)}return Z}}throw new Error("illegal catch attempt")},delegateYield:function(g,y,S){return this.delegate={iterator:I(g),resultName:y,nextLoc:S},this.method==="next"&&(this.arg=void 0),d}},r}function ip(r,s,n,t,e,i,a){try{var o=r[i](a),l=o.value}catch(u){n(u);return}o.done?s(l):Promise.resolve(l).then(t,e)}function Gt(r){return function(){var s=this,n=arguments;return new Promise(function(t,e){var i=r.apply(s,n);function a(l){ip(i,t,e,a,o,"next",l)}function o(l){ip(i,t,e,a,o,"throw",l)}a(void 0)})}}function Bi(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function sp(r,s){for(var n=0;n<s.length;n++){var t=s[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,zf(t.key),t)}}function ji(r,s,n){return s&&sp(r.prototype,s),n&&sp(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function sn(r,s,n){return s=zf(s),s in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n,r}function Su(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&Tl(r,s)}function Wa(r){return Wa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wa(r)}function Tl(r,s){return Tl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Tl(r,s)}function XZ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ct(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function GZ(r,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ct(r)}function wu(r){var s=XZ();return function(){var t=Wa(r),e;if(s){var i=Wa(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return GZ(this,e)}}function WZ(r,s){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var t=n.call(r,s||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}function zf(r){var s=WZ(r,"string");return typeof s=="symbol"?s:String(s)}var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.default=function(r){for(var s=0,n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];var i=!0,a=!1,o=void 0;try{for(var l=t[Symbol.iterator](),u;!(i=(u=l.next()).done);i=!0){var c=u.value;s+=c.length}}catch(C){a=!0,o=C}finally{try{!i&&l.return&&l.return()}finally{if(a)throw o}}var d=new r(s),p=0,h=!0,m=!1,f=void 0;try{for(var v=t[Symbol.iterator](),b;!(h=(b=v.next()).done);h=!0){var w=b.value;d.set(w,p),p+=w.length}}catch(C){m=!0,f=C}finally{try{!h&&v.return&&v.return()}finally{if(m)throw f}}return d};var VZ=Cu,AZ=NZ(VZ);function NZ(r){return r&&r.__esModule?r:{default:r}}var OZ=AZ.default;const YZ=Aa(OZ);var Bf="3.0.7",Rr={416:-499899,401:-499898,403:-499897,404:-499896,timeout:-499895,"4xx":-499894,"5xx":-499893,networkError:-499892,contentError:-499891,mse:-499971,mseOpen:-499972,mseAppend:-499973,boxsError:-499980,moovError:-499981,notH264:-499982,mdatError:-499983,mdhdError:-499984,metaError:-499985,muxError:-499986,h265Error:-499987,noneURL:-499988,other:-499989,other1:-499990,waitTimeout:-499791,onWaitInBufferRange:-499792},Jr={network:1003,format:1005,runtime:1002,other:9999,demux:1006,remux:1007},HZ=ji(function r(s,n,t){Bi(this,r);var e=0,i=0;return t&&t.range&&t.range.length>1&&(e=t.range[0],i=t.range[1]),{errorCode:n,errorType:s,errorTypeCode:Jr[s],errorMessage:(t==null?void 0:t.httpText)||(t==null?void 0:t.message),url:t==null?void 0:t.url,httpCode:n,version:Bf,rangeStart:e,rangeEnd:i,ext:t,mediaError:{code:n,message:(t==null?void 0:t.httpText)||(t==null?void 0:t.message)}}}),KZ=ji(function r(s,n,t){return Bi(this,r),{errorCode:n,errorType:s,errorTypeCode:Jr[s],version:Bf,errorMessage:t.msg,ext:t,mediaError:{code:n,message:t.msg}}}),xn={};xn.nowTime=function(){try{return parseInt(performance.now(),10)}catch{return new Date().getTime()}};xn.concatData=function(r,s){var n=[],t=0;r&&n.push(r),s&&n.push(s),n.every(function(a){return a&&(t+=a.byteLength),!0});var e=new Uint8Array(t),i=0;return n.every(function(a){return a&&(e.set(a,i),i+=a.byteLength),!0}),e};function UZ(r,s){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t,e,i,a,o=[],l=!0,u=!1;try{if(i=(n=n.call(r)).next,s===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(t=i.call(n)).done)&&(o.push(t.value),o.length!==s);l=!0);}catch(c){u=!0,e=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw e}}return o}}function ap(r,s){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);s&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),n.push.apply(n,t)}return n}function kl(r){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?ap(Object(n),!0).forEach(function(t){jt(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):ap(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function je(){je=function(){return r};var r={},s=Object.prototype,n=s.hasOwnProperty,t=Object.defineProperty||function(g,y,S){g[y]=S.value},e=typeof Symbol=="function"?Symbol:{},i=e.iterator||"@@iterator",a=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function l(g,y,S){return Object.defineProperty(g,y,{value:S,enumerable:!0,configurable:!0,writable:!0}),g[y]}try{l({},"")}catch{l=function(y,S,E){return y[S]=E}}function u(g,y,S,E){var Z=y&&y.prototype instanceof p?y:p,R=Object.create(Z.prototype),M=new P(E||[]);return t(R,"_invoke",{value:L(g,S,M)}),R}function c(g,y,S){try{return{type:"normal",arg:g.call(y,S)}}catch(E){return{type:"throw",arg:E}}}r.wrap=u;var d={};function p(){}function h(){}function m(){}var f={};l(f,i,function(){return this});var v=Object.getPrototypeOf,b=v&&v(v(I([])));b&&b!==s&&n.call(b,i)&&(f=b);var w=m.prototype=p.prototype=Object.create(f);function C(g){["next","throw","return"].forEach(function(y){l(g,y,function(S){return this._invoke(y,S)})})}function T(g,y){function S(Z,R,M,O){var z=c(g[Z],g,R);if(z.type!=="throw"){var N=z.arg,ne=N.value;return ne&&typeof ne=="object"&&n.call(ne,"__await")?y.resolve(ne.__await).then(function(B){S("next",B,M,O)},function(B){S("throw",B,M,O)}):y.resolve(ne).then(function(B){N.value=B,M(N)},function(B){return S("throw",B,M,O)})}O(z.arg)}var E;t(this,"_invoke",{value:function(Z,R){function M(){return new y(function(O,z){S(Z,R,O,z)})}return E=E?E.then(M,M):M()}})}function L(g,y,S){var E="suspendedStart";return function(Z,R){if(E==="executing")throw new Error("Generator is already running");if(E==="completed"){if(Z==="throw")throw R;return V()}for(S.method=Z,S.arg=R;;){var M=S.delegate;if(M){var O=_(M,S);if(O){if(O===d)continue;return O}}if(S.method==="next")S.sent=S._sent=S.arg;else if(S.method==="throw"){if(E==="suspendedStart")throw E="completed",S.arg;S.dispatchException(S.arg)}else S.method==="return"&&S.abrupt("return",S.arg);E="executing";var z=c(g,y,S);if(z.type==="normal"){if(E=S.done?"completed":"suspendedYield",z.arg===d)continue;return{value:z.arg,done:S.done}}z.type==="throw"&&(E="completed",S.method="throw",S.arg=z.arg)}}}function _(g,y){var S=y.method,E=g.iterator[S];if(E===void 0)return y.delegate=null,S==="throw"&&g.iterator.return&&(y.method="return",y.arg=void 0,_(g,y),y.method==="throw")||S!=="return"&&(y.method="throw",y.arg=new TypeError("The iterator does not provide a '"+S+"' method")),d;var Z=c(E,g.iterator,y.arg);if(Z.type==="throw")return y.method="throw",y.arg=Z.arg,y.delegate=null,d;var R=Z.arg;return R?R.done?(y[g.resultName]=R.value,y.next=g.nextLoc,y.method!=="return"&&(y.method="next",y.arg=void 0),y.delegate=null,d):R:(y.method="throw",y.arg=new TypeError("iterator result is not an object"),y.delegate=null,d)}function D(g){var y={tryLoc:g[0]};1 in g&&(y.catchLoc=g[1]),2 in g&&(y.finallyLoc=g[2],y.afterLoc=g[3]),this.tryEntries.push(y)}function x(g){var y=g.completion||{};y.type="normal",delete y.arg,g.completion=y}function P(g){this.tryEntries=[{tryLoc:"root"}],g.forEach(D,this),this.reset(!0)}function I(g){if(g){var y=g[i];if(y)return y.call(g);if(typeof g.next=="function")return g;if(!isNaN(g.length)){var S=-1,E=function Z(){for(;++S<g.length;)if(n.call(g,S))return Z.value=g[S],Z.done=!1,Z;return Z.value=void 0,Z.done=!0,Z};return E.next=E}}return{next:V}}function V(){return{value:void 0,done:!0}}return h.prototype=m,t(w,"constructor",{value:m,configurable:!0}),t(m,"constructor",{value:h,configurable:!0}),h.displayName=l(m,o,"GeneratorFunction"),r.isGeneratorFunction=function(g){var y=typeof g=="function"&&g.constructor;return!!y&&(y===h||(y.displayName||y.name)==="GeneratorFunction")},r.mark=function(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,m):(g.__proto__=m,l(g,o,"GeneratorFunction")),g.prototype=Object.create(w),g},r.awrap=function(g){return{__await:g}},C(T.prototype),l(T.prototype,a,function(){return this}),r.AsyncIterator=T,r.async=function(g,y,S,E,Z){Z===void 0&&(Z=Promise);var R=new T(u(g,y,S,E),Z);return r.isGeneratorFunction(y)?R:R.next().then(function(M){return M.done?M.value:R.next()})},C(w),l(w,o,"Generator"),l(w,i,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),r.keys=function(g){var y=Object(g),S=[];for(var E in y)S.push(E);return S.reverse(),function Z(){for(;S.length;){var R=S.pop();if(R in y)return Z.value=R,Z.done=!1,Z}return Z.done=!0,Z}},r.values=I,P.prototype={constructor:P,reset:function(g){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!g)for(var y in this)y.charAt(0)==="t"&&n.call(this,y)&&!isNaN(+y.slice(1))&&(this[y]=void 0)},stop:function(){this.done=!0;var g=this.tryEntries[0].completion;if(g.type==="throw")throw g.arg;return this.rval},dispatchException:function(g){if(this.done)throw g;var y=this;function S(z,N){return R.type="throw",R.arg=g,y.next=z,N&&(y.method="next",y.arg=void 0),!!N}for(var E=this.tryEntries.length-1;E>=0;--E){var Z=this.tryEntries[E],R=Z.completion;if(Z.tryLoc==="root")return S("end");if(Z.tryLoc<=this.prev){var M=n.call(Z,"catchLoc"),O=n.call(Z,"finallyLoc");if(M&&O){if(this.prev<Z.catchLoc)return S(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return S(Z.finallyLoc)}else if(M){if(this.prev<Z.catchLoc)return S(Z.catchLoc,!0)}else{if(!O)throw new Error("try statement without catch or finally");if(this.prev<Z.finallyLoc)return S(Z.finallyLoc)}}}},abrupt:function(g,y){for(var S=this.tryEntries.length-1;S>=0;--S){var E=this.tryEntries[S];if(E.tryLoc<=this.prev&&n.call(E,"finallyLoc")&&this.prev<E.finallyLoc){var Z=E;break}}Z&&(g==="break"||g==="continue")&&Z.tryLoc<=y&&y<=Z.finallyLoc&&(Z=null);var R=Z?Z.completion:{};return R.type=g,R.arg=y,Z?(this.method="next",this.next=Z.finallyLoc,d):this.complete(R)},complete:function(g,y){if(g.type==="throw")throw g.arg;return g.type==="break"||g.type==="continue"?this.next=g.arg:g.type==="return"?(this.rval=this.arg=g.arg,this.method="return",this.next="end"):g.type==="normal"&&y&&(this.next=y),d},finish:function(g){for(var y=this.tryEntries.length-1;y>=0;--y){var S=this.tryEntries[y];if(S.finallyLoc===g)return this.complete(S.completion,S.afterLoc),x(S),d}},catch:function(g){for(var y=this.tryEntries.length-1;y>=0;--y){var S=this.tryEntries[y];if(S.tryLoc===g){var E=S.completion;if(E.type==="throw"){var Z=E.arg;x(S)}return Z}}throw new Error("illegal catch attempt")},delegateYield:function(g,y,S){return this.delegate={iterator:I(g),resultName:y,nextLoc:S},this.method==="next"&&(this.arg=void 0),d}},r}function op(r,s,n,t,e,i,a){try{var o=r[i](a),l=o.value}catch(u){n(u);return}o.done?s(l):Promise.resolve(l).then(t,e)}function nn(r){return function(){var s=this,n=arguments;return new Promise(function(t,e){var i=r.apply(s,n);function a(l){op(i,t,e,a,o,"next",l)}function o(l){op(i,t,e,a,o,"throw",l)}a(void 0)})}}function Lu(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function lp(r,s){for(var n=0;n<s.length;n++){var t=s[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,Jf(t.key),t)}}function Tu(r,s,n){return s&&lp(r.prototype,s),n&&lp(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function jt(r,s,n){return s=Jf(s),s in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n,r}function zZ(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&_l(r,s)}function Va(r){return Va=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Va(r)}function _l(r,s){return _l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_l(r,s)}function BZ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jZ(r,s){if(r==null)return{};var n={},t=Object.keys(r),e,i;for(i=0;i<t.length;i++)e=t[i],!(s.indexOf(e)>=0)&&(n[e]=r[e]);return n}function JZ(r,s){if(r==null)return{};var n=jZ(r,s),t,e;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(e=0;e<i.length;e++)t=i[e],!(s.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function rn(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function QZ(r,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rn(r)}function $Z(r){var s=BZ();return function(){var t=Va(r),e;if(s){var i=Va(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return QZ(this,e)}}function qZ(r,s){return nD(r)||UZ(r,s)||jf(r,s)||sD()}function eD(r){return tD(r)||rD(r)||jf(r)||iD()}function tD(r){if(Array.isArray(r))return Zl(r)}function nD(r){if(Array.isArray(r))return r}function rD(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function jf(r,s){if(r){if(typeof r=="string")return Zl(r,s);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zl(r,s)}}function Zl(r,s){(s==null||s>r.length)&&(s=r.length);for(var n=0,t=new Array(s);n<s;n++)t[n]=r[n];return t}function iD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aD(r,s){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var t=n.call(r,s||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}function Jf(r){var s=aD(r,"string");return typeof s=="symbol"?s:String(s)}function oD(r){return kl({vid:"",moovEnd:8e4,segmentDuration:2,maxDownloadInfoSize:30,responseType:"arraybuffer",cache:null},r)}var sa=Tu(function r(s,n){Lu(this,r),this.type="file",this.message=s,this.data=n}),lD=function(){function r(){Lu(this,r),jt(this,"_data",Object.create(null))}return Tu(r,[{key:"set",value:function(n,t){this._data[n]=t}},{key:"get",value:function(n){return this._data[n]}},{key:"clear",value:function(){this._data=Object.create(null)}}]),r}();function Uo(r,s){var n=r.trak;if(!(!n||!n.length)){var t=n.find(function(g){var y,S;return((y=g.mdia)===null||y===void 0||(S=y.hdlr)===null||S===void 0?void 0:S.handlerType)==="vide"}),e=n.find(function(g){var y,S;return((y=g.mdia)===null||y===void 0||(S=y.hdlr)===null||S===void 0?void 0:S.handlerType)==="soun"});if(!(!t&&!e)){var i=[],a=[],o;if(t){var l,u,c,d=(l=t.mdia)===null||l===void 0||(u=l.minf)===null||u===void 0?void 0:u.stbl;if(!d)return;var p=(c=t.mdia.mdhd)===null||c===void 0?void 0:c.timescale,h=d.stts,m=d.stsc,f=d.stsz,v=d.stco,b=d.stss,w=d.ctts;if(!p||!h||!m||!f||!v||!b)return;i=up(s,p,h,m,f,v,b,w),o=i.map(function(g){return g.duration})}if(e){var C,T,L,_=(C=e.mdia)===null||C===void 0||(T=C.minf)===null||T===void 0?void 0:T.stbl;if(!_)return;var D=(L=e.mdia.mdhd)===null||L===void 0?void 0:L.timescale,x=_.stts,P=_.stsc,I=_.stsz,V=_.stco;if(!D||!x||!P||!I||!V)return;a=up(s,D,x,P,I,V,null,null,o)}return{videoSegments:i,audioSegments:a}}}}function up(r,s,n,t,e,i,a,o,l){var u=[],c=[],d=[],p=t.entries,h=i.entries,m=e.entrySizes,f=a==null?void 0:a.entries,v=o==null?void 0:o.entries,b;v&&(b=[],v.forEach(function(oe){for(var le=oe.count,Ce=oe.offset,Me=0;Me<le;Me++)b.push(Ce)}));var w;f&&(w={},f.forEach(function(oe){w[oe-1]=!0}));var C,T,L=0,_=0,D=0,x=0,P=0,I=p[0].samplesPerChunk,V=p[1]?p[1].firstChunk-1:1/0,g=0,y=-1;n.entries.forEach(function(oe){var le=oe.count,Ce=oe.delta;T=Ce;for(var Me=0;Me<le;Me++)C={dts:g,startTime:L,duration:T,size:m[_]||e.sampleSize,offset:h[D]+P,index:_},f&&(C.keyframe=w[_],C.keyframe?(y++,c.push([C]),d.push(C.duration)):(c[c.length-1].push(C),d[c.length-1]+=C.duration),C.gopId=y),b&&_<b.length&&(C.pts=g+b[_]),_===0&&(C.pts=0),u.push(C),L+=T,g+=Ce,_++,_<I?P+=C.size:(D++,P=0,D>=V&&(x++,V=p[x+1]?p[x+1].firstChunk-1:1/0),I+=p[x].samplesPerChunk)});var S=u.length;if(!(!S||a&&!u[0].keyframe)){var E=[],Z=[],R=0,M,O=0,z=function(le){var Ce;M=Z[Z.length-1],E.push({index:E.length,startTime:((Ce=E[E.length-1])===null||Ce===void 0?void 0:Ce.endTime)||Z[0].startTime/s,endTime:(M.startTime+M.duration)/s,duration:le,range:[Z[0].offset,M.offset+M.size],frames:Z}),R=0,Z=[]};if(a)for(var N=r*s,ne=0,B=c.length;ne<B;ne++){var qe;R+=d[ne],(qe=Z).push.apply(qe,eD(c[ne])),ne+1<B?(ne===0||R>N)&&z(R/s):z(R/s)}else{l=l||[];for(var Xe=l[0]||r,ze=0;ze<S;ze++){Z.push(u[ze]),R+=u[ze].duration;var te=R/s;(ze+1>=S||te+O>=Xe)&&(O+=te-Xe,z(te),Xe=l[E.length]||r)}}return E}}function cp(r){var s="",n="",t=0,e=0,i=0,a=0,o=0,l=0,u=0;r.mvhd&&(o=r.mvhd.duration/r.mvhd.timescale);var c=r.trak;if(c){var d=c.find(function(E){var Z,R;return((Z=E.mdia)===null||Z===void 0||(R=Z.hdlr)===null||R===void 0?void 0:R.handlerType)==="vide"}),p=c.find(function(E){var Z,R;return((Z=E.mdia)===null||Z===void 0||(R=Z.hdlr)===null||R===void 0?void 0:R.handlerType)==="soun"}),h=null,m;if(d){var f,v,b;if(h=(f=d.mdia)===null||f===void 0||(v=f.minf)===null||v===void 0||(b=v.stbl)===null||b===void 0?void 0:b.stsd.entries[0],h){var w,C,T;if(t=h.width,e=h.height,l=(w=d.mdia)===null||w===void 0||(C=w.mdhd)===null||C===void 0?void 0:C.timescale,s=(T=h.avcC||h.hvcC)===null||T===void 0?void 0:T.codec,h.type==="encv"){var L,_;m=(L=h.sinf)===null||L===void 0||(_=L.schi)===null||_===void 0?void 0:_.tenc.default_KID}}}if(p){var D,x,P;if(h=(D=p.mdia)===null||D===void 0||(x=D.minf)===null||x===void 0||(P=x.stbl)===null||P===void 0?void 0:P.stsd.entries[0],h){var I,V,g;if(i=h.channelCount,a=h.sampleRate,n=(I=h.esds)===null||I===void 0?void 0:I.codec,u=(V=p.mdia)===null||V===void 0||(g=V.mdhd)===null||g===void 0?void 0:g.timescale,h.type==="enca"){var y,S;m=m||((y=h.sinf)===null||y===void 0||(S=y.schi)===null||S===void 0?void 0:S.tenc.default_KID)}}}return{kid:m?m.join(""):null,videoCodec:s,audioCodec:n,width:t,height:e,videoTimescale:l,audioChannelCount:i,audioSampleRate:a,duration:o,audioTimescale:u,moov:r}}}function dp(r){return typeof r=="number"&&!Number.isNaN(r)}var uD=["vid","cache"],cD=function(r){zZ(n,r);var s=$Z(n);function n(t){var e;Lu(this,n),e=s.call(this),jt(rn(e),"vid",""),jt(rn(e),"url",""),jt(rn(e),"meta",{}),jt(rn(e),"downloadInfo",[]),jt(rn(e),"videoSegments",[]),jt(rn(e),"audioSegments",[]),jt(rn(e),"cache",null),jt(rn(e),"_currentSegmentIndex",-1),jt(rn(e),"_currentLoadingSegmentIndex",-1),jt(rn(e),"buffer",void 0),jt(rn(e),"_error",void 0),jt(rn(e),"_transformError",function(u){return u}),e._config=oD(t);var i=e._config,a=i.vid,o=i.cache,l=JZ(i,uD);return e.cache=o||new lD,e.vid=a||l.url,e.url=l.url,l.transformError=e._transformError,e.logger=new Kt("MP4Loader_"+e.vid),t.openLog&&Kt.enable(),l.logger=e.logger,e._loader=new Wr(l),e._loader.on(j.REAL_TIME_SPEED,function(u){e.emit(j.REAL_TIME_SPEED,u)}),e}return Tu(n,[{key:"isMetaLoaded",get:function(){return this.videoSegments.length||this.audioSegments.length}},{key:"setCurrentSegment",value:function(e){dp(e)&&(this._currentSegmentIndex=e)}},{key:"isLastSegment",value:function(e){if(dp(e)){var i,a,o=((i=this.videoSegments[this.videoSegments.length-1])===null||i===void 0?void 0:i.index)||((a=this.audioSegments[this.audioSegments.length-1])===null||a===void 0?void 0:a.index)||0;return e>=o}return!1}},{key:"isSegmentLoading",value:function(e){return e===this._currentLoadingSegmentIndex}},{key:"changeUrl",value:function(){var t=nn(je().mark(function i(a){var o,l,u,c=arguments;return je().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return o=c.length>1&&c[1]!==void 0?c[1]:a,l=c.length>2?c[2]:void 0,u=c.length>3?c[3]:void 0,p.next=5,this.reset(u);case 5:a&&(this.url=a),o&&(this.vid=o),l&&(this._config.moovEnd=l);case 8:case"end":return p.stop()}},i,this)}));function e(i){return t.apply(this,arguments)}return e}()},{key:"getOrLoadMeta",value:function(){var t=nn(je().mark(function i(a){return je().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.isMetaLoaded){l.next=3;break}return l.next=3,this.loadMeta(a);case 3:return l.abrupt("return",this.meta);case 4:case"end":return l.stop()}},i,this)}));function e(i){return t.apply(this,arguments)}return e}()},{key:"loadMetaProcess",value:function(){var t=nn(je().mark(function i(a,o,l,u){var c=this,d,p,h,m;return je().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return d=qZ(o,2),p=d[0],h=d[1],this._error=!1,this.logger.debug("[loadMetaProcess start], range,",[p,h]),m=function(){var b=nn(je().mark(function w(C,T,L){var _,D,x,P,I,V,g,y;return je().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(c.meta&&L!==null&&L!==void 0&&L.range&&L.range.length>0&&L.range[1]>=h&&(T=!0,c.logger.debug("[loadMetaProcess],data done,setstate true,[",p,h,"]")),T&&L!==null&&L!==void 0&&L.range&&L.range.length>0&&L.range[1]<h&&(T=!1,c.logger.debug("[loadMetaProcess],data not done,setstate false,[",p,h,"]")),c.logger.debug("[loadMetaProcess],task,[",p,h,"], range,",L.range,",dataLen,",C?C.byteLength:void 0,", state,",T,",err,",c._error),!c._error&&C&&C.byteLength>0&&l(C,T,L),!(c.meta.moov||c._error)){E.next=6;break}return E.abrupt("return");case 6:if(!(C&&C.byteLength>0)){E.next=44;break}if(c.buffer=ni(c.buffer,C),_=Ye.findBox(c.buffer,["moov"])[0],_){E.next=23;break}if(D=Ye.findBox(c.buffer,["mdat"])[0],!T){E.next=23;break}if(D){E.next=18;break}return c._error=!0,l(null,T,L,{err:"cannot find moov or mdat box"}),E.abrupt("return");case 18:return x=D.start+D.size,E.next=21,c.loadData([x,""],a,u);case 21:P=E.sent,P&&(_=Ye.findBox(P.data,["moov"])[0]);case 23:if(!(_&&T&&_.size>_.data.length)){E.next=27;break}return c.logger.debug("[loadMetaProcess],moov not all, range,",L.range[1],",dataLen,",c.buffer.byteLength,", state,",T),E.next=27,c.loadMetaProcess(a,[L.range[1],_.start+_.size-1],l);case 27:if(!(_&&_.size<=_.data.length&&!c.meta.moov)){E.next=44;break}if(I=Ye.moov(_),I){E.next=33;break}return c._error=!0,l(null,T,L,{err:"cannot parse moov box"}),E.abrupt("return");case 33:if(V=Uo(I,c._config.segmentDuration),V){E.next=38;break}return c._error=!0,l(null,T,L,{err:"cannot parse segments"}),E.abrupt("return");case 38:c.meta=cp(I),g=V.videoSegments,y=V.audioSegments,c.videoSegments=g,c.audioSegments=y,c.logger.debug("[loadMetaProcess] moov ok"),l(void 0,T,{meta:{meta:c.meta,videoSegments:g,audioSegments:y}});case 44:case"end":return E.stop()}},w)}));return function(C,T,L){return b.apply(this,arguments)}}(),v.next=6,this.loadData([p,h||this._config.moovEnd],a,kl({onProgress:m},u));case 6:case"end":return v.stop()}},i,this)}));function e(i,a,o,l){return t.apply(this,arguments)}return e}()},{key:"loadMeta",value:function(){var t=nn(je().mark(function i(a,o,l){var u,c,d,p,h,m,f,v,b;return je().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return u=[],this.logger.debug("[loadMeta start]"),C.next=4,this.loadData([0,o||this._config.moovEnd],a,l);case 4:if(c=C.sent,c){C.next=7;break}return C.abrupt("return");case 7:if(u.push(c),d=Ye.findBox(c.data,["moov"])[0],d){C.next=23;break}if(p=Ye.findBox(c.data,["mdat"])[0],p){C.next=13;break}throw new sa("cannot find moov or mdat box",c.data);case 13:return h=p.start+p.size,C.next=16,this.loadData([h],a,l);case 16:if(c=C.sent,c){C.next=19;break}return C.abrupt("return");case 19:if(u.push(c),d=Ye.findBox(c.data,["moov"],h)[0],d){C.next=23;break}throw new sa("cannot find moov box",c.data);case 23:if(!(d.size>d.data.length)){C.next=31;break}return C.next=26,this.loadData([c.data.length,d.start+d.size-1],a,l);case 26:if(c=C.sent,c){C.next=29;break}return C.abrupt("return");case 29:u.push(c),d.data=ni(d.data,c.data);case 31:if(m=Ye.moov(d),m){C.next=34;break}throw new sa("cannot parse moov box",d.data);case 34:if(f=Uo(m,this._config.segmentDuration),f){C.next=37;break}throw new sa("cannot parse segments",d.data);case 37:return this.meta=cp(m),v=f.videoSegments,b=f.audioSegments,this.videoSegments=v,this.audioSegments=b,this.logger.debug("[load moov end!!!!!]"),C.abrupt("return",{meta:this.meta,videoSegments:v,audioSegments:b,responses:u});case 43:case"end":return C.stop()}},i,this)}));function e(i,a,o){return t.apply(this,arguments)}return e}()},{key:"loadCacheMeta",value:function(e,i){var a=e.moov,o=Uo(a,this._config.segmentDuration),l=o.videoSegments,u=o.audioSegments;this.videoSegments=l,this.audioSegments=u,this._currentSegmentIndex=i,this.meta=e}},{key:"getSegmentByTime",value:function(e){var i,a;return this.videoSegments.length?(i=this.videoSegments.find(function(o){return o.startTime<=e&&o.endTime>e}),i&&(a=this.audioSegments[i.index])):a=this.audioSegments.find(function(o){return o.startTime<=e&&o.endTime>e}),{video:i,audio:a}}},{key:"loadSegmentByTime",value:function(){var t=nn(je().mark(function i(a,o){var l,u,c,d,p,h=arguments;return je().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(l=h.length>2&&h[2]!==void 0?h[2]:!0,u=h.length>3&&h[3]!==void 0?h[3]:{},this.isMetaLoaded){f.next=5;break}return f.next=5,this.loadMeta(o);case 5:return c=this.getSegmentByTime(a),d=c.video,p=c.audio,f.abrupt("return",this._loadSegment(d,p,o,l,u));case 7:case"end":return f.stop()}},i,this)}));function e(i,a){return t.apply(this,arguments)}return e}()},{key:"loadNextSegment",value:function(){var t=nn(je().mark(function i(a){var o,l,u,c,d=arguments;return je().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(o=d.length>1&&d[1]!==void 0?d[1]:!0,l=d.length>2&&d[2]!==void 0?d[2]:{},this.isMetaLoaded){h.next=5;break}return h.next=5,this.loadMeta();case 5:return u=this.videoSegments[this._currentSegmentIndex+1],c=this.audioSegments[this._currentSegmentIndex+1],h.abrupt("return",this._loadSegment(u,c,a,o,l));case 8:case"end":return h.stop()}},i,this)}));function e(i){return t.apply(this,arguments)}return e}()},{key:"preload",value:function(){var t=nn(je().mark(function i(a){var o=this,l,u,c,d,p,h,m;return je().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this.isMetaLoaded){v.next=3;break}return v.next=3,this.loadMeta(!0);case 3:if(!(!a||a<0)){v.next=5;break}return v.abrupt("return");case 5:if(l=this.getSegmentByTime(a),u=l.video,c=l.audio,d=Math.max((u==null?void 0:u.index)||0,(c==null?void 0:c.index)||0),d){v.next=9;break}return v.abrupt("return");case 9:return p=this.videoSegments.slice(0,d),h=this.audioSegments.slice(0,d),m=function(){var b=nn(je().mark(function w(C){return je().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!(C>d)){L.next=2;break}return L.abrupt("return");case 2:return L.next=4,o._loadSegment(p[C],h[C],!0,!1);case 4:return L.next=6,m(C+1);case 6:case"end":return L.stop()}},w)}));return function(C){return b.apply(this,arguments)}}(),v.next=14,m(0);case 14:case"end":return v.stop()}},i,this)}));function e(i){return t.apply(this,arguments)}return e}()},{key:"cancel",value:function(){return this._loader.cancel()}},{key:"reset",value:function(){var t=nn(je().mark(function i(){var a,o=arguments;return je().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a=o.length>0&&o[0]!==void 0?o[0]:!1,a){u.next=5;break}return this.logger.debug("[MP4loader reset func call loader.cancel]"),u.next=5,this._loader.cancel();case 5:this.vid=this.url="",this.meta={},this.downloadInfo=[],this.videoSegments=[],this.audioSegments=[],this._currentSegmentIndex=-1,this._currentLoadingSegmentIndex=-1;case 12:case"end":return u.stop()}},i,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"destroy",value:function(){var t=nn(je().mark(function i(){return je().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.reset();case 2:this.cache.clear();case 3:case"end":return o.stop()}},i,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_loadSegment",value:function(){var t=nn(je().mark(function i(a,o,l,u,c){var d,p;return je().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!(!a&&!o)){m.next=2;break}return m.abrupt("return");case 2:return d=(a==null?void 0:a.index)||(o==null?void 0:o.index)||0,this._currentLoadingSegmentIndex=d,m.prev=4,m.next=7,this.loadData([Math.min((a==null?void 0:a.range[0])||1/0,(o==null?void 0:o.range[0])||1/0),Math.max((a==null?void 0:a.range[1])||0,(o==null?void 0:o.range[1])||0)],l,c);case 7:p=m.sent;case 8:return m.prev=8,this._currentLoadingSegmentIndex=-1,m.finish(8);case 11:if(p){m.next=13;break}return m.abrupt("return");case 13:return u&&(this._currentSegmentIndex=d),p.video=a,p.audio=o,m.abrupt("return",p);case 17:case"end":return m.stop()}},i,this,[[4,,8,11]])}));function e(i,a,o,l,u){return t.apply(this,arguments)}return e}()},{key:"loadData",value:function(){var t=nn(je().mark(function i(a,o,l){var u,c,d,p;return je().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return u=this._getCacheKey(a),m.next=3,this.cache.get(u);case 3:if(c=m.sent,c){m.next=11;break}return p=l&&l.url?l.url:this.url,m.next=8,this._loader.load(p,kl({range:a,vid:this.vid},l));case 8:d=m.sent,m.next=12;break;case 11:d={data:c,state:!0,options:{fromCache:!0,range:a,vid:this.vid}};case 12:if(d){m.next=14;break}return m.abrupt("return");case 14:return c||(d.data&&this.downloadInfo.push({startTime:d.startTime,endTime:d.endTime,size:d.data.byteLength,range:a}),this.downloadInfo&&this.downloadInfo.length>this._config.maxDownloadInfoSize&&(this.downloadInfo=this.downloadInfo.slice(-this._config.maxDownloadInfoSize))),m.abrupt("return",d);case 17:case"end":return m.stop()}},i,this)}));function e(i,a,o){return t.apply(this,arguments)}return e}()},{key:"_getCacheKey",value:function(e){return(this.vid||this.url)+":"+e}}]),n}(qn),Qf=fD(),dD=as();mD();function pD(){try{return typeof localStorage<"u"&&"setItem"in window.localStorage&&!!window.localStorage.setItem}catch{return!1}}function hD(){var r="_localstorage_support_test";try{return window.localStorage.setItem(r,!0),window.localStorage.removeItem(r),!1}catch{return!0}}function as(){if(Qf)try{return!!window.localStorage.getItem("playerlog")}catch{return!1}return!1}function fD(){return pD()&&!hD()}function $f(r){for(var s,n=arguments.length,t=new Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];dD&&console.log&&(s=console).log.apply(s,["[logger]",xn.nowTime(),r].concat(t))}function mD(){if(Qf)try{return!!window.localStorage.getItem("playertestlog")}catch{return!1}return!1}var qf="IWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUoZSx0KXt2YXIgcj1PYmplY3Qua2V5cyhlKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgYT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3QmJihhPWEuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpLmVudW1lcmFibGV9KSkpLHIucHVzaC5hcHBseShyLGEpfXJldHVybiByfWZ1bmN0aW9uIHQodCl7Zm9yKHZhciByPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl7dmFyIGE9bnVsbCE9YXJndW1lbnRzW3JdP2FyZ3VtZW50c1tyXTp7fTtyJTI/ZShPYmplY3QoYSksITApLmZvckVhY2goKGZ1bmN0aW9uKGUpe2kodCxlLGFbZV0pfSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoYSkpOmUoT2JqZWN0KGEpKS5mb3JFYWNoKChmdW5jdGlvbihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxlKSl9KSl9cmV0dXJuIHR9ZnVuY3Rpb24gcihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGEoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGE9dFtyXTthLmVudW1lcmFibGU9YS5lbnVtZXJhYmxlfHwhMSxhLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gYSYmKGEud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGsoYS5rZXkpLGEpfX1mdW5jdGlvbiBuKGUsdCxyKXtyZXR1cm4gdCYmYShlLnByb3RvdHlwZSx0KSxyJiZhKGUsciksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsInByb3RvdHlwZSIse3dyaXRhYmxlOiExfSksZX1mdW5jdGlvbiBpKGUsdCxyKXtyZXR1cm4odD1rKHQpKWluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6cixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09cixlfWZ1bmN0aW9uIHMoZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsInByb3RvdHlwZSIse3dyaXRhYmxlOiExfSksdCYmdShlLHQpfWZ1bmN0aW9uIG8oZSl7cmV0dXJuKG89T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCk6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9KShlKX1mdW5jdGlvbiB1KGUsdCl7cmV0dXJuKHU9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX1mdW5jdGlvbiBjKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZigiZnVuY3Rpb24iPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiExfX1mdW5jdGlvbiBsKGUsdCxyKXtyZXR1cm4obD1jKCk/UmVmbGVjdC5jb25zdHJ1Y3QuYmluZCgpOmZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1bbnVsbF07YS5wdXNoLmFwcGx5KGEsdCk7dmFyIG49bmV3KEZ1bmN0aW9uLmJpbmQuYXBwbHkoZSxhKSk7cmV0dXJuIHImJnUobixyLnByb3RvdHlwZSksbn0pLmFwcGx5KG51bGwsYXJndW1lbnRzKX1mdW5jdGlvbiBkKGUsdCl7aWYodCYmKCJvYmplY3QiPT10eXBlb2YgdHx8ImZ1bmN0aW9uIj09dHlwZW9mIHQpKXJldHVybiB0O2lmKHZvaWQgMCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWQiKTtyZXR1cm4gZnVuY3Rpb24oZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiBlfShlKX1mdW5jdGlvbiBmKGUpe3ZhciB0PWMoKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcixhPW8oZSk7aWYodCl7dmFyIG49byh0aGlzKS5jb25zdHJ1Y3RvcjtyPVJlZmxlY3QuY29uc3RydWN0KGEsYXJndW1lbnRzLG4pfWVsc2Ugcj1hLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gZCh0aGlzLHIpfX1mdW5jdGlvbiBoKGUsdCl7Zm9yKDshT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCkmJm51bGwhPT0oZT1vKGUpKTspO3JldHVybiBlfWZ1bmN0aW9uIHAoKXtyZXR1cm4gcD0idW5kZWZpbmVkIiE9dHlwZW9mIFJlZmxlY3QmJlJlZmxlY3QuZ2V0P1JlZmxlY3QuZ2V0LmJpbmQoKTpmdW5jdGlvbihlLHQscil7dmFyIGE9aChlLHQpO2lmKGEpe3ZhciBuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSx0KTtyZXR1cm4gbi5nZXQ/bi5nZXQuY2FsbChhcmd1bWVudHMubGVuZ3RoPDM/ZTpyKTpuLnZhbHVlfX0scC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gdihlLHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlfShlKXx8ZnVuY3Rpb24oZSx0KXt2YXIgcj1udWxsPT1lP251bGw6InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXXx8ZVsiQEBpdGVyYXRvciJdO2lmKG51bGwhPXIpe3ZhciBhLG4saSxzLG89W10sdT0hMCxjPSExO3RyeXtpZihpPShyPXIuY2FsbChlKSkubmV4dCwwPT09dCl7aWYoT2JqZWN0KHIpIT09cilyZXR1cm47dT0hMX1lbHNlIGZvcig7ISh1PShhPWkuY2FsbChyKSkuZG9uZSkmJihvLnB1c2goYS52YWx1ZSksby5sZW5ndGghPT10KTt1PSEwKTt9Y2F0Y2gobCl7Yz0hMCxuPWx9ZmluYWxseXt0cnl7aWYoIXUmJm51bGwhPXIucmV0dXJuJiYocz1yLnJldHVybigpLE9iamVjdChzKSE9PXMpKXJldHVybn1maW5hbGx5e2lmKGMpdGhyb3cgbn19cmV0dXJuIG99fShlLHQpfHxtKGUsdCl8fGZ1bmN0aW9uKCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX0oKX1mdW5jdGlvbiB5KGUpe3JldHVybiBmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBnKGUpfShlKXx8ZnVuY3Rpb24oZSl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJm51bGwhPWVbU3ltYm9sLml0ZXJhdG9yXXx8bnVsbCE9ZVsiQEBpdGVyYXRvciJdKXJldHVybiBBcnJheS5mcm9tKGUpfShlKXx8bShlKXx8ZnVuY3Rpb24oKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX0oKX1mdW5jdGlvbiBtKGUsdCl7aWYoZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiBnKGUsdCk7dmFyIHI9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsLTEpO3JldHVybiJPYmplY3QiPT09ciYmZS5jb25zdHJ1Y3RvciYmKHI9ZS5jb25zdHJ1Y3Rvci5uYW1lKSwiTWFwIj09PXJ8fCJTZXQiPT09cj9BcnJheS5mcm9tKGUpOiJBcmd1bWVudHMiPT09cnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qocik/ZyhlLHQpOnZvaWQgMH19ZnVuY3Rpb24gZyhlLHQpeyhudWxsPT10fHx0PmUubGVuZ3RoKSYmKHQ9ZS5sZW5ndGgpO2Zvcih2YXIgcj0wLGE9bmV3IEFycmF5KHQpO3I8dDtyKyspYVtyXT1lW3JdO3JldHVybiBhfWZ1bmN0aW9uIGsoZSl7dmFyIHQ9ZnVuY3Rpb24oZSx0KXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiBlO3ZhciByPWVbU3ltYm9sLnRvUHJpbWl0aXZlXTtpZih2b2lkIDAhPT1yKXt2YXIgYT1yLmNhbGwoZSx0fHwiZGVmYXVsdCIpO2lmKCJvYmplY3QiIT10eXBlb2YgYSlyZXR1cm4gYTt0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpfXJldHVybigic3RyaW5nIj09PXQ/U3RyaW5nOk51bWJlcikoZSl9KGUsInN0cmluZyIpO3JldHVybiJzeW1ib2wiPT10eXBlb2YgdD90OlN0cmluZyh0KX12YXIgYj0idmlkZW8iLF89ImF1ZGlvIix3PSJtZXRhZGF0YSIseD0iYXZjIixTPSJoZXZjIixBPSJhYWMiLEQ9Imc3MTEwYSIsRT0iZzcxMTBtIixCPSJMQVJHRV9BVl9TSElGVCIsVD0iTEFSR0VfVklERU9fR0FQIixDPSJMQVJHRV9WSURFT19HQVBfQkVUV0VFTl9DSFVOSyIsVT0iTEFSR0VfQVVESU9fR0FQIixQPSJBVURJT19GSUxMRUQiLEk9IkFVRElPX0RST1BQRUQiLHo9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpLGkodGhpcywiaWQiLDEpLGkodGhpcywidHlwZSIsYiksaSh0aGlzLCJjb2RlY1R5cGUiLHgpLGkodGhpcywicGlkIiwtMSksaSh0aGlzLCJodmNDIix2b2lkIDApLGkodGhpcywiY29kZWMiLCIiKSxpKHRoaXMsInRpbWVzY2FsZSIsMCksaSh0aGlzLCJmb3JtYXRUaW1lc2NhbGUiLDApLGkodGhpcywic2VxdWVuY2VOdW1iZXIiLDApLGkodGhpcywiYmFzZU1lZGlhRGVjb2RlVGltZSIsMCksaSh0aGlzLCJiYXNlRHRzIiwwKSxpKHRoaXMsImR1cmF0aW9uIiwwKSxpKHRoaXMsIndhcm5pbmdzIixbXSksaSh0aGlzLCJzYW1wbGVzIixbXSksaSh0aGlzLCJwcHMiLFtdKSxpKHRoaXMsInNwcyIsW10pLGkodGhpcywidnBzIixbXSksaSh0aGlzLCJmcHNOdW0iLDApLGkodGhpcywiZnBzRGVuIiwwKSxpKHRoaXMsInNhclJhdGlvIixbXSksaSh0aGlzLCJ3aWR0aCIsMCksaSh0aGlzLCJoZWlnaHQiLDApLGkodGhpcywibmFsVW5pdFNpemUiLDQpLGkodGhpcywicHJlc2VudCIsITEpLGkodGhpcywiaXNWaWRlb0VuY3J5cHRpb24iLCExKSxpKHRoaXMsImlzQXVkaW9FbmNyeXB0aW9uIiwhMSksaSh0aGlzLCJpc1ZpZGVvIiwhMCksaSh0aGlzLCJraWQiLG51bGwpLGkodGhpcywicHNzaCIsbnVsbCksaSh0aGlzLCJleHQiLHZvaWQgMCl9cmV0dXJuIG4oZSxbe2tleToicmVzZXQiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zZXF1ZW5jZU51bWJlcj10aGlzLndpZHRoPXRoaXMuaGVpZ2h0PXRoaXMuZnBzRGVuPXRoaXMuZnBzTnVtPXRoaXMuZHVyYXRpb249dGhpcy5iYXNlTWVkaWFEZWNvZGVUaW1lPXRoaXMudGltZXNjYWxlPTAsdGhpcy5jb2RlYz0iIix0aGlzLnByZXNlbnQ9ITEsdGhpcy5waWQ9LTEsdGhpcy5wcHM9W10sdGhpcy5zcHM9W10sdGhpcy52cHM9W10sdGhpcy5zYXJSYXRpbz1bXSx0aGlzLnNhbXBsZXM9W10sdGhpcy53YXJuaW5ncz1bXSx0aGlzLmh2Y0M9bnVsbH19LHtrZXk6ImV4aXN0Iix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiEhKHRoaXMucHBzLmxlbmd0aCYmdGhpcy5zcHMubGVuZ3RoJiZ0aGlzLmNvZGVjKX19LHtrZXk6Imhhc1NhbXBsZSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuc2FtcGxlcy5sZW5ndGh9fSx7a2V5OiJpc0VuY3J5cHRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmlkZW9FbmNyeXB0aW9ufX1dKSxlfSgpLE09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpLGkodGhpcywiaWQiLDIpLGkodGhpcywidHlwZSIsXyksaSh0aGlzLCJjb2RlY1R5cGUiLEEpLGkodGhpcywicGlkIiwtMSksaSh0aGlzLCJjb2RlYyIsIiIpLGkodGhpcywic2VxdWVuY2VOdW1iZXIiLDApLGkodGhpcywic2FtcGxlRHVyYXRpb24iLDApLGkodGhpcywidGltZXNjYWxlIiwwKSxpKHRoaXMsImZvcm1hdFRpbWVzY2FsZSIsMCksaSh0aGlzLCJiYXNlTWVkaWFEZWNvZGVUaW1lIiwwKSxpKHRoaXMsImR1cmF0aW9uIiwwKSxpKHRoaXMsIndhcm5pbmdzIixbXSksaSh0aGlzLCJzYW1wbGVzIixbXSksaSh0aGlzLCJiYXNlRHRzIiwwKSxpKHRoaXMsInNhbXBsZVNpemUiLDE2KSxpKHRoaXMsInNhbXBsZVJhdGUiLDApLGkodGhpcywiY2hhbm5lbENvdW50IiwwKSxpKHRoaXMsIm9iamVjdFR5cGUiLDApLGkodGhpcywic2FtcGxlUmF0ZUluZGV4IiwwKSxpKHRoaXMsImNvbmZpZyIsW10pLGkodGhpcywicHJlc2VudCIsITEpLGkodGhpcywiaXNWaWRlb0VuY3J5cHRpb24iLCExKSxpKHRoaXMsImlzQXVkaW9FbmNyeXB0aW9uIiwhMSksaSh0aGlzLCJraWQiLG51bGwpLGkodGhpcywiZXh0Iix2b2lkIDApfXJldHVybiBuKGUsW3trZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc2VxdWVuY2VOdW1iZXI9MCx0aGlzLnRpbWVzY2FsZT0wLHRoaXMuc2FtcGxlRHVyYXRpb249MCx0aGlzLnNhbXBsZVJhdGU9MCx0aGlzLmNoYW5uZWxDb3VudD0wLHRoaXMuYmFzZU1lZGlhRGVjb2RlVGltZT0wLHRoaXMucHJlc2VudD0hMSx0aGlzLnBpZD0tMSx0aGlzLmNvZGVjPSIiLHRoaXMuc2FtcGxlcz1bXSx0aGlzLmNvbmZpZz1bXSx0aGlzLndhcm5pbmdzPVtdfX0se2tleToiZXhpc3QiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuISEodGhpcy5zYW1wbGVSYXRlJiZ0aGlzLmNoYW5uZWxDb3VudCYmdGhpcy5jb2RlYyYmdGhpcy5jb2RlY1R5cGU9PT1BKX19LHtrZXk6Imhhc1NhbXBsZSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuc2FtcGxlcy5sZW5ndGh9fSx7a2V5OiJpc0VuY3J5cHRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQXVkaW9FbmNyeXB0aW9ufX1dKSxlfSgpLFI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsYSxuKXtyKHRoaXMsZSksaSh0aGlzLCJmbGFnIix7fSksaSh0aGlzLCJrZXlmcmFtZSIsITEpLGkodGhpcywiZ29wSWQiLDApLGkodGhpcywiZHVyYXRpb24iLDApLGkodGhpcywic2l6ZSIsMCksaSh0aGlzLCJ1bml0cyIsW10pLGkodGhpcywiY2hyb21hRm9ybWF0Iiw0MjApLHRoaXMub3JpZ2luUHRzPXRoaXMucHRzPXQsdGhpcy5vcmlnaW5EdHM9dGhpcy5kdHM9YSxuJiYodGhpcy51bml0cz1uKX1yZXR1cm4gbihlLFt7a2V5OiJjdHMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0cy10aGlzLmR0c319LHtrZXk6InNldFRvS2V5ZnJhbWUiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5rZXlmcmFtZT0hMCx0aGlzLmZsYWcuZGVwZW5kc09uPTIsdGhpcy5mbGFnLmlzTm9uU3luY1NhbXBsZT0wfX1dKSxlfSgpLE89bigoZnVuY3Rpb24gZSh0LGEsbixzKXtyKHRoaXMsZSksaSh0aGlzLCJkdXJhdGlvbiIsMTAyNCksaSh0aGlzLCJmbGFnIix7ZGVwZW5kc09uOjIsaXNOb25TeW5jU2FtcGxlOjB9KSxpKHRoaXMsImtleWZyYW1lIiwhMCksdGhpcy5vcmlnaW5QdHM9dGhpcy5wdHM9dGhpcy5kdHM9dCx0aGlzLmRhdGE9YSx0aGlzLnNpemU9YS5ieXRlTGVuZ3RoLHRoaXMuc2FtcGxlT2Zmc2V0PXMsbiYmKHRoaXMuZHVyYXRpb249bil9KSksTD1uKChmdW5jdGlvbiBlKHQsYSl7cih0aGlzLGUpLGkodGhpcywidGltZSIsMCksdGhpcy5kYXRhPXQsdGhpcy5vcmlnaW5QdHM9dGhpcy5wdHM9YX0pKSxWPWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1mKGEpO2Z1bmN0aW9uIGEoKXtyZXR1cm4gcih0aGlzLGEpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBuKGEpfShMKSxGPWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1mKGEpO2Z1bmN0aW9uIGEoKXtyZXR1cm4gcih0aGlzLGEpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBuKGEpfShMKSxOPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3IodGhpcyxlKSxpKHRoaXMsImlkIiwzKSxpKHRoaXMsInR5cGUiLHcpLGkodGhpcywidGltZXNjYWxlIiwwKSxpKHRoaXMsImZsdlNjcmlwdFNhbXBsZXMiLFtdKSxpKHRoaXMsInNlaVNhbXBsZXMiLFtdKX1yZXR1cm4gbihlLFt7a2V5OiJleGlzdCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hKCF0aGlzLmZsdlNjcmlwdFNhbXBsZXMubGVuZ3RoJiYhdGhpcy5zZWlTYW1wbGVzLmxlbmd0aHx8IXRoaXMudGltZXNjYWxlKX19LHtrZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudGltZXNjYWxlPTAsdGhpcy5mbHZTY3JpcHRTYW1wbGVzPVtdLHRoaXMuc2VpU2FtcGxlcz1bXX19LHtrZXk6Imhhc1NhbXBsZSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hKCF0aGlzLmZsdlNjcmlwdFNhbXBsZXMubGVuZ3RoJiYhdGhpcy5zZWlTYW1wbGVzLmxlbmd0aCl9fV0pLGV9KCksaj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7aWYocih0aGlzLGUpLGkodGhpcywiX2J5dGVzQXZhaWxhYmxlIix2b2lkIDApLGkodGhpcywiX2JpdHNBdmFpbGFibGUiLDApLGkodGhpcywiX3dvcmQiLDApLCF0KXRocm93IG5ldyBFcnJvcigiRXhwR29sb21iIGRhdGEgcGFyYW1zIGlzIHJlcXVpcmVkIik7dGhpcy5fZGF0YT10LHRoaXMuX2J5dGVzQXZhaWxhYmxlPXQuYnl0ZUxlbmd0aCx0aGlzLl9ieXRlc0F2YWlsYWJsZSYmdGhpcy5fbG9hZFdvcmQoKX1yZXR1cm4gbihlLFt7a2V5OiJfbG9hZFdvcmQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZGF0YS5ieXRlTGVuZ3RoLXRoaXMuX2J5dGVzQXZhaWxhYmxlLHQ9TWF0aC5taW4oNCx0aGlzLl9ieXRlc0F2YWlsYWJsZSk7aWYoMD09PXQpdGhyb3cgbmV3IEVycm9yKCJObyBieXRlcyBhdmFpbGFibGUiKTt2YXIgcj1uZXcgVWludDhBcnJheSg0KTtyLnNldCh0aGlzLl9kYXRhLnN1YmFycmF5KGUsZSt0KSksdGhpcy5fd29yZD1uZXcgRGF0YVZpZXcoci5idWZmZXIpLmdldFVpbnQzMigwKSx0aGlzLl9iaXRzQXZhaWxhYmxlPTgqdCx0aGlzLl9ieXRlc0F2YWlsYWJsZS09dH19LHtrZXk6InNraXBCaXRzIix2YWx1ZTpmdW5jdGlvbihlKXtpZih0aGlzLl9iaXRzQXZhaWxhYmxlPmUpdGhpcy5fd29yZDw8PWUsdGhpcy5fYml0c0F2YWlsYWJsZS09ZTtlbHNle2UtPXRoaXMuX2JpdHNBdmFpbGFibGU7dmFyIHQ9TWF0aC5mbG9vcihlLzgpO2UtPTgqdCx0aGlzLl9ieXRlc0F2YWlsYWJsZS09dCx0aGlzLl9sb2FkV29yZCgpLHRoaXMuX3dvcmQ8PD1lLHRoaXMuX2JpdHNBdmFpbGFibGUtPWV9fX0se2tleToicmVhZEJpdHMiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGU+MzIpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgcmVhZCBtb3JlIHRoYW4gMzIgYml0cyIpO3ZhciB0PU1hdGgubWluKHRoaXMuX2JpdHNBdmFpbGFibGUsZSkscj10aGlzLl93b3JkPj4+MzItdDtyZXR1cm4gdGhpcy5fYml0c0F2YWlsYWJsZS09dCx0aGlzLl9iaXRzQXZhaWxhYmxlPjA/dGhpcy5fd29yZDw8PXQ6dGhpcy5fYnl0ZXNBdmFpbGFibGU+MCYmdGhpcy5fbG9hZFdvcmQoKSwodD1lLXQpPjAmJnRoaXMuX2JpdHNBdmFpbGFibGU/cjw8dHx0aGlzLnJlYWRCaXRzKHQpOnJ9fSx7a2V5OiJza2lwTFoiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU7Zm9yKGU9MDtlPHRoaXMuX2JpdHNBdmFpbGFibGU7KytlKWlmKDAhPSh0aGlzLl93b3JkJjIxNDc0ODM2NDg+Pj5lKSlyZXR1cm4gdGhpcy5fd29yZDw8PWUsdGhpcy5fYml0c0F2YWlsYWJsZS09ZSxlO3JldHVybiB0aGlzLl9sb2FkV29yZCgpLGUrdGhpcy5za2lwTFooKX19LHtrZXk6InNraXBVRUciLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5za2lwQml0cygxK3RoaXMuc2tpcExaKCkpfX0se2tleToicmVhZFVFRyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNraXBMWigpO3JldHVybiB0aGlzLnJlYWRCaXRzKGUrMSktMX19LHtrZXk6InJlYWRFRyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJlYWRVRUcoKTtyZXR1cm4gMSZlPzErZT4+PjE6LTEqKGU+Pj4xKX19LHtrZXk6InJlYWRCb29sIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5yZWFkQml0cygxKX19LHtrZXk6InJlYWRVQnl0ZSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWFkQml0cyg4KX19LHtrZXk6InNraXBTY2FsaW5nTGlzdCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTgscj04LGE9MDthPGU7YSsrKTAhPT1yJiYocj0odCt0aGlzLnJlYWRFRygpKzI1NiklMjU2KSx0PTA9PT1yP3Q6cn19XSksZX0oKSxHPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtyKHRoaXMsZSksdGhpcy5uYW1lPXR8fCIiLHRoaXMuX3ByZWZpeD0iWyIuY29uY2F0KHRoaXMubmFtZSwiXSIpfXJldHVybiBuKGUsW3trZXk6Indhcm4iLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ7aWYoIWUuZGlzYWJsZWQpe2Zvcih2YXIgcj1hcmd1bWVudHMubGVuZ3RoLGE9bmV3IEFycmF5KHIpLG49MDtuPHI7bisrKWFbbl09YXJndW1lbnRzW25dOyh0PWNvbnNvbGUpLndhcm4uYXBwbHkodCxbdGhpcy5fcHJlZml4XS5jb25jYXQoYSkpfX19XSxbe2tleToiZW5hYmxlIix2YWx1ZTpmdW5jdGlvbigpe2UuZGlzYWJsZWQ9ITF9fSx7a2V5OiJkaXNhYmxlIix2YWx1ZTpmdW5jdGlvbigpe2UuZGlzYWJsZWQ9ITB9fV0pLGV9KCk7aShHLCJkaXNhYmxlZCIsITApO3ZhciBIPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3IodGhpcyxlKX1yZXR1cm4gbihlLG51bGwsW3trZXk6ImRlY29kZSIsdmFsdWU6ZnVuY3Rpb24odCl7Zm9yKHZhciByPVtdLGE9dCxuPTAsaT10Lmxlbmd0aDtuPGk7KWlmKGFbbl08MTI4KXIucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGFbbl0pKSwrK247ZWxzZXtpZihhW25dPDE5Mik7ZWxzZSBpZihhW25dPDIyNCl7aWYoZS5fY2hlY2tDb250aW51YXRpb24oYSxuLDEpKXt2YXIgcz0oMzEmYVtuXSk8PDZ8NjMmYVtuKzFdO2lmKHM+PTEyOCl7ci5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoNjU1MzUmcykpLG4rPTI7Y29udGludWV9fX1lbHNlIGlmKGFbbl08MjQwKXtpZihlLl9jaGVja0NvbnRpbnVhdGlvbihhLG4sMikpe3ZhciBvPSgxNSZhW25dKTw8MTJ8KDYzJmFbbisxXSk8PDZ8NjMmYVtuKzJdO2lmKG8+PTIwNDgmJjU1Mjk2IT0oNjM0ODgmbykpe3IucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKDY1NTM1Jm8pKSxuKz0zO2NvbnRpbnVlfX19ZWxzZSBpZihhW25dPDI0OCYmZS5fY2hlY2tDb250aW51YXRpb24oYSxuLDMpKXt2YXIgdT0oNyZhW25dKTw8MTh8KDYzJmFbbisxXSk8PDEyfCg2MyZhW24rMl0pPDw2fDYzJmFbbiszXTtpZih1PjY1NTM2JiZ1PDExMTQxMTIpe3UtPTY1NTM2LHIucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKHU+Pj4xMHw1NTI5NikpLHIucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKDEwMjMmdXw1NjMyMCkpLG4rPTQ7Y29udGludWV9fXIucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKDY1NTMzKSksKytufXJldHVybiByLmpvaW4oIiIpfX0se2tleToiX2NoZWNrQ29udGludWF0aW9uIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIGE9ZTtpZih0K3I8YS5sZW5ndGgpe2Zvcig7ci0tOylpZigxMjghPSgxOTImYVsrK3RdKSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4hMX19XSksZX0oKSxLPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93LHE9SyYmbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvY2FsZUxvd2VyQ2FzZSgpLFc9SyYmL14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpLy50ZXN0KHEpLFg9SyYmcS5pbmNsdWRlcygiZmlyZWZveCIpLFk9SyYmcS5pbmNsdWRlcygiYW5kcm9pZCIpO2Z1bmN0aW9uIFooKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShlKSxyPTA7cjxlO3IrKyl0W3JdPWFyZ3VtZW50c1tyXTt0PXQuZmlsdGVyKEJvb2xlYW4pO3ZhciBhPW5ldyBVaW50OEFycmF5KHQucmVkdWNlKChmdW5jdGlvbihlLHQpe3JldHVybiBlK3QuYnl0ZUxlbmd0aH0pLDApKSxuPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7YS5zZXQoZSxuKSxuKz1lLmJ5dGVMZW5ndGh9KSksYX12YXIgUT1NYXRoLnBvdygyLDMyKTtmdW5jdGlvbiBKKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTowO3JldHVybihlW3RdPDw4KSsoZVt0KzFdfHwwKX1mdW5jdGlvbiAkKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTowO3JldHVybihlW3RdPDwyND4+PjApKyhlW3QrMV08PDE2KSsoZVt0KzJdPDw4KSsoZVt0KzNdfHwwKX1mdW5jdGlvbiBlZShlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MDtyZXR1cm4gJChlLHQpKlErJChlLHQrNCl9ZnVuY3Rpb24gdGUoZSl7Zm9yKHZhciB0LHI9ImF2YzEuIixhPTA7YTwzO2ErKykodD1lW2FdLnRvU3RyaW5nKDE2KSkubGVuZ3RoPDImJih0PSIwIi5jb25jYXQodCkpLHIrPXQ7cmV0dXJuIHJ9ZnVuY3Rpb24gcmUoZSl7dmFyIHQ9IiI7aWYoZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Kz1mdW5jdGlvbihlKXtyZXR1cm4oIjAiK051bWJlcihlKS50b1N0cmluZygxNikpLnNsaWNlKC0yKS50b1VwcGVyQ2FzZSgpfShlKX0pKSx0Lmxlbmd0aDw9MzIpZm9yKHZhciByPTMyLXQubGVuZ3RoLGE9MDthPHI7YSsrKXQrPSIwIjtyZXR1cm4gdH1mdW5jdGlvbiBhZShlKXtpZighQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciB0PVtdLHI9IiIsYT0wO2E8ZS5sZW5ndGg7YSsrKWElMiYmKHI9ZVthLTFdK2VbYV0sdC5wdXNoKHBhcnNlSW50KHIsMTYpKSxyPSIiKTtyZXR1cm4gdH1yZXR1cm4gZS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUludChlLDE2KX0pKX12YXIgbmU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpfXJldHVybiBuKGUsbnVsbCxbe2tleToicGFyc2VBbm5leEIiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmxlbmd0aCxyPTIsYT0wO251bGwhPT1lW3JdJiZ2b2lkIDAhPT1lW3JdJiYxIT09ZVtyXTspcisrO2lmKChhPSsrcisyKT49dClyZXR1cm5bXTtmb3IodmFyIG49W107YTx0Oylzd2l0Y2goZVthXSl7Y2FzZSAwOmlmKDAhPT1lW2EtMV0pe2ErPTI7YnJlYWt9aWYoMCE9PWVbYS0yXSl7YSsrO2JyZWFrfXIhPT1hLTImJm4ucHVzaChlLnN1YmFycmF5KHIsYS0yKSk7ZG97YSsrfXdoaWxlKDEhPT1lW2FdJiZhPHQpO2E9KHI9YSsxKSsyO2JyZWFrO2Nhc2UgMTppZigwIT09ZVthLTFdfHwwIT09ZVthLTJdKXthKz0zO2JyZWFrfXIhPT1hLTImJm4ucHVzaChlLnN1YmFycmF5KHIsYS0yKSksYT0ocj1hKzEpKzI7YnJlYWs7ZGVmYXVsdDphKz0zfXJldHVybiByPHQmJm4ucHVzaChlLnN1YmFycmF5KHIpKSxufX0se2tleToicGFyc2VBdmNDIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06NDtpZighKGUubGVuZ3RoPDQpKXtmb3IodmFyIHIsYT1lLmxlbmd0aCxuPVtdLGk9MDtpK3Q8YTspaWYocj0kKGUsaSksMz09PXQmJihyPj4+PTgpLGkrPXQscil7aWYoaStyPmEpYnJlYWs7bi5wdXNoKGUuc3ViYXJyYXkoaSxpK3IpKSxpKz1yfXJldHVybiBufX19LHtrZXk6InBhcnNlU0VJIix2YWx1ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1lLmxlbmd0aCxhPXQ/MjoxLG49MCxpPTAscz0iIjsyNTU9PT1lW2FdOyluKz0yNTUsYSsrO2ZvcihuKz1lW2ErK107MjU1PT09ZVthXTspaSs9MjU1LGErKztpZihpKz1lW2ErK10sNT09PW4mJnI+YSsxNilmb3IodmFyIG89MDtvPDE2O28rKylzKz1lW2FdLnRvU3RyaW5nKDE2KSxhKys7cmV0dXJue3BheWxvYWQ6ZS5zdWJhcnJheShhKSx0eXBlOm4sc2l6ZTppLHV1aWQ6c319fSx7a2V5OiJyZW1vdmVFUEIiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmJ5dGVMZW5ndGgscj1bXSxhPTE7YTx0LTI7KTA9PT1lW2FdJiYwPT09ZVthKzFdJiYzPT09ZVthKzJdPyhyLnB1c2goYSsyKSxhKz0yKTphKys7aWYoIXIubGVuZ3RoKXJldHVybiBlO3ZhciBuPXQtci5sZW5ndGgsaT1uZXcgVWludDhBcnJheShuKSxzPTA7Zm9yKGE9MDthPG47cysrLGErKylzPT09clswXSYmKHMrKyxyLnNoaWZ0KCkpLGlbYV09ZVtzXTtyZXR1cm4gaX19XSksZX0oKSxpZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtyKHRoaXMsZSl9cmV0dXJuIG4oZSxudWxsLFt7a2V5OiJwYXJzZUFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkIix2YWx1ZTpmdW5jdGlvbih0KXtpZighKHQubGVuZ3RoPDcpKXtmb3IodmFyIHIsYSxuPTErKDMmdFs0XSksaT1bXSxzPVtdLG89Nix1PTMxJnRbNV0sYz0wO2M8dTtjKyspaWYoYT10W29dPDw4fHRbbysxXSxvKz0yLGEpe3ZhciBsPXQuc3ViYXJyYXkobyxvK2EpO28rPWEsaS5wdXNoKGwpLHJ8fChyPWUucGFyc2VTUFMobmUucmVtb3ZlRVBCKGwpKSl9dmFyIGQsZj10W29dO28rKztmb3IodmFyIGg9MDtoPGY7aCsrKWQ9dFtvXTw8OHx0W28rMV0sbys9MixkJiYocy5wdXNoKHQuc3ViYXJyYXkobyxvK2QpKSxvKz1kKTtyZXR1cm57c3BzOnIsc3BzQXJyOmkscHBzQXJyOnMsbmFsVW5pdFNpemU6bn19fX0se2tleToicGFyc2VTUFMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBqKGUpO3QucmVhZFVCeXRlKCk7dmFyIHI9dC5yZWFkVUJ5dGUoKSxhPXQucmVhZFVCeXRlKCksbj10LnJlYWRVQnl0ZSgpO3Quc2tpcFVFRygpO3ZhciBpPTQyMDtpZigxMDA9PT1yfHwxMTA9PT1yfHwxMjI9PT1yfHwyNDQ9PT1yfHw0ND09PXJ8fDgzPT09cnx8ODY9PT1yfHwxMTg9PT1yfHwxMjg9PT1yfHwxMzg9PT1yfHwxNDQ9PT1yKXt2YXIgcz10LnJlYWRVRUcoKTtpZihzPD0zJiYoaT1bMCw0MjAsNDIyLDQ0NF1bc10pLDM9PT1zJiZ0LnNraXBCaXRzKDEpLHQuc2tpcFVFRygpLHQuc2tpcFVFRygpLHQuc2tpcEJpdHMoMSksdC5yZWFkQm9vbCgpKWZvcih2YXIgbz0zIT09cz84OjEyLHU9MDt1PG87dSsrKXQucmVhZEJvb2woKSYmKHU8Nj90LnNraXBTY2FsaW5nTGlzdCgxNik6dC5za2lwU2NhbGluZ0xpc3QoNjQpKX10LnNraXBVRUcoKTt2YXIgYz10LnJlYWRVRUcoKTtpZigwPT09Yyl0LnJlYWRVRUcoKTtlbHNlIGlmKDE9PT1jKXt0LnNraXBCaXRzKDEpLHQuc2tpcFVFRygpLHQuc2tpcFVFRygpO2Zvcih2YXIgbD10LnJlYWRVRUcoKSxkPTA7ZDxsO2QrKyl0LnNraXBVRUcoKX10LnNraXBVRUcoKSx0LnNraXBCaXRzKDEpO3ZhciBmPXQucmVhZFVFRygpLGg9dC5yZWFkVUVHKCkscD10LnJlYWRCaXRzKDEpOzA9PT1wJiZ0LnNraXBCaXRzKDEpLHQuc2tpcEJpdHMoMSk7dmFyIHYseSxtLGcsayxiPTAsXz0wLHc9MCx4PTA7aWYodC5yZWFkQm9vbCgpJiYoYj10LnJlYWRVRUcoKSxfPXQucmVhZFVFRygpLHc9dC5yZWFkVUVHKCkseD10LnJlYWRVRUcoKSksdC5yZWFkQm9vbCgpKXtpZih0LnJlYWRCb29sKCkpc3dpdGNoKHQucmVhZFVCeXRlKCkpe2Nhc2UgMTp2PVsxLDFdO2JyZWFrO2Nhc2UgMjp2PVsxMiwxMV07YnJlYWs7Y2FzZSAzOnY9WzEwLDExXTticmVhaztjYXNlIDQ6dj1bMTYsMTFdO2JyZWFrO2Nhc2UgNTp2PVs0MCwzM107YnJlYWs7Y2FzZSA2OnY9WzI0LDExXTticmVhaztjYXNlIDc6dj1bMjAsMTFdO2JyZWFrO2Nhc2UgODp2PVszMiwxMV07YnJlYWs7Y2FzZSA5OnY9WzgwLDMzXTticmVhaztjYXNlIDEwOnY9WzE4LDExXTticmVhaztjYXNlIDExOnY9WzE1LDExXTticmVhaztjYXNlIDEyOnY9WzY0LDMzXTticmVhaztjYXNlIDEzOnY9WzE2MCw5OV07YnJlYWs7Y2FzZSAxNDp2PVs0LDNdO2JyZWFrO2Nhc2UgMTU6dj1bMywyXTticmVhaztjYXNlIDE2OnY9WzIsMV07YnJlYWs7Y2FzZSAyNTU6dj1bdC5yZWFkVUJ5dGUoKTw8OHx0LnJlYWRVQnl0ZSgpLHQucmVhZFVCeXRlKCk8PDh8dC5yZWFkVUJ5dGUoKV19aWYodC5yZWFkQm9vbCgpJiZ0LnJlYWRCb29sKCksdC5yZWFkQm9vbCgpJiYodC5yZWFkQml0cyg0KSx0LnJlYWRCb29sKCkmJnQucmVhZEJpdHMoMjQpKSx0LnJlYWRCb29sKCkmJih0LnJlYWRVRUcoKSx0LnJlYWRVRUcoKSksdC5yZWFkQm9vbCgpKXt2YXIgUz10LnJlYWRCaXRzKDMyKSxBPXQucmVhZEJpdHMoMzIpO3k9dC5yZWFkQm9vbCgpLGs9KG09QSkvKGc9MipTKX19cmV0dXJue2NvZGVjOnRlKGUuc3ViYXJyYXkoMSw0KSkscHJvZmlsZUlkYzpyLHByb2ZpbGVDb21wYXRpYmlsaXR5OmEsbGV2ZWxJZGM6bixjaHJvbWFGb3JtYXQ6aSx3aWR0aDpNYXRoLmNlaWwoMTYqKGYrMSktMiooYitfKSksaGVpZ2h0OigyLXApKihoKzEpKjE2LShwPzI6NCkqKHcreCksc2FyUmF0aW86dixmcHNOdW06bSxmcHNEZW46ZyxmcHM6ayxmaXhlZEZyYW1lOnl9fX1dKSxlfSgpLHNlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3IodGhpcyxlKX1yZXR1cm4gbihlLG51bGwsW3trZXk6ImdldFJhdGVJbmRleEJ5UmF0ZSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuRlJFUS5pbmRleE9mKHQpfX0se2tleToicGFyc2VBRFRTIix2YWx1ZTpmdW5jdGlvbih0LHIpe2Zvcih2YXIgYT10Lmxlbmd0aCxuPTA7bisyPGEmJigyNTUhPT10W25dfHwyNDAhPSgyNDYmdFtuKzFdKSk7KW4rKztpZighKG4+PWEpKXt2YXIgaT1uLHM9W10sbz0oNjAmdFtuKzJdKT4+PjIsdT1lLkZSRVFbb107aWYoIXUpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHNhbXBsaW5nIGluZGV4OiAiLmNvbmNhdChvKSk7Zm9yKHZhciBjLGwsZD0xKygoMTkyJnRbbisyXSk+Pj42KSxmPSgxJnRbbisyXSk8PDJ8KDE5MiZ0W24rM10pPj4+NixoPWUuX2dldENvbmZpZyhvLGYsZCkscD1oLmNvbmZpZyx2PWguY29kZWMseT0wLG09ZS5nZXRGcmFtZUR1cmF0aW9uKHUpO24rNzxhOylpZigyNTU9PT10W25dJiYyNDA9PSgyNDYmdFtuKzFdKSl7aWYoYS1uPChsPSgzJnRbbiszXSk8PDExfHRbbis0XTw8M3woMjI0JnRbbis1XSk+PjUpKWJyZWFrO2M9MiooMSZ+dFtuKzFdKSxzLnB1c2goe3B0czpyK3kqbSxkYXRhOnQuc3ViYXJyYXkobis3K2MsbitsKX0pLHkrKyxuKz1sfWVsc2UgbisrO3JldHVybntza2lwOmkscmVtYWluaW5nOm4+PWE/dm9pZCAwOnQuc3ViYXJyYXkobiksZnJhbWVzOnMsc2FtcGxpbmdGcmVxdWVuY3lJbmRleDpvLHNhbXBsZVJhdGU6dSxvYmplY3RUeXBlOmQsY2hhbm5lbENvdW50OmYsY29kZWM6dixjb25maWc6cCxvcmlnaW5Db2RlYzoibXA0YS40MC4iLmNvbmNhdChkKX19fX0se2tleToicGFyc2VBdWRpb1NwZWNpZmljQ29uZmlnIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0Lmxlbmd0aCl7dmFyIHI9dFswXT4+PjMsYT0oNyZ0WzBdKTw8MXx0WzFdPj4+NyxuPSgxMjAmdFsxXSk+Pj4zLGk9ZS5GUkVRW2FdO2lmKGkpe3ZhciBzPWUuX2dldENvbmZpZyhhLG4scik7cmV0dXJue3NhbXBsaW5nRnJlcXVlbmN5SW5kZXg6YSxzYW1wbGVSYXRlOmksb2JqZWN0VHlwZTpyLGNoYW5uZWxDb3VudDpuLGNvbmZpZzpzLmNvbmZpZyxjb2RlYzpzLmNvZGVjLG9yaWdpbkNvZGVjOiJtcDRhLjQwLiIuY29uY2F0KHIpfX19fX0se2tleToiZ2V0RnJhbWVEdXJhdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjllNDtyZXR1cm4gMTAyNCp0L2V9fSx7a2V5OiJfZ2V0Q29uZmlnIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIGEsbixpPVtdO3JldHVybiBYP2U+PTY/KGE9NSxuPWUtMyk6KGE9MixuPWUpOlk/KGE9MixuPWUpOihhPTI9PT1yfHw1PT09cj9yOjUsbj1lLGU+PTY/bj1lLTM6MT09PXQmJihhPTIsbj1lKSksaVswXT1hPDwzLGlbMF18PSgxNCZlKT4+MSxpWzFdPSgxJmUpPDw3LGlbMV18PXQ8PDMsNT09PWEmJihpWzFdfD0oMTQmbik+PjEsaVsyXT0oMSZuKTw8NyxpWzJdfD04LGlbM109MCkse2NvbmZpZzppLGNvZGVjOiJtcDRhLjQwLiIuY29uY2F0KGEpfX19LHtrZXk6ImdldFNpbGVudEZyYW1lIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKCJtcDRhLjQwLjIiPT09ZSl7aWYoMT09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDIwMCwwLDEyOCwzNSwxMjhdKTtpZigyPT09dClyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzMzLDAsNzMsMTQ0LDIsMjUsMCwzNSwxMjhdKTtpZigzPT09dClyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzAsMjAwLDAsMTI4LDMyLDEzMiwxLDM4LDY0LDgsMTAwLDAsMTQyXSk7aWYoND09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDIwMCwwLDEyOCwzMiwxMzIsMSwzOCw2NCw4LDEwMCwwLDEyOCw0NCwxMjgsOCwyLDU2XSk7aWYoNT09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDIwMCwwLDEyOCwzMiwxMzIsMSwzOCw2NCw4LDEwMCwwLDEzMCw0OCw0LDE1MywwLDMzLDE0NCwyLDU2XSk7aWYoNj09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDIwMCwwLDEyOCwzMiwxMzIsMSwzOCw2NCw4LDEwMCwwLDEzMCw0OCw0LDE1MywwLDMzLDE0NCwyLDAsMTc4LDAsMzIsOCwyMjRdKX1lbHNle2lmKDE9PT10KXJldHVybiBuZXcgVWludDhBcnJheShbMSw2NCwzNCwxMjgsMTYzLDc4LDIzMCwxMjgsMTg2LDgsMCwwLDAsMjgsNiwyNDEsMTkzLDEwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDk0XSk7aWYoMj09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFsxLDY0LDM0LDEyOCwxNjMsOTQsMjMwLDEyOCwxODYsOCwwLDAsMCwwLDE0OSwwLDYsMjQxLDE2MSwxMCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5NF0pO2lmKDM9PT10KXJldHVybiBuZXcgVWludDhBcnJheShbMSw2NCwzNCwxMjgsMTYzLDk0LDIzMCwxMjgsMTg2LDgsMCwwLDAsMCwxNDksMCw2LDI0MSwxNjEsMTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTRdKX19fV0pLGV9KCk7aShzZSwiRlJFUSIsWzk2ZTMsODgyMDAsNjRlMyw0OGUzLDQ0MTAwLDMyZTMsMjRlMywyMjA1MCwxNmUzLDEyZTMsMTEwMjUsOGUzLDczNTBdKTt2YXIgb2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpfXJldHVybiBuKGUsbnVsbCxbe2tleToicGFyc2VIRVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtpZighKHQubGVuZ3RoPDIzKSl7cj1yfHx7fTtmb3IodmFyIGEsbixpLHMsbyx1PTErKDMmdFsyMV0pLGM9W10sbD1bXSxkPVtdLGY9MjMsaD10WzIyXSxwPTA7cDxoO3ArKyl7aT02MyZ0W2ZdLHM9dFtmKzFdPDw4fHRbZisyXSxmKz0zO2Zvcih2YXIgdj0wO3Y8czt2KyspaWYobz10W2ZdPDw4fHRbZisxXSxmKz0yLG8pe3N3aXRjaChpKXtjYXNlIDMyOnZhciB5PXQuc3ViYXJyYXkoZixmK28pO2F8fChhPWUucGFyc2VWUFMobmUucmVtb3ZlRVBCKHkpLHIpKSxkLnB1c2goeSk7YnJlYWs7Y2FzZSAzMzp2YXIgbT10LnN1YmFycmF5KGYsZitvKTtufHwobj1lLnBhcnNlU1BTKG5lLnJlbW92ZUVQQihtKSxyKSksYy5wdXNoKG0pO2JyZWFrO2Nhc2UgMzQ6bC5wdXNoKHQuc3ViYXJyYXkoZixmK28pKX1mKz1vfX1yZXR1cm57aHZjQzpyLHNwczpuLHNwc0FycjpjLHBwc0FycjpsLHZwc0FycjpkLG5hbFVuaXRTaXplOnV9fX19LHtrZXk6InBhcnNlVlBTIix2YWx1ZTpmdW5jdGlvbih0LHIpe3I9cnx8e307dmFyIGE9bmV3IGoodCk7YS5yZWFkVUJ5dGUoKSxhLnJlYWRVQnl0ZSgpLGEucmVhZEJpdHMoMTIpO3ZhciBuPWEucmVhZEJpdHMoMyk7cmV0dXJuIHIubnVtVGVtcG9yYWxMYXllcnM9TWF0aC5tYXgoci5udW1UZW1wb3JhbExheWVyc3x8MCxuKzEpLGEucmVhZEJpdHMoMTcpLGUuX3BhcnNlUHJvZmlsZVRpZXJMZXZlbChhLG4scikscn19LHtrZXk6InBhcnNlU1BTIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cj1yfHx7fTt2YXIgYT1uZXcgaih0KTthLnJlYWRVQnl0ZSgpLGEucmVhZFVCeXRlKCksYS5yZWFkQml0cyg0KTt2YXIgbj1hLnJlYWRCaXRzKDMpO3IubnVtVGVtcG9yYWxMYXllcnM9TWF0aC5tYXgobisxLHIubnVtVGVtcG9yYWxMYXllcnN8fDApLHIudGVtcG9yYWxJZE5lc3RlZD1hLnJlYWRCaXRzKDEpLGUuX3BhcnNlUHJvZmlsZVRpZXJMZXZlbChhLG4sciksYS5yZWFkVUVHKCk7dmFyIGk9ci5jaHJvbWFGb3JtYXRJZGM9YS5yZWFkVUVHKCkscz00MjA7aTw9MyYmKHM9WzAsNDIwLDQyMiw0NDRdW2ldKTt2YXIgbz0wOzM9PT1pJiYobz1hLnJlYWRCaXRzKDEpKTt2YXIgdSxjLGwsZCxmPWEucmVhZFVFRygpLGg9YS5yZWFkVUVHKCkscD1hLnJlYWRCaXRzKDEpO2lmKDE9PT1wJiYodT1hLnJlYWRVRUcoKSxjPWEucmVhZFVFRygpLGw9YS5yZWFkVUVHKCksZD1hLnJlYWRVRUcoKSksci5iaXREZXB0aEx1bWFNaW51czg9YS5yZWFkVUVHKCksci5iaXREZXB0aENocm9tYU1pbnVzOD1hLnJlYWRVRUcoKSwxPT09cCl7dmFyIHY9MSE9PWkmJjIhPT1pfHwwIT09bz8xOjIseT0xPT09aSYmMD09PW8/MjoxO2YtPXYqKGMrdSksaC09eSooZCtsKX1yZXR1cm57Y29kZWM6ImhldjEuMS42Lkw5My5CMCIsd2lkdGg6ZixoZWlnaHQ6aCxjaHJvbWFGb3JtYXQ6cyxodmNDOnJ9fX0se2tleToiX3BhcnNlUHJvZmlsZVRpZXJMZXZlbCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBhPXIuZ2VuZXJhbFRpZXJGbGFnfHwwO3IuZ2VuZXJhbFByb2ZpbGVTcGFjZT1lLnJlYWRCaXRzKDIpLHIuZ2VuZXJhbFRpZXJGbGFnPU1hdGgubWF4KGUucmVhZEJpdHMoMSksYSksci5nZW5lcmFsUHJvZmlsZUlkYz1NYXRoLm1heChlLnJlYWRCaXRzKDUpLHIuZ2VuZXJhbFByb2ZpbGVJZGN8fDApLHIuZ2VuZXJhbFByb2ZpbGVDb21wYXRpYmlsaXR5RmxhZ3M9ZS5yZWFkQml0cygzMiksci5nZW5lcmFsQ29uc3RyYWludEluZGljYXRvckZsYWdzPVtlLnJlYWRCaXRzKDgpLGUucmVhZEJpdHMoOCksZS5yZWFkQml0cyg4KSxlLnJlYWRCaXRzKDgpLGUucmVhZEJpdHMoOCksZS5yZWFkQml0cyg4KV07dmFyIG49ZS5yZWFkQml0cyg4KTthPHIuZ2VuZXJhbFRpZXJGbGFnP3IuZ2VuZXJhbExldmVsSWRjPW46ci5nZW5lcmFsTGV2ZWxJZGM9TWF0aC5tYXgobixyLmdlbmVyYWxMZXZlbElkY3x8MCk7Zm9yKHZhciBpPVtdLHM9W10sbz0wO288dDtvKyspaVtvXT1lLnJlYWRCaXRzKDEpLHNbb109ZS5yZWFkQml0cygxKTt0PjAmJmUucmVhZEJpdHMoMiooOC10KSk7Zm9yKHZhciB1PTA7dTx0O3UrKykwIT09aVt1XSYmKGUucmVhZEJpdHMoMiksZS5yZWFkQml0cygxKSxlLnJlYWRCaXRzKDUpLGUucmVhZEJpdHMoMTYpLGUucmVhZEJpdHMoMTYpLGUucmVhZEJpdHMoNCksZS5yZWFkQml0cygxNiksZS5yZWFkQml0cygxNiksZS5yZWFkQml0cygxMikpLDAhPT1zW3VdJiZlLnJlYWRCaXRzKDgpfX1dKSxlfSgpLHVlPTFlMyxjZT01ZTMsbGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsYSxuKXtyKHRoaXMsZSksdGhpcy52aWRlb1RyYWNrPXQsdGhpcy5hdWRpb1RyYWNrPWEsdGhpcy5tZXRhZGF0YVRyYWNrPW4sdGhpcy5fYmFzZUR0cz0tMSx0aGlzLl9iYXNlRHRzSW5pdGVkPSExLHRoaXMuX2F1ZGlvTmV4dFB0cz12b2lkIDAsdGhpcy5fdmlkZW9OZXh0RHRzPXZvaWQgMCx0aGlzLl9hdWRpb1RpbWVzdGFtcEJyZWFrPTAsdGhpcy5fdmlkZW9UaW1lc3RhbXBCcmVhaz0wLHRoaXMuX2xhc3RWaWRlb0R1cmF0aW9uPTAsdGhpcy5fa2V5RnJhbWVJbk5leHRDaHVuaz0hMSx0aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25HYXBEb3Q9LTEvMCx0aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25PdmVybGFwRG90PS0xLzAsdGhpcy5fbGFzdEF1ZGlvRXhjZXB0aW9uTGFyZ2VHYXBEb3Q9LTEvMCx0aGlzLl9sYXN0VmlkZW9FeGNlcHRpb25MYXJnZUdhcERvdD0tMS8wLHRoaXMuX2xhc3RWaWRlb0V4Y2VwdGlvbkNodW5rRmlyc3REdHNEb3Q9LTEvMH1yZXR1cm4gbihlLFt7a2V5OiJmaXgiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowLHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXSxhPSEoYXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0pfHxhcmd1bWVudHNbMl07dD1NYXRoLnJvdW5kKDFlMyp0KTt2YXIgbj10aGlzLnZpZGVvVHJhY2ssaT10aGlzLmF1ZGlvVHJhY2s7IXImJmF8fCh0aGlzLl92aWRlb0xhc3RTYW1wbGU9bnVsbCx0aGlzLl9hdWRpb05leHRQdHM9dm9pZCAwLHRoaXMuX3ZpZGVvTmV4dER0cz12b2lkIDAsdGhpcy5fYXVkaW9UaW1lc3RhbXBCcmVhaz0wLHRoaXMuX3ZpZGVvVGltZXN0YW1wQnJlYWs9MCx0aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25HYXBEb3Q9LTEvMCx0aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25PdmVybGFwRG90PS0xLzAsdGhpcy5fbGFzdEF1ZGlvRXhjZXB0aW9uTGFyZ2VHYXBEb3Q9LTEvMCx0aGlzLl9sYXN0VmlkZW9FeGNlcHRpb25MYXJnZUdhcERvdD0tMS8wLHRoaXMuX2xhc3RWaWRlb0V4Y2VwdGlvbkNodW5rRmlyc3REdHNEb3Q9LTEvMCksciYmIWEmJih0aGlzLl9iYXNlRHRzSW5pdGVkPSExKSx0aGlzLl9iYXNlRHRzSW5pdGVkfHx0aGlzLl9jYWxjdWxhdGVCYXNlRHRzKGksbiksIWEmJnQmJih0aGlzLl9hdWRpb05leHRQdHM9dGhpcy5fdmlkZW9OZXh0RHRzPXQpO3ZhciBzPXRoaXMuX2Jhc2VEdHNJbml0ZWQmJih0aGlzLl92aWRlb1RpbWVzdGFtcEJyZWFrfHwhdGhpcy52aWRlb1RyYWNrLmV4aXN0KCkpJiYodGhpcy5fYXVkaW9UaW1lc3RhbXBCcmVha3x8IXRoaXMuYXVkaW9UcmFjay5leGlzdCgpKTtpZihzJiZ0aGlzLl9yZXNldEJhc2VEdHNXaGVuU3RyZWFtQnJlYWtlZCgpLHRoaXMuX2ZpeEF1ZGlvKGkpLHRoaXMuX2tleUZyYW1lSW5OZXh0Q2h1bms9ITEsdGhpcy5fZml4VmlkZW8obiksdGhpcy5tZXRhZGF0YVRyYWNrLmV4aXN0KCkpe3ZhciBvPXRoaXMubWV0YWRhdGFUcmFjay50aW1lc2NhbGU7dGhpcy5tZXRhZGF0YVRyYWNrLnNlaVNhbXBsZXMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5wdHM9dC5vcmlnaW5QdHMtZS5fYmFzZUR0cyx0LnRpbWU9TWF0aC5tYXgoMCx0LnB0cykvb30pKSx0aGlzLm1ldGFkYXRhVHJhY2suZmx2U2NyaXB0U2FtcGxlcy5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnB0cz10Lm9yaWdpblB0cy1lLl9iYXNlRHRzLHQudGltZT1NYXRoLm1heCgwLHQucHRzKS9vfSkpfW4uc2FtcGxlcy5sZW5ndGgmJihuLmJhc2VNZWRpYURlY29kZVRpbWU9bi5zYW1wbGVzWzBdLmR0cyksaS5zYW1wbGVzLmxlbmd0aCYmKGkuYmFzZU1lZGlhRGVjb2RlVGltZT1pLnNhbXBsZXNbMF0ucHRzKmkudGltZXNjYWxlLzFlMyl9fSx7a2V5OiJfZml4VmlkZW8iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLnNhbXBsZXM7aWYoci5sZW5ndGgpe3ZhciBhO2lmKHIuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5kdHMtPXQuX2Jhc2VEdHMsZS5wdHMtPXQuX2Jhc2VEdHMsZS5rZXlmcmFtZSYmKHQuX2tleUZyYW1lSW5OZXh0Q2h1bms9ITApfSkpLGUuZnBzTnVtJiZlLmZwc0RlbilhPWUudGltZXNjYWxlKihlLmZwc0Rlbi9lLmZwc051bSk7ZWxzZSBpZihlLmxlbmd0aD4xKXt2YXIgbj1lLnNhbXBsZXNbMF0saT1lLnNhbXBsZXNbci5sZW5ndGgtMV07YT1NYXRoLmZsb29yKChpLmR0cy1uLmR0cykvKHIubGVuZ3RoLTEpKX1lbHNlIGE9dGhpcy5fbGFzdFZpZGVvRHVyYXRpb258fDQwO3ZhciBzPXIucG9wKCk7aWYodGhpcy5fdmlkZW9MYXN0U2FtcGxlJiZyLnVuc2hpZnQodGhpcy5fdmlkZW9MYXN0U2FtcGxlKSx0aGlzLl92aWRlb0xhc3RTYW1wbGU9cyxyLmxlbmd0aCl7aWYodm9pZCAwPT09dGhpcy5fdmlkZW9OZXh0RHRzKXt2YXIgbz1yWzBdO3RoaXMuX3ZpZGVvTmV4dER0cz1vLmR0c312YXIgdT1yLmxlbmd0aCxjPTAsbD1yWzBdLGQ9dGhpcy5fdmlkZW9OZXh0RHRzLWwuZHRzO2lmKE1hdGguYWJzKGQpPjIwMCl7dmFyIGY7aWYoTWF0aC5hYnMobC5kdHMtdGhpcy5fbGFzdFZpZGVvRXhjZXB0aW9uQ2h1bmtGaXJzdER0c0RvdCk+NWUzKXRoaXMuX2xhc3RWaWRlb0V4Y2VwdGlvbkNodW5rRmlyc3REdHNEb3Q9bC5kdHMsZS53YXJuaW5ncy5wdXNoKHt0eXBlOkMsbmV4dER0czp0aGlzLl92aWRlb05leHREdHMsZmlyc3RTYW1wbGVEdHM6bC5kdHMsbmV4dFNhbXBsZUR0czpudWxsPT09KGY9clsxXSl8fHZvaWQgMD09PWY/dm9pZCAwOmYuZHRzLHNhbXBsZUR1cmF0aW9uOmR9KTt0aGlzLl92aWRlb1RpbWVzdGFtcEJyZWFrPj01Pyh0aGlzLl92aWRlb05leHREdHM9bC5kdHMsdGhpcy5fdmlkZW9UaW1lc3RhbXBCcmVhaz0wKToobC5kdHMrPWQsbC5wdHMrPWQsdGhpcy5hdWRpb1RyYWNrLmV4aXN0KCl8fCh0aGlzLl92aWRlb1RpbWVzdGFtcEJyZWFrPTEpKX1mb3IodmFyIGg9MDtoPHU7aCsrKXt2YXIgcD1yW2hdLmR0cyx2PXJbaCsxXTsoKGM9aDx1LTE/di5kdHMtcDpzP3MuZHRzLXA6YSk+MWUzfHxjPDApJiYodGhpcy5fdmlkZW9UaW1lc3RhbXBCcmVhaysrLE1hdGguYWJzKHAtdGhpcy5fbGFzdFZpZGVvRXhjZXB0aW9uTGFyZ2VHYXBEb3QpPjVlMyYmKHRoaXMuX2xhc3RWaWRlb0V4Y2VwdGlvbkxhcmdlR2FwRG90PXAsZS53YXJuaW5ncy5wdXNoKHt0eXBlOlQsdGltZTpwL2UudGltZXNjYWxlLGR0czpwLG9yaWdpbkR0czpyW2hdLm9yaWdpbkR0cyxuZXh0RHRzOnRoaXMuX3ZpZGVvTmV4dER0cyxzYW1wbGVEdXJhdGlvbjpjLHJlZlNhbXBsZUR1cmF0aW9uOmF9KSksYz1hKSxyW2hdLmR1cmF0aW9uPWMsdGhpcy5fdmlkZW9OZXh0RHRzKz1jLHRoaXMuX2xhc3RWaWRlb0R1cmF0aW9uPWN9fX19fSx7a2V5OiJfZml4QXVkaW8iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLnNhbXBsZXM7ci5sZW5ndGgmJihyLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuZHRzPWUucHRzLT10Ll9iYXNlRHRzfSkpLHRoaXMuX2RvRml4QXVkaW9JbnRlcm5hbChlLHIsMWUzKSl9fSx7a2V5OiJfY2FsY3VsYXRlQmFzZUR0cyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnNhbXBsZXMsYT10LnNhbXBsZXM7aWYoIXIubGVuZ3RoJiYhYS5sZW5ndGgpcmV0dXJuITE7dmFyIG49MS8wLGk9MS8wO3IubGVuZ3RoJiYoZS5iYXNlRHRzPW49clswXS5wdHMpLGEubGVuZ3RoJiYodC5iYXNlRHRzPWk9YVswXS5kdHMpLHRoaXMuX2Jhc2VEdHM9TWF0aC5taW4obixpKTt2YXIgcz1pLW47cmV0dXJuIE51bWJlci5pc0Zpbml0ZShzKSYmTWF0aC5hYnMocyk+NTAwJiZ0Lndhcm5pbmdzLnB1c2goe3R5cGU6Qix2aWRlb0Jhc2VEdHM6aSxhdWRpb0Jhc2VQdHM6bixiYXNlRHRzOnRoaXMuX2Jhc2VEdHMsZGVsdGE6c30pLHRoaXMuX2Jhc2VEdHNJbml0ZWQ9ITAsITB9fSx7a2V5OiJfcmVzZXRCYXNlRHRzV2hlblN0cmVhbUJyZWFrZWQiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY2FsY3VsYXRlQmFzZUR0cyh0aGlzLmF1ZGlvVHJhY2ssdGhpcy52aWRlb1RyYWNrKSYmKHRoaXMuYXVkaW9UcmFjay5leGlzdCgpP3RoaXMudmlkZW9UcmFjay5leGlzdCgpP3RoaXMuX2Jhc2VEdHMtPU1hdGgubWluKHRoaXMuX2F1ZGlvTmV4dFB0cyx0aGlzLl92aWRlb05leHREdHMpOnRoaXMuX2Jhc2VEdHMtPXRoaXMuX2F1ZGlvTmV4dFB0czp0aGlzLl9iYXNlRHRzLT10aGlzLl92aWRlb05leHREdHMsdGhpcy5fdmlkZW9UaW1lc3RhbXBCcmVhaz0wLHRoaXMuX2F1ZGlvVGltZXN0YW1wQnJlYWs9MCl9fSx7a2V5OiJfZG9GaXhBdWRpb0ludGVybmFsIix2YWx1ZTpmdW5jdGlvbihlLHQscil7ZS5zYW1wbGVEdXJhdGlvbnx8KGUuc2FtcGxlRHVyYXRpb249ZS5jb2RlY1R5cGU9PT1BP3NlLmdldEZyYW1lRHVyYXRpb24oZS50aW1lc2NhbGUscik6dGhpcy5fZ2V0RzcxMUR1cmF0aW9uKGUpKTt2YXIgYT1lLnNhbXBsZUR1cmF0aW9uLG49ZS5jb2RlY1R5cGU9PT1BPzEwMjQ6YSplLnRpbWVzY2FsZS8xZTM7aWYodm9pZCAwPT09dGhpcy5fYXVkaW9OZXh0UHRzKXt2YXIgaT10WzBdO3RoaXMuX2F1ZGlvTmV4dFB0cz1pLnB0c31mb3IodmFyIHM9MDtzPHQubGVuZ3RoO3MrKyl7dmFyIG89dGhpcy5fYXVkaW9OZXh0UHRzLHU9dFtzXSxjPXUucHRzLW87aWYoMD09PXMmJnRoaXMuX2F1ZGlvVGltZXN0YW1wQnJlYWs+PTUmJnRoaXMuX2tleUZyYW1lSW5OZXh0Q2h1bmsmJihvPXRoaXMuX2F1ZGlvTmV4dFB0cz11LmR0cyxjPTAsdGhpcy5fYXVkaW9UaW1lc3RhbXBCcmVhaz0wKSwhdGhpcy5fYXVkaW9UaW1lc3RhbXBCcmVhayYmYz49MyphJiZjPD11ZSYmIVcpe3ZhciBsPXRoaXMuX2dldFNpbGVudEZyYW1lKGUpfHx0WzBdLmRhdGEuc3ViYXJyYXkoKSxkPU1hdGguZmxvb3IoYy9hKTtNYXRoLmFicyh1LnB0cy10aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25HYXBEb3QpPmNlJiYodGhpcy5fbGFzdEF1ZGlvRXhjZXB0aW9uR2FwRG90PXUucHRzLGUud2FybmluZ3MucHVzaCh7dHlwZTpQLHB0czp1LnB0cyxvcmlnaW5QdHM6dS5vcmlnaW5QdHMsY291bnQ6ZCxuZXh0UHRzOm8scmVmU2FtcGxlRHVyYXRpb246YX0pKTtmb3IodmFyIGY9MDtmPGQ7ZisrKXt2YXIgaD1uZXcgTyhNYXRoLmZsb29yKHRoaXMuX2F1ZGlvTmV4dFB0cythKS1NYXRoLmZsb29yKHRoaXMuX2F1ZGlvTmV4dFB0cyksbCxuKTtoLm9yaWdpblB0cz1NYXRoLmZsb29yKHRoaXMuX2Jhc2VEdHMrbyksdC5zcGxpY2UocywwLGgpLHRoaXMuX2F1ZGlvTmV4dFB0cys9YSxzKyt9cy0tfWVsc2UgYzw9LTMqYSYmYz49LTFlMz8oTWF0aC5hYnModS5wdHMtdGhpcy5fbGFzdEF1ZGlvRXhjZXB0aW9uT3ZlcmxhcERvdCk+Y2UmJih0aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25PdmVybGFwRG90PXUucHRzLGUud2FybmluZ3MucHVzaCh7dHlwZTpJLHB0czp1LnB0cyxvcmlnaW5QdHM6dS5vcmlnaW5QdHMsbmV4dFB0czpvLHJlZlNhbXBsZUR1cmF0aW9uOmF9KSksdC5zcGxpY2UocywxKSxzLS0pOihNYXRoLmFicyhjKT51ZSYmKHRoaXMuX2F1ZGlvVGltZXN0YW1wQnJlYWsrKyxNYXRoLmFicyh1LnB0cy10aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25MYXJnZUdhcERvdCk+Y2UmJih0aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25MYXJnZUdhcERvdD11LnB0cyxlLndhcm5pbmdzLnB1c2goe3R5cGU6VSx0aW1lOnUucHRzLzFlMyxwdHM6dS5wdHMsb3JpZ2luUHRzOnUub3JpZ2luUHRzLG5leHRQdHM6byxzYW1wbGVEdXJhdGlvbjpjLHJlZlNhbXBsZUR1cmF0aW9uOmF9KSkpLHUuZHRzPXUucHRzPW8sdS5kdXJhdGlvbj1uLHRoaXMuX2F1ZGlvTmV4dFB0cys9YSl9fX0se2tleToiX2dldEc3MTFEdXJhdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zYW1wbGVTaXplLHI9ZS5jaGFubmVsQ291bnQsYT1lLnNhbXBsZVJhdGUsbj1lLnNhbXBsZXNbMF07aWYobilyZXR1cm4gMipuLmRhdGEuYnl0ZUxlbmd0aC9yLyh0LzgpL2EqMWUzfX0se2tleToiX2dldFNpbGVudEZyYW1lIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5jb2RlY1R5cGU9PT1BP3NlLmdldFNpbGVudEZyYW1lKGUuY29kZWMsZS5jaGFubmVsQ291bnQpOm5ldyBVaW50OEFycmF5KDgqZS5zYW1wbGVEdXJhdGlvbiplLmNoYW5uZWxDb3VudCl9fV0pLGV9KCksZGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpfXJldHVybiBuKGUsbnVsbCxbe2tleToicGFyc2UiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCEodC5sZW5ndGg8Mykpe3ZhciByPXt9LGE9ZS5fcGFyc2VWYWx1ZShuZXcgRGF0YVZpZXcodC5idWZmZXIsdC5ieXRlT2Zmc2V0LHQuYnl0ZUxlbmd0aCkpLG49ZS5fcGFyc2VWYWx1ZShuZXcgRGF0YVZpZXcodC5idWZmZXIsdC5ieXRlT2Zmc2V0K2Euc2l6ZSx0LmJ5dGVMZW5ndGgtYS5zaXplKSk7cmV0dXJuIHJbYS5kYXRhXT1uLmRhdGEscn19fSx7a2V5OiJfcGFyc2VWYWx1ZSIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHIsYT10LmJ5dGVMZW5ndGgsbj0xLGk9ITE7c3dpdGNoKHQuZ2V0VWludDgoMCkpe2Nhc2UgMDpyPXQuZ2V0RmxvYXQ2NCgxKSxuKz04O2JyZWFrO2Nhc2UgMTpyPSEhdC5nZXRVaW50OCgxKSxuKz0xO2JyZWFrO2Nhc2UgMjp2YXIgcz1lLl9wYXJzZVN0cmluZyhuZXcgRGF0YVZpZXcodC5idWZmZXIsdC5ieXRlT2Zmc2V0K24sdC5ieXRlTGVuZ3RoLW4pKTtyPXMuZGF0YSxuKz1zLnNpemU7YnJlYWs7Y2FzZSAzOnI9e307dmFyIG89MDtmb3IoOT09KDE2Nzc3MjE1JnQuZ2V0VWludDMyKGEtNCkpJiYobz0zKTtuPGEtNDspe3ZhciB1PWUuX3BhcnNlT2JqZWN0KG5ldyBEYXRhVmlldyh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQrbix0LmJ5dGVMZW5ndGgtbi1vKSksYz11LnNpemUsbD11LmRhdGE7aWYodS5pc0VuZClicmVhaztyW2wubmFtZV09bC52YWx1ZSxuKz1jfWlmKG48PWEtMyk5PT09KDE2Nzc3MjE1JnQuZ2V0VWludDMyKG4tMSkpJiYobis9Myk7YnJlYWs7Y2FzZSA4OnI9e30sbis9NDt2YXIgZD0wO2Zvcig5PT0oMTY3NzcyMTUmdC5nZXRVaW50MzIoYS00KSkmJihkPTMpO248YS04Oyl7dmFyIGY9ZS5fcGFyc2VPYmplY3QobmV3IERhdGFWaWV3KHQuYnVmZmVyLHQuYnl0ZU9mZnNldCtuLHQuYnl0ZUxlbmd0aC1uLWQpKSxoPWYuc2l6ZSxwPWYuZGF0YTtpZihmLmlzRW5kKWJyZWFrO3JbcC5uYW1lXT1wLnZhbHVlLG4rPWh9aWYobjw9YS0zKTk9PT0oMTY3NzcyMTUmdC5nZXRVaW50MzIobi0xKSkmJihuKz0zKTticmVhaztjYXNlIDk6cj12b2lkIDAsbj0xLGk9ITA7YnJlYWs7Y2FzZSAxMDpyPVtdO3ZhciB2PXQuZ2V0VWludDMyKDEpO24rPTQ7Zm9yKHZhciB5PTA7eTx2O3krKyl7dmFyIG09ZS5fcGFyc2VWYWx1ZShuZXcgRGF0YVZpZXcodC5idWZmZXIsdC5ieXRlT2Zmc2V0K24sdC5ieXRlTGVuZ3RoLW4pKSxnPW0uZGF0YSxrPW0uc2l6ZTtyLnB1c2goZyksbis9a31icmVhaztjYXNlIDExOnZhciBiPXQuZ2V0RmxvYXQ2NChuKSs2ZTQqdC5nZXRJbnQxNihuKzgpO3I9bmV3IERhdGUoYiksbis9MTA7YnJlYWs7Y2FzZSAxMjp2YXIgXz10LmdldFVpbnQzMigxKTtuKz00LHI9IiIsXz4wJiYocj1ILmRlY29kZShuZXcgVWludDhBcnJheSh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQrbixfKSkpLG4rPV87YnJlYWs7ZGVmYXVsdDpuPWF9cmV0dXJue2RhdGE6cixzaXplOm4saXNFbmQ6aX19fSx7a2V5OiJfcGFyc2VTdHJpbmciLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2V0VWludDE2KDApLHI9IiI7cmV0dXJuIHQ+MCYmKHI9SC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoZS5idWZmZXIsZS5ieXRlT2Zmc2V0KzIsdCkpKSx7ZGF0YTpyLHNpemU6Mit0fX19LHtrZXk6Il9wYXJzZU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoISh0LmJ5dGVMZW5ndGg8Mykpe3ZhciByPWUuX3BhcnNlU3RyaW5nKHQpLGE9ZS5fcGFyc2VWYWx1ZShuZXcgRGF0YVZpZXcodC5idWZmZXIsdC5ieXRlT2Zmc2V0K3Iuc2l6ZSx0LmJ5dGVMZW5ndGgtci5zaXplKSk7cmV0dXJue2RhdGE6e25hbWU6ci5kYXRhLHZhbHVlOmEuZGF0YX0sc2l6ZTpyLnNpemUrYS5zaXplLGlzRW5kOmEuaXNFbmR9fX19XSksZX0oKSxmZT1uZXcgRygiRmx2RGVtdXhlciIpLGhlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LGEsbil7cih0aGlzLGUpLGkodGhpcywiX2hlYWRlclBhcnNlZCIsITEpLGkodGhpcywiX3JlbWFpbmluZ0RhdGEiLG51bGwpLGkodGhpcywiX2dvcElkIiwwKSxpKHRoaXMsIl9uZWVkQWRkTWV0YUJlZm9yZUtleUZyYW1lTmFsIiwhMCksdGhpcy52aWRlb1RyYWNrPXR8fG5ldyB6LHRoaXMuYXVkaW9UcmFjaz1hfHxuZXcgTSx0aGlzLm1ldGFkYXRhVHJhY2s9bnx8bmV3IE4sdGhpcy5fZml4ZXI9bmV3IGxlKHRoaXMudmlkZW9UcmFjayx0aGlzLmF1ZGlvVHJhY2ssdGhpcy5tZXRhZGF0YVRyYWNrKX1yZXR1cm4gbihlLFt7a2V5OiJkZW11eCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXSxhPSEoYXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0pfHxhcmd1bWVudHNbMl0sbj10aGlzLmF1ZGlvVHJhY2ssaT10aGlzLnZpZGVvVHJhY2sscz10aGlzLm1ldGFkYXRhVHJhY2s7aWYoIXImJmF8fCh0aGlzLl9yZW1haW5pbmdEYXRhPW51bGwsdGhpcy5faGVhZGVyUGFyc2VkPSExKSxyPyhpLnJlc2V0KCksbi5yZXNldCgpLHMucmVzZXQoKSk6KGkuc2FtcGxlcz1bXSxuLnNhbXBsZXM9W10scy5zZWlTYW1wbGVzPVtdLHMuZmx2U2NyaXB0U2FtcGxlcz1bXSxpLndhcm5pbmdzPVtdLG4ud2FybmluZ3M9W10sdGhpcy5fcmVtYWluaW5nRGF0YSYmKHQ9Wih0aGlzLl9yZW1haW5pbmdEYXRhLHQpLHRoaXMuX3JlbWFpbmluZ0RhdGE9bnVsbCkpLCF0Lmxlbmd0aClyZXR1cm57dmlkZW9UcmFjazppLGF1ZGlvVHJhY2s6bixtZXRhZGF0YVRyYWNrOnN9O3ZhciBvPTA7aWYoIXRoaXMuX2hlYWRlclBhcnNlZCl7aWYoIWUucHJvYmUodCkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGZsdiBmaWxlIik7bi5wcmVzZW50PSg0JnRbNF0pPj4+MiE9MCxpLnByZXNlbnQ9MCE9KDEmdFs0XSksdGhpcy5faGVhZGVyUGFyc2VkPSEwLG89JCh0LDUpKzR9Zm9yKHZhciB1LGMsbCxkLGYsaD10Lmxlbmd0aDtvKzE1PGgmJih1PXRbb10sIShvKzE1KyhjPXRbbysxXTw8MTZ8dFtvKzJdPDw4fHRbbyszXSk+aCkpOylsPSh0W28rN108PDI0Pj4+MCkrKHRbbys0XTw8MTYpKyh0W28rNV08PDgpK3Rbbys2XSxvKz0xMSxkPXQuc3ViYXJyYXkobyxvK2MpLDg9PT11P3RoaXMuX3BhcnNlQXVkaW8oZCxsKTo5PT09dT90aGlzLl9wYXJzZVZpZGVvKGQsbCk6MTg9PT11P3RoaXMuX3BhcnNlU2NyaXB0KGQsbCk6ZmUud2FybigiSW52YWxpZCB0YWcgdHlwZTogIi5jb25jYXQodSkpLChmPSQodCxvKz1jKSkhPT0xMStjJiZmZS53YXJuKCJJbnZhbGlkIFByZXZUYWdTaXplICIuY29uY2F0KGYsIiAoIikuY29uY2F0KDExK2MsIikiKSksbys9NDtyZXR1cm4gbzxoJiYodGhpcy5fcmVtYWluaW5nRGF0YT10LnN1YmFycmF5KG8pKSxuLmZvcm1hdFRpbWVzY2FsZT1pLmZvcm1hdFRpbWVzY2FsZT1pLnRpbWVzY2FsZT1zLnRpbWVzY2FsZT0xZTMsbi50aW1lc2NhbGU9bi5zYW1wbGVSYXRlfHwwLCFuLmV4aXN0KCkmJm4uaGFzU2FtcGxlKCkmJm4ucmVzZXQoKSwhaS5leGlzdCgpJiZpLmhhc1NhbXBsZSgpJiZpLnJlc2V0KCkse3ZpZGVvVHJhY2s6aSxhdWRpb1RyYWNrOm4sbWV0YWRhdGFUcmFjazpzfX19LHtrZXk6ImZpeCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLl9maXhlci5maXgoZSx0LHIpLHt2aWRlb1RyYWNrOnRoaXMudmlkZW9UcmFjayxhdWRpb1RyYWNrOnRoaXMuYXVkaW9UcmFjayxtZXRhZGF0YVRyYWNrOnRoaXMubWV0YWRhdGFUcmFja319fSx7a2V5OiJkZW11eEFuZEZpeCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsYSl7cmV0dXJuIHRoaXMuZGVtdXgoZSx0LHIpLHRoaXMuZml4KGEsdCxyKX19LHtrZXk6Il9wYXJzZUF1ZGlvIix2YWx1ZTpmdW5jdGlvbih0LHIpe2lmKHQubGVuZ3RoKXt2YXIgYT0oMjQwJnRbMF0pPj4+NCxuPXRoaXMuYXVkaW9UcmFjaztpZigxMCE9PWEmJjchPT1hJiY4IT09YSlyZXR1cm4gZmUud2FybigiVW5zdXBwb3J0ZWQgc291bmQgZm9ybWF0OiAiLmNvbmNhdChhKSksdm9pZCBuLnJlc2V0KCk7aWYoMTAhPT1hKXt2YXIgaT0oMTImdFswXSk+PjIscz0oMiZ0WzBdKT4+MSxvPTEmdFswXTtuLnNhbXBsZVJhdGU9ZS5BVURJT19SQVRFW2ldLG4uc2FtcGxlU2l6ZT1zPzE2Ojgsbi5jaGFubmVsQ291bnQ9bysxfTEwPT09YT90aGlzLl9wYXJzZUFhYyh0LHIpOnRoaXMuX3BhcnNlRzcxMSh0LHIsYSl9fX0se2tleToiX3BhcnNlRzcxMSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBhPXRoaXMuYXVkaW9UcmFjazthLmNvZGVjVHlwZT03PT09cj9EOkUsYS5zYW1wbGVSYXRlPThlMyxhLmNvZGVjPWEuY29kZWNUeXBlLGEuc2FtcGxlcy5wdXNoKG5ldyBPKHQsZS5zdWJhcnJheSgxKSkpfX0se2tleToiX3BhcnNlQWFjIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuYXVkaW9UcmFjaztpZihyLmNvZGVjVHlwZT1BLDA9PT1lWzFdKXt2YXIgYT1zZS5wYXJzZUF1ZGlvU3BlY2lmaWNDb25maWcoZS5zdWJhcnJheSgyKSk7YT8oci5jb2RlYz1hLmNvZGVjLHIuY2hhbm5lbENvdW50PWEuY2hhbm5lbENvdW50LHIuc2FtcGxlUmF0ZT1hLnNhbXBsZVJhdGUsci5jb25maWc9YS5jb25maWcsci5vYmplY3RUeXBlPWEub2JqZWN0VHlwZSxyLnNhbXBsZVJhdGVJbmRleD1hLnNhbXBsaW5nRnJlcXVlbmN5SW5kZXgpOihyLnJlc2V0KCksZmUud2FybigiQ2Fubm90IHBhcnNlIEF1ZGlvU3BlY2lmaWNDb25maWciLGUpKX1lbHNlIGlmKDE9PT1lWzFdKXtpZihudWxsPT10KXJldHVybjtyLnNhbXBsZXMucHVzaChuZXcgTyh0LGUuc3ViYXJyYXkoMikpKX1lbHNlIGZlLndhcm4oIlVua25vd24gQUFDUGFja2V0VHlwZTogIi5jb25jYXQoZVsxXSkpfX0se2tleToiX3BhcnNlVmlkZW8iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZighKGUubGVuZ3RoPDYpKXt2YXIgYT0oMjQwJmVbMF0pPj4+NCxuPTE1JmVbMF0saT10aGlzLnZpZGVvVHJhY2s7aWYoNyE9PW4mJjEyIT09bilyZXR1cm4gaS5yZXNldCgpLHZvaWQgZmUud2FybigiVW5zdXBwb3J0ZWQgY29kZWNJZDogIi5jb25jYXQobikpO3ZhciBzPTEyPT09bjtpLmNvZGVjVHlwZT1zP1M6eDt2YXIgbz1lWzFdLHU9KGVbMl08PDE2fGVbM108PDh8ZVs0XSk8PDg+Pjg7aWYoMD09PW8pe3ZhciBjPWUuc3ViYXJyYXkoNSksbD1zP29lLnBhcnNlSEVWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkKGMpOmllLnBhcnNlQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQoYyk7aWYobCl7dmFyIGQ9bC5odmNDLGY9bC5zcHMsaD1sLnBwc0FycixwPWwuc3BzQXJyLHY9bC52cHNBcnIseT1sLm5hbFVuaXRTaXplO2QmJihpLmh2Y0M9aS5odmNDfHxkKSxmJiYoaS5jb2RlYz1mLmNvZGVjLGkud2lkdGg9Zi53aWR0aCxpLmhlaWdodD1mLmhlaWdodCxpLnNhclJhdGlvPWYuc2FyUmF0aW8saS5mcHNOdW09Zi5mcHNOdW0saS5mcHNEZW49Zi5mcHNEZW4pLHAubGVuZ3RoJiYoaS5zcHM9cCksaC5sZW5ndGgmJihpLnBwcz1oKSx2JiZ2Lmxlbmd0aCYmKGkudnBzPXYpLHkmJihpLm5hbFVuaXRTaXplPXkpfWVsc2UgZmUud2FybigiQ2Fubm90IHBhcnNlICIuY29uY2F0KHM/IkhFVkMiOiJBVkMiLCJEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCIpLGUpfWVsc2UgaWYoMT09PW8pe3ZhciBtPW5lLnBhcnNlQXZjQyhlLnN1YmFycmF5KDUpLGkubmFsVW5pdFNpemUpO2lmKChtPXRoaXMuX2NoZWNrQWRkTWV0YU5hbFRvVW5pdHMocyxtLGkpKSYmbS5sZW5ndGgpe3ZhciBnPW5ldyBSKHQrdSx0LG0pOzE9PT1hJiZnLnNldFRvS2V5ZnJhbWUoKSxpLnNhbXBsZXMucHVzaChnKSxtLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBhPXM/ZVswXT4+PjEmNjM6MzEmZVswXTtzd2l0Y2goYSl7Y2FzZSA1OmNhc2UgMTY6Y2FzZSAxNzpjYXNlIDE4OmNhc2UgMTk6Y2FzZSAyMDpjYXNlIDIxOmNhc2UgMjI6Y2FzZSAyMzppZighcyYmNSE9PWF8fHMmJjU9PT1hKWJyZWFrO2cuc2V0VG9LZXlmcmFtZSgpO2JyZWFrO2Nhc2UgNjpjYXNlIDM5OmNhc2UgNDA6aWYoIXMmJjYhPT1hfHxzJiY2PT09YSlicmVhaztyLm1ldGFkYXRhVHJhY2suc2VpU2FtcGxlcy5wdXNoKG5ldyBGKG5lLnBhcnNlU0VJKG5lLnJlbW92ZUVQQihlKSxzKSx0K3UpKX19KSksZy5rZXlmcmFtZSYmdGhpcy5fZ29wSWQrKyxnLmdvcElkPXRoaXMuX2dvcElkfWVsc2UgZmUud2FybigiQ2Fubm90IHBhcnNlIE5BTFVzIixlKX1lbHNlIDI9PT1vfHxmZS53YXJuKCJVbmtub3duIEFWQ1BhY2tldFR5cGU6ICIuY29uY2F0KG8pKX19fSx7a2V5OiJfY2hlY2tBZGRNZXRhTmFsVG9Vbml0cyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlJiZ0aGlzLl9uZWVkQWRkTWV0YUJlZm9yZUtleUZyYW1lTmFsP3QubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZVswXT4+PjEmNjN9KSkuaW5jbHVkZXMoMzIpPyh0aGlzLl9uZWVkQWRkTWV0YUJlZm9yZUtleUZyYW1lTmFsPSExLHQpOih0LnVuc2hpZnQoci5wcHNbMF0pLHQudW5zaGlmdChyLnNwc1swXSksdC51bnNoaWZ0KHIudnBzWzBdKSx0LmZpbHRlcihCb29sZWFuKSk6KHRoaXMuX25lZWRBZGRNZXRhQmVmb3JlS2V5RnJhbWVOYWw9ITEsdCl9fSx7a2V5OiJfcGFyc2VTY3JpcHQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5tZXRhZGF0YVRyYWNrLmZsdlNjcmlwdFNhbXBsZXMucHVzaChuZXcgVihkZS5wYXJzZShlKSx0KSl9fV0sW3trZXk6InByb2JlIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gNzA9PT1lWzBdJiY3Nj09PWVbMV0mJjg2PT09ZVsyXSYmMT09PWVbM10mJiQoZSw1KT49OX19XSksZX0oKTtpKGhlLCJBVURJT19SQVRFIixbNTUwMCwxMWUzLDIyZTMsNDRlM10pLG5ldyBHKCJUc0RlbXV4ZXIiKTt2YXIgcGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpfXJldHVybiBuKGUsbnVsbCxbe2tleToiZmluZEJveCIsdmFsdWU6ZnVuY3Rpb24odCxyKXt2YXIgYT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MCxuPVtdO2lmKCF0KXJldHVybiBuO2Zvcih2YXIgaT0wLHM9IiIsbz0wO3QubGVuZ3RoPjc7KXtpZihpPSQodCkscz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsdC5zdWJhcnJheSg0LDgpKSxvPTgsMT09PWk/KGk9ZWUodCw4KSxvKz04KTppfHwoaT10Lmxlbmd0aCksIXJbMF18fHM9PT1yWzBdKXt2YXIgdT10LnN1YmFycmF5KDAsaSk7aWYoIShyLmxlbmd0aDwyKSlyZXR1cm4gZS5maW5kQm94KHUuc3ViYXJyYXkobyksci5zbGljZSgxKSxhK28pO24ucHVzaCh7c3RhcnQ6YSxzaXplOmksaGVhZGVyU2l6ZTpvLHR5cGU6cyxkYXRhOnV9KX1hKz1pLHQ9dC5zdWJhcnJheShpKX1yZXR1cm4gbn19LHtrZXk6InRmaGQiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe2UudHJhY2tJZD0kKHQpO3ZhciByPTQsYT0xJmUuZmxhZ3Msbj0yJmUuZmxhZ3MsaT04JmUuZmxhZ3Mscz0xNiZlLmZsYWdzLG89MzImZS5mbGFnczthJiYocis9NCxlLmJhc2VEYXRhT2Zmc2V0PSQodCxyKSxyKz00KSxuJiYoZS5zYW1wbGVEZXNjcmlwdGlvbkluZGV4PSQodCxyKSxyKz00KSxpJiYoZS5kZWZhdWx0U2FtcGxlRHVyYXRpb249JCh0LHIpLHIrPTQpLHMmJihlLmRlZmF1bHRTYW1wbGVTaXplPSQodCxyKSxyKz00KSxvJiYoZS5kZWZhdWx0U2FtcGxlRmxhZ3M9JCh0LHIpKX0pKX19LHtrZXk6InNpZHgiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe3ZhciByPTA7ZS5yZWZlcmVuY2VfSUQ9JCh0LHIpLHIrPTQsZS50aW1lc2NhbGU9JCh0LHIpLHIrPTQsMD09PWUudmVyc2lvbj8oZS5lYXJsaWVzdF9wcmVzZW50YXRpb25fdGltZT0kKHQscikscis9NCxlLmZpcnN0X29mZnNldD0kKHQscikscis9NCk6KGUuZWFybGllc3RfcHJlc2VudGF0aW9uX3RpbWU9ZWUodCxyKSxyKz04LGUuZmlyc3Rfb2Zmc2V0PWVlKHQscikscis9OCkscis9MixlLnJlZmVyZW5jZXM9W107dmFyIGE9Sih0LHIpO3IrPTI7Zm9yKHZhciBuPTA7bjxhO24rKyl7dmFyIGk9e307ZS5yZWZlcmVuY2VzLnB1c2goaSk7dmFyIHM9JCh0LHIpO3IrPTQsaS5yZWZlcmVuY2VfdHlwZT1zPj4zMSYxLGkucmVmZXJlbmNlZF9zaXplPTIxNDc0ODM2NDcmcyxpLnN1YnNlZ21lbnRfZHVyYXRpb249JCh0LHIpLHM9JCh0LHIrPTQpLHIrPTQsaS5zdGFydHNfd2l0aF9TQVA9cz4+MzEmMSxpLlNBUF90eXBlPXM+PjI4JjcsaS5TQVBfZGVsdGFfdGltZT0yNjg0MzU0NTUmc319KSl9fSx7a2V5OiJtb292Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZ2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3QubXZoZD1lLm12aGQoZS5maW5kQm94KHIsWyJtdmhkIl0sYSlbMF0pLHQudHJhaz1lLmZpbmRCb3gocixbInRyYWsiXSxhKS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBlLnRyYWsodCl9KSksdC5wc3NoPWUucHNzaChlLmZpbmRCb3gocixbInBzc2giXSxhKVswXSl9KSl9fSx7a2V5OiJtdmhkIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2UoZSwhMCwoZnVuY3Rpb24oZSx0KXt2YXIgcj0wOzE9PT1lLnZlcnNpb24/KGUudGltZXNjYWxlPSQodCwxNiksZS5kdXJhdGlvbj1lZSh0LDIwKSxyKz0yOCk6KGUudGltZXNjYWxlPSQodCw4KSxlLmR1cmF0aW9uPSQodCwxMikscis9MTYpLGUubmV4dFRyYWNrSWQ9JCh0LHIrNzYpfSkpfX0se2tleToidHJhayIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt0LnRraGQ9ZS50a2hkKGUuZmluZEJveChyLFsidGtoZCJdLGEpWzBdKSx0Lm1kaWE9ZS5tZGlhKGUuZmluZEJveChyLFsibWRpYSJdLGEpWzBdKX0pKX19LHtrZXk6InRraGQiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe3ZhciByPTA7MT09PWUudmVyc2lvbj8oZS50cmFja0lkPSQodCwxNiksZS5kdXJhdGlvbj1lZSh0LDI0KSxyKz0zMik6KGUudHJhY2tJZD0kKHQsOCksZS5kdXJhdGlvbj0kKHQsMTYpLHIrPTIwKSxlLndpZHRoPSQodCxyKzUyKSxlLmhlaWdodD0kKHQscis1Nil9KSl9fSx7a2V5OiJtZGlhIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZ2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3QubWRoZD1lLm1kaGQoZS5maW5kQm94KHIsWyJtZGhkIl0sYSlbMF0pLHQuaGRscj1lLmhkbHIoZS5maW5kQm94KHIsWyJoZGxyIl0sYSlbMF0pLHQubWluZj1lLm1pbmYoZS5maW5kQm94KHIsWyJtaW5mIl0sYSlbMF0pfSkpfX0se2tleToibWRoZCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGdlKGUsITAsKGZ1bmN0aW9uKGUsdCl7dmFyIHI9MDsxPT09ZS52ZXJzaW9uPyhlLnRpbWVzY2FsZT0kKHQsMTYpLGUuZHVyYXRpb249ZWUodCwyMCkscis9MjgpOihlLnRpbWVzY2FsZT0kKHQsOCksZS5kdXJhdGlvbj0kKHQsMTIpLHIrPTE2KTt2YXIgYT1KKHQscik7ZS5sYW5ndWFnZT1TdHJpbmcuZnJvbUNoYXJDb2RlKDk2KyhhPj4xMCYzMSksOTYrKGE+PjUmMzEpLDk2KygzMSZhKSl9KSl9fSx7a2V5OiJoZGxyIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2UoZSwhMCwoZnVuY3Rpb24oZSx0KXswPT09ZS52ZXJzaW9uJiYoZS5oYW5kbGVyVHlwZT1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsdC5zdWJhcnJheSg0LDgpKSl9KSl9fSx7a2V5OiJtaW5mIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZ2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3Qudm1oZD1lLnZtaGQoZS5maW5kQm94KHIsWyJ2bWhkIl0sYSlbMF0pLHQuc21oZD1lLnNtaGQoZS5maW5kQm94KHIsWyJzbWhkIl0sYSlbMF0pLHQuc3RibD1lLnN0YmwoZS5maW5kQm94KHIsWyJzdGJsIl0sYSlbMF0pfSkpfX0se2tleToidm1oZCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGdlKGUsITAsKGZ1bmN0aW9uKGUsdCl7ZS5ncmFwaGljc21vZGU9Sih0KSxlLm9wY29sb3I9W0oodCwyKSxKKHQsNCksSih0LDYpXX0pKX19LHtrZXk6InNtaGQiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe2UuYmFsYW5jZT1KKHQpfSkpfX0se2tleToic3RibCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt2YXIgbixpLHM7dC5zdHNkPWUuc3RzZChlLmZpbmRCb3gocixbInN0c2QiXSxhKVswXSksdC5zdHRzPWUuc3R0cyhlLmZpbmRCb3gocixbInN0dHMiXSxhKVswXSksdC5jdHRzPWUuY3R0cyhlLmZpbmRCb3gocixbImN0dHMiXSxhKVswXSksdC5zdHNjPWUuc3RzYyhlLmZpbmRCb3gocixbInN0c2MiXSxhKVswXSksdC5zdHN6PWUuc3RzeihlLmZpbmRCb3gocixbInN0c3oiXSxhKVswXSksdC5zdGNvPWUuc3RjbyhlLmZpbmRCb3gocixbInN0Y28iXSxhKVswXSksdC5zdGNvfHwodC5jbzY0PWUuY282NChlLmZpbmRCb3gocixbImNvNjQiXSxhKVswXSksdC5zdGNvPXQuY282NCk7dmFyIG89bnVsbD09PShuPXQuc3RzZC5lbnRyaWVzWzBdKXx8dm9pZCAwPT09bnx8bnVsbD09PShpPW4uc2luZil8fHZvaWQgMD09PWl8fG51bGw9PT0ocz1pLnNjaGkpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnRlbmMuZGVmYXVsdF9JVl9zaXplO3Quc3Rzcz1lLnN0c3MoZS5maW5kQm94KHIsWyJzdHNzIl0sYSlbMF0pLHQuc2VuYz1lLnNlbmMoZS5maW5kQm94KHIsWyJzZW5jIl0sYSlbMF0sbyl9KSl9fSx7a2V5OiJzZW5jIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06ODtyZXR1cm4gZ2UoZSwhMCwoZnVuY3Rpb24oZSxyKXt2YXIgYT0wLG49JChyLGEpO2ErPTQsZS5zYW1wbGVzPVtdO2Zvcih2YXIgaT0wO2k8bjtpKyspe2Zvcih2YXIgcz17SW5pdGlhbGl6YXRpb25WZWN0b3I6W119LG89MDtvPHQ7bysrKXMuSW5pdGlhbGl6YXRpb25WZWN0b3Jbb109clthK29dO2lmKGErPXQsMiZlLmZsYWdzKXtzLnN1YnNhbXBsZXM9W107dmFyIHU9SihyLGEpO2ErPTI7Zm9yKHZhciBjPTA7Yzx1O2MrKyl7dmFyIGw9e307bC5CeXRlc09mQ2xlYXJEYXRhPUoocixhKSxhKz0yLGwuQnl0ZXNPZlByb3RlY3RlZERhdGE9JChyLGEpLGErPTQscy5zdWJzYW1wbGVzLnB1c2gobCl9fWUuc2FtcGxlcy5wdXNoKHMpfX0pKX19LHtrZXk6InBzc2giLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1bXSxhPVtdLG49MCxpPTA7aTwxNjtpKyspYS5wdXNoKGJlKHRbbitpXSkpO2lmKG4rPTE2LGUudmVyc2lvbj4wKXt2YXIgcz0kKHQsbik7bis9NDtmb3IodmFyIG89MDtvPCgiIitzKS5sZW5ndGg7bysrKWZvcih2YXIgdT0wO3U8MTY7dSsrKXt2YXIgYz10W25dO24rPTEsci5wdXNoKGJlKGMpKX19dmFyIGw9JCh0LG4pO2UuZGF0YV9zaXplPWwsbis9NCxlLmtpZD1yLGUuc3lzdGVtX2lkPWEsZS5idWZmZXI9dH0pKX19LHtrZXk6InN0c2QiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBnZSh0LCEwLChmdW5jdGlvbih0LHIsYSl7dC5lbnRyeUNvdW50PSQociksdC5lbnRyaWVzPWUuZmluZEJveChyLnN1YmFycmF5KDQpLFtdLGErNCkubWFwKChmdW5jdGlvbih0KXtzd2l0Y2godC50eXBlKXtjYXNlImF2YzEiOmNhc2UiYXZjMiI6Y2FzZSJhdmMzIjpjYXNlImF2YzQiOnJldHVybiBlLmF2YzEodCk7Y2FzZSJodmMxIjpjYXNlImhldjEiOnJldHVybiBlLmh2YzEodCk7Y2FzZSJtcDRhIjpyZXR1cm4gZS5tcDRhKHQpO2Nhc2UiYWxhdyI6Y2FzZSJ1bGF3IjpyZXR1cm4gZS5hbGF3KHQpO2Nhc2UiZW5jYSI6cmV0dXJuIGdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt0LmNoYW5uZWxDb3VudD1KKHIsMTYpLHQuc2FtcGxlc2l6ZT1KKHIsMTgpLHQuc2FtcGxlUmF0ZT0kKHIsMjQpLzY1NTM2LHI9ci5zdWJhcnJheSgyOCksdC5zaW5mPWUuc2luZihlLmZpbmRCb3gocixbInNpbmYiXSxhKVswXSksdC5lc2RzPWUuZXNkcyhlLmZpbmRCb3gocixbImVzZHMiXSxhKVswXSl9KSk7Y2FzZSJlbmN2IjpyZXR1cm4gZ2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3Qud2lkdGg9SihyLDI0KSx0LmhlaWdodD1KKHIsMjYpLHQuaG9yaXpyZXNvbHV0aW9uPSQociwyOCksdC52ZXJ0cmVzb2x1dGlvbj0kKHIsMzIpLHI9ci5zdWJhcnJheSg3OCksdC5zaW5mPWUuc2luZihlLmZpbmRCb3gocixbInNpbmYiXSxhKVswXSksdC5hdmNDPWUuYXZjQyhlLmZpbmRCb3gocixbImF2Y0MiXSxhKVswXSksdC5odmNDPWUuaHZjQyhlLmZpbmRCb3gocixbImh2Y0MiXSxhKVswXSksdC5wYXNwPWUucGFzcChlLmZpbmRCb3gocixbInBhc3AiXSxhKVswXSl9KSl9fSkpLmZpbHRlcihCb29sZWFuKX0pKX19LHtrZXk6InRlbmMiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCExLChmdW5jdGlvbihlLHQpe3ZhciByPTY7ZS5kZWZhdWx0X0lzRW5jcnlwdGVkPXRbcl0scis9MSxlLmRlZmF1bHRfSVZfc2l6ZT10W3JdLHIrPTEsZS5kZWZhdWx0X0tJRD1bXTtmb3IodmFyIGE9MDthPDE2O2ErKyllLmRlZmF1bHRfS0lELnB1c2goYmUodFtyXSkpLHIrPTF9KSl9fSx7a2V5OiJzY2hpIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZ2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3QudGVuYz1lLnRlbmMoZS5maW5kQm94KHIsWyJ0ZW5jIl0sYSlbMF0pfSkpfX0se2tleToic2luZiIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt0LnNjaGk9ZS5zY2hpKGUuZmluZEJveChyLFsic2NoaSJdLGEpWzBdKSx0LmZybWE9ZS5mcm1hKGUuZmluZEJveChyLFsiZnJtYSJdLGEpWzBdKX0pKX19LHtrZXk6ImZybWEiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCExLChmdW5jdGlvbihlLHQpe2UuZGF0YV9mb3JtYXQ9IiI7Zm9yKHZhciByPTA7cjw0O3IrKyllLmRhdGFfZm9ybWF0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRbcl0pfSkpfX0se2tleToiYXZjMSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt2YXIgbj15ZSh0LHIpLGk9ci5zdWJhcnJheShuKTthKz1uLHQuYXZjQz1lLmF2Y0MoZS5maW5kQm94KGksWyJhdmNDIl0sYSlbMF0pLHQucGFzcD1lLnBhc3AoZS5maW5kQm94KGksWyJwYXNwIl0sYSlbMF0pfSkpfX0se2tleToiYXZjQyIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGdlKGUsITEsKGZ1bmN0aW9uKGUsdCl7ZS5jb25maWd1cmF0aW9uVmVyc2lvbj10WzBdLGUuQVZDUHJvZmlsZUluZGljYXRpb249dFsxXSxlLnByb2ZpbGVDb21wYXRpYmlsaXR5PXRbMl0sZS5BVkNMZXZlbEluZGljYXRpb249dFszXSxlLmNvZGVjPXRlKFt0WzFdLHRbMl0sdFszXV0pLGUubGVuZ3RoU2l6ZU1pbnVzT25lPTMmdFs0XSxlLnNwc0xlbmd0aD0zMSZ0WzVdLGUuc3BzPVtdO2Zvcih2YXIgcj02LGE9MDthPGUuc3BzTGVuZ3RoO2ErKyl7dmFyIG49Sih0LHIpO3IrPTIsZS5zcHMucHVzaCh0LnN1YmFycmF5KHIscituKSkscis9bn1lLnBwc0xlbmd0aD10W3JdLHIrPTEsZS5wcHM9W107Zm9yKHZhciBpPTA7aTxlLnBwc0xlbmd0aDtpKyspe3ZhciBzPUoodCxyKTtyKz0yLGUucHBzLnB1c2godC5zdWJhcnJheShyLHIrPXMpKSxyKz1zfX0pKX19LHtrZXk6Imh2YzEiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBnZSh0LCExLChmdW5jdGlvbih0LHIsYSl7dmFyIG49eWUodCxyKSxpPXIuc3ViYXJyYXkobik7YSs9bix0Lmh2Y0M9ZS5odmNDKGUuZmluZEJveChpLFsiaHZjQyJdLGEpWzBdKSx0LnBhc3A9ZS5wYXNwKGUuZmluZEJveChpLFsicGFzcCJdLGEpWzBdKX0pKX19LHtrZXk6Imh2Y0MiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCExLChmdW5jdGlvbih0LHIpe3QuZGF0YT1lLmRhdGEsdC5jb2RlYz0iaGV2MS4xLjYuTDkzLkIwIix0LmNvbmZpZ3VyYXRpb25WZXJzaW9uPXJbMF07dmFyIGE9clsxXTt0LmdlbmVyYWxQcm9maWxlU3BhY2U9YT4+Nix0LmdlbmVyYWxUaWVyRmxhZz0oMzImYSk+PjUsdC5nZW5lcmFsUHJvZmlsZUlkYz0zMSZhLHQuZ2VuZXJhbFByb2ZpbGVDb21wYXRpYmlsaXR5PSQociwyKSx0LmdlbmVyYWxDb25zdHJhaW50SW5kaWNhdG9yRmxhZ3M9ci5zdWJhcnJheSg2LDEyKSx0LmdlbmVyYWxMZXZlbElkYz1yWzEyXSx0LmF2Z0ZyYW1lUmF0ZT1KKHIsMTkpLHQubnVtT2ZBcnJheXM9clsyMl0sdC52cHM9W10sdC5zcHM9W10sdC5wcHM9W107Zm9yKHZhciBuPTIzLGk9MCxzPTAsbz0wLHU9MDt1PHQubnVtT2ZBcnJheXM7dSsrKXtpPTYzJnJbbl0scz1KKHIsbisxKSxuKz0zO2Zvcih2YXIgYyxsPVtdLGQ9MDtkPHM7ZCsrKW89SihyLG4pLG4rPTIsbC5wdXNoKHIuc3ViYXJyYXkobixuK28pKSxuKz1vO2lmKDMyPT09aSkoYz10LnZwcykucHVzaC5hcHBseShjLGwpO2Vsc2UgaWYoMzM9PT1pKXt2YXIgZjsoZj10LnNwcykucHVzaC5hcHBseShmLGwpfWVsc2UgaWYoMzQ9PT1pKXt2YXIgaDsoaD10LnBwcykucHVzaC5hcHBseShoLGwpfX19KSl9fSx7a2V5OiJwYXNwIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2UoZSwhMSwoZnVuY3Rpb24oZSx0KXtlLmhTcGFjaW5nPSQodCksZS52U3BhY2luZz0kKHQsNCl9KSl9fSx7a2V5OiJtcDRhIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZ2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3ZhciBuPW1lKHQscik7dC5lc2RzPWUuZXNkcyhlLmZpbmRCb3goci5zdWJhcnJheShuKSxbImVzZHMiXSxhK24pWzBdKX0pKX19LHtrZXk6ImVzZHMiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe2UuY29kZWM9Im1wNGEuIjtmb3IodmFyIHI9MCxhPTAsbj0wLGk9MDt0Lmxlbmd0aDspe2ZvcihpPXRbcj0wXSxhPXRbcisxXSxyKz0yOzEyOCZhOyluPSgxMjcmYSk8PDcsYT10W3JdLHIrPTE7aWYobis9MTI3JmEsMz09PWkpdD10LnN1YmFycmF5KHIrMyk7ZWxzZXtpZig0IT09aSl7aWYoNT09PWkpe3ZhciBzPWUuY29uZmlnPXQuc3ViYXJyYXkocixyK24pLG89KDI0OCZzWzBdKT4+MztyZXR1cm4gMzE9PT1vJiZzLmxlbmd0aD49MiYmKG89MzIrKCg3JnNbMF0pPDwzKSsoKDIyNCZzWzFdKT4+NSkpLGUub2JqZWN0VHlwZT1vLGUuY29kZWMrPW8udG9TdHJpbmcoMTYpLHZvaWQoIi4iPT09ZS5jb2RlY1tlLmNvZGVjLmxlbmd0aC0xXSYmKGUuY29kZWM9ZS5jb2RlYy5zdWJzdHJpbmcoMCxlLmNvZGVjLmxlbmd0aC0xKSkpfXJldHVybiB2b2lkKCIuIj09PWUuY29kZWNbZS5jb2RlYy5sZW5ndGgtMV0mJihlLmNvZGVjPWUuY29kZWMuc3Vic3RyaW5nKDAsZS5jb2RlYy5sZW5ndGgtMSkpKX1lLmNvZGVjKz0odFtyXS50b1N0cmluZygxNikrIi4iKS5wYWRTdGFydCgzLCIwIiksdD10LnN1YmFycmF5KHIrMTMpfX19KSl9fSx7a2V5OiJhbGF3Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2UoZSwhMSwoZnVuY3Rpb24oZSx0KXttZShlLHQpfSkpfX0se2tleToic3R0cyIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGdlKGUsITAsKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPSQodCksYT1bXSxuPTQsaT0wO2k8cjtpKyspYS5wdXNoKHtjb3VudDokKHQsbiksZGVsdGE6JCh0LG4rNCl9KSxuKz04O2UuZW50cnlDb3VudD1yLGUuZW50cmllcz1hfSkpfX0se2tleToiY3R0cyIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGdlKGUsITAsKGZ1bmN0aW9uKGUsdCl7dmFyIHI9JCh0KSxhPVtdLG49NDtpZigxPT09ZS52ZXJzaW9uKWZvcih2YXIgaT0wO2k8cjtpKyspYS5wdXNoKHtjb3VudDokKHQsbiksb2Zmc2V0OiQodCxuKzQpfSksbis9ODtlbHNlIGZvcih2YXIgcz0wO3M8cjtzKyspYS5wdXNoKHtjb3VudDokKHQsbiksb2Zmc2V0Oi0oMSt+JCh0LG4rNCkpfSksbis9ODtlLmVudHJ5Q291bnQ9cixlLmVudHJpZXM9YX0pKX19LHtrZXk6InN0c2MiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0kKHQpLGE9W10sbj00LGk9MDtpPHI7aSsrKWEucHVzaCh7Zmlyc3RDaHVuazokKHQsbiksc2FtcGxlc1BlckNodW5rOiQodCxuKzQpLHNhbXBsZURlc2NyaXB0aW9uSW5kZXg6JCh0LG4rOCl9KSxuKz0xMjtlLmVudHJ5Q291bnQ9cixlLmVudHJpZXM9YX0pKX19LHtrZXk6InN0c3oiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe3ZhciByPSQodCksYT0kKHQsNCksbj1bXTtpZighcilmb3IodmFyIGk9OCxzPTA7czxhO3MrKyluLnB1c2goJCh0LGkpKSxpKz00O2Uuc2FtcGxlU2l6ZT1yLGUuc2FtcGxlQ291bnQ9YSxlLmVudHJ5U2l6ZXM9bn0pKX19LHtrZXk6InN0Y28iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0kKHQpLGE9W10sbj00LGk9MDtpPHI7aSsrKWEucHVzaCgkKHQsbikpLG4rPTQ7ZS5lbnRyeUNvdW50PXIsZS5lbnRyaWVzPWF9KSl9fSx7a2V5OiJjbzY0Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2UoZSwhMCwoZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9JCh0KSxhPVtdLG49NCxpPTA7aTxyO2krKylhLnB1c2goZWUodCxuKSksbis9ODtlLmVudHJ5Q291bnQ9cixlLmVudHJpZXM9YX0pKX19LHtrZXk6InN0c3MiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnZShlLCEwLChmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0kKHQpLGE9W10sbj00LGk9MDtpPHI7aSsrKWEucHVzaCgkKHQsbikpLG4rPTQ7ZS5lbnRyeUNvdW50PXIsZS5lbnRyaWVzPWF9KSl9fSx7a2V5OiJtb29mIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZ2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3QubWZoZD1lLm1maGQoZS5maW5kQm94KHIsWyJtZmhkIl0sYSlbMF0pLHQudHJhZj1lLmZpbmRCb3gocixbInRyYWYiXSxhKS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBlLnRyYWYodCl9KSl9KSl9fSx7a2V5OiJtZmhkIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2UoZSwhMCwoZnVuY3Rpb24oZSx0KXtlLnNlcXVlbmNlTnVtYmVyPSQodCl9KSl9fSx7a2V5OiJ0cmFmIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZ2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3QudGZoZD1lLnRmaGQoZS5maW5kQm94KHIsWyJ0ZmhkIl0sYSlbMF0pLHQudGZkdD1lLnRmZHQoZS5maW5kQm94KHIsWyJ0ZmR0Il0sYSlbMF0pLHQudHJ1bj1lLnRydW4oZS5maW5kQm94KHIsWyJ0cnVuIl0sYSlbMF0pfSkpfX0se2tleToidHJ1biIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGdlKGUsITAsKGZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS52ZXJzaW9uLGE9ZS5mbGFncyxuPXQubGVuZ3RoLGk9ZS5zYW1wbGVDb3VudD0kKHQpLHM9NDtpZihuPnMmJjEmYSYmKGUuZGF0YU9mZnNldD0tKDErfiQodCxzKSkscys9NCksbj5zJiY0JmEmJihlLmZpcnN0U2FtcGxlRmxhZ3M9JCh0LHMpLHMrPTQpLGUuc2FtcGxlcz1bXSxuPnMpZm9yKHZhciBvLHU9MDt1PGk7dSsrKW89e30sMjU2JmEmJihvLmR1cmF0aW9uPSQodCxzKSxzKz00KSw1MTImYSYmKG8uc2l6ZT0kKHQscykscys9NCksMTAyNCZhJiYoby5mbGFncz0kKHQscykscys9NCksMjA0OCZhJiYoby5jdHM9cj8tKDErfiQodCxzKzQpKTokKHQscykscys9NCksZS5zYW1wbGVzLnB1c2gobyl9KSl9fSx7a2V5OiJ0ZmR0Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2UoZSwhMCwoZnVuY3Rpb24oZSx0KXsxPT09ZS52ZXJzaW9uP2UuYmFzZU1lZGlhRGVjb2RlVGltZT1lZSh0KTplLmJhc2VNZWRpYURlY29kZVRpbWU9JCh0KX0pKX19LHtrZXk6InByb2JlIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4hIWUuZmluZEJveCh0LFsiZnR5cCJdKX19LHtrZXk6InBhcnNlU2FtcGxlRmxhZ3MiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybntpc0xlYWRpbmc6KDEyJmVbMF0pPj4+MixkZXBlbmRzT246MyZlWzBdLGlzRGVwZW5kZWRPbjooMTkyJmVbMV0pPj4+NixoYXNSZWR1bmRhbmN5Oig0OCZlWzFdKT4+PjQscGFkZGluZ1ZhbHVlOigxNCZlWzFdKT4+PjEsaXNOb25TeW5jU2FtcGxlOjEmZVsxXSxkZWdyYWRhdGlvblByaW9yaXR5OmVbMl08PDh8ZVszXX19fSx7a2V5OiJtb292VG9UcmFjayIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBhLG4saT1lLnRyYWs7aWYoaSYmaS5sZW5ndGgpe3ZhciBzPWkuZmluZCgoZnVuY3Rpb24oZSl7dmFyIHQscjtyZXR1cm4idmlkZSI9PT0obnVsbD09PSh0PWUubWRpYSl8fHZvaWQgMD09PXR8fG51bGw9PT0ocj10LmhkbHIpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmhhbmRsZXJUeXBlKX0pKSxvPWkuZmluZCgoZnVuY3Rpb24oZSl7dmFyIHQscjtyZXR1cm4ic291biI9PT0obnVsbD09PSh0PWUubWRpYSl8fHZvaWQgMD09PXR8fG51bGw9PT0ocj10LmhkbHIpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmhhbmRsZXJUeXBlKX0pKTtpZihzJiZ0KXt2YXIgdSxjLGwsZCxmLGgscCx2PXQseT1udWxsPT09KHU9cy50a2hkKXx8dm9pZCAwPT09dT92b2lkIDA6dS50cmFja0lkO251bGwhPXkmJih2LmlkPXMudGtoZC50cmFja0lkKSx2LnRraGREdXJhdGlvbj1zLnRraGQuZHVyYXRpb24sdi5tdmhkRHVydGlvbj1lLm12aGQuZHVyYXRpb24sdi5tdmhkVGltZWNhbGU9ZS5tdmhkLnRpbWVzY2FsZSx2LnRpbWVzY2FsZT12LmZvcm1hdFRpbWVzY2FsZT1zLm1kaWEubWRoZC50aW1lc2NhbGUsdi5kdXJhdGlvbj1zLm1kaWEubWRoZC5kdXJhdGlvbnx8di5tdmhkRHVydGlvbi92Lm12aGRUaW1lY2FsZSp2LnRpbWVzY2FsZTt2YXIgbSxnLGssYixfLHcseCxBLEI9cy5tZGlhLm1pbmYuc3RibC5zdHNkLmVudHJpZXNbMF07aWYodi53aWR0aD1CLndpZHRoLHYuaGVpZ2h0PUIuaGVpZ2h0LEIucGFzcCYmKHYuc2FyUmF0aW89W0IucGFzcC5oU3BhY2luZyxCLnBhc3AudlNwYWNpbmddKSxCLmh2Y0Mpdi5jb2RlY1R5cGU9Uyx2LmNvZGVjPUIuaHZjQy5jb2RlYyx2LnZwcz1CLmh2Y0MudnBzLHYuc3BzPUIuaHZjQy5zcHMsdi5wcHM9Qi5odmNDLnBwcyx2Lmh2Y0M9Qi5odmNDLmRhdGE7ZWxzZXtpZighQi5hdmNDKXRocm93IG5ldyBFcnJvcigidW5rbm93biB2aWRlbyBzdHNkIGVudHJ5Iik7di5jb2RlYz1CLmF2Y0MuY29kZWMsdi5zcHM9Qi5hdmNDLnNwcyx2LnBwcz1CLmF2Y0MucHBzfWlmKHYucHJlc2VudD0hMCx2LmV4dD17fSx2LmV4dC5zdHNzPW51bGw9PT0oYz1zLm1kaWEpfHx2b2lkIDA9PT1jfHxudWxsPT09KGw9Yy5taW5mKXx8dm9pZCAwPT09bHx8bnVsbD09PShkPWwuc3RibCl8fHZvaWQgMD09PWQ/dm9pZCAwOmQuc3Rzcyx2LmV4dC5jdHRzPW51bGw9PT0oZj1zLm1kaWEpfHx2b2lkIDA9PT1mfHxudWxsPT09KGg9Zi5taW5mKXx8dm9pZCAwPT09aHx8bnVsbD09PShwPWguc3RibCl8fHZvaWQgMD09PXA/dm9pZCAwOnAuY3R0cyxCJiYiZW5jdiI9PT1CLnR5cGUpdi5pc1ZpZGVvRW5jcnlwdGlvbj0hMCxCLmRlZmF1bHRfS0lEPW51bGw9PT0obT1CLnNpbmYpfHx2b2lkIDA9PT1tfHxudWxsPT09KGc9bS5zY2hpKXx8dm9pZCAwPT09Zz92b2lkIDA6Zy50ZW5jLmRlZmF1bHRfS0lELEIuZGVmYXVsdF9Jc0VuY3J5cHRlZD1udWxsPT09KGs9Qi5zaW5mKXx8dm9pZCAwPT09a3x8bnVsbD09PShiPWsuc2NoaSl8fHZvaWQgMD09PWI/dm9pZCAwOmIudGVuYy5kZWZhdWx0X0lzRW5jcnlwdGVkLEIuZGVmYXVsdF9JVl9zaXplPW51bGw9PT0oXz1CLnNpbmYpfHx2b2lkIDA9PT1ffHxudWxsPT09KHc9Xy5zY2hpKXx8dm9pZCAwPT09dz92b2lkIDA6dy50ZW5jLmRlZmF1bHRfSVZfc2l6ZSx2LnZpZGVvU2VuYz1zLm1kaWEubWluZi5zdGJsLnNlbmMmJnMubWRpYS5taW5mLnN0Ymwuc2VuYy5zYW1wbGVzLEIuZGF0YV9mb3JtYXQ9bnVsbD09PSh4PUIuc2luZil8fHZvaWQgMD09PXh8fG51bGw9PT0oQT14LmZybWEpfHx2b2lkIDA9PT1BP3ZvaWQgMDpBLmRhdGFfZm9ybWF0LHYudXNlRU1FPWUudXNlRU1FLHYua2lkVmFsdWU9ZS5raWRWYWx1ZSx2LnBzc2g9ZS5wc3NoLHYuZW5jdj1CfWlmKG8mJnIpe3ZhciBULEMsVSxQLEkseixNLFIsTyxMPXIsVj1udWxsPT09KFQ9by50a2hkKXx8dm9pZCAwPT09VD92b2lkIDA6VC50cmFja0lkO251bGwhPVYmJihMLmlkPW8udGtoZC50cmFja0lkKSxMLnRraGREdXJhdGlvbj1vLnRraGQuZHVyYXRpb24sTC5tdmhkRHVydGlvbj1lLm12aGQuZHVyYXRpb24sTC5tdmhkVGltZWNhbGU9ZS5tdmhkLnRpbWVzY2FsZSxMLnRpbWVzY2FsZT1MLmZvcm1hdFRpbWVzY2FsZT1vLm1kaWEubWRoZC50aW1lc2NhbGUsTC5kdXJhdGlvbj1vLm1kaWEubWRoZC5kdXJhdGlvbnx8TC5tdmhkRHVydGlvbi9MLm12aGRUaW1lY2FsZSpMLnRpbWVzY2FsZTt2YXIgRixOLGosRyxILEsscSxXLFg9by5tZGlhLm1pbmYuc3RibC5zdHNkLmVudHJpZXNbMF07c3dpdGNoKEwuc2FtcGxlU2l6ZT1YLnNhbXBsZVNpemUsTC5zYW1wbGVSYXRlPVguc2FtcGxlUmF0ZSxMLmNoYW5uZWxDb3VudD1YLmNoYW5uZWxDb3VudCxMLnByZXNlbnQ9ITAsWC50eXBlKXtjYXNlImFsYXciOkwuY29kZWNUeXBlPUwuY29kZWM9RCxMLnNhbXBsZVJhdGU9OGUzO2JyZWFrO2Nhc2UidWxhdyI6TC5jb2RlY1R5cGU9TC5jb2RlYz1FLEwuc2FtcGxlUmF0ZT04ZTM7YnJlYWs7ZGVmYXVsdDpMLnNhbXBsZUR1cmF0aW9uPXNlLmdldEZyYW1lRHVyYXRpb24oTC5zYW1wbGVSYXRlLEwudGltZXNjYWxlKSxMLnNhbXBsZVJhdGVJbmRleD1zZS5nZXRSYXRlSW5kZXhCeVJhdGUoTC5zYW1wbGVSYXRlKSxMLm9iamVjdFR5cGU9KG51bGw9PT0oYT1YLmVzZHMpfHx2b2lkIDA9PT1hP3ZvaWQgMDphLm9iamVjdFR5cGUpfHwyLFguZXNkcyYmKEwuY29uZmlnPUFycmF5LmZyb20oWC5lc2RzLmNvbmZpZykpLEwuY29kZWM9KG51bGw9PT0obj1YLmVzZHMpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNvZGVjKXx8Im1wNGEuNDAuMiJ9aWYoTC5zYW1wbGVEdXJhdGlvbj1zZS5nZXRGcmFtZUR1cmF0aW9uKEwuc2FtcGxlUmF0ZSxMLnRpbWVzY2FsZSksTC5vYmplY3RUeXBlPShudWxsPT09KEM9WC5lc2RzKXx8dm9pZCAwPT09Qz92b2lkIDA6Qy5vYmplY3RUeXBlKXx8MixYLmVzZHMmJihYLmVzZHMuY29uZmlnP0wuY29uZmlnPUFycmF5LmZyb20oWC5lc2RzLmNvbmZpZyk6Y29uc29sZS53YXJuKCJlc2RzIGNvbmZpZyBpcyBudWxsIikpLEwuY29kZWM9KG51bGw9PT0oVT1YLmVzZHMpfHx2b2lkIDA9PT1VP3ZvaWQgMDpVLmNvZGVjKXx8Im1wNGEuNDAuMiIsTC5zYW1wbGVSYXRlSW5kZXg9c2UuZ2V0UmF0ZUluZGV4QnlSYXRlKEwuc2FtcGxlUmF0ZSksTC5leHQ9e30sTC5leHQuc3Rzcz1udWxsPT09KFA9by5tZGlhKXx8dm9pZCAwPT09UHx8bnVsbD09PShJPVAubWluZil8fHZvaWQgMD09PUl8fG51bGw9PT0oej1JLnN0YmwpfHx2b2lkIDA9PT16P3ZvaWQgMDp6LnN0c3MsTC5leHQuY3R0cz1udWxsPT09KE09by5tZGlhKXx8dm9pZCAwPT09TXx8bnVsbD09PShSPU0ubWluZil8fHZvaWQgMD09PVJ8fG51bGw9PT0oTz1SLnN0YmwpfHx2b2lkIDA9PT1PP3ZvaWQgMDpPLmN0dHMsTC5wcmVzZW50PSEwLFgmJiJlbmNhIj09PVgudHlwZSlMLmlzQXVkaW9FbmNyeXB0aW9uPSEwLFguZGF0YV9mb3JtYXQ9bnVsbD09PShGPVguc2luZil8fHZvaWQgMD09PUZ8fG51bGw9PT0oTj1GLmZybWEpfHx2b2lkIDA9PT1OP3ZvaWQgMDpOLmRhdGFfZm9ybWF0LFguZGVmYXVsdF9LSUQ9bnVsbD09PShqPVguc2luZil8fHZvaWQgMD09PWp8fG51bGw9PT0oRz1qLnNjaGkpfHx2b2lkIDA9PT1HP3ZvaWQgMDpHLnRlbmMuZGVmYXVsdF9LSUQsWC5kZWZhdWx0X0lzRW5jcnlwdGVkPW51bGw9PT0oSD1YLnNpbmYpfHx2b2lkIDA9PT1IfHxudWxsPT09KEs9SC5zY2hpKXx8dm9pZCAwPT09Sz92b2lkIDA6Sy50ZW5jLmRlZmF1bHRfSXNFbmNyeXB0ZWQsWC5kZWZhdWx0X0lWX3NpemU9bnVsbD09PShxPVguc2luZil8fHZvaWQgMD09PXF8fG51bGw9PT0oVz1xLnNjaGkpfHx2b2lkIDA9PT1XP3ZvaWQgMDpXLnRlbmMuZGVmYXVsdF9JVl9zaXplLEwuYXVkaW9TZW5jPW8ubWRpYS5taW5mLnN0Ymwuc2VuYyYmby5tZGlhLm1pbmYuc3RibC5zZW5jLnNhbXBsZXMsTC51c2VFTUU9ZS51c2VFTUUsTC5raWRWYWx1ZT1lLmtpZFZhbHVlLEwuZW5jYT1YfWlmKHImJihyLmlzVmlkZW9FbmNyeXB0aW9uPSEhdCYmdC5pc1ZpZGVvRW5jcnlwdGlvbiksdCYmKHQuaXNBdWRpb0VuY3J5cHRpb249ISFyJiZyLmlzQXVkaW9FbmNyeXB0aW9uKSxudWxsIT10JiZ0LmVuY3Z8fG51bGwhPXImJnIuZW5jYSl7dmFyIFksWixRPW51bGw9PXR8fG51bGw9PT0oWT10LmVuY3YpfHx2b2lkIDA9PT1ZP3ZvaWQgMDpZLmRlZmF1bHRfS0lELEo9bnVsbD09cnx8bnVsbD09PShaPXIuZW5jYSl8fHZvaWQgMD09PVo/dm9pZCAwOlouZGVmYXVsdF9LSUQsJD1RfHxKPyhRfHxKKS5qb2luKCIiKTpudWxsO3QmJih0LmtpZD0kKSxyJiYoci5raWQ9JCl9cmV0dXJuIHQmJih0LmZsYWdzPTM4NDEpLHImJihyLmZsYWdzPTE3OTMpLHt2aWRlb1RyYWNrOnQsYXVkaW9UcmFjazpyfX19fSx7a2V5OiJldmFsdWF0ZURlZmF1bHREdXJhdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBhLG49bnVsbD09dHx8bnVsbD09PShhPXQuc2FtcGxlcyl8fHZvaWQgMD09PWE/dm9pZCAwOmEubGVuZ3RoO3JldHVybiBuPzEwMjQqbi90LnRpbWVzY2FsZSplLnRpbWVzY2FsZS9yOjEwMjR9fSx7a2V5OiJtb29mVG9TYW1wbGVzIix2YWx1ZTpmdW5jdGlvbih0LHIsYSl7dmFyIG49e307cmV0dXJuIHQubWZoZCYmKHImJihyLnNlcXVlbmNlTnVtYmVyPXQubWZoZC5zZXF1ZW5jZU51bWJlciksYSYmKGEuc2VxdWVuY2VOdW1iZXI9dC5tZmhkLnNlcXVlbmNlTnVtYmVyKSksdC50cmFmLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBpPXQudGZoZCxzPXQudGZkdCxvPXQudHJ1bjtpZihpJiZvKXtzJiYociYmci5pZD09PWkudHJhY2tJZCYmKHIuYmFzZU1lZGlhRGVjb2RlVGltZT1zLmJhc2VNZWRpYURlY29kZVRpbWUpLGEmJmEuaWQ9PT1pLnRyYWNrSWQmJihhLmJhc2VNZWRpYURlY29kZVRpbWU9cy5iYXNlTWVkaWFEZWNvZGVUaW1lKSk7dmFyIHU9aS5kZWZhdWx0U2FtcGxlU2l6ZXx8MCxjPWkuZGVmYXVsdFNhbXBsZUR1cmF0aW9ufHxlLmV2YWx1YXRlRGVmYXVsdER1cmF0aW9uKHIsYSxvLnNhbXBsZXMubGVuZ3RofHxvLnNhbXBsZUNvdW50KSxsPW8uZGF0YU9mZnNldHx8MCxkPTAsZj0tMTtpZighby5zYW1wbGVzLmxlbmd0aCYmby5zYW1wbGVDb3VudCl7bltpLnRyYWNrSWRdPVtdO2Zvcih2YXIgaD0wO2g8by5zYW1wbGVDb3VudDtoKyspbltpLnRyYWNrSWRdLnB1c2goe29mZnNldDpsLGR0czpkLGR1cmF0aW9uOmMsc2l6ZTp1fSksZCs9YyxsKz11fWVsc2UgbltpLnRyYWNrSWRdPW8uc2FtcGxlcy5tYXAoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuKGU9e29mZnNldDpsLGR0czpkLHB0czpkKyhlLmN0c3x8MCksZHVyYXRpb246ZS5kdXJhdGlvbnx8YyxzaXplOmUuc2l6ZXx8dSxnb3BJZDpmLGtleWZyYW1lOjA9PT10fHxudWxsIT09ZS5mbGFncyYmdm9pZCAwIT09ZS5mbGFncyYmKDY1NTM2JmUuZmxhZ3MpPj4+MCE9NjU1MzZ9KS5rZXlmcmFtZSYmKGYrKyxlLmdvcElkPWYpLGQrPWUuZHVyYXRpb24sbCs9ZS5zaXplLGV9KSl9fSkpLG59fSx7a2V5OiJtb292VG9TYW1wbGVzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnRyYWs7aWYodCYmdC5sZW5ndGgpe3ZhciByPXQuZmluZCgoZnVuY3Rpb24oZSl7dmFyIHQscjtyZXR1cm4idmlkZSI9PT0obnVsbD09PSh0PWUubWRpYSl8fHZvaWQgMD09PXR8fG51bGw9PT0ocj10LmhkbHIpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmhhbmRsZXJUeXBlKX0pKSxhPXQuZmluZCgoZnVuY3Rpb24oZSl7dmFyIHQscjtyZXR1cm4ic291biI9PT0obnVsbD09PSh0PWUubWRpYSl8fHZvaWQgMD09PXR8fG51bGw9PT0ocj10LmhkbHIpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmhhbmRsZXJUeXBlKX0pKTtpZihyfHxhKXt2YXIgbixpO2lmKHIpe3ZhciBzLG8sdT1udWxsPT09KHM9ci5tZGlhKXx8dm9pZCAwPT09c3x8bnVsbD09PShvPXMubWluZil8fHZvaWQgMD09PW8/dm9pZCAwOm8uc3RibDtpZighdSlyZXR1cm47dmFyIGM9dS5zdHRzLGw9dS5zdHNjLGQ9dS5zdHN6LGY9dS5zdGNvLGg9dS5zdHNzLHA9dS5jdHRzO2lmKCEoYyYmbCYmZCYmZiYmaCkpcmV0dXJuO249dmUoYyxsLGQsZixwLGgpfWlmKGEpe3ZhciB2LHksbSxnPW51bGw9PT0odj1hLm1kaWEpfHx2b2lkIDA9PT12fHxudWxsPT09KHk9di5taW5mKXx8dm9pZCAwPT09eT92b2lkIDA6eS5zdGJsO2lmKCFnKXJldHVybjt2YXIgaz1udWxsPT09KG09YS5tZGlhLm1kaGQpfHx2b2lkIDA9PT1tP3ZvaWQgMDptLnRpbWVzY2FsZSxiPWcuc3R0cyxfPWcuc3RzYyx3PWcuc3Rzeix4PWcuc3RjbztpZighKGsmJmImJl8mJncmJngpKXJldHVybjtpPXZlKGIsXyx3LHgpfXJldHVybnt2aWRlb1NhbXBsZXM6bixhdWRpb1NhbXBsZXM6aX19fX19XSksZX0oKTtmdW5jdGlvbiB2ZShlLHQscixhLG4saSl7dmFyIHMsbyx1LGM9W10sbD1udWxsPT1uP3ZvaWQgMDpuLmVudHJpZXMsZD10LmVudHJpZXMsZj1hLmVudHJpZXMsaD1yLmVudHJ5U2l6ZXMscD1udWxsPT1pP3ZvaWQgMDppLmVudHJpZXM7cCYmKHM9e30scC5mb3JFYWNoKChmdW5jdGlvbihlKXtzW2UtMV09ITB9KSkpLGwmJihvPVtdLGwuZm9yRWFjaCgoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuY291bnQscj1lLm9mZnNldCxhPTA7YTx0O2ErKylvLnB1c2gocil9KSkpO3ZhciB2PS0xLHk9MCxtPTAsZz0wLGs9MCxiPTAsXz1kWzBdLnNhbXBsZXNQZXJDaHVuayx3PWRbMV0/ZFsxXS5maXJzdENodW5rLTE6MS8wO3JldHVybiBlLmVudHJpZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuY291bnQsYT1lLmRlbHRhLG49MDtuPHQ7bisrKXU9e2R0czp5LGR1cmF0aW9uOmEsc2l6ZTpoW21dfHxyLnNhbXBsZVNpemUsb2Zmc2V0OmZbZ10rYixpbmRleDptfSxwJiYodS5rZXlmcmFtZT1zW21dLHUua2V5ZnJhbWUmJnYrKyx1LmdvcElkPXYpLG8mJm08by5sZW5ndGgmJih1LnB0cz11LmR0cytvW21dKSxjLnB1c2godSkseSs9YSwrK208Xz9iKz11LnNpemU6KGcrKyxiPTAsZz49dyYmKGsrKyx3PWRbaysxXT9kW2srMV0uZmlyc3RDaHVuay0xOjEvMCksXys9ZFtrXS5zYW1wbGVzUGVyQ2h1bmspfSkpLGN9ZnVuY3Rpb24geWUoZSx0KXtyZXR1cm4gZS5kYXRhUmVmZXJlbmNlSW5kZXg9Sih0LDYpLGUud2lkdGg9Sih0LDI0KSxlLmhlaWdodD1KKHQsMjYpLGUuaG9yaXpyZXNvbHV0aW9uPSQodCwyOCksZS52ZXJ0cmVzb2x1dGlvbj0kKHQsMzIpLGUuZnJhbWVDb3VudD1KKHQsNDApLGUuZGVwdGg9Sih0LDc0KSw3OH1mdW5jdGlvbiBtZShlLHQpe3JldHVybiBlLmRhdGFSZWZlcmVuY2VJbmRleD1KKHQsNiksZS5jaGFubmVsQ291bnQ9Sih0LDE2KSxlLnNhbXBsZVNpemU9Sih0LDE4KSxlLnNhbXBsZVJhdGU9JCh0LDI0KS82NTUzNiwyOH1mdW5jdGlvbiBnZShlLHQscil7aWYoZSl7aWYoZS5zaXplIT09ZS5kYXRhLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoImJveCAiLmNvbmNhdChlLnR5cGUsIiBzaXplICE9PSBkYXRhLmxlbmd0aCIpKTt2YXIgYT17c3RhcnQ6ZS5zdGFydCxzaXplOmUuc2l6ZSxoZWFkZXJTaXplOmUuaGVhZGVyU2l6ZSx0eXBlOmUudHlwZX07cmV0dXJuIHQmJihhLnZlcnNpb249ZS5kYXRhW2UuaGVhZGVyU2l6ZV0sYS5mbGFncz1mdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MDtyZXR1cm4oZVt0XTw8MTYpKyhlW3QrMV08PDgpKyhlW3QrMl18fDApfShlLmRhdGEsZS5oZWFkZXJTaXplKzEpLGEuaGVhZGVyU2l6ZSs9NCkscihhLGUuZGF0YS5zdWJhcnJheShhLmhlYWRlclNpemUpLGEuc3RhcnQrYS5oZWFkZXJTaXplKSxhfX12YXIga2U9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgYT1TdHJpbmcociksbj10Pj4wLGk9TWF0aC5jZWlsKG4vYS5sZW5ndGgpLHM9W10sbz1TdHJpbmcoZSk7aS0tOylzLnB1c2goYSk7cmV0dXJuIHMuam9pbigiIikuc3Vic3RyaW5nKDAsbi1vLmxlbmd0aCkrb30sYmU9ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KHQpLGE9MDthPHQ7YSsrKXJbYV09YXJndW1lbnRzW2FdO3JldHVybiByLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UucHVzaChrZShOdW1iZXIodCkudG9TdHJpbmcoMTYpLDIsMCkpfSkpLGVbMF19O2Z1bmN0aW9uIF9lKGUpe2Zvcih2YXIgdD0wLHI9YXJndW1lbnRzLmxlbmd0aCxhPW5ldyBBcnJheShyPjE/ci0xOjApLG49MTtuPHI7bisrKWFbbi0xXT1hcmd1bWVudHNbbl07YS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Kz1lLmxlbmd0aH0pKTt2YXIgaT1uZXcgZSh0KSxzPTA7cmV0dXJuIGEuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aS5zZXQoZSxzKSxzKz1lLmxlbmd0aH0pKSxpfXZhciB3ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtyKHRoaXMsZSksdGhpcy5idWZmZXI9bmV3IFVpbnQ4QXJyYXkoMCl9cmV0dXJuIG4oZSxbe2tleToid3JpdGUiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KHQpLGE9MDthPHQ7YSsrKXJbYV09YXJndW1lbnRzW2FdO3IuZm9yRWFjaCgoZnVuY3Rpb24odCl7dD9lLmJ1ZmZlcj1fZShVaW50OEFycmF5LGUuYnVmZmVyLHQpOndpbmRvdy5jb25zb2xlLndhcm4odCl9KSl9fV0sW3trZXk6IndyaXRlVWludDE2Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoW2U+PjgmMjU1LDI1NSZlXSl9fSx7a2V5OiJ3cml0ZVVpbnQzMiIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBVaW50OEFycmF5KFtlPj4yNCxlPj4xNiYyNTUsZT4+OCYyNTUsMjU1JmVdKX19XSksZX0oKSx4ZT1NYXRoLnBvdygyLDMyKS0xLFNlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3IodGhpcyxlKX1yZXR1cm4gbihlLG51bGwsW3trZXk6ImJveCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgscj1uZXcgQXJyYXkodD4xP3QtMTowKSxhPTE7YTx0O2ErKylyW2EtMV09YXJndW1lbnRzW2FdO3ZhciBuPTgrKHI9ci5maWx0ZXIoQm9vbGVhbikpLnJlZHVjZSgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSt0LmJ5dGVMZW5ndGh9KSwwKSxpPW5ldyBVaW50OEFycmF5KG4pO2lbMF09bj4+MjQmMjU1LGlbMV09bj4+MTYmMjU1LGlbMl09bj4+OCYyNTUsaVszXT0yNTUmbixpLnNldChlLDQpO3ZhciBzPTg7cmV0dXJuIHIuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aS5zZXQoZSxzKSxzKz1lLmJ5dGVMZW5ndGh9KSksaX19LHtrZXk6ImZ0eXAiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0LmZpbmQoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGU9PT1iJiZlLmNvZGVjVHlwZT09PVN9KSk/ZS5GVFlQSEVWMTplLkZUWVBBVkMxfX0se2tleToiaW5pdFNlZ21lbnQiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBaKGUuZnR5cCh0KSxlLm1vb3YodCkpfX0se2tleToicHNzaCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9bmV3IFVpbnQ4QXJyYXkoWzEsMCwwLDBdLmNvbmNhdChbMTYsMTE5LDIzOSwyMzYsMTkyLDE3OCw3NywyLDE3MiwyMjcsNjAsMzAsODIsMjI2LDI1MSw3NV0sWzAsMCwwLDFdLGFlKHQua2lkKSxbMCwwLDAsMF0pKTtyZXR1cm4gZS5ib3goZS50eXBlcy5wc3NoLHIpfX0se2tleToibW9vdiIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodFswXS51c2VFTUUmJih0WzBdLmVuY3Z8fHRbMF0uZW5jYSkpe3RbMF0ucHNzaHx8KHRbMF0ucHNzaD17a2lkOnRbMF0ua2lkfSk7dmFyIHI9dGhpcy5wc3NoKHRbMF0ucHNzaCk7cmV0dXJuIGUuYm94LmFwcGx5KGUsW2UudHlwZXMubW9vdixlLm12aGQodFswXS5tdmhkRHVydGlvbnx8dFswXS5kdXJhdGlvbix0WzBdLm12aGRUaW1lY2FsZXx8dFswXS50aW1lc2NhbGUpLGUubXZleCh0KV0uY29uY2F0KHkodC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBlLnRyYWsodCl9KSkpLFtyXSkpfXJldHVybiBlLmJveC5hcHBseShlLFtlLnR5cGVzLm1vb3YsZS5tdmhkKHRbMF0ubXZoZER1cnRpb258fHRbMF0uZHVyYXRpb24sdFswXS5tdmhkVGltZWNhbGV8fHRbMF0udGltZXNjYWxlKV0uY29uY2F0KHkodC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBlLnRyYWsodCl9KSkpLFtlLm12ZXgodCldKSl9fSx7a2V5OiJtdmhkIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06OWU0LGE9ZS5ib3goZS50eXBlcy5tdmhkLG5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCxyPj4yNCYyNTUscj4+MTYmMjU1LHI+PjgmMjU1LDI1NSZyLHQ+PjI0JjI1NSx0Pj4xNiYyNTUsdD4+OCYyNTUsMjU1JnQsMCwxLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsNjQsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMjU1LDI1NSwyNTUsMjU1XSkpO3JldHVybiBhfX0se2tleToidHJhayIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMudHJhayxlLnRraGQodC5pZCx0LnRraGREdXJhdGlvbnx8MCx0LndpZHRoLHQuaGVpZ2h0KSxlLm1kaWEodCkpfX0se2tleToidGtoZCIsdmFsdWU6ZnVuY3Rpb24odCxyKXt2YXIgYT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MCxuPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdP2FyZ3VtZW50c1szXTowLGk9ZS5ib3goZS50eXBlcy50a2hkLG5ldyBVaW50OEFycmF5KFswLDAsMCw3LDAsMCwwLDAsMCwwLDAsMCx0Pj4yNCYyNTUsdD4+MTYmMjU1LHQ+PjgmMjU1LDI1NSZ0LDAsMCwwLDAscj4+MjQmMjU1LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmciwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCw2NCwwLDAsMCxhPj44JjI1NSwyNTUmYSwwLDAsbj4+OCYyNTUsMjU1Jm4sMCwwXSkpO3JldHVybiBpfX0se2tleToibWRpYSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMubWRpYSxlLm1kaGQodC5kdXJhdGlvbix0LnRpbWVzY2FsZSksZS5oZGxyKHQudHlwZSksZS5taW5mKHQpKX19LHtrZXk6Im1kaGQiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTo5ZTQsYT1lLmJveChlLnR5cGVzLm1kaGQsbmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLHI+PjI0JjI1NSxyPj4xNiYyNTUscj4+OCYyNTUsMjU1JnIsdD4+MjQmMjU1LHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdCw4NSwxOTYsMCwwXSkpO3JldHVybiBhfX0se2tleToiaGRsciIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMuaGRscixlLkhETFJfVFlQRVNbdF0pfX0se2tleToibWluZiIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMubWluZix0LnR5cGU9PT1iP2UuVk1IRDplLlNNSEQsZS5ESU5GLGUuc3RibCh0KSl9fSx7a2V5OiJzdGJsIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj1bXTtyZXR1cm4gdCYmdC5leHQmJnQuZXh0LnN0c3MmJnIucHVzaChlLnN0c3ModC5leHQuc3Rzcy5lbnRyaWVzKSksZS5ib3goZS50eXBlcy5zdGJsLGUuc3RzZCh0KSxlLlNUVFMsclswXSxlLlNUU0MsZS5TVFNaLGUuU1RDTyl9fSx7a2V5OiJzdHNkIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcjtyZXR1cm4gcj0iYXVkaW8iPT09dC50eXBlP3QudXNlRU1FJiZ0LmVuY2E/ZS5lbmNhKHQpOmUubXA0YSh0KTp0LnVzZUVNRSYmdC5lbmN2P2UuZW5jdih0KTplLmF2YzFoZXYxKHQpLGUuYm94KGUudHlwZXMuc3RzZCxuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwxXSkscil9fSx7a2V5OiJlbmNhIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj10LmVuY2EuY2hhbm5lbENvdW50LGE9dC5lbmNhLnNhbXBsZVJhdGUsbj1uZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLHIsMCwxNiwwLDAsMCwwLGE+PjgmMjU1LDI1NSZhLDAsMF0pLGk9ZS5lc2RzKHQuY29uZmlnKSxzPWUuc2luZih0LmVuY2EpO3JldHVybiBlLmJveChlLnR5cGVzLmVuY2EsbixpLHMpfX0se2tleToiZW5jdiIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHIsYSxuPXQuc3BzLmxlbmd0aD4wP3Quc3BzWzBdOltdLGk9dC5wcHMubGVuZ3RoPjA/dC5wcHNbMF06W10scz10LndpZHRoLG89dC5oZWlnaHQsdT10LnNhclJhdGlvWzBdLGM9dC5zYXJSYXRpb1sxXSxsPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCxzPj44JjI1NSwyNTUmcyxvPj44JjI1NSwyNTUmbywwLDcyLDAsMCwwLDcyLDAsMCwwLDAsMCwwLDAsMSwxOCwxMDAsOTcsMTA1LDEwOCwxMjEsMTA5LDExMSwxMTYsMTA1LDExMSwxMTAsNDcsMTA0LDEwOCwxMTUsNDYsMTA2LDExNSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMjQsMTcsMTddKSxkPW5ldyBVaW50OEFycmF5KChyPShhPVsxLG5bMV0sblsyXSxuWzNdLDI1NSwyMjUsbi5sZW5ndGg+Pj44JjI1NSwyNTUmbi5sZW5ndGhdKS5jb25jYXQuYXBwbHkoYSx5KG4pKS5jb25jYXQoWzEsaS5sZW5ndGg+Pj44JjI1NSwyNTUmaS5sZW5ndGhdKSkuY29uY2F0LmFwcGx5KHIseShpKSkpLGY9bmV3IFVpbnQ4QXJyYXkoWzAsMCw4OCw1NywwLDE1LDIwMCwxOTIsMCw0LDg2LDcyXSksaD1lLnNpbmYodC5lbmN2KSxwPW5ldyBVaW50OEFycmF5KFt1Pj4yNCx1Pj4xNiYyNTUsdT4+OCYyNTUsMjU1JnUsYz4+MjQsYz4+MTYmMjU1LGM+PjgmMjU1LDI1NSZjXSk7cmV0dXJuIGUuYm94KGUudHlwZXMuZW5jdixsLGUuYm94KGUudHlwZXMuYXZjQyxkKSxlLmJveChlLnR5cGVzLmJ0cnQsZiksaCxlLmJveChlLnR5cGVzLnBhc3AscCkpfX0se2tleToic2NoaSIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9bmV3IFVpbnQ4QXJyYXkoW10pLGE9ZS50ZW5jKHQpO3JldHVybiBlLmJveChlLnR5cGVzLnNjaGkscixhKX19LHtrZXk6InRlbmMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwyNTUmdC5kZWZhdWx0X0lzRW5jcnlwdGVkLDI1NSZ0LmRlZmF1bHRfSVZfc2l6ZV0uY29uY2F0KGFlKHQuZGVmYXVsdF9LSUQpKSk7cmV0dXJuIGUuYm94KGUudHlwZXMudGVuYyxyKX19LHtrZXk6InNpbmYiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPW5ldyBVaW50OEFycmF5KFtdKSxhPW5ldyBVaW50OEFycmF5KFt0LmRhdGFfZm9ybWF0LmNoYXJDb2RlQXQoMCksdC5kYXRhX2Zvcm1hdC5jaGFyQ29kZUF0KDEpLHQuZGF0YV9mb3JtYXQuY2hhckNvZGVBdCgyKSx0LmRhdGFfZm9ybWF0LmNoYXJDb2RlQXQoMyldKSxuPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDk5LDEwMSwxMTAsOTksMCwxLDAsMF0pLGk9ZS5zY2hpKHQpO3JldHVybiBlLmJveChlLnR5cGVzLnNpbmYscixlLmJveChlLnR5cGVzLmZybWEsYSksZS5ib3goZS50eXBlcy5zY2htLG4pLGkpfX0se2tleToiYXZjMWhldjEiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQuY29kZWNUeXBlPT09UyxhPXI/ZS50eXBlcy5odmMxOmUudHlwZXMuYXZjMSxuPXI/ZS5odmNDKHQpOmUuYXZjQyh0KSxpPVtuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsdC53aWR0aD4+OCYyNTUsMjU1JnQud2lkdGgsdC5oZWlnaHQ+PjgmMjU1LDI1NSZ0LmhlaWdodCwwLDcyLDAsMCwwLDcyLDAsMCwwLDAsMCwwLDAsMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwyNCwxNywxN10pLG5dO3JldHVybiByP2kucHVzaChlLmJveChlLnR5cGVzLmZpZWwsbmV3IFVpbnQ4QXJyYXkoWzEsMF0pKSk6dC5zYXJSYXRpbyYmdC5zYXJSYXRpby5sZW5ndGg+MSYmaS5wdXNoKGUucGFzcCh0LnNhclJhdGlvKSksZS5ib3guYXBwbHkoZSxbYV0uY29uY2F0KGkpKX19LHtrZXk6ImF2Y0MiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByLGEsbixpPVtdLHM9W107cmV0dXJuIHQuc3BzLmZvckVhY2goKGZ1bmN0aW9uKGUpe249ZS5ieXRlTGVuZ3RoLGkucHVzaChuPj4+OCYyNTUpLGkucHVzaCgyNTUmbiksaS5wdXNoLmFwcGx5KGkseShlKSl9KSksdC5wcHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bj1lLmJ5dGVMZW5ndGgscy5wdXNoKG4+Pj44JjI1NSkscy5wdXNoKDI1NSZuKSxzLnB1c2guYXBwbHkocyx5KGUpKX0pKSxlLmJveChlLnR5cGVzLmF2Y0MsbmV3IFVpbnQ4QXJyYXkoKHI9KGE9WzEsaVszXSxpWzRdLGlbNV0sMjU1LDIyNHx0LnNwcy5sZW5ndGhdKS5jb25jYXQuYXBwbHkoYSxpKS5jb25jYXQoW3QucHBzLmxlbmd0aF0pKS5jb25jYXQuYXBwbHkocixzKSkpfX0se2tleToiaHZjQyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9dC5odmNDO2lmKHIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8ciBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpcmV0dXJuIHI7dmFyIGEsbj10LnZwcyxpPXQuc3BzLHM9dC5wcHM7aWYocil7dmFyIG89ci5nZW5lcmFsUHJvZmlsZUNvbXBhdGliaWxpdHlGbGFncyx1PXIuZ2VuZXJhbENvbnN0cmFpbnRJbmRpY2F0b3JGbGFncyxjPShuLmxlbmd0aCYmMSkrKGkubGVuZ3RoJiYxKSsocy5sZW5ndGgmJjEpO2E9WzEsci5nZW5lcmFsUHJvZmlsZVNwYWNlPDw2fHIuZ2VuZXJhbFRpZXJGbGFnPDw1fHIuZ2VuZXJhbFByb2ZpbGVJZGMsbz4+PjI0LG8+Pj4xNixvPj4+OCxvLHVbMF0sdVsxXSx1WzJdLHVbM10sdVs0XSx1WzVdLHIuZ2VuZXJhbExldmVsSWRjLDI0MCwwLDI1MiwyNTJ8ci5jaHJvbWFGb3JtYXRJZGMsMjQ4fHIuYml0RGVwdGhMdW1hTWludXM4LDI0OHxyLmJpdERlcHRoQ2hyb21hTWludXM4LDAsMCxyLm51bVRlbXBvcmFsTGF5ZXJzPDwzfHIudGVtcG9yYWxJZE5lc3RlZDw8MnwzLGNdO3ZhciBsPWZ1bmN0aW9uKGUpe3ZhciB0O2EucHVzaChlLmxlbmd0aD4+OCxlLmxlbmd0aCksKHQ9YSkucHVzaC5hcHBseSh0LHkoZSkpfTtuLmxlbmd0aCYmKGEucHVzaCgxNjAsMCxuLmxlbmd0aCksbi5mb3JFYWNoKGwpKSxpLmxlbmd0aCYmKGEucHVzaCgxNjEsMCxpLmxlbmd0aCksaS5mb3JFYWNoKGwpKSxzLmxlbmd0aCYmKGEucHVzaCgxNjIsMCxzLmxlbmd0aCkscy5mb3JFYWNoKGwpKX1lbHNlIGE9WzEsMSw5NiwwLDAsMCwxNDQsMCwwLDAsMCwwLDkzLDI0MCwwLDI1MiwyNTMsMjQ4LDI0OCwwLDAsMTUsMywxNjAsMCwxLDAsMjQsNjQsMSwxMiwxLDI1NSwyNTUsMSw5NiwwLDAsMywwLDE0NCwwLDAsMywwLDAsMywwLDkzLDE1MywxNTIsOSwxNjEsMCwxLDAsNDUsNjYsMSwxLDEsOTYsMCwwLDMsMCwxNDQsMCwwLDMsMCwwLDMsMCw5MywxNjAsMiwxMjgsMTI4LDQ1LDIyLDg5LDE1MywxNjQsMTQ3LDQzLDE1NCwxMjgsMTI4LDEyOCwxMzAsMCwwLDMsMCwyLDAsMCwzLDAsNTAsMTYsMTYyLDAsMSwwLDcsNjgsMSwxOTMsMTE0LDE4MCw5OCw2NF07cmV0dXJuIGUuYm94KGUudHlwZXMuaHZjQyxuZXcgVWludDhBcnJheShhKSl9fSx7a2V5OiJwYXNwIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj12KHQsMiksYT1yWzBdLG49clsxXTtyZXR1cm4gZS5ib3goZS50eXBlcy5wYXNwLG5ldyBVaW50OEFycmF5KFthPj4yNCxhPj4xNiYyNTUsYT4+OCYyNTUsMjU1JmEsbj4+MjQsbj4+MTYmMjU1LG4+PjgmMjU1LDI1NSZuXSkpfX0se2tleToibXA0YSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMubXA0YSxuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLHQuY2hhbm5lbENvdW50LDAsMTYsMCwwLDAsMCx0LnNhbXBsZVJhdGU+PjgmMjU1LDI1NSZ0LnNhbXBsZVJhdGUsMCwwXSksdC5jb25maWcubGVuZ3RoP2UuZXNkcyh0LmNvbmZpZyk6dm9pZCAwKX19LHtrZXk6ImVzZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQubGVuZ3RoO3JldHVybiBlLmJveChlLnR5cGVzLmVzZHMsbmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMywyMytyLDAsMCwwLDQsMTUrciw2NCwyMSwwLDYsMCwwLDAsMjE4LDE5MiwwLDAsMjE4LDE5Miw1XS5jb25jYXQoW3JdKS5jb25jYXQodCkuY29uY2F0KFs2LDEsMl0pKSl9fSx7a2V5OiJtdmV4Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3guYXBwbHkoZSxbZS50eXBlcy5tdmV4XS5jb25jYXQoeSh0Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIGUudHJleCh0LmlkKX0pKSkpKX19LHtrZXk6InRyZXgiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBlLmJveChlLnR5cGVzLnRyZXgsbmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsdD4+MjQsdD4+MTYmMjU1LHQ+PjgmMjU1LDI1NSZ0LDAsMCwwLDEsMCwwLDAsMCwwLDAsMCwwLDAsMSwwLDFdKSl9fSx7a2V5OiJ0cmV4MSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMudHJleCxuZXcgVWludDhBcnJheShbMCwwLDAsMCx0Pj4yNCx0Pj4xNiYyNTUsdD4+OCYyNTUsMjU1JnQsMCwwLDAsMSwwLDAsMiwwLDAsMCwwLDAsMCwxLDAsMF0pKX19LHtrZXk6InRyZXgyIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlcy50cmV4LG5ldyBVaW50OEFycmF5KFswLDAsMCwwLHQ+PjI0LHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdCwwLDAsMCwxLDAsMCw0LDAsMCwwLDAsMCwyLDAsMCwwXSkpfX0se2tleToibW9vZiIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94LmFwcGx5KGUsW2UudHlwZXMubW9vZixlLm1maGQodFswXS5zYW1wbGVzP3RbMF0uc2FtcGxlc1swXS5nb3BJZDowKV0uY29uY2F0KHkodC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBlLnRyYWYodCl9KSkpKSl9fSx7a2V5OiJtZmhkIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlcy5tZmhkLG5ldyBVaW50OEFycmF5KFswLDAsMCwwLHQ+PjI0LHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdF0pKX19LHtrZXk6InRyYWYiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPWUudGZoZCh0LmlkKSxhPWUudGZkdCh0LHQuYmFzZU1lZGlhRGVjb2RlVGltZSksbj0wO2lmKHQuaXNWaWRlbyYmdC52aWRlb1NlbmMmJnQudmlkZW9TZW5jLmZvckVhY2goKGZ1bmN0aW9uKGUpe24rPTgsZS5zdWJzYW1wbGVzJiZlLnN1YnNhbXBsZXMubGVuZ3RoJiYobis9MixuKz02KmUuc3Vic2FtcGxlcy5sZW5ndGgpfSkpLHQudmlkZW9TZW5jTGVuZ3RoPW4sdC51c2VFTUUmJih0LmlzVmlkZW9FbmNyeXB0aW9ufHx0LmlzQXVkaW9FbmNyeXB0aW9uKSl7aWYodC5pc1ZpZGVvRW5jcnlwdGlvbil7aWYodC5pc1ZpZGVvKXt2YXIgaT1lLnNhaXoodCkscz1lLnNhaW8odCksbz1lLnRydW4xKHQpLHU9ZS5zZW5jKHQpO3JldHVybiBlLmJveChlLnR5cGVzLnRyYWYscixhLGkscyxvLHUpfWlmKHQuaXNBdWRpb0VuY3J5cHRpb24pe3ZhciBjPWUuc2JncCgpLGw9ZS5zYWl6KHQpLGQ9ZS5zYWlvKHQpLGY9ZS5zZW5jKHQpLGg9ZS50cnVuMSh0KTtyZXR1cm4gZS5ib3goZS50eXBlcy50cmFmLHIsYSxjLGwsZCxmLGgpfXZhciBwPWUuc2JncCgpLHY9ZS50cnVuMSh0KTtyZXR1cm4gZS5ib3goZS50eXBlcy50cmFmLHIsYSxwLHYpfWlmKHQuaXNWaWRlbyl7dmFyIHk9ZS50cnVuMSh0KTtyZXR1cm4gZS5ib3goZS50eXBlcy50cmFmLHIsYSx5KX12YXIgbT1lLnNiZ3AoKSxnPWUuc2Fpeih0KSxrPWUuc2Fpbyh0KSxiPWUuc2VuYyh0KSxfPWUudHJ1bjEodCk7cmV0dXJuIGUuYm94KGUudHlwZXMudHJhZixyLGEsbSxnLGssYixfKX12YXIgdz1lLnNkdHAodCk7cmV0dXJuIGUuYm94KGUudHlwZXMudHJhZixyLGEsdyxlLnRydW4odC5zYW1wbGVzLHcuYnl0ZUxlbmd0aCs3NikpfX0se2tleToic2R0cCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9bmV3IHdlO3JldHVybiB0LnNhbXBsZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ci53cml0ZShuZXcgVWludDhBcnJheSh0LmlzVmlkZW8/W2Uua2V5ZnJhbWU/MzI6MTZdOlsxNl0pKX0pKSxlLmJveChlLnR5cGVzLnNkdHAsdGhpcy5leHRlbnNpb24oMCwwKSxyLmJ1ZmZlcil9fSx7a2V5OiJ0cnVuMSIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9bmV3IHdlLGE9d2Uud3JpdGVVaW50MzIodC5zYW1wbGVzLmxlbmd0aCksbj1udWxsO2lmKHQuaXNWaWRlbyl7dmFyIGk9dC52aWRlb1NlbmNMZW5ndGg7bj13ZS53cml0ZVVpbnQzMigxNip0LnNhbXBsZXMubGVuZ3RoK2krMTQ5KSwhdC5pc1ZpZGVvRW5jcnlwdGlvbiYmdC5pc0F1ZGlvRW5jcnlwdGlvbiYmKG49d2Uud3JpdGVVaW50MzIoMTYqdC5zYW1wbGVzLmxlbmd0aCs5MikpfWVsc2V7dmFyIHM9MTIqdC5zYW1wbGVzLmxlbmd0aCsxMjQ7dC5pc0F1ZGlvRW5jcnlwdGlvbiYmKHM9MTIqdC5zYW1wbGVzLmxlbmd0aCs4KnQuYXVkaW9TZW5jLmxlbmd0aCsxNzcpLG49d2Uud3JpdGVVaW50MzIocyl9cmV0dXJuIHQuc2FtcGxlcy5mb3JFYWNoKChmdW5jdGlvbihlKXtyLndyaXRlKHdlLndyaXRlVWludDMyKGUuZHVyYXRpb24pKSxyLndyaXRlKHdlLndyaXRlVWludDMyKGUuc2l6ZSkpLHIud3JpdGUod2Uud3JpdGVVaW50MzIoZS5rZXlmcmFtZT8zMzU1NDQzMjo2NTUzNikpLHQuaXNWaWRlbyYmci53cml0ZSh3ZS53cml0ZVVpbnQzMihlLmN0cz9lLmN0czowKSl9KSksZS5ib3goZS50eXBlcy50cnVuLHRoaXMuZXh0ZW5zaW9uKDAsdC5mbGFncyksYSxuLHIuYnVmZmVyKX19LHtrZXk6InNlbmMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPW5ldyB3ZSxhPXQuc2FtcGxlcy5sZW5ndGgsbj10LmlzVmlkZW8/MTY6OCxpPXQuaXNWaWRlbz8yOjAscz1bXSxvPTA7cmV0dXJuIHQuaXNWaWRlbz8ocz10LnZpZGVvU2VuYyxvPXQudmlkZW9TZW5jTGVuZ3RoKTpzPXQuYXVkaW9TZW5jLG89b3x8biphLHIud3JpdGUod2Uud3JpdGVVaW50MzIoMTYrbyksZS50eXBlcy5zZW5jLHRoaXMuZXh0ZW5zaW9uKDAsaSkpLHIud3JpdGUod2Uud3JpdGVVaW50MzIoYSkpLHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxlLkluaXRpYWxpemF0aW9uVmVjdG9yLmxlbmd0aDt0Kyspci53cml0ZShuZXcgVWludDhBcnJheShbZS5Jbml0aWFsaXphdGlvblZlY3Rvclt0XV0pKTtlLnN1YnNhbXBsZXMmJmUuc3Vic2FtcGxlcy5sZW5ndGgmJihyLndyaXRlKHdlLndyaXRlVWludDE2KGUuc3Vic2FtcGxlcy5sZW5ndGgpKSxlLnN1YnNhbXBsZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ci53cml0ZSh3ZS53cml0ZVVpbnQxNihlLkJ5dGVzT2ZDbGVhckRhdGEpKSxyLndyaXRlKHdlLndyaXRlVWludDMyKGUuQnl0ZXNPZlByb3RlY3RlZERhdGEpKX0pKSl9KSksci5idWZmZXJ9fSx7a2V5OiJzYWlvIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj0xMip0LnNhbXBsZXMubGVuZ3RoKzE0MTshdC5pc1ZpZGVvJiZ0LmlzQXVkaW9FbmNyeXB0aW9uJiYocj0xNDkpO3ZhciBhPW5ldyBVaW50OEFycmF5KFsxLDAsMCwwLDAsMCwwLDEsMCwwLDAsMCxyPj4yNCYyNTUscj4+MTYmMjU1LHI+PjgmMjU1LDI1NSZyXSk7cmV0dXJuIGUuYm94KGUudHlwZXMuc2FpbyxhKX19LHtrZXk6InNhaXoiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQuc2FtcGxlcy5sZW5ndGgsYT1uZXcgVWludDhBcnJheShbMCwwLDAsMCwxNixyPj4yNCYyNTUscj4+MTYmMjU1LHI+PjgmMjU1LDI1NSZyXSk7cmV0dXJuIGUuYm94KGUudHlwZXMuc2FpeixhKX19LHtrZXk6InNiZ3AiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IFVpbnQ4QXJyYXkoWzExNCwxMTEsMTA4LDEwOCwwLDAsMCwxLDAsMCwxLDI1LDAsMCwwLDFdKTtyZXR1cm4gZS5ib3goZS50eXBlcy5zYmdwLHRoaXMuZXh0ZW5zaW9uKDAsMCksdCl9fSx7a2V5OiJleHRlbnNpb24iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBVaW50OEFycmF5KFtlLHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdF0pfX0se2tleToidGZoZCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMudGZoZCxuZXcgVWludDhBcnJheShbMCwwLDAsMCx0Pj4yNCx0Pj4xNiYyNTUsdD4+OCYyNTUsMjU1JnRdKSl9fSx7a2V5OiJ0ZmR0Iix2YWx1ZTpmdW5jdGlvbih0LHIpe3ZhciBhPU1hdGguZmxvb3Ioci8oeGUrMSkpLG49TWF0aC5mbG9vcihyJSh4ZSsxKSk7cmV0dXJuIHQudXNlRU1FJiYodC5pc1ZpZGVvRW5jcnlwdGlvbnx8dC5pc0F1ZGlvRW5jcnlwdGlvbik/ZS5ib3goZS50eXBlcy50ZmR0LG5ldyBVaW50OEFycmF5KFswLDAsMCwwLG4+PjI0LG4+PjE2JjI1NSxuPj44JjI1NSwyNTUmbl0pKTplLmJveChlLnR5cGVzLnRmZHQsbmV3IFVpbnQ4QXJyYXkoWzEsMCwwLDAsYT4+MjQsYT4+MTYmMjU1LGE+PjgmMjU1LDI1NSZhLG4+PjI0LG4+PjE2JjI1NSxuPj44JjI1NSwyNTUmbl0pKX19LHtrZXk6InRydW4iLHZhbHVlOmZ1bmN0aW9uKHQscil7dmFyIGE9dC5sZW5ndGgsbj0xMisxNiphO3IrPTgrbjt2YXIgaT1uZXcgVWludDhBcnJheShuKTtpLnNldChbMCwwLDE1LDEsYT4+PjI0JjI1NSxhPj4+MTYmMjU1LGE+Pj44JjI1NSwyNTUmYSxyPj4+MjQmMjU1LHI+Pj4xNiYyNTUscj4+PjgmMjU1LDI1NSZyXSwwKTtmb3IodmFyIHM9MDtzPGE7cysrKXt2YXIgbz10W3NdLHU9by5kdXJhdGlvbixjPW8uc2l6ZSxsPW8uZmxhZyxkPXZvaWQgMD09PWw/e306bCxmPW8uY3RzLGg9dm9pZCAwPT09Zj8wOmY7aS5zZXQoW3U+Pj4yNCYyNTUsdT4+PjE2JjI1NSx1Pj4+OCYyNTUsMjU1JnUsYz4+PjI0JjI1NSxjPj4+MTYmMjU1LGM+Pj44JjI1NSwyNTUmYyxkLmlzTGVhZGluZzw8MnwobnVsbD09PWQuZGVwZW5kc09ufHx2b2lkIDA9PT1kLmRlcGVuZHNPbj8xOmQuZGVwZW5kc09uKSxkLmlzRGVwZW5kZWRPbjw8NnxkLmhhc1JlZHVuZGFuY3k8PDR8ZC5wYWRkaW5nVmFsdWU8PDF8KG51bGw9PT1kLmlzTm9uU3luY1NhbXBsZXx8dm9pZCAwPT09ZC5pc05vblN5bmNTYW1wbGU/MTpkLmlzTm9uU3luY1NhbXBsZSksNjE0NDAmZC5kZWdyYWRhdGlvblByaW9yaXR5LDE1JmQuZGVncmFkYXRpb25Qcmlvcml0eSxoPj4+MjQmMjU1LGg+Pj4xNiYyNTUsaD4+PjgmMjU1LDI1NSZoXSwxMisxNipzKX1yZXR1cm4gZS5ib3goZS50eXBlcy50cnVuLGkpfX0se2tleToibW9vdk1QNCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94LmFwcGx5KGUsW2UudHlwZXMubW9vdixlLm12aGQodFswXS5kdXJhdGlvbix0WzBdLnRpbWVzY2FsZSldLmNvbmNhdCh5KHQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gZS50cmFja01QNCh0KX0pKSkpKX19LHtrZXk6InRyYWNrTVA0Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlcy50cmFrLGUudGtoZCh0LmlkLHQuZHVyYXRpb24sdC53aWR0aCx0LmhlaWdodCksZS5tZGlhTVA0KHQpKX19LHtrZXk6Im1kaWFNUDQiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBlLmJveChlLnR5cGVzLm1kaWEsZS5tZGhkKHQuZHVyYXRpb24sdC50aW1lc2NhbGUpLGUuaGRscih0LnR5cGUpLGUubWluZk1QNCh0KSl9fSx7a2V5OiJtaW5mTVA0Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlcy5taW5mLHQudHlwZT09PWI/ZS5WTUhEOmUuU01IRCxlLkRJTkYsZS5zdGJsTVA0KHQpKX19LHtrZXk6InN0YmxNUDQiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQuZXh0LGE9W2Uuc3RzZCh0KSxlLnN0dHMoci5zdHRzKSxlLnN0c2Moci5zdHNjKSxlLnN0c3ooci5zdHN6KSxlLnN0Y28oci5zdGNvKV07cmV0dXJuIHIuc3Rzcy5sZW5ndGgmJmEucHVzaChlLnN0c3Moci5zdHNzKSksci5jdHRzLmxlbmd0aCYmYS5wdXNoKGUuY3R0cyhyLmN0dHMpKSxlLmJveC5hcHBseShlLFtlLnR5cGVzLnN0YmxdLmNvbmNhdChhKSl9fSx7a2V5OiJzdHRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj10Lmxlbmd0aCxhPW5ldyBVaW50OEFycmF5KDgqciksbj0wO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUudmFsdWUscj1lLmNvdW50O2Euc2V0KFtyPj4yNCxyPj4xNiYyNTUscj4+OCYyNTUsMjU1JnIsdD4+MjQsdD4+MTYmMjU1LHQ+PjgmMjU1LDI1NSZ0XSxuKSxuKz04fSkpLGUuYm94KGUudHlwZXMuc3R0cyxaKG5ldyBVaW50OEFycmF5KFswLDAsMCwwLHI+PjI0LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmcl0pLGEpKX19LHtrZXk6InN0c2MiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQubGVuZ3RoLGE9bmV3IFVpbnQ4QXJyYXkoMTIqciksbj0wO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUuZmlyc3RDaHVuayxyPWUuc2FtcGxlc1BlckNodW5rLGk9ZS5zYW1wbGVEZXNjSW5kZXg7YS5zZXQoW3Q+PjI0LHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdCxyPj4yNCxyPj4xNiYyNTUscj4+OCYyNTUsMjU1JnIsaT4+MjQsaT4+MTYmMjU1LGk+PjgmMjU1LDI1NSZpXSxuKSxuKz0xMn0pKSxlLmJveChlLnR5cGVzLnN0c2MsWihuZXcgVWludDhBcnJheShbMCwwLDAsMCxyPj4yNCxyPj4xNiYyNTUscj4+OCYyNTUsMjU1JnJdKSxhKSl9fSx7a2V5OiJzdHN6Iix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj10Lmxlbmd0aCxhPW5ldyBVaW50OEFycmF5KDQqciksbj0wO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2Euc2V0KFtlPj4yNCxlPj4xNiYyNTUsZT4+OCYyNTUsMjU1JmVdLG4pLG4rPTR9KSksZS5ib3goZS50eXBlcy5zdHN6LFoobmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMCxyPj4yNCxyPj4xNiYyNTUscj4+OCYyNTUsMjU1JnJdKSxhKSl9fSx7a2V5OiJzdGNvIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj10Lmxlbmd0aCxhPW5ldyBVaW50OEFycmF5KDQqciksbj0wO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2Euc2V0KFtlPj4yNCxlPj4xNiYyNTUsZT4+OCYyNTUsMjU1JmVdLG4pLG4rPTR9KSksZS5ib3goZS50eXBlcy5zdGNvLFoobmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAscj4+MjQscj4+MTYmMjU1LHI+PjgmMjU1LDI1NSZyXSksYSkpfX0se2tleToic3RzcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9dC5sZW5ndGgsYT1uZXcgVWludDhBcnJheSg0KnIpLG49MDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbihlKXthLnNldChbZT4+MjQsZT4+MTYmMjU1LGU+PjgmMjU1LDI1NSZlXSxuKSxuKz00fSkpLGUuYm94KGUudHlwZXMuc3RzcyxaKG5ldyBVaW50OEFycmF5KFswLDAsMCwwLHI+PjI0LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmcl0pLGEpKX19LHtrZXk6ImN0dHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQubGVuZ3RoLGE9bmV3IFVpbnQ4QXJyYXkoOCpyKSxuPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS52YWx1ZSxyPWUuY291bnQ7YS5zZXQoW3I+PjI0LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmcix0Pj4yNCx0Pj4xNiYyNTUsdD4+OCYyNTUsMjU1JnRdLG4pLG4rPTh9KSksZS5ib3goZS50eXBlcy5jdHRzLFoobmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAscj4+MjQscj4+MTYmMjU1LHI+PjgmMjU1LDI1NSZyXSksYSkpfX0se2tleToic3R5cCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gZS5ib3goZS50eXBlcy5zdHlwLG5ldyBVaW50OEFycmF5KFsxMDksMTE1LDEwMCwxMDQsMCwwLDAsMCwxMDksMTE1LDEwMCwxMDQsMTA5LDExNSwxMDUsMTIwXSkpfX0se2tleToic2lkeCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9dC50aW1lc2NhbGUsYT10LnNhbXBsZXNbMF0uZHVyYXRpb24sbj1hKnQuc2FtcGxlcy5sZW5ndGgsaT10LnNhbXBsZXNbMF0uc2FtcGxlT2Zmc2V0KmEscz04O3Quc2FtcGxlcy5mb3JFYWNoKChmdW5jdGlvbihlKXtzKz1lLnNpemV9KSk7dmFyIG89MDtpZih0LmlzVmlkZW8pe3ZhciB1LGM9MDt0LnZpZGVvU2VuYyYmKHU9dC52aWRlb1NlbmMpLHQuaXNWaWRlbyYmdS5mb3JFYWNoKChmdW5jdGlvbihlKXtjKz04LGUuc3Vic2FtcGxlcyYmZS5zdWJzYW1wbGVzLmxlbmd0aCYmKGMrPTIsYys9NiplLnN1YnNhbXBsZXMubGVuZ3RoKX0pKSx0LnZpZGVvU2VuY0xlbmd0aD1jLG89cysxNDErMTYqdC5zYW1wbGVzLmxlbmd0aCtjLHQudXNlRU1FJiZ0LmlzQXVkaW9FbmNyeXB0aW9uJiYhdC5pc1ZpZGVvRW5jcnlwdGlvbiYmKG89cysxNip0LnNhbXBsZXMubGVuZ3RoKzg0KX1lbHNlIG89cysxMTYrMTIqdC5zYW1wbGVzLmxlbmd0aCx0LnVzZUVNRSYmdC5pc0F1ZGlvRW5jcnlwdGlvbiYmKG89cysxNjkrMTIqdC5zYW1wbGVzLmxlbmd0aCs4KnQuYXVkaW9TZW5jLmxlbmd0aCk7dmFyIGw9bmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMjU1JnQuaWQscj4+MjQmMjU1LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmcixpPj4yNCYyNTUsaT4+MTYmMjU1LGk+PjgmMjU1LDI1NSZpLDAsMCwwLDAsMCwwLDAsMSwwLG8+PjE2JjI1NSxvPj44JjI1NSwyNTUmbyxuPj4yNCYyNTUsbj4+MTYmMjU1LG4+PjgmMjU1LDI1NSZuLDE0NCwwLDAsMF0pO3JldHVybiBlLmJveChlLnR5cGVzLnNpZHgsbCl9fSx7a2V5OiJtZGF0Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlcy5tZGF0LHQpfX1dKSxlfSgpO2koU2UsInR5cGVzIixbImF2YzEiLCJhdmNDIiwiaHZjMSIsImh2Y0MiLCJkaW5mIiwiZHJlZiIsImVzZHMiLCJmdHlwIiwiaGRsciIsIm1kYXQiLCJtZGhkIiwibWRpYSIsIm1maGQiLCJtaW5mIiwibW9vZiIsIm1vb3YiLCJtcDRhIiwibXZleCIsIm12aGQiLCJwYXNwIiwic3RibCIsInN0Y28iLCJzdHNjIiwic3RzZCIsInN0c3oiLCJzdHRzIiwidGZkdCIsInRmaGQiLCJ0cmFmIiwidHJhayIsInRyZXgiLCJ0a2hkIiwidm1oZCIsInNtaGQiLCJjdHRzIiwic3RzcyIsInN0eXAiLCJwc3NoIiwic2lkeCIsInNiZ3AiLCJzYWl6Iiwic2FpbyIsInNlbmMiLCJ0cnVuIiwiZW5jdiIsImVuY2EiLCJzaW5mIiwiYnRydCIsImZybWEiLCJ0ZW5jIiwic2NobSIsInNjaGkiLCJtZWhkIiwiZmllbCIsInNkdHAiXS5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGVbdF09W3QuY2hhckNvZGVBdCgwKSx0LmNoYXJDb2RlQXQoMSksdC5jaGFyQ29kZUF0KDIpLHQuY2hhckNvZGVBdCgzKV0sZX0pLE9iamVjdC5jcmVhdGUobnVsbCkpKSxpKFNlLCJIRExSX1RZUEVTIix7dmlkZW86bmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMCwxMTgsMTA1LDEwMCwxMDEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsODYsMTA1LDEwMCwxMDEsMTExLDcyLDk3LDExMCwxMDAsMTA4LDEwMSwxMTQsMF0pLGF1ZGlvOm5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMTE1LDExMSwxMTcsMTEwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDgzLDExMSwxMTcsMTEwLDEwMCw3Miw5NywxMTAsMTAwLDEwOCwxMDEsMTE0LDBdKX0pLGkoU2UsIkZUWVBBVkMxIixTZS5ib3goU2UudHlwZXMuZnR5cCxuZXcgVWludDhBcnJheShbMTA1LDExNSwxMTEsMTA5LDAsMCwwLDEsMTA1LDExNSwxMTEsMTA5LDk3LDExOCw5OSw0OV0pKSksaShTZSwiRlRZUEhFVjEiLFNlLmJveChTZS50eXBlcy5mdHlwLG5ldyBVaW50OEFycmF5KFsxMDUsMTE1LDExMSwxMDksMCwwLDAsMSwxMDUsMTE1LDExMSwxMDksMTA0LDEwMSwxMTgsNDldKSkpLGkoU2UsIkRJTkYiLFNlLmJveChTZS50eXBlcy5kaW5mLFNlLmJveChTZS50eXBlcy5kcmVmLG5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDEsMCwwLDAsMTIsMTE3LDExNCwxMDgsMzIsMCwwLDAsMV0pKSkpLGkoU2UsIlZNSEQiLFNlLmJveChTZS50eXBlcy52bWhkLG5ldyBVaW50OEFycmF5KFswLDAsMCwxLDAsMCwwLDAsMCwwLDAsMF0pKSksaShTZSwiU01IRCIsU2UuYm94KFNlLnR5cGVzLnNtaGQsbmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMF0pKSksaShTZSwiU3RibFRhYmxlIixuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwwXSkpLGkoU2UsIlNUVFMiLFNlLmJveChTZS50eXBlcy5zdHRzLFNlLlN0YmxUYWJsZSkpLGkoU2UsIlNUU0MiLFNlLmJveChTZS50eXBlcy5zdHNjLFNlLlN0YmxUYWJsZSkpLGkoU2UsIlNUU1oiLFNlLmJveChTZS50eXBlcy5zdHN6LG5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMCwwLDAsMF0pKSksaShTZSwiU1RDTyIsU2UuYm94KFNlLnR5cGVzLnN0Y28sU2UuU3RibFRhYmxlKSk7dmFyIEFlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LGEpe3IodGhpcyxlKSx0aGlzLm5hbWU9dHx8IiIsdGhpcy5fcHJlZml4PSJbIi5jb25jYXQodGhpcy5uYW1lLCJdIiksZS5kaXNhYmxlZD1hfXJldHVybiBuKGUsW3trZXk6ImRlYnVnIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0O2lmKCFlLmRpc2FibGVkKXtmb3IodmFyIHI9YXJndW1lbnRzLmxlbmd0aCxhPW5ldyBBcnJheShyKSxuPTA7bjxyO24rKylhW25dPWFyZ3VtZW50c1tuXTsodD1jb25zb2xlKS5kZWJ1Zy5hcHBseSh0LFt0aGlzLl9wcmVmaXhdLmNvbmNhdChhKSl9fX0se2tleToibG9nIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0O2lmKCFlLmRpc2FibGVkKXtmb3IodmFyIHI9YXJndW1lbnRzLmxlbmd0aCxhPW5ldyBBcnJheShyKSxuPTA7bjxyO24rKylhW25dPWFyZ3VtZW50c1tuXTsodD1jb25zb2xlKS5sb2cuYXBwbHkodCxbdGhpcy5fcHJlZml4XS5jb25jYXQoYSkpfX19LHtrZXk6Indhcm4iLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ7aWYoIWUuZGlzYWJsZWQpe2Zvcih2YXIgcj1hcmd1bWVudHMubGVuZ3RoLGE9bmV3IEFycmF5KHIpLG49MDtuPHI7bisrKWFbbl09YXJndW1lbnRzW25dOyh0PWNvbnNvbGUpLndhcm4uYXBwbHkodCxbdGhpcy5fcHJlZml4XS5jb25jYXQoYSkpfX19LHtrZXk6ImVycm9yIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0O2lmKCFlLmRpc2FibGVkKXtmb3IodmFyIHI9YXJndW1lbnRzLmxlbmd0aCxhPW5ldyBBcnJheShyKSxuPTA7bjxyO24rKylhW25dPWFyZ3VtZW50c1tuXTsodD1jb25zb2xlKS5lcnJvci5hcHBseSh0LFt0aGlzLl9wcmVmaXhdLmNvbmNhdChhKSl9fX0se2tleToidGFibGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ7ZS5kaXNhYmxlZHx8KGNvbnNvbGUuZ3JvdXAodGhpcy5fcHJlZml4KSwodD1jb25zb2xlKS50YWJsZS5hcHBseSh0LGFyZ3VtZW50cyksY29uc29sZS5ncm91cEVuZCgpKX19XSxbe2tleToiZW5hYmxlIix2YWx1ZTpmdW5jdGlvbigpe2UuZGlzYWJsZWQ9ITF9fSx7a2V5OiJkaXNhYmxlIix2YWx1ZTpmdW5jdGlvbigpe2UuZGlzYWJsZWQ9ITB9fV0pLGV9KCk7aShBZSwiZGlzYWJsZWQiLCEwKTtmb3IodmFyIERlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LGEsbil7cih0aGlzLGUpLHRoaXMudmlkZW9UcmFjaz10LHRoaXMuYXVkaW9UcmFjaz1hO3ZhciBpPS9DaHJvbWVcLyhbXi5dKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCk7dGhpcy5mb3JjZUZpcnN0SURSPWkmJk51bWJlcihpWzFdKTw1MCx0aGlzLmxvZz1uZXcgQWUoIkZNUDRSZW11eGVyIiwhbnx8IW4ub3BlbkxvZ3x8IW4ub3BlbkxvZyl9cmV0dXJuIG4oZSxbe2tleToicmVtdXgiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGUsdCxyLGEsbixpPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF0scz1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbz10aGlzLnZpZGVvVHJhY2ssdT10aGlzLmF1ZGlvVHJhY2ssYz1vLmV4aXN0KCksbD11LmV4aXN0KCksZD1bXTtyZXR1cm4gaSYmKHMmJnMuaW5pdE1lcmdlPyhjJiZkLnB1c2godGhpcy52aWRlb1RyYWNrKSxsJiZkLnB1c2godGhpcy5hdWRpb1RyYWNrKSxyPVNlLmluaXRTZWdtZW50KGQpKTooYyYmKGU9U2UuaW5pdFNlZ21lbnQoW3RoaXMudmlkZW9UcmFja10pKSxsJiYodD1TZS5pbml0U2VnbWVudChbdGhpcy5hdWRpb1RyYWNrXSkpKSksYyYmby5oYXNTYW1wbGUoKSYmKGE9dGhpcy5fcmVtdXhWaWRlbygpKSxsJiZ1Lmhhc1NhbXBsZSgpJiYobj10aGlzLl9yZW11eEF1ZGlvKCkpLG8uc2FtcGxlcz1bXSx1LnNhbXBsZXM9W10se2luaXRTZWdtZW50OnIsdmlkZW9Jbml0U2VnbWVudDplLGF1ZGlvSW5pdFNlZ21lbnQ6dCx2aWRlb1NlZ21lbnQ6YSxhdWRpb1NlZ21lbnQ6bn19fSx7a2V5OiJfcmVtdXhWaWRlbyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnZpZGVvVHJhY2s7dGhpcy5mb3JjZUZpcnN0SURSJiYoZS5zYW1wbGVzWzBdLmZsYWc9e2RlcGVuZHNPbjoyLGlzTm9uU3luY1NhbXBsZTowfSk7dmFyIHQ9ZS5zYW1wbGVzLHI9MDt0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3IrPWUudW5pdHMucmVkdWNlKChmdW5jdGlvbihlLHQpe3JldHVybiBlK3QuYnl0ZUxlbmd0aH0pLDApLHIrPTQqZS51bml0cy5sZW5ndGh9KSk7Zm9yKHZhciBhLG49bmV3IFVpbnQ4QXJyYXkociksaT1uZXcgRGF0YVZpZXcobi5idWZmZXIpLHM9ZnVuY3Rpb24oZSxyKXtyPXRbb107dmFyIHM9MDtyLnVuaXRzLmZvckVhY2goKGZ1bmN0aW9uKHQpe2kuc2V0VWludDMyKGUsdC5ieXRlTGVuZ3RoKSxlKz00LG4uc2V0KHQsZSksZSs9dC5ieXRlTGVuZ3RoLHMrPTQrdC5ieXRlTGVuZ3RofSkpLHIuc2l6ZT1zLGM9ZSxhPXJ9LG89MCx1PXQubGVuZ3RoLGM9MDtvPHU7bysrKXMoYyxhKTt2YXIgbD1TZS5tZGF0KG4pO3JldHVybiBaKFNlLm1vb2YoW2VdKSxsKX19LHtrZXk6Il9yZW11eEF1ZGlvIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuYXVkaW9UcmFjayx0PW5ldyBVaW50OEFycmF5KGUuc2FtcGxlcy5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrdC5zaXplfSksMCkpO2Uuc2FtcGxlcy5yZWR1Y2UoKGZ1bmN0aW9uKGUscil7cmV0dXJuIHQuc2V0KHIuZGF0YSxlKSxlK3Iuc2l6ZX0pLDApO3ZhciByPVNlLm1kYXQodCk7cmV0dXJuIFooU2UubW9vZihbZV0pLHIpfX0se2tleToicmVzZXQiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy52aWRlb1RyYWNrLnJlc2V0KCksdGhpcy5hdWRpb1RyYWNrLnJlc2V0KCl9fV0pLGV9KCksRWU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpfXJldHVybiBuKGUsW3trZXk6Im1peEluIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmFzc2lnbih0aGlzLGUpfX0se2tleToiY2xvbmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9bmV3IHRoaXMuY29uc3RydWN0b3I7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx0aGlzKSxlfX1dLFt7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsdD1uZXcgQXJyYXkoZSkscj0wO3I8ZTtyKyspdFtyXT1hcmd1bWVudHNbcl07cmV0dXJuIGwodGhpcyx0KX19XSksZX0oKSxCZT1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZihhKTtmdW5jdGlvbiBhKCl7dmFyIGUsbj1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06W10saT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06NCpuLmxlbmd0aDtyKHRoaXMsYSksZT10LmNhbGwodGhpcyk7dmFyIHM9bjtpZihzIGluc3RhbmNlb2YgQXJyYXlCdWZmZXImJihzPW5ldyBVaW50OEFycmF5KHMpKSwocyBpbnN0YW5jZW9mIEludDhBcnJheXx8cyBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5fHxzIGluc3RhbmNlb2YgSW50MTZBcnJheXx8cyBpbnN0YW5jZW9mIFVpbnQxNkFycmF5fHxzIGluc3RhbmNlb2YgSW50MzJBcnJheXx8cyBpbnN0YW5jZW9mIFVpbnQzMkFycmF5fHxzIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5fHxzIGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5KSYmKHM9bmV3IFVpbnQ4QXJyYXkocy5idWZmZXIscy5ieXRlT2Zmc2V0LHMuYnl0ZUxlbmd0aCkpLHMgaW5zdGFuY2VvZiBVaW50OEFycmF5KXtmb3IodmFyIG89cy5ieXRlTGVuZ3RoLHU9W10sYz0wO2M8bztjKz0xKXVbYz4+PjJdfD1zW2NdPDwyNC1jJTQqODtlLndvcmRzPXUsZS5zaWdCeXRlcz1vfWVsc2UgZS53b3Jkcz1uLGUuc2lnQnl0ZXM9aTtyZXR1cm4gZX1yZXR1cm4gbihhLFt7a2V5OiJ0b1N0cmluZyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06VGU7cmV0dXJuIGUuc3RyaW5naWZ5KHRoaXMpfX0se2tleToiY29uY2F0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLndvcmRzLHI9ZS53b3JkcyxhPXRoaXMuc2lnQnl0ZXMsbj1lLnNpZ0J5dGVzO2lmKHRoaXMuY2xhbXAoKSxhJTQpZm9yKHZhciBpPTA7aTxuO2krPTEpe3ZhciBzPXJbaT4+PjJdPj4+MjQtaSU0KjgmMjU1O3RbYStpPj4+Ml18PXM8PDI0LShhK2kpJTQqOH1lbHNlIGZvcih2YXIgbz0wO288bjtvKz00KXRbYStvPj4+Ml09cltvPj4+Ml07cmV0dXJuIHRoaXMuc2lnQnl0ZXMrPW4sdGhpc319LHtrZXk6ImNsYW1wIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMud29yZHMsdD10aGlzLnNpZ0J5dGVzO2VbdD4+PjJdJj00Mjk0OTY3Mjk1PDwzMi10JTQqOCxlLmxlbmd0aD1NYXRoLmNlaWwodC80KX19LHtrZXk6ImNsb25lIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXAobyhhLnByb3RvdHlwZSksImNsb25lIix0aGlzKS5jYWxsKHRoaXMpO3JldHVybiBlLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCksZX19XSxbe2tleToicmFuZG9tIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQscj1bXSxuPWZ1bmN0aW9uKGUpe3ZhciB0PWUscj05ODc2NTQzMjEsYT00Mjk0OTY3Mjk1O3JldHVybiBmdW5jdGlvbigpe3ZhciBlPSgocj0zNjk2OSooNjU1MzUmcikrKHI+PjE2KSZhKTw8MTYpKyh0PTE4ZTMqKDY1NTM1JnQpKyh0Pj4xNikmYSkmYTtyZXR1cm4gZS89NDI5NDk2NzI5NiwoZSs9LjUpKihNYXRoLnJhbmRvbSgpPi41PzE6LTEpfX0saT0wO2k8ZTtpKz00KXt2YXIgcz1uKDQyOTQ5NjcyOTYqKHR8fE1hdGgucmFuZG9tKCkpKTt0PTk4NzY1NDA3MSpzKCksci5wdXNoKDQyOTQ5NjcyOTYqcygpfDApfXJldHVybiBuZXcgYShyLGUpfX1dKSxhfShFZSksVGU9e3N0cmluZ2lmeTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS53b3JkcyxyPWUuc2lnQnl0ZXMsYT1bXSxuPTA7bjxyO24rPTEpe3ZhciBpPXRbbj4+PjJdPj4+MjQtbiU0KjgmMjU1O2EucHVzaCgoaT4+PjQpLnRvU3RyaW5nKDE2KSksYS5wdXNoKCgxNSZpKS50b1N0cmluZygxNikpfXJldHVybiBhLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5sZW5ndGgscj1bXSxhPTA7YTx0O2ErPTIpclthPj4+M118PXBhcnNlSW50KGUuc3Vic3RyKGEsMiksMTYpPDwyNC1hJTgqNDtyZXR1cm4gbmV3IEJlKHIsdC8yKX19LENlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmxlbmd0aCxyPVtdLGE9MDthPHQ7YSs9MSlyW2E+Pj4yXXw9KDI1NSZlLmNoYXJDb2RlQXQoYSkpPDwyNC1hJTQqODtyZXR1cm4gbmV3IEJlKHIsdCl9LFVlPWZ1bmN0aW9uKGUpe3JldHVybiBDZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZSkpKX0sUGU9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWYoYSk7ZnVuY3Rpb24gYSgpe3ZhciBlO3JldHVybiByKHRoaXMsYSksKGU9dC5jYWxsKHRoaXMpKS5fbWluQnVmZmVyU2l6ZT0wLGV9cmV0dXJuIG4oYSxbe2tleToicmVzZXQiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgQmUsdGhpcy5fbkRhdGFCeXRlcz0wfX0se2tleToiX2FwcGVuZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZTsic3RyaW5nIj09dHlwZW9mIHQmJih0PVVlKHQpKSx0aGlzLl9kYXRhLmNvbmNhdCh0KSx0aGlzLl9uRGF0YUJ5dGVzKz10LnNpZ0J5dGVzfX0se2tleToiX3Byb2Nlc3MiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcy5fZGF0YSxhPXRoaXMuYmxvY2tTaXplLG49ci53b3JkcyxpPXIuc2lnQnl0ZXMscz1pLyg0KmEpLG89KHM9ZT9NYXRoLmNlaWwocyk6TWF0aC5tYXgoKDB8cyktdGhpcy5fbWluQnVmZmVyU2l6ZSwwKSkqYSx1PU1hdGgubWluKDQqbyxpKTtpZihvKXtmb3IodmFyIGM9MDtjPG87Yys9YSl0aGlzLl9kb1Byb2Nlc3NCbG9jayhuLGMpO3Q9bi5zcGxpY2UoMCxvKSxyLnNpZ0J5dGVzLT11fXJldHVybiBuZXcgQmUodCx1KX19LHtrZXk6ImNsb25lIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXAobyhhLnByb3RvdHlwZSksImNsb25lIix0aGlzKS5jYWxsKHRoaXMpO3JldHVybiBlLl9kYXRhPXRoaXMuX2RhdGEuY2xvbmUoKSxlfX1dKSxhfShFZSksSWU9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWYoYSk7ZnVuY3Rpb24gYShlKXt2YXIgbjtyZXR1cm4gcih0aGlzLGEpLChuPXQuY2FsbCh0aGlzKSkuYmxvY2tTaXplPTE2LG4uY2ZnPU9iamVjdC5hc3NpZ24obmV3IEVlLGUpLG4ucmVzZXQoKSxufXJldHVybiBuKGEsW3trZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3AobyhhLnByb3RvdHlwZSksInJlc2V0Iix0aGlzKS5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX19LHtrZXk6InVwZGF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2FwcGVuZChlKSx0aGlzLl9wcm9jZXNzKCksdGhpc319LHtrZXk6ImZpbmFsaXplIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmdGhpcy5fYXBwZW5kKGUpLHRoaXMuX2RvRmluYWxpemUoKX19XSxbe2tleToiX2NyZWF0ZUhlbHBlciIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7cmV0dXJuIG5ldyBlKHIpLmZpbmFsaXplKHQpfX19LHtrZXk6Il9jcmVhdGVIbWFjSGVscGVyIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXtyZXR1cm4gbmV3IHplKGUscikuZmluYWxpemUodCl9fX1dKSxhfShQZSksemU9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWYoYSk7ZnVuY3Rpb24gYShlLG4pe3ZhciBpO3IodGhpcyxhKSxpPXQuY2FsbCh0aGlzKTt2YXIgcz1uZXcgZTtpLl9oYXNoZXI9czt2YXIgbz1uOyJzdHJpbmciPT10eXBlb2YgbyYmKG89VWUobykpO3ZhciB1PXMuYmxvY2tTaXplLGM9NCp1O28uc2lnQnl0ZXM+YyYmKG89cy5maW5hbGl6ZShuKSksby5jbGFtcCgpO3ZhciBsPW8uY2xvbmUoKTtpLl9vS2V5PWw7dmFyIGQ9by5jbG9uZSgpO2kuX2lLZXk9ZDtmb3IodmFyIGY9bC53b3JkcyxoPWQud29yZHMscD0wO3A8dTtwKz0xKWZbcF1ePTE1NDk1NTY4MjgsaFtwXV49OTA5NTIyNDg2O3JldHVybiBsLnNpZ0J5dGVzPWMsZC5zaWdCeXRlcz1jLGkucmVzZXQoKSxpfXJldHVybiBuKGEsW3trZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2hhc2hlcjtlLnJlc2V0KCksZS51cGRhdGUodGhpcy5faUtleSl9fSx7a2V5OiJ1cGRhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9oYXNoZXIudXBkYXRlKGUpLHRoaXN9fSx7a2V5OiJmaW5hbGl6ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5faGFzaGVyLHI9dC5maW5hbGl6ZShlKTtyZXR1cm4gdC5yZXNldCgpLHQuZmluYWxpemUodGhpcy5fb0tleS5jbG9uZSgpLmNvbmNhdChyKSl9fV0pLGF9KEVlKSxNZT17c3RyaW5naWZ5OmZ1bmN0aW9uKGUpe3ZhciB0PWUud29yZHMscj1lLnNpZ0J5dGVzLGE9dGhpcy5fbWFwO2UuY2xhbXAoKTtmb3IodmFyIG49W10saT0wO2k8cjtpKz0zKWZvcih2YXIgcz0odFtpPj4+Ml0+Pj4yNC1pJTQqOCYyNTUpPDwxNnwodFtpKzE+Pj4yXT4+PjI0LShpKzEpJTQqOCYyNTUpPDw4fHRbaSsyPj4+Ml0+Pj4yNC0oaSsyKSU0KjgmMjU1LG89MDtvPDQmJmkrLjc1Km88cjtvKz0xKW4ucHVzaChhLmNoYXJBdChzPj4+NiooMy1vKSY2MykpO3ZhciB1PWEuY2hhckF0KDY0KTtpZih1KWZvcig7bi5sZW5ndGglNDspbi5wdXNoKHUpO3JldHVybiBuLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aCxyPXRoaXMuX21hcCxhPXRoaXMuX3JldmVyc2VNYXA7aWYoIWEpe3RoaXMuX3JldmVyc2VNYXA9W10sYT10aGlzLl9yZXZlcnNlTWFwO2Zvcih2YXIgbj0wO248ci5sZW5ndGg7bis9MSlhW3IuY2hhckNvZGVBdChuKV09bn12YXIgaT1yLmNoYXJBdCg2NCk7aWYoaSl7dmFyIHM9ZS5pbmRleE9mKGkpOy0xIT09cyYmKHQ9cyl9cmV0dXJuIGZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIGE9W10sbj0wLGk9MDtpPHQ7aSs9MSlpZihpJTQpe3ZhciBzPXJbZS5jaGFyQ29kZUF0KGktMSldPDxpJTQqMnxyW2UuY2hhckNvZGVBdChpKV0+Pj42LWklNCoyO2Fbbj4+PjJdfD1zPDwyNC1uJTQqOCxuKz0xfXJldHVybiBCZS5jcmVhdGUoYSxuKX0oZSx0LGEpfSxfbWFwOiJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSJ9LFJlPVtdLE9lPTA7T2U8NjQ7T2UrPTEpUmVbT2VdPTQyOTQ5NjcyOTYqTWF0aC5hYnMoTWF0aC5zaW4oT2UrMSkpfDA7dmFyIExlPWZ1bmN0aW9uKGUsdCxyLGEsbixpLHMpe3ZhciBvPWUrKHQmcnx+dCZhKStuK3M7cmV0dXJuKG88PGl8bz4+PjMyLWkpK3R9LFZlPWZ1bmN0aW9uKGUsdCxyLGEsbixpLHMpe3ZhciBvPWUrKHQmYXxyJn5hKStuK3M7cmV0dXJuKG88PGl8bz4+PjMyLWkpK3R9LEZlPWZ1bmN0aW9uKGUsdCxyLGEsbixpLHMpe3ZhciBvPWUrKHRecl5hKStuK3M7cmV0dXJuKG88PGl8bz4+PjMyLWkpK3R9LE5lPWZ1bmN0aW9uKGUsdCxyLGEsbixpLHMpe3ZhciBvPWUrKHJeKHR8fmEpKStuK3M7cmV0dXJuKG88PGl8bz4+PjMyLWkpK3R9LGplPWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1mKGEpO2Z1bmN0aW9uIGEoKXtyZXR1cm4gcih0aGlzLGEpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBuKGEsW3trZXk6Il9kb1Jlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IEJlKFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzhdKX19LHtrZXk6Il9kb1Byb2Nlc3NCbG9jayIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9ZSxhPTA7YTwxNjthKz0xKXt2YXIgbj10K2EsaT1lW25dO3Jbbl09MTY3MTE5MzUmKGk8PDh8aT4+PjI0KXw0Mjc4MjU1MzYwJihpPDwyNHxpPj4+OCl9dmFyIHM9dGhpcy5faGFzaC53b3JkcyxvPXJbdCswXSx1PXJbdCsxXSxjPXJbdCsyXSxsPXJbdCszXSxkPXJbdCs0XSxmPXJbdCs1XSxoPXJbdCs2XSxwPXJbdCs3XSx2PXJbdCs4XSx5PXJbdCs5XSxtPXJbdCsxMF0sZz1yW3QrMTFdLGs9clt0KzEyXSxiPXJbdCsxM10sXz1yW3QrMTRdLHc9clt0KzE1XSx4PXNbMF0sUz1zWzFdLEE9c1syXSxEPXNbM107eD1MZSh4LFMsQSxELG8sNyxSZVswXSksRD1MZShELHgsUyxBLHUsMTIsUmVbMV0pLEE9TGUoQSxELHgsUyxjLDE3LFJlWzJdKSxTPUxlKFMsQSxELHgsbCwyMixSZVszXSkseD1MZSh4LFMsQSxELGQsNyxSZVs0XSksRD1MZShELHgsUyxBLGYsMTIsUmVbNV0pLEE9TGUoQSxELHgsUyxoLDE3LFJlWzZdKSxTPUxlKFMsQSxELHgscCwyMixSZVs3XSkseD1MZSh4LFMsQSxELHYsNyxSZVs4XSksRD1MZShELHgsUyxBLHksMTIsUmVbOV0pLEE9TGUoQSxELHgsUyxtLDE3LFJlWzEwXSksUz1MZShTLEEsRCx4LGcsMjIsUmVbMTFdKSx4PUxlKHgsUyxBLEQsayw3LFJlWzEyXSksRD1MZShELHgsUyxBLGIsMTIsUmVbMTNdKSxBPUxlKEEsRCx4LFMsXywxNyxSZVsxNF0pLFM9TGUoUyxBLEQseCx3LDIyLFJlWzE1XSkseD1WZSh4LFMsQSxELHUsNSxSZVsxNl0pLEQ9VmUoRCx4LFMsQSxoLDksUmVbMTddKSxBPVZlKEEsRCx4LFMsZywxNCxSZVsxOF0pLFM9VmUoUyxBLEQseCxvLDIwLFJlWzE5XSkseD1WZSh4LFMsQSxELGYsNSxSZVsyMF0pLEQ9VmUoRCx4LFMsQSxtLDksUmVbMjFdKSxBPVZlKEEsRCx4LFMsdywxNCxSZVsyMl0pLFM9VmUoUyxBLEQseCxkLDIwLFJlWzIzXSkseD1WZSh4LFMsQSxELHksNSxSZVsyNF0pLEQ9VmUoRCx4LFMsQSxfLDksUmVbMjVdKSxBPVZlKEEsRCx4LFMsbCwxNCxSZVsyNl0pLFM9VmUoUyxBLEQseCx2LDIwLFJlWzI3XSkseD1WZSh4LFMsQSxELGIsNSxSZVsyOF0pLEQ9VmUoRCx4LFMsQSxjLDksUmVbMjldKSxBPVZlKEEsRCx4LFMscCwxNCxSZVszMF0pLFM9VmUoUyxBLEQseCxrLDIwLFJlWzMxXSkseD1GZSh4LFMsQSxELGYsNCxSZVszMl0pLEQ9RmUoRCx4LFMsQSx2LDExLFJlWzMzXSksQT1GZShBLEQseCxTLGcsMTYsUmVbMzRdKSxTPUZlKFMsQSxELHgsXywyMyxSZVszNV0pLHg9RmUoeCxTLEEsRCx1LDQsUmVbMzZdKSxEPUZlKEQseCxTLEEsZCwxMSxSZVszN10pLEE9RmUoQSxELHgsUyxwLDE2LFJlWzM4XSksUz1GZShTLEEsRCx4LG0sMjMsUmVbMzldKSx4PUZlKHgsUyxBLEQsYiw0LFJlWzQwXSksRD1GZShELHgsUyxBLG8sMTEsUmVbNDFdKSxBPUZlKEEsRCx4LFMsbCwxNixSZVs0Ml0pLFM9RmUoUyxBLEQseCxoLDIzLFJlWzQzXSkseD1GZSh4LFMsQSxELHksNCxSZVs0NF0pLEQ9RmUoRCx4LFMsQSxrLDExLFJlWzQ1XSksQT1GZShBLEQseCxTLHcsMTYsUmVbNDZdKSxTPUZlKFMsQSxELHgsYywyMyxSZVs0N10pLHg9TmUoeCxTLEEsRCxvLDYsUmVbNDhdKSxEPU5lKEQseCxTLEEscCwxMCxSZVs0OV0pLEE9TmUoQSxELHgsUyxfLDE1LFJlWzUwXSksUz1OZShTLEEsRCx4LGYsMjEsUmVbNTFdKSx4PU5lKHgsUyxBLEQsayw2LFJlWzUyXSksRD1OZShELHgsUyxBLGwsMTAsUmVbNTNdKSxBPU5lKEEsRCx4LFMsbSwxNSxSZVs1NF0pLFM9TmUoUyxBLEQseCx1LDIxLFJlWzU1XSkseD1OZSh4LFMsQSxELHYsNixSZVs1Nl0pLEQ9TmUoRCx4LFMsQSx3LDEwLFJlWzU3XSksQT1OZShBLEQseCxTLGgsMTUsUmVbNThdKSxTPU5lKFMsQSxELHgsYiwyMSxSZVs1OV0pLHg9TmUoeCxTLEEsRCxkLDYsUmVbNjBdKSxEPU5lKEQseCxTLEEsZywxMCxSZVs2MV0pLEE9TmUoQSxELHgsUyxjLDE1LFJlWzYyXSksUz1OZShTLEEsRCx4LHksMjEsUmVbNjNdKSxzWzBdPXNbMF0reHwwLHNbMV09c1sxXStTfDAsc1syXT1zWzJdK0F8MCxzWzNdPXNbM10rRHwwfX0se2tleToiX2RvRmluYWxpemUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZGF0YSx0PWUud29yZHMscj04KnRoaXMuX25EYXRhQnl0ZXMsYT04KmUuc2lnQnl0ZXM7dFthPj4+NV18PTEyODw8MjQtYSUzMjt2YXIgbj1NYXRoLmZsb29yKHIvNDI5NDk2NzI5NiksaT1yO3RbMTUrKGErNjQ+Pj45PDw0KV09MTY3MTE5MzUmKG48PDh8bj4+PjI0KXw0Mjc4MjU1MzYwJihuPDwyNHxuPj4+OCksdFsxNCsoYSs2ND4+Pjk8PDQpXT0xNjcxMTkzNSYoaTw8OHxpPj4+MjQpfDQyNzgyNTUzNjAmKGk8PDI0fGk+Pj44KSxlLnNpZ0J5dGVzPTQqKHQubGVuZ3RoKzEpLHRoaXMuX3Byb2Nlc3MoKTtmb3IodmFyIHM9dGhpcy5faGFzaCxvPXMud29yZHMsdT0wO3U8NDt1Kz0xKXt2YXIgYz1vW3VdO29bdV09MTY3MTE5MzUmKGM8PDh8Yz4+PjI0KXw0Mjc4MjU1MzYwJihjPDwyNHxjPj4+OCl9cmV0dXJuIHN9fSx7a2V5OiJjbG9uZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1wKG8oYS5wcm90b3R5cGUpLCJjbG9uZSIsdGhpcykuY2FsbCh0aGlzKTtyZXR1cm4gZS5faGFzaD10aGlzLl9oYXNoLmNsb25lKCksZX19XSksYX0oSWUpO0llLl9jcmVhdGVIZWxwZXIoamUpLEllLl9jcmVhdGVIbWFjSGVscGVyKGplKTt2YXIgR2U9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWYoYSk7ZnVuY3Rpb24gYShlKXt2YXIgbjtyZXR1cm4gcih0aGlzLGEpLChuPXQuY2FsbCh0aGlzKSkuY2ZnPU9iamVjdC5hc3NpZ24obmV3IEVlLHtrZXlTaXplOjQsaGFzaGVyOmplLGl0ZXJhdGlvbnM6MX0sZSksbn1yZXR1cm4gbihhLFt7a2V5OiJjb21wdXRlIix2YWx1ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcixhPXRoaXMuY2ZnLG49YS5oYXNoZXIuY3JlYXRlKCksaT1CZS5jcmVhdGUoKSxzPWkud29yZHMsbz1hLmtleVNpemUsdT1hLml0ZXJhdGlvbnM7cy5sZW5ndGg8bzspe3ImJm4udXBkYXRlKHIpLHI9bi51cGRhdGUoZSkuZmluYWxpemUodCksbi5yZXNldCgpO2Zvcih2YXIgYz0xO2M8dTtjKz0xKXI9bi5maW5hbGl6ZShyKSxuLnJlc2V0KCk7aS5jb25jYXQocil9cmV0dXJuIGkuc2lnQnl0ZXM9NCpvLGl9fV0pLGF9KEVlKSxIZT1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZihhKTtmdW5jdGlvbiBhKGUsbixpKXt2YXIgcztyZXR1cm4gcih0aGlzLGEpLChzPXQuY2FsbCh0aGlzKSkuY2ZnPU9iamVjdC5hc3NpZ24obmV3IEVlLGkpLHMuX3hmb3JtTW9kZT1lLHMuX2tleT1uLHMucmVzZXQoKSxzfXJldHVybiBuKGEsW3trZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3AobyhhLnByb3RvdHlwZSksInJlc2V0Iix0aGlzKS5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX19LHtrZXk6InByb2Nlc3MiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9hcHBlbmQoZSksdGhpcy5fcHJvY2VzcygpfX0se2tleToiZmluYWxpemUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZ0aGlzLl9hcHBlbmQoZSksdGhpcy5fZG9GaW5hbGl6ZSgpfX1dLFt7a2V5OiJjcmVhdGVFbmNyeXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0VOQ19YRk9STV9NT0RFLGUsdCl9fSx7a2V5OiJjcmVhdGVEZWNyeXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0RFQ19YRk9STV9NT0RFLGUsdCl9fSx7a2V5OiJfY3JlYXRlSGVscGVyIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbihlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/ZXQ6SmV9O3JldHVybntlbmNyeXB0OmZ1bmN0aW9uKHIsYSxuKXtyZXR1cm4gdChhKS5lbmNyeXB0KGUscixhLG4pfSxkZWNyeXB0OmZ1bmN0aW9uKHIsYSxuKXtyZXR1cm4gdChhKS5kZWNyeXB0KGUscixhLG4pfX19fV0pLGF9KFBlKTtIZS5fRU5DX1hGT1JNX01PREU9MSxIZS5fREVDX1hGT1JNX01PREU9MixIZS5rZXlTaXplPTQsSGUuaXZTaXplPTQ7dmFyIEtlPWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1mKGEpO2Z1bmN0aW9uIGEoZSxuKXt2YXIgaTtyZXR1cm4gcih0aGlzLGEpLChpPXQuY2FsbCh0aGlzKSkuX2NpcGhlcj1lLGkuX2l2PW4saX1yZXR1cm4gbihhLG51bGwsW3trZXk6ImNyZWF0ZUVuY3J5cHRvciIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5FbmNyeXB0b3IuY3JlYXRlKGUsdCl9fSx7a2V5OiJjcmVhdGVEZWNyeXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuRGVjcnlwdG9yLmNyZWF0ZShlLHQpfX1dKSxhfShFZSk7ZnVuY3Rpb24gcWUoZSx0LHIpe3ZhciBhLG49ZSxpPXRoaXMuX2l2O2k/KGE9aSx0aGlzLl9pdj12b2lkIDApOmE9dGhpcy5fcHJldkJsb2NrO2Zvcih2YXIgcz0wO3M8cjtzKz0xKW5bdCtzXV49YVtzXX12YXIgV2U9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWYoYSk7ZnVuY3Rpb24gYSgpe3JldHVybiByKHRoaXMsYSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG4oYSl9KEtlKTtXZS5FbmNyeXB0b3I9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWYoYSk7ZnVuY3Rpb24gYSgpe3JldHVybiByKHRoaXMsYSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG4oYSxbe2tleToicHJvY2Vzc0Jsb2NrIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2NpcGhlcixhPXIuYmxvY2tTaXplO3FlLmNhbGwodGhpcyxlLHQsYSksci5lbmNyeXB0QmxvY2soZSx0KSx0aGlzLl9wcmV2QmxvY2s9ZS5zbGljZSh0LHQrYSl9fV0pLGF9KFdlKSxXZS5EZWNyeXB0b3I9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWYoYSk7ZnVuY3Rpb24gYSgpe3JldHVybiByKHRoaXMsYSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG4oYSxbe2tleToicHJvY2Vzc0Jsb2NrIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2NpcGhlcixhPXIuYmxvY2tTaXplLG49ZS5zbGljZSh0LHQrYSk7ci5kZWNyeXB0QmxvY2soZSx0KSxxZS5jYWxsKHRoaXMsZSx0LGEpLHRoaXMuX3ByZXZCbG9jaz1ufX1dKSxhfShXZSk7dmFyIFhlPXtwYWQ6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9NCp0LGE9ci1lLnNpZ0J5dGVzJXIsbj1hPDwyNHxhPDwxNnxhPDw4fGEsaT1bXSxzPTA7czxhO3MrPTQpaS5wdXNoKG4pO3ZhciBvPUJlLmNyZWF0ZShpLGEpO2UuY29uY2F0KG8pfSx1bnBhZDpmdW5jdGlvbihlKXt2YXIgdD1lLHI9MjU1JnQud29yZHNbdC5zaWdCeXRlcy0xPj4+Ml07dC5zaWdCeXRlcy09cn19LFllPWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1mKGEpO2Z1bmN0aW9uIGEoZSxuLGkpe3ZhciBzO3JldHVybiByKHRoaXMsYSksKHM9dC5jYWxsKHRoaXMsZSxuLE9iamVjdC5hc3NpZ24oe21vZGU6V2UscGFkZGluZzpYZX0saSkpKS5ibG9ja1NpemU9NCxzfXJldHVybiBuKGEsW3trZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlO3AobyhhLnByb3RvdHlwZSksInJlc2V0Iix0aGlzKS5jYWxsKHRoaXMpO3ZhciB0PXRoaXMuY2ZnLHI9dC5pdixuPXQubW9kZTt0aGlzLl94Zm9ybU1vZGU9PT10aGlzLmNvbnN0cnVjdG9yLl9FTkNfWEZPUk1fTU9ERT9lPW4uY3JlYXRlRW5jcnlwdG9yOihlPW4uY3JlYXRlRGVjcnlwdG9yLHRoaXMuX21pbkJ1ZmZlclNpemU9MSksdGhpcy5fbW9kZT1lLmNhbGwobix0aGlzLHImJnIud29yZHMpLHRoaXMuX21vZGUuX19jcmVhdG9yPWV9fSx7a2V5OiJfZG9Qcm9jZXNzQmxvY2siLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fbW9kZS5wcm9jZXNzQmxvY2soZSx0KX19LHtrZXk6Il9kb0ZpbmFsaXplIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5jZmcucGFkZGluZztyZXR1cm4gdGhpcy5feGZvcm1Nb2RlPT09dGhpcy5jb25zdHJ1Y3Rvci5fRU5DX1hGT1JNX01PREU/KHQucGFkKHRoaXMuX2RhdGEsdGhpcy5ibG9ja1NpemUpLGU9dGhpcy5fcHJvY2VzcyghMCkpOihlPXRoaXMuX3Byb2Nlc3MoITApLHQudW5wYWQoZSkpLGV9fV0pLGF9KEhlKSxaZT1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZihhKTtmdW5jdGlvbiBhKGUpe3ZhciBuO3JldHVybiByKHRoaXMsYSksKG49dC5jYWxsKHRoaXMpKS5taXhJbihlKSxufXJldHVybiBuKGEsW3trZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4oZXx8dGhpcy5mb3JtYXR0ZXIpLnN0cmluZ2lmeSh0aGlzKX19XSksYX0oRWUpLFFlPXtzdHJpbmdpZnk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jaXBoZXJ0ZXh0LHI9ZS5zYWx0O3JldHVybihyP0JlLmNyZWF0ZShbMTM5ODg5MzY4NCwxNzAxMDc2ODMxXSkuY29uY2F0KHIpLmNvbmNhdCh0KTp0KS50b1N0cmluZyhNZSl9LHBhcnNlOmZ1bmN0aW9uKGUpe3ZhciB0LHI9TWUucGFyc2UoZSksYT1yLndvcmRzO3JldHVybiAxMzk4ODkzNjg0PT09YVswXSYmMTcwMTA3NjgzMT09PWFbMV0mJih0PUJlLmNyZWF0ZShhLnNsaWNlKDIsNCkpLGEuc3BsaWNlKDAsNCksci5zaWdCeXRlcy09MTYpLFplLmNyZWF0ZSh7Y2lwaGVydGV4dDpyLHNhbHQ6dH0pfX0sSmU9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWYoYSk7ZnVuY3Rpb24gYSgpe3JldHVybiByKHRoaXMsYSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG4oYSxudWxsLFt7a2V5OiJlbmNyeXB0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixhKXt2YXIgbj1PYmplY3QuYXNzaWduKG5ldyBFZSx0aGlzLmNmZyxhKSxpPWUuY3JlYXRlRW5jcnlwdG9yKHIsbikscz1pLmZpbmFsaXplKHQpLG89aS5jZmc7cmV0dXJuIFplLmNyZWF0ZSh7Y2lwaGVydGV4dDpzLGtleTpyLGl2Om8uaXYsYWxnb3JpdGhtOmUsbW9kZTpvLm1vZGUscGFkZGluZzpvLnBhZGRpbmcsYmxvY2tTaXplOmkuYmxvY2tTaXplLGZvcm1hdHRlcjpuLmZvcm1hdH0pfX0se2tleToiZGVjcnlwdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsYSl7dmFyIG49dCxpPU9iamVjdC5hc3NpZ24obmV3IEVlLHRoaXMuY2ZnLGEpO3JldHVybiBuPXRoaXMuX3BhcnNlKG4saS5mb3JtYXQpLGUuY3JlYXRlRGVjcnlwdG9yKHIsaSkuZmluYWxpemUobi5jaXBoZXJ0ZXh0KX19LHtrZXk6Il9wYXJzZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/dC5wYXJzZShlLHRoaXMpOmV9fV0pLGF9KEVlKTtKZS5jZmc9T2JqZWN0LmFzc2lnbihuZXcgRWUse2Zvcm1hdDpRZX0pO3ZhciAkZT17ZXhlY3V0ZTpmdW5jdGlvbihlLHQscixhKXt2YXIgbj1hO258fChuPUJlLnJhbmRvbSg4KSk7dmFyIGk9R2UuY3JlYXRlKHtrZXlTaXplOnQrcn0pLmNvbXB1dGUoZSxuKSxzPUJlLmNyZWF0ZShpLndvcmRzLnNsaWNlKHQpLDQqcik7cmV0dXJuIGkuc2lnQnl0ZXM9NCp0LFplLmNyZWF0ZSh7a2V5OmksaXY6cyxzYWx0Om59KX19LGV0PWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1mKGEpO2Z1bmN0aW9uIGEoKXtyZXR1cm4gcih0aGlzLGEpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBuKGEsbnVsbCxbe2tleToiZW5jcnlwdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsYSl7dmFyIG49T2JqZWN0LmFzc2lnbihuZXcgRWUsdGhpcy5jZmcsYSksaT1uLmtkZi5leGVjdXRlKHIsZS5rZXlTaXplLGUuaXZTaXplKTtuLml2PWkuaXY7dmFyIHM9SmUuZW5jcnlwdC5jYWxsKHRoaXMsZSx0LGkua2V5LG4pO3JldHVybiBzLm1peEluKGkpLHN9fSx7a2V5OiJkZWNyeXB0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixhKXt2YXIgbj10LGk9T2JqZWN0LmFzc2lnbihuZXcgRWUsdGhpcy5jZmcsYSk7bj10aGlzLl9wYXJzZShuLGkuZm9ybWF0KTt2YXIgcz1pLmtkZi5leGVjdXRlKHIsZS5rZXlTaXplLGUuaXZTaXplLG4uc2FsdCk7cmV0dXJuIGkuaXY9cy5pdixKZS5kZWNyeXB0LmNhbGwodGhpcyxlLG4scy5rZXksaSl9fV0pLGF9KEplKTtldC5jZmc9T2JqZWN0LmFzc2lnbihKZS5jZmcse2tkZjokZX0pO2Zvcih2YXIgdHQ9W10scnQ9W10sYXQ9W10sbnQ9W10saXQ9W10sc3Q9W10sb3Q9W10sdXQ9W10sY3Q9W10sbHQ9W10sZHQ9W10sZnQ9MDtmdDwyNTY7ZnQrPTEpZHRbZnRdPWZ0PDEyOD9mdDw8MTpmdDw8MV4yODM7Zm9yKHZhciBodD0wLHB0PTAsdnQ9MDt2dDwyNTY7dnQrPTEpe3ZhciB5dD1wdF5wdDw8MV5wdDw8Ml5wdDw8M15wdDw8NDt5dD15dD4+PjheMjU1Jnl0Xjk5LHR0W2h0XT15dCxydFt5dF09aHQ7dmFyIG10PWR0W2h0XSxndD1kdFttdF0sa3Q9ZHRbZ3RdLGJ0PTI1NypkdFt5dF1eMTY4NDMwMDgqeXQ7YXRbaHRdPWJ0PDwyNHxidD4+PjgsbnRbaHRdPWJ0PDwxNnxidD4+PjE2LGl0W2h0XT1idDw8OHxidD4+PjI0LHN0W2h0XT1idCxidD0xNjg0MzAwOSprdF42NTUzNypndF4yNTcqbXReMTY4NDMwMDgqaHQsb3RbeXRdPWJ0PDwyNHxidD4+PjgsdXRbeXRdPWJ0PDwxNnxidD4+PjE2LGN0W3l0XT1idDw8OHxidD4+PjI0LGx0W3l0XT1idCxodD8oaHQ9bXReZHRbZHRbZHRba3RebXRdXV0scHRePWR0W2R0W3B0XV0pOmh0PXB0PTF9dmFyIF90PVswLDEsMiw0LDgsMTYsMzIsNjQsMTI4LDI3LDU0XSx3dD1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZihhKTtmdW5jdGlvbiBhKCl7cmV0dXJuIHIodGhpcyxhKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gbihhLFt7a2V5OiJfZG9SZXNldCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZTtpZighdGhpcy5fblJvdW5kc3x8dGhpcy5fa2V5UHJpb3JSZXNldCE9PXRoaXMuX2tleSl7dGhpcy5fa2V5UHJpb3JSZXNldD10aGlzLl9rZXk7dmFyIHQ9dGhpcy5fa2V5UHJpb3JSZXNldCxyPXQud29yZHMsYT10LnNpZ0J5dGVzLzQ7dGhpcy5fblJvdW5kcz1hKzY7dmFyIG49NCoodGhpcy5fblJvdW5kcysxKTt0aGlzLl9rZXlTY2hlZHVsZT1bXTtmb3IodmFyIGk9dGhpcy5fa2V5U2NoZWR1bGUscz0wO3M8bjtzKz0xKXM8YT9pW3NdPXJbc106KGU9aVtzLTFdLHMlYT9hPjYmJnMlYT09NCYmKGU9dHRbZT4+PjI0XTw8MjR8dHRbZT4+PjE2JjI1NV08PDE2fHR0W2U+Pj44JjI1NV08PDh8dHRbMjU1JmVdKTooZT10dFsoZT1lPDw4fGU+Pj4yNCk+Pj4yNF08PDI0fHR0W2U+Pj4xNiYyNTVdPDwxNnx0dFtlPj4+OCYyNTVdPDw4fHR0WzI1NSZlXSxlXj1fdFtzL2F8MF08PDI0KSxpW3NdPWlbcy1hXV5lKTt0aGlzLl9pbnZLZXlTY2hlZHVsZT1bXTtmb3IodmFyIG89dGhpcy5faW52S2V5U2NoZWR1bGUsdT0wO3U8bjt1Kz0xKXt2YXIgYz1uLXU7ZT11JTQ/aVtjXTppW2MtNF0sb1t1XT11PDR8fGM8PTQ/ZTpvdFt0dFtlPj4+MjRdXV51dFt0dFtlPj4+MTYmMjU1XV1eY3RbdHRbZT4+PjgmMjU1XV1ebHRbdHRbMjU1JmVdXX19fX0se2tleToiZW5jcnlwdEJsb2NrIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX2RvQ3J5cHRCbG9jayhlLHQsdGhpcy5fa2V5U2NoZWR1bGUsYXQsbnQsaXQsc3QsdHQpfX0se2tleToiZGVjcnlwdEJsb2NrIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPWUsYT1yW3QrMV07clt0KzFdPXJbdCszXSxyW3QrM109YSx0aGlzLl9kb0NyeXB0QmxvY2socix0LHRoaXMuX2ludktleVNjaGVkdWxlLG90LHV0LGN0LGx0LHJ0KSxhPXJbdCsxXSxyW3QrMV09clt0KzNdLHJbdCszXT1hfX0se2tleToiX2RvQ3J5cHRCbG9jayIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsYSxuLGkscyxvKXtmb3IodmFyIHU9ZSxjPXRoaXMuX25Sb3VuZHMsbD11W3RdXnJbMF0sZD11W3QrMV1eclsxXSxmPXVbdCsyXV5yWzJdLGg9dVt0KzNdXnJbM10scD00LHY9MTt2PGM7dis9MSl7dmFyIHk9YVtsPj4+MjRdXm5bZD4+PjE2JjI1NV1eaVtmPj4+OCYyNTVdXnNbMjU1JmhdXnJbcF07cCs9MTt2YXIgbT1hW2Q+Pj4yNF1ebltmPj4+MTYmMjU1XV5pW2g+Pj44JjI1NV1ec1syNTUmbF1ecltwXTtwKz0xO3ZhciBnPWFbZj4+PjI0XV5uW2g+Pj4xNiYyNTVdXmlbbD4+PjgmMjU1XV5zWzI1NSZkXV5yW3BdO3ArPTE7dmFyIGs9YVtoPj4+MjRdXm5bbD4+PjE2JjI1NV1eaVtkPj4+OCYyNTVdXnNbMjU1JmZdXnJbcF07cCs9MSxsPXksZD1tLGY9ZyxoPWt9dmFyIGI9KG9bbD4+PjI0XTw8MjR8b1tkPj4+MTYmMjU1XTw8MTZ8b1tmPj4+OCYyNTVdPDw4fG9bMjU1JmhdKV5yW3BdO3ArPTE7dmFyIF89KG9bZD4+PjI0XTw8MjR8b1tmPj4+MTYmMjU1XTw8MTZ8b1toPj4+OCYyNTVdPDw4fG9bMjU1JmxdKV5yW3BdO3ArPTE7dmFyIHc9KG9bZj4+PjI0XTw8MjR8b1toPj4+MTYmMjU1XTw8MTZ8b1tsPj4+OCYyNTVdPDw4fG9bMjU1JmRdKV5yW3BdO3ArPTE7dmFyIHg9KG9baD4+PjI0XTw8MjR8b1tsPj4+MTYmMjU1XTw8MTZ8b1tkPj4+OCYyNTVdPDw4fG9bMjU1JmZdKV5yW3BdO3ArPTEsdVt0XT1iLHVbdCsxXT1fLHVbdCsyXT13LHVbdCszXT14fX1dKSxhfShZZSk7d3Qua2V5U2l6ZT04O3ZhciB4dD1ZZS5fY3JlYXRlSGVscGVyKHd0KSxTdD1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZihhKTtmdW5jdGlvbiBhKCl7cmV0dXJuIHIodGhpcyxhKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gbihhKX0oS2UpO1N0LkVuY3J5cHRvcj1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZihhKTtmdW5jdGlvbiBhKCl7cmV0dXJuIHIodGhpcyxhKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gbihhLFt7a2V5OiJwcm9jZXNzQmxvY2siLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZSxhPXRoaXMuX2NpcGhlcixuPWEuYmxvY2tTaXplLGk9dGhpcy5faXYscz10aGlzLl9jb3VudGVyO2kmJih0aGlzLl9jb3VudGVyPWkuc2xpY2UoMCkscz10aGlzLl9jb3VudGVyLHRoaXMuX2l2PXZvaWQgMCk7dmFyIG89cy5zbGljZSgwKTthLmVuY3J5cHRCbG9jayhvLDApLHNbbi0xXT1zW24tMV0rMXwwO2Zvcih2YXIgdT0wO3U8bjt1Kz0xKXJbdCt1XV49b1t1XX19XSksYX0oU3QpLFN0LkRlY3J5cHRvcj1TdC5FbmNyeXB0b3I7dmFyIEF0PXtwYWQ6ZnVuY3Rpb24oKXt9LHVucGFkOmZ1bmN0aW9uKCl7fX0sRHQ9e2RlY3J5cHRXb3JkQXJyYXk6ZnVuY3Rpb24oZSx0LHIpe3ZhciBhPVRlLnBhcnNlKHQpLG49VGUucGFyc2UocmUocikpLGk9QmUuY3JlYXRlKG5ldyBVaW50OEFycmF5KGUpKSxzPXh0LmRlY3J5cHQoWmUuY3JlYXRlKHtjaXBoZXJ0ZXh0Oml9KSxhLHtpdjpuLG1vZGU6U3QscGFkZGluZzpBdH0pO3JldHVybiBEdC53b3JkQXJyYXlUb1VpbnQ4QXJyYXkocyl9LHdvcmRBcnJheVRvVWludDhBcnJheTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5zaWdCeXRlcyxyPWUud29yZHMsYT1uZXcgVWludDhBcnJheSh0KSxuPTAsaT0wO24hPT10Oyl7dmFyIHM9cltpKytdO2lmKGFbbisrXT0oNDI3ODE5MDA4MCZzKT4+PjI0LG49PT10KWJyZWFrO2lmKGFbbisrXT0oMTY3MTE2ODAmcyk+Pj4xNixuPT09dClicmVhaztpZihhW24rK109KDY1MjgwJnMpPj4+OCxuPT09dClicmVhazthW24rK109MjU1JnN9cmV0dXJuIGF9LGRlY29kZXJBRVNDVFJEYXRhOmZ1bmN0aW9uKGUsdCxyKXtpZihlLnZpZGVvU2VuYyl7dmFyIGE9ZS5raWRWYWx1ZSxuPWUudmlkZW9TZW5jO2Uuc2FtcGxlcy5mb3JFYWNoKChmdW5jdGlvbih0LGkpe3ZhciBzPW5baV0sbz10LmRhdGEsdT1bXSxjPVtdLGw9cy5Jbml0aWFsaXphdGlvblZlY3RvcjtpZihzLnN1YnNhbXBsZXMmJnMuc3Vic2FtcGxlcy5sZW5ndGgpcy5zdWJzYW1wbGVzLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUuQnl0ZXNPZkNsZWFyRGF0YStlLkJ5dGVzT2ZQcm90ZWN0ZWREYXRhLHI9by5zbGljZSgwLHQpO3UucHVzaChyLnNsaWNlKDAsZS5CeXRlc09mQ2xlYXJEYXRhKSksYy5wdXNoKHIuc2xpY2UoZS5CeXRlc09mQ2xlYXJEYXRhKSksbz1vLnNsaWNlKHQpfSkpO2Vsc2V7dmFyIGQ9dC5zaXplO3UucHVzaChvLnNsaWNlKDAsMCkpLGMucHVzaChvLnNsaWNlKDAsZCkpLG89by5zbGljZShkKX12YXIgZj1uZXcgd2U7Zi53cml0ZS5hcHBseShmLGMpO3ZhciBoPXI/cihmLmJ1ZmZlcixhLGwpOkR0LmRlY3J5cHRXb3JkQXJyYXkoZi5idWZmZXIsYSxsKSxwPW5ldyB3ZTt1LmZvckVhY2goKGZ1bmN0aW9uKGUsdCl7dmFyIHI9Y1t0XS5sZW5ndGgsYT1oLnNsaWNlKDAscik7cC53cml0ZShlKSxwLndyaXRlKGEpLGg9aC5zbGljZShyKX0pKSxlLnNhbXBsZXNbaV0uZGF0YT1wLmJ1ZmZlcn0pKX1pZih0LmF1ZGlvU2VuYyl7dmFyIGk9dC5raWRWYWx1ZSxzPXQuYXVkaW9TZW5jO3Quc2FtcGxlcy5mb3JFYWNoKChmdW5jdGlvbihlLGEpe3ZhciBuPXNbYV0sbz1yP3IoZS5kYXRhLGksbi5Jbml0aWFsaXphdGlvblZlY3Rvcik6RHQuZGVjcnlwdFdvcmRBcnJheShlLmRhdGEsaSxuLkluaXRpYWxpemF0aW9uVmVjdG9yKTt0LnNhbXBsZXNbYV0uZGF0YT1vfSkpfX19LEV0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LGEsbixzKXt2YXIgbz10aGlzO3IodGhpcyxlKSxpKHRoaXMsIl92aWRlb1NhbXBsZXMiLFtdKSxpKHRoaXMsIl9hdWRpb1NhbXBsZXMiLFtdKSxpKHRoaXMsIl9sYXN0UmVtYWluQnVmZmVyIixbXSksaSh0aGlzLCJfbGFzdFJlbWFpbkJ1ZmZlclN0YXJ0UG9zIiwwKSx0aGlzLnZpZGVvVHJhY2s9bmV3IHosdGhpcy5hdWRpb1RyYWNrPW5ldyBNLHRoaXMubWV0YWRhdGFUcmFjaz1ufHxuZXcgTix0aGlzLmxvZz1uZXcgQWUoIk1QNERlbXV4ZXIiLCFzfHwhcy5vcGVuTG9nfHwhcy5vcGVuTG9nKSx0JiZ0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0Oyh0PW8uX3ZpZGVvU2FtcGxlcykucHVzaC5hcHBseSh0LHkoZS5mcmFtZXMpKX0pKSxhJiZhLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0Oyh0PW8uX2F1ZGlvU2FtcGxlcykucHVzaC5hcHBseSh0LHkoZS5mcmFtZXMpKX0pKX1yZXR1cm4gbihlLFt7a2V5OiJwYXJzZVNhbXBsZXMiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcigibW9vdiBpcyByZXF1aXJlZCIpO2lmKHRoaXMudmlkZW9UcmFjay5jb2RlY3x8dGhpcy5hdWRpb1RyYWNrLmNvZGVjfHwocGUubW9vdlRvVHJhY2soZSx0aGlzLnZpZGVvVHJhY2ssdGhpcy5hdWRpb1RyYWNrKSx0aGlzLnZpZGVvU2VuYz10aGlzLnZpZGVvVHJhY2sudmlkZW9TZW5jLHRoaXMuYXVkaW9TZW5jPXRoaXMuYXVkaW9UcmFjay5hdWRpb1NlbmMpLCF0aGlzLl9hdWRpb1NhbXBsZXMubGVuZ3RoJiYhdGhpcy5fdmlkZW9TYW1wbGVzLmxlbmd0aCl7dmFyIHQ9cGUubW9vdlRvU2FtcGxlcyhlKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoImNhbm5vdCBwYXJzZSBzYW1wbGVzIGZyb20gbW9vdiBib3giKTt0aGlzLl92aWRlb1NhbXBsZXM9dC52aWRlb1NhbXBsZXN8fFtdLHRoaXMuX2F1ZGlvU2FtcGxlcz10LmF1ZGlvU2FtcGxlc3x8W119fX0se2tleToiZGVtdXgiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLGEsbil7dGhpcy5wYXJzZVNhbXBsZXMobik7dmFyIGkscyxvLHU9dGhpcy52aWRlb1RyYWNrLGM9dGhpcy5hdWRpb1RyYWNrO2lmKHUuc2FtcGxlcz1bXSxjLnNhbXBsZXM9W10scil7Zm9yKHZhciBsLGQ9MCxmPXJbMF0saD1yWzFdO2Y8PWg7ZisrKXtpZighKGk9dGhpcy5fdmlkZW9TYW1wbGVzW2ZdKSl0aHJvdyBuZXcgRXJyb3IoImNhbm5vdCBmb3VuZCB2aWRlbyBmcmFtZSAjIi5jb25jYXQoZikpO289aS5vZmZzZXQtdCxzPWUuc3ViYXJyYXkobyxvK2kuc2l6ZSksKGw9bmV3IFIoaS5wdHN8fGkuZHRzLGkuZHRzKSkuZHVyYXRpb249aS5kdXJhdGlvbixsLmdvcElkPWkuZ29wSWQsaS5rZXlmcmFtZSYmbC5zZXRUb0tleWZyYW1lKCk7Zm9yKHZhciBwPTAsdj1zLmxlbmd0aC0xO3A8djspZD0kKHMscCkscCs9NCxsLnVuaXRzLnB1c2gocy5zdWJhcnJheShwLHArZCkpLHArPWQ7dS5zYW1wbGVzLnB1c2gobCl9dS5iYXNlTWVkaWFEZWNvZGVUaW1lPXUuc2FtcGxlc1swXS5kdHN9aWYoYSl7Zm9yKHZhciB5PWFbMF0sbT1hWzFdO3k8PW07eSsrKXtpZighKGk9dGhpcy5fYXVkaW9TYW1wbGVzW3ldKSl0aHJvdyBuZXcgRXJyb3IoImNhbm5vdCBmb3VuZCB2aWRlbyBmcmFtZSAjIi5jb25jYXQoeSkpO289aS5vZmZzZXQtdCxzPWUuc3ViYXJyYXkobyxvK2kuc2l6ZSksYy5zYW1wbGVzLnB1c2gobmV3IE8oaS5kdHMscyxpLmR1cmF0aW9uKSl9Yy5iYXNlTWVkaWFEZWNvZGVUaW1lPWMuc2FtcGxlc1swXS5kdHN9cmV0dXJue3ZpZGVvVHJhY2s6dSxhdWRpb1RyYWNrOmMsbWV0YWRhdGFUcmFjazp0aGlzLm1ldGFkYXRhVHJhY2t9fX0se2tleToiZGVtdXhQYXJ0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixhLG4saSxzLG8pe2lmKHRoaXMucGFyc2VTYW1wbGVzKG4pLHRoaXMudmlkZW9UcmFjay51c2VFTUU9aSx0aGlzLmF1ZGlvVHJhY2sudXNlRU1FPWksdGhpcy5fbGFzdFJlbWFpbkJ1ZmZlciYmdGhpcy5fbGFzdFJlbWFpbkJ1ZmZlci5ieXRlTGVuZ3RoPjAmJnQ+dGhpcy5fbGFzdFJlbWFpbkJ1ZmZlclN0YXJ0UG9zJiZ0PD10aGlzLl9sYXN0UmVtYWluQnVmZmVyU3RhcnRQb3MrdGhpcy5fbGFzdFJlbWFpbkJ1ZmZlci5ieXRlTGVuZ3RoKWZvcih2YXIgdT0wO3U8MjA7KXRyeXt2YXIgYz10aGlzLl9sYXN0UmVtYWluQnVmZmVyLnN1YmFycmF5KDAsdC10aGlzLl9sYXN0UmVtYWluQnVmZmVyU3RhcnRQb3MpLGw9bmV3IFVpbnQ4QXJyYXkoZS5ieXRlTGVuZ3RoK2MuYnl0ZUxlbmd0aCk7bC5zZXQoYywwKSxsLnNldChuZXcgVWludDhBcnJheShlKSxjLmJ5dGVMZW5ndGgpLGU9bCx0LT1jLmJ5dGVMZW5ndGgsdGhpcy5fbGFzdFJlbWFpbkJ1ZmZlcj1udWxsLHRoaXMuX2xhc3RSZW1haW5CdWZmZXJTdGFydFBvcz0wO2JyZWFrfWNhdGNoKEUpe2lmKCEodTwyMCkpdGhyb3cgbmV3IEVycm9yKCJuZXcgVWludDhBcnJheSBlcnJvcjosIitFLmVycm9yTWVzc2FnZSk7dSsrfXZhciBkLGYsaCxwPXRoaXMudmlkZW9UcmFjayx2PXRoaXMuYXVkaW9UcmFjaztwLnNhbXBsZXM9W10sdi5zYW1wbGVzPVtdLHAudmlkZW9TZW5jPW51bGwsdi5hdWRpb1NlbmM9bnVsbDt2YXIgeT0wLG09MDtpZih0aGlzLl92aWRlb1NhbXBsZXMubGVuZ3RoPjAmJnIubGVuZ3RoPjApe2Zvcih2YXIgZyxrPWUuYnl0ZUxlbmd0aCt0LGI9clswXTtiPD1yWzFdO2IrKyl7aWYoIShkPXRoaXMuX3ZpZGVvU2FtcGxlc1tiXSkpdGhyb3cgbmV3IEVycm9yKCJjYW5ub3QgZm91bmQgdmlkZW8gZnJhbWUgIyIuY29uY2F0KGIpKTtkLm9mZnNldD49dCYmZC5vZmZzZXQrZC5zaXplPD1rJiYoeT0oaD1kLm9mZnNldC10KStkLnNpemUsZj1lLnN1YmFycmF5KGgseSksKGc9bmV3IFIoZC5wdHN8fGQuZHRzLGQuZHRzKSkuZHVyYXRpb249ZC5kdXJhdGlvbixnLmdvcElkPWQuZ29wSWQsZy5zYW1wbGVPZmZzZXQ9ZC5pbmRleCxkLmtleWZyYW1lJiZnLnNldFRvS2V5ZnJhbWUoKSxnLmRhdGE9ZixnLnNpemU9ZC5zaXplLHAuc2FtcGxlcy5wdXNoKGcpKX1wLnNhbXBsZXMubGVuZ3RoPjAmJihwLmdvcElkPXAuc2FtcGxlc1swXS5nb3BJZCxwLmJhc2VNZWRpYURlY29kZVRpbWU9cC5zYW1wbGVzWzBdLmR0cyxwLnN0YXJ0UHRzPXAuc2FtcGxlc1swXS5wdHMvcC50aW1lc2NhbGUscC5lbmRQdHM9cC5zYW1wbGVzW3Auc2FtcGxlcy5sZW5ndGgtMV0ucHRzL3AudGltZXNjYWxlLHRoaXMudmlkZW9TZW5jJiYocC52aWRlb1NlbmM9dGhpcy52aWRlb1NlbmMuc2xpY2UocC5zYW1wbGVzWzBdLnNhbXBsZU9mZnNldCxwLnNhbXBsZXNbMF0uc2FtcGxlT2Zmc2V0K3Auc2FtcGxlcy5sZW5ndGgpLHAua2lkVmFsdWU9cykpfWlmKHRoaXMuX2F1ZGlvU2FtcGxlcy5sZW5ndGg+MCYmYS5sZW5ndGg+MCl7Zm9yKHZhciBfPWFbMF07Xzw9YVsxXTtfKyspe2lmKCEoZD10aGlzLl9hdWRpb1NhbXBsZXNbX10pKXRocm93IG5ldyBFcnJvcigiY2Fubm90IGZvdW5kIHZpZGVvIGZyYW1lICMiLmNvbmNhdChfKSk7ZC5vZmZzZXQ+PXQmJmQub2Zmc2V0K2Quc2l6ZTw9ZS5ieXRlTGVuZ3RoK3QmJihtPShoPWQub2Zmc2V0LXQpK2Quc2l6ZSxmPWUuc3ViYXJyYXkoaCxtKSx2LnNhbXBsZXMucHVzaChuZXcgTyhkLmR0cyxmLGQuZHVyYXRpb24sZC5pbmRleCkpKX12LnNhbXBsZXMubGVuZ3RoPjAmJih2LmdvcElkPXYuc2FtcGxlc1swXS5nb3BJZHx8cC5nb3BJZCx2LmJhc2VNZWRpYURlY29kZVRpbWU9di5zYW1wbGVzWzBdLmR0cyx2LnN0YXJ0UHRzPXYuc2FtcGxlc1swXS5wdHMvdi50aW1lc2NhbGUsdi5lbmRQdHM9di5zYW1wbGVzW3Yuc2FtcGxlcy5sZW5ndGgtMV0ucHRzL3YudGltZXNjYWxlLHRoaXMuYXVkaW9TZW5jJiYodi5hdWRpb1NlbmM9dGhpcy5hdWRpb1NlbmMuc2xpY2Uodi5zYW1wbGVzWzBdLnNhbXBsZU9mZnNldCx2LnNhbXBsZXNbMF0uc2FtcGxlT2Zmc2V0K3Yuc2FtcGxlcy5sZW5ndGgpLHYua2lkVmFsdWU9cykpfXRoaXMuZGVjb2RlckRhdGEocCx2LG8pO2Zvcih2YXIgdz0wLHg9MDt4PHAuc2FtcGxlcy5sZW5ndGg7eCsrKWZvcih2YXIgUz0wLEE9cC5zYW1wbGVzW3hdLmRhdGEsRD1BLmxlbmd0aC0xO1M8RDspdz0kKEEsUyksUys9NCxwLnNhbXBsZXNbeF0udW5pdHMucHVzaChBLnN1YmFycmF5KFMsUyt3KSksUys9dztyZXR1cm4gdGhpcy5fbGFzdFJlbWFpbkJ1ZmZlcj1lLnN1YmFycmF5KE1hdGgubWF4KHksbSkpLHRoaXMuX2xhc3RSZW1haW5CdWZmZXIuYnl0ZUxlbmd0aD4wP3RoaXMuX2xhc3RSZW1haW5CdWZmZXJTdGFydFBvcz10K2UuYnl0ZUxlbmd0aC10aGlzLl9sYXN0UmVtYWluQnVmZmVyLmJ5dGVMZW5ndGg6dGhpcy5fbGFzdFJlbWFpbkJ1ZmZlclN0YXJ0UG9zPTAse3ZpZGVvVHJhY2s6cCxhdWRpb1RyYWNrOnYsbWV0YWRhdGFUcmFjazp0aGlzLm1ldGFkYXRhVHJhY2t9fX0se2tleToicmVzZXQiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fdmlkZW9TYW1wbGVzPVtdLHRoaXMuX2F1ZGlvU2FtcGxlcz1bXSx0aGlzLl9sYXN0UmVtYWluQnVmZmVyPW51bGwsdGhpcy5fbGFzdFJlbWFpbkJ1ZmZlclN0YXJ0UG9zPTAsdGhpcy52aWRlb1RyYWNrLnJlc2V0KCksdGhpcy5hdWRpb1RyYWNrLnJlc2V0KCksdGhpcy5tZXRhZGF0YVRyYWNrLnJlc2V0KCl9fSx7a2V5OiJkZWNvZGVyRGF0YSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2UudXNlRU1FfHx0LnVzZUVNRXx8RHQuZGVjb2RlckFFU0NUUkRhdGEoZSx0LHIpfX1dLFt7a2V5OiJwcm9iZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHBlLnByb2JlKGUpfX1dKSxlfSgpLEJ0PXtub3dUaW1lOmZ1bmN0aW9uKCl7dHJ5e3JldHVybiBwYXJzZUludChwZXJmb3JtYW5jZS5ub3coKSwxMCl9Y2F0Y2goZSl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9fSxjb25jYXREYXRhOmZ1bmN0aW9uKGUsdCl7dmFyIHI9W10sYT0wO2UmJnIucHVzaChlKSx0JiZyLnB1c2godCksci5ldmVyeSgoZnVuY3Rpb24oZSl7cmV0dXJuIGUmJihhKz1lLmJ5dGVMZW5ndGgpLCEwfSkpO3ZhciBuPW5ldyBVaW50OEFycmF5KGEpLGk9MDtyZXR1cm4gci5ldmVyeSgoZnVuY3Rpb24oZSl7cmV0dXJuIGUmJihuLnNldChlLGkpLGkrPWUuYnl0ZUxlbmd0aCksITB9KSksbn19O29ubWVzc2FnZT1mdW5jdGlvbihlKXt2YXIgcj1lLmRhdGE7c3dpdGNoKHIubWV0aG9kKXtjYXNlImluaXQiOnRoaXMuY29kZWNUeXBlPXIuYXJncy5jb2RlY1R5cGUsdGhpcy5vcGVubG9nPXIuYXJncy5vcGVuTG9nLHRoaXMuTVA0RGVtdXhlcj1udWxsLHRoaXMuRk1QNFJlbXV4ZXI9bnVsbCx0aGlzLl9uZWVkSW5pdFNlZ21lbnQ9ITAsdGhpcy5zdXBwb3J0SGV2Yz1yLmFyZ3Muc3VwcG9ydEhldmM7YnJlYWs7Y2FzZSJ0cmFuc211eCI6dmFyIGE9ZS5kYXRhLmFyZ3Msbj1uZXcgVWludDhBcnJheShlLmRhdGEuYnVmZmVyKTt0aGlzLk1QNERlbXV4ZXJ8fCh0aGlzLk1QNERlbXV4ZXI9bmV3IEV0KG51bGwsbnVsbCxudWxsLHtvcGVubG9nOnRoaXMub3BlbmxvZ30pKTt2YXIgaSxzPXRoaXMuTVA0RGVtdXhlci5kZW11eFBhcnQobixhLnN0YXJ0LGEudmlkZW9JZHgsYS5hdWRpb0lkeCxhLm1vb3YsYS51c2VFTUUsYS5raWRWYWx1ZSk7aWYodGhpcy5GTVA0UmVtdXhlcnx8ImgyNjUiPT09dGhpcy5jb2RlY1R5cGUmJiF0aGlzLnN1cHBvcnRIZXZjfHwodGhpcy5GTVA0UmVtdXhlcj1uZXcgRGUodGhpcy5NUDREZW11eGVyLnZpZGVvVHJhY2ssdGhpcy5NUDREZW11eGVyLmF1ZGlvVHJhY2sse29wZW5Mb2c6dGhpcy5vcGVubG9nfSkpLHRoaXMuRk1QNFJlbXV4ZXIpe3ZhciBvPXRoaXMuRk1QNFJlbXV4ZXIucmVtdXgodGhpcy5fbmVlZEluaXRTZWdtZW50LHtpbml0TWVyZ2U6ITB9KTtvLmluaXRTZWdtZW50JiYodGhpcy5fbmVlZEluaXRTZWdtZW50PSExKSxpPXtidWZmZXI6QnQuY29uY2F0RGF0YShvLmF1ZGlvU2VnbWVudCxvLnZpZGVvU2VnbWVudCkscmFuZ2U6YS5jb250ZXh0LnJhbmdlLHN0YXRlOmEuY29udGV4dC5zdGF0ZSxjb250ZXh0OntyYW5nZTphLmNvbnRleHQucmFuZ2UsZnJhZ0luZGV4OmEuY29udGV4dC5mcmFnSW5kZXgsc3RhcnRQdHM6TWF0aC5taW4ocy52aWRlb1RyYWNrLnN0YXJ0UHRzLHMuYXVkaW9UcmFjay5zdGFydFB0cyksZW5kUHRzOk1hdGgubWF4KHMudmlkZW9UcmFjay5lbmRQdHMscy5hdWRpb1RyYWNrLmVuZFB0cyl9LGluaXRTZWc6by5pbml0U2VnbWVudH19dGhpcy5wb3N0TWVzc2FnZSh7bWV0aG9kOiJ0cmFuc211eCIsaWQ6ZS5kYXRhLmlkLGFyZ3M6dCh7fSxpKX0pO2JyZWFrO2Nhc2UicmVzZXQiOnRoaXMuRk1QNFJlbXV4ZXImJnRoaXMuRk1QNFJlbXV4ZXIucmVzZXQoKSx0aGlzLk1QNERlbXV4ZXImJnRoaXMuTVA0RGVtdXhlci5yZXNldCgpLHRoaXMuRk1QNFJlbXV4ZXI9bnVsbCx0aGlzLk1QNERlbXV4ZXI9bnVsbCx0aGlzLl9uZWVkSW5pdFNlZ21lbnQ9ITB9fX0oKTsK",pp=typeof window<"u"&&window.Blob&&new Blob([atob(qf)],{type:"text/javascript;charset=utf-8"});function vD(){var r=pp&&(window.URL||window.webkitURL).createObjectURL(pp);try{return r?new Worker(r,{}):new Worker("data:application/javascript;base64,"+qf,{type:"module"})}finally{r&&(window.URL||window.webkitURL).revokeObjectURL(r)}}var yD=function(r){Su(n,r);var s=wu(n);function n(t){var e;return Bi(this,n),e=s.call(this),e.openlog=t.openLog,e.codecType=t.codecType,e.supportHevc=t.supportHevc,e.worker=new vD,e.worker.onmessage=function(i){e.emit(i.data.method,i.data)},e.worker.postMessage({method:"init",id:t.id||0,args:{openlog:e.openlog,supportHevc:e.supportHevc,codecType:e.codecType}}),e}return ji(n,[{key:"transmux",value:function(e,i,a,o,l,u,c,d,p){var h=i.buffer;this.worker&&this.worker.postMessage({method:"transmux",id:e,buffer:h,args:{start:a,videoIdx:o,audioIdx:l,moov:u,useEME:c,kidValue:d,context:p}},[h])}},{key:"reset",value:function(){this.worker&&this.worker.postMessage({method:"reset"})}},{key:"destroy",value:function(){this.worker&&this.worker.terminate()}}]),n}(qn),Vt={ERROR:"error",META_READY:"metaReady",MOOV_REQ_PROGRESS:"moov_request_Progress",UPDATE_LOAD_IDX:"update_load_fragmentIdx"},gD=function(r){Su(n,r);var s=wu(n);function n(t,e){var i;if(Bi(this,n),i=s.call(this),sn(Ct(i),"onprogressDataArrive",function(){var a=Gt(Ae().mark(function o(l,u,c){var d;return Ae().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:l&&l.byteLength>0&&(d=i.timeRange[c.index].range,d&&c.range[1]>=d[1]&&!u&&(u=!0),i.log("[mp4.loadFragment onprogressDataArrive ] receive data, >>> index,",c.index,",range,",JSON.stringify(c.range),", dataLen,",l.byteLength),i._mux(l,c.range[0],c.index,u)),u&&(i.timeRange[c.index].downloaded=!0,i.bufferLoadedPos=-1,i.log("[FragLoadDowned],fragmentIdx,",c.index,",rangeEnd,",c.range[1]));case 2:case"end":return h.stop()}},o)}));return function(o,l,u){return a.apply(this,arguments)}}()),i.url=t,i.options=n.getDefaultConfig(),Object.keys(e).map(function(a){e[a]!==void 0&&e[a]!==null&&(i.options[a]=e[a])}),i.timeRange=[],i.CHUNK_SIZE=i.options.chunkSize,i.bufferLoaded=new Uint8Array(0),i.bufferLoadedPos=0,i.meta=null,i.videoTrak=null,i.audioTrak=null,i.canDownload=!0,i._loadSuccessCallBack=null,i._isPending=!1,i._metaLoading=!1,i.MP4Loader=new cD(Ir(Ir({segmentDuration:i.options.segmentDuration,url:t,vid:e.vid,retry:i.options.retryCount,retryDelay:i.options.retryDelay,timeout:i.options.timeout},e.reqOptions),{},{openLog:as()})),i.MP4Demuxer=null,i.FMP4Remuxer=null,i._needInitSegment=!0,i._switchBitRate=!1,i.enableWorker=i.options.enableWorker,i.enableWorker&&typeof Worker<"u")try{i.workerSequence=0,i.transmuxerWorkerControl=new yD({id:i.workerSequence,codecType:e.codecType,supportHevc:i.options.supportHevc,openLog:as()}),i.transmuxerWorkerControl.on("transmux",function(a){var o=a.args;i.log("[transmuxerworker end] ,range, ",JSON.stringify(o.range),",dataLen,",o.buffer.byteLength,o.context),i._loadSuccessCallBack&&i._loadSuccessCallBack(o)})}catch(a){i.log("Error in worker:",a),i.enableWorker=!1,i.transmuxerWorkerControl=null}return i.enableWorker||(i.MP4Demuxer=null,i.FMP4Remuxer=null),i.seekTime=-1,i.changeBitRateTime=-1,i}return ji(n,[{key:"changeBitRate",value:function(){var t=Gt(Ae().mark(function i(a){return Ae().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.url=a.url,l.next=3,this.MP4Loader.changeUrl(this.url,this.options.vid+Date.now(),this.CHUNK_SIZE);case 3:this._switchBitRate=!0,this.log("[switchBitrate] changeUrl, bitRate,",this.url);case 5:case"end":return l.stop()}},i,this)}));function e(i){return t.apply(this,arguments)}return e}()},{key:"log",value:function(e){for(var i=this.options,a=i&&i.vid?"[MP4] ".concat(i.vid," ").concat(e):"[MP4] ".concat(e),o=arguments.length,l=new Array(o>1?o-1:0),u=1;u<o;u++)l[u-1]=arguments[u];$f.apply(void 0,[a].concat(l))}},{key:"errorHandler",value:function(){var t=Gt(Ae().mark(function i(a,o){var l,u,c,d;return Ae().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:l=a.response,u=a.message,c=this.options?this.options.vid:"",d=null,this._isPending=!0,l?(d=new HZ("network",l.status,{httpText:l.httpText,message:u,url:l.url}),this.emit(Vt.ERROR,d)):(console.log("[MP4] [".concat(c,"] errorHandler,"),a),d=a,this.emit(Vt.ERROR,d));case 6:case"end":return h.stop()}},i,this)}));function e(i,a){return t.apply(this,arguments)}return e}()},{key:"init",value:function(){var t=Gt(Ae().mark(function i(){return Ae().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.url){o.next=3;break}return o.next=3,this.MP4Loader.changeUrl(this.url,this.options.vid+Date.now(),this.CHUNK_SIZE);case 3:return o.next=5,this.getMetaInfo();case 5:case"end":return o.stop()}},i,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getTimeRange",value:function(){for(var e=[],i=null,a=0;this.videoTrak&&a<this.videoTrak.length;a++)i={startTime:this.videoTrak[a].startTime,endTime:this.videoTrak[a].endTime,downloaded:!1,isLoading:!1},e.push(i);if(this.audioTrak&&this.audioTrak.length>e.length)for(var o=e.length;o<this.audioTrak.length;o++)i={startTime:Math.max(this.audioTrak[o].startTime,i?i.endTime:0),endTime:Math.max(this.audioTrak[o].endTime,i?i.endTime:0),downloaded:!1,isLoading:!1},e.push(i);return e}},{key:"getMetaInfo",value:function(){var t=Gt(Ae().mark(function i(){var a=this,o,l,u,c=arguments;return Ae().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return o=c.length>0&&c[0]!==void 0?c[0]:!0,p.prev=1,this._metaLoading=!0,this.log("getMetaInfo start"),this.bufferLoaded=new Uint8Array(0),l=0,u=function(){var h=Gt(Ae().mark(function m(f,v,b){var w;return Ae().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:a.log("getMetaInfo onProgressHandle, dataLen,",f?f.byteLength:-1,", state,",v,",range,",JSON.stringify(b.range)),f&&b.range[0]===l&&(a.bufferLoaded=YZ(Uint8Array,a.bufferLoaded,new Uint8Array(f)),l+=f.byteLength),b.meta&&!a.meta&&(w=b.meta,a.videoTrak=w.videoSegments,a.audioTrak=w.audioSegments,a.timeRange=a.getTimeRange(),a.meta=Ir(Ir({},w.meta),{},{ext:{videoTrak:a.videoTrak,audioTrak:a.audioTrak}}),w.bufferLoaded=a.bufferLoaded,a.log("meta reach"),o&&a.emit(Vt.META_READY,a.meta)),a.meta&&v&&(a.log("[getMetaInfo req end]"),a._metaLoading=!1),a.meta&&(f||v)&&(a.log("emit moov_req_progress"),a.emit(Vt.MOOV_REQ_PROGRESS));case 5:case"end":return T.stop()}},m)}));return function(f,v,b){return h.apply(this,arguments)}}(),p.next=9,this.MP4Loader.loadMetaProcess(this.MP4Loader.cache,[0,this.CHUNK_SIZE],u);case 9:p.next=15;break;case 11:p.prev=11,p.t0=p.catch(1),console.error("[MP4] trigger errorHandler getMetaInfo",p.t0===null||p.t0===void 0?void 0:p.t0.message),this.loadError(p.t0,"getMetaInfo");case 15:case"end":return p.stop()}},i,this,[[1,11]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"getFragmentIdx",value:function(e){var i,a;if(this.videoTrak.length){if(i=this.videoTrak.find(function(l){return l.startTime<=e&&l.endTime>e}),a=this.audioTrak.find(function(l){return l.startTime<=e&&l.endTime>e}),i&&a)return Math.min(i.index,a.index);if(i||a)return i?i.index:a.index;var o=Number.MAX_VALUE;return this.videoTrak&&this.videoTrak.length>0&&(o=this.videoTrak.length-1),this.audioTrak&&this.audioTrak.length>0&&(o=Math.min(this.audioTrak.length-1,o)),o}else return a=this.audioTrak.find(function(l){return l.startTime<=e&&l.endTime>e}),a?a.index:0}},{key:"_checkHasMeta",value:function(){var t=Gt(Ae().mark(function i(){var a;return Ae().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.log(" loadMeta start"),this._metaLoading=!0,l.next=4,this.MP4Loader.loadMeta(this.MP4Loader.cache,Math.round(this.CHUNK_SIZE/2));case 4:return a=l.sent,this._metaLoading=!1,this.videoTrak=a.videoSegments,this.audioTrak=a.audioSegments,this.meta=Ir(Ir({},a.meta),{},{ext:{videoTrak:this.videoTrak,audioTrak:this.audioTrak}}),this.timeRange=this.getTimeRange(),this.bufferLoaded=new Uint8Array(0),a.bufferLoaded=this.bufferLoaded,l.abrupt("return",!0);case 13:case"end":return l.stop()}},i,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"resetFragmentLoadState",value:function(e){for(var i=0;i<this.timeRange.length;i++)i<e?(this.timeRange[i].downloaded=!0,this.timeRange[i].isLoading=!0):(this.timeRange[i].downloaded=!1,this.timeRange[i].isLoading=!1)}},{key:"getFragRange",value:function(e){var i,a,o,l,u=null;this.videoTrak&&(u=e<this.videoTrak.length?this.videoTrak[e]:this.videoTrak[this.videoTrak.length-1]);var c=null;this.audioTrak&&(c=e<this.audioTrak.length?this.audioTrak[e]:this.audioTrak[this.audioTrak.length-1]);var d=0,p=0;this.videoTrak&&e>=this.videoTrak.length-1&&(d=-1),this.audioTrak&&e>=this.audioTrak.length-1&&(p=-1);var h=[Math.min(((i=u)===null||i===void 0?void 0:i.range[0])||1/0,((a=c)===null||a===void 0?void 0:a.range[0])||1/0),Math.max(((o=u)===null||o===void 0?void 0:o.range[1])+d||0,((l=c)===null||l===void 0?void 0:l.range[1])+p||0)];return e<this.timeRange.length&&(this.timeRange[e].range=h),h}},{key:"load",value:function(){var t=Gt(Ae().mark(function i(a,o){var l,u,c;return Ae().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this._loadSuccessCallBack=o,!(this._switchBitRate&&!this._metaLoading)){p.next=12;break}return this.log("[switchBitrate], switch bitRate start load, time,",a>=this.videoTrak.length?this.audioTrak[a].startTime:this.videoTrak[a].startTime,", fragIndex,",a),p.next=5,this._checkHasMeta();case 5:l=p.sent,this.changeBitRateTime>0&&(this.timeRange[a].startTime<=this.changeBitRateTime&&this.changeBitRateTime<this.timeRange[a].endTime?this.log("[switchBitrate], not need update load fragIndex",a,",stTime,",this.changeBitRateTime):(a=this.getFragmentIdx(this.changeBitRateTime),this.log("[switchBitrate], need update load fragIndex",a,",stTime,",this.changeBitRateTime,",newBitrateTimeRange,",this.timeRange[a].startTime,"-",this.timeRange[a].endTime),this.emit(Vt.UPDATE_LOAD_IDX,a)),this.seekTime=this.changeBitRateTime,this.changeBitRateTime=-1),this.resetFragmentLoadState(a),this.log("[switchBitrate], reset timerange state,",a),this._needInitSegment=!0,this.resetTansmuxer(),l&&(this._switchBitRate=!1);case 12:if(!(this._switchBitRate&&this._metaLoading)){p.next=14;break}return p.abrupt("return");case 14:u=this.getFragRange(a),this.log("loadFragment,",a,",range,",JSON.stringify(u)),this.seekTime>0?(c=this.getSubRange(a,this.seekTime,u),this.loadFragment(a,c),this.seekTime=-1):this.loadFragment(a,u);case 17:case"end":return p.stop()}},i,this)}));function e(i,a){return t.apply(this,arguments)}return e}()},{key:"getSubRange",value:function(e,i,a){var o=a[0],l=a[0],u=1,c=!1;if(this.log(">>>>>getSubRange time,",i,JSON.stringify(a)),this.videoTrak){var d=e<this.videoTrak.length?this.videoTrak[e]:this.videoTrak[this.videoTrak.length-1],p=d.frames.filter(bD),h=this.meta.videoTimescale,m=p[0].startTime/h;this.log(">>>>>getSubRange video, startTime,",d.startTime,",endTime,",d.endTime);for(var f=0;f<p.length;f++)this.log(">>>>>getSubRange video keyFrameList, startTime,",p[f].startTime/h,",range,",p[f].offset);for(;u<p.length;u++){var v=p[u].startTime/h;if(m<=i&&i<v&&a[0]<p[u-1].offset){o=p[u-1].offset,c=!0,this.log(">>>>>getSubRange video end, startTime,",m,",endTime,",v,",startRange,",o,", keyFrameIndex,",u-1);break}m=v}!c&&m<=i&&i<d.endTime+.8&&(o=p[u-1].offset,this.log(">>>>>getSubRange video last, startTime,",m,",endTime,",d.endTime,",startRange,",o))}if(u=1,this.audioTrak){var b=e<this.audioTrak.length?this.audioTrak[e]:this.audioTrak[this.audioTrak.length-1],w=b.frames,C=this.meta.audioTimescale;u=Math.floor((i*C-w[0].startTime)/b.frames[0].duration),u=Math.min(w.length-1,u);for(var T=u>0?w[u-1].startTime/C:w[0].startTime/C;u>=0&&u<w.length;){if(u>0&&T>i){u-=1,T=w[u].startTime/C;continue}var L=(w[u].startTime+w[u].duration)/C;if(T<=i&&i<L&&a[0]<w[u].offset){l=w[u].offset,c=!0,this.log(">>>>>getSubRange audio end, startTime,",T,",endTime,",L,",startRange,",l,", index,",u);break}T=L,u++}}var _=[Math.min(l,o),a[1]];return this.log(">>>>>getSubRange finalRange ",JSON.stringify(_),",oldRange,",JSON.stringify(a)),_}},{key:"_mux",value:function(e,i,a,o){var l=this.getSamplesRange(a,"video"),u=this.getSamplesRange(a,"audio"),c=[i,i+e.byteLength];if(this.transmuxerWorkerControl){var d={range:c,state:o,fragIndex:a};this.log("[transmuxerworker start] ,range, ",JSON.stringify(c),",dataLen,",e.byteLength,d),this.transmuxerWorkerControl.transmux(this.workerSequence,e,i,l,u,this.meta.moov,this.useEME,this.kidValue,d)}else try{this.MP4Demuxer||(this.MP4Demuxer=new oZ(this.videoTrak,this.audioTrak,null,{openLog:as()}));var p=this.MP4Demuxer.demuxPart(e,i,l,u,this.meta.moov,this.useEME,this.kidValue);!this.FMP4Remuxer&&(!this.checkCodecH265()||this.options.supportHevc)&&(this.FMP4Remuxer=new gu(this.MP4Demuxer.videoTrack,this.MP4Demuxer.audioTrack,{openLog:as()}));var h;this.log("[mux], videoTimeRange,",p.videoTrack?[p.videoTrack.startPts,p.videoTrack.endPts]:null,",audioTimeRange,",p.audioTrack?[p.audioTrack.startPts,p.audioTrack.endPts]:null);var m=Math.min(p.videoTrack.startPts,p.audioTrack.startPts),f=Math.max(p.videoTrack.endPts,p.audioTrack.endPts),v=[m,f];if(this.FMP4Remuxer){var b=this.FMP4Remuxer.remux(this._needInitSegment,{initMerge:!0,range:c});b.initSegment&&(this._needInitSegment=!1);var w=xn.concatData(b.audioSegment,b.videoSegment);h={buffer:w,range:c,state:o,context:{range:c,fragIndex:a,timeRange:v},initSeg:b.initSegment}}else h={videoTrack:p.videoTrack,audioTrack:p.audioTrack,buffer:null,range:c,state:o,context:{range:c,fragIndex:a,timeRange:v}};this._loadSuccessCallBack&&this._loadSuccessCallBack(h)}catch(T){console.error("mux err:",T);var C=new KZ(Jr.remux,Rr.muxError,{msg:JSON.stringify(T)});this.errorHandler(C,"mux",{fragIndex:a,range:[i,i+e.byteLength]})}}},{key:"getSamplesRange",value:function(e,i){var a=[];switch(i){case"video":if(this.videoTrak&&e<this.videoTrak.length){var o=this.videoTrak[e].frames;a.push(o[0].index),a.push(o[o.length-1].index)}break;case"audio":if(this.audioTrak&&e<this.audioTrak.length){var l=this.audioTrak[e].frames;a.push(l[0].index),a.push(l[l.length-1].index)}break;default:console.warn("[getSamplesRange] type ",i," is invalid");break}return a}},{key:"loadFragment",value:function(){var t=Gt(Ae().mark(function i(a,o){var l,u,c,d;return Ae().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(this._isPending||o===[0,0]||this.timeRange[a].isLoading)){h.next=2;break}return h.abrupt("return");case 2:if(this.log("[MP4.loadFragment] ,fragIndex,",a,",range ",o,",len ,",o[1]-o[0],", bufferLoaded_Len,",this.bufferLoaded.byteLength),!(o.length>=2&&o[1]&&o[1]>0&&o[1]<=this.bufferLoaded.byteLength)){h.next=13;break}this.timeRange[a].isLoading=!0,l=Math.max(o[0],this.bufferLoadedPos),u=new Uint8Array(this.bufferLoaded.slice(l,o[1])),this.log("[mp4.loadFragment] has all data: ",l,o[1]),this.timeRange[a].downloaded=!0,this.bufferLoadedPos=-1,this._mux(u,l,a,!0),h.next=34;break;case 13:if(!(o.length>=2&&o[0]&&o[0]<=this.bufferLoaded.byteLength)){h.next=29;break}if(this.timeRange[a].isLoading){h.next=27;break}if(c=Math.max(o[0],this.bufferLoadedPos),d=new Uint8Array(this.bufferLoaded.slice(c,o[1])),!(d.byteLength>0)){h.next=22;break}return this.bufferLoadedPos=c+d.byteLength,this.log("[mp4.loadFragment] has part data: ",c,c+d.byteLength),this._mux(d,c,a,o[1]<=this.bufferLoadedPos),h.abrupt("return");case 22:if(!(!this._metaLoading&&!this.timeRange[a].isLoading)){h.next=27;break}return this.log("[mp4.loadFragment] ready to load part data >>> ",this.bufferLoaded.byteLength,o[1]),this.timeRange[a].isLoading=!0,h.next=27,this.startLoad([this.bufferLoaded.byteLength,o[1]],a);case 27:h.next=34;break;case 29:if(!((!this._metaLoading||o[0]>=this.CHUNK_SIZE)&&!this.timeRange[a].isLoading)){h.next=34;break}return this.timeRange[a].isLoading=!0,this.log("[mp4.loadFragment],ready to load all data ,segmentIdx, ",a,",range >>> ",JSON.stringify(o)),h.next=34,this.startLoad(o,a);case 34:case"end":return h.stop()}},i,this)}));function e(i,a){return t.apply(this,arguments)}return e}()},{key:"startLoad",value:function(){var t=Gt(Ae().mark(function i(a,o){return Ae().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,this.MP4Loader.loadData(a,this.MP4Loader.cache,{index:o,onProgress:this.onprogressDataArrive,onProcessMinLen:this.options.onProcessMinLen});case 3:u.next=9;break;case 5:u.prev=5,u.t0=u.catch(0),console.error("[MP4] trigger errorHandler getMetaInfo",u.t0===null||u.t0===void 0?void 0:u.t0.message),this.loadError(u.t0,"loadFragment",{range:a,fragIndex:o});case 9:case"end":return u.stop()}},i,this,[[0,5]])}));function e(i,a){return t.apply(this,arguments)}return e}()},{key:"loadError",value:function(e,i,a){var o;!e.response&&(e.response={}),e.isTimeout?e.response.status="timeout":e!=null&&(o=e.response)!==null&&o!==void 0&&o.status||(e.response.status="networkError"),this.errorHandler(e,i,a)}},{key:"cancelLoading",value:function(){var t=Gt(Ae().mark(function i(){return Ae().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.MP4Loader;case 2:if(o.t0=o.sent,!o.t0){o.next=5;break}this.MP4Loader.cancel();case 5:case"end":return o.stop()}},i,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"update",value:function(e){this.url=e}},{key:"checkCodecH265",value:function(){var e=this.meta&&(this.meta.videoCodec.indexOf("hvc1")>-1||this.meta.videoCodec.indexOf("hev1")>-1);return e}},{key:"destroy",value:function(){this.hasDestroyed||(this.resetTansmuxer(),this.transmuxerWorkerControl&&this.transmuxerWorkerControl.destroy(),this._isPending=!1,this._metaLoading=!1,this.bufferLoadedPos=0,this.bufferLoaded=new Uint8Array(0),this.MP4Loader&&(this.MP4Loader.cancel(),this.MP4Loader.destroy()),this.hasDestroyed=!0)}},{key:"resetTansmuxer",value:function(){this.MP4Demuxer&&this.MP4Demuxer.reset(),this.MP4Demuxer=null,this.FMP4Remuxer&&this.FMP4Remuxer.reset(),this.FMP4Remuxer=null,this.transmuxerWorkerControl&&this.transmuxerWorkerControl.reset()}}],[{key:"getDefaultConfig",value:function(){return{segmentDuration:5,onProcessMinLen:1024,chunkSize:8e5,retryCount:3,retryDelay:1e3,timeout:3e3,enableWorker:!1,playerId:"",vid:"",ext:{}}}}]),n}(qn);function bD(r){if(r.keyframe)return r}var SD=function(){function r(s){Bi(this,r),this.onTick_=s,this.cancelPending_=null}return ji(r,[{key:"tickAfter",value:function(n){var t=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.stop();var i=!0,a=null;this.cancelPending_=function(){window.clearTimeout(a),i=!1};var o=function(){i&&(t.onTick_(),e&&e())};return a=window.setTimeout(o,n*1e3),this}},{key:"tickEvery",value:function(n){var t=this;this.tickAfter(n,function(){t.tickEvery(n)})}},{key:"stop",value:function(){this.cancelPending_&&(this.cancelPending_(),this.cancelPending_=null)}}]),r}(),hp=null,wD=null,fp=null,mp=null,CD=function(r){Su(n,r);var s=wu(n);function n(t){var e;return Bi(this,n),e=s.call(this,t),sn(Ct(e),"_onMp4DataCallBack",function(){e._isMseInit&&e._onTimeUpdate()}),sn(Ct(e),"_onMp4MetaReady",function(i){var a=Ct(e),o=a.config,l=e.mp4.checkCodecH265();try{if(l&&!e.config.supportHevc){var u="browser not support HEVC",c=new Un(e.player,{errorType:"runtime",errorTypeCode:Jr.runtime,errorCode:Rr.h265Error,errorMessage:u,vid:o.vid,mediaError:{code:Rr.h265Error,message:u}});e._errorHandler(c)}else e._initMse(i)}catch(h){var d=new Un(e.player,{errorType:"runtime",errorTypeCode:Jr.runtime,errorCode:Rr.mse,errorMessage:h==null?void 0:h.message,vid:o.vid,mediaError:{code:Rr.other1,message:h==null?void 0:h.message}});e._errorHandler(d)}finally{var p=e.config.url;e.mse&&(p=e.mse.url,e._proxyPlayer()),e.player._startInit.call(e.player,p)}e._loadData()}),sn(Ct(e),"_onMp4Error",function(i){var a=e.playerConfig.vid;console.error("[Index] _onMp4Error",a,i),e._errorHandler(i)}),sn(Ct(e),"_loadDataSuccess",function(i){if(!(e.isDestroy||!e.mse)){e.log("[loadFragment] _loadDataSuccess ",JSON.stringify(i.context.range),",dataLen,",i.buffer?i.buffer.byteLength:0,i.state);try{i.initSeg&&(e._appendInitSeg(i.initSeg),(!i.buffer||i.buffer.byteLength<1)&&(e.log("no data, must load data"),e._onTimeUpdate()));var a=i.buffer,o=i.state,l=i.context;if(e.mse&&o&&(!a||a.byteLength<=0)&&l.fragIndex===e.mp4.timeRange.length-1){var u=e.player.buffered;u&&u.length>0&&(e.bufferEndTime=u.end(u.length-1)),e._isEnded(),e.log("loaded ended !!!==>>>",JSON.stringify(l.range),", fragIndex,",l.fragIndex,", bufferEndTime,",e.bufferEndTime,",meta_duration,",e.mp4.meta.duration)}if(e.mse&&o&&l.fragIndex===e.mp4.timeRange.length-1&&(!a||a.byteLength<=0)){var c=e.player.buffered;c&&c.length>0&&(e.bufferEndTime=c.end(c.length-1)),e._isEnded(),e.log("load ended !!!==>>>",e.playerConfig.vid,JSON.stringify(l.range),", fragIndex,",l.fragIndex,", bufferEndTime,",e.bufferEndTime,",meta_duration,",e.mp4.meta.duration)}a&&e.mse&&a&&a.byteLength>0&&e._appendBuffer(lt.VIDEO,a,l,o)}catch(p){e.log("appendBuffer error",p);var d=new Un(e.player,{errorType:"runtime",errorTypeCode:Jr.runtime,errorCode:Rr.mse,vid:e.player.config.vid,errorMessage:p.message,mediaError:{code:Rr.mse,message:p.message}});e._errorHandler(d)}i!=null&&i.state&&e._onTimeUpdate()}}),sn(Ct(e),"_onWaiting",function(){var i=Ct(e),a=i.player,o=i.config;clearTimeout(e._waitInBufferTimer),e._waitInBufferTimer=null;var l=a.currentTime;console.log("[>>>>onWaiting],currentTime, ",l,xn.nowTime());var u=a.bufferedPoint;u.end>0&&u.end-a.currentTime>=2&&e._waitAdjustTimeCnt<o.waitJampBufferMaxCnt&&(e._waitInBufferTimer=setTimeout(function(){e._waitAdjustTimeCnt++,a.currentTime=a.currentTime+.5,e.log("[waitInBufferTimeout], waitAdjustTimeCnt,",e._waitAdjustTimeCnt,",curtime,",l,xn.nowTime())},o.waitingInBufferTimeOut))}),sn(Ct(e),"_onSeeking",Gt(Ae().mark(function i(){var a,o,l,u,c,d,p,h,m,f,v;return Ae().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(a=Ct(e),o=a.player,l=a.mp4,u=o.currentTime,e.log("[seekTime], curTime,",u,",buffer,",o.buffered2.bufferedList),!(!l||!l.meta)){w.next=5;break}return w.abrupt("return");case 5:if(e.endofstream=!1,l.bufferLoadedPos=-1,l._metaLoading=!1,c=o.bufferedPoint,d=!1,p=0,!(c.end>0)){w.next=25;break}if(d=!0,!(l.meta.duration-c.end<.5)){w.next=17;break}return e._startProgress(),e.log("[seeking in buffered range], buffer end,",c.end,", duration,",l.meta.duration),w.abrupt("return");case 17:if(p=l.getFragmentIdx(c.end),e._curLoadSegmentIdx!==p){w.next=22;break}return e._startProgress(),e.log("[seeking in buffered range], seek fragIndex is current load segmentIdx",p),w.abrupt("return");case 22:l.seekTime=c.end,p<0&&(p=e._curLoadSegmentIdx),e.log("[seeking in buffered range], seekTime ",u,",bufferRange,",c.start,"-",c.end,", fragIndex,",p);case 25:return d||(l.seekTime=u,p=l.getFragmentIdx(u),p<0&&(p=e._curLoadSegmentIdx),e.log("[seekTime out buffer range], curTime,",u,", Idx,",p),h=Ct(e),m=h.mse,m&&m.isFull()&&(f=o.buffered2.bufferedList,v=f[f.length-1],m.clearOpQueues(lt.VIDEO),e._checkRemoveSourceBuffer([v.start,v.end],o.currentTime,!0,!0))),w.next=28,l.cancelLoading();case 28:l.resetFragmentLoadState(p),e._curLoadSegmentIdx=p,e._onTimeUpdate(),e._startProgress(),e._isEnded();case 33:case"end":return w.stop()}},i)}))),sn(Ct(e),"changeDefineCanPlay",function(i,a,o,l){var u=Ct(e),c=u.player;if(c.ended){c.currentTime=0;return}e.log("[oldChangeDefinition],this._changeDefState,",e._changeDefState),c.currentTime=e._changeDefState?e._changeDefState.currentTime:i;var d=e._changeDefState?e._changeDefState.paused:a;d?c.pause():c.play(),e._changeDefState=null,c.emit(Ta,{from:o,to:l})}),sn(Ct(e),"changeDefinition",function(){var i=Gt(Ae().mark(function a(o,l){var u,c,d,p,h,m,f;return Ae().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(u=Ct(e),c=u.player,d=u.config,p=u.mp4,l||(l=c.curDefinition),e._MSEError=!1,!d.witchBitRateWay){b.next=6;break}return e.oldChangeDefinition(o,l),b.abrupt("return");case 6:if(c.emit(eo,{from:l,to:o}),h=c.currentTime,m=p.getFragmentIdx(h),m<0&&(m=e._curLoadSegmentIdx),e.log("switchBitrate:point,fragIndex,",m,",startTime,",p.timeRange[m].startTime,",currentTime,",c.currentTime),!p){b.next=16;break}return e.mp4.changeBitRateTime=h,b.next=15,p.cancelLoading();case 15:p._metaLoading&&(p._metaLoading=!1);case 16:return e._removeBuffeEndTime=p.timeRange[m].startTime,e._isChangeDefinition=!0,f=c.getBufferedRange(c.buffered),f[1]>0&&f[1]-c.currentTime>5&&(e.mse.clearOpQueues(lt.VIDEO),e.mse.remove(lt.VIDEO,c.currentTime+5,f[1])),e.log("switchBitrate: resetFragmentLoadState,",m),p.resetFragmentLoadState(m),e._curLoadSegmentIdx=m,b.next=25,e.mp4.changeBitRate(o);case 25:e._onTimeUpdate(),c.emit("RESOLUTION_UPDATE",o);case 27:case"end":return b.stop()}},a)}));return function(a,o){return i.apply(this,arguments)}}()),sn(Ct(e),"_replayHook",function(){var i;return(i=e.player)===null||i===void 0||i.play(),!1}),sn(Ct(e),"_retryHook",function(){return e.beforePlayerInit(),!1}),e.mp4=null,e.mse=null,e._waitAdjustTimeCnt=0,e._lastCheckTime=xn.nowTime(),e._removeBuffeEndTime=0,e}return ji(n,[{key:"afterCreate",value:function(){var e=this;window.__mp4player=this;try{pn.defineGetterOrSetter(this.player,{__url:{get:function(){try{return e.mse?e.mse.url:e.config.url}catch{return null}}}})}catch{}}},{key:"beforePlayerInit",value:function(){var e=this.config;e.supportHevc===void 0&&Te!=null&&Te.isHevcSupported&&Te.isHevcSupported()&&(e.supportHevc=!0),this.initMp4(),this.attachEvents(),this._startProgress()}},{key:"attachEvents",value:function(){this.off(Fi,this._onSeeking),this.on(Fi,this._onSeeking),this.on(si,this._onWaiting),this.off(mr,this.switchURL),this.on(mr,this.switchURL)}},{key:"detachEvents",value:function(){this.off(Fi,this._onSeeking),this.off(si,this._onWaiting),this.off(mr,this.switchURL)}},{key:"initMp4",value:function(){var e=this,i=this.player;i.config.vid||(i.config.vid=Date.now()),this.mp4&&(this.mp4.off(Vt.META_READY,this._onMp4MetaReady),this.mp4.off(Vt.ERROR,this._onMp4Error),this.mp4.off(Vt.MOOV_REQ_PROGRESS,this._onMp4DataCallBack),this.mp4.destroy()),this.mp4=new gD(i.config.url,Ir(Ir({},this.config),{},{vid:i.config.vid})),this.mp4.on(Vt.META_READY,this._onMp4MetaReady),this.mp4.on(Vt.ERROR,this._onMp4Error),this.mp4.on(Vt.MOOV_REQ_PROGRESS,this._onMp4DataCallBack),this.mp4.on(Vt.UPDATE_LOAD_IDX,function(a){e._curLoadSegmentIdx=a,e.log("[update curLoadSegmentIdx]",a)}),this.mp4.init()}},{key:"_proxyPlayer",value:function(){var e=this;typeof this.player.playNext=="function"&&(hp=this.player.playNext),this.player.playNext=function(){e.playNext.apply(e,arguments)},mp=this.player.switchURL,fp=this.player.changeDefinition,this.player.switchURL=this.switchURL.bind(this),this.player.changeDefinition=this.changeDefinition.bind(this),this.player.removeHooks("replay",this._replayHook),this.player.removeHooks("retry",this._retryHook)}},{key:"setConfig",value:function(e){this.config=Object.assign(this.config,e)}},{key:"playNext",value:function(e){var i=this.player;this._defInited=!1,i.resetState(),i._currentTime=0,i._duration=0,i.isPlaying=!1,this._MSEError=!1,i.pause(),this._reset(),i.setConfig(e),this.log("[Index] playNext",e),i.play(),this.emit("playnext")}},{key:"_errorHandler",value:function(e){var i=this.player,a=this.config;i&&(console.log("final error !!!!, ",a.vid,e),this.emit("error",e))}},{key:"_initMse",value:function(){var t=Gt(Ae().mark(function i(a){var o=this,l,u,c,d,p,h;return Ae().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!this.mse){f.next=4;break}return f.next=3,this.mse.unbindMedia();case 3:this.mse=null;case 4:l=this.mp4&&this.mp4.checkCodecH265(),u=!!a.videoCodec,c=!!a.audioCodec,u&&c?d=l?'video/mp4; codecs="hev1.1.6.L93.B0, mp4a.40.5"':'video/mp4; codecs="avc1.64001E, mp4a.40.5"':u?d=l?'video/mp4; codecs="hev1.1.6.L93.B0"':'video/mp4; codecs="avc1.64001E"':d='video/mp4; codecs="mp4a.40.5"',p=sn({},lt.VIDEO,{mimeType:"video/mp4",codec:d}),this.mse=new lt,h=this.mse.bindMedia(this.player.video),h.then(function(){var v=Object.keys(p);try{for(var b=0;b<v.length;b++){var w=v[b];o.mse.createSource(w,p[w].codec)}}catch(C){console.error("MSE error: ",C),o._errorHandler(C)}o._isMseInit=!0,o._onTimeUpdate()});case 12:case"end":return f.stop()}},i,this)}));function e(i){return t.apply(this,arguments)}return e}()},{key:"_onTimeUpdate",value:function(){var e=this,i=this.mse,a=this.mp4,o=this.player,l=this.config;if(a){var u=a.timeRange,c=o.getBufferedRange(o.buffered2);if(i&&a&&a.canDownload){xn.nowTime()-this._lastCheckTime>1e3&&(this._lastCheckTime=xn.nowTime(),this._loadStuckCheck(),this._checkRemoveSourceBuffer(c,o.currentTime));var d=o.paused?o.currentTime+l.minBufferLength:o.currentTime+l.maxBufferLength;c[1]-d<0&&u.every(function(p,h){if(p.downloaded)return!0;if(!e._isChangeDefinition&&p.endTime-p.startTime>1&&e._isInBuffer(p))return p.downloaded=!0,p.isLoading=!0,e.log("onTimeUpdate, ".concat(h," download segment, has buffer"),p.startTime,p.endTime),!0;p.startTime-o.currentTime<l.maxBufferLength&&(e._curLoadSegmentIdx=h,e.log("[onTimeUpdate],load index==>>>, ",h,",IdxTimeRange, ",p.startTime,"-",p.endTime,",buffEnd, ",c[1],",playCurTime,",o.currentTime,", bufferLen,",c[1]-o.currentTime,",bufferRangeList,",e.player.buffered2?e.player.buffered2.bufferedList:null),e._loadData())}),this._isEnded()}this.checkRemoveOldBitrateBuffer()}}},{key:"checkRemoveOldBitrateBuffer",value:function(){var e=this.mse,i=this.player;e&&this._removeBuffeEndTime>0&&i.currentTime>this._removeBuffeEndTime+1&&(this.log("remove old bitrate buffer",this._removeBuffeEndTime),e.remove(lt.VIDEO,0,this._removeBuffeEndTime-1),this._removeBuffeEndTime=0)}},{key:"_isInBuffer",value:function(e){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=!1,o=this.player.video.buffered,l=0;l<o.length;l++){var u=o.start(l)-i,c=o.end(l)+i;if(u<=e.startTime&&e.endTime<=c){a=!0;break}}return a}},{key:"_loadData",value:function(){var t=Gt(Ae().mark(function i(){return Ae().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(!this.mp4||!this._isMseInit)){o.next=3;break}return this.log("loadData, player.mp4 null",this._isMseInit),o.abrupt("return");case 3:return o.prev=3,o.next=6,this.mp4.load(this._curLoadSegmentIdx,this._loadDataSuccess);case 6:o.next=11;break;case 8:o.prev=8,o.t0=o.catch(3),console.error("[Index] _loadData error",this.playerConfig.vid,o.t0);case 11:case"end":return o.stop()}},i,this,[[3,8]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"_appendInitSeg",value:function(e){var i=this;!this.mp4||!this.mse||this.mse.append(lt.VIDEO,e,{vid:this.playerConfig.vid,range:null,dataLen:e.byteLength,isinit:!0}).then(function(a){i.log("appendInitSeg end ==>>>",a.context?a.context:null,", costTime,",a.costtime)})}},{key:"_appendBuffer",value:function(e,i){var a=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0,u=this.mse,c=this.config;u.append(e,i,{vid:c.vid,fragIndex:o.fragIndex,range:o.range,dataLen:i.byteLength,state:l}).then(function(d){if(a.log("player appendBuffer end ==>>>",d.context?d.context:null,", costTime,",d.costtime,", opt,",d.name,",bufferRange,",a.player.getBufferedRange()),a.mse&&o.state&&o.fragIndex===a.mp4.timeRange.length-1){var p=a.player.buffered;p&&p.length>0&&(a.bufferEndTime=p.end(p.length-1)),a._isEnded(),a.log("loaded ended !!!==>>>",o.range,", fragIndex,",o.fragIndex,", bufferEndTime,",a.bufferEndTime,",meta_duration,",a.mp4.meta.duration)}}).catch(function(d){if(console.log("[MSE error]",d),d&&u!==null&&u!==void 0&&u.isFull()){var p=a.player.getBufferedRange(a.player.buffered2);a._checkRemoveSourceBuffer(p,a.player.currentTime,!0)}})}},{key:"_checkRemoveSourceBuffer",value:function(e,i,a){var o=this,l=this.mse,u=this.mp4,c=this.player;if(!(!l||!u||!c)&&(a&&(clearTimeout(this._removeBufferTimer),this._removeBufferTimer=null),e||(e=c.getBufferedRange(c.buffered2)),i||(i=c.currentTime),!(!a&&xn.nowTime()-this._checkRemoveBufferLastTime<=this.config.removeBufferLen||this.endofstream)&&(this._checkRemoveBufferLastTime=xn.nowTime(),e&&e[0]>=0&&(i-e[0]>this.config.removeBufferLen||l.isFull())))){var d=e[1],p=u.getFragmentIdx(d);if(p>=0&&u.timeRange[p].startTime<i){var h=Math.floor(Math.min(u.timeRange[p].startTime,e[1]));e[0]<h?(this.log("[checkremoveSourceBuffer], remove range==>>>",e[0],h),l.remove(lt.VIDEO,e[0],h)):l.isFull()&&!this._removeBufferTimer&&(this._removeBufferTimer=setTimeout(function(){o._checkRemoveSourceBuffer(null,null,!0)},10*1e3))}}}},{key:"_isEnded",value:function(){var e=this.player,i=this.mp4,a=e.bufferedPoint,o=a?a.end:0;return!this.endofstream&&this.mse&&i.meta.duration-e.currentTime<.5&&(this.log("[check player isEnded],deal mse.endOfStream, currentTime,",e.currentTime,", bufferend,",o,", duration,",i.meta.duration),this.endofstream=!0,this.mse.endOfStream()),i&&i.meta&&i.meta.duration-e.currentTime<.5?(this._stopProgress(),this.log("[check player isEnded],stopProgress and endOfStream,currentTime, ",e.currentTime,", bufferend,",o,", duration,",i.meta.duration),this.mse&&this.mse.endOfStream(),!0):!1}},{key:"switchURL",value:function(e){this.changeDefinition(e)}},{key:"oldChangeDefinition",value:function(e,i){var a=this,o=this.config,l=this.player;this.log("[oldChangeDefinition],currentTime,",l.currentTime,",from,",i,",to,",e);var u=l.currentTime,c=l.paused;this._changeDefState||(this._changeDefState={currentTime:u,paused:c},this.log("[oldChangeDefinition],currentTime,",l.currentTime,",pause,",c)),l.config.url=e.url,o.focusUserDefinition=!0,l.currentTime=0,l.pause(),this._reset(),this._isMseInit=!1,this._changeDefineCanPlay&&l.off("canplay",this._changeDefineCanPlay),this._changeDefineCanPlay=function(){a.changeDefineCanPlay(u,c,i,e),a._changeDefineCanPlay=null},l.once("canplay",this._changeDefineCanPlay),this.player.video.load(),this.initMp4()}},{key:"_loadStuckCheck",value:function(){var e=this,i=this.config,a=this.player;i.disableBufferBreakCheck||(a.currentTime-(this._lastCurrentTime||0)>.1||a.paused?(this._bufferBreakFlag===1||this._bufferBreakFlag===2)&&(this.log("视频没有卡死,重置卡死标记"),this._bufferBreakFlag=0,clearTimeout(this._bufferBreakTimer),this._bufferBreakFlag=null):this._bufferBreakFlag||(this._bufferBreakFlag=1,this.log("卡死计时开始! 持续".concat(i.waitingTimeOut,"毫秒则确认卡死")),this._bufferBreakTimer=setTimeout(function(){e.isDestroy||(e._bufferBreakFlag===1&&(e._bufferBreakFlag=2,e.log("确认卡死!!!"),e._errorHandler(new Un(e.player,{errorType:"runtime",errorTypeCode:Jr.runtime,errorCode:Rr.waitTimeout,errorMessage:"wait_timeout",vid:i.vid}))),e._bufferBreakTimer=null)},i.waitingTimeOut)),this._lastCurrentTime=a.currentTime)}},{key:"isDestroy",get:function(){return!this.player}},{key:"_stopProgress",value:function(){this._hasStartProgress=!1,this._requestTimer&&(this._requestTimer.stop(),this._requestTimer=null),this._bufferBreakTimer&&(clearTimeout(this._bufferBreakTimer),this._bufferBreakTimer=null,this._bufferBreakFlag=void 0)}},{key:"_startProgress",value:function(){var e=this;this._hasStartProgress||(this._stopProgress(),this._requestTimer=new SD(function(){e._requestTimer&&e._onTimeUpdate()}),this._requestTimer.tickEvery(this.config.tickInSeconds),this._hasStartProgress=!0)}},{key:"log",value:function(e){for(var i=this.playerConfig,a=i&&i.vid?"[Index]".concat(i.vid," ").concat(e):"[Index] ".concat(e),o=arguments.length,l=new Array(o>1?o-1:0),u=1;u<o;u++)l[u-1]=arguments[u];$f.apply(void 0,[a].concat(l))}},{key:"_reset",value:function(){this._isMseInit=!1,this.endofstream=!1,this._curLoadSegmentIdx=0,this._removeBuffeEndTime=0,this._isChangeDefinition=!1,this._stopProgress(),this.mp4&&(this.mp4.off(Vt.META_READY,this._onMp4MetaReady),this.mp4.off(Vt.ERROR,this._onMp4Error),this.mp4.off(Vt.MOOV_REQ_PROGRESS,this._onMp4DataCallBack),this.mp4.destroy(),this.mp4=null),this.mse&&(this.mse.unbindMedia(),this.mse=null),this._unloadVideo()}},{key:"_unloadVideo",value:function(){var e=this.player;try{this.log("unloadVideo src ".concat(e.video.src)),e.video&&e.video.src&&(e.video.removeAttribute("src"),e.video.load())}catch(i){this.log("unloadVideo error",i)}}},{key:"destroy",value:function(){var e=this.player;e.removeHooks("replay",this._replayHook),e.removeHooks("retry",this._retryHook),this.detachEvents(),this._reset(),this.player.playNext=hp,this.player._startInit=wD,this.player.changeDefinition=fp,this.player.switchURL=mp,this._bufferBreakTimer&&clearInterval(this._bufferBreakTimer),this._removeBufferTimer&&(clearTimeout(this._removeBufferTimer),this._removeBufferTimer=null),this._waitInBufferTimer&&(clearTimeout(this._waitInBufferTimer),this._waitInBufferTimer=null)}}],[{key:"pluginName",get:function(){return"mp4Plugin"}},{key:"defaultConfig",get:function(){return{maxBufferLength:40,minBufferLength:5,disableBufferBreakCheck:!1,waitingTimeOut:15e3,waitingInBufferTimeOut:5e3,waitJampBufferMaxCnt:3,tickInSeconds:.1,reqOptions:null}}},{key:"version",get:function(){return"3.0.7"}}]),n}(pn);const LD=ye("div",{id:"mse"},null,-1),TD={__name:"Vue3VideoPlay",setup(r){zn({type:null});const s=zn({url:[{value:"https://stream7.iqilu.com/10339/upload_transcode/202002/18/20200218114723HDu3hhxqIT.mp4",label:"mp4测试用例"},{value:"https://vip.lz-cdn5.com/20220401/3315_dbd60bc0/index.m3u8",label:"m3u8测试用例"},{value:"https://sf1-hscdn-tos.pstatp.com/obj/media-fe/xgplayer_doc_video/flv/xgplayer-demo-360p.flv",label:"flv测试用例"}]}),n=zn({id:"mse",url:"https://vip.lz-cdn5.com/20220401/3315_dbd60bc0/index.m3u8",height:"300",width:"400",fluid:!0,fitVideoSize:"auto",volume:.6,autoplay:!1,loop:!1,videoInit:!0,poster:"",playbackRate:[.5,.75,1,1.5,2],defaultPlaybackRate:1.5,rotate:{clockwise:!0,innerRotate:!0},playsinline:!0,plugins:[],playsinline:!0,whitelist:[""],keyShortcut:"on",closeVideoClick:!0,closeVideoDblclick:!0,closeVideoTouch:!0,playbackRate:[null],pip:!0,download:!0,thumbnail:{pic_num:44,width:160,height:90,col:10,row:10,urls:[""]},progressDot:[{time:10,text:"标记文字",duration:8,style:{background:"blue"}},{time:22,text:"标记文字"},{time:56,duration:8},{time:76}]});let t=ee();Tt(()=>{n.plugins.push(Xa),t.value=new Xn(n)});const e=()=>{if(t.value.destroy(),n.url){let i=n.url.split(".").at(-1);switch(console.log(i),i){case"m3u8":n.plugins=[Xa];break;case"flv":n.plugins=[Uf];break;case"mp4":n.plugins=[CD];break;default:n.plugins=[]}t.value=new Xn(n)}};return(i,a)=>($(),Re(F(eL),null,{default:pe(()=>[He(F(gw),{"label-width":"100px"},{default:pe(()=>[He(F(pL),null,{default:pe(()=>[He(F(jc),{span:11,offset:0},{default:pe(()=>[He(F(Xc),{label:"视频源src"},{default:pe(()=>[He(F(PL),{modelValue:n.url,"onUpdate:modelValue":a[0]||(a[0]=o=>n.url=o),placeholder:"请输入视频源（src）",onChange:e,clearable:""},{default:pe(()=>[($(!0),me(In,null,aa(s.url,o=>($(),Re(F(ML),{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),He(F(jc),{span:11,offset:0},{default:pe(()=>[He(F(Xc),{label:"视频源src"},{default:pe(()=>[He(F(vh),{modelValue:n.url,"onUpdate:modelValue":a[1]||(a[1]=o=>n.url=o),placeholder:"请输入视频源（src）",onChange:e,clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),LD]),_:1}))}},kD=ye("h1",{id:"vue3videoplay-demo",tabindex:"-1"},[Na("Vue3VideoPlay Demo "),ye("a",{class:"header-anchor",href:"#vue3videoplay-demo","aria-label":'Permalink to "Vue3VideoPlay Demo"'},"​")],-1),_D=ye("br",null,null,-1),ZD=ye("h2",{id:"测试用例",tabindex:"-1"},[Na("测试用例 "),ye("a",{class:"header-anchor",href:"#测试用例","aria-label":'Permalink to "测试用例"'},"​")],-1),DD=Sm("",4),ID=JSON.parse('{"title":"Vue3VideoPlay Demo","description":"","frontmatter":{},"headers":[],"relativePath":"pages/ComponentsExample/Vue3VideoPlay.md","filePath":"pages/ComponentsExample/Vue3VideoPlay.md","lastUpdated":1690538259000}'),ED={name:"pages/ComponentsExample/Vue3VideoPlay.md"},PD=Object.assign(ED,{setup(r){return(s,n)=>{const t=or("client-only");return $(),me("div",null,[kD,_D,ZD,He(t,null,{default:pe(()=>[He(TD)]),_:1}),DD])}}});export{ID as __pageData,PD as default};
